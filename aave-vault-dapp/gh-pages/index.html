<!doctype html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>Aave Vault DApp</title>
    <script type="module" crossorigin>var _I=Object.defineProperty;var eE=t=>{throw TypeError(t)};var PI=(t,e,n)=>e in t?_I(t,e,{enumerable:!0,configurable:!0,writable:!0,value:n}):t[e]=n;var Q=(t,e,n)=>PI(t,typeof e!="symbol"?e+"":e,n),Kg=(t,e,n)=>e.has(t)||eE("Cannot "+n);var k=(t,e,n)=>(Kg(t,e,"read from private field"),n?n.call(t):e.get(t)),Z=(t,e,n)=>e.has(t)?eE("Cannot add the same private member more than once"):e instanceof WeakSet?e.add(t):e.set(t,n),H=(t,e,n,r)=>(Kg(t,e,"write to private field"),r?r.call(t,n):e.set(t,n),n),ce=(t,e,n)=>(Kg(t,e,"access private method"),n);var Pu=(t,e,n,r)=>({set _(i){H(t,e,i,n)},get _(){return k(t,e,r)}});(function(){const e=document.createElement("link").relList;if(e&&e.supports&&e.supports("modulepreload"))return;for(const i of document.querySelectorAll('link[rel="modulepreload"]'))r(i);new MutationObserver(i=>{for(const s of i)if(s.type==="childList")for(const o of s.addedNodes)o.tagName==="LINK"&&o.rel==="modulepreload"&&r(o)}).observe(document,{childList:!0,subtree:!0});function n(i){const s={};return i.integrity&&(s.integrity=i.integrity),i.referrerPolicy&&(s.referrerPolicy=i.referrerPolicy),i.crossOrigin==="use-credentials"?s.credentials="include":i.crossOrigin==="anonymous"?s.credentials="omit":s.credentials="same-origin",s}function r(i){if(i.ep)return;i.ep=!0;const s=n(i);fetch(i.href,s)}})();var zf=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};function Q0(t){return t&&t.__esModule&&Object.prototype.hasOwnProperty.call(t,"default")?t.default:t}var ZC={exports:{}},Y0={},XC={exports:{}},Me={};/**
 * @license React
 * react.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var _f=Symbol.for("react.element"),TI=Symbol.for("react.portal"),RI=Symbol.for("react.fragment"),II=Symbol.for("react.strict_mode"),OI=Symbol.for("react.profiler"),NI=Symbol.for("react.provider"),MI=Symbol.for("react.context"),LI=Symbol.for("react.forward_ref"),BI=Symbol.for("react.suspense"),DI=Symbol.for("react.memo"),$I=Symbol.for("react.lazy"),tE=Symbol.iterator;function UI(t){return t===null||typeof t!="object"?null:(t=tE&&t[tE]||t["@@iterator"],typeof t=="function"?t:null)}var ex={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},tx=Object.assign,nx={};function wu(t,e,n){this.props=t,this.context=e,this.refs=nx,this.updater=n||ex}wu.prototype.isReactComponent={};wu.prototype.setState=function(t,e){if(typeof t!="object"&&typeof t!="function"&&t!=null)throw Error("setState(...): takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,t,e,"setState")};wu.prototype.forceUpdate=function(t){this.updater.enqueueForceUpdate(this,t,"forceUpdate")};function rx(){}rx.prototype=wu.prototype;function zw(t,e,n){this.props=t,this.context=e,this.refs=nx,this.updater=n||ex}var Vw=zw.prototype=new rx;Vw.constructor=zw;tx(Vw,wu.prototype);Vw.isPureReactComponent=!0;var nE=Array.isArray,ix=Object.prototype.hasOwnProperty,Gw={current:null},sx={key:!0,ref:!0,__self:!0,__source:!0};function ox(t,e,n){var r,i={},s=null,o=null;if(e!=null)for(r in e.ref!==void 0&&(o=e.ref),e.key!==void 0&&(s=""+e.key),e)ix.call(e,r)&&!sx.hasOwnProperty(r)&&(i[r]=e[r]);var a=arguments.length-2;if(a===1)i.children=n;else if(1<a){for(var l=Array(a),c=0;c<a;c++)l[c]=arguments[c+2];i.children=l}if(t&&t.defaultProps)for(r in a=t.defaultProps,a)i[r]===void 0&&(i[r]=a[r]);return{$$typeof:_f,type:t,key:s,ref:o,props:i,_owner:Gw.current}}function FI(t,e){return{$$typeof:_f,type:t.type,key:e,ref:t.ref,props:t.props,_owner:t._owner}}function Ww(t){return typeof t=="object"&&t!==null&&t.$$typeof===_f}function jI(t){var e={"=":"=0",":":"=2"};return"$"+t.replace(/[=:]/g,function(n){return e[n]})}var rE=/\/+/g;function zg(t,e){return typeof t=="object"&&t!==null&&t.key!=null?jI(""+t.key):e.toString(36)}function Kh(t,e,n,r,i){var s=typeof t;(s==="undefined"||s==="boolean")&&(t=null);var o=!1;if(t===null)o=!0;else switch(s){case"string":case"number":o=!0;break;case"object":switch(t.$$typeof){case _f:case TI:o=!0}}if(o)return o=t,i=i(o),t=r===""?"."+zg(o,0):r,nE(i)?(n="",t!=null&&(n=t.replace(rE,"$&/")+"/"),Kh(i,e,n,"",function(c){return c})):i!=null&&(Ww(i)&&(i=FI(i,n+(!i.key||o&&o.key===i.key?"":(""+i.key).replace(rE,"$&/")+"/")+t)),e.push(i)),1;if(o=0,r=r===""?".":r+":",nE(t))for(var a=0;a<t.length;a++){s=t[a];var l=r+zg(s,a);o+=Kh(s,e,n,l,i)}else if(l=UI(t),typeof l=="function")for(t=l.call(t),a=0;!(s=t.next()).done;)s=s.value,l=r+zg(s,a++),o+=Kh(s,e,n,l,i);else if(s==="object")throw e=String(t),Error("Objects are not valid as a React child (found: "+(e==="[object Object]"?"object with keys {"+Object.keys(t).join(", ")+"}":e)+"). If you meant to render a collection of children, use an array instead.");return o}function Vf(t,e,n){if(t==null)return t;var r=[],i=0;return Kh(t,r,"","",function(s){return e.call(n,s,i++)}),r}function HI(t){if(t._status===-1){var e=t._result;e=e(),e.then(function(n){(t._status===0||t._status===-1)&&(t._status=1,t._result=n)},function(n){(t._status===0||t._status===-1)&&(t._status=2,t._result=n)}),t._status===-1&&(t._status=0,t._result=e)}if(t._status===1)return t._result.default;throw t._result}var xn={current:null},zh={transition:null},KI={ReactCurrentDispatcher:xn,ReactCurrentBatchConfig:zh,ReactCurrentOwner:Gw};function ax(){throw Error("act(...) is not supported in production builds of React.")}Me.Children={map:Vf,forEach:function(t,e,n){Vf(t,function(){e.apply(this,arguments)},n)},count:function(t){var e=0;return Vf(t,function(){e++}),e},toArray:function(t){return Vf(t,function(e){return e})||[]},only:function(t){if(!Ww(t))throw Error("React.Children.only expected to receive a single React element child.");return t}};Me.Component=wu;Me.Fragment=RI;Me.Profiler=OI;Me.PureComponent=zw;Me.StrictMode=II;Me.Suspense=BI;Me.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=KI;Me.act=ax;Me.cloneElement=function(t,e,n){if(t==null)throw Error("React.cloneElement(...): The argument must be a React element, but you passed "+t+".");var r=tx({},t.props),i=t.key,s=t.ref,o=t._owner;if(e!=null){if(e.ref!==void 0&&(s=e.ref,o=Gw.current),e.key!==void 0&&(i=""+e.key),t.type&&t.type.defaultProps)var a=t.type.defaultProps;for(l in e)ix.call(e,l)&&!sx.hasOwnProperty(l)&&(r[l]=e[l]===void 0&&a!==void 0?a[l]:e[l])}var l=arguments.length-2;if(l===1)r.children=n;else if(1<l){a=Array(l);for(var c=0;c<l;c++)a[c]=arguments[c+2];r.children=a}return{$$typeof:_f,type:t.type,key:i,ref:s,props:r,_owner:o}};Me.createContext=function(t){return t={$$typeof:MI,_currentValue:t,_currentValue2:t,_threadCount:0,Provider:null,Consumer:null,_defaultValue:null,_globalName:null},t.Provider={$$typeof:NI,_context:t},t.Consumer=t};Me.createElement=ox;Me.createFactory=function(t){var e=ox.bind(null,t);return e.type=t,e};Me.createRef=function(){return{current:null}};Me.forwardRef=function(t){return{$$typeof:LI,render:t}};Me.isValidElement=Ww;Me.lazy=function(t){return{$$typeof:$I,_payload:{_status:-1,_result:t},_init:HI}};Me.memo=function(t,e){return{$$typeof:DI,type:t,compare:e===void 0?null:e}};Me.startTransition=function(t){var e=zh.transition;zh.transition={};try{t()}finally{zh.transition=e}};Me.unstable_act=ax;Me.useCallback=function(t,e){return xn.current.useCallback(t,e)};Me.useContext=function(t){return xn.current.useContext(t)};Me.useDebugValue=function(){};Me.useDeferredValue=function(t){return xn.current.useDeferredValue(t)};Me.useEffect=function(t,e){return xn.current.useEffect(t,e)};Me.useId=function(){return xn.current.useId()};Me.useImperativeHandle=function(t,e,n){return xn.current.useImperativeHandle(t,e,n)};Me.useInsertionEffect=function(t,e){return xn.current.useInsertionEffect(t,e)};Me.useLayoutEffect=function(t,e){return xn.current.useLayoutEffect(t,e)};Me.useMemo=function(t,e){return xn.current.useMemo(t,e)};Me.useReducer=function(t,e,n){return xn.current.useReducer(t,e,n)};Me.useRef=function(t){return xn.current.useRef(t)};Me.useState=function(t){return xn.current.useState(t)};Me.useSyncExternalStore=function(t,e,n){return xn.current.useSyncExternalStore(t,e,n)};Me.useTransition=function(){return xn.current.useTransition()};Me.version="18.3.1";XC.exports=Me;var Xe=XC.exports;const zI=Q0(Xe);/**
 * @license React
 * react-jsx-runtime.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var VI=Xe,GI=Symbol.for("react.element"),WI=Symbol.for("react.fragment"),qI=Object.prototype.hasOwnProperty,QI=VI.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED.ReactCurrentOwner,YI={key:!0,ref:!0,__self:!0,__source:!0};function lx(t,e,n){var r,i={},s=null,o=null;n!==void 0&&(s=""+n),e.key!==void 0&&(s=""+e.key),e.ref!==void 0&&(o=e.ref);for(r in e)qI.call(e,r)&&!YI.hasOwnProperty(r)&&(i[r]=e[r]);if(t&&t.defaultProps)for(r in e=t.defaultProps,e)i[r]===void 0&&(i[r]=e[r]);return{$$typeof:GI,type:t,key:s,ref:o,props:i,_owner:QI.current}}Y0.Fragment=WI;Y0.jsx=lx;Y0.jsxs=lx;ZC.exports=Y0;var me=ZC.exports,ky={},cx={exports:{}},sr={},ux={exports:{}},dx={};/**
 * @license React
 * scheduler.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */(function(t){function e(b,E){var _=b.length;b.push(E);e:for(;0<_;){var I=_-1>>>1,A=b[I];if(0<i(A,E))b[I]=E,b[_]=A,_=I;else break e}}function n(b){return b.length===0?null:b[0]}function r(b){if(b.length===0)return null;var E=b[0],_=b.pop();if(_!==E){b[0]=_;e:for(var I=0,A=b.length,S=A>>>1;I<S;){var P=2*(I+1)-1,R=b[P],L=P+1,F=b[L];if(0>i(R,_))L<A&&0>i(F,R)?(b[I]=F,b[L]=_,I=L):(b[I]=R,b[P]=_,I=P);else if(L<A&&0>i(F,_))b[I]=F,b[L]=_,I=L;else break e}}return E}function i(b,E){var _=b.sortIndex-E.sortIndex;return _!==0?_:b.id-E.id}if(typeof performance=="object"&&typeof performance.now=="function"){var s=performance;t.unstable_now=function(){return s.now()}}else{var o=Date,a=o.now();t.unstable_now=function(){return o.now()-a}}var l=[],c=[],u=1,d=null,f=3,h=!1,m=!1,g=!1,w=typeof setTimeout=="function"?setTimeout:null,p=typeof clearTimeout=="function"?clearTimeout:null,v=typeof setImmediate<"u"?setImmediate:null;typeof navigator<"u"&&navigator.scheduling!==void 0&&navigator.scheduling.isInputPending!==void 0&&navigator.scheduling.isInputPending.bind(navigator.scheduling);function y(b){for(var E=n(c);E!==null;){if(E.callback===null)r(c);else if(E.startTime<=b)r(c),E.sortIndex=E.expirationTime,e(l,E);else break;E=n(c)}}function x(b){if(g=!1,y(b),!m)if(n(l)!==null)m=!0,O(T);else{var E=n(c);E!==null&&D(x,E.startTime-b)}}function T(b,E){m=!1,g&&(g=!1,p(M),M=-1),h=!0;var _=f;try{for(y(E),d=n(l);d!==null&&(!(d.expirationTime>E)||b&&!W());){var I=d.callback;if(typeof I=="function"){d.callback=null,f=d.priorityLevel;var A=I(d.expirationTime<=E);E=t.unstable_now(),typeof A=="function"?d.callback=A:d===n(l)&&r(l),y(E)}else r(l);d=n(l)}if(d!==null)var S=!0;else{var P=n(c);P!==null&&D(x,P.startTime-E),S=!1}return S}finally{d=null,f=_,h=!1}}var B=!1,j=null,M=-1,K=5,U=-1;function W(){return!(t.unstable_now()-U<K)}function z(){if(j!==null){var b=t.unstable_now();U=b;var E=!0;try{E=j(!0,b)}finally{E?$():(B=!1,j=null)}}else B=!1}var $;if(typeof v=="function")$=function(){v(z)};else if(typeof MessageChannel<"u"){var N=new MessageChannel,C=N.port2;N.port1.onmessage=z,$=function(){C.postMessage(null)}}else $=function(){w(z,0)};function O(b){j=b,B||(B=!0,$())}function D(b,E){M=w(function(){b(t.unstable_now())},E)}t.unstable_IdlePriority=5,t.unstable_ImmediatePriority=1,t.unstable_LowPriority=4,t.unstable_NormalPriority=3,t.unstable_Profiling=null,t.unstable_UserBlockingPriority=2,t.unstable_cancelCallback=function(b){b.callback=null},t.unstable_continueExecution=function(){m||h||(m=!0,O(T))},t.unstable_forceFrameRate=function(b){0>b||125<b?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):K=0<b?Math.floor(1e3/b):5},t.unstable_getCurrentPriorityLevel=function(){return f},t.unstable_getFirstCallbackNode=function(){return n(l)},t.unstable_next=function(b){switch(f){case 1:case 2:case 3:var E=3;break;default:E=f}var _=f;f=E;try{return b()}finally{f=_}},t.unstable_pauseExecution=function(){},t.unstable_requestPaint=function(){},t.unstable_runWithPriority=function(b,E){switch(b){case 1:case 2:case 3:case 4:case 5:break;default:b=3}var _=f;f=b;try{return E()}finally{f=_}},t.unstable_scheduleCallback=function(b,E,_){var I=t.unstable_now();switch(typeof _=="object"&&_!==null?(_=_.delay,_=typeof _=="number"&&0<_?I+_:I):_=I,b){case 1:var A=-1;break;case 2:A=250;break;case 5:A=1073741823;break;case 4:A=1e4;break;default:A=5e3}return A=_+A,b={id:u++,callback:E,priorityLevel:b,startTime:_,expirationTime:A,sortIndex:-1},_>I?(b.sortIndex=_,e(c,b),n(l)===null&&b===n(c)&&(g?(p(M),M=-1):g=!0,D(x,_-I))):(b.sortIndex=A,e(l,b),m||h||(m=!0,O(T))),b},t.unstable_shouldYield=W,t.unstable_wrapCallback=function(b){var E=f;return function(){var _=f;f=E;try{return b.apply(this,arguments)}finally{f=_}}}})(dx);ux.exports=dx;var JI=ux.exports;/**
 * @license React
 * react-dom.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var ZI=Xe,ir=JI;function ue(t){for(var e="https://reactjs.org/docs/error-decoder.html?invariant="+t,n=1;n<arguments.length;n++)e+="&args[]="+encodeURIComponent(arguments[n]);return"Minified React error #"+t+"; visit "+e+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}var fx=new Set,xd={};function al(t,e){eu(t,e),eu(t+"Capture",e)}function eu(t,e){for(xd[t]=e,t=0;t<e.length;t++)fx.add(e[t])}var Es=!(typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"),_y=Object.prototype.hasOwnProperty,XI=/^[:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD][:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD\-.0-9\u00B7\u0300-\u036F\u203F-\u2040]*$/,iE={},sE={};function eO(t){return _y.call(sE,t)?!0:_y.call(iE,t)?!1:XI.test(t)?sE[t]=!0:(iE[t]=!0,!1)}function tO(t,e,n,r){if(n!==null&&n.type===0)return!1;switch(typeof e){case"function":case"symbol":return!0;case"boolean":return r?!1:n!==null?!n.acceptsBooleans:(t=t.toLowerCase().slice(0,5),t!=="data-"&&t!=="aria-");default:return!1}}function nO(t,e,n,r){if(e===null||typeof e>"u"||tO(t,e,n,r))return!0;if(r)return!1;if(n!==null)switch(n.type){case 3:return!e;case 4:return e===!1;case 5:return isNaN(e);case 6:return isNaN(e)||1>e}return!1}function kn(t,e,n,r,i,s,o){this.acceptsBooleans=e===2||e===3||e===4,this.attributeName=r,this.attributeNamespace=i,this.mustUseProperty=n,this.propertyName=t,this.type=e,this.sanitizeURL=s,this.removeEmptyString=o}var Qt={};"children dangerouslySetInnerHTML defaultValue defaultChecked innerHTML suppressContentEditableWarning suppressHydrationWarning style".split(" ").forEach(function(t){Qt[t]=new kn(t,0,!1,t,null,!1,!1)});[["acceptCharset","accept-charset"],["className","class"],["htmlFor","for"],["httpEquiv","http-equiv"]].forEach(function(t){var e=t[0];Qt[e]=new kn(e,1,!1,t[1],null,!1,!1)});["contentEditable","draggable","spellCheck","value"].forEach(function(t){Qt[t]=new kn(t,2,!1,t.toLowerCase(),null,!1,!1)});["autoReverse","externalResourcesRequired","focusable","preserveAlpha"].forEach(function(t){Qt[t]=new kn(t,2,!1,t,null,!1,!1)});"allowFullScreen async autoFocus autoPlay controls default defer disabled disablePictureInPicture disableRemotePlayback formNoValidate hidden loop noModule noValidate open playsInline readOnly required reversed scoped seamless itemScope".split(" ").forEach(function(t){Qt[t]=new kn(t,3,!1,t.toLowerCase(),null,!1,!1)});["checked","multiple","muted","selected"].forEach(function(t){Qt[t]=new kn(t,3,!0,t,null,!1,!1)});["capture","download"].forEach(function(t){Qt[t]=new kn(t,4,!1,t,null,!1,!1)});["cols","rows","size","span"].forEach(function(t){Qt[t]=new kn(t,6,!1,t,null,!1,!1)});["rowSpan","start"].forEach(function(t){Qt[t]=new kn(t,5,!1,t.toLowerCase(),null,!1,!1)});var qw=/[\-:]([a-z])/g;function Qw(t){return t[1].toUpperCase()}"accent-height alignment-baseline arabic-form baseline-shift cap-height clip-path clip-rule color-interpolation color-interpolation-filters color-profile color-rendering dominant-baseline enable-background fill-opacity fill-rule flood-color flood-opacity font-family font-size font-size-adjust font-stretch font-style font-variant font-weight glyph-name glyph-orientation-horizontal glyph-orientation-vertical horiz-adv-x horiz-origin-x image-rendering letter-spacing lighting-color marker-end marker-mid marker-start overline-position overline-thickness paint-order panose-1 pointer-events rendering-intent shape-rendering stop-color stop-opacity strikethrough-position strikethrough-thickness stroke-dasharray stroke-dashoffset stroke-linecap stroke-linejoin stroke-miterlimit stroke-opacity stroke-width text-anchor text-decoration text-rendering underline-position underline-thickness unicode-bidi unicode-range units-per-em v-alphabetic v-hanging v-ideographic v-mathematical vector-effect vert-adv-y vert-origin-x vert-origin-y word-spacing writing-mode xmlns:xlink x-height".split(" ").forEach(function(t){var e=t.replace(qw,Qw);Qt[e]=new kn(e,1,!1,t,null,!1,!1)});"xlink:actuate xlink:arcrole xlink:role xlink:show xlink:title xlink:type".split(" ").forEach(function(t){var e=t.replace(qw,Qw);Qt[e]=new kn(e,1,!1,t,"http://www.w3.org/1999/xlink",!1,!1)});["xml:base","xml:lang","xml:space"].forEach(function(t){var e=t.replace(qw,Qw);Qt[e]=new kn(e,1,!1,t,"http://www.w3.org/XML/1998/namespace",!1,!1)});["tabIndex","crossOrigin"].forEach(function(t){Qt[t]=new kn(t,1,!1,t.toLowerCase(),null,!1,!1)});Qt.xlinkHref=new kn("xlinkHref",1,!1,"xlink:href","http://www.w3.org/1999/xlink",!0,!1);["src","href","action","formAction"].forEach(function(t){Qt[t]=new kn(t,1,!1,t.toLowerCase(),null,!0,!0)});function Yw(t,e,n,r){var i=Qt.hasOwnProperty(e)?Qt[e]:null;(i!==null?i.type!==0:r||!(2<e.length)||e[0]!=="o"&&e[0]!=="O"||e[1]!=="n"&&e[1]!=="N")&&(nO(e,n,i,r)&&(n=null),r||i===null?eO(e)&&(n===null?t.removeAttribute(e):t.setAttribute(e,""+n)):i.mustUseProperty?t[i.propertyName]=n===null?i.type===3?!1:"":n:(e=i.attributeName,r=i.attributeNamespace,n===null?t.removeAttribute(e):(i=i.type,n=i===3||i===4&&n===!0?"":""+n,r?t.setAttributeNS(r,e,n):t.setAttribute(e,n))))}var Ps=ZI.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED,Gf=Symbol.for("react.element"),Pl=Symbol.for("react.portal"),Tl=Symbol.for("react.fragment"),Jw=Symbol.for("react.strict_mode"),Py=Symbol.for("react.profiler"),hx=Symbol.for("react.provider"),px=Symbol.for("react.context"),Zw=Symbol.for("react.forward_ref"),Ty=Symbol.for("react.suspense"),Ry=Symbol.for("react.suspense_list"),Xw=Symbol.for("react.memo"),Gs=Symbol.for("react.lazy"),gx=Symbol.for("react.offscreen"),oE=Symbol.iterator;function Tu(t){return t===null||typeof t!="object"?null:(t=oE&&t[oE]||t["@@iterator"],typeof t=="function"?t:null)}var dt=Object.assign,Vg;function Gu(t){if(Vg===void 0)try{throw Error()}catch(n){var e=n.stack.trim().match(/\n( *(at )?)/);Vg=e&&e[1]||""}return`
`+Vg+t}var Gg=!1;function Wg(t,e){if(!t||Gg)return"";Gg=!0;var n=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{if(e)if(e=function(){throw Error()},Object.defineProperty(e.prototype,"props",{set:function(){throw Error()}}),typeof Reflect=="object"&&Reflect.construct){try{Reflect.construct(e,[])}catch(c){var r=c}Reflect.construct(t,[],e)}else{try{e.call()}catch(c){r=c}t.call(e.prototype)}else{try{throw Error()}catch(c){r=c}t()}}catch(c){if(c&&r&&typeof c.stack=="string"){for(var i=c.stack.split(`
`),s=r.stack.split(`
`),o=i.length-1,a=s.length-1;1<=o&&0<=a&&i[o]!==s[a];)a--;for(;1<=o&&0<=a;o--,a--)if(i[o]!==s[a]){if(o!==1||a!==1)do if(o--,a--,0>a||i[o]!==s[a]){var l=`
`+i[o].replace(" at new "," at ");return t.displayName&&l.includes("<anonymous>")&&(l=l.replace("<anonymous>",t.displayName)),l}while(1<=o&&0<=a);break}}}finally{Gg=!1,Error.prepareStackTrace=n}return(t=t?t.displayName||t.name:"")?Gu(t):""}function rO(t){switch(t.tag){case 5:return Gu(t.type);case 16:return Gu("Lazy");case 13:return Gu("Suspense");case 19:return Gu("SuspenseList");case 0:case 2:case 15:return t=Wg(t.type,!1),t;case 11:return t=Wg(t.type.render,!1),t;case 1:return t=Wg(t.type,!0),t;default:return""}}function Iy(t){if(t==null)return null;if(typeof t=="function")return t.displayName||t.name||null;if(typeof t=="string")return t;switch(t){case Tl:return"Fragment";case Pl:return"Portal";case Py:return"Profiler";case Jw:return"StrictMode";case Ty:return"Suspense";case Ry:return"SuspenseList"}if(typeof t=="object")switch(t.$$typeof){case px:return(t.displayName||"Context")+".Consumer";case hx:return(t._context.displayName||"Context")+".Provider";case Zw:var e=t.render;return t=t.displayName,t||(t=e.displayName||e.name||"",t=t!==""?"ForwardRef("+t+")":"ForwardRef"),t;case Xw:return e=t.displayName||null,e!==null?e:Iy(t.type)||"Memo";case Gs:e=t._payload,t=t._init;try{return Iy(t(e))}catch{}}return null}function iO(t){var e=t.type;switch(t.tag){case 24:return"Cache";case 9:return(e.displayName||"Context")+".Consumer";case 10:return(e._context.displayName||"Context")+".Provider";case 18:return"DehydratedFragment";case 11:return t=e.render,t=t.displayName||t.name||"",e.displayName||(t!==""?"ForwardRef("+t+")":"ForwardRef");case 7:return"Fragment";case 5:return e;case 4:return"Portal";case 3:return"Root";case 6:return"Text";case 16:return Iy(e);case 8:return e===Jw?"StrictMode":"Mode";case 22:return"Offscreen";case 12:return"Profiler";case 21:return"Scope";case 13:return"Suspense";case 19:return"SuspenseList";case 25:return"TracingMarker";case 1:case 0:case 17:case 2:case 14:case 15:if(typeof e=="function")return e.displayName||e.name||null;if(typeof e=="string")return e}return null}function Uo(t){switch(typeof t){case"boolean":case"number":case"string":case"undefined":return t;case"object":return t;default:return""}}function mx(t){var e=t.type;return(t=t.nodeName)&&t.toLowerCase()==="input"&&(e==="checkbox"||e==="radio")}function sO(t){var e=mx(t)?"checked":"value",n=Object.getOwnPropertyDescriptor(t.constructor.prototype,e),r=""+t[e];if(!t.hasOwnProperty(e)&&typeof n<"u"&&typeof n.get=="function"&&typeof n.set=="function"){var i=n.get,s=n.set;return Object.defineProperty(t,e,{configurable:!0,get:function(){return i.call(this)},set:function(o){r=""+o,s.call(this,o)}}),Object.defineProperty(t,e,{enumerable:n.enumerable}),{getValue:function(){return r},setValue:function(o){r=""+o},stopTracking:function(){t._valueTracker=null,delete t[e]}}}}function Wf(t){t._valueTracker||(t._valueTracker=sO(t))}function yx(t){if(!t)return!1;var e=t._valueTracker;if(!e)return!0;var n=e.getValue(),r="";return t&&(r=mx(t)?t.checked?"true":"false":t.value),t=r,t!==n?(e.setValue(t),!0):!1}function Ip(t){if(t=t||(typeof document<"u"?document:void 0),typeof t>"u")return null;try{return t.activeElement||t.body}catch{return t.body}}function Oy(t,e){var n=e.checked;return dt({},e,{defaultChecked:void 0,defaultValue:void 0,value:void 0,checked:n??t._wrapperState.initialChecked})}function aE(t,e){var n=e.defaultValue==null?"":e.defaultValue,r=e.checked!=null?e.checked:e.defaultChecked;n=Uo(e.value!=null?e.value:n),t._wrapperState={initialChecked:r,initialValue:n,controlled:e.type==="checkbox"||e.type==="radio"?e.checked!=null:e.value!=null}}function vx(t,e){e=e.checked,e!=null&&Yw(t,"checked",e,!1)}function Ny(t,e){vx(t,e);var n=Uo(e.value),r=e.type;if(n!=null)r==="number"?(n===0&&t.value===""||t.value!=n)&&(t.value=""+n):t.value!==""+n&&(t.value=""+n);else if(r==="submit"||r==="reset"){t.removeAttribute("value");return}e.hasOwnProperty("value")?My(t,e.type,n):e.hasOwnProperty("defaultValue")&&My(t,e.type,Uo(e.defaultValue)),e.checked==null&&e.defaultChecked!=null&&(t.defaultChecked=!!e.defaultChecked)}function lE(t,e,n){if(e.hasOwnProperty("value")||e.hasOwnProperty("defaultValue")){var r=e.type;if(!(r!=="submit"&&r!=="reset"||e.value!==void 0&&e.value!==null))return;e=""+t._wrapperState.initialValue,n||e===t.value||(t.value=e),t.defaultValue=e}n=t.name,n!==""&&(t.name=""),t.defaultChecked=!!t._wrapperState.initialChecked,n!==""&&(t.name=n)}function My(t,e,n){(e!=="number"||Ip(t.ownerDocument)!==t)&&(n==null?t.defaultValue=""+t._wrapperState.initialValue:t.defaultValue!==""+n&&(t.defaultValue=""+n))}var Wu=Array.isArray;function Xl(t,e,n,r){if(t=t.options,e){e={};for(var i=0;i<n.length;i++)e["$"+n[i]]=!0;for(n=0;n<t.length;n++)i=e.hasOwnProperty("$"+t[n].value),t[n].selected!==i&&(t[n].selected=i),i&&r&&(t[n].defaultSelected=!0)}else{for(n=""+Uo(n),e=null,i=0;i<t.length;i++){if(t[i].value===n){t[i].selected=!0,r&&(t[i].defaultSelected=!0);return}e!==null||t[i].disabled||(e=t[i])}e!==null&&(e.selected=!0)}}function Ly(t,e){if(e.dangerouslySetInnerHTML!=null)throw Error(ue(91));return dt({},e,{value:void 0,defaultValue:void 0,children:""+t._wrapperState.initialValue})}function cE(t,e){var n=e.value;if(n==null){if(n=e.children,e=e.defaultValue,n!=null){if(e!=null)throw Error(ue(92));if(Wu(n)){if(1<n.length)throw Error(ue(93));n=n[0]}e=n}e==null&&(e=""),n=e}t._wrapperState={initialValue:Uo(n)}}function wx(t,e){var n=Uo(e.value),r=Uo(e.defaultValue);n!=null&&(n=""+n,n!==t.value&&(t.value=n),e.defaultValue==null&&t.defaultValue!==n&&(t.defaultValue=n)),r!=null&&(t.defaultValue=""+r)}function uE(t){var e=t.textContent;e===t._wrapperState.initialValue&&e!==""&&e!==null&&(t.value=e)}function bx(t){switch(t){case"svg":return"http://www.w3.org/2000/svg";case"math":return"http://www.w3.org/1998/Math/MathML";default:return"http://www.w3.org/1999/xhtml"}}function By(t,e){return t==null||t==="http://www.w3.org/1999/xhtml"?bx(e):t==="http://www.w3.org/2000/svg"&&e==="foreignObject"?"http://www.w3.org/1999/xhtml":t}var qf,Ex=function(t){return typeof MSApp<"u"&&MSApp.execUnsafeLocalFunction?function(e,n,r,i){MSApp.execUnsafeLocalFunction(function(){return t(e,n,r,i)})}:t}(function(t,e){if(t.namespaceURI!=="http://www.w3.org/2000/svg"||"innerHTML"in t)t.innerHTML=e;else{for(qf=qf||document.createElement("div"),qf.innerHTML="<svg>"+e.valueOf().toString()+"</svg>",e=qf.firstChild;t.firstChild;)t.removeChild(t.firstChild);for(;e.firstChild;)t.appendChild(e.firstChild)}});function kd(t,e){if(e){var n=t.firstChild;if(n&&n===t.lastChild&&n.nodeType===3){n.nodeValue=e;return}}t.textContent=e}var od={animationIterationCount:!0,aspectRatio:!0,borderImageOutset:!0,borderImageSlice:!0,borderImageWidth:!0,boxFlex:!0,boxFlexGroup:!0,boxOrdinalGroup:!0,columnCount:!0,columns:!0,flex:!0,flexGrow:!0,flexPositive:!0,flexShrink:!0,flexNegative:!0,flexOrder:!0,gridArea:!0,gridRow:!0,gridRowEnd:!0,gridRowSpan:!0,gridRowStart:!0,gridColumn:!0,gridColumnEnd:!0,gridColumnSpan:!0,gridColumnStart:!0,fontWeight:!0,lineClamp:!0,lineHeight:!0,opacity:!0,order:!0,orphans:!0,tabSize:!0,widows:!0,zIndex:!0,zoom:!0,fillOpacity:!0,floodOpacity:!0,stopOpacity:!0,strokeDasharray:!0,strokeDashoffset:!0,strokeMiterlimit:!0,strokeOpacity:!0,strokeWidth:!0},oO=["Webkit","ms","Moz","O"];Object.keys(od).forEach(function(t){oO.forEach(function(e){e=e+t.charAt(0).toUpperCase()+t.substring(1),od[e]=od[t]})});function Ax(t,e,n){return e==null||typeof e=="boolean"||e===""?"":n||typeof e!="number"||e===0||od.hasOwnProperty(t)&&od[t]?(""+e).trim():e+"px"}function Sx(t,e){t=t.style;for(var n in e)if(e.hasOwnProperty(n)){var r=n.indexOf("--")===0,i=Ax(n,e[n],r);n==="float"&&(n="cssFloat"),r?t.setProperty(n,i):t[n]=i}}var aO=dt({menuitem:!0},{area:!0,base:!0,br:!0,col:!0,embed:!0,hr:!0,img:!0,input:!0,keygen:!0,link:!0,meta:!0,param:!0,source:!0,track:!0,wbr:!0});function Dy(t,e){if(e){if(aO[t]&&(e.children!=null||e.dangerouslySetInnerHTML!=null))throw Error(ue(137,t));if(e.dangerouslySetInnerHTML!=null){if(e.children!=null)throw Error(ue(60));if(typeof e.dangerouslySetInnerHTML!="object"||!("__html"in e.dangerouslySetInnerHTML))throw Error(ue(61))}if(e.style!=null&&typeof e.style!="object")throw Error(ue(62))}}function $y(t,e){if(t.indexOf("-")===-1)return typeof e.is=="string";switch(t){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var Uy=null;function e1(t){return t=t.target||t.srcElement||window,t.correspondingUseElement&&(t=t.correspondingUseElement),t.nodeType===3?t.parentNode:t}var Fy=null,ec=null,tc=null;function dE(t){if(t=Rf(t)){if(typeof Fy!="function")throw Error(ue(280));var e=t.stateNode;e&&(e=tg(e),Fy(t.stateNode,t.type,e))}}function Cx(t){ec?tc?tc.push(t):tc=[t]:ec=t}function xx(){if(ec){var t=ec,e=tc;if(tc=ec=null,dE(t),e)for(t=0;t<e.length;t++)dE(e[t])}}function kx(t,e){return t(e)}function _x(){}var qg=!1;function Px(t,e,n){if(qg)return t(e,n);qg=!0;try{return kx(t,e,n)}finally{qg=!1,(ec!==null||tc!==null)&&(_x(),xx())}}function _d(t,e){var n=t.stateNode;if(n===null)return null;var r=tg(n);if(r===null)return null;n=r[e];e:switch(e){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(r=!r.disabled)||(t=t.type,r=!(t==="button"||t==="input"||t==="select"||t==="textarea")),t=!r;break e;default:t=!1}if(t)return null;if(n&&typeof n!="function")throw Error(ue(231,e,typeof n));return n}var jy=!1;if(Es)try{var Ru={};Object.defineProperty(Ru,"passive",{get:function(){jy=!0}}),window.addEventListener("test",Ru,Ru),window.removeEventListener("test",Ru,Ru)}catch{jy=!1}function lO(t,e,n,r,i,s,o,a,l){var c=Array.prototype.slice.call(arguments,3);try{e.apply(n,c)}catch(u){this.onError(u)}}var ad=!1,Op=null,Np=!1,Hy=null,cO={onError:function(t){ad=!0,Op=t}};function uO(t,e,n,r,i,s,o,a,l){ad=!1,Op=null,lO.apply(cO,arguments)}function dO(t,e,n,r,i,s,o,a,l){if(uO.apply(this,arguments),ad){if(ad){var c=Op;ad=!1,Op=null}else throw Error(ue(198));Np||(Np=!0,Hy=c)}}function ll(t){var e=t,n=t;if(t.alternate)for(;e.return;)e=e.return;else{t=e;do e=t,e.flags&4098&&(n=e.return),t=e.return;while(t)}return e.tag===3?n:null}function Tx(t){if(t.tag===13){var e=t.memoizedState;if(e===null&&(t=t.alternate,t!==null&&(e=t.memoizedState)),e!==null)return e.dehydrated}return null}function fE(t){if(ll(t)!==t)throw Error(ue(188))}function fO(t){var e=t.alternate;if(!e){if(e=ll(t),e===null)throw Error(ue(188));return e!==t?null:t}for(var n=t,r=e;;){var i=n.return;if(i===null)break;var s=i.alternate;if(s===null){if(r=i.return,r!==null){n=r;continue}break}if(i.child===s.child){for(s=i.child;s;){if(s===n)return fE(i),t;if(s===r)return fE(i),e;s=s.sibling}throw Error(ue(188))}if(n.return!==r.return)n=i,r=s;else{for(var o=!1,a=i.child;a;){if(a===n){o=!0,n=i,r=s;break}if(a===r){o=!0,r=i,n=s;break}a=a.sibling}if(!o){for(a=s.child;a;){if(a===n){o=!0,n=s,r=i;break}if(a===r){o=!0,r=s,n=i;break}a=a.sibling}if(!o)throw Error(ue(189))}}if(n.alternate!==r)throw Error(ue(190))}if(n.tag!==3)throw Error(ue(188));return n.stateNode.current===n?t:e}function Rx(t){return t=fO(t),t!==null?Ix(t):null}function Ix(t){if(t.tag===5||t.tag===6)return t;for(t=t.child;t!==null;){var e=Ix(t);if(e!==null)return e;t=t.sibling}return null}var Ox=ir.unstable_scheduleCallback,hE=ir.unstable_cancelCallback,hO=ir.unstable_shouldYield,pO=ir.unstable_requestPaint,wt=ir.unstable_now,gO=ir.unstable_getCurrentPriorityLevel,t1=ir.unstable_ImmediatePriority,Nx=ir.unstable_UserBlockingPriority,Mp=ir.unstable_NormalPriority,mO=ir.unstable_LowPriority,Mx=ir.unstable_IdlePriority,J0=null,Oi=null;function yO(t){if(Oi&&typeof Oi.onCommitFiberRoot=="function")try{Oi.onCommitFiberRoot(J0,t,void 0,(t.current.flags&128)===128)}catch{}}var Zr=Math.clz32?Math.clz32:bO,vO=Math.log,wO=Math.LN2;function bO(t){return t>>>=0,t===0?32:31-(vO(t)/wO|0)|0}var Qf=64,Yf=4194304;function qu(t){switch(t&-t){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return t&4194240;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return t&130023424;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 1073741824;default:return t}}function Lp(t,e){var n=t.pendingLanes;if(n===0)return 0;var r=0,i=t.suspendedLanes,s=t.pingedLanes,o=n&268435455;if(o!==0){var a=o&~i;a!==0?r=qu(a):(s&=o,s!==0&&(r=qu(s)))}else o=n&~i,o!==0?r=qu(o):s!==0&&(r=qu(s));if(r===0)return 0;if(e!==0&&e!==r&&!(e&i)&&(i=r&-r,s=e&-e,i>=s||i===16&&(s&4194240)!==0))return e;if(r&4&&(r|=n&16),e=t.entangledLanes,e!==0)for(t=t.entanglements,e&=r;0<e;)n=31-Zr(e),i=1<<n,r|=t[n],e&=~i;return r}function EO(t,e){switch(t){case 1:case 2:case 4:return e+250;case 8:case 16:case 32:case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return e+5e3;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return-1;case 134217728:case 268435456:case 536870912:case 1073741824:return-1;default:return-1}}function AO(t,e){for(var n=t.suspendedLanes,r=t.pingedLanes,i=t.expirationTimes,s=t.pendingLanes;0<s;){var o=31-Zr(s),a=1<<o,l=i[o];l===-1?(!(a&n)||a&r)&&(i[o]=EO(a,e)):l<=e&&(t.expiredLanes|=a),s&=~a}}function Ky(t){return t=t.pendingLanes&-1073741825,t!==0?t:t&1073741824?1073741824:0}function Lx(){var t=Qf;return Qf<<=1,!(Qf&4194240)&&(Qf=64),t}function Qg(t){for(var e=[],n=0;31>n;n++)e.push(t);return e}function Pf(t,e,n){t.pendingLanes|=e,e!==536870912&&(t.suspendedLanes=0,t.pingedLanes=0),t=t.eventTimes,e=31-Zr(e),t[e]=n}function SO(t,e){var n=t.pendingLanes&~e;t.pendingLanes=e,t.suspendedLanes=0,t.pingedLanes=0,t.expiredLanes&=e,t.mutableReadLanes&=e,t.entangledLanes&=e,e=t.entanglements;var r=t.eventTimes;for(t=t.expirationTimes;0<n;){var i=31-Zr(n),s=1<<i;e[i]=0,r[i]=-1,t[i]=-1,n&=~s}}function n1(t,e){var n=t.entangledLanes|=e;for(t=t.entanglements;n;){var r=31-Zr(n),i=1<<r;i&e|t[r]&e&&(t[r]|=e),n&=~i}}var Ye=0;function Bx(t){return t&=-t,1<t?4<t?t&268435455?16:536870912:4:1}var Dx,r1,$x,Ux,Fx,zy=!1,Jf=[],_o=null,Po=null,To=null,Pd=new Map,Td=new Map,eo=[],CO="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset submit".split(" ");function pE(t,e){switch(t){case"focusin":case"focusout":_o=null;break;case"dragenter":case"dragleave":Po=null;break;case"mouseover":case"mouseout":To=null;break;case"pointerover":case"pointerout":Pd.delete(e.pointerId);break;case"gotpointercapture":case"lostpointercapture":Td.delete(e.pointerId)}}function Iu(t,e,n,r,i,s){return t===null||t.nativeEvent!==s?(t={blockedOn:e,domEventName:n,eventSystemFlags:r,nativeEvent:s,targetContainers:[i]},e!==null&&(e=Rf(e),e!==null&&r1(e)),t):(t.eventSystemFlags|=r,e=t.targetContainers,i!==null&&e.indexOf(i)===-1&&e.push(i),t)}function xO(t,e,n,r,i){switch(e){case"focusin":return _o=Iu(_o,t,e,n,r,i),!0;case"dragenter":return Po=Iu(Po,t,e,n,r,i),!0;case"mouseover":return To=Iu(To,t,e,n,r,i),!0;case"pointerover":var s=i.pointerId;return Pd.set(s,Iu(Pd.get(s)||null,t,e,n,r,i)),!0;case"gotpointercapture":return s=i.pointerId,Td.set(s,Iu(Td.get(s)||null,t,e,n,r,i)),!0}return!1}function jx(t){var e=ha(t.target);if(e!==null){var n=ll(e);if(n!==null){if(e=n.tag,e===13){if(e=Tx(n),e!==null){t.blockedOn=e,Fx(t.priority,function(){$x(n)});return}}else if(e===3&&n.stateNode.current.memoizedState.isDehydrated){t.blockedOn=n.tag===3?n.stateNode.containerInfo:null;return}}}t.blockedOn=null}function Vh(t){if(t.blockedOn!==null)return!1;for(var e=t.targetContainers;0<e.length;){var n=Vy(t.domEventName,t.eventSystemFlags,e[0],t.nativeEvent);if(n===null){n=t.nativeEvent;var r=new n.constructor(n.type,n);Uy=r,n.target.dispatchEvent(r),Uy=null}else return e=Rf(n),e!==null&&r1(e),t.blockedOn=n,!1;e.shift()}return!0}function gE(t,e,n){Vh(t)&&n.delete(e)}function kO(){zy=!1,_o!==null&&Vh(_o)&&(_o=null),Po!==null&&Vh(Po)&&(Po=null),To!==null&&Vh(To)&&(To=null),Pd.forEach(gE),Td.forEach(gE)}function Ou(t,e){t.blockedOn===e&&(t.blockedOn=null,zy||(zy=!0,ir.unstable_scheduleCallback(ir.unstable_NormalPriority,kO)))}function Rd(t){function e(i){return Ou(i,t)}if(0<Jf.length){Ou(Jf[0],t);for(var n=1;n<Jf.length;n++){var r=Jf[n];r.blockedOn===t&&(r.blockedOn=null)}}for(_o!==null&&Ou(_o,t),Po!==null&&Ou(Po,t),To!==null&&Ou(To,t),Pd.forEach(e),Td.forEach(e),n=0;n<eo.length;n++)r=eo[n],r.blockedOn===t&&(r.blockedOn=null);for(;0<eo.length&&(n=eo[0],n.blockedOn===null);)jx(n),n.blockedOn===null&&eo.shift()}var nc=Ps.ReactCurrentBatchConfig,Bp=!0;function _O(t,e,n,r){var i=Ye,s=nc.transition;nc.transition=null;try{Ye=1,i1(t,e,n,r)}finally{Ye=i,nc.transition=s}}function PO(t,e,n,r){var i=Ye,s=nc.transition;nc.transition=null;try{Ye=4,i1(t,e,n,r)}finally{Ye=i,nc.transition=s}}function i1(t,e,n,r){if(Bp){var i=Vy(t,e,n,r);if(i===null)sm(t,e,r,Dp,n),pE(t,r);else if(xO(i,t,e,n,r))r.stopPropagation();else if(pE(t,r),e&4&&-1<CO.indexOf(t)){for(;i!==null;){var s=Rf(i);if(s!==null&&Dx(s),s=Vy(t,e,n,r),s===null&&sm(t,e,r,Dp,n),s===i)break;i=s}i!==null&&r.stopPropagation()}else sm(t,e,r,null,n)}}var Dp=null;function Vy(t,e,n,r){if(Dp=null,t=e1(r),t=ha(t),t!==null)if(e=ll(t),e===null)t=null;else if(n=e.tag,n===13){if(t=Tx(e),t!==null)return t;t=null}else if(n===3){if(e.stateNode.current.memoizedState.isDehydrated)return e.tag===3?e.stateNode.containerInfo:null;t=null}else e!==t&&(t=null);return Dp=t,null}function Hx(t){switch(t){case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 1;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"toggle":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 4;case"message":switch(gO()){case t1:return 1;case Nx:return 4;case Mp:case mO:return 16;case Mx:return 536870912;default:return 16}default:return 16}}var So=null,s1=null,Gh=null;function Kx(){if(Gh)return Gh;var t,e=s1,n=e.length,r,i="value"in So?So.value:So.textContent,s=i.length;for(t=0;t<n&&e[t]===i[t];t++);var o=n-t;for(r=1;r<=o&&e[n-r]===i[s-r];r++);return Gh=i.slice(t,1<r?1-r:void 0)}function Wh(t){var e=t.keyCode;return"charCode"in t?(t=t.charCode,t===0&&e===13&&(t=13)):t=e,t===10&&(t=13),32<=t||t===13?t:0}function Zf(){return!0}function mE(){return!1}function or(t){function e(n,r,i,s,o){this._reactName=n,this._targetInst=i,this.type=r,this.nativeEvent=s,this.target=o,this.currentTarget=null;for(var a in t)t.hasOwnProperty(a)&&(n=t[a],this[a]=n?n(s):s[a]);return this.isDefaultPrevented=(s.defaultPrevented!=null?s.defaultPrevented:s.returnValue===!1)?Zf:mE,this.isPropagationStopped=mE,this}return dt(e.prototype,{preventDefault:function(){this.defaultPrevented=!0;var n=this.nativeEvent;n&&(n.preventDefault?n.preventDefault():typeof n.returnValue!="unknown"&&(n.returnValue=!1),this.isDefaultPrevented=Zf)},stopPropagation:function(){var n=this.nativeEvent;n&&(n.stopPropagation?n.stopPropagation():typeof n.cancelBubble!="unknown"&&(n.cancelBubble=!0),this.isPropagationStopped=Zf)},persist:function(){},isPersistent:Zf}),e}var bu={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(t){return t.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},o1=or(bu),Tf=dt({},bu,{view:0,detail:0}),TO=or(Tf),Yg,Jg,Nu,Z0=dt({},Tf,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:a1,button:0,buttons:0,relatedTarget:function(t){return t.relatedTarget===void 0?t.fromElement===t.srcElement?t.toElement:t.fromElement:t.relatedTarget},movementX:function(t){return"movementX"in t?t.movementX:(t!==Nu&&(Nu&&t.type==="mousemove"?(Yg=t.screenX-Nu.screenX,Jg=t.screenY-Nu.screenY):Jg=Yg=0,Nu=t),Yg)},movementY:function(t){return"movementY"in t?t.movementY:Jg}}),yE=or(Z0),RO=dt({},Z0,{dataTransfer:0}),IO=or(RO),OO=dt({},Tf,{relatedTarget:0}),Zg=or(OO),NO=dt({},bu,{animationName:0,elapsedTime:0,pseudoElement:0}),MO=or(NO),LO=dt({},bu,{clipboardData:function(t){return"clipboardData"in t?t.clipboardData:window.clipboardData}}),BO=or(LO),DO=dt({},bu,{data:0}),vE=or(DO),$O={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},UO={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},FO={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function jO(t){var e=this.nativeEvent;return e.getModifierState?e.getModifierState(t):(t=FO[t])?!!e[t]:!1}function a1(){return jO}var HO=dt({},Tf,{key:function(t){if(t.key){var e=$O[t.key]||t.key;if(e!=="Unidentified")return e}return t.type==="keypress"?(t=Wh(t),t===13?"Enter":String.fromCharCode(t)):t.type==="keydown"||t.type==="keyup"?UO[t.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:a1,charCode:function(t){return t.type==="keypress"?Wh(t):0},keyCode:function(t){return t.type==="keydown"||t.type==="keyup"?t.keyCode:0},which:function(t){return t.type==="keypress"?Wh(t):t.type==="keydown"||t.type==="keyup"?t.keyCode:0}}),KO=or(HO),zO=dt({},Z0,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0}),wE=or(zO),VO=dt({},Tf,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:a1}),GO=or(VO),WO=dt({},bu,{propertyName:0,elapsedTime:0,pseudoElement:0}),qO=or(WO),QO=dt({},Z0,{deltaX:function(t){return"deltaX"in t?t.deltaX:"wheelDeltaX"in t?-t.wheelDeltaX:0},deltaY:function(t){return"deltaY"in t?t.deltaY:"wheelDeltaY"in t?-t.wheelDeltaY:"wheelDelta"in t?-t.wheelDelta:0},deltaZ:0,deltaMode:0}),YO=or(QO),JO=[9,13,27,32],l1=Es&&"CompositionEvent"in window,ld=null;Es&&"documentMode"in document&&(ld=document.documentMode);var ZO=Es&&"TextEvent"in window&&!ld,zx=Es&&(!l1||ld&&8<ld&&11>=ld),bE=" ",EE=!1;function Vx(t,e){switch(t){case"keyup":return JO.indexOf(e.keyCode)!==-1;case"keydown":return e.keyCode!==229;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function Gx(t){return t=t.detail,typeof t=="object"&&"data"in t?t.data:null}var Rl=!1;function XO(t,e){switch(t){case"compositionend":return Gx(e);case"keypress":return e.which!==32?null:(EE=!0,bE);case"textInput":return t=e.data,t===bE&&EE?null:t;default:return null}}function e8(t,e){if(Rl)return t==="compositionend"||!l1&&Vx(t,e)?(t=Kx(),Gh=s1=So=null,Rl=!1,t):null;switch(t){case"paste":return null;case"keypress":if(!(e.ctrlKey||e.altKey||e.metaKey)||e.ctrlKey&&e.altKey){if(e.char&&1<e.char.length)return e.char;if(e.which)return String.fromCharCode(e.which)}return null;case"compositionend":return zx&&e.locale!=="ko"?null:e.data;default:return null}}var t8={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function AE(t){var e=t&&t.nodeName&&t.nodeName.toLowerCase();return e==="input"?!!t8[t.type]:e==="textarea"}function Wx(t,e,n,r){Cx(r),e=$p(e,"onChange"),0<e.length&&(n=new o1("onChange","change",null,n,r),t.push({event:n,listeners:e}))}var cd=null,Id=null;function n8(t){ik(t,0)}function X0(t){var e=Nl(t);if(yx(e))return t}function r8(t,e){if(t==="change")return e}var qx=!1;if(Es){var Xg;if(Es){var em="oninput"in document;if(!em){var SE=document.createElement("div");SE.setAttribute("oninput","return;"),em=typeof SE.oninput=="function"}Xg=em}else Xg=!1;qx=Xg&&(!document.documentMode||9<document.documentMode)}function CE(){cd&&(cd.detachEvent("onpropertychange",Qx),Id=cd=null)}function Qx(t){if(t.propertyName==="value"&&X0(Id)){var e=[];Wx(e,Id,t,e1(t)),Px(n8,e)}}function i8(t,e,n){t==="focusin"?(CE(),cd=e,Id=n,cd.attachEvent("onpropertychange",Qx)):t==="focusout"&&CE()}function s8(t){if(t==="selectionchange"||t==="keyup"||t==="keydown")return X0(Id)}function o8(t,e){if(t==="click")return X0(e)}function a8(t,e){if(t==="input"||t==="change")return X0(e)}function l8(t,e){return t===e&&(t!==0||1/t===1/e)||t!==t&&e!==e}var ti=typeof Object.is=="function"?Object.is:l8;function Od(t,e){if(ti(t,e))return!0;if(typeof t!="object"||t===null||typeof e!="object"||e===null)return!1;var n=Object.keys(t),r=Object.keys(e);if(n.length!==r.length)return!1;for(r=0;r<n.length;r++){var i=n[r];if(!_y.call(e,i)||!ti(t[i],e[i]))return!1}return!0}function xE(t){for(;t&&t.firstChild;)t=t.firstChild;return t}function kE(t,e){var n=xE(t);t=0;for(var r;n;){if(n.nodeType===3){if(r=t+n.textContent.length,t<=e&&r>=e)return{node:n,offset:e-t};t=r}e:{for(;n;){if(n.nextSibling){n=n.nextSibling;break e}n=n.parentNode}n=void 0}n=xE(n)}}function Yx(t,e){return t&&e?t===e?!0:t&&t.nodeType===3?!1:e&&e.nodeType===3?Yx(t,e.parentNode):"contains"in t?t.contains(e):t.compareDocumentPosition?!!(t.compareDocumentPosition(e)&16):!1:!1}function Jx(){for(var t=window,e=Ip();e instanceof t.HTMLIFrameElement;){try{var n=typeof e.contentWindow.location.href=="string"}catch{n=!1}if(n)t=e.contentWindow;else break;e=Ip(t.document)}return e}function c1(t){var e=t&&t.nodeName&&t.nodeName.toLowerCase();return e&&(e==="input"&&(t.type==="text"||t.type==="search"||t.type==="tel"||t.type==="url"||t.type==="password")||e==="textarea"||t.contentEditable==="true")}function c8(t){var e=Jx(),n=t.focusedElem,r=t.selectionRange;if(e!==n&&n&&n.ownerDocument&&Yx(n.ownerDocument.documentElement,n)){if(r!==null&&c1(n)){if(e=r.start,t=r.end,t===void 0&&(t=e),"selectionStart"in n)n.selectionStart=e,n.selectionEnd=Math.min(t,n.value.length);else if(t=(e=n.ownerDocument||document)&&e.defaultView||window,t.getSelection){t=t.getSelection();var i=n.textContent.length,s=Math.min(r.start,i);r=r.end===void 0?s:Math.min(r.end,i),!t.extend&&s>r&&(i=r,r=s,s=i),i=kE(n,s);var o=kE(n,r);i&&o&&(t.rangeCount!==1||t.anchorNode!==i.node||t.anchorOffset!==i.offset||t.focusNode!==o.node||t.focusOffset!==o.offset)&&(e=e.createRange(),e.setStart(i.node,i.offset),t.removeAllRanges(),s>r?(t.addRange(e),t.extend(o.node,o.offset)):(e.setEnd(o.node,o.offset),t.addRange(e)))}}for(e=[],t=n;t=t.parentNode;)t.nodeType===1&&e.push({element:t,left:t.scrollLeft,top:t.scrollTop});for(typeof n.focus=="function"&&n.focus(),n=0;n<e.length;n++)t=e[n],t.element.scrollLeft=t.left,t.element.scrollTop=t.top}}var u8=Es&&"documentMode"in document&&11>=document.documentMode,Il=null,Gy=null,ud=null,Wy=!1;function _E(t,e,n){var r=n.window===n?n.document:n.nodeType===9?n:n.ownerDocument;Wy||Il==null||Il!==Ip(r)||(r=Il,"selectionStart"in r&&c1(r)?r={start:r.selectionStart,end:r.selectionEnd}:(r=(r.ownerDocument&&r.ownerDocument.defaultView||window).getSelection(),r={anchorNode:r.anchorNode,anchorOffset:r.anchorOffset,focusNode:r.focusNode,focusOffset:r.focusOffset}),ud&&Od(ud,r)||(ud=r,r=$p(Gy,"onSelect"),0<r.length&&(e=new o1("onSelect","select",null,e,n),t.push({event:e,listeners:r}),e.target=Il)))}function Xf(t,e){var n={};return n[t.toLowerCase()]=e.toLowerCase(),n["Webkit"+t]="webkit"+e,n["Moz"+t]="moz"+e,n}var Ol={animationend:Xf("Animation","AnimationEnd"),animationiteration:Xf("Animation","AnimationIteration"),animationstart:Xf("Animation","AnimationStart"),transitionend:Xf("Transition","TransitionEnd")},tm={},Zx={};Es&&(Zx=document.createElement("div").style,"AnimationEvent"in window||(delete Ol.animationend.animation,delete Ol.animationiteration.animation,delete Ol.animationstart.animation),"TransitionEvent"in window||delete Ol.transitionend.transition);function eg(t){if(tm[t])return tm[t];if(!Ol[t])return t;var e=Ol[t],n;for(n in e)if(e.hasOwnProperty(n)&&n in Zx)return tm[t]=e[n];return t}var Xx=eg("animationend"),ek=eg("animationiteration"),tk=eg("animationstart"),nk=eg("transitionend"),rk=new Map,PE="abort auxClick cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll toggle touchMove waiting wheel".split(" ");function qo(t,e){rk.set(t,e),al(e,[t])}for(var nm=0;nm<PE.length;nm++){var rm=PE[nm],d8=rm.toLowerCase(),f8=rm[0].toUpperCase()+rm.slice(1);qo(d8,"on"+f8)}qo(Xx,"onAnimationEnd");qo(ek,"onAnimationIteration");qo(tk,"onAnimationStart");qo("dblclick","onDoubleClick");qo("focusin","onFocus");qo("focusout","onBlur");qo(nk,"onTransitionEnd");eu("onMouseEnter",["mouseout","mouseover"]);eu("onMouseLeave",["mouseout","mouseover"]);eu("onPointerEnter",["pointerout","pointerover"]);eu("onPointerLeave",["pointerout","pointerover"]);al("onChange","change click focusin focusout input keydown keyup selectionchange".split(" "));al("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" "));al("onBeforeInput",["compositionend","keypress","textInput","paste"]);al("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" "));al("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" "));al("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var Qu="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),h8=new Set("cancel close invalid load scroll toggle".split(" ").concat(Qu));function TE(t,e,n){var r=t.type||"unknown-event";t.currentTarget=n,dO(r,e,void 0,t),t.currentTarget=null}function ik(t,e){e=(e&4)!==0;for(var n=0;n<t.length;n++){var r=t[n],i=r.event;r=r.listeners;e:{var s=void 0;if(e)for(var o=r.length-1;0<=o;o--){var a=r[o],l=a.instance,c=a.currentTarget;if(a=a.listener,l!==s&&i.isPropagationStopped())break e;TE(i,a,c),s=l}else for(o=0;o<r.length;o++){if(a=r[o],l=a.instance,c=a.currentTarget,a=a.listener,l!==s&&i.isPropagationStopped())break e;TE(i,a,c),s=l}}}if(Np)throw t=Hy,Np=!1,Hy=null,t}function rt(t,e){var n=e[Zy];n===void 0&&(n=e[Zy]=new Set);var r=t+"__bubble";n.has(r)||(sk(e,t,2,!1),n.add(r))}function im(t,e,n){var r=0;e&&(r|=4),sk(n,t,r,e)}var eh="_reactListening"+Math.random().toString(36).slice(2);function Nd(t){if(!t[eh]){t[eh]=!0,fx.forEach(function(n){n!=="selectionchange"&&(h8.has(n)||im(n,!1,t),im(n,!0,t))});var e=t.nodeType===9?t:t.ownerDocument;e===null||e[eh]||(e[eh]=!0,im("selectionchange",!1,e))}}function sk(t,e,n,r){switch(Hx(e)){case 1:var i=_O;break;case 4:i=PO;break;default:i=i1}n=i.bind(null,e,n,t),i=void 0,!jy||e!=="touchstart"&&e!=="touchmove"&&e!=="wheel"||(i=!0),r?i!==void 0?t.addEventListener(e,n,{capture:!0,passive:i}):t.addEventListener(e,n,!0):i!==void 0?t.addEventListener(e,n,{passive:i}):t.addEventListener(e,n,!1)}function sm(t,e,n,r,i){var s=r;if(!(e&1)&&!(e&2)&&r!==null)e:for(;;){if(r===null)return;var o=r.tag;if(o===3||o===4){var a=r.stateNode.containerInfo;if(a===i||a.nodeType===8&&a.parentNode===i)break;if(o===4)for(o=r.return;o!==null;){var l=o.tag;if((l===3||l===4)&&(l=o.stateNode.containerInfo,l===i||l.nodeType===8&&l.parentNode===i))return;o=o.return}for(;a!==null;){if(o=ha(a),o===null)return;if(l=o.tag,l===5||l===6){r=s=o;continue e}a=a.parentNode}}r=r.return}Px(function(){var c=s,u=e1(n),d=[];e:{var f=rk.get(t);if(f!==void 0){var h=o1,m=t;switch(t){case"keypress":if(Wh(n)===0)break e;case"keydown":case"keyup":h=KO;break;case"focusin":m="focus",h=Zg;break;case"focusout":m="blur",h=Zg;break;case"beforeblur":case"afterblur":h=Zg;break;case"click":if(n.button===2)break e;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":h=yE;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":h=IO;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":h=GO;break;case Xx:case ek:case tk:h=MO;break;case nk:h=qO;break;case"scroll":h=TO;break;case"wheel":h=YO;break;case"copy":case"cut":case"paste":h=BO;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":h=wE}var g=(e&4)!==0,w=!g&&t==="scroll",p=g?f!==null?f+"Capture":null:f;g=[];for(var v=c,y;v!==null;){y=v;var x=y.stateNode;if(y.tag===5&&x!==null&&(y=x,p!==null&&(x=_d(v,p),x!=null&&g.push(Md(v,x,y)))),w)break;v=v.return}0<g.length&&(f=new h(f,m,null,n,u),d.push({event:f,listeners:g}))}}if(!(e&7)){e:{if(f=t==="mouseover"||t==="pointerover",h=t==="mouseout"||t==="pointerout",f&&n!==Uy&&(m=n.relatedTarget||n.fromElement)&&(ha(m)||m[As]))break e;if((h||f)&&(f=u.window===u?u:(f=u.ownerDocument)?f.defaultView||f.parentWindow:window,h?(m=n.relatedTarget||n.toElement,h=c,m=m?ha(m):null,m!==null&&(w=ll(m),m!==w||m.tag!==5&&m.tag!==6)&&(m=null)):(h=null,m=c),h!==m)){if(g=yE,x="onMouseLeave",p="onMouseEnter",v="mouse",(t==="pointerout"||t==="pointerover")&&(g=wE,x="onPointerLeave",p="onPointerEnter",v="pointer"),w=h==null?f:Nl(h),y=m==null?f:Nl(m),f=new g(x,v+"leave",h,n,u),f.target=w,f.relatedTarget=y,x=null,ha(u)===c&&(g=new g(p,v+"enter",m,n,u),g.target=y,g.relatedTarget=w,x=g),w=x,h&&m)t:{for(g=h,p=m,v=0,y=g;y;y=gl(y))v++;for(y=0,x=p;x;x=gl(x))y++;for(;0<v-y;)g=gl(g),v--;for(;0<y-v;)p=gl(p),y--;for(;v--;){if(g===p||p!==null&&g===p.alternate)break t;g=gl(g),p=gl(p)}g=null}else g=null;h!==null&&RE(d,f,h,g,!1),m!==null&&w!==null&&RE(d,w,m,g,!0)}}e:{if(f=c?Nl(c):window,h=f.nodeName&&f.nodeName.toLowerCase(),h==="select"||h==="input"&&f.type==="file")var T=r8;else if(AE(f))if(qx)T=a8;else{T=s8;var B=i8}else(h=f.nodeName)&&h.toLowerCase()==="input"&&(f.type==="checkbox"||f.type==="radio")&&(T=o8);if(T&&(T=T(t,c))){Wx(d,T,n,u);break e}B&&B(t,f,c),t==="focusout"&&(B=f._wrapperState)&&B.controlled&&f.type==="number"&&My(f,"number",f.value)}switch(B=c?Nl(c):window,t){case"focusin":(AE(B)||B.contentEditable==="true")&&(Il=B,Gy=c,ud=null);break;case"focusout":ud=Gy=Il=null;break;case"mousedown":Wy=!0;break;case"contextmenu":case"mouseup":case"dragend":Wy=!1,_E(d,n,u);break;case"selectionchange":if(u8)break;case"keydown":case"keyup":_E(d,n,u)}var j;if(l1)e:{switch(t){case"compositionstart":var M="onCompositionStart";break e;case"compositionend":M="onCompositionEnd";break e;case"compositionupdate":M="onCompositionUpdate";break e}M=void 0}else Rl?Vx(t,n)&&(M="onCompositionEnd"):t==="keydown"&&n.keyCode===229&&(M="onCompositionStart");M&&(zx&&n.locale!=="ko"&&(Rl||M!=="onCompositionStart"?M==="onCompositionEnd"&&Rl&&(j=Kx()):(So=u,s1="value"in So?So.value:So.textContent,Rl=!0)),B=$p(c,M),0<B.length&&(M=new vE(M,t,null,n,u),d.push({event:M,listeners:B}),j?M.data=j:(j=Gx(n),j!==null&&(M.data=j)))),(j=ZO?XO(t,n):e8(t,n))&&(c=$p(c,"onBeforeInput"),0<c.length&&(u=new vE("onBeforeInput","beforeinput",null,n,u),d.push({event:u,listeners:c}),u.data=j))}ik(d,e)})}function Md(t,e,n){return{instance:t,listener:e,currentTarget:n}}function $p(t,e){for(var n=e+"Capture",r=[];t!==null;){var i=t,s=i.stateNode;i.tag===5&&s!==null&&(i=s,s=_d(t,n),s!=null&&r.unshift(Md(t,s,i)),s=_d(t,e),s!=null&&r.push(Md(t,s,i))),t=t.return}return r}function gl(t){if(t===null)return null;do t=t.return;while(t&&t.tag!==5);return t||null}function RE(t,e,n,r,i){for(var s=e._reactName,o=[];n!==null&&n!==r;){var a=n,l=a.alternate,c=a.stateNode;if(l!==null&&l===r)break;a.tag===5&&c!==null&&(a=c,i?(l=_d(n,s),l!=null&&o.unshift(Md(n,l,a))):i||(l=_d(n,s),l!=null&&o.push(Md(n,l,a)))),n=n.return}o.length!==0&&t.push({event:e,listeners:o})}var p8=/\r\n?/g,g8=/\u0000|\uFFFD/g;function IE(t){return(typeof t=="string"?t:""+t).replace(p8,`
`).replace(g8,"")}function th(t,e,n){if(e=IE(e),IE(t)!==e&&n)throw Error(ue(425))}function Up(){}var qy=null,Qy=null;function Yy(t,e){return t==="textarea"||t==="noscript"||typeof e.children=="string"||typeof e.children=="number"||typeof e.dangerouslySetInnerHTML=="object"&&e.dangerouslySetInnerHTML!==null&&e.dangerouslySetInnerHTML.__html!=null}var Jy=typeof setTimeout=="function"?setTimeout:void 0,m8=typeof clearTimeout=="function"?clearTimeout:void 0,OE=typeof Promise=="function"?Promise:void 0,y8=typeof queueMicrotask=="function"?queueMicrotask:typeof OE<"u"?function(t){return OE.resolve(null).then(t).catch(v8)}:Jy;function v8(t){setTimeout(function(){throw t})}function om(t,e){var n=e,r=0;do{var i=n.nextSibling;if(t.removeChild(n),i&&i.nodeType===8)if(n=i.data,n==="/$"){if(r===0){t.removeChild(i),Rd(e);return}r--}else n!=="$"&&n!=="$?"&&n!=="$!"||r++;n=i}while(n);Rd(e)}function Ro(t){for(;t!=null;t=t.nextSibling){var e=t.nodeType;if(e===1||e===3)break;if(e===8){if(e=t.data,e==="$"||e==="$!"||e==="$?")break;if(e==="/$")return null}}return t}function NE(t){t=t.previousSibling;for(var e=0;t;){if(t.nodeType===8){var n=t.data;if(n==="$"||n==="$!"||n==="$?"){if(e===0)return t;e--}else n==="/$"&&e++}t=t.previousSibling}return null}var Eu=Math.random().toString(36).slice(2),Ei="__reactFiber$"+Eu,Ld="__reactProps$"+Eu,As="__reactContainer$"+Eu,Zy="__reactEvents$"+Eu,w8="__reactListeners$"+Eu,b8="__reactHandles$"+Eu;function ha(t){var e=t[Ei];if(e)return e;for(var n=t.parentNode;n;){if(e=n[As]||n[Ei]){if(n=e.alternate,e.child!==null||n!==null&&n.child!==null)for(t=NE(t);t!==null;){if(n=t[Ei])return n;t=NE(t)}return e}t=n,n=t.parentNode}return null}function Rf(t){return t=t[Ei]||t[As],!t||t.tag!==5&&t.tag!==6&&t.tag!==13&&t.tag!==3?null:t}function Nl(t){if(t.tag===5||t.tag===6)return t.stateNode;throw Error(ue(33))}function tg(t){return t[Ld]||null}var Xy=[],Ml=-1;function Qo(t){return{current:t}}function it(t){0>Ml||(t.current=Xy[Ml],Xy[Ml]=null,Ml--)}function tt(t,e){Ml++,Xy[Ml]=t.current,t.current=e}var Fo={},un=Qo(Fo),Dn=Qo(!1),Qa=Fo;function tu(t,e){var n=t.type.contextTypes;if(!n)return Fo;var r=t.stateNode;if(r&&r.__reactInternalMemoizedUnmaskedChildContext===e)return r.__reactInternalMemoizedMaskedChildContext;var i={},s;for(s in n)i[s]=e[s];return r&&(t=t.stateNode,t.__reactInternalMemoizedUnmaskedChildContext=e,t.__reactInternalMemoizedMaskedChildContext=i),i}function $n(t){return t=t.childContextTypes,t!=null}function Fp(){it(Dn),it(un)}function ME(t,e,n){if(un.current!==Fo)throw Error(ue(168));tt(un,e),tt(Dn,n)}function ok(t,e,n){var r=t.stateNode;if(e=e.childContextTypes,typeof r.getChildContext!="function")return n;r=r.getChildContext();for(var i in r)if(!(i in e))throw Error(ue(108,iO(t)||"Unknown",i));return dt({},n,r)}function jp(t){return t=(t=t.stateNode)&&t.__reactInternalMemoizedMergedChildContext||Fo,Qa=un.current,tt(un,t),tt(Dn,Dn.current),!0}function LE(t,e,n){var r=t.stateNode;if(!r)throw Error(ue(169));n?(t=ok(t,e,Qa),r.__reactInternalMemoizedMergedChildContext=t,it(Dn),it(un),tt(un,t)):it(Dn),tt(Dn,n)}var Gi=null,ng=!1,am=!1;function ak(t){Gi===null?Gi=[t]:Gi.push(t)}function E8(t){ng=!0,ak(t)}function Yo(){if(!am&&Gi!==null){am=!0;var t=0,e=Ye;try{var n=Gi;for(Ye=1;t<n.length;t++){var r=n[t];do r=r(!0);while(r!==null)}Gi=null,ng=!1}catch(i){throw Gi!==null&&(Gi=Gi.slice(t+1)),Ox(t1,Yo),i}finally{Ye=e,am=!1}}return null}var Ll=[],Bl=0,Hp=null,Kp=0,Cr=[],xr=0,Ya=null,us=1,ds="";function na(t,e){Ll[Bl++]=Kp,Ll[Bl++]=Hp,Hp=t,Kp=e}function lk(t,e,n){Cr[xr++]=us,Cr[xr++]=ds,Cr[xr++]=Ya,Ya=t;var r=us;t=ds;var i=32-Zr(r)-1;r&=~(1<<i),n+=1;var s=32-Zr(e)+i;if(30<s){var o=i-i%5;s=(r&(1<<o)-1).toString(32),r>>=o,i-=o,us=1<<32-Zr(e)+i|n<<i|r,ds=s+t}else us=1<<s|n<<i|r,ds=t}function u1(t){t.return!==null&&(na(t,1),lk(t,1,0))}function d1(t){for(;t===Hp;)Hp=Ll[--Bl],Ll[Bl]=null,Kp=Ll[--Bl],Ll[Bl]=null;for(;t===Ya;)Ya=Cr[--xr],Cr[xr]=null,ds=Cr[--xr],Cr[xr]=null,us=Cr[--xr],Cr[xr]=null}var rr=null,nr=null,ot=!1,Wr=null;function ck(t,e){var n=_r(5,null,null,0);n.elementType="DELETED",n.stateNode=e,n.return=t,e=t.deletions,e===null?(t.deletions=[n],t.flags|=16):e.push(n)}function BE(t,e){switch(t.tag){case 5:var n=t.type;return e=e.nodeType!==1||n.toLowerCase()!==e.nodeName.toLowerCase()?null:e,e!==null?(t.stateNode=e,rr=t,nr=Ro(e.firstChild),!0):!1;case 6:return e=t.pendingProps===""||e.nodeType!==3?null:e,e!==null?(t.stateNode=e,rr=t,nr=null,!0):!1;case 13:return e=e.nodeType!==8?null:e,e!==null?(n=Ya!==null?{id:us,overflow:ds}:null,t.memoizedState={dehydrated:e,treeContext:n,retryLane:1073741824},n=_r(18,null,null,0),n.stateNode=e,n.return=t,t.child=n,rr=t,nr=null,!0):!1;default:return!1}}function ev(t){return(t.mode&1)!==0&&(t.flags&128)===0}function tv(t){if(ot){var e=nr;if(e){var n=e;if(!BE(t,e)){if(ev(t))throw Error(ue(418));e=Ro(n.nextSibling);var r=rr;e&&BE(t,e)?ck(r,n):(t.flags=t.flags&-4097|2,ot=!1,rr=t)}}else{if(ev(t))throw Error(ue(418));t.flags=t.flags&-4097|2,ot=!1,rr=t}}}function DE(t){for(t=t.return;t!==null&&t.tag!==5&&t.tag!==3&&t.tag!==13;)t=t.return;rr=t}function nh(t){if(t!==rr)return!1;if(!ot)return DE(t),ot=!0,!1;var e;if((e=t.tag!==3)&&!(e=t.tag!==5)&&(e=t.type,e=e!=="head"&&e!=="body"&&!Yy(t.type,t.memoizedProps)),e&&(e=nr)){if(ev(t))throw uk(),Error(ue(418));for(;e;)ck(t,e),e=Ro(e.nextSibling)}if(DE(t),t.tag===13){if(t=t.memoizedState,t=t!==null?t.dehydrated:null,!t)throw Error(ue(317));e:{for(t=t.nextSibling,e=0;t;){if(t.nodeType===8){var n=t.data;if(n==="/$"){if(e===0){nr=Ro(t.nextSibling);break e}e--}else n!=="$"&&n!=="$!"&&n!=="$?"||e++}t=t.nextSibling}nr=null}}else nr=rr?Ro(t.stateNode.nextSibling):null;return!0}function uk(){for(var t=nr;t;)t=Ro(t.nextSibling)}function nu(){nr=rr=null,ot=!1}function f1(t){Wr===null?Wr=[t]:Wr.push(t)}var A8=Ps.ReactCurrentBatchConfig;function Mu(t,e,n){if(t=n.ref,t!==null&&typeof t!="function"&&typeof t!="object"){if(n._owner){if(n=n._owner,n){if(n.tag!==1)throw Error(ue(309));var r=n.stateNode}if(!r)throw Error(ue(147,t));var i=r,s=""+t;return e!==null&&e.ref!==null&&typeof e.ref=="function"&&e.ref._stringRef===s?e.ref:(e=function(o){var a=i.refs;o===null?delete a[s]:a[s]=o},e._stringRef=s,e)}if(typeof t!="string")throw Error(ue(284));if(!n._owner)throw Error(ue(290,t))}return t}function rh(t,e){throw t=Object.prototype.toString.call(e),Error(ue(31,t==="[object Object]"?"object with keys {"+Object.keys(e).join(", ")+"}":t))}function $E(t){var e=t._init;return e(t._payload)}function dk(t){function e(p,v){if(t){var y=p.deletions;y===null?(p.deletions=[v],p.flags|=16):y.push(v)}}function n(p,v){if(!t)return null;for(;v!==null;)e(p,v),v=v.sibling;return null}function r(p,v){for(p=new Map;v!==null;)v.key!==null?p.set(v.key,v):p.set(v.index,v),v=v.sibling;return p}function i(p,v){return p=Mo(p,v),p.index=0,p.sibling=null,p}function s(p,v,y){return p.index=y,t?(y=p.alternate,y!==null?(y=y.index,y<v?(p.flags|=2,v):y):(p.flags|=2,v)):(p.flags|=1048576,v)}function o(p){return t&&p.alternate===null&&(p.flags|=2),p}function a(p,v,y,x){return v===null||v.tag!==6?(v=pm(y,p.mode,x),v.return=p,v):(v=i(v,y),v.return=p,v)}function l(p,v,y,x){var T=y.type;return T===Tl?u(p,v,y.props.children,x,y.key):v!==null&&(v.elementType===T||typeof T=="object"&&T!==null&&T.$$typeof===Gs&&$E(T)===v.type)?(x=i(v,y.props),x.ref=Mu(p,v,y),x.return=p,x):(x=ep(y.type,y.key,y.props,null,p.mode,x),x.ref=Mu(p,v,y),x.return=p,x)}function c(p,v,y,x){return v===null||v.tag!==4||v.stateNode.containerInfo!==y.containerInfo||v.stateNode.implementation!==y.implementation?(v=gm(y,p.mode,x),v.return=p,v):(v=i(v,y.children||[]),v.return=p,v)}function u(p,v,y,x,T){return v===null||v.tag!==7?(v=Va(y,p.mode,x,T),v.return=p,v):(v=i(v,y),v.return=p,v)}function d(p,v,y){if(typeof v=="string"&&v!==""||typeof v=="number")return v=pm(""+v,p.mode,y),v.return=p,v;if(typeof v=="object"&&v!==null){switch(v.$$typeof){case Gf:return y=ep(v.type,v.key,v.props,null,p.mode,y),y.ref=Mu(p,null,v),y.return=p,y;case Pl:return v=gm(v,p.mode,y),v.return=p,v;case Gs:var x=v._init;return d(p,x(v._payload),y)}if(Wu(v)||Tu(v))return v=Va(v,p.mode,y,null),v.return=p,v;rh(p,v)}return null}function f(p,v,y,x){var T=v!==null?v.key:null;if(typeof y=="string"&&y!==""||typeof y=="number")return T!==null?null:a(p,v,""+y,x);if(typeof y=="object"&&y!==null){switch(y.$$typeof){case Gf:return y.key===T?l(p,v,y,x):null;case Pl:return y.key===T?c(p,v,y,x):null;case Gs:return T=y._init,f(p,v,T(y._payload),x)}if(Wu(y)||Tu(y))return T!==null?null:u(p,v,y,x,null);rh(p,y)}return null}function h(p,v,y,x,T){if(typeof x=="string"&&x!==""||typeof x=="number")return p=p.get(y)||null,a(v,p,""+x,T);if(typeof x=="object"&&x!==null){switch(x.$$typeof){case Gf:return p=p.get(x.key===null?y:x.key)||null,l(v,p,x,T);case Pl:return p=p.get(x.key===null?y:x.key)||null,c(v,p,x,T);case Gs:var B=x._init;return h(p,v,y,B(x._payload),T)}if(Wu(x)||Tu(x))return p=p.get(y)||null,u(v,p,x,T,null);rh(v,x)}return null}function m(p,v,y,x){for(var T=null,B=null,j=v,M=v=0,K=null;j!==null&&M<y.length;M++){j.index>M?(K=j,j=null):K=j.sibling;var U=f(p,j,y[M],x);if(U===null){j===null&&(j=K);break}t&&j&&U.alternate===null&&e(p,j),v=s(U,v,M),B===null?T=U:B.sibling=U,B=U,j=K}if(M===y.length)return n(p,j),ot&&na(p,M),T;if(j===null){for(;M<y.length;M++)j=d(p,y[M],x),j!==null&&(v=s(j,v,M),B===null?T=j:B.sibling=j,B=j);return ot&&na(p,M),T}for(j=r(p,j);M<y.length;M++)K=h(j,p,M,y[M],x),K!==null&&(t&&K.alternate!==null&&j.delete(K.key===null?M:K.key),v=s(K,v,M),B===null?T=K:B.sibling=K,B=K);return t&&j.forEach(function(W){return e(p,W)}),ot&&na(p,M),T}function g(p,v,y,x){var T=Tu(y);if(typeof T!="function")throw Error(ue(150));if(y=T.call(y),y==null)throw Error(ue(151));for(var B=T=null,j=v,M=v=0,K=null,U=y.next();j!==null&&!U.done;M++,U=y.next()){j.index>M?(K=j,j=null):K=j.sibling;var W=f(p,j,U.value,x);if(W===null){j===null&&(j=K);break}t&&j&&W.alternate===null&&e(p,j),v=s(W,v,M),B===null?T=W:B.sibling=W,B=W,j=K}if(U.done)return n(p,j),ot&&na(p,M),T;if(j===null){for(;!U.done;M++,U=y.next())U=d(p,U.value,x),U!==null&&(v=s(U,v,M),B===null?T=U:B.sibling=U,B=U);return ot&&na(p,M),T}for(j=r(p,j);!U.done;M++,U=y.next())U=h(j,p,M,U.value,x),U!==null&&(t&&U.alternate!==null&&j.delete(U.key===null?M:U.key),v=s(U,v,M),B===null?T=U:B.sibling=U,B=U);return t&&j.forEach(function(z){return e(p,z)}),ot&&na(p,M),T}function w(p,v,y,x){if(typeof y=="object"&&y!==null&&y.type===Tl&&y.key===null&&(y=y.props.children),typeof y=="object"&&y!==null){switch(y.$$typeof){case Gf:e:{for(var T=y.key,B=v;B!==null;){if(B.key===T){if(T=y.type,T===Tl){if(B.tag===7){n(p,B.sibling),v=i(B,y.props.children),v.return=p,p=v;break e}}else if(B.elementType===T||typeof T=="object"&&T!==null&&T.$$typeof===Gs&&$E(T)===B.type){n(p,B.sibling),v=i(B,y.props),v.ref=Mu(p,B,y),v.return=p,p=v;break e}n(p,B);break}else e(p,B);B=B.sibling}y.type===Tl?(v=Va(y.props.children,p.mode,x,y.key),v.return=p,p=v):(x=ep(y.type,y.key,y.props,null,p.mode,x),x.ref=Mu(p,v,y),x.return=p,p=x)}return o(p);case Pl:e:{for(B=y.key;v!==null;){if(v.key===B)if(v.tag===4&&v.stateNode.containerInfo===y.containerInfo&&v.stateNode.implementation===y.implementation){n(p,v.sibling),v=i(v,y.children||[]),v.return=p,p=v;break e}else{n(p,v);break}else e(p,v);v=v.sibling}v=gm(y,p.mode,x),v.return=p,p=v}return o(p);case Gs:return B=y._init,w(p,v,B(y._payload),x)}if(Wu(y))return m(p,v,y,x);if(Tu(y))return g(p,v,y,x);rh(p,y)}return typeof y=="string"&&y!==""||typeof y=="number"?(y=""+y,v!==null&&v.tag===6?(n(p,v.sibling),v=i(v,y),v.return=p,p=v):(n(p,v),v=pm(y,p.mode,x),v.return=p,p=v),o(p)):n(p,v)}return w}var ru=dk(!0),fk=dk(!1),zp=Qo(null),Vp=null,Dl=null,h1=null;function p1(){h1=Dl=Vp=null}function g1(t){var e=zp.current;it(zp),t._currentValue=e}function nv(t,e,n){for(;t!==null;){var r=t.alternate;if((t.childLanes&e)!==e?(t.childLanes|=e,r!==null&&(r.childLanes|=e)):r!==null&&(r.childLanes&e)!==e&&(r.childLanes|=e),t===n)break;t=t.return}}function rc(t,e){Vp=t,h1=Dl=null,t=t.dependencies,t!==null&&t.firstContext!==null&&(t.lanes&e&&(Ln=!0),t.firstContext=null)}function Rr(t){var e=t._currentValue;if(h1!==t)if(t={context:t,memoizedValue:e,next:null},Dl===null){if(Vp===null)throw Error(ue(308));Dl=t,Vp.dependencies={lanes:0,firstContext:t}}else Dl=Dl.next=t;return e}var pa=null;function m1(t){pa===null?pa=[t]:pa.push(t)}function hk(t,e,n,r){var i=e.interleaved;return i===null?(n.next=n,m1(e)):(n.next=i.next,i.next=n),e.interleaved=n,Ss(t,r)}function Ss(t,e){t.lanes|=e;var n=t.alternate;for(n!==null&&(n.lanes|=e),n=t,t=t.return;t!==null;)t.childLanes|=e,n=t.alternate,n!==null&&(n.childLanes|=e),n=t,t=t.return;return n.tag===3?n.stateNode:null}var Ws=!1;function y1(t){t.updateQueue={baseState:t.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,interleaved:null,lanes:0},effects:null}}function pk(t,e){t=t.updateQueue,e.updateQueue===t&&(e.updateQueue={baseState:t.baseState,firstBaseUpdate:t.firstBaseUpdate,lastBaseUpdate:t.lastBaseUpdate,shared:t.shared,effects:t.effects})}function ys(t,e){return{eventTime:t,lane:e,tag:0,payload:null,callback:null,next:null}}function Io(t,e,n){var r=t.updateQueue;if(r===null)return null;if(r=r.shared,He&2){var i=r.pending;return i===null?e.next=e:(e.next=i.next,i.next=e),r.pending=e,Ss(t,n)}return i=r.interleaved,i===null?(e.next=e,m1(r)):(e.next=i.next,i.next=e),r.interleaved=e,Ss(t,n)}function qh(t,e,n){if(e=e.updateQueue,e!==null&&(e=e.shared,(n&4194240)!==0)){var r=e.lanes;r&=t.pendingLanes,n|=r,e.lanes=n,n1(t,n)}}function UE(t,e){var n=t.updateQueue,r=t.alternate;if(r!==null&&(r=r.updateQueue,n===r)){var i=null,s=null;if(n=n.firstBaseUpdate,n!==null){do{var o={eventTime:n.eventTime,lane:n.lane,tag:n.tag,payload:n.payload,callback:n.callback,next:null};s===null?i=s=o:s=s.next=o,n=n.next}while(n!==null);s===null?i=s=e:s=s.next=e}else i=s=e;n={baseState:r.baseState,firstBaseUpdate:i,lastBaseUpdate:s,shared:r.shared,effects:r.effects},t.updateQueue=n;return}t=n.lastBaseUpdate,t===null?n.firstBaseUpdate=e:t.next=e,n.lastBaseUpdate=e}function Gp(t,e,n,r){var i=t.updateQueue;Ws=!1;var s=i.firstBaseUpdate,o=i.lastBaseUpdate,a=i.shared.pending;if(a!==null){i.shared.pending=null;var l=a,c=l.next;l.next=null,o===null?s=c:o.next=c,o=l;var u=t.alternate;u!==null&&(u=u.updateQueue,a=u.lastBaseUpdate,a!==o&&(a===null?u.firstBaseUpdate=c:a.next=c,u.lastBaseUpdate=l))}if(s!==null){var d=i.baseState;o=0,u=c=l=null,a=s;do{var f=a.lane,h=a.eventTime;if((r&f)===f){u!==null&&(u=u.next={eventTime:h,lane:0,tag:a.tag,payload:a.payload,callback:a.callback,next:null});e:{var m=t,g=a;switch(f=e,h=n,g.tag){case 1:if(m=g.payload,typeof m=="function"){d=m.call(h,d,f);break e}d=m;break e;case 3:m.flags=m.flags&-65537|128;case 0:if(m=g.payload,f=typeof m=="function"?m.call(h,d,f):m,f==null)break e;d=dt({},d,f);break e;case 2:Ws=!0}}a.callback!==null&&a.lane!==0&&(t.flags|=64,f=i.effects,f===null?i.effects=[a]:f.push(a))}else h={eventTime:h,lane:f,tag:a.tag,payload:a.payload,callback:a.callback,next:null},u===null?(c=u=h,l=d):u=u.next=h,o|=f;if(a=a.next,a===null){if(a=i.shared.pending,a===null)break;f=a,a=f.next,f.next=null,i.lastBaseUpdate=f,i.shared.pending=null}}while(!0);if(u===null&&(l=d),i.baseState=l,i.firstBaseUpdate=c,i.lastBaseUpdate=u,e=i.shared.interleaved,e!==null){i=e;do o|=i.lane,i=i.next;while(i!==e)}else s===null&&(i.shared.lanes=0);Za|=o,t.lanes=o,t.memoizedState=d}}function FE(t,e,n){if(t=e.effects,e.effects=null,t!==null)for(e=0;e<t.length;e++){var r=t[e],i=r.callback;if(i!==null){if(r.callback=null,r=n,typeof i!="function")throw Error(ue(191,i));i.call(r)}}}var If={},Ni=Qo(If),Bd=Qo(If),Dd=Qo(If);function ga(t){if(t===If)throw Error(ue(174));return t}function v1(t,e){switch(tt(Dd,e),tt(Bd,t),tt(Ni,If),t=e.nodeType,t){case 9:case 11:e=(e=e.documentElement)?e.namespaceURI:By(null,"");break;default:t=t===8?e.parentNode:e,e=t.namespaceURI||null,t=t.tagName,e=By(e,t)}it(Ni),tt(Ni,e)}function iu(){it(Ni),it(Bd),it(Dd)}function gk(t){ga(Dd.current);var e=ga(Ni.current),n=By(e,t.type);e!==n&&(tt(Bd,t),tt(Ni,n))}function w1(t){Bd.current===t&&(it(Ni),it(Bd))}var lt=Qo(0);function Wp(t){for(var e=t;e!==null;){if(e.tag===13){var n=e.memoizedState;if(n!==null&&(n=n.dehydrated,n===null||n.data==="$?"||n.data==="$!"))return e}else if(e.tag===19&&e.memoizedProps.revealOrder!==void 0){if(e.flags&128)return e}else if(e.child!==null){e.child.return=e,e=e.child;continue}if(e===t)break;for(;e.sibling===null;){if(e.return===null||e.return===t)return null;e=e.return}e.sibling.return=e.return,e=e.sibling}return null}var lm=[];function b1(){for(var t=0;t<lm.length;t++)lm[t]._workInProgressVersionPrimary=null;lm.length=0}var Qh=Ps.ReactCurrentDispatcher,cm=Ps.ReactCurrentBatchConfig,Ja=0,ut=null,xt=null,Mt=null,qp=!1,dd=!1,$d=0,S8=0;function Yt(){throw Error(ue(321))}function E1(t,e){if(e===null)return!1;for(var n=0;n<e.length&&n<t.length;n++)if(!ti(t[n],e[n]))return!1;return!0}function A1(t,e,n,r,i,s){if(Ja=s,ut=e,e.memoizedState=null,e.updateQueue=null,e.lanes=0,Qh.current=t===null||t.memoizedState===null?_8:P8,t=n(r,i),dd){s=0;do{if(dd=!1,$d=0,25<=s)throw Error(ue(301));s+=1,Mt=xt=null,e.updateQueue=null,Qh.current=T8,t=n(r,i)}while(dd)}if(Qh.current=Qp,e=xt!==null&&xt.next!==null,Ja=0,Mt=xt=ut=null,qp=!1,e)throw Error(ue(300));return t}function S1(){var t=$d!==0;return $d=0,t}function ui(){var t={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return Mt===null?ut.memoizedState=Mt=t:Mt=Mt.next=t,Mt}function Ir(){if(xt===null){var t=ut.alternate;t=t!==null?t.memoizedState:null}else t=xt.next;var e=Mt===null?ut.memoizedState:Mt.next;if(e!==null)Mt=e,xt=t;else{if(t===null)throw Error(ue(310));xt=t,t={memoizedState:xt.memoizedState,baseState:xt.baseState,baseQueue:xt.baseQueue,queue:xt.queue,next:null},Mt===null?ut.memoizedState=Mt=t:Mt=Mt.next=t}return Mt}function Ud(t,e){return typeof e=="function"?e(t):e}function um(t){var e=Ir(),n=e.queue;if(n===null)throw Error(ue(311));n.lastRenderedReducer=t;var r=xt,i=r.baseQueue,s=n.pending;if(s!==null){if(i!==null){var o=i.next;i.next=s.next,s.next=o}r.baseQueue=i=s,n.pending=null}if(i!==null){s=i.next,r=r.baseState;var a=o=null,l=null,c=s;do{var u=c.lane;if((Ja&u)===u)l!==null&&(l=l.next={lane:0,action:c.action,hasEagerState:c.hasEagerState,eagerState:c.eagerState,next:null}),r=c.hasEagerState?c.eagerState:t(r,c.action);else{var d={lane:u,action:c.action,hasEagerState:c.hasEagerState,eagerState:c.eagerState,next:null};l===null?(a=l=d,o=r):l=l.next=d,ut.lanes|=u,Za|=u}c=c.next}while(c!==null&&c!==s);l===null?o=r:l.next=a,ti(r,e.memoizedState)||(Ln=!0),e.memoizedState=r,e.baseState=o,e.baseQueue=l,n.lastRenderedState=r}if(t=n.interleaved,t!==null){i=t;do s=i.lane,ut.lanes|=s,Za|=s,i=i.next;while(i!==t)}else i===null&&(n.lanes=0);return[e.memoizedState,n.dispatch]}function dm(t){var e=Ir(),n=e.queue;if(n===null)throw Error(ue(311));n.lastRenderedReducer=t;var r=n.dispatch,i=n.pending,s=e.memoizedState;if(i!==null){n.pending=null;var o=i=i.next;do s=t(s,o.action),o=o.next;while(o!==i);ti(s,e.memoizedState)||(Ln=!0),e.memoizedState=s,e.baseQueue===null&&(e.baseState=s),n.lastRenderedState=s}return[s,r]}function mk(){}function yk(t,e){var n=ut,r=Ir(),i=e(),s=!ti(r.memoizedState,i);if(s&&(r.memoizedState=i,Ln=!0),r=r.queue,C1(bk.bind(null,n,r,t),[t]),r.getSnapshot!==e||s||Mt!==null&&Mt.memoizedState.tag&1){if(n.flags|=2048,Fd(9,wk.bind(null,n,r,i,e),void 0,null),$t===null)throw Error(ue(349));Ja&30||vk(n,e,i)}return i}function vk(t,e,n){t.flags|=16384,t={getSnapshot:e,value:n},e=ut.updateQueue,e===null?(e={lastEffect:null,stores:null},ut.updateQueue=e,e.stores=[t]):(n=e.stores,n===null?e.stores=[t]:n.push(t))}function wk(t,e,n,r){e.value=n,e.getSnapshot=r,Ek(e)&&Ak(t)}function bk(t,e,n){return n(function(){Ek(e)&&Ak(t)})}function Ek(t){var e=t.getSnapshot;t=t.value;try{var n=e();return!ti(t,n)}catch{return!0}}function Ak(t){var e=Ss(t,1);e!==null&&Xr(e,t,1,-1)}function jE(t){var e=ui();return typeof t=="function"&&(t=t()),e.memoizedState=e.baseState=t,t={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:Ud,lastRenderedState:t},e.queue=t,t=t.dispatch=k8.bind(null,ut,t),[e.memoizedState,t]}function Fd(t,e,n,r){return t={tag:t,create:e,destroy:n,deps:r,next:null},e=ut.updateQueue,e===null?(e={lastEffect:null,stores:null},ut.updateQueue=e,e.lastEffect=t.next=t):(n=e.lastEffect,n===null?e.lastEffect=t.next=t:(r=n.next,n.next=t,t.next=r,e.lastEffect=t)),t}function Sk(){return Ir().memoizedState}function Yh(t,e,n,r){var i=ui();ut.flags|=t,i.memoizedState=Fd(1|e,n,void 0,r===void 0?null:r)}function rg(t,e,n,r){var i=Ir();r=r===void 0?null:r;var s=void 0;if(xt!==null){var o=xt.memoizedState;if(s=o.destroy,r!==null&&E1(r,o.deps)){i.memoizedState=Fd(e,n,s,r);return}}ut.flags|=t,i.memoizedState=Fd(1|e,n,s,r)}function HE(t,e){return Yh(8390656,8,t,e)}function C1(t,e){return rg(2048,8,t,e)}function Ck(t,e){return rg(4,2,t,e)}function xk(t,e){return rg(4,4,t,e)}function kk(t,e){if(typeof e=="function")return t=t(),e(t),function(){e(null)};if(e!=null)return t=t(),e.current=t,function(){e.current=null}}function _k(t,e,n){return n=n!=null?n.concat([t]):null,rg(4,4,kk.bind(null,e,t),n)}function x1(){}function Pk(t,e){var n=Ir();e=e===void 0?null:e;var r=n.memoizedState;return r!==null&&e!==null&&E1(e,r[1])?r[0]:(n.memoizedState=[t,e],t)}function Tk(t,e){var n=Ir();e=e===void 0?null:e;var r=n.memoizedState;return r!==null&&e!==null&&E1(e,r[1])?r[0]:(t=t(),n.memoizedState=[t,e],t)}function Rk(t,e,n){return Ja&21?(ti(n,e)||(n=Lx(),ut.lanes|=n,Za|=n,t.baseState=!0),e):(t.baseState&&(t.baseState=!1,Ln=!0),t.memoizedState=n)}function C8(t,e){var n=Ye;Ye=n!==0&&4>n?n:4,t(!0);var r=cm.transition;cm.transition={};try{t(!1),e()}finally{Ye=n,cm.transition=r}}function Ik(){return Ir().memoizedState}function x8(t,e,n){var r=No(t);if(n={lane:r,action:n,hasEagerState:!1,eagerState:null,next:null},Ok(t))Nk(e,n);else if(n=hk(t,e,n,r),n!==null){var i=Sn();Xr(n,t,r,i),Mk(n,e,r)}}function k8(t,e,n){var r=No(t),i={lane:r,action:n,hasEagerState:!1,eagerState:null,next:null};if(Ok(t))Nk(e,i);else{var s=t.alternate;if(t.lanes===0&&(s===null||s.lanes===0)&&(s=e.lastRenderedReducer,s!==null))try{var o=e.lastRenderedState,a=s(o,n);if(i.hasEagerState=!0,i.eagerState=a,ti(a,o)){var l=e.interleaved;l===null?(i.next=i,m1(e)):(i.next=l.next,l.next=i),e.interleaved=i;return}}catch{}finally{}n=hk(t,e,i,r),n!==null&&(i=Sn(),Xr(n,t,r,i),Mk(n,e,r))}}function Ok(t){var e=t.alternate;return t===ut||e!==null&&e===ut}function Nk(t,e){dd=qp=!0;var n=t.pending;n===null?e.next=e:(e.next=n.next,n.next=e),t.pending=e}function Mk(t,e,n){if(n&4194240){var r=e.lanes;r&=t.pendingLanes,n|=r,e.lanes=n,n1(t,n)}}var Qp={readContext:Rr,useCallback:Yt,useContext:Yt,useEffect:Yt,useImperativeHandle:Yt,useInsertionEffect:Yt,useLayoutEffect:Yt,useMemo:Yt,useReducer:Yt,useRef:Yt,useState:Yt,useDebugValue:Yt,useDeferredValue:Yt,useTransition:Yt,useMutableSource:Yt,useSyncExternalStore:Yt,useId:Yt,unstable_isNewReconciler:!1},_8={readContext:Rr,useCallback:function(t,e){return ui().memoizedState=[t,e===void 0?null:e],t},useContext:Rr,useEffect:HE,useImperativeHandle:function(t,e,n){return n=n!=null?n.concat([t]):null,Yh(4194308,4,kk.bind(null,e,t),n)},useLayoutEffect:function(t,e){return Yh(4194308,4,t,e)},useInsertionEffect:function(t,e){return Yh(4,2,t,e)},useMemo:function(t,e){var n=ui();return e=e===void 0?null:e,t=t(),n.memoizedState=[t,e],t},useReducer:function(t,e,n){var r=ui();return e=n!==void 0?n(e):e,r.memoizedState=r.baseState=e,t={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:t,lastRenderedState:e},r.queue=t,t=t.dispatch=x8.bind(null,ut,t),[r.memoizedState,t]},useRef:function(t){var e=ui();return t={current:t},e.memoizedState=t},useState:jE,useDebugValue:x1,useDeferredValue:function(t){return ui().memoizedState=t},useTransition:function(){var t=jE(!1),e=t[0];return t=C8.bind(null,t[1]),ui().memoizedState=t,[e,t]},useMutableSource:function(){},useSyncExternalStore:function(t,e,n){var r=ut,i=ui();if(ot){if(n===void 0)throw Error(ue(407));n=n()}else{if(n=e(),$t===null)throw Error(ue(349));Ja&30||vk(r,e,n)}i.memoizedState=n;var s={value:n,getSnapshot:e};return i.queue=s,HE(bk.bind(null,r,s,t),[t]),r.flags|=2048,Fd(9,wk.bind(null,r,s,n,e),void 0,null),n},useId:function(){var t=ui(),e=$t.identifierPrefix;if(ot){var n=ds,r=us;n=(r&~(1<<32-Zr(r)-1)).toString(32)+n,e=":"+e+"R"+n,n=$d++,0<n&&(e+="H"+n.toString(32)),e+=":"}else n=S8++,e=":"+e+"r"+n.toString(32)+":";return t.memoizedState=e},unstable_isNewReconciler:!1},P8={readContext:Rr,useCallback:Pk,useContext:Rr,useEffect:C1,useImperativeHandle:_k,useInsertionEffect:Ck,useLayoutEffect:xk,useMemo:Tk,useReducer:um,useRef:Sk,useState:function(){return um(Ud)},useDebugValue:x1,useDeferredValue:function(t){var e=Ir();return Rk(e,xt.memoizedState,t)},useTransition:function(){var t=um(Ud)[0],e=Ir().memoizedState;return[t,e]},useMutableSource:mk,useSyncExternalStore:yk,useId:Ik,unstable_isNewReconciler:!1},T8={readContext:Rr,useCallback:Pk,useContext:Rr,useEffect:C1,useImperativeHandle:_k,useInsertionEffect:Ck,useLayoutEffect:xk,useMemo:Tk,useReducer:dm,useRef:Sk,useState:function(){return dm(Ud)},useDebugValue:x1,useDeferredValue:function(t){var e=Ir();return xt===null?e.memoizedState=t:Rk(e,xt.memoizedState,t)},useTransition:function(){var t=dm(Ud)[0],e=Ir().memoizedState;return[t,e]},useMutableSource:mk,useSyncExternalStore:yk,useId:Ik,unstable_isNewReconciler:!1};function Dr(t,e){if(t&&t.defaultProps){e=dt({},e),t=t.defaultProps;for(var n in t)e[n]===void 0&&(e[n]=t[n]);return e}return e}function rv(t,e,n,r){e=t.memoizedState,n=n(r,e),n=n==null?e:dt({},e,n),t.memoizedState=n,t.lanes===0&&(t.updateQueue.baseState=n)}var ig={isMounted:function(t){return(t=t._reactInternals)?ll(t)===t:!1},enqueueSetState:function(t,e,n){t=t._reactInternals;var r=Sn(),i=No(t),s=ys(r,i);s.payload=e,n!=null&&(s.callback=n),e=Io(t,s,i),e!==null&&(Xr(e,t,i,r),qh(e,t,i))},enqueueReplaceState:function(t,e,n){t=t._reactInternals;var r=Sn(),i=No(t),s=ys(r,i);s.tag=1,s.payload=e,n!=null&&(s.callback=n),e=Io(t,s,i),e!==null&&(Xr(e,t,i,r),qh(e,t,i))},enqueueForceUpdate:function(t,e){t=t._reactInternals;var n=Sn(),r=No(t),i=ys(n,r);i.tag=2,e!=null&&(i.callback=e),e=Io(t,i,r),e!==null&&(Xr(e,t,r,n),qh(e,t,r))}};function KE(t,e,n,r,i,s,o){return t=t.stateNode,typeof t.shouldComponentUpdate=="function"?t.shouldComponentUpdate(r,s,o):e.prototype&&e.prototype.isPureReactComponent?!Od(n,r)||!Od(i,s):!0}function Lk(t,e,n){var r=!1,i=Fo,s=e.contextType;return typeof s=="object"&&s!==null?s=Rr(s):(i=$n(e)?Qa:un.current,r=e.contextTypes,s=(r=r!=null)?tu(t,i):Fo),e=new e(n,s),t.memoizedState=e.state!==null&&e.state!==void 0?e.state:null,e.updater=ig,t.stateNode=e,e._reactInternals=t,r&&(t=t.stateNode,t.__reactInternalMemoizedUnmaskedChildContext=i,t.__reactInternalMemoizedMaskedChildContext=s),e}function zE(t,e,n,r){t=e.state,typeof e.componentWillReceiveProps=="function"&&e.componentWillReceiveProps(n,r),typeof e.UNSAFE_componentWillReceiveProps=="function"&&e.UNSAFE_componentWillReceiveProps(n,r),e.state!==t&&ig.enqueueReplaceState(e,e.state,null)}function iv(t,e,n,r){var i=t.stateNode;i.props=n,i.state=t.memoizedState,i.refs={},y1(t);var s=e.contextType;typeof s=="object"&&s!==null?i.context=Rr(s):(s=$n(e)?Qa:un.current,i.context=tu(t,s)),i.state=t.memoizedState,s=e.getDerivedStateFromProps,typeof s=="function"&&(rv(t,e,s,n),i.state=t.memoizedState),typeof e.getDerivedStateFromProps=="function"||typeof i.getSnapshotBeforeUpdate=="function"||typeof i.UNSAFE_componentWillMount!="function"&&typeof i.componentWillMount!="function"||(e=i.state,typeof i.componentWillMount=="function"&&i.componentWillMount(),typeof i.UNSAFE_componentWillMount=="function"&&i.UNSAFE_componentWillMount(),e!==i.state&&ig.enqueueReplaceState(i,i.state,null),Gp(t,n,i,r),i.state=t.memoizedState),typeof i.componentDidMount=="function"&&(t.flags|=4194308)}function su(t,e){try{var n="",r=e;do n+=rO(r),r=r.return;while(r);var i=n}catch(s){i=`
Error generating stack: `+s.message+`
`+s.stack}return{value:t,source:e,stack:i,digest:null}}function fm(t,e,n){return{value:t,source:null,stack:n??null,digest:e??null}}function sv(t,e){try{console.error(e.value)}catch(n){setTimeout(function(){throw n})}}var R8=typeof WeakMap=="function"?WeakMap:Map;function Bk(t,e,n){n=ys(-1,n),n.tag=3,n.payload={element:null};var r=e.value;return n.callback=function(){Jp||(Jp=!0,gv=r),sv(t,e)},n}function Dk(t,e,n){n=ys(-1,n),n.tag=3;var r=t.type.getDerivedStateFromError;if(typeof r=="function"){var i=e.value;n.payload=function(){return r(i)},n.callback=function(){sv(t,e)}}var s=t.stateNode;return s!==null&&typeof s.componentDidCatch=="function"&&(n.callback=function(){sv(t,e),typeof r!="function"&&(Oo===null?Oo=new Set([this]):Oo.add(this));var o=e.stack;this.componentDidCatch(e.value,{componentStack:o!==null?o:""})}),n}function VE(t,e,n){var r=t.pingCache;if(r===null){r=t.pingCache=new R8;var i=new Set;r.set(e,i)}else i=r.get(e),i===void 0&&(i=new Set,r.set(e,i));i.has(n)||(i.add(n),t=z8.bind(null,t,e,n),e.then(t,t))}function GE(t){do{var e;if((e=t.tag===13)&&(e=t.memoizedState,e=e!==null?e.dehydrated!==null:!0),e)return t;t=t.return}while(t!==null);return null}function WE(t,e,n,r,i){return t.mode&1?(t.flags|=65536,t.lanes=i,t):(t===e?t.flags|=65536:(t.flags|=128,n.flags|=131072,n.flags&=-52805,n.tag===1&&(n.alternate===null?n.tag=17:(e=ys(-1,1),e.tag=2,Io(n,e,1))),n.lanes|=1),t)}var I8=Ps.ReactCurrentOwner,Ln=!1;function pn(t,e,n,r){e.child=t===null?fk(e,null,n,r):ru(e,t.child,n,r)}function qE(t,e,n,r,i){n=n.render;var s=e.ref;return rc(e,i),r=A1(t,e,n,r,s,i),n=S1(),t!==null&&!Ln?(e.updateQueue=t.updateQueue,e.flags&=-2053,t.lanes&=~i,Cs(t,e,i)):(ot&&n&&u1(e),e.flags|=1,pn(t,e,r,i),e.child)}function QE(t,e,n,r,i){if(t===null){var s=n.type;return typeof s=="function"&&!N1(s)&&s.defaultProps===void 0&&n.compare===null&&n.defaultProps===void 0?(e.tag=15,e.type=s,$k(t,e,s,r,i)):(t=ep(n.type,null,r,e,e.mode,i),t.ref=e.ref,t.return=e,e.child=t)}if(s=t.child,!(t.lanes&i)){var o=s.memoizedProps;if(n=n.compare,n=n!==null?n:Od,n(o,r)&&t.ref===e.ref)return Cs(t,e,i)}return e.flags|=1,t=Mo(s,r),t.ref=e.ref,t.return=e,e.child=t}function $k(t,e,n,r,i){if(t!==null){var s=t.memoizedProps;if(Od(s,r)&&t.ref===e.ref)if(Ln=!1,e.pendingProps=r=s,(t.lanes&i)!==0)t.flags&131072&&(Ln=!0);else return e.lanes=t.lanes,Cs(t,e,i)}return ov(t,e,n,r,i)}function Uk(t,e,n){var r=e.pendingProps,i=r.children,s=t!==null?t.memoizedState:null;if(r.mode==="hidden")if(!(e.mode&1))e.memoizedState={baseLanes:0,cachePool:null,transitions:null},tt(Ul,Xn),Xn|=n;else{if(!(n&1073741824))return t=s!==null?s.baseLanes|n:n,e.lanes=e.childLanes=1073741824,e.memoizedState={baseLanes:t,cachePool:null,transitions:null},e.updateQueue=null,tt(Ul,Xn),Xn|=t,null;e.memoizedState={baseLanes:0,cachePool:null,transitions:null},r=s!==null?s.baseLanes:n,tt(Ul,Xn),Xn|=r}else s!==null?(r=s.baseLanes|n,e.memoizedState=null):r=n,tt(Ul,Xn),Xn|=r;return pn(t,e,i,n),e.child}function Fk(t,e){var n=e.ref;(t===null&&n!==null||t!==null&&t.ref!==n)&&(e.flags|=512,e.flags|=2097152)}function ov(t,e,n,r,i){var s=$n(n)?Qa:un.current;return s=tu(e,s),rc(e,i),n=A1(t,e,n,r,s,i),r=S1(),t!==null&&!Ln?(e.updateQueue=t.updateQueue,e.flags&=-2053,t.lanes&=~i,Cs(t,e,i)):(ot&&r&&u1(e),e.flags|=1,pn(t,e,n,i),e.child)}function YE(t,e,n,r,i){if($n(n)){var s=!0;jp(e)}else s=!1;if(rc(e,i),e.stateNode===null)Jh(t,e),Lk(e,n,r),iv(e,n,r,i),r=!0;else if(t===null){var o=e.stateNode,a=e.memoizedProps;o.props=a;var l=o.context,c=n.contextType;typeof c=="object"&&c!==null?c=Rr(c):(c=$n(n)?Qa:un.current,c=tu(e,c));var u=n.getDerivedStateFromProps,d=typeof u=="function"||typeof o.getSnapshotBeforeUpdate=="function";d||typeof o.UNSAFE_componentWillReceiveProps!="function"&&typeof o.componentWillReceiveProps!="function"||(a!==r||l!==c)&&zE(e,o,r,c),Ws=!1;var f=e.memoizedState;o.state=f,Gp(e,r,o,i),l=e.memoizedState,a!==r||f!==l||Dn.current||Ws?(typeof u=="function"&&(rv(e,n,u,r),l=e.memoizedState),(a=Ws||KE(e,n,a,r,f,l,c))?(d||typeof o.UNSAFE_componentWillMount!="function"&&typeof o.componentWillMount!="function"||(typeof o.componentWillMount=="function"&&o.componentWillMount(),typeof o.UNSAFE_componentWillMount=="function"&&o.UNSAFE_componentWillMount()),typeof o.componentDidMount=="function"&&(e.flags|=4194308)):(typeof o.componentDidMount=="function"&&(e.flags|=4194308),e.memoizedProps=r,e.memoizedState=l),o.props=r,o.state=l,o.context=c,r=a):(typeof o.componentDidMount=="function"&&(e.flags|=4194308),r=!1)}else{o=e.stateNode,pk(t,e),a=e.memoizedProps,c=e.type===e.elementType?a:Dr(e.type,a),o.props=c,d=e.pendingProps,f=o.context,l=n.contextType,typeof l=="object"&&l!==null?l=Rr(l):(l=$n(n)?Qa:un.current,l=tu(e,l));var h=n.getDerivedStateFromProps;(u=typeof h=="function"||typeof o.getSnapshotBeforeUpdate=="function")||typeof o.UNSAFE_componentWillReceiveProps!="function"&&typeof o.componentWillReceiveProps!="function"||(a!==d||f!==l)&&zE(e,o,r,l),Ws=!1,f=e.memoizedState,o.state=f,Gp(e,r,o,i);var m=e.memoizedState;a!==d||f!==m||Dn.current||Ws?(typeof h=="function"&&(rv(e,n,h,r),m=e.memoizedState),(c=Ws||KE(e,n,c,r,f,m,l)||!1)?(u||typeof o.UNSAFE_componentWillUpdate!="function"&&typeof o.componentWillUpdate!="function"||(typeof o.componentWillUpdate=="function"&&o.componentWillUpdate(r,m,l),typeof o.UNSAFE_componentWillUpdate=="function"&&o.UNSAFE_componentWillUpdate(r,m,l)),typeof o.componentDidUpdate=="function"&&(e.flags|=4),typeof o.getSnapshotBeforeUpdate=="function"&&(e.flags|=1024)):(typeof o.componentDidUpdate!="function"||a===t.memoizedProps&&f===t.memoizedState||(e.flags|=4),typeof o.getSnapshotBeforeUpdate!="function"||a===t.memoizedProps&&f===t.memoizedState||(e.flags|=1024),e.memoizedProps=r,e.memoizedState=m),o.props=r,o.state=m,o.context=l,r=c):(typeof o.componentDidUpdate!="function"||a===t.memoizedProps&&f===t.memoizedState||(e.flags|=4),typeof o.getSnapshotBeforeUpdate!="function"||a===t.memoizedProps&&f===t.memoizedState||(e.flags|=1024),r=!1)}return av(t,e,n,r,s,i)}function av(t,e,n,r,i,s){Fk(t,e);var o=(e.flags&128)!==0;if(!r&&!o)return i&&LE(e,n,!1),Cs(t,e,s);r=e.stateNode,I8.current=e;var a=o&&typeof n.getDerivedStateFromError!="function"?null:r.render();return e.flags|=1,t!==null&&o?(e.child=ru(e,t.child,null,s),e.child=ru(e,null,a,s)):pn(t,e,a,s),e.memoizedState=r.state,i&&LE(e,n,!0),e.child}function jk(t){var e=t.stateNode;e.pendingContext?ME(t,e.pendingContext,e.pendingContext!==e.context):e.context&&ME(t,e.context,!1),v1(t,e.containerInfo)}function JE(t,e,n,r,i){return nu(),f1(i),e.flags|=256,pn(t,e,n,r),e.child}var lv={dehydrated:null,treeContext:null,retryLane:0};function cv(t){return{baseLanes:t,cachePool:null,transitions:null}}function Hk(t,e,n){var r=e.pendingProps,i=lt.current,s=!1,o=(e.flags&128)!==0,a;if((a=o)||(a=t!==null&&t.memoizedState===null?!1:(i&2)!==0),a?(s=!0,e.flags&=-129):(t===null||t.memoizedState!==null)&&(i|=1),tt(lt,i&1),t===null)return tv(e),t=e.memoizedState,t!==null&&(t=t.dehydrated,t!==null)?(e.mode&1?t.data==="$!"?e.lanes=8:e.lanes=1073741824:e.lanes=1,null):(o=r.children,t=r.fallback,s?(r=e.mode,s=e.child,o={mode:"hidden",children:o},!(r&1)&&s!==null?(s.childLanes=0,s.pendingProps=o):s=ag(o,r,0,null),t=Va(t,r,n,null),s.return=e,t.return=e,s.sibling=t,e.child=s,e.child.memoizedState=cv(n),e.memoizedState=lv,t):k1(e,o));if(i=t.memoizedState,i!==null&&(a=i.dehydrated,a!==null))return O8(t,e,o,r,a,i,n);if(s){s=r.fallback,o=e.mode,i=t.child,a=i.sibling;var l={mode:"hidden",children:r.children};return!(o&1)&&e.child!==i?(r=e.child,r.childLanes=0,r.pendingProps=l,e.deletions=null):(r=Mo(i,l),r.subtreeFlags=i.subtreeFlags&14680064),a!==null?s=Mo(a,s):(s=Va(s,o,n,null),s.flags|=2),s.return=e,r.return=e,r.sibling=s,e.child=r,r=s,s=e.child,o=t.child.memoizedState,o=o===null?cv(n):{baseLanes:o.baseLanes|n,cachePool:null,transitions:o.transitions},s.memoizedState=o,s.childLanes=t.childLanes&~n,e.memoizedState=lv,r}return s=t.child,t=s.sibling,r=Mo(s,{mode:"visible",children:r.children}),!(e.mode&1)&&(r.lanes=n),r.return=e,r.sibling=null,t!==null&&(n=e.deletions,n===null?(e.deletions=[t],e.flags|=16):n.push(t)),e.child=r,e.memoizedState=null,r}function k1(t,e){return e=ag({mode:"visible",children:e},t.mode,0,null),e.return=t,t.child=e}function ih(t,e,n,r){return r!==null&&f1(r),ru(e,t.child,null,n),t=k1(e,e.pendingProps.children),t.flags|=2,e.memoizedState=null,t}function O8(t,e,n,r,i,s,o){if(n)return e.flags&256?(e.flags&=-257,r=fm(Error(ue(422))),ih(t,e,o,r)):e.memoizedState!==null?(e.child=t.child,e.flags|=128,null):(s=r.fallback,i=e.mode,r=ag({mode:"visible",children:r.children},i,0,null),s=Va(s,i,o,null),s.flags|=2,r.return=e,s.return=e,r.sibling=s,e.child=r,e.mode&1&&ru(e,t.child,null,o),e.child.memoizedState=cv(o),e.memoizedState=lv,s);if(!(e.mode&1))return ih(t,e,o,null);if(i.data==="$!"){if(r=i.nextSibling&&i.nextSibling.dataset,r)var a=r.dgst;return r=a,s=Error(ue(419)),r=fm(s,r,void 0),ih(t,e,o,r)}if(a=(o&t.childLanes)!==0,Ln||a){if(r=$t,r!==null){switch(o&-o){case 4:i=2;break;case 16:i=8;break;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:i=32;break;case 536870912:i=268435456;break;default:i=0}i=i&(r.suspendedLanes|o)?0:i,i!==0&&i!==s.retryLane&&(s.retryLane=i,Ss(t,i),Xr(r,t,i,-1))}return O1(),r=fm(Error(ue(421))),ih(t,e,o,r)}return i.data==="$?"?(e.flags|=128,e.child=t.child,e=V8.bind(null,t),i._reactRetry=e,null):(t=s.treeContext,nr=Ro(i.nextSibling),rr=e,ot=!0,Wr=null,t!==null&&(Cr[xr++]=us,Cr[xr++]=ds,Cr[xr++]=Ya,us=t.id,ds=t.overflow,Ya=e),e=k1(e,r.children),e.flags|=4096,e)}function ZE(t,e,n){t.lanes|=e;var r=t.alternate;r!==null&&(r.lanes|=e),nv(t.return,e,n)}function hm(t,e,n,r,i){var s=t.memoizedState;s===null?t.memoizedState={isBackwards:e,rendering:null,renderingStartTime:0,last:r,tail:n,tailMode:i}:(s.isBackwards=e,s.rendering=null,s.renderingStartTime=0,s.last=r,s.tail=n,s.tailMode=i)}function Kk(t,e,n){var r=e.pendingProps,i=r.revealOrder,s=r.tail;if(pn(t,e,r.children,n),r=lt.current,r&2)r=r&1|2,e.flags|=128;else{if(t!==null&&t.flags&128)e:for(t=e.child;t!==null;){if(t.tag===13)t.memoizedState!==null&&ZE(t,n,e);else if(t.tag===19)ZE(t,n,e);else if(t.child!==null){t.child.return=t,t=t.child;continue}if(t===e)break e;for(;t.sibling===null;){if(t.return===null||t.return===e)break e;t=t.return}t.sibling.return=t.return,t=t.sibling}r&=1}if(tt(lt,r),!(e.mode&1))e.memoizedState=null;else switch(i){case"forwards":for(n=e.child,i=null;n!==null;)t=n.alternate,t!==null&&Wp(t)===null&&(i=n),n=n.sibling;n=i,n===null?(i=e.child,e.child=null):(i=n.sibling,n.sibling=null),hm(e,!1,i,n,s);break;case"backwards":for(n=null,i=e.child,e.child=null;i!==null;){if(t=i.alternate,t!==null&&Wp(t)===null){e.child=i;break}t=i.sibling,i.sibling=n,n=i,i=t}hm(e,!0,n,null,s);break;case"together":hm(e,!1,null,null,void 0);break;default:e.memoizedState=null}return e.child}function Jh(t,e){!(e.mode&1)&&t!==null&&(t.alternate=null,e.alternate=null,e.flags|=2)}function Cs(t,e,n){if(t!==null&&(e.dependencies=t.dependencies),Za|=e.lanes,!(n&e.childLanes))return null;if(t!==null&&e.child!==t.child)throw Error(ue(153));if(e.child!==null){for(t=e.child,n=Mo(t,t.pendingProps),e.child=n,n.return=e;t.sibling!==null;)t=t.sibling,n=n.sibling=Mo(t,t.pendingProps),n.return=e;n.sibling=null}return e.child}function N8(t,e,n){switch(e.tag){case 3:jk(e),nu();break;case 5:gk(e);break;case 1:$n(e.type)&&jp(e);break;case 4:v1(e,e.stateNode.containerInfo);break;case 10:var r=e.type._context,i=e.memoizedProps.value;tt(zp,r._currentValue),r._currentValue=i;break;case 13:if(r=e.memoizedState,r!==null)return r.dehydrated!==null?(tt(lt,lt.current&1),e.flags|=128,null):n&e.child.childLanes?Hk(t,e,n):(tt(lt,lt.current&1),t=Cs(t,e,n),t!==null?t.sibling:null);tt(lt,lt.current&1);break;case 19:if(r=(n&e.childLanes)!==0,t.flags&128){if(r)return Kk(t,e,n);e.flags|=128}if(i=e.memoizedState,i!==null&&(i.rendering=null,i.tail=null,i.lastEffect=null),tt(lt,lt.current),r)break;return null;case 22:case 23:return e.lanes=0,Uk(t,e,n)}return Cs(t,e,n)}var zk,uv,Vk,Gk;zk=function(t,e){for(var n=e.child;n!==null;){if(n.tag===5||n.tag===6)t.appendChild(n.stateNode);else if(n.tag!==4&&n.child!==null){n.child.return=n,n=n.child;continue}if(n===e)break;for(;n.sibling===null;){if(n.return===null||n.return===e)return;n=n.return}n.sibling.return=n.return,n=n.sibling}};uv=function(){};Vk=function(t,e,n,r){var i=t.memoizedProps;if(i!==r){t=e.stateNode,ga(Ni.current);var s=null;switch(n){case"input":i=Oy(t,i),r=Oy(t,r),s=[];break;case"select":i=dt({},i,{value:void 0}),r=dt({},r,{value:void 0}),s=[];break;case"textarea":i=Ly(t,i),r=Ly(t,r),s=[];break;default:typeof i.onClick!="function"&&typeof r.onClick=="function"&&(t.onclick=Up)}Dy(n,r);var o;n=null;for(c in i)if(!r.hasOwnProperty(c)&&i.hasOwnProperty(c)&&i[c]!=null)if(c==="style"){var a=i[c];for(o in a)a.hasOwnProperty(o)&&(n||(n={}),n[o]="")}else c!=="dangerouslySetInnerHTML"&&c!=="children"&&c!=="suppressContentEditableWarning"&&c!=="suppressHydrationWarning"&&c!=="autoFocus"&&(xd.hasOwnProperty(c)?s||(s=[]):(s=s||[]).push(c,null));for(c in r){var l=r[c];if(a=i!=null?i[c]:void 0,r.hasOwnProperty(c)&&l!==a&&(l!=null||a!=null))if(c==="style")if(a){for(o in a)!a.hasOwnProperty(o)||l&&l.hasOwnProperty(o)||(n||(n={}),n[o]="");for(o in l)l.hasOwnProperty(o)&&a[o]!==l[o]&&(n||(n={}),n[o]=l[o])}else n||(s||(s=[]),s.push(c,n)),n=l;else c==="dangerouslySetInnerHTML"?(l=l?l.__html:void 0,a=a?a.__html:void 0,l!=null&&a!==l&&(s=s||[]).push(c,l)):c==="children"?typeof l!="string"&&typeof l!="number"||(s=s||[]).push(c,""+l):c!=="suppressContentEditableWarning"&&c!=="suppressHydrationWarning"&&(xd.hasOwnProperty(c)?(l!=null&&c==="onScroll"&&rt("scroll",t),s||a===l||(s=[])):(s=s||[]).push(c,l))}n&&(s=s||[]).push("style",n);var c=s;(e.updateQueue=c)&&(e.flags|=4)}};Gk=function(t,e,n,r){n!==r&&(e.flags|=4)};function Lu(t,e){if(!ot)switch(t.tailMode){case"hidden":e=t.tail;for(var n=null;e!==null;)e.alternate!==null&&(n=e),e=e.sibling;n===null?t.tail=null:n.sibling=null;break;case"collapsed":n=t.tail;for(var r=null;n!==null;)n.alternate!==null&&(r=n),n=n.sibling;r===null?e||t.tail===null?t.tail=null:t.tail.sibling=null:r.sibling=null}}function Jt(t){var e=t.alternate!==null&&t.alternate.child===t.child,n=0,r=0;if(e)for(var i=t.child;i!==null;)n|=i.lanes|i.childLanes,r|=i.subtreeFlags&14680064,r|=i.flags&14680064,i.return=t,i=i.sibling;else for(i=t.child;i!==null;)n|=i.lanes|i.childLanes,r|=i.subtreeFlags,r|=i.flags,i.return=t,i=i.sibling;return t.subtreeFlags|=r,t.childLanes=n,e}function M8(t,e,n){var r=e.pendingProps;switch(d1(e),e.tag){case 2:case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return Jt(e),null;case 1:return $n(e.type)&&Fp(),Jt(e),null;case 3:return r=e.stateNode,iu(),it(Dn),it(un),b1(),r.pendingContext&&(r.context=r.pendingContext,r.pendingContext=null),(t===null||t.child===null)&&(nh(e)?e.flags|=4:t===null||t.memoizedState.isDehydrated&&!(e.flags&256)||(e.flags|=1024,Wr!==null&&(vv(Wr),Wr=null))),uv(t,e),Jt(e),null;case 5:w1(e);var i=ga(Dd.current);if(n=e.type,t!==null&&e.stateNode!=null)Vk(t,e,n,r,i),t.ref!==e.ref&&(e.flags|=512,e.flags|=2097152);else{if(!r){if(e.stateNode===null)throw Error(ue(166));return Jt(e),null}if(t=ga(Ni.current),nh(e)){r=e.stateNode,n=e.type;var s=e.memoizedProps;switch(r[Ei]=e,r[Ld]=s,t=(e.mode&1)!==0,n){case"dialog":rt("cancel",r),rt("close",r);break;case"iframe":case"object":case"embed":rt("load",r);break;case"video":case"audio":for(i=0;i<Qu.length;i++)rt(Qu[i],r);break;case"source":rt("error",r);break;case"img":case"image":case"link":rt("error",r),rt("load",r);break;case"details":rt("toggle",r);break;case"input":aE(r,s),rt("invalid",r);break;case"select":r._wrapperState={wasMultiple:!!s.multiple},rt("invalid",r);break;case"textarea":cE(r,s),rt("invalid",r)}Dy(n,s),i=null;for(var o in s)if(s.hasOwnProperty(o)){var a=s[o];o==="children"?typeof a=="string"?r.textContent!==a&&(s.suppressHydrationWarning!==!0&&th(r.textContent,a,t),i=["children",a]):typeof a=="number"&&r.textContent!==""+a&&(s.suppressHydrationWarning!==!0&&th(r.textContent,a,t),i=["children",""+a]):xd.hasOwnProperty(o)&&a!=null&&o==="onScroll"&&rt("scroll",r)}switch(n){case"input":Wf(r),lE(r,s,!0);break;case"textarea":Wf(r),uE(r);break;case"select":case"option":break;default:typeof s.onClick=="function"&&(r.onclick=Up)}r=i,e.updateQueue=r,r!==null&&(e.flags|=4)}else{o=i.nodeType===9?i:i.ownerDocument,t==="http://www.w3.org/1999/xhtml"&&(t=bx(n)),t==="http://www.w3.org/1999/xhtml"?n==="script"?(t=o.createElement("div"),t.innerHTML="<script><\/script>",t=t.removeChild(t.firstChild)):typeof r.is=="string"?t=o.createElement(n,{is:r.is}):(t=o.createElement(n),n==="select"&&(o=t,r.multiple?o.multiple=!0:r.size&&(o.size=r.size))):t=o.createElementNS(t,n),t[Ei]=e,t[Ld]=r,zk(t,e,!1,!1),e.stateNode=t;e:{switch(o=$y(n,r),n){case"dialog":rt("cancel",t),rt("close",t),i=r;break;case"iframe":case"object":case"embed":rt("load",t),i=r;break;case"video":case"audio":for(i=0;i<Qu.length;i++)rt(Qu[i],t);i=r;break;case"source":rt("error",t),i=r;break;case"img":case"image":case"link":rt("error",t),rt("load",t),i=r;break;case"details":rt("toggle",t),i=r;break;case"input":aE(t,r),i=Oy(t,r),rt("invalid",t);break;case"option":i=r;break;case"select":t._wrapperState={wasMultiple:!!r.multiple},i=dt({},r,{value:void 0}),rt("invalid",t);break;case"textarea":cE(t,r),i=Ly(t,r),rt("invalid",t);break;default:i=r}Dy(n,i),a=i;for(s in a)if(a.hasOwnProperty(s)){var l=a[s];s==="style"?Sx(t,l):s==="dangerouslySetInnerHTML"?(l=l?l.__html:void 0,l!=null&&Ex(t,l)):s==="children"?typeof l=="string"?(n!=="textarea"||l!=="")&&kd(t,l):typeof l=="number"&&kd(t,""+l):s!=="suppressContentEditableWarning"&&s!=="suppressHydrationWarning"&&s!=="autoFocus"&&(xd.hasOwnProperty(s)?l!=null&&s==="onScroll"&&rt("scroll",t):l!=null&&Yw(t,s,l,o))}switch(n){case"input":Wf(t),lE(t,r,!1);break;case"textarea":Wf(t),uE(t);break;case"option":r.value!=null&&t.setAttribute("value",""+Uo(r.value));break;case"select":t.multiple=!!r.multiple,s=r.value,s!=null?Xl(t,!!r.multiple,s,!1):r.defaultValue!=null&&Xl(t,!!r.multiple,r.defaultValue,!0);break;default:typeof i.onClick=="function"&&(t.onclick=Up)}switch(n){case"button":case"input":case"select":case"textarea":r=!!r.autoFocus;break e;case"img":r=!0;break e;default:r=!1}}r&&(e.flags|=4)}e.ref!==null&&(e.flags|=512,e.flags|=2097152)}return Jt(e),null;case 6:if(t&&e.stateNode!=null)Gk(t,e,t.memoizedProps,r);else{if(typeof r!="string"&&e.stateNode===null)throw Error(ue(166));if(n=ga(Dd.current),ga(Ni.current),nh(e)){if(r=e.stateNode,n=e.memoizedProps,r[Ei]=e,(s=r.nodeValue!==n)&&(t=rr,t!==null))switch(t.tag){case 3:th(r.nodeValue,n,(t.mode&1)!==0);break;case 5:t.memoizedProps.suppressHydrationWarning!==!0&&th(r.nodeValue,n,(t.mode&1)!==0)}s&&(e.flags|=4)}else r=(n.nodeType===9?n:n.ownerDocument).createTextNode(r),r[Ei]=e,e.stateNode=r}return Jt(e),null;case 13:if(it(lt),r=e.memoizedState,t===null||t.memoizedState!==null&&t.memoizedState.dehydrated!==null){if(ot&&nr!==null&&e.mode&1&&!(e.flags&128))uk(),nu(),e.flags|=98560,s=!1;else if(s=nh(e),r!==null&&r.dehydrated!==null){if(t===null){if(!s)throw Error(ue(318));if(s=e.memoizedState,s=s!==null?s.dehydrated:null,!s)throw Error(ue(317));s[Ei]=e}else nu(),!(e.flags&128)&&(e.memoizedState=null),e.flags|=4;Jt(e),s=!1}else Wr!==null&&(vv(Wr),Wr=null),s=!0;if(!s)return e.flags&65536?e:null}return e.flags&128?(e.lanes=n,e):(r=r!==null,r!==(t!==null&&t.memoizedState!==null)&&r&&(e.child.flags|=8192,e.mode&1&&(t===null||lt.current&1?_t===0&&(_t=3):O1())),e.updateQueue!==null&&(e.flags|=4),Jt(e),null);case 4:return iu(),uv(t,e),t===null&&Nd(e.stateNode.containerInfo),Jt(e),null;case 10:return g1(e.type._context),Jt(e),null;case 17:return $n(e.type)&&Fp(),Jt(e),null;case 19:if(it(lt),s=e.memoizedState,s===null)return Jt(e),null;if(r=(e.flags&128)!==0,o=s.rendering,o===null)if(r)Lu(s,!1);else{if(_t!==0||t!==null&&t.flags&128)for(t=e.child;t!==null;){if(o=Wp(t),o!==null){for(e.flags|=128,Lu(s,!1),r=o.updateQueue,r!==null&&(e.updateQueue=r,e.flags|=4),e.subtreeFlags=0,r=n,n=e.child;n!==null;)s=n,t=r,s.flags&=14680066,o=s.alternate,o===null?(s.childLanes=0,s.lanes=t,s.child=null,s.subtreeFlags=0,s.memoizedProps=null,s.memoizedState=null,s.updateQueue=null,s.dependencies=null,s.stateNode=null):(s.childLanes=o.childLanes,s.lanes=o.lanes,s.child=o.child,s.subtreeFlags=0,s.deletions=null,s.memoizedProps=o.memoizedProps,s.memoizedState=o.memoizedState,s.updateQueue=o.updateQueue,s.type=o.type,t=o.dependencies,s.dependencies=t===null?null:{lanes:t.lanes,firstContext:t.firstContext}),n=n.sibling;return tt(lt,lt.current&1|2),e.child}t=t.sibling}s.tail!==null&&wt()>ou&&(e.flags|=128,r=!0,Lu(s,!1),e.lanes=4194304)}else{if(!r)if(t=Wp(o),t!==null){if(e.flags|=128,r=!0,n=t.updateQueue,n!==null&&(e.updateQueue=n,e.flags|=4),Lu(s,!0),s.tail===null&&s.tailMode==="hidden"&&!o.alternate&&!ot)return Jt(e),null}else 2*wt()-s.renderingStartTime>ou&&n!==1073741824&&(e.flags|=128,r=!0,Lu(s,!1),e.lanes=4194304);s.isBackwards?(o.sibling=e.child,e.child=o):(n=s.last,n!==null?n.sibling=o:e.child=o,s.last=o)}return s.tail!==null?(e=s.tail,s.rendering=e,s.tail=e.sibling,s.renderingStartTime=wt(),e.sibling=null,n=lt.current,tt(lt,r?n&1|2:n&1),e):(Jt(e),null);case 22:case 23:return I1(),r=e.memoizedState!==null,t!==null&&t.memoizedState!==null!==r&&(e.flags|=8192),r&&e.mode&1?Xn&1073741824&&(Jt(e),e.subtreeFlags&6&&(e.flags|=8192)):Jt(e),null;case 24:return null;case 25:return null}throw Error(ue(156,e.tag))}function L8(t,e){switch(d1(e),e.tag){case 1:return $n(e.type)&&Fp(),t=e.flags,t&65536?(e.flags=t&-65537|128,e):null;case 3:return iu(),it(Dn),it(un),b1(),t=e.flags,t&65536&&!(t&128)?(e.flags=t&-65537|128,e):null;case 5:return w1(e),null;case 13:if(it(lt),t=e.memoizedState,t!==null&&t.dehydrated!==null){if(e.alternate===null)throw Error(ue(340));nu()}return t=e.flags,t&65536?(e.flags=t&-65537|128,e):null;case 19:return it(lt),null;case 4:return iu(),null;case 10:return g1(e.type._context),null;case 22:case 23:return I1(),null;case 24:return null;default:return null}}var sh=!1,on=!1,B8=typeof WeakSet=="function"?WeakSet:Set,ve=null;function $l(t,e){var n=t.ref;if(n!==null)if(typeof n=="function")try{n(null)}catch(r){pt(t,e,r)}else n.current=null}function dv(t,e,n){try{n()}catch(r){pt(t,e,r)}}var XE=!1;function D8(t,e){if(qy=Bp,t=Jx(),c1(t)){if("selectionStart"in t)var n={start:t.selectionStart,end:t.selectionEnd};else e:{n=(n=t.ownerDocument)&&n.defaultView||window;var r=n.getSelection&&n.getSelection();if(r&&r.rangeCount!==0){n=r.anchorNode;var i=r.anchorOffset,s=r.focusNode;r=r.focusOffset;try{n.nodeType,s.nodeType}catch{n=null;break e}var o=0,a=-1,l=-1,c=0,u=0,d=t,f=null;t:for(;;){for(var h;d!==n||i!==0&&d.nodeType!==3||(a=o+i),d!==s||r!==0&&d.nodeType!==3||(l=o+r),d.nodeType===3&&(o+=d.nodeValue.length),(h=d.firstChild)!==null;)f=d,d=h;for(;;){if(d===t)break t;if(f===n&&++c===i&&(a=o),f===s&&++u===r&&(l=o),(h=d.nextSibling)!==null)break;d=f,f=d.parentNode}d=h}n=a===-1||l===-1?null:{start:a,end:l}}else n=null}n=n||{start:0,end:0}}else n=null;for(Qy={focusedElem:t,selectionRange:n},Bp=!1,ve=e;ve!==null;)if(e=ve,t=e.child,(e.subtreeFlags&1028)!==0&&t!==null)t.return=e,ve=t;else for(;ve!==null;){e=ve;try{var m=e.alternate;if(e.flags&1024)switch(e.tag){case 0:case 11:case 15:break;case 1:if(m!==null){var g=m.memoizedProps,w=m.memoizedState,p=e.stateNode,v=p.getSnapshotBeforeUpdate(e.elementType===e.type?g:Dr(e.type,g),w);p.__reactInternalSnapshotBeforeUpdate=v}break;case 3:var y=e.stateNode.containerInfo;y.nodeType===1?y.textContent="":y.nodeType===9&&y.documentElement&&y.removeChild(y.documentElement);break;case 5:case 6:case 4:case 17:break;default:throw Error(ue(163))}}catch(x){pt(e,e.return,x)}if(t=e.sibling,t!==null){t.return=e.return,ve=t;break}ve=e.return}return m=XE,XE=!1,m}function fd(t,e,n){var r=e.updateQueue;if(r=r!==null?r.lastEffect:null,r!==null){var i=r=r.next;do{if((i.tag&t)===t){var s=i.destroy;i.destroy=void 0,s!==void 0&&dv(e,n,s)}i=i.next}while(i!==r)}}function sg(t,e){if(e=e.updateQueue,e=e!==null?e.lastEffect:null,e!==null){var n=e=e.next;do{if((n.tag&t)===t){var r=n.create;n.destroy=r()}n=n.next}while(n!==e)}}function fv(t){var e=t.ref;if(e!==null){var n=t.stateNode;switch(t.tag){case 5:t=n;break;default:t=n}typeof e=="function"?e(t):e.current=t}}function Wk(t){var e=t.alternate;e!==null&&(t.alternate=null,Wk(e)),t.child=null,t.deletions=null,t.sibling=null,t.tag===5&&(e=t.stateNode,e!==null&&(delete e[Ei],delete e[Ld],delete e[Zy],delete e[w8],delete e[b8])),t.stateNode=null,t.return=null,t.dependencies=null,t.memoizedProps=null,t.memoizedState=null,t.pendingProps=null,t.stateNode=null,t.updateQueue=null}function qk(t){return t.tag===5||t.tag===3||t.tag===4}function e2(t){e:for(;;){for(;t.sibling===null;){if(t.return===null||qk(t.return))return null;t=t.return}for(t.sibling.return=t.return,t=t.sibling;t.tag!==5&&t.tag!==6&&t.tag!==18;){if(t.flags&2||t.child===null||t.tag===4)continue e;t.child.return=t,t=t.child}if(!(t.flags&2))return t.stateNode}}function hv(t,e,n){var r=t.tag;if(r===5||r===6)t=t.stateNode,e?n.nodeType===8?n.parentNode.insertBefore(t,e):n.insertBefore(t,e):(n.nodeType===8?(e=n.parentNode,e.insertBefore(t,n)):(e=n,e.appendChild(t)),n=n._reactRootContainer,n!=null||e.onclick!==null||(e.onclick=Up));else if(r!==4&&(t=t.child,t!==null))for(hv(t,e,n),t=t.sibling;t!==null;)hv(t,e,n),t=t.sibling}function pv(t,e,n){var r=t.tag;if(r===5||r===6)t=t.stateNode,e?n.insertBefore(t,e):n.appendChild(t);else if(r!==4&&(t=t.child,t!==null))for(pv(t,e,n),t=t.sibling;t!==null;)pv(t,e,n),t=t.sibling}var Ht=null,Vr=!1;function Is(t,e,n){for(n=n.child;n!==null;)Qk(t,e,n),n=n.sibling}function Qk(t,e,n){if(Oi&&typeof Oi.onCommitFiberUnmount=="function")try{Oi.onCommitFiberUnmount(J0,n)}catch{}switch(n.tag){case 5:on||$l(n,e);case 6:var r=Ht,i=Vr;Ht=null,Is(t,e,n),Ht=r,Vr=i,Ht!==null&&(Vr?(t=Ht,n=n.stateNode,t.nodeType===8?t.parentNode.removeChild(n):t.removeChild(n)):Ht.removeChild(n.stateNode));break;case 18:Ht!==null&&(Vr?(t=Ht,n=n.stateNode,t.nodeType===8?om(t.parentNode,n):t.nodeType===1&&om(t,n),Rd(t)):om(Ht,n.stateNode));break;case 4:r=Ht,i=Vr,Ht=n.stateNode.containerInfo,Vr=!0,Is(t,e,n),Ht=r,Vr=i;break;case 0:case 11:case 14:case 15:if(!on&&(r=n.updateQueue,r!==null&&(r=r.lastEffect,r!==null))){i=r=r.next;do{var s=i,o=s.destroy;s=s.tag,o!==void 0&&(s&2||s&4)&&dv(n,e,o),i=i.next}while(i!==r)}Is(t,e,n);break;case 1:if(!on&&($l(n,e),r=n.stateNode,typeof r.componentWillUnmount=="function"))try{r.props=n.memoizedProps,r.state=n.memoizedState,r.componentWillUnmount()}catch(a){pt(n,e,a)}Is(t,e,n);break;case 21:Is(t,e,n);break;case 22:n.mode&1?(on=(r=on)||n.memoizedState!==null,Is(t,e,n),on=r):Is(t,e,n);break;default:Is(t,e,n)}}function t2(t){var e=t.updateQueue;if(e!==null){t.updateQueue=null;var n=t.stateNode;n===null&&(n=t.stateNode=new B8),e.forEach(function(r){var i=G8.bind(null,t,r);n.has(r)||(n.add(r),r.then(i,i))})}}function Or(t,e){var n=e.deletions;if(n!==null)for(var r=0;r<n.length;r++){var i=n[r];try{var s=t,o=e,a=o;e:for(;a!==null;){switch(a.tag){case 5:Ht=a.stateNode,Vr=!1;break e;case 3:Ht=a.stateNode.containerInfo,Vr=!0;break e;case 4:Ht=a.stateNode.containerInfo,Vr=!0;break e}a=a.return}if(Ht===null)throw Error(ue(160));Qk(s,o,i),Ht=null,Vr=!1;var l=i.alternate;l!==null&&(l.return=null),i.return=null}catch(c){pt(i,e,c)}}if(e.subtreeFlags&12854)for(e=e.child;e!==null;)Yk(e,t),e=e.sibling}function Yk(t,e){var n=t.alternate,r=t.flags;switch(t.tag){case 0:case 11:case 14:case 15:if(Or(e,t),si(t),r&4){try{fd(3,t,t.return),sg(3,t)}catch(g){pt(t,t.return,g)}try{fd(5,t,t.return)}catch(g){pt(t,t.return,g)}}break;case 1:Or(e,t),si(t),r&512&&n!==null&&$l(n,n.return);break;case 5:if(Or(e,t),si(t),r&512&&n!==null&&$l(n,n.return),t.flags&32){var i=t.stateNode;try{kd(i,"")}catch(g){pt(t,t.return,g)}}if(r&4&&(i=t.stateNode,i!=null)){var s=t.memoizedProps,o=n!==null?n.memoizedProps:s,a=t.type,l=t.updateQueue;if(t.updateQueue=null,l!==null)try{a==="input"&&s.type==="radio"&&s.name!=null&&vx(i,s),$y(a,o);var c=$y(a,s);for(o=0;o<l.length;o+=2){var u=l[o],d=l[o+1];u==="style"?Sx(i,d):u==="dangerouslySetInnerHTML"?Ex(i,d):u==="children"?kd(i,d):Yw(i,u,d,c)}switch(a){case"input":Ny(i,s);break;case"textarea":wx(i,s);break;case"select":var f=i._wrapperState.wasMultiple;i._wrapperState.wasMultiple=!!s.multiple;var h=s.value;h!=null?Xl(i,!!s.multiple,h,!1):f!==!!s.multiple&&(s.defaultValue!=null?Xl(i,!!s.multiple,s.defaultValue,!0):Xl(i,!!s.multiple,s.multiple?[]:"",!1))}i[Ld]=s}catch(g){pt(t,t.return,g)}}break;case 6:if(Or(e,t),si(t),r&4){if(t.stateNode===null)throw Error(ue(162));i=t.stateNode,s=t.memoizedProps;try{i.nodeValue=s}catch(g){pt(t,t.return,g)}}break;case 3:if(Or(e,t),si(t),r&4&&n!==null&&n.memoizedState.isDehydrated)try{Rd(e.containerInfo)}catch(g){pt(t,t.return,g)}break;case 4:Or(e,t),si(t);break;case 13:Or(e,t),si(t),i=t.child,i.flags&8192&&(s=i.memoizedState!==null,i.stateNode.isHidden=s,!s||i.alternate!==null&&i.alternate.memoizedState!==null||(T1=wt())),r&4&&t2(t);break;case 22:if(u=n!==null&&n.memoizedState!==null,t.mode&1?(on=(c=on)||u,Or(e,t),on=c):Or(e,t),si(t),r&8192){if(c=t.memoizedState!==null,(t.stateNode.isHidden=c)&&!u&&t.mode&1)for(ve=t,u=t.child;u!==null;){for(d=ve=u;ve!==null;){switch(f=ve,h=f.child,f.tag){case 0:case 11:case 14:case 15:fd(4,f,f.return);break;case 1:$l(f,f.return);var m=f.stateNode;if(typeof m.componentWillUnmount=="function"){r=f,n=f.return;try{e=r,m.props=e.memoizedProps,m.state=e.memoizedState,m.componentWillUnmount()}catch(g){pt(r,n,g)}}break;case 5:$l(f,f.return);break;case 22:if(f.memoizedState!==null){r2(d);continue}}h!==null?(h.return=f,ve=h):r2(d)}u=u.sibling}e:for(u=null,d=t;;){if(d.tag===5){if(u===null){u=d;try{i=d.stateNode,c?(s=i.style,typeof s.setProperty=="function"?s.setProperty("display","none","important"):s.display="none"):(a=d.stateNode,l=d.memoizedProps.style,o=l!=null&&l.hasOwnProperty("display")?l.display:null,a.style.display=Ax("display",o))}catch(g){pt(t,t.return,g)}}}else if(d.tag===6){if(u===null)try{d.stateNode.nodeValue=c?"":d.memoizedProps}catch(g){pt(t,t.return,g)}}else if((d.tag!==22&&d.tag!==23||d.memoizedState===null||d===t)&&d.child!==null){d.child.return=d,d=d.child;continue}if(d===t)break e;for(;d.sibling===null;){if(d.return===null||d.return===t)break e;u===d&&(u=null),d=d.return}u===d&&(u=null),d.sibling.return=d.return,d=d.sibling}}break;case 19:Or(e,t),si(t),r&4&&t2(t);break;case 21:break;default:Or(e,t),si(t)}}function si(t){var e=t.flags;if(e&2){try{e:{for(var n=t.return;n!==null;){if(qk(n)){var r=n;break e}n=n.return}throw Error(ue(160))}switch(r.tag){case 5:var i=r.stateNode;r.flags&32&&(kd(i,""),r.flags&=-33);var s=e2(t);pv(t,s,i);break;case 3:case 4:var o=r.stateNode.containerInfo,a=e2(t);hv(t,a,o);break;default:throw Error(ue(161))}}catch(l){pt(t,t.return,l)}t.flags&=-3}e&4096&&(t.flags&=-4097)}function $8(t,e,n){ve=t,Jk(t)}function Jk(t,e,n){for(var r=(t.mode&1)!==0;ve!==null;){var i=ve,s=i.child;if(i.tag===22&&r){var o=i.memoizedState!==null||sh;if(!o){var a=i.alternate,l=a!==null&&a.memoizedState!==null||on;a=sh;var c=on;if(sh=o,(on=l)&&!c)for(ve=i;ve!==null;)o=ve,l=o.child,o.tag===22&&o.memoizedState!==null?i2(i):l!==null?(l.return=o,ve=l):i2(i);for(;s!==null;)ve=s,Jk(s),s=s.sibling;ve=i,sh=a,on=c}n2(t)}else i.subtreeFlags&8772&&s!==null?(s.return=i,ve=s):n2(t)}}function n2(t){for(;ve!==null;){var e=ve;if(e.flags&8772){var n=e.alternate;try{if(e.flags&8772)switch(e.tag){case 0:case 11:case 15:on||sg(5,e);break;case 1:var r=e.stateNode;if(e.flags&4&&!on)if(n===null)r.componentDidMount();else{var i=e.elementType===e.type?n.memoizedProps:Dr(e.type,n.memoizedProps);r.componentDidUpdate(i,n.memoizedState,r.__reactInternalSnapshotBeforeUpdate)}var s=e.updateQueue;s!==null&&FE(e,s,r);break;case 3:var o=e.updateQueue;if(o!==null){if(n=null,e.child!==null)switch(e.child.tag){case 5:n=e.child.stateNode;break;case 1:n=e.child.stateNode}FE(e,o,n)}break;case 5:var a=e.stateNode;if(n===null&&e.flags&4){n=a;var l=e.memoizedProps;switch(e.type){case"button":case"input":case"select":case"textarea":l.autoFocus&&n.focus();break;case"img":l.src&&(n.src=l.src)}}break;case 6:break;case 4:break;case 12:break;case 13:if(e.memoizedState===null){var c=e.alternate;if(c!==null){var u=c.memoizedState;if(u!==null){var d=u.dehydrated;d!==null&&Rd(d)}}}break;case 19:case 17:case 21:case 22:case 23:case 25:break;default:throw Error(ue(163))}on||e.flags&512&&fv(e)}catch(f){pt(e,e.return,f)}}if(e===t){ve=null;break}if(n=e.sibling,n!==null){n.return=e.return,ve=n;break}ve=e.return}}function r2(t){for(;ve!==null;){var e=ve;if(e===t){ve=null;break}var n=e.sibling;if(n!==null){n.return=e.return,ve=n;break}ve=e.return}}function i2(t){for(;ve!==null;){var e=ve;try{switch(e.tag){case 0:case 11:case 15:var n=e.return;try{sg(4,e)}catch(l){pt(e,n,l)}break;case 1:var r=e.stateNode;if(typeof r.componentDidMount=="function"){var i=e.return;try{r.componentDidMount()}catch(l){pt(e,i,l)}}var s=e.return;try{fv(e)}catch(l){pt(e,s,l)}break;case 5:var o=e.return;try{fv(e)}catch(l){pt(e,o,l)}}}catch(l){pt(e,e.return,l)}if(e===t){ve=null;break}var a=e.sibling;if(a!==null){a.return=e.return,ve=a;break}ve=e.return}}var U8=Math.ceil,Yp=Ps.ReactCurrentDispatcher,_1=Ps.ReactCurrentOwner,Tr=Ps.ReactCurrentBatchConfig,He=0,$t=null,At=null,Wt=0,Xn=0,Ul=Qo(0),_t=0,jd=null,Za=0,og=0,P1=0,hd=null,Nn=null,T1=0,ou=1/0,Ki=null,Jp=!1,gv=null,Oo=null,oh=!1,Co=null,Zp=0,pd=0,mv=null,Zh=-1,Xh=0;function Sn(){return He&6?wt():Zh!==-1?Zh:Zh=wt()}function No(t){return t.mode&1?He&2&&Wt!==0?Wt&-Wt:A8.transition!==null?(Xh===0&&(Xh=Lx()),Xh):(t=Ye,t!==0||(t=window.event,t=t===void 0?16:Hx(t.type)),t):1}function Xr(t,e,n,r){if(50<pd)throw pd=0,mv=null,Error(ue(185));Pf(t,n,r),(!(He&2)||t!==$t)&&(t===$t&&(!(He&2)&&(og|=n),_t===4&&to(t,Wt)),Un(t,r),n===1&&He===0&&!(e.mode&1)&&(ou=wt()+500,ng&&Yo()))}function Un(t,e){var n=t.callbackNode;AO(t,e);var r=Lp(t,t===$t?Wt:0);if(r===0)n!==null&&hE(n),t.callbackNode=null,t.callbackPriority=0;else if(e=r&-r,t.callbackPriority!==e){if(n!=null&&hE(n),e===1)t.tag===0?E8(s2.bind(null,t)):ak(s2.bind(null,t)),y8(function(){!(He&6)&&Yo()}),n=null;else{switch(Bx(r)){case 1:n=t1;break;case 4:n=Nx;break;case 16:n=Mp;break;case 536870912:n=Mx;break;default:n=Mp}n=s_(n,Zk.bind(null,t))}t.callbackPriority=e,t.callbackNode=n}}function Zk(t,e){if(Zh=-1,Xh=0,He&6)throw Error(ue(327));var n=t.callbackNode;if(ic()&&t.callbackNode!==n)return null;var r=Lp(t,t===$t?Wt:0);if(r===0)return null;if(r&30||r&t.expiredLanes||e)e=Xp(t,r);else{e=r;var i=He;He|=2;var s=e_();($t!==t||Wt!==e)&&(Ki=null,ou=wt()+500,za(t,e));do try{H8();break}catch(a){Xk(t,a)}while(!0);p1(),Yp.current=s,He=i,At!==null?e=0:($t=null,Wt=0,e=_t)}if(e!==0){if(e===2&&(i=Ky(t),i!==0&&(r=i,e=yv(t,i))),e===1)throw n=jd,za(t,0),to(t,r),Un(t,wt()),n;if(e===6)to(t,r);else{if(i=t.current.alternate,!(r&30)&&!F8(i)&&(e=Xp(t,r),e===2&&(s=Ky(t),s!==0&&(r=s,e=yv(t,s))),e===1))throw n=jd,za(t,0),to(t,r),Un(t,wt()),n;switch(t.finishedWork=i,t.finishedLanes=r,e){case 0:case 1:throw Error(ue(345));case 2:ra(t,Nn,Ki);break;case 3:if(to(t,r),(r&130023424)===r&&(e=T1+500-wt(),10<e)){if(Lp(t,0)!==0)break;if(i=t.suspendedLanes,(i&r)!==r){Sn(),t.pingedLanes|=t.suspendedLanes&i;break}t.timeoutHandle=Jy(ra.bind(null,t,Nn,Ki),e);break}ra(t,Nn,Ki);break;case 4:if(to(t,r),(r&4194240)===r)break;for(e=t.eventTimes,i=-1;0<r;){var o=31-Zr(r);s=1<<o,o=e[o],o>i&&(i=o),r&=~s}if(r=i,r=wt()-r,r=(120>r?120:480>r?480:1080>r?1080:1920>r?1920:3e3>r?3e3:4320>r?4320:1960*U8(r/1960))-r,10<r){t.timeoutHandle=Jy(ra.bind(null,t,Nn,Ki),r);break}ra(t,Nn,Ki);break;case 5:ra(t,Nn,Ki);break;default:throw Error(ue(329))}}}return Un(t,wt()),t.callbackNode===n?Zk.bind(null,t):null}function yv(t,e){var n=hd;return t.current.memoizedState.isDehydrated&&(za(t,e).flags|=256),t=Xp(t,e),t!==2&&(e=Nn,Nn=n,e!==null&&vv(e)),t}function vv(t){Nn===null?Nn=t:Nn.push.apply(Nn,t)}function F8(t){for(var e=t;;){if(e.flags&16384){var n=e.updateQueue;if(n!==null&&(n=n.stores,n!==null))for(var r=0;r<n.length;r++){var i=n[r],s=i.getSnapshot;i=i.value;try{if(!ti(s(),i))return!1}catch{return!1}}}if(n=e.child,e.subtreeFlags&16384&&n!==null)n.return=e,e=n;else{if(e===t)break;for(;e.sibling===null;){if(e.return===null||e.return===t)return!0;e=e.return}e.sibling.return=e.return,e=e.sibling}}return!0}function to(t,e){for(e&=~P1,e&=~og,t.suspendedLanes|=e,t.pingedLanes&=~e,t=t.expirationTimes;0<e;){var n=31-Zr(e),r=1<<n;t[n]=-1,e&=~r}}function s2(t){if(He&6)throw Error(ue(327));ic();var e=Lp(t,0);if(!(e&1))return Un(t,wt()),null;var n=Xp(t,e);if(t.tag!==0&&n===2){var r=Ky(t);r!==0&&(e=r,n=yv(t,r))}if(n===1)throw n=jd,za(t,0),to(t,e),Un(t,wt()),n;if(n===6)throw Error(ue(345));return t.finishedWork=t.current.alternate,t.finishedLanes=e,ra(t,Nn,Ki),Un(t,wt()),null}function R1(t,e){var n=He;He|=1;try{return t(e)}finally{He=n,He===0&&(ou=wt()+500,ng&&Yo())}}function Xa(t){Co!==null&&Co.tag===0&&!(He&6)&&ic();var e=He;He|=1;var n=Tr.transition,r=Ye;try{if(Tr.transition=null,Ye=1,t)return t()}finally{Ye=r,Tr.transition=n,He=e,!(He&6)&&Yo()}}function I1(){Xn=Ul.current,it(Ul)}function za(t,e){t.finishedWork=null,t.finishedLanes=0;var n=t.timeoutHandle;if(n!==-1&&(t.timeoutHandle=-1,m8(n)),At!==null)for(n=At.return;n!==null;){var r=n;switch(d1(r),r.tag){case 1:r=r.type.childContextTypes,r!=null&&Fp();break;case 3:iu(),it(Dn),it(un),b1();break;case 5:w1(r);break;case 4:iu();break;case 13:it(lt);break;case 19:it(lt);break;case 10:g1(r.type._context);break;case 22:case 23:I1()}n=n.return}if($t=t,At=t=Mo(t.current,null),Wt=Xn=e,_t=0,jd=null,P1=og=Za=0,Nn=hd=null,pa!==null){for(e=0;e<pa.length;e++)if(n=pa[e],r=n.interleaved,r!==null){n.interleaved=null;var i=r.next,s=n.pending;if(s!==null){var o=s.next;s.next=i,r.next=o}n.pending=r}pa=null}return t}function Xk(t,e){do{var n=At;try{if(p1(),Qh.current=Qp,qp){for(var r=ut.memoizedState;r!==null;){var i=r.queue;i!==null&&(i.pending=null),r=r.next}qp=!1}if(Ja=0,Mt=xt=ut=null,dd=!1,$d=0,_1.current=null,n===null||n.return===null){_t=1,jd=e,At=null;break}e:{var s=t,o=n.return,a=n,l=e;if(e=Wt,a.flags|=32768,l!==null&&typeof l=="object"&&typeof l.then=="function"){var c=l,u=a,d=u.tag;if(!(u.mode&1)&&(d===0||d===11||d===15)){var f=u.alternate;f?(u.updateQueue=f.updateQueue,u.memoizedState=f.memoizedState,u.lanes=f.lanes):(u.updateQueue=null,u.memoizedState=null)}var h=GE(o);if(h!==null){h.flags&=-257,WE(h,o,a,s,e),h.mode&1&&VE(s,c,e),e=h,l=c;var m=e.updateQueue;if(m===null){var g=new Set;g.add(l),e.updateQueue=g}else m.add(l);break e}else{if(!(e&1)){VE(s,c,e),O1();break e}l=Error(ue(426))}}else if(ot&&a.mode&1){var w=GE(o);if(w!==null){!(w.flags&65536)&&(w.flags|=256),WE(w,o,a,s,e),f1(su(l,a));break e}}s=l=su(l,a),_t!==4&&(_t=2),hd===null?hd=[s]:hd.push(s),s=o;do{switch(s.tag){case 3:s.flags|=65536,e&=-e,s.lanes|=e;var p=Bk(s,l,e);UE(s,p);break e;case 1:a=l;var v=s.type,y=s.stateNode;if(!(s.flags&128)&&(typeof v.getDerivedStateFromError=="function"||y!==null&&typeof y.componentDidCatch=="function"&&(Oo===null||!Oo.has(y)))){s.flags|=65536,e&=-e,s.lanes|=e;var x=Dk(s,a,e);UE(s,x);break e}}s=s.return}while(s!==null)}n_(n)}catch(T){e=T,At===n&&n!==null&&(At=n=n.return);continue}break}while(!0)}function e_(){var t=Yp.current;return Yp.current=Qp,t===null?Qp:t}function O1(){(_t===0||_t===3||_t===2)&&(_t=4),$t===null||!(Za&268435455)&&!(og&268435455)||to($t,Wt)}function Xp(t,e){var n=He;He|=2;var r=e_();($t!==t||Wt!==e)&&(Ki=null,za(t,e));do try{j8();break}catch(i){Xk(t,i)}while(!0);if(p1(),He=n,Yp.current=r,At!==null)throw Error(ue(261));return $t=null,Wt=0,_t}function j8(){for(;At!==null;)t_(At)}function H8(){for(;At!==null&&!hO();)t_(At)}function t_(t){var e=i_(t.alternate,t,Xn);t.memoizedProps=t.pendingProps,e===null?n_(t):At=e,_1.current=null}function n_(t){var e=t;do{var n=e.alternate;if(t=e.return,e.flags&32768){if(n=L8(n,e),n!==null){n.flags&=32767,At=n;return}if(t!==null)t.flags|=32768,t.subtreeFlags=0,t.deletions=null;else{_t=6,At=null;return}}else if(n=M8(n,e,Xn),n!==null){At=n;return}if(e=e.sibling,e!==null){At=e;return}At=e=t}while(e!==null);_t===0&&(_t=5)}function ra(t,e,n){var r=Ye,i=Tr.transition;try{Tr.transition=null,Ye=1,K8(t,e,n,r)}finally{Tr.transition=i,Ye=r}return null}function K8(t,e,n,r){do ic();while(Co!==null);if(He&6)throw Error(ue(327));n=t.finishedWork;var i=t.finishedLanes;if(n===null)return null;if(t.finishedWork=null,t.finishedLanes=0,n===t.current)throw Error(ue(177));t.callbackNode=null,t.callbackPriority=0;var s=n.lanes|n.childLanes;if(SO(t,s),t===$t&&(At=$t=null,Wt=0),!(n.subtreeFlags&2064)&&!(n.flags&2064)||oh||(oh=!0,s_(Mp,function(){return ic(),null})),s=(n.flags&15990)!==0,n.subtreeFlags&15990||s){s=Tr.transition,Tr.transition=null;var o=Ye;Ye=1;var a=He;He|=4,_1.current=null,D8(t,n),Yk(n,t),c8(Qy),Bp=!!qy,Qy=qy=null,t.current=n,$8(n),pO(),He=a,Ye=o,Tr.transition=s}else t.current=n;if(oh&&(oh=!1,Co=t,Zp=i),s=t.pendingLanes,s===0&&(Oo=null),yO(n.stateNode),Un(t,wt()),e!==null)for(r=t.onRecoverableError,n=0;n<e.length;n++)i=e[n],r(i.value,{componentStack:i.stack,digest:i.digest});if(Jp)throw Jp=!1,t=gv,gv=null,t;return Zp&1&&t.tag!==0&&ic(),s=t.pendingLanes,s&1?t===mv?pd++:(pd=0,mv=t):pd=0,Yo(),null}function ic(){if(Co!==null){var t=Bx(Zp),e=Tr.transition,n=Ye;try{if(Tr.transition=null,Ye=16>t?16:t,Co===null)var r=!1;else{if(t=Co,Co=null,Zp=0,He&6)throw Error(ue(331));var i=He;for(He|=4,ve=t.current;ve!==null;){var s=ve,o=s.child;if(ve.flags&16){var a=s.deletions;if(a!==null){for(var l=0;l<a.length;l++){var c=a[l];for(ve=c;ve!==null;){var u=ve;switch(u.tag){case 0:case 11:case 15:fd(8,u,s)}var d=u.child;if(d!==null)d.return=u,ve=d;else for(;ve!==null;){u=ve;var f=u.sibling,h=u.return;if(Wk(u),u===c){ve=null;break}if(f!==null){f.return=h,ve=f;break}ve=h}}}var m=s.alternate;if(m!==null){var g=m.child;if(g!==null){m.child=null;do{var w=g.sibling;g.sibling=null,g=w}while(g!==null)}}ve=s}}if(s.subtreeFlags&2064&&o!==null)o.return=s,ve=o;else e:for(;ve!==null;){if(s=ve,s.flags&2048)switch(s.tag){case 0:case 11:case 15:fd(9,s,s.return)}var p=s.sibling;if(p!==null){p.return=s.return,ve=p;break e}ve=s.return}}var v=t.current;for(ve=v;ve!==null;){o=ve;var y=o.child;if(o.subtreeFlags&2064&&y!==null)y.return=o,ve=y;else e:for(o=v;ve!==null;){if(a=ve,a.flags&2048)try{switch(a.tag){case 0:case 11:case 15:sg(9,a)}}catch(T){pt(a,a.return,T)}if(a===o){ve=null;break e}var x=a.sibling;if(x!==null){x.return=a.return,ve=x;break e}ve=a.return}}if(He=i,Yo(),Oi&&typeof Oi.onPostCommitFiberRoot=="function")try{Oi.onPostCommitFiberRoot(J0,t)}catch{}r=!0}return r}finally{Ye=n,Tr.transition=e}}return!1}function o2(t,e,n){e=su(n,e),e=Bk(t,e,1),t=Io(t,e,1),e=Sn(),t!==null&&(Pf(t,1,e),Un(t,e))}function pt(t,e,n){if(t.tag===3)o2(t,t,n);else for(;e!==null;){if(e.tag===3){o2(e,t,n);break}else if(e.tag===1){var r=e.stateNode;if(typeof e.type.getDerivedStateFromError=="function"||typeof r.componentDidCatch=="function"&&(Oo===null||!Oo.has(r))){t=su(n,t),t=Dk(e,t,1),e=Io(e,t,1),t=Sn(),e!==null&&(Pf(e,1,t),Un(e,t));break}}e=e.return}}function z8(t,e,n){var r=t.pingCache;r!==null&&r.delete(e),e=Sn(),t.pingedLanes|=t.suspendedLanes&n,$t===t&&(Wt&n)===n&&(_t===4||_t===3&&(Wt&130023424)===Wt&&500>wt()-T1?za(t,0):P1|=n),Un(t,e)}function r_(t,e){e===0&&(t.mode&1?(e=Yf,Yf<<=1,!(Yf&130023424)&&(Yf=4194304)):e=1);var n=Sn();t=Ss(t,e),t!==null&&(Pf(t,e,n),Un(t,n))}function V8(t){var e=t.memoizedState,n=0;e!==null&&(n=e.retryLane),r_(t,n)}function G8(t,e){var n=0;switch(t.tag){case 13:var r=t.stateNode,i=t.memoizedState;i!==null&&(n=i.retryLane);break;case 19:r=t.stateNode;break;default:throw Error(ue(314))}r!==null&&r.delete(e),r_(t,n)}var i_;i_=function(t,e,n){if(t!==null)if(t.memoizedProps!==e.pendingProps||Dn.current)Ln=!0;else{if(!(t.lanes&n)&&!(e.flags&128))return Ln=!1,N8(t,e,n);Ln=!!(t.flags&131072)}else Ln=!1,ot&&e.flags&1048576&&lk(e,Kp,e.index);switch(e.lanes=0,e.tag){case 2:var r=e.type;Jh(t,e),t=e.pendingProps;var i=tu(e,un.current);rc(e,n),i=A1(null,e,r,t,i,n);var s=S1();return e.flags|=1,typeof i=="object"&&i!==null&&typeof i.render=="function"&&i.$$typeof===void 0?(e.tag=1,e.memoizedState=null,e.updateQueue=null,$n(r)?(s=!0,jp(e)):s=!1,e.memoizedState=i.state!==null&&i.state!==void 0?i.state:null,y1(e),i.updater=ig,e.stateNode=i,i._reactInternals=e,iv(e,r,t,n),e=av(null,e,r,!0,s,n)):(e.tag=0,ot&&s&&u1(e),pn(null,e,i,n),e=e.child),e;case 16:r=e.elementType;e:{switch(Jh(t,e),t=e.pendingProps,i=r._init,r=i(r._payload),e.type=r,i=e.tag=q8(r),t=Dr(r,t),i){case 0:e=ov(null,e,r,t,n);break e;case 1:e=YE(null,e,r,t,n);break e;case 11:e=qE(null,e,r,t,n);break e;case 14:e=QE(null,e,r,Dr(r.type,t),n);break e}throw Error(ue(306,r,""))}return e;case 0:return r=e.type,i=e.pendingProps,i=e.elementType===r?i:Dr(r,i),ov(t,e,r,i,n);case 1:return r=e.type,i=e.pendingProps,i=e.elementType===r?i:Dr(r,i),YE(t,e,r,i,n);case 3:e:{if(jk(e),t===null)throw Error(ue(387));r=e.pendingProps,s=e.memoizedState,i=s.element,pk(t,e),Gp(e,r,null,n);var o=e.memoizedState;if(r=o.element,s.isDehydrated)if(s={element:r,isDehydrated:!1,cache:o.cache,pendingSuspenseBoundaries:o.pendingSuspenseBoundaries,transitions:o.transitions},e.updateQueue.baseState=s,e.memoizedState=s,e.flags&256){i=su(Error(ue(423)),e),e=JE(t,e,r,n,i);break e}else if(r!==i){i=su(Error(ue(424)),e),e=JE(t,e,r,n,i);break e}else for(nr=Ro(e.stateNode.containerInfo.firstChild),rr=e,ot=!0,Wr=null,n=fk(e,null,r,n),e.child=n;n;)n.flags=n.flags&-3|4096,n=n.sibling;else{if(nu(),r===i){e=Cs(t,e,n);break e}pn(t,e,r,n)}e=e.child}return e;case 5:return gk(e),t===null&&tv(e),r=e.type,i=e.pendingProps,s=t!==null?t.memoizedProps:null,o=i.children,Yy(r,i)?o=null:s!==null&&Yy(r,s)&&(e.flags|=32),Fk(t,e),pn(t,e,o,n),e.child;case 6:return t===null&&tv(e),null;case 13:return Hk(t,e,n);case 4:return v1(e,e.stateNode.containerInfo),r=e.pendingProps,t===null?e.child=ru(e,null,r,n):pn(t,e,r,n),e.child;case 11:return r=e.type,i=e.pendingProps,i=e.elementType===r?i:Dr(r,i),qE(t,e,r,i,n);case 7:return pn(t,e,e.pendingProps,n),e.child;case 8:return pn(t,e,e.pendingProps.children,n),e.child;case 12:return pn(t,e,e.pendingProps.children,n),e.child;case 10:e:{if(r=e.type._context,i=e.pendingProps,s=e.memoizedProps,o=i.value,tt(zp,r._currentValue),r._currentValue=o,s!==null)if(ti(s.value,o)){if(s.children===i.children&&!Dn.current){e=Cs(t,e,n);break e}}else for(s=e.child,s!==null&&(s.return=e);s!==null;){var a=s.dependencies;if(a!==null){o=s.child;for(var l=a.firstContext;l!==null;){if(l.context===r){if(s.tag===1){l=ys(-1,n&-n),l.tag=2;var c=s.updateQueue;if(c!==null){c=c.shared;var u=c.pending;u===null?l.next=l:(l.next=u.next,u.next=l),c.pending=l}}s.lanes|=n,l=s.alternate,l!==null&&(l.lanes|=n),nv(s.return,n,e),a.lanes|=n;break}l=l.next}}else if(s.tag===10)o=s.type===e.type?null:s.child;else if(s.tag===18){if(o=s.return,o===null)throw Error(ue(341));o.lanes|=n,a=o.alternate,a!==null&&(a.lanes|=n),nv(o,n,e),o=s.sibling}else o=s.child;if(o!==null)o.return=s;else for(o=s;o!==null;){if(o===e){o=null;break}if(s=o.sibling,s!==null){s.return=o.return,o=s;break}o=o.return}s=o}pn(t,e,i.children,n),e=e.child}return e;case 9:return i=e.type,r=e.pendingProps.children,rc(e,n),i=Rr(i),r=r(i),e.flags|=1,pn(t,e,r,n),e.child;case 14:return r=e.type,i=Dr(r,e.pendingProps),i=Dr(r.type,i),QE(t,e,r,i,n);case 15:return $k(t,e,e.type,e.pendingProps,n);case 17:return r=e.type,i=e.pendingProps,i=e.elementType===r?i:Dr(r,i),Jh(t,e),e.tag=1,$n(r)?(t=!0,jp(e)):t=!1,rc(e,n),Lk(e,r,i),iv(e,r,i,n),av(null,e,r,!0,t,n);case 19:return Kk(t,e,n);case 22:return Uk(t,e,n)}throw Error(ue(156,e.tag))};function s_(t,e){return Ox(t,e)}function W8(t,e,n,r){this.tag=t,this.key=n,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.ref=null,this.pendingProps=e,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=r,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function _r(t,e,n,r){return new W8(t,e,n,r)}function N1(t){return t=t.prototype,!(!t||!t.isReactComponent)}function q8(t){if(typeof t=="function")return N1(t)?1:0;if(t!=null){if(t=t.$$typeof,t===Zw)return 11;if(t===Xw)return 14}return 2}function Mo(t,e){var n=t.alternate;return n===null?(n=_r(t.tag,e,t.key,t.mode),n.elementType=t.elementType,n.type=t.type,n.stateNode=t.stateNode,n.alternate=t,t.alternate=n):(n.pendingProps=e,n.type=t.type,n.flags=0,n.subtreeFlags=0,n.deletions=null),n.flags=t.flags&14680064,n.childLanes=t.childLanes,n.lanes=t.lanes,n.child=t.child,n.memoizedProps=t.memoizedProps,n.memoizedState=t.memoizedState,n.updateQueue=t.updateQueue,e=t.dependencies,n.dependencies=e===null?null:{lanes:e.lanes,firstContext:e.firstContext},n.sibling=t.sibling,n.index=t.index,n.ref=t.ref,n}function ep(t,e,n,r,i,s){var o=2;if(r=t,typeof t=="function")N1(t)&&(o=1);else if(typeof t=="string")o=5;else e:switch(t){case Tl:return Va(n.children,i,s,e);case Jw:o=8,i|=8;break;case Py:return t=_r(12,n,e,i|2),t.elementType=Py,t.lanes=s,t;case Ty:return t=_r(13,n,e,i),t.elementType=Ty,t.lanes=s,t;case Ry:return t=_r(19,n,e,i),t.elementType=Ry,t.lanes=s,t;case gx:return ag(n,i,s,e);default:if(typeof t=="object"&&t!==null)switch(t.$$typeof){case hx:o=10;break e;case px:o=9;break e;case Zw:o=11;break e;case Xw:o=14;break e;case Gs:o=16,r=null;break e}throw Error(ue(130,t==null?t:typeof t,""))}return e=_r(o,n,e,i),e.elementType=t,e.type=r,e.lanes=s,e}function Va(t,e,n,r){return t=_r(7,t,r,e),t.lanes=n,t}function ag(t,e,n,r){return t=_r(22,t,r,e),t.elementType=gx,t.lanes=n,t.stateNode={isHidden:!1},t}function pm(t,e,n){return t=_r(6,t,null,e),t.lanes=n,t}function gm(t,e,n){return e=_r(4,t.children!==null?t.children:[],t.key,e),e.lanes=n,e.stateNode={containerInfo:t.containerInfo,pendingChildren:null,implementation:t.implementation},e}function Q8(t,e,n,r,i){this.tag=e,this.containerInfo=t,this.finishedWork=this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.pendingContext=this.context=null,this.callbackPriority=0,this.eventTimes=Qg(0),this.expirationTimes=Qg(-1),this.entangledLanes=this.finishedLanes=this.mutableReadLanes=this.expiredLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=Qg(0),this.identifierPrefix=r,this.onRecoverableError=i,this.mutableSourceEagerHydrationData=null}function M1(t,e,n,r,i,s,o,a,l){return t=new Q8(t,e,n,a,l),e===1?(e=1,s===!0&&(e|=8)):e=0,s=_r(3,null,null,e),t.current=s,s.stateNode=t,s.memoizedState={element:r,isDehydrated:n,cache:null,transitions:null,pendingSuspenseBoundaries:null},y1(s),t}function Y8(t,e,n){var r=3<arguments.length&&arguments[3]!==void 0?arguments[3]:null;return{$$typeof:Pl,key:r==null?null:""+r,children:t,containerInfo:e,implementation:n}}function o_(t){if(!t)return Fo;t=t._reactInternals;e:{if(ll(t)!==t||t.tag!==1)throw Error(ue(170));var e=t;do{switch(e.tag){case 3:e=e.stateNode.context;break e;case 1:if($n(e.type)){e=e.stateNode.__reactInternalMemoizedMergedChildContext;break e}}e=e.return}while(e!==null);throw Error(ue(171))}if(t.tag===1){var n=t.type;if($n(n))return ok(t,n,e)}return e}function a_(t,e,n,r,i,s,o,a,l){return t=M1(n,r,!0,t,i,s,o,a,l),t.context=o_(null),n=t.current,r=Sn(),i=No(n),s=ys(r,i),s.callback=e??null,Io(n,s,i),t.current.lanes=i,Pf(t,i,r),Un(t,r),t}function lg(t,e,n,r){var i=e.current,s=Sn(),o=No(i);return n=o_(n),e.context===null?e.context=n:e.pendingContext=n,e=ys(s,o),e.payload={element:t},r=r===void 0?null:r,r!==null&&(e.callback=r),t=Io(i,e,o),t!==null&&(Xr(t,i,o,s),qh(t,i,o)),o}function e0(t){if(t=t.current,!t.child)return null;switch(t.child.tag){case 5:return t.child.stateNode;default:return t.child.stateNode}}function a2(t,e){if(t=t.memoizedState,t!==null&&t.dehydrated!==null){var n=t.retryLane;t.retryLane=n!==0&&n<e?n:e}}function L1(t,e){a2(t,e),(t=t.alternate)&&a2(t,e)}function J8(){return null}var l_=typeof reportError=="function"?reportError:function(t){console.error(t)};function B1(t){this._internalRoot=t}cg.prototype.render=B1.prototype.render=function(t){var e=this._internalRoot;if(e===null)throw Error(ue(409));lg(t,e,null,null)};cg.prototype.unmount=B1.prototype.unmount=function(){var t=this._internalRoot;if(t!==null){this._internalRoot=null;var e=t.containerInfo;Xa(function(){lg(null,t,null,null)}),e[As]=null}};function cg(t){this._internalRoot=t}cg.prototype.unstable_scheduleHydration=function(t){if(t){var e=Ux();t={blockedOn:null,target:t,priority:e};for(var n=0;n<eo.length&&e!==0&&e<eo[n].priority;n++);eo.splice(n,0,t),n===0&&jx(t)}};function D1(t){return!(!t||t.nodeType!==1&&t.nodeType!==9&&t.nodeType!==11)}function ug(t){return!(!t||t.nodeType!==1&&t.nodeType!==9&&t.nodeType!==11&&(t.nodeType!==8||t.nodeValue!==" react-mount-point-unstable "))}function l2(){}function Z8(t,e,n,r,i){if(i){if(typeof r=="function"){var s=r;r=function(){var c=e0(o);s.call(c)}}var o=a_(e,r,t,0,null,!1,!1,"",l2);return t._reactRootContainer=o,t[As]=o.current,Nd(t.nodeType===8?t.parentNode:t),Xa(),o}for(;i=t.lastChild;)t.removeChild(i);if(typeof r=="function"){var a=r;r=function(){var c=e0(l);a.call(c)}}var l=M1(t,0,!1,null,null,!1,!1,"",l2);return t._reactRootContainer=l,t[As]=l.current,Nd(t.nodeType===8?t.parentNode:t),Xa(function(){lg(e,l,n,r)}),l}function dg(t,e,n,r,i){var s=n._reactRootContainer;if(s){var o=s;if(typeof i=="function"){var a=i;i=function(){var l=e0(o);a.call(l)}}lg(e,o,t,i)}else o=Z8(n,e,t,i,r);return e0(o)}Dx=function(t){switch(t.tag){case 3:var e=t.stateNode;if(e.current.memoizedState.isDehydrated){var n=qu(e.pendingLanes);n!==0&&(n1(e,n|1),Un(e,wt()),!(He&6)&&(ou=wt()+500,Yo()))}break;case 13:Xa(function(){var r=Ss(t,1);if(r!==null){var i=Sn();Xr(r,t,1,i)}}),L1(t,1)}};r1=function(t){if(t.tag===13){var e=Ss(t,134217728);if(e!==null){var n=Sn();Xr(e,t,134217728,n)}L1(t,134217728)}};$x=function(t){if(t.tag===13){var e=No(t),n=Ss(t,e);if(n!==null){var r=Sn();Xr(n,t,e,r)}L1(t,e)}};Ux=function(){return Ye};Fx=function(t,e){var n=Ye;try{return Ye=t,e()}finally{Ye=n}};Fy=function(t,e,n){switch(e){case"input":if(Ny(t,n),e=n.name,n.type==="radio"&&e!=null){for(n=t;n.parentNode;)n=n.parentNode;for(n=n.querySelectorAll("input[name="+JSON.stringify(""+e)+'][type="radio"]'),e=0;e<n.length;e++){var r=n[e];if(r!==t&&r.form===t.form){var i=tg(r);if(!i)throw Error(ue(90));yx(r),Ny(r,i)}}}break;case"textarea":wx(t,n);break;case"select":e=n.value,e!=null&&Xl(t,!!n.multiple,e,!1)}};kx=R1;_x=Xa;var X8={usingClientEntryPoint:!1,Events:[Rf,Nl,tg,Cx,xx,R1]},Bu={findFiberByHostInstance:ha,bundleType:0,version:"18.3.1",rendererPackageName:"react-dom"},eN={bundleType:Bu.bundleType,version:Bu.version,rendererPackageName:Bu.rendererPackageName,rendererConfig:Bu.rendererConfig,overrideHookState:null,overrideHookStateDeletePath:null,overrideHookStateRenamePath:null,overrideProps:null,overridePropsDeletePath:null,overridePropsRenamePath:null,setErrorHandler:null,setSuspenseHandler:null,scheduleUpdate:null,currentDispatcherRef:Ps.ReactCurrentDispatcher,findHostInstanceByFiber:function(t){return t=Rx(t),t===null?null:t.stateNode},findFiberByHostInstance:Bu.findFiberByHostInstance||J8,findHostInstancesForRefresh:null,scheduleRefresh:null,scheduleRoot:null,setRefreshHandler:null,getCurrentFiber:null,reconcilerVersion:"18.3.1-next-f1338f8080-20240426"};if(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__<"u"){var ah=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!ah.isDisabled&&ah.supportsFiber)try{J0=ah.inject(eN),Oi=ah}catch{}}sr.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=X8;sr.createPortal=function(t,e){var n=2<arguments.length&&arguments[2]!==void 0?arguments[2]:null;if(!D1(e))throw Error(ue(200));return Y8(t,e,null,n)};sr.createRoot=function(t,e){if(!D1(t))throw Error(ue(299));var n=!1,r="",i=l_;return e!=null&&(e.unstable_strictMode===!0&&(n=!0),e.identifierPrefix!==void 0&&(r=e.identifierPrefix),e.onRecoverableError!==void 0&&(i=e.onRecoverableError)),e=M1(t,1,!1,null,null,n,!1,r,i),t[As]=e.current,Nd(t.nodeType===8?t.parentNode:t),new B1(e)};sr.findDOMNode=function(t){if(t==null)return null;if(t.nodeType===1)return t;var e=t._reactInternals;if(e===void 0)throw typeof t.render=="function"?Error(ue(188)):(t=Object.keys(t).join(","),Error(ue(268,t)));return t=Rx(e),t=t===null?null:t.stateNode,t};sr.flushSync=function(t){return Xa(t)};sr.hydrate=function(t,e,n){if(!ug(e))throw Error(ue(200));return dg(null,t,e,!0,n)};sr.hydrateRoot=function(t,e,n){if(!D1(t))throw Error(ue(405));var r=n!=null&&n.hydratedSources||null,i=!1,s="",o=l_;if(n!=null&&(n.unstable_strictMode===!0&&(i=!0),n.identifierPrefix!==void 0&&(s=n.identifierPrefix),n.onRecoverableError!==void 0&&(o=n.onRecoverableError)),e=a_(e,null,t,1,n??null,i,!1,s,o),t[As]=e.current,Nd(t),r)for(t=0;t<r.length;t++)n=r[t],i=n._getVersion,i=i(n._source),e.mutableSourceEagerHydrationData==null?e.mutableSourceEagerHydrationData=[n,i]:e.mutableSourceEagerHydrationData.push(n,i);return new cg(e)};sr.render=function(t,e,n){if(!ug(e))throw Error(ue(200));return dg(null,t,e,!1,n)};sr.unmountComponentAtNode=function(t){if(!ug(t))throw Error(ue(40));return t._reactRootContainer?(Xa(function(){dg(null,null,t,!1,function(){t._reactRootContainer=null,t[As]=null})}),!0):!1};sr.unstable_batchedUpdates=R1;sr.unstable_renderSubtreeIntoContainer=function(t,e,n,r){if(!ug(n))throw Error(ue(200));if(t==null||t._reactInternals===void 0)throw Error(ue(38));return dg(t,e,n,!1,r)};sr.version="18.3.1-next-f1338f8080-20240426";function c_(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(c_)}catch(t){console.error(t)}}c_(),cx.exports=sr;var tN=cx.exports,c2=tN;ky.createRoot=c2.createRoot,ky.hydrateRoot=c2.hydrateRoot;const nN="6.15.0";function rN(t,e,n){const r=e.split("|").map(s=>s.trim());for(let s=0;s<r.length;s++)switch(e){case"any":return;case"bigint":case"boolean":case"number":case"string":if(typeof t===e)return}const i=new Error(`invalid value for type ${e}`);throw i.code="INVALID_ARGUMENT",i.argument=`value.${n}`,i.value=t,i}async function gn(t){const e=Object.keys(t);return(await Promise.all(e.map(r=>Promise.resolve(t[r])))).reduce((r,i,s)=>(r[e[s]]=i,r),{})}function Ce(t,e,n){for(let r in e){let i=e[r];const s=n?n[r]:null;s&&rN(i,s,r),Object.defineProperty(t,r,{enumerable:!0,value:i,writable:!1})}}function Fl(t,e){if(t==null)return"null";if(e==null&&(e=new Set),typeof t=="object"){if(e.has(t))return"[Circular]";e.add(t)}if(Array.isArray(t))return"[ "+t.map(n=>Fl(n,e)).join(", ")+" ]";if(t instanceof Uint8Array){const n="0123456789abcdef";let r="0x";for(let i=0;i<t.length;i++)r+=n[t[i]>>4],r+=n[t[i]&15];return r}if(typeof t=="object"&&typeof t.toJSON=="function")return Fl(t.toJSON(),e);switch(typeof t){case"boolean":case"number":case"symbol":return t.toString();case"bigint":return BigInt(t).toString();case"string":return JSON.stringify(t);case"object":{const n=Object.keys(t);return n.sort(),"{ "+n.map(r=>`${Fl(r,e)}: ${Fl(t[r],e)}`).join(", ")+" }"}}return"[ COULD NOT SERIALIZE ]"}function Vt(t,e){return t&&t.code===e}function $1(t){return Vt(t,"CALL_EXCEPTION")}function st(t,e,n){let r=t;{const s=[];if(n){if("message"in n||"code"in n||"name"in n)throw new Error(`value will overwrite populated values: ${Fl(n)}`);for(const o in n){if(o==="shortMessage")continue;const a=n[o];s.push(o+"="+Fl(a))}}s.push(`code=${e}`),s.push(`version=${nN}`),s.length&&(t+=" ("+s.join(", ")+")")}let i;switch(e){case"INVALID_ARGUMENT":i=new TypeError(t);break;case"NUMERIC_FAULT":case"BUFFER_OVERRUN":i=new RangeError(t);break;default:i=new Error(t)}return Ce(i,{code:e}),n&&Object.assign(i,n),i.shortMessage==null&&Ce(i,{shortMessage:r}),i}function se(t,e,n,r){if(!t)throw st(e,n,r)}function G(t,e,n,r){se(t,e,"INVALID_ARGUMENT",{argument:n,value:r})}function u_(t,e,n){n==null&&(n=""),n&&(n=": "+n),se(t>=e,"missing argument"+n,"MISSING_ARGUMENT",{count:t,expectedCount:e}),se(t<=e,"too many arguments"+n,"UNEXPECTED_ARGUMENT",{count:t,expectedCount:e})}["NFD","NFC","NFKD","NFKC"].reduce((t,e)=>{try{if("test".normalize(e)!=="test")throw new Error("bad");if(e==="NFD"&&"é".normalize("NFD")!=="é")throw new Error("broken");t.push(e)}catch{}return t},[]);function Of(t,e,n){if(n==null&&(n=""),t!==e){let r=n,i="new";n&&(r+=".",i+=" "+n),se(!1,`private constructor; use ${r}from* methods`,"UNSUPPORTED_OPERATION",{operation:i})}}function d_(t,e,n){if(t instanceof Uint8Array)return n?new Uint8Array(t):t;if(typeof t=="string"&&t.match(/^0x(?:[0-9a-f][0-9a-f])*$/i)){const r=new Uint8Array((t.length-2)/2);let i=2;for(let s=0;s<r.length;s++)r[s]=parseInt(t.substring(i,i+2),16),i+=2;return r}G(!1,"invalid BytesLike value",e||"value",t)}function Ie(t,e){return d_(t,e,!1)}function vn(t,e){return d_(t,e,!0)}function nt(t,e){return!(typeof t!="string"||!t.match(/^0x[0-9A-Fa-f]*$/)||typeof e=="number"&&t.length!==2+2*e||e===!0&&t.length%2!==0)}function U1(t){return nt(t,!0)||t instanceof Uint8Array}const u2="0123456789abcdef";function fe(t){const e=Ie(t);let n="0x";for(let r=0;r<e.length;r++){const i=e[r];n+=u2[(i&240)>>4]+u2[i&15]}return n}function mt(t){return"0x"+t.map(e=>fe(e).substring(2)).join("")}function sc(t){return nt(t,!0)?(t.length-2)/2:Ie(t).length}function ht(t,e,n){const r=Ie(t);return n!=null&&n>r.length&&se(!1,"cannot slice beyond data bounds","BUFFER_OVERRUN",{buffer:r,length:r.length,offset:n}),fe(r.slice(e??0,n??r.length))}function f_(t,e,n){const r=Ie(t);se(e>=r.length,"padding exceeds data length","BUFFER_OVERRUN",{buffer:new Uint8Array(r),length:e,offset:e+1});const i=new Uint8Array(e);return i.fill(0),n?i.set(r,e-r.length):i.set(r,0),fe(i)}function xs(t,e){return f_(t,e,!0)}function iN(t,e){return f_(t,e,!1)}const fg=BigInt(0),Yr=BigInt(1),jl=9007199254740991;function t0(t,e){const n=hg(t,"value"),r=BigInt(_e(e,"width"));if(se(n>>r===fg,"overflow","NUMERIC_FAULT",{operation:"fromTwos",fault:"overflow",value:t}),n>>r-Yr){const i=(Yr<<r)-Yr;return-((~n&i)+Yr)}return n}function h_(t,e){let n=we(t,"value");const r=BigInt(_e(e,"width")),i=Yr<<r-Yr;if(n<fg){n=-n,se(n<=i,"too low","NUMERIC_FAULT",{operation:"toTwos",fault:"overflow",value:t});const s=(Yr<<r)-Yr;return(~n&s)+Yr}else se(n<i,"too high","NUMERIC_FAULT",{operation:"toTwos",fault:"overflow",value:t});return n}function ma(t,e){const n=hg(t,"value"),r=BigInt(_e(e,"bits"));return n&(Yr<<r)-Yr}function we(t,e){switch(typeof t){case"bigint":return t;case"number":return G(Number.isInteger(t),"underflow",e||"value",t),G(t>=-jl&&t<=jl,"overflow",e||"value",t),BigInt(t);case"string":try{if(t==="")throw new Error("empty string");return t[0]==="-"&&t[1]!=="-"?-BigInt(t.substring(1)):BigInt(t)}catch(n){G(!1,`invalid BigNumberish string: ${n.message}`,e||"value",t)}}G(!1,"invalid BigNumberish value",e||"value",t)}function hg(t,e){const n=we(t,e);return se(n>=fg,"unsigned value cannot be negative","NUMERIC_FAULT",{fault:"overflow",operation:"getUint",value:t}),n}const d2="0123456789abcdef";function pg(t){if(t instanceof Uint8Array){let e="0x0";for(const n of t)e+=d2[n>>4],e+=d2[n&15];return BigInt(e)}return we(t)}function _e(t,e){switch(typeof t){case"bigint":return G(t>=-jl&&t<=jl,"overflow",e||"value",t),Number(t);case"number":return G(Number.isInteger(t),"underflow",e||"value",t),G(t>=-jl&&t<=jl,"overflow",e||"value",t),t;case"string":try{if(t==="")throw new Error("empty string");return _e(BigInt(t),e)}catch(n){G(!1,`invalid numeric string: ${n.message}`,e||"value",t)}}G(!1,"invalid numeric value",e||"value",t)}function sN(t){return _e(pg(t))}function jo(t,e){let r=hg(t,"value").toString(16);if(e==null)r.length%2&&(r="0"+r);else{const i=_e(e,"width");for(se(i*2>=r.length,`value exceeds width (${i} bytes)`,"NUMERIC_FAULT",{operation:"toBeHex",fault:"overflow",value:t});r.length<i*2;)r="0"+r}return"0x"+r}function Pt(t){const e=hg(t,"value");if(e===fg)return new Uint8Array([]);let n=e.toString(16);n.length%2&&(n="0"+n);const r=new Uint8Array(n.length/2);for(let i=0;i<r.length;i++){const s=i*2;r[i]=parseInt(n.substring(s,s+2),16)}return r}function qr(t){let e=fe(U1(t)?t:Pt(t)).substring(2);for(;e.startsWith("0");)e=e.substring(1);return e===""&&(e="0"),"0x"+e}const f2="123456789ABCDEFGHJKLMNPQRSTUVWXYZabcdefghijkmnopqrstuvwxyz";BigInt(0);const h2=BigInt(58);function oN(t){const e=Ie(t);let n=pg(e),r="";for(;n;)r=f2[Number(n%h2)]+r,n/=h2;for(let i=0;i<e.length&&!e[i];i++)r=f2[0]+r;return r}function aN(t){t=atob(t);const e=new Uint8Array(t.length);for(let n=0;n<t.length;n++)e[n]=t.charCodeAt(n);return Ie(e)}function lN(t){const e=Ie(t);let n="";for(let r=0;r<e.length;r++)n+=String.fromCharCode(e[r]);return btoa(n)}var pc;class p_{constructor(e,n,r){Q(this,"filter");Q(this,"emitter");Z(this,pc);H(this,pc,n),Ce(this,{emitter:e,filter:r})}async removeListener(){k(this,pc)!=null&&await this.emitter.off(this.filter,k(this,pc))}}pc=new WeakMap;function cN(t,e,n,r,i){G(!1,`invalid codepoint at offset ${e}; ${t}`,"bytes",n)}function g_(t,e,n,r,i){if(t==="BAD_PREFIX"||t==="UNEXPECTED_CONTINUE"){let s=0;for(let o=e+1;o<n.length&&n[o]>>6===2;o++)s++;return s}return t==="OVERRUN"?n.length-e-1:0}function uN(t,e,n,r,i){return t==="OVERLONG"?(G(typeof i=="number","invalid bad code point for replacement","badCodepoint",i),r.push(i),0):(r.push(65533),g_(t,e,n))}const dN=Object.freeze({error:cN,ignore:g_,replace:uN});function fN(t,e){e==null&&(e=dN.error);const n=Ie(t,"bytes"),r=[];let i=0;for(;i<n.length;){const s=n[i++];if(!(s>>7)){r.push(s);continue}let o=null,a=null;if((s&224)===192)o=1,a=127;else if((s&240)===224)o=2,a=2047;else if((s&248)===240)o=3,a=65535;else{(s&192)===128?i+=e("UNEXPECTED_CONTINUE",i-1,n,r):i+=e("BAD_PREFIX",i-1,n,r);continue}if(i-1+o>=n.length){i+=e("OVERRUN",i-1,n,r);continue}let l=s&(1<<8-o-1)-1;for(let c=0;c<o;c++){let u=n[i];if((u&192)!=128){i+=e("MISSING_CONTINUE",i,n,r),l=null;break}l=l<<6|u&63,i++}if(l!==null){if(l>1114111){i+=e("OUT_OF_RANGE",i-1-o,n,r,l);continue}if(l>=55296&&l<=57343){i+=e("UTF16_SURROGATE",i-1-o,n,r,l);continue}if(l<=a){i+=e("OVERLONG",i-1-o,n,r,l);continue}r.push(l)}}return r}function vs(t,e){G(typeof t=="string","invalid string value","str",t);let n=[];for(let r=0;r<t.length;r++){const i=t.charCodeAt(r);if(i<128)n.push(i);else if(i<2048)n.push(i>>6|192),n.push(i&63|128);else if((i&64512)==55296){r++;const s=t.charCodeAt(r);G(r<t.length&&(s&64512)===56320,"invalid surrogate pair","str",t);const o=65536+((i&1023)<<10)+(s&1023);n.push(o>>18|240),n.push(o>>12&63|128),n.push(o>>6&63|128),n.push(o&63|128)}else n.push(i>>12|224),n.push(i>>6&63|128),n.push(i&63|128)}return new Uint8Array(n)}function hN(t){return t.map(e=>e<=65535?String.fromCharCode(e):(e-=65536,String.fromCharCode((e>>10&1023)+55296,(e&1023)+56320))).join("")}function n0(t,e){return hN(fN(t,e))}function m_(t){async function e(n,r){se(r==null||!r.cancelled,"request cancelled before sending","CANCELLED");const i=n.url.split(":")[0].toLowerCase();se(i==="http"||i==="https",`unsupported protocol ${i}`,"UNSUPPORTED_OPERATION",{info:{protocol:i},operation:"request"}),se(i==="https"||!n.credentials||n.allowInsecureAuthentication,"insecure authorized connections unsupported","UNSUPPORTED_OPERATION",{operation:"request"});let s=null;const o=new AbortController,a=setTimeout(()=>{s=st("request timeout","TIMEOUT"),o.abort()},n.timeout);r&&r.addListener(()=>{s=st("request cancelled","CANCELLED"),o.abort()});const l=Object.assign({},t,{method:n.method,headers:new Headers(Array.from(n)),body:n.body||void 0,signal:o.signal});let c;try{c=await fetch(n.url,l)}catch(h){throw clearTimeout(a),s||h}clearTimeout(a);const u={};c.headers.forEach((h,m)=>{u[m.toLowerCase()]=h});const d=await c.arrayBuffer(),f=d==null?null:new Uint8Array(d);return{statusCode:c.status,statusMessage:c.statusText,headers:u,body:f}}return e}const pN=12,gN=250;let p2=m_();const mN=new RegExp("^data:([^;:]*)?(;base64)?,(.*)$","i"),yN=new RegExp("^ipfs://(ipfs/)?(.*)$","i");let mm=!1;async function y_(t,e){try{const n=t.match(mN);if(!n)throw new Error("invalid data");return new Lo(200,"OK",{"content-type":n[1]||"text/plain"},n[2]?aN(n[3]):wN(n[3]))}catch{return new Lo(599,"BAD REQUEST (invalid data: URI)",{},null,new Ho(t))}}function v_(t){async function e(n,r){try{const i=n.match(yN);if(!i)throw new Error("invalid link");return new Ho(`${t}${i[2]}`)}catch{return new Lo(599,"BAD REQUEST (invalid IPFS URI)",{},null,new Ho(n))}}return e}const lh={data:y_,ipfs:v_("https://gateway.ipfs.io/ipfs/")},w_=new WeakMap;var Ca,so;class vN{constructor(e){Z(this,Ca);Z(this,so);H(this,Ca,[]),H(this,so,!1),w_.set(e,()=>{if(!k(this,so)){H(this,so,!0);for(const n of k(this,Ca))setTimeout(()=>{n()},0);H(this,Ca,[])}})}addListener(e){se(!k(this,so),"singal already cancelled","UNSUPPORTED_OPERATION",{operation:"fetchCancelSignal.addCancelListener"}),k(this,Ca).push(e)}get cancelled(){return k(this,so)}checkSignal(){se(!this.cancelled,"cancelled","CANCELLED",{})}}Ca=new WeakMap,so=new WeakMap;function ch(t){if(t==null)throw new Error("missing signal; should not happen");return t.checkSignal(),t}var gc,mc,Ur,Zi,yc,vc,Ot,qn,Xi,xa,ka,_a,fi,Fr,oo,Pa,Yu;const H0=class H0{constructor(e){Z(this,Pa);Z(this,gc);Z(this,mc);Z(this,Ur);Z(this,Zi);Z(this,yc);Z(this,vc);Z(this,Ot);Z(this,qn);Z(this,Xi);Z(this,xa);Z(this,ka);Z(this,_a);Z(this,fi);Z(this,Fr);Z(this,oo);H(this,vc,String(e)),H(this,gc,!1),H(this,mc,!0),H(this,Ur,{}),H(this,Zi,""),H(this,yc,3e5),H(this,Fr,{slotInterval:gN,maxAttempts:pN}),H(this,oo,null)}get url(){return k(this,vc)}set url(e){H(this,vc,String(e))}get body(){return k(this,Ot)==null?null:new Uint8Array(k(this,Ot))}set body(e){if(e==null)H(this,Ot,void 0),H(this,qn,void 0);else if(typeof e=="string")H(this,Ot,vs(e)),H(this,qn,"text/plain");else if(e instanceof Uint8Array)H(this,Ot,e),H(this,qn,"application/octet-stream");else if(typeof e=="object")H(this,Ot,vs(JSON.stringify(e))),H(this,qn,"application/json");else throw new Error("invalid body")}hasBody(){return k(this,Ot)!=null}get method(){return k(this,Zi)?k(this,Zi):this.hasBody()?"POST":"GET"}set method(e){e==null&&(e=""),H(this,Zi,String(e).toUpperCase())}get headers(){const e=Object.assign({},k(this,Ur));return k(this,Xi)&&(e.authorization=`Basic ${lN(vs(k(this,Xi)))}`),this.allowGzip&&(e["accept-encoding"]="gzip"),e["content-type"]==null&&k(this,qn)&&(e["content-type"]=k(this,qn)),this.body&&(e["content-length"]=String(this.body.length)),e}getHeader(e){return this.headers[e.toLowerCase()]}setHeader(e,n){k(this,Ur)[String(e).toLowerCase()]=String(n)}clearHeaders(){H(this,Ur,{})}[Symbol.iterator](){const e=this.headers,n=Object.keys(e);let r=0;return{next:()=>{if(r<n.length){const i=n[r++];return{value:[i,e[i]],done:!1}}return{value:void 0,done:!0}}}}get credentials(){return k(this,Xi)||null}setCredentials(e,n){G(!e.match(/:/),"invalid basic authentication username","username","[REDACTED]"),H(this,Xi,`${e}:${n}`)}get allowGzip(){return k(this,mc)}set allowGzip(e){H(this,mc,!!e)}get allowInsecureAuthentication(){return!!k(this,gc)}set allowInsecureAuthentication(e){H(this,gc,!!e)}get timeout(){return k(this,yc)}set timeout(e){G(e>=0,"timeout must be non-zero","timeout",e),H(this,yc,e)}get preflightFunc(){return k(this,xa)||null}set preflightFunc(e){H(this,xa,e)}get processFunc(){return k(this,ka)||null}set processFunc(e){H(this,ka,e)}get retryFunc(){return k(this,_a)||null}set retryFunc(e){H(this,_a,e)}get getUrlFunc(){return k(this,oo)||p2}set getUrlFunc(e){H(this,oo,e)}toString(){return`<FetchRequest method=${JSON.stringify(this.method)} url=${JSON.stringify(this.url)} headers=${JSON.stringify(this.headers)} body=${k(this,Ot)?fe(k(this,Ot)):"null"}>`}setThrottleParams(e){e.slotInterval!=null&&(k(this,Fr).slotInterval=e.slotInterval),e.maxAttempts!=null&&(k(this,Fr).maxAttempts=e.maxAttempts)}send(){return se(k(this,fi)==null,"request already sent","UNSUPPORTED_OPERATION",{operation:"fetchRequest.send"}),H(this,fi,new vN(this)),ce(this,Pa,Yu).call(this,0,g2()+this.timeout,0,this,new Lo(0,"",{},null,this))}cancel(){se(k(this,fi)!=null,"request has not been sent","UNSUPPORTED_OPERATION",{operation:"fetchRequest.cancel"});const e=w_.get(this);if(!e)throw new Error("missing signal; should not happen");e()}redirect(e){const n=this.url.split(":")[0].toLowerCase(),r=e.split(":")[0].toLowerCase();se(this.method==="GET"&&(n!=="https"||r!=="http")&&e.match(/^https?:/),"unsupported redirect","UNSUPPORTED_OPERATION",{operation:`redirect(${this.method} ${JSON.stringify(this.url)} => ${JSON.stringify(e)})`});const i=new H0(e);return i.method="GET",i.allowGzip=this.allowGzip,i.timeout=this.timeout,H(i,Ur,Object.assign({},k(this,Ur))),k(this,Ot)&&H(i,Ot,new Uint8Array(k(this,Ot))),H(i,qn,k(this,qn)),i}clone(){const e=new H0(this.url);return H(e,Zi,k(this,Zi)),k(this,Ot)&&H(e,Ot,k(this,Ot)),H(e,qn,k(this,qn)),H(e,Ur,Object.assign({},k(this,Ur))),H(e,Xi,k(this,Xi)),this.allowGzip&&(e.allowGzip=!0),e.timeout=this.timeout,this.allowInsecureAuthentication&&(e.allowInsecureAuthentication=!0),H(e,xa,k(this,xa)),H(e,ka,k(this,ka)),H(e,_a,k(this,_a)),H(e,Fr,Object.assign({},k(this,Fr))),H(e,oo,k(this,oo)),e}static lockConfig(){mm=!0}static getGateway(e){return lh[e.toLowerCase()]||null}static registerGateway(e,n){if(e=e.toLowerCase(),e==="http"||e==="https")throw new Error(`cannot intercept ${e}; use registerGetUrl`);if(mm)throw new Error("gateways locked");lh[e]=n}static registerGetUrl(e){if(mm)throw new Error("gateways locked");p2=e}static createGetUrlFunc(e){return m_(e)}static createDataGateway(){return y_}static createIpfsGatewayFunc(e){return v_(e)}};gc=new WeakMap,mc=new WeakMap,Ur=new WeakMap,Zi=new WeakMap,yc=new WeakMap,vc=new WeakMap,Ot=new WeakMap,qn=new WeakMap,Xi=new WeakMap,xa=new WeakMap,ka=new WeakMap,_a=new WeakMap,fi=new WeakMap,Fr=new WeakMap,oo=new WeakMap,Pa=new WeakSet,Yu=async function(e,n,r,i,s){var u,d,f;if(e>=k(this,Fr).maxAttempts)return s.makeServerError("exceeded maximum retry limit");se(g2()<=n,"timeout","TIMEOUT",{operation:"request.send",reason:"timeout",request:i}),r>0&&await bN(r);let o=this.clone();const a=(o.url.split(":")[0]||"").toLowerCase();if(a in lh){const h=await lh[a](o.url,ch(k(i,fi)));if(h instanceof Lo){let m=h;if(this.processFunc){ch(k(i,fi));try{m=await this.processFunc(o,m)}catch(g){(g.throttle==null||typeof g.stall!="number")&&m.makeServerError("error in post-processing function",g).assertOk()}}return m}o=h}this.preflightFunc&&(o=await this.preflightFunc(o));const l=await this.getUrlFunc(o,ch(k(i,fi)));let c=new Lo(l.statusCode,l.statusMessage,l.headers,l.body,i);if(c.statusCode===301||c.statusCode===302){try{const h=c.headers.location||"";return ce(u=o.redirect(h),Pa,Yu).call(u,e+1,n,0,i,c)}catch{}return c}else if(c.statusCode===429&&(this.retryFunc==null||await this.retryFunc(o,c,e))){const h=c.headers["retry-after"];let m=k(this,Fr).slotInterval*Math.trunc(Math.random()*Math.pow(2,e));return typeof h=="string"&&h.match(/^[1-9][0-9]*$/)&&(m=parseInt(h)),ce(d=o.clone(),Pa,Yu).call(d,e+1,n,m,i,c)}if(this.processFunc){ch(k(i,fi));try{c=await this.processFunc(o,c)}catch(h){(h.throttle==null||typeof h.stall!="number")&&c.makeServerError("error in post-processing function",h).assertOk();let m=k(this,Fr).slotInterval*Math.trunc(Math.random()*Math.pow(2,e));return h.stall>=0&&(m=h.stall),ce(f=o.clone(),Pa,Yu).call(f,e+1,n,m,i,c)}}return c};let Ho=H0;var gf,mf,yf,Qn,wc,Ta;const Yb=class Yb{constructor(e,n,r,i,s){Z(this,gf);Z(this,mf);Z(this,yf);Z(this,Qn);Z(this,wc);Z(this,Ta);H(this,gf,e),H(this,mf,n),H(this,yf,Object.keys(r).reduce((o,a)=>(o[a.toLowerCase()]=String(r[a]),o),{})),H(this,Qn,i==null?null:new Uint8Array(i)),H(this,wc,s||null),H(this,Ta,{message:""})}toString(){return`<FetchResponse status=${this.statusCode} body=${k(this,Qn)?fe(k(this,Qn)):"null"}>`}get statusCode(){return k(this,gf)}get statusMessage(){return k(this,mf)}get headers(){return Object.assign({},k(this,yf))}get body(){return k(this,Qn)==null?null:new Uint8Array(k(this,Qn))}get bodyText(){try{return k(this,Qn)==null?"":n0(k(this,Qn))}catch{se(!1,"response body is not valid UTF-8 data","UNSUPPORTED_OPERATION",{operation:"bodyText",info:{response:this}})}}get bodyJson(){try{return JSON.parse(this.bodyText)}catch{se(!1,"response body is not valid JSON","UNSUPPORTED_OPERATION",{operation:"bodyJson",info:{response:this}})}}[Symbol.iterator](){const e=this.headers,n=Object.keys(e);let r=0;return{next:()=>{if(r<n.length){const i=n[r++];return{value:[i,e[i]],done:!1}}return{value:void 0,done:!0}}}}makeServerError(e,n){let r;e?r=`CLIENT ESCALATED SERVER ERROR (${this.statusCode} ${this.statusMessage}; ${e})`:(e=`${this.statusCode} ${this.statusMessage}`,r=`CLIENT ESCALATED SERVER ERROR (${e})`);const i=new Yb(599,r,this.headers,this.body,k(this,wc)||void 0);return H(i,Ta,{message:e,error:n}),i}throwThrottleError(e,n){n==null?n=-1:G(Number.isInteger(n)&&n>=0,"invalid stall timeout","stall",n);const r=new Error(e||"throttling requests");throw Ce(r,{stall:n,throttle:!0}),r}getHeader(e){return this.headers[e.toLowerCase()]}hasBody(){return k(this,Qn)!=null}get request(){return k(this,wc)}ok(){return k(this,Ta).message===""&&this.statusCode>=200&&this.statusCode<300}assertOk(){if(this.ok())return;let{message:e,error:n}=k(this,Ta);e===""&&(e=`server response ${this.statusCode} ${this.statusMessage}`);let r=null;this.request&&(r=this.request.url);let i=null;try{k(this,Qn)&&(i=n0(k(this,Qn)))}catch{}se(!1,e,"SERVER_ERROR",{request:this.request||"unknown request",response:this,error:n,info:{requestUrl:r,responseBody:i,responseStatus:`${this.statusCode} ${this.statusMessage}`}})}};gf=new WeakMap,mf=new WeakMap,yf=new WeakMap,Qn=new WeakMap,wc=new WeakMap,Ta=new WeakMap;let Lo=Yb;function g2(){return new Date().getTime()}function wN(t){return vs(t.replace(/%([0-9a-f][0-9a-f])/gi,(e,n)=>String.fromCharCode(parseInt(n,16))))}function bN(t){return new Promise(e=>setTimeout(e,t))}const EN=BigInt(-1),Lr=BigInt(0),Hl=BigInt(1),AN=BigInt(5),ml={};let oc="0000";for(;oc.length<80;)oc+=oc;function Zo(t){let e=oc;for(;e.length<t;)e+=e;return BigInt("1"+e.substring(0,t))}function Du(t,e,n){const r=BigInt(e.width);if(e.signed){const i=Hl<<r-Hl;se(n==null||t>=-i&&t<i,"overflow","NUMERIC_FAULT",{operation:n,fault:"overflow",value:t}),t>Lr?t=t0(ma(t,r),r):t=-t0(ma(-t,r),r)}else{const i=Hl<<r;se(n==null||t>=0&&t<i,"overflow","NUMERIC_FAULT",{operation:n,fault:"overflow",value:t}),t=(t%i+i)%i&i-Hl}return t}function ym(t){typeof t=="number"&&(t=`fixed128x${t}`);let e=!0,n=128,r=18;if(typeof t=="string"){if(t!=="fixed")if(t==="ufixed")e=!1;else{const s=t.match(/^(u?)fixed([0-9]+)x([0-9]+)$/);G(s,"invalid fixed format","format",t),e=s[1]!=="u",n=parseInt(s[2]),r=parseInt(s[3])}}else if(t){const s=t,o=(a,l,c)=>s[a]==null?c:(G(typeof s[a]===l,"invalid fixed format ("+a+" not "+l+")","format."+a,s[a]),s[a]);e=o("signed","boolean",e),n=o("width","number",n),r=o("decimals","number",r)}G(n%8===0,"invalid FixedNumber width (not byte aligned)","format.width",n),G(r<=80,"invalid FixedNumber decimals (too large)","format.decimals",r);const i=(e?"":"u")+"fixed"+String(n)+"x"+String(r);return{signed:e,width:n,decimals:r,name:i}}function SN(t,e){let n="";t<Lr&&(n="-",t*=EN);let r=t.toString();if(e===0)return n+r;for(;r.length<=e;)r=oc+r;const i=r.length-e;for(r=r.substring(0,i)+"."+r.substring(i);r[0]==="0"&&r[1]!==".";)r=r.substring(1);for(;r[r.length-1]==="0"&&r[r.length-2]!==".";)r=r.substring(0,r.length-1);return n+r}var jr,Je,dn,qe,ia,Hi,wv,bv,Ev,Av;const Xs=class Xs{constructor(e,n,r){Z(this,qe);Q(this,"format");Z(this,jr);Z(this,Je);Z(this,dn);Q(this,"_value");Of(e,ml,"FixedNumber"),H(this,Je,n),H(this,jr,r);const i=SN(n,r.decimals);Ce(this,{format:r.name,_value:i}),H(this,dn,Zo(r.decimals))}get signed(){return k(this,jr).signed}get width(){return k(this,jr).width}get decimals(){return k(this,jr).decimals}get value(){return k(this,Je)}addUnsafe(e){return ce(this,qe,wv).call(this,e)}add(e){return ce(this,qe,wv).call(this,e,"add")}subUnsafe(e){return ce(this,qe,bv).call(this,e)}sub(e){return ce(this,qe,bv).call(this,e,"sub")}mulUnsafe(e){return ce(this,qe,Ev).call(this,e)}mul(e){return ce(this,qe,Ev).call(this,e,"mul")}mulSignal(e){ce(this,qe,ia).call(this,e);const n=k(this,Je)*k(e,Je);return se(n%k(this,dn)===Lr,"precision lost during signalling mul","NUMERIC_FAULT",{operation:"mulSignal",fault:"underflow",value:this}),ce(this,qe,Hi).call(this,n/k(this,dn),"mulSignal")}divUnsafe(e){return ce(this,qe,Av).call(this,e)}div(e){return ce(this,qe,Av).call(this,e,"div")}divSignal(e){se(k(e,Je)!==Lr,"division by zero","NUMERIC_FAULT",{operation:"div",fault:"divide-by-zero",value:this}),ce(this,qe,ia).call(this,e);const n=k(this,Je)*k(this,dn);return se(n%k(e,Je)===Lr,"precision lost during signalling div","NUMERIC_FAULT",{operation:"divSignal",fault:"underflow",value:this}),ce(this,qe,Hi).call(this,n/k(e,Je),"divSignal")}cmp(e){let n=this.value,r=e.value;const i=this.decimals-e.decimals;return i>0?r*=Zo(i):i<0&&(n*=Zo(-i)),n<r?-1:n>r?1:0}eq(e){return this.cmp(e)===0}lt(e){return this.cmp(e)<0}lte(e){return this.cmp(e)<=0}gt(e){return this.cmp(e)>0}gte(e){return this.cmp(e)>=0}floor(){let e=k(this,Je);return k(this,Je)<Lr&&(e-=k(this,dn)-Hl),e=k(this,Je)/k(this,dn)*k(this,dn),ce(this,qe,Hi).call(this,e,"floor")}ceiling(){let e=k(this,Je);return k(this,Je)>Lr&&(e+=k(this,dn)-Hl),e=k(this,Je)/k(this,dn)*k(this,dn),ce(this,qe,Hi).call(this,e,"ceiling")}round(e){if(e==null&&(e=0),e>=this.decimals)return this;const n=this.decimals-e,r=AN*Zo(n-1);let i=this.value+r;const s=Zo(n);return i=i/s*s,Du(i,k(this,jr),"round"),new Xs(ml,i,k(this,jr))}isZero(){return k(this,Je)===Lr}isNegative(){return k(this,Je)<Lr}toString(){return this._value}toUnsafeFloat(){return parseFloat(this.toString())}toFormat(e){return Xs.fromString(this.toString(),e)}static fromValue(e,n,r){const i=n==null?0:_e(n),s=ym(r);let o=we(e,"value");const a=i-s.decimals;if(a>0){const l=Zo(a);se(o%l===Lr,"value loses precision for format","NUMERIC_FAULT",{operation:"fromValue",fault:"underflow",value:e}),o/=l}else a<0&&(o*=Zo(-a));return Du(o,s,"fromValue"),new Xs(ml,o,s)}static fromString(e,n){const r=e.match(/^(-?)([0-9]*)\.?([0-9]*)$/);G(r&&r[2].length+r[3].length>0,"invalid FixedNumber string value","value",e);const i=ym(n);let s=r[2]||"0",o=r[3]||"";for(;o.length<i.decimals;)o+=oc;se(o.substring(i.decimals).match(/^0*$/),"too many decimals for format","NUMERIC_FAULT",{operation:"fromString",fault:"underflow",value:e}),o=o.substring(0,i.decimals);const a=BigInt(r[1]+s+o);return Du(a,i,"fromString"),new Xs(ml,a,i)}static fromBytes(e,n){let r=pg(Ie(e,"value"));const i=ym(n);return i.signed&&(r=t0(r,i.width)),Du(r,i,"fromBytes"),new Xs(ml,r,i)}};jr=new WeakMap,Je=new WeakMap,dn=new WeakMap,qe=new WeakSet,ia=function(e){G(this.format===e.format,"incompatible format; use fixedNumber.toFormat","other",e)},Hi=function(e,n){return e=Du(e,k(this,jr),n),new Xs(ml,e,k(this,jr))},wv=function(e,n){return ce(this,qe,ia).call(this,e),ce(this,qe,Hi).call(this,k(this,Je)+k(e,Je),n)},bv=function(e,n){return ce(this,qe,ia).call(this,e),ce(this,qe,Hi).call(this,k(this,Je)-k(e,Je),n)},Ev=function(e,n){return ce(this,qe,ia).call(this,e),ce(this,qe,Hi).call(this,k(this,Je)*k(e,Je)/k(this,dn),n)},Av=function(e,n){return se(k(e,Je)!==Lr,"division by zero","NUMERIC_FAULT",{operation:"div",fault:"divide-by-zero",value:this}),ce(this,qe,ia).call(this,e),ce(this,qe,Hi).call(this,k(this,Je)*k(this,dn)/k(e,Je),n)};let r0=Xs;function CN(t){let e=t.toString(16);for(;e.length<2;)e="0"+e;return"0x"+e}function m2(t,e,n){let r=0;for(let i=0;i<n;i++)r=r*256+t[e+i];return r}function y2(t,e,n,r){const i=[];for(;n<e+1+r;){const s=b_(t,n);i.push(s.result),n+=s.consumed,se(n<=e+1+r,"child data too short","BUFFER_OVERRUN",{buffer:t,length:r,offset:e})}return{consumed:1+r,result:i}}function b_(t,e){se(t.length!==0,"data too short","BUFFER_OVERRUN",{buffer:t,length:0,offset:1});const n=r=>{se(r<=t.length,"data short segment too short","BUFFER_OVERRUN",{buffer:t,length:t.length,offset:r})};if(t[e]>=248){const r=t[e]-247;n(e+1+r);const i=m2(t,e+1,r);return n(e+1+r+i),y2(t,e,e+1+r,r+i)}else if(t[e]>=192){const r=t[e]-192;return n(e+1+r),y2(t,e,e+1,r)}else if(t[e]>=184){const r=t[e]-183;n(e+1+r);const i=m2(t,e+1,r);n(e+1+r+i);const s=fe(t.slice(e+1+r,e+1+r+i));return{consumed:1+r+i,result:s}}else if(t[e]>=128){const r=t[e]-128;n(e+1+r);const i=fe(t.slice(e+1,e+1+r));return{consumed:1+r,result:i}}return{consumed:1,result:CN(t[e])}}function Nf(t){const e=Ie(t,"data"),n=b_(e,0);return G(n.consumed===e.length,"unexpected junk after rlp payload","data",t),n.result}function v2(t){const e=[];for(;t;)e.unshift(t&255),t>>=8;return e}function E_(t){if(Array.isArray(t)){let r=[];if(t.forEach(function(s){r=r.concat(E_(s))}),r.length<=55)return r.unshift(192+r.length),r;const i=v2(r.length);return i.unshift(247+i.length),i.concat(r)}const e=Array.prototype.slice.call(Ie(t,"object"));if(e.length===1&&e[0]<=127)return e;if(e.length<=55)return e.unshift(128+e.length),e;const n=v2(e.length);return n.unshift(183+n.length),n.concat(e)}const w2="0123456789abcdef";function Ko(t){let e="0x";for(const n of E_(t))e+=w2[n>>4],e+=w2[n&15];return e}const A_=["wei","kwei","mwei","gwei","szabo","finney","ether"];function xN(t,e){let n=18;if(typeof e=="string"){const r=A_.indexOf(e);G(r>=0,"invalid unit","unit",e),n=3*r}else e!=null&&(n=_e(e,"unit"));return r0.fromValue(t,n,{decimals:n,width:512}).toString()}function b2(t,e){G(typeof t=="string","value must be a string","value",t);let n=18;if(typeof e=="string"){const r=A_.indexOf(e);G(r>=0,"invalid unit","unit",e),n=3*r}else e!=null&&(n=_e(e,"unit"));return r0.fromString(t,{decimals:n,width:512}).value}const wn=32,Sv=new Uint8Array(wn),kN=["then"],uh={},S_=new WeakMap;function la(t){return S_.get(t)}function E2(t,e){S_.set(t,e)}function $u(t,e){const n=new Error(`deferred error during ABI decoding triggered accessing ${t}`);throw n.error=e,n}function Cv(t,e,n){return t.indexOf(null)>=0?e.map((r,i)=>r instanceof au?Cv(la(r),r,n):r):t.reduce((r,i,s)=>{let o=e.getValue(i);return i in r||(n&&o instanceof au&&(o=Cv(la(o),o,n)),r[i]=o),r},{})}var bc;const Yl=class Yl extends Array{constructor(...n){const r=n[0];let i=n[1],s=(n[2]||[]).slice(),o=!0;r!==uh&&(i=n,s=[],o=!1);super(i.length);Z(this,bc);i.forEach((c,u)=>{this[u]=c});const a=s.reduce((c,u)=>(typeof u=="string"&&c.set(u,(c.get(u)||0)+1),c),new Map);if(E2(this,Object.freeze(i.map((c,u)=>{const d=s[u];return d!=null&&a.get(d)===1?d:null}))),H(this,bc,[]),k(this,bc)==null&&k(this,bc),!o)return;Object.freeze(this);const l=new Proxy(this,{get:(c,u,d)=>{if(typeof u=="string"){if(u.match(/^[0-9]+$/)){const h=_e(u,"%index");if(h<0||h>=this.length)throw new RangeError("out of result range");const m=c[h];return m instanceof Error&&$u(`index ${h}`,m),m}if(kN.indexOf(u)>=0)return Reflect.get(c,u,d);const f=c[u];if(f instanceof Function)return function(...h){return f.apply(this===d?c:this,h)};if(!(u in c))return c.getValue.apply(this===d?c:this,[u])}return Reflect.get(c,u,d)}});return E2(l,la(this)),l}toArray(n){const r=[];return this.forEach((i,s)=>{i instanceof Error&&$u(`index ${s}`,i),n&&i instanceof Yl&&(i=i.toArray(n)),r.push(i)}),r}toObject(n){const r=la(this);return r.reduce((i,s,o)=>(se(s!=null,`value at index ${o} unnamed`,"UNSUPPORTED_OPERATION",{operation:"toObject()"}),Cv(r,this,n)),{})}slice(n,r){n==null&&(n=0),n<0&&(n+=this.length,n<0&&(n=0)),r==null&&(r=this.length),r<0&&(r+=this.length,r<0&&(r=0)),r>this.length&&(r=this.length);const i=la(this),s=[],o=[];for(let a=n;a<r;a++)s.push(this[a]),o.push(i[a]);return new Yl(uh,s,o)}filter(n,r){const i=la(this),s=[],o=[];for(let a=0;a<this.length;a++){const l=this[a];l instanceof Error&&$u(`index ${a}`,l),n.call(r,l,a,this)&&(s.push(l),o.push(i[a]))}return new Yl(uh,s,o)}map(n,r){const i=[];for(let s=0;s<this.length;s++){const o=this[s];o instanceof Error&&$u(`index ${s}`,o),i.push(n.call(r,o,s,this))}return i}getValue(n){const r=la(this).indexOf(n);if(r===-1)return;const i=this[r];return i instanceof Error&&$u(`property ${JSON.stringify(n)}`,i.error),i}static fromItems(n,r){return new Yl(uh,n,r)}};bc=new WeakMap;let au=Yl;function A2(t){let e=Pt(t);return se(e.length<=wn,"value out-of-bounds","BUFFER_OVERRUN",{buffer:e,length:wn,offset:e.length}),e.length!==wn&&(e=vn(mt([Sv.slice(e.length%wn),e]))),e}class Ts{constructor(e,n,r,i){Q(this,"name");Q(this,"type");Q(this,"localName");Q(this,"dynamic");Ce(this,{name:e,type:n,localName:r,dynamic:i},{name:"string",type:"string",localName:"string",dynamic:"boolean"})}_throwError(e,n){G(!1,e,this.localName,n)}}var es,Ra,Ec,tp;class xv{constructor(){Z(this,Ec);Z(this,es);Z(this,Ra);H(this,es,[]),H(this,Ra,0)}get data(){return mt(k(this,es))}get length(){return k(this,Ra)}appendWriter(e){return ce(this,Ec,tp).call(this,vn(e.data))}writeBytes(e){let n=vn(e);const r=n.length%wn;return r&&(n=vn(mt([n,Sv.slice(r)]))),ce(this,Ec,tp).call(this,n)}writeValue(e){return ce(this,Ec,tp).call(this,A2(e))}writeUpdatableValue(){const e=k(this,es).length;return k(this,es).push(Sv),H(this,Ra,k(this,Ra)+wn),n=>{k(this,es)[e]=A2(n)}}}es=new WeakMap,Ra=new WeakMap,Ec=new WeakSet,tp=function(e){return k(this,es).push(e),H(this,Ra,k(this,Ra)+e.length),e.length};var Rn,Yn,Ia,Oa,ao,ol,_v,C_;const Jb=class Jb{constructor(e,n,r){Z(this,ol);Q(this,"allowLoose");Z(this,Rn);Z(this,Yn);Z(this,Ia);Z(this,Oa);Z(this,ao);Ce(this,{allowLoose:!!n}),H(this,Rn,vn(e)),H(this,Ia,0),H(this,Oa,null),H(this,ao,r??1024),H(this,Yn,0)}get data(){return fe(k(this,Rn))}get dataLength(){return k(this,Rn).length}get consumed(){return k(this,Yn)}get bytes(){return new Uint8Array(k(this,Rn))}subReader(e){const n=new Jb(k(this,Rn).slice(k(this,Yn)+e),this.allowLoose,k(this,ao));return H(n,Oa,this),n}readBytes(e,n){let r=ce(this,ol,C_).call(this,0,e,!!n);return ce(this,ol,_v).call(this,e),H(this,Yn,k(this,Yn)+r.length),r.slice(0,e)}readValue(){return pg(this.readBytes(wn))}readIndex(){return sN(this.readBytes(wn))}};Rn=new WeakMap,Yn=new WeakMap,Ia=new WeakMap,Oa=new WeakMap,ao=new WeakMap,ol=new WeakSet,_v=function(e){var n;if(k(this,Oa))return ce(n=k(this,Oa),ol,_v).call(n,e);H(this,Ia,k(this,Ia)+e),se(k(this,ao)<1||k(this,Ia)<=k(this,ao)*this.dataLength,`compressed ABI data exceeds inflation ratio of ${k(this,ao)} ( see: https://github.com/ethers-io/ethers.js/issues/4537 )`,"BUFFER_OVERRUN",{buffer:vn(k(this,Rn)),offset:k(this,Yn),length:e,info:{bytesRead:k(this,Ia),dataLength:this.dataLength}})},C_=function(e,n,r){let i=Math.ceil(n/wn)*wn;return k(this,Yn)+i>k(this,Rn).length&&(this.allowLoose&&r&&k(this,Yn)+n<=k(this,Rn).length?i=n:se(!1,"data out-of-bounds","BUFFER_OVERRUN",{buffer:vn(k(this,Rn)),length:k(this,Rn).length,offset:k(this,Yn)+i})),k(this,Rn).slice(k(this,Yn),k(this,Yn)+i)};let kv=Jb;function i0(t){if(!Number.isSafeInteger(t)||t<0)throw new Error(`Wrong positive integer: ${t}`)}function F1(t,...e){if(!(t instanceof Uint8Array))throw new Error("Expected Uint8Array");if(e.length>0&&!e.includes(t.length))throw new Error(`Expected Uint8Array of length ${e}, not of length=${t.length}`)}function _N(t){if(typeof t!="function"||typeof t.create!="function")throw new Error("Hash should be wrapped by utils.wrapConstructor");i0(t.outputLen),i0(t.blockLen)}function lu(t,e=!0){if(t.destroyed)throw new Error("Hash instance has been destroyed");if(e&&t.finished)throw new Error("Hash#digest() has already been called")}function x_(t,e){F1(t);const n=e.outputLen;if(t.length<n)throw new Error(`digestInto() expects output buffer of length at least ${n}`)}const vm=typeof globalThis=="object"&&"crypto"in globalThis?globalThis.crypto:void 0;/*! noble-hashes - MIT License (c) 2022 Paul Miller (paulmillr.com) */const k_=t=>t instanceof Uint8Array,PN=t=>new Uint32Array(t.buffer,t.byteOffset,Math.floor(t.byteLength/4)),wm=t=>new DataView(t.buffer,t.byteOffset,t.byteLength),oi=(t,e)=>t<<32-e|t>>>e,TN=new Uint8Array(new Uint32Array([287454020]).buffer)[0]===68;if(!TN)throw new Error("Non little-endian hardware is not supported");function RN(t){if(typeof t!="string")throw new Error(`utf8ToBytes expected string, got ${typeof t}`);return new Uint8Array(new TextEncoder().encode(t))}function gg(t){if(typeof t=="string"&&(t=RN(t)),!k_(t))throw new Error(`expected Uint8Array, got ${typeof t}`);return t}function IN(...t){const e=new Uint8Array(t.reduce((r,i)=>r+i.length,0));let n=0;return t.forEach(r=>{if(!k_(r))throw new Error("Uint8Array expected");e.set(r,n),n+=r.length}),e}class j1{clone(){return this._cloneInto()}}function H1(t){const e=r=>t().update(gg(r)).digest(),n=t();return e.outputLen=n.outputLen,e.blockLen=n.blockLen,e.create=()=>t(),e}function ON(t=32){if(vm&&typeof vm.getRandomValues=="function")return vm.getRandomValues(new Uint8Array(t));throw new Error("crypto.getRandomValues must be defined")}class __ extends j1{constructor(e,n){super(),this.finished=!1,this.destroyed=!1,_N(e);const r=gg(n);if(this.iHash=e.create(),typeof this.iHash.update!="function")throw new Error("Expected instance of class which extends utils.Hash");this.blockLen=this.iHash.blockLen,this.outputLen=this.iHash.outputLen;const i=this.blockLen,s=new Uint8Array(i);s.set(r.length>i?e.create().update(r).digest():r);for(let o=0;o<s.length;o++)s[o]^=54;this.iHash.update(s),this.oHash=e.create();for(let o=0;o<s.length;o++)s[o]^=106;this.oHash.update(s),s.fill(0)}update(e){return lu(this),this.iHash.update(e),this}digestInto(e){lu(this),F1(e,this.outputLen),this.finished=!0,this.iHash.digestInto(e),this.oHash.update(e),this.oHash.digestInto(e),this.destroy()}digest(){const e=new Uint8Array(this.oHash.outputLen);return this.digestInto(e),e}_cloneInto(e){e||(e=Object.create(Object.getPrototypeOf(this),{}));const{oHash:n,iHash:r,finished:i,destroyed:s,blockLen:o,outputLen:a}=this;return e=e,e.finished=i,e.destroyed=s,e.blockLen=o,e.outputLen=a,e.oHash=n._cloneInto(e.oHash),e.iHash=r._cloneInto(e.iHash),e}destroy(){this.destroyed=!0,this.oHash.destroy(),this.iHash.destroy()}}const P_=(t,e,n)=>new __(t,e).update(n).digest();P_.create=(t,e)=>new __(t,e);function NN(t,e,n,r){if(typeof t.setBigUint64=="function")return t.setBigUint64(e,n,r);const i=BigInt(32),s=BigInt(4294967295),o=Number(n>>i&s),a=Number(n&s),l=r?4:0,c=r?0:4;t.setUint32(e+l,o,r),t.setUint32(e+c,a,r)}class T_ extends j1{constructor(e,n,r,i){super(),this.blockLen=e,this.outputLen=n,this.padOffset=r,this.isLE=i,this.finished=!1,this.length=0,this.pos=0,this.destroyed=!1,this.buffer=new Uint8Array(e),this.view=wm(this.buffer)}update(e){lu(this);const{view:n,buffer:r,blockLen:i}=this;e=gg(e);const s=e.length;for(let o=0;o<s;){const a=Math.min(i-this.pos,s-o);if(a===i){const l=wm(e);for(;i<=s-o;o+=i)this.process(l,o);continue}r.set(e.subarray(o,o+a),this.pos),this.pos+=a,o+=a,this.pos===i&&(this.process(n,0),this.pos=0)}return this.length+=e.length,this.roundClean(),this}digestInto(e){lu(this),x_(e,this),this.finished=!0;const{buffer:n,view:r,blockLen:i,isLE:s}=this;let{pos:o}=this;n[o++]=128,this.buffer.subarray(o).fill(0),this.padOffset>i-o&&(this.process(r,0),o=0);for(let d=o;d<i;d++)n[d]=0;NN(r,i-8,BigInt(this.length*8),s),this.process(r,0);const a=wm(e),l=this.outputLen;if(l%4)throw new Error("_sha2: outputLen should be aligned to 32bit");const c=l/4,u=this.get();if(c>u.length)throw new Error("_sha2: outputLen bigger than state");for(let d=0;d<c;d++)a.setUint32(4*d,u[d],s)}digest(){const{buffer:e,outputLen:n}=this;this.digestInto(e);const r=e.slice(0,n);return this.destroy(),r}_cloneInto(e){e||(e=new this.constructor),e.set(...this.get());const{blockLen:n,buffer:r,length:i,finished:s,destroyed:o,pos:a}=this;return e.length=i,e.pos=a,e.finished=s,e.destroyed=o,i%n&&e.buffer.set(r),e}}const MN=(t,e,n)=>t&e^~t&n,LN=(t,e,n)=>t&e^t&n^e&n,BN=new Uint32Array([1116352408,1899447441,3049323471,3921009573,961987163,1508970993,2453635748,2870763221,3624381080,310598401,607225278,1426881987,1925078388,2162078206,2614888103,3248222580,3835390401,4022224774,264347078,604807628,770255983,1249150122,1555081692,1996064986,2554220882,2821834349,2952996808,3210313671,3336571891,3584528711,113926993,338241895,666307205,773529912,1294757372,1396182291,1695183700,1986661051,2177026350,2456956037,2730485921,2820302411,3259730800,3345764771,3516065817,3600352804,4094571909,275423344,430227734,506948616,659060556,883997877,958139571,1322822218,1537002063,1747873779,1955562222,2024104815,2227730452,2361852424,2428436474,2756734187,3204031479,3329325298]),Os=new Uint32Array([1779033703,3144134277,1013904242,2773480762,1359893119,2600822924,528734635,1541459225]),Ns=new Uint32Array(64);class DN extends T_{constructor(){super(64,32,8,!1),this.A=Os[0]|0,this.B=Os[1]|0,this.C=Os[2]|0,this.D=Os[3]|0,this.E=Os[4]|0,this.F=Os[5]|0,this.G=Os[6]|0,this.H=Os[7]|0}get(){const{A:e,B:n,C:r,D:i,E:s,F:o,G:a,H:l}=this;return[e,n,r,i,s,o,a,l]}set(e,n,r,i,s,o,a,l){this.A=e|0,this.B=n|0,this.C=r|0,this.D=i|0,this.E=s|0,this.F=o|0,this.G=a|0,this.H=l|0}process(e,n){for(let d=0;d<16;d++,n+=4)Ns[d]=e.getUint32(n,!1);for(let d=16;d<64;d++){const f=Ns[d-15],h=Ns[d-2],m=oi(f,7)^oi(f,18)^f>>>3,g=oi(h,17)^oi(h,19)^h>>>10;Ns[d]=g+Ns[d-7]+m+Ns[d-16]|0}let{A:r,B:i,C:s,D:o,E:a,F:l,G:c,H:u}=this;for(let d=0;d<64;d++){const f=oi(a,6)^oi(a,11)^oi(a,25),h=u+f+MN(a,l,c)+BN[d]+Ns[d]|0,g=(oi(r,2)^oi(r,13)^oi(r,22))+LN(r,i,s)|0;u=c,c=l,l=a,a=o+h|0,o=s,s=i,i=r,r=h+g|0}r=r+this.A|0,i=i+this.B|0,s=s+this.C|0,o=o+this.D|0,a=a+this.E|0,l=l+this.F|0,c=c+this.G|0,u=u+this.H|0,this.set(r,i,s,o,a,l,c,u)}roundClean(){Ns.fill(0)}destroy(){this.set(0,0,0,0,0,0,0,0),this.buffer.fill(0)}}const R_=H1(()=>new DN),dh=BigInt(2**32-1),Pv=BigInt(32);function I_(t,e=!1){return e?{h:Number(t&dh),l:Number(t>>Pv&dh)}:{h:Number(t>>Pv&dh)|0,l:Number(t&dh)|0}}function O_(t,e=!1){let n=new Uint32Array(t.length),r=new Uint32Array(t.length);for(let i=0;i<t.length;i++){const{h:s,l:o}=I_(t[i],e);[n[i],r[i]]=[s,o]}return[n,r]}const $N=(t,e)=>BigInt(t>>>0)<<Pv|BigInt(e>>>0),UN=(t,e,n)=>t>>>n,FN=(t,e,n)=>t<<32-n|e>>>n,jN=(t,e,n)=>t>>>n|e<<32-n,HN=(t,e,n)=>t<<32-n|e>>>n,KN=(t,e,n)=>t<<64-n|e>>>n-32,zN=(t,e,n)=>t>>>n-32|e<<64-n,VN=(t,e)=>e,GN=(t,e)=>t,N_=(t,e,n)=>t<<n|e>>>32-n,M_=(t,e,n)=>e<<n|t>>>32-n,L_=(t,e,n)=>e<<n-32|t>>>64-n,B_=(t,e,n)=>t<<n-32|e>>>64-n;function WN(t,e,n,r){const i=(e>>>0)+(r>>>0);return{h:t+n+(i/2**32|0)|0,l:i|0}}const qN=(t,e,n)=>(t>>>0)+(e>>>0)+(n>>>0),QN=(t,e,n,r)=>e+n+r+(t/2**32|0)|0,YN=(t,e,n,r)=>(t>>>0)+(e>>>0)+(n>>>0)+(r>>>0),JN=(t,e,n,r,i)=>e+n+r+i+(t/2**32|0)|0,ZN=(t,e,n,r,i)=>(t>>>0)+(e>>>0)+(n>>>0)+(r>>>0)+(i>>>0),XN=(t,e,n,r,i,s)=>e+n+r+i+s+(t/2**32|0)|0,Pe={fromBig:I_,split:O_,toBig:$N,shrSH:UN,shrSL:FN,rotrSH:jN,rotrSL:HN,rotrBH:KN,rotrBL:zN,rotr32H:VN,rotr32L:GN,rotlSH:N_,rotlSL:M_,rotlBH:L_,rotlBL:B_,add:WN,add3L:qN,add3H:QN,add4L:YN,add4H:JN,add5H:XN,add5L:ZN},[e4,t4]=Pe.split(["0x428a2f98d728ae22","0x7137449123ef65cd","0xb5c0fbcfec4d3b2f","0xe9b5dba58189dbbc","0x3956c25bf348b538","0x59f111f1b605d019","0x923f82a4af194f9b","0xab1c5ed5da6d8118","0xd807aa98a3030242","0x12835b0145706fbe","0x243185be4ee4b28c","0x550c7dc3d5ffb4e2","0x72be5d74f27b896f","0x80deb1fe3b1696b1","0x9bdc06a725c71235","0xc19bf174cf692694","0xe49b69c19ef14ad2","0xefbe4786384f25e3","0x0fc19dc68b8cd5b5","0x240ca1cc77ac9c65","0x2de92c6f592b0275","0x4a7484aa6ea6e483","0x5cb0a9dcbd41fbd4","0x76f988da831153b5","0x983e5152ee66dfab","0xa831c66d2db43210","0xb00327c898fb213f","0xbf597fc7beef0ee4","0xc6e00bf33da88fc2","0xd5a79147930aa725","0x06ca6351e003826f","0x142929670a0e6e70","0x27b70a8546d22ffc","0x2e1b21385c26c926","0x4d2c6dfc5ac42aed","0x53380d139d95b3df","0x650a73548baf63de","0x766a0abb3c77b2a8","0x81c2c92e47edaee6","0x92722c851482353b","0xa2bfe8a14cf10364","0xa81a664bbc423001","0xc24b8b70d0f89791","0xc76c51a30654be30","0xd192e819d6ef5218","0xd69906245565a910","0xf40e35855771202a","0x106aa07032bbd1b8","0x19a4c116b8d2d0c8","0x1e376c085141ab53","0x2748774cdf8eeb99","0x34b0bcb5e19b48a8","0x391c0cb3c5c95a63","0x4ed8aa4ae3418acb","0x5b9cca4f7763e373","0x682e6ff3d6b2b8a3","0x748f82ee5defb2fc","0x78a5636f43172f60","0x84c87814a1f0ab72","0x8cc702081a6439ec","0x90befffa23631e28","0xa4506cebde82bde9","0xbef9a3f7b2c67915","0xc67178f2e372532b","0xca273eceea26619c","0xd186b8c721c0c207","0xeada7dd6cde0eb1e","0xf57d4f7fee6ed178","0x06f067aa72176fba","0x0a637dc5a2c898a6","0x113f9804bef90dae","0x1b710b35131c471b","0x28db77f523047d84","0x32caab7b40c72493","0x3c9ebe0a15c9bebc","0x431d67c49c100d4c","0x4cc5d4becb3e42b6","0x597f299cfc657e2a","0x5fcb6fab3ad6faec","0x6c44198c4a475817"].map(t=>BigInt(t))),Ms=new Uint32Array(80),Ls=new Uint32Array(80);class n4 extends T_{constructor(){super(128,64,16,!1),this.Ah=1779033703,this.Al=-205731576,this.Bh=-1150833019,this.Bl=-2067093701,this.Ch=1013904242,this.Cl=-23791573,this.Dh=-1521486534,this.Dl=1595750129,this.Eh=1359893119,this.El=-1377402159,this.Fh=-1694144372,this.Fl=725511199,this.Gh=528734635,this.Gl=-79577749,this.Hh=1541459225,this.Hl=327033209}get(){const{Ah:e,Al:n,Bh:r,Bl:i,Ch:s,Cl:o,Dh:a,Dl:l,Eh:c,El:u,Fh:d,Fl:f,Gh:h,Gl:m,Hh:g,Hl:w}=this;return[e,n,r,i,s,o,a,l,c,u,d,f,h,m,g,w]}set(e,n,r,i,s,o,a,l,c,u,d,f,h,m,g,w){this.Ah=e|0,this.Al=n|0,this.Bh=r|0,this.Bl=i|0,this.Ch=s|0,this.Cl=o|0,this.Dh=a|0,this.Dl=l|0,this.Eh=c|0,this.El=u|0,this.Fh=d|0,this.Fl=f|0,this.Gh=h|0,this.Gl=m|0,this.Hh=g|0,this.Hl=w|0}process(e,n){for(let y=0;y<16;y++,n+=4)Ms[y]=e.getUint32(n),Ls[y]=e.getUint32(n+=4);for(let y=16;y<80;y++){const x=Ms[y-15]|0,T=Ls[y-15]|0,B=Pe.rotrSH(x,T,1)^Pe.rotrSH(x,T,8)^Pe.shrSH(x,T,7),j=Pe.rotrSL(x,T,1)^Pe.rotrSL(x,T,8)^Pe.shrSL(x,T,7),M=Ms[y-2]|0,K=Ls[y-2]|0,U=Pe.rotrSH(M,K,19)^Pe.rotrBH(M,K,61)^Pe.shrSH(M,K,6),W=Pe.rotrSL(M,K,19)^Pe.rotrBL(M,K,61)^Pe.shrSL(M,K,6),z=Pe.add4L(j,W,Ls[y-7],Ls[y-16]),$=Pe.add4H(z,B,U,Ms[y-7],Ms[y-16]);Ms[y]=$|0,Ls[y]=z|0}let{Ah:r,Al:i,Bh:s,Bl:o,Ch:a,Cl:l,Dh:c,Dl:u,Eh:d,El:f,Fh:h,Fl:m,Gh:g,Gl:w,Hh:p,Hl:v}=this;for(let y=0;y<80;y++){const x=Pe.rotrSH(d,f,14)^Pe.rotrSH(d,f,18)^Pe.rotrBH(d,f,41),T=Pe.rotrSL(d,f,14)^Pe.rotrSL(d,f,18)^Pe.rotrBL(d,f,41),B=d&h^~d&g,j=f&m^~f&w,M=Pe.add5L(v,T,j,t4[y],Ls[y]),K=Pe.add5H(M,p,x,B,e4[y],Ms[y]),U=M|0,W=Pe.rotrSH(r,i,28)^Pe.rotrBH(r,i,34)^Pe.rotrBH(r,i,39),z=Pe.rotrSL(r,i,28)^Pe.rotrBL(r,i,34)^Pe.rotrBL(r,i,39),$=r&s^r&a^s&a,N=i&o^i&l^o&l;p=g|0,v=w|0,g=h|0,w=m|0,h=d|0,m=f|0,{h:d,l:f}=Pe.add(c|0,u|0,K|0,U|0),c=a|0,u=l|0,a=s|0,l=o|0,s=r|0,o=i|0;const C=Pe.add3L(U,z,N);r=Pe.add3H(C,K,W,$),i=C|0}({h:r,l:i}=Pe.add(this.Ah|0,this.Al|0,r|0,i|0)),{h:s,l:o}=Pe.add(this.Bh|0,this.Bl|0,s|0,o|0),{h:a,l}=Pe.add(this.Ch|0,this.Cl|0,a|0,l|0),{h:c,l:u}=Pe.add(this.Dh|0,this.Dl|0,c|0,u|0),{h:d,l:f}=Pe.add(this.Eh|0,this.El|0,d|0,f|0),{h,l:m}=Pe.add(this.Fh|0,this.Fl|0,h|0,m|0),{h:g,l:w}=Pe.add(this.Gh|0,this.Gl|0,g|0,w|0),{h:p,l:v}=Pe.add(this.Hh|0,this.Hl|0,p|0,v|0),this.set(r,i,s,o,a,l,c,u,d,f,h,m,g,w,p,v)}roundClean(){Ms.fill(0),Ls.fill(0)}destroy(){this.buffer.fill(0),this.set(0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0)}}const r4=H1(()=>new n4);function i4(){if(typeof self<"u")return self;if(typeof window<"u")return window;if(typeof global<"u")return global;throw new Error("unable to locate global object")}const S2=i4();S2.crypto||S2.msCrypto;function s4(t){switch(t){case"sha256":return R_.create();case"sha512":return r4.create()}G(!1,"invalid hashing algorithm name","algorithm",t)}const[D_,$_,U_]=[[],[],[]],o4=BigInt(0),Uu=BigInt(1),a4=BigInt(2),l4=BigInt(7),c4=BigInt(256),u4=BigInt(113);for(let t=0,e=Uu,n=1,r=0;t<24;t++){[n,r]=[r,(2*n+3*r)%5],D_.push(2*(5*r+n)),$_.push((t+1)*(t+2)/2%64);let i=o4;for(let s=0;s<7;s++)e=(e<<Uu^(e>>l4)*u4)%c4,e&a4&&(i^=Uu<<(Uu<<BigInt(s))-Uu);U_.push(i)}const[d4,f4]=O_(U_,!0),C2=(t,e,n)=>n>32?L_(t,e,n):N_(t,e,n),x2=(t,e,n)=>n>32?B_(t,e,n):M_(t,e,n);function h4(t,e=24){const n=new Uint32Array(10);for(let r=24-e;r<24;r++){for(let o=0;o<10;o++)n[o]=t[o]^t[o+10]^t[o+20]^t[o+30]^t[o+40];for(let o=0;o<10;o+=2){const a=(o+8)%10,l=(o+2)%10,c=n[l],u=n[l+1],d=C2(c,u,1)^n[a],f=x2(c,u,1)^n[a+1];for(let h=0;h<50;h+=10)t[o+h]^=d,t[o+h+1]^=f}let i=t[2],s=t[3];for(let o=0;o<24;o++){const a=$_[o],l=C2(i,s,a),c=x2(i,s,a),u=D_[o];i=t[u],s=t[u+1],t[u]=l,t[u+1]=c}for(let o=0;o<50;o+=10){for(let a=0;a<10;a++)n[a]=t[o+a];for(let a=0;a<10;a++)t[o+a]^=~n[(a+2)%10]&n[(a+4)%10]}t[0]^=d4[r],t[1]^=f4[r]}n.fill(0)}class K1 extends j1{constructor(e,n,r,i=!1,s=24){if(super(),this.blockLen=e,this.suffix=n,this.outputLen=r,this.enableXOF=i,this.rounds=s,this.pos=0,this.posOut=0,this.finished=!1,this.destroyed=!1,i0(r),0>=this.blockLen||this.blockLen>=200)throw new Error("Sha3 supports only keccak-f1600 function");this.state=new Uint8Array(200),this.state32=PN(this.state)}keccak(){h4(this.state32,this.rounds),this.posOut=0,this.pos=0}update(e){lu(this);const{blockLen:n,state:r}=this;e=gg(e);const i=e.length;for(let s=0;s<i;){const o=Math.min(n-this.pos,i-s);for(let a=0;a<o;a++)r[this.pos++]^=e[s++];this.pos===n&&this.keccak()}return this}finish(){if(this.finished)return;this.finished=!0;const{state:e,suffix:n,pos:r,blockLen:i}=this;e[r]^=n,n&128&&r===i-1&&this.keccak(),e[i-1]^=128,this.keccak()}writeInto(e){lu(this,!1),F1(e),this.finish();const n=this.state,{blockLen:r}=this;for(let i=0,s=e.length;i<s;){this.posOut>=r&&this.keccak();const o=Math.min(r-this.posOut,s-i);e.set(n.subarray(this.posOut,this.posOut+o),i),this.posOut+=o,i+=o}return e}xofInto(e){if(!this.enableXOF)throw new Error("XOF is not possible for this instance");return this.writeInto(e)}xof(e){return i0(e),this.xofInto(new Uint8Array(e))}digestInto(e){if(x_(e,this),this.finished)throw new Error("digest() was already called");return this.writeInto(e),this.destroy(),e}digest(){return this.digestInto(new Uint8Array(this.outputLen))}destroy(){this.destroyed=!0,this.state.fill(0)}_cloneInto(e){const{blockLen:n,suffix:r,outputLen:i,rounds:s,enableXOF:o}=this;return e||(e=new K1(n,r,i,o,s)),e.state32.set(this.state32),e.pos=this.pos,e.posOut=this.posOut,e.finished=this.finished,e.rounds=s,e.suffix=r,e.outputLen=i,e.enableXOF=o,e.destroyed=this.destroyed,e}}const p4=(t,e,n)=>H1(()=>new K1(e,t,n)),g4=p4(1,136,256/8);let F_=!1;const j_=function(t){return g4(t)};let H_=j_;function St(t){const e=Ie(t,"data");return fe(H_(e))}St._=j_;St.lock=function(){F_=!0};St.register=function(t){if(F_)throw new TypeError("keccak256 is locked");H_=t};Object.freeze(St);const K_=function(t){return s4("sha256").update(t).digest()};let z_=K_,V_=!1;function Au(t){const e=Ie(t,"data");return fe(z_(e))}Au._=K_;Au.lock=function(){V_=!0};Au.register=function(t){if(V_)throw new Error("sha256 is locked");z_=t};Object.freeze(Au);Object.freeze(Au);/*! noble-curves - MIT License (c) 2022 Paul Miller (paulmillr.com) */const G_=BigInt(0),mg=BigInt(1),m4=BigInt(2),yg=t=>t instanceof Uint8Array,y4=Array.from({length:256},(t,e)=>e.toString(16).padStart(2,"0"));function cu(t){if(!yg(t))throw new Error("Uint8Array expected");let e="";for(let n=0;n<t.length;n++)e+=y4[t[n]];return e}function W_(t){const e=t.toString(16);return e.length&1?`0${e}`:e}function z1(t){if(typeof t!="string")throw new Error("hex string expected, got "+typeof t);return BigInt(t===""?"0":`0x${t}`)}function uu(t){if(typeof t!="string")throw new Error("hex string expected, got "+typeof t);const e=t.length;if(e%2)throw new Error("padded hex string expected, got unpadded hex of length "+e);const n=new Uint8Array(e/2);for(let r=0;r<n.length;r++){const i=r*2,s=t.slice(i,i+2),o=Number.parseInt(s,16);if(Number.isNaN(o)||o<0)throw new Error("Invalid byte sequence");n[r]=o}return n}function Ga(t){return z1(cu(t))}function V1(t){if(!yg(t))throw new Error("Uint8Array expected");return z1(cu(Uint8Array.from(t).reverse()))}function du(t,e){return uu(t.toString(16).padStart(e*2,"0"))}function G1(t,e){return du(t,e).reverse()}function v4(t){return uu(W_(t))}function $r(t,e,n){let r;if(typeof e=="string")try{r=uu(e)}catch(s){throw new Error(`${t} must be valid hex string, got "${e}". Cause: ${s}`)}else if(yg(e))r=Uint8Array.from(e);else throw new Error(`${t} must be hex string or Uint8Array`);const i=r.length;if(typeof n=="number"&&i!==n)throw new Error(`${t} expected ${n} bytes, got ${i}`);return r}function Hd(...t){const e=new Uint8Array(t.reduce((r,i)=>r+i.length,0));let n=0;return t.forEach(r=>{if(!yg(r))throw new Error("Uint8Array expected");e.set(r,n),n+=r.length}),e}function w4(t,e){if(t.length!==e.length)return!1;for(let n=0;n<t.length;n++)if(t[n]!==e[n])return!1;return!0}function b4(t){if(typeof t!="string")throw new Error(`utf8ToBytes expected string, got ${typeof t}`);return new Uint8Array(new TextEncoder().encode(t))}function E4(t){let e;for(e=0;t>G_;t>>=mg,e+=1);return e}function A4(t,e){return t>>BigInt(e)&mg}const S4=(t,e,n)=>t|(n?mg:G_)<<BigInt(e),W1=t=>(m4<<BigInt(t-1))-mg,bm=t=>new Uint8Array(t),k2=t=>Uint8Array.from(t);function q_(t,e,n){if(typeof t!="number"||t<2)throw new Error("hashLen must be a number");if(typeof e!="number"||e<2)throw new Error("qByteLen must be a number");if(typeof n!="function")throw new Error("hmacFn must be a function");let r=bm(t),i=bm(t),s=0;const o=()=>{r.fill(1),i.fill(0),s=0},a=(...d)=>n(i,r,...d),l=(d=bm())=>{i=a(k2([0]),d),r=a(),d.length!==0&&(i=a(k2([1]),d),r=a())},c=()=>{if(s++>=1e3)throw new Error("drbg: tried 1000 values");let d=0;const f=[];for(;d<e;){r=a();const h=r.slice();f.push(h),d+=r.length}return Hd(...f)};return(d,f)=>{o(),l(d);let h;for(;!(h=f(c()));)l();return o(),h}}const C4={bigint:t=>typeof t=="bigint",function:t=>typeof t=="function",boolean:t=>typeof t=="boolean",string:t=>typeof t=="string",stringOrUint8Array:t=>typeof t=="string"||t instanceof Uint8Array,isSafeInteger:t=>Number.isSafeInteger(t),array:t=>Array.isArray(t),field:(t,e)=>e.Fp.isValid(t),hash:t=>typeof t=="function"&&Number.isSafeInteger(t.outputLen)};function Mf(t,e,n={}){const r=(i,s,o)=>{const a=C4[s];if(typeof a!="function")throw new Error(`Invalid validator "${s}", expected function`);const l=t[i];if(!(o&&l===void 0)&&!a(l,t))throw new Error(`Invalid param ${String(i)}=${l} (${typeof l}), expected ${s}`)};for(const[i,s]of Object.entries(e))r(i,s,!1);for(const[i,s]of Object.entries(n))r(i,s,!0);return t}const x4=Object.freeze(Object.defineProperty({__proto__:null,bitGet:A4,bitLen:E4,bitMask:W1,bitSet:S4,bytesToHex:cu,bytesToNumberBE:Ga,bytesToNumberLE:V1,concatBytes:Hd,createHmacDrbg:q_,ensureBytes:$r,equalBytes:w4,hexToBytes:uu,hexToNumber:z1,numberToBytesBE:du,numberToBytesLE:G1,numberToHexUnpadded:W_,numberToVarBytesBE:v4,utf8ToBytes:b4,validateObject:Mf},Symbol.toStringTag,{value:"Module"}));/*! noble-curves - MIT License (c) 2022 Paul Miller (paulmillr.com) */const Dt=BigInt(0),bt=BigInt(1),ca=BigInt(2),k4=BigInt(3),Tv=BigInt(4),_2=BigInt(5),P2=BigInt(8);BigInt(9);BigInt(16);function On(t,e){const n=t%e;return n>=Dt?n:e+n}function _4(t,e,n){if(n<=Dt||e<Dt)throw new Error("Expected power/modulo > 0");if(n===bt)return Dt;let r=bt;for(;e>Dt;)e&bt&&(r=r*t%n),t=t*t%n,e>>=bt;return r}function cr(t,e,n){let r=t;for(;e-- >Dt;)r*=r,r%=n;return r}function Rv(t,e){if(t===Dt||e<=Dt)throw new Error(`invert: expected positive integers, got n=${t} mod=${e}`);let n=On(t,e),r=e,i=Dt,s=bt;for(;n!==Dt;){const a=r/n,l=r%n,c=i-s*a;r=n,n=l,i=s,s=c}if(r!==bt)throw new Error("invert: does not exist");return On(i,e)}function P4(t){const e=(t-bt)/ca;let n,r,i;for(n=t-bt,r=0;n%ca===Dt;n/=ca,r++);for(i=ca;i<t&&_4(i,e,t)!==t-bt;i++);if(r===1){const o=(t+bt)/Tv;return function(l,c){const u=l.pow(c,o);if(!l.eql(l.sqr(u),c))throw new Error("Cannot find square root");return u}}const s=(n+bt)/ca;return function(a,l){if(a.pow(l,e)===a.neg(a.ONE))throw new Error("Cannot find square root");let c=r,u=a.pow(a.mul(a.ONE,i),n),d=a.pow(l,s),f=a.pow(l,n);for(;!a.eql(f,a.ONE);){if(a.eql(f,a.ZERO))return a.ZERO;let h=1;for(let g=a.sqr(f);h<c&&!a.eql(g,a.ONE);h++)g=a.sqr(g);const m=a.pow(u,bt<<BigInt(c-h-1));u=a.sqr(m),d=a.mul(d,m),f=a.mul(f,u),c=h}return d}}function T4(t){if(t%Tv===k4){const e=(t+bt)/Tv;return function(r,i){const s=r.pow(i,e);if(!r.eql(r.sqr(s),i))throw new Error("Cannot find square root");return s}}if(t%P2===_2){const e=(t-_2)/P2;return function(r,i){const s=r.mul(i,ca),o=r.pow(s,e),a=r.mul(i,o),l=r.mul(r.mul(a,ca),o),c=r.mul(a,r.sub(l,r.ONE));if(!r.eql(r.sqr(c),i))throw new Error("Cannot find square root");return c}}return P4(t)}const R4=["create","isValid","is0","neg","inv","sqrt","sqr","eql","add","sub","mul","pow","div","addN","subN","mulN","sqrN"];function I4(t){const e={ORDER:"bigint",MASK:"bigint",BYTES:"isSafeInteger",BITS:"isSafeInteger"},n=R4.reduce((r,i)=>(r[i]="function",r),e);return Mf(t,n)}function O4(t,e,n){if(n<Dt)throw new Error("Expected power > 0");if(n===Dt)return t.ONE;if(n===bt)return e;let r=t.ONE,i=e;for(;n>Dt;)n&bt&&(r=t.mul(r,i)),i=t.sqr(i),n>>=bt;return r}function N4(t,e){const n=new Array(e.length),r=e.reduce((s,o,a)=>t.is0(o)?s:(n[a]=s,t.mul(s,o)),t.ONE),i=t.inv(r);return e.reduceRight((s,o,a)=>t.is0(o)?s:(n[a]=t.mul(s,n[a]),t.mul(s,o)),i),n}function Q_(t,e){const n=e!==void 0?e:t.toString(2).length,r=Math.ceil(n/8);return{nBitLength:n,nByteLength:r}}function M4(t,e,n=!1,r={}){if(t<=Dt)throw new Error(`Expected Field ORDER > 0, got ${t}`);const{nBitLength:i,nByteLength:s}=Q_(t,e);if(s>2048)throw new Error("Field lengths over 2048 bytes are not supported");const o=T4(t),a=Object.freeze({ORDER:t,BITS:i,BYTES:s,MASK:W1(i),ZERO:Dt,ONE:bt,create:l=>On(l,t),isValid:l=>{if(typeof l!="bigint")throw new Error(`Invalid field element: expected bigint, got ${typeof l}`);return Dt<=l&&l<t},is0:l=>l===Dt,isOdd:l=>(l&bt)===bt,neg:l=>On(-l,t),eql:(l,c)=>l===c,sqr:l=>On(l*l,t),add:(l,c)=>On(l+c,t),sub:(l,c)=>On(l-c,t),mul:(l,c)=>On(l*c,t),pow:(l,c)=>O4(a,l,c),div:(l,c)=>On(l*Rv(c,t),t),sqrN:l=>l*l,addN:(l,c)=>l+c,subN:(l,c)=>l-c,mulN:(l,c)=>l*c,inv:l=>Rv(l,t),sqrt:r.sqrt||(l=>o(a,l)),invertBatch:l=>N4(a,l),cmov:(l,c,u)=>u?c:l,toBytes:l=>n?G1(l,s):du(l,s),fromBytes:l=>{if(l.length!==s)throw new Error(`Fp.fromBytes: expected ${s}, got ${l.length}`);return n?V1(l):Ga(l)}});return Object.freeze(a)}function Y_(t){if(typeof t!="bigint")throw new Error("field order must be bigint");const e=t.toString(2).length;return Math.ceil(e/8)}function J_(t){const e=Y_(t);return e+Math.ceil(e/2)}function L4(t,e,n=!1){const r=t.length,i=Y_(e),s=J_(e);if(r<16||r<s||r>1024)throw new Error(`expected ${s}-1024 bytes of input, got ${r}`);const o=n?Ga(t):V1(t),a=On(o,e-bt)+bt;return n?G1(a,i):du(a,i)}/*! noble-curves - MIT License (c) 2022 Paul Miller (paulmillr.com) */const B4=BigInt(0),Em=BigInt(1);function D4(t,e){const n=(i,s)=>{const o=s.negate();return i?o:s},r=i=>{const s=Math.ceil(e/i)+1,o=2**(i-1);return{windows:s,windowSize:o}};return{constTimeNegate:n,unsafeLadder(i,s){let o=t.ZERO,a=i;for(;s>B4;)s&Em&&(o=o.add(a)),a=a.double(),s>>=Em;return o},precomputeWindow(i,s){const{windows:o,windowSize:a}=r(s),l=[];let c=i,u=c;for(let d=0;d<o;d++){u=c,l.push(u);for(let f=1;f<a;f++)u=u.add(c),l.push(u);c=u.double()}return l},wNAF(i,s,o){const{windows:a,windowSize:l}=r(i);let c=t.ZERO,u=t.BASE;const d=BigInt(2**i-1),f=2**i,h=BigInt(i);for(let m=0;m<a;m++){const g=m*l;let w=Number(o&d);o>>=h,w>l&&(w-=f,o+=Em);const p=g,v=g+Math.abs(w)-1,y=m%2!==0,x=w<0;w===0?u=u.add(n(y,s[p])):c=c.add(n(x,s[v]))}return{p:c,f:u}},wNAFCached(i,s,o,a){const l=i._WINDOW_SIZE||1;let c=s.get(i);return c||(c=this.precomputeWindow(i,l),l!==1&&s.set(i,a(c))),this.wNAF(l,c,o)}}}function Z_(t){return I4(t.Fp),Mf(t,{n:"bigint",h:"bigint",Gx:"field",Gy:"field"},{nBitLength:"isSafeInteger",nByteLength:"isSafeInteger"}),Object.freeze({...Q_(t.n,t.nBitLength),...t,p:t.Fp.ORDER})}/*! noble-curves - MIT License (c) 2022 Paul Miller (paulmillr.com) */function $4(t){const e=Z_(t);Mf(e,{a:"field",b:"field"},{allowedPrivateKeyLengths:"array",wrapPrivateKey:"boolean",isTorsionFree:"function",clearCofactor:"function",allowInfinityPoint:"boolean",fromBytes:"function",toBytes:"function"});const{endo:n,Fp:r,a:i}=e;if(n){if(!r.eql(i,r.ZERO))throw new Error("Endomorphism can only be defined for Koblitz curves that have a=0");if(typeof n!="object"||typeof n.beta!="bigint"||typeof n.splitScalar!="function")throw new Error("Expected endomorphism with beta: bigint and splitScalar: function")}return Object.freeze({...e})}const{bytesToNumberBE:U4,hexToBytes:F4}=x4,ya={Err:class extends Error{constructor(e=""){super(e)}},_parseInt(t){const{Err:e}=ya;if(t.length<2||t[0]!==2)throw new e("Invalid signature integer tag");const n=t[1],r=t.subarray(2,n+2);if(!n||r.length!==n)throw new e("Invalid signature integer: wrong length");if(r[0]&128)throw new e("Invalid signature integer: negative");if(r[0]===0&&!(r[1]&128))throw new e("Invalid signature integer: unnecessary leading zero");return{d:U4(r),l:t.subarray(n+2)}},toSig(t){const{Err:e}=ya,n=typeof t=="string"?F4(t):t;if(!(n instanceof Uint8Array))throw new Error("ui8a expected");let r=n.length;if(r<2||n[0]!=48)throw new e("Invalid signature tag");if(n[1]!==r-2)throw new e("Invalid signature: incorrect length");const{d:i,l:s}=ya._parseInt(n.subarray(2)),{d:o,l:a}=ya._parseInt(s);if(a.length)throw new e("Invalid signature: left bytes after parsing");return{r:i,s:o}},hexFromSig(t){const e=c=>Number.parseInt(c[0],16)&8?"00"+c:c,n=c=>{const u=c.toString(16);return u.length&1?`0${u}`:u},r=e(n(t.s)),i=e(n(t.r)),s=r.length/2,o=i.length/2,a=n(s),l=n(o);return`30${n(o+s+4)}02${l}${i}02${a}${r}`}},cs=BigInt(0),Er=BigInt(1);BigInt(2);const T2=BigInt(3);BigInt(4);function j4(t){const e=$4(t),{Fp:n}=e,r=e.toBytes||((m,g,w)=>{const p=g.toAffine();return Hd(Uint8Array.from([4]),n.toBytes(p.x),n.toBytes(p.y))}),i=e.fromBytes||(m=>{const g=m.subarray(1),w=n.fromBytes(g.subarray(0,n.BYTES)),p=n.fromBytes(g.subarray(n.BYTES,2*n.BYTES));return{x:w,y:p}});function s(m){const{a:g,b:w}=e,p=n.sqr(m),v=n.mul(p,m);return n.add(n.add(v,n.mul(m,g)),w)}if(!n.eql(n.sqr(e.Gy),s(e.Gx)))throw new Error("bad generator point: equation left != right");function o(m){return typeof m=="bigint"&&cs<m&&m<e.n}function a(m){if(!o(m))throw new Error("Expected valid bigint: 0 < bigint < curve.n")}function l(m){const{allowedPrivateKeyLengths:g,nByteLength:w,wrapPrivateKey:p,n:v}=e;if(g&&typeof m!="bigint"){if(m instanceof Uint8Array&&(m=cu(m)),typeof m!="string"||!g.includes(m.length))throw new Error("Invalid key");m=m.padStart(w*2,"0")}let y;try{y=typeof m=="bigint"?m:Ga($r("private key",m,w))}catch{throw new Error(`private key must be ${w} bytes, hex or bigint, not ${typeof m}`)}return p&&(y=On(y,v)),a(y),y}const c=new Map;function u(m){if(!(m instanceof d))throw new Error("ProjectivePoint expected")}class d{constructor(g,w,p){if(this.px=g,this.py=w,this.pz=p,g==null||!n.isValid(g))throw new Error("x required");if(w==null||!n.isValid(w))throw new Error("y required");if(p==null||!n.isValid(p))throw new Error("z required")}static fromAffine(g){const{x:w,y:p}=g||{};if(!g||!n.isValid(w)||!n.isValid(p))throw new Error("invalid affine point");if(g instanceof d)throw new Error("projective point not allowed");const v=y=>n.eql(y,n.ZERO);return v(w)&&v(p)?d.ZERO:new d(w,p,n.ONE)}get x(){return this.toAffine().x}get y(){return this.toAffine().y}static normalizeZ(g){const w=n.invertBatch(g.map(p=>p.pz));return g.map((p,v)=>p.toAffine(w[v])).map(d.fromAffine)}static fromHex(g){const w=d.fromAffine(i($r("pointHex",g)));return w.assertValidity(),w}static fromPrivateKey(g){return d.BASE.multiply(l(g))}_setWindowSize(g){this._WINDOW_SIZE=g,c.delete(this)}assertValidity(){if(this.is0()){if(e.allowInfinityPoint&&!n.is0(this.py))return;throw new Error("bad point: ZERO")}const{x:g,y:w}=this.toAffine();if(!n.isValid(g)||!n.isValid(w))throw new Error("bad point: x or y not FE");const p=n.sqr(w),v=s(g);if(!n.eql(p,v))throw new Error("bad point: equation left != right");if(!this.isTorsionFree())throw new Error("bad point: not in prime-order subgroup")}hasEvenY(){const{y:g}=this.toAffine();if(n.isOdd)return!n.isOdd(g);throw new Error("Field doesn't support isOdd")}equals(g){u(g);const{px:w,py:p,pz:v}=this,{px:y,py:x,pz:T}=g,B=n.eql(n.mul(w,T),n.mul(y,v)),j=n.eql(n.mul(p,T),n.mul(x,v));return B&&j}negate(){return new d(this.px,n.neg(this.py),this.pz)}double(){const{a:g,b:w}=e,p=n.mul(w,T2),{px:v,py:y,pz:x}=this;let T=n.ZERO,B=n.ZERO,j=n.ZERO,M=n.mul(v,v),K=n.mul(y,y),U=n.mul(x,x),W=n.mul(v,y);return W=n.add(W,W),j=n.mul(v,x),j=n.add(j,j),T=n.mul(g,j),B=n.mul(p,U),B=n.add(T,B),T=n.sub(K,B),B=n.add(K,B),B=n.mul(T,B),T=n.mul(W,T),j=n.mul(p,j),U=n.mul(g,U),W=n.sub(M,U),W=n.mul(g,W),W=n.add(W,j),j=n.add(M,M),M=n.add(j,M),M=n.add(M,U),M=n.mul(M,W),B=n.add(B,M),U=n.mul(y,x),U=n.add(U,U),M=n.mul(U,W),T=n.sub(T,M),j=n.mul(U,K),j=n.add(j,j),j=n.add(j,j),new d(T,B,j)}add(g){u(g);const{px:w,py:p,pz:v}=this,{px:y,py:x,pz:T}=g;let B=n.ZERO,j=n.ZERO,M=n.ZERO;const K=e.a,U=n.mul(e.b,T2);let W=n.mul(w,y),z=n.mul(p,x),$=n.mul(v,T),N=n.add(w,p),C=n.add(y,x);N=n.mul(N,C),C=n.add(W,z),N=n.sub(N,C),C=n.add(w,v);let O=n.add(y,T);return C=n.mul(C,O),O=n.add(W,$),C=n.sub(C,O),O=n.add(p,v),B=n.add(x,T),O=n.mul(O,B),B=n.add(z,$),O=n.sub(O,B),M=n.mul(K,C),B=n.mul(U,$),M=n.add(B,M),B=n.sub(z,M),M=n.add(z,M),j=n.mul(B,M),z=n.add(W,W),z=n.add(z,W),$=n.mul(K,$),C=n.mul(U,C),z=n.add(z,$),$=n.sub(W,$),$=n.mul(K,$),C=n.add(C,$),W=n.mul(z,C),j=n.add(j,W),W=n.mul(O,C),B=n.mul(N,B),B=n.sub(B,W),W=n.mul(N,z),M=n.mul(O,M),M=n.add(M,W),new d(B,j,M)}subtract(g){return this.add(g.negate())}is0(){return this.equals(d.ZERO)}wNAF(g){return h.wNAFCached(this,c,g,w=>{const p=n.invertBatch(w.map(v=>v.pz));return w.map((v,y)=>v.toAffine(p[y])).map(d.fromAffine)})}multiplyUnsafe(g){const w=d.ZERO;if(g===cs)return w;if(a(g),g===Er)return this;const{endo:p}=e;if(!p)return h.unsafeLadder(this,g);let{k1neg:v,k1:y,k2neg:x,k2:T}=p.splitScalar(g),B=w,j=w,M=this;for(;y>cs||T>cs;)y&Er&&(B=B.add(M)),T&Er&&(j=j.add(M)),M=M.double(),y>>=Er,T>>=Er;return v&&(B=B.negate()),x&&(j=j.negate()),j=new d(n.mul(j.px,p.beta),j.py,j.pz),B.add(j)}multiply(g){a(g);let w=g,p,v;const{endo:y}=e;if(y){const{k1neg:x,k1:T,k2neg:B,k2:j}=y.splitScalar(w);let{p:M,f:K}=this.wNAF(T),{p:U,f:W}=this.wNAF(j);M=h.constTimeNegate(x,M),U=h.constTimeNegate(B,U),U=new d(n.mul(U.px,y.beta),U.py,U.pz),p=M.add(U),v=K.add(W)}else{const{p:x,f:T}=this.wNAF(w);p=x,v=T}return d.normalizeZ([p,v])[0]}multiplyAndAddUnsafe(g,w,p){const v=d.BASE,y=(T,B)=>B===cs||B===Er||!T.equals(v)?T.multiplyUnsafe(B):T.multiply(B),x=y(this,w).add(y(g,p));return x.is0()?void 0:x}toAffine(g){const{px:w,py:p,pz:v}=this,y=this.is0();g==null&&(g=y?n.ONE:n.inv(v));const x=n.mul(w,g),T=n.mul(p,g),B=n.mul(v,g);if(y)return{x:n.ZERO,y:n.ZERO};if(!n.eql(B,n.ONE))throw new Error("invZ was invalid");return{x,y:T}}isTorsionFree(){const{h:g,isTorsionFree:w}=e;if(g===Er)return!0;if(w)return w(d,this);throw new Error("isTorsionFree() has not been declared for the elliptic curve")}clearCofactor(){const{h:g,clearCofactor:w}=e;return g===Er?this:w?w(d,this):this.multiplyUnsafe(e.h)}toRawBytes(g=!0){return this.assertValidity(),r(d,this,g)}toHex(g=!0){return cu(this.toRawBytes(g))}}d.BASE=new d(e.Gx,e.Gy,n.ONE),d.ZERO=new d(n.ZERO,n.ONE,n.ZERO);const f=e.nBitLength,h=D4(d,e.endo?Math.ceil(f/2):f);return{CURVE:e,ProjectivePoint:d,normPrivateKeyToScalar:l,weierstrassEquation:s,isWithinCurveOrder:o}}function H4(t){const e=Z_(t);return Mf(e,{hash:"hash",hmac:"function",randomBytes:"function"},{bits2int:"function",bits2int_modN:"function",lowS:"boolean"}),Object.freeze({lowS:!0,...e})}function K4(t){const e=H4(t),{Fp:n,n:r}=e,i=n.BYTES+1,s=2*n.BYTES+1;function o(C){return cs<C&&C<n.ORDER}function a(C){return On(C,r)}function l(C){return Rv(C,r)}const{ProjectivePoint:c,normPrivateKeyToScalar:u,weierstrassEquation:d,isWithinCurveOrder:f}=j4({...e,toBytes(C,O,D){const b=O.toAffine(),E=n.toBytes(b.x),_=Hd;return D?_(Uint8Array.from([O.hasEvenY()?2:3]),E):_(Uint8Array.from([4]),E,n.toBytes(b.y))},fromBytes(C){const O=C.length,D=C[0],b=C.subarray(1);if(O===i&&(D===2||D===3)){const E=Ga(b);if(!o(E))throw new Error("Point is not on curve");const _=d(E);let I=n.sqrt(_);const A=(I&Er)===Er;return(D&1)===1!==A&&(I=n.neg(I)),{x:E,y:I}}else if(O===s&&D===4){const E=n.fromBytes(b.subarray(0,n.BYTES)),_=n.fromBytes(b.subarray(n.BYTES,2*n.BYTES));return{x:E,y:_}}else throw new Error(`Point of length ${O} was invalid. Expected ${i} compressed bytes or ${s} uncompressed bytes`)}}),h=C=>cu(du(C,e.nByteLength));function m(C){const O=r>>Er;return C>O}function g(C){return m(C)?a(-C):C}const w=(C,O,D)=>Ga(C.slice(O,D));class p{constructor(O,D,b){this.r=O,this.s=D,this.recovery=b,this.assertValidity()}static fromCompact(O){const D=e.nByteLength;return O=$r("compactSignature",O,D*2),new p(w(O,0,D),w(O,D,2*D))}static fromDER(O){const{r:D,s:b}=ya.toSig($r("DER",O));return new p(D,b)}assertValidity(){if(!f(this.r))throw new Error("r must be 0 < r < CURVE.n");if(!f(this.s))throw new Error("s must be 0 < s < CURVE.n")}addRecoveryBit(O){return new p(this.r,this.s,O)}recoverPublicKey(O){const{r:D,s:b,recovery:E}=this,_=j($r("msgHash",O));if(E==null||![0,1,2,3].includes(E))throw new Error("recovery id invalid");const I=E===2||E===3?D+e.n:D;if(I>=n.ORDER)throw new Error("recovery id 2 or 3 invalid");const A=E&1?"03":"02",S=c.fromHex(A+h(I)),P=l(I),R=a(-_*P),L=a(b*P),F=c.BASE.multiplyAndAddUnsafe(S,R,L);if(!F)throw new Error("point at infinify");return F.assertValidity(),F}hasHighS(){return m(this.s)}normalizeS(){return this.hasHighS()?new p(this.r,a(-this.s),this.recovery):this}toDERRawBytes(){return uu(this.toDERHex())}toDERHex(){return ya.hexFromSig({r:this.r,s:this.s})}toCompactRawBytes(){return uu(this.toCompactHex())}toCompactHex(){return h(this.r)+h(this.s)}}const v={isValidPrivateKey(C){try{return u(C),!0}catch{return!1}},normPrivateKeyToScalar:u,randomPrivateKey:()=>{const C=J_(e.n);return L4(e.randomBytes(C),e.n)},precompute(C=8,O=c.BASE){return O._setWindowSize(C),O.multiply(BigInt(3)),O}};function y(C,O=!0){return c.fromPrivateKey(C).toRawBytes(O)}function x(C){const O=C instanceof Uint8Array,D=typeof C=="string",b=(O||D)&&C.length;return O?b===i||b===s:D?b===2*i||b===2*s:C instanceof c}function T(C,O,D=!0){if(x(C))throw new Error("first arg must be private key");if(!x(O))throw new Error("second arg must be public key");return c.fromHex(O).multiply(u(C)).toRawBytes(D)}const B=e.bits2int||function(C){const O=Ga(C),D=C.length*8-e.nBitLength;return D>0?O>>BigInt(D):O},j=e.bits2int_modN||function(C){return a(B(C))},M=W1(e.nBitLength);function K(C){if(typeof C!="bigint")throw new Error("bigint expected");if(!(cs<=C&&C<M))throw new Error(`bigint expected < 2^${e.nBitLength}`);return du(C,e.nByteLength)}function U(C,O,D=W){if(["recovered","canonical"].some(q=>q in D))throw new Error("sign() legacy options not supported");const{hash:b,randomBytes:E}=e;let{lowS:_,prehash:I,extraEntropy:A}=D;_==null&&(_=!0),C=$r("msgHash",C),I&&(C=$r("prehashed msgHash",b(C)));const S=j(C),P=u(O),R=[K(P),K(S)];if(A!=null){const q=A===!0?E(n.BYTES):A;R.push($r("extraEntropy",q))}const L=Hd(...R),F=S;function V(q){const Y=B(q);if(!f(Y))return;const te=l(Y),ie=c.BASE.multiply(Y).toAffine(),le=a(ie.x);if(le===cs)return;const he=a(te*a(F+le*P));if(he===cs)return;let Ee=(ie.x===le?0:2)|Number(ie.y&Er),de=he;return _&&m(he)&&(de=g(he),Ee^=1),new p(le,de,Ee)}return{seed:L,k2sig:V}}const W={lowS:e.lowS,prehash:!1},z={lowS:e.lowS,prehash:!1};function $(C,O,D=W){const{seed:b,k2sig:E}=U(C,O,D),_=e;return q_(_.hash.outputLen,_.nByteLength,_.hmac)(b,E)}c.BASE._setWindowSize(8);function N(C,O,D,b=z){var ie;const E=C;if(O=$r("msgHash",O),D=$r("publicKey",D),"strict"in b)throw new Error("options.strict was renamed to lowS");const{lowS:_,prehash:I}=b;let A,S;try{if(typeof E=="string"||E instanceof Uint8Array)try{A=p.fromDER(E)}catch(le){if(!(le instanceof ya.Err))throw le;A=p.fromCompact(E)}else if(typeof E=="object"&&typeof E.r=="bigint"&&typeof E.s=="bigint"){const{r:le,s:he}=E;A=new p(le,he)}else throw new Error("PARSE");S=c.fromHex(D)}catch(le){if(le.message==="PARSE")throw new Error("signature must be Signature instance, Uint8Array or hex string");return!1}if(_&&A.hasHighS())return!1;I&&(O=e.hash(O));const{r:P,s:R}=A,L=j(O),F=l(R),V=a(L*F),q=a(P*F),Y=(ie=c.BASE.multiplyAndAddUnsafe(S,V,q))==null?void 0:ie.toAffine();return Y?a(Y.x)===P:!1}return{CURVE:e,getPublicKey:y,getSharedSecret:T,sign:$,verify:N,ProjectivePoint:c,Signature:p,utils:v}}/*! noble-curves - MIT License (c) 2022 Paul Miller (paulmillr.com) */function z4(t){return{hash:t,hmac:(e,...n)=>P_(t,e,IN(...n)),randomBytes:ON}}function V4(t,e){const n=r=>K4({...t,...z4(r)});return Object.freeze({...n(e),create:n})}/*! noble-curves - MIT License (c) 2022 Paul Miller (paulmillr.com) */const X_=BigInt("0xfffffffffffffffffffffffffffffffffffffffffffffffffffffffefffffc2f"),R2=BigInt("0xfffffffffffffffffffffffffffffffebaaedce6af48a03bbfd25e8cd0364141"),G4=BigInt(1),Iv=BigInt(2),I2=(t,e)=>(t+e/Iv)/e;function W4(t){const e=X_,n=BigInt(3),r=BigInt(6),i=BigInt(11),s=BigInt(22),o=BigInt(23),a=BigInt(44),l=BigInt(88),c=t*t*t%e,u=c*c*t%e,d=cr(u,n,e)*u%e,f=cr(d,n,e)*u%e,h=cr(f,Iv,e)*c%e,m=cr(h,i,e)*h%e,g=cr(m,s,e)*m%e,w=cr(g,a,e)*g%e,p=cr(w,l,e)*w%e,v=cr(p,a,e)*g%e,y=cr(v,n,e)*u%e,x=cr(y,o,e)*m%e,T=cr(x,r,e)*c%e,B=cr(T,Iv,e);if(!Ov.eql(Ov.sqr(B),t))throw new Error("Cannot find square root");return B}const Ov=M4(X_,void 0,void 0,{sqrt:W4}),js=V4({a:BigInt(0),b:BigInt(7),Fp:Ov,n:R2,Gx:BigInt("55066263022277343669578718895168534326250603453777594175500187360389116729240"),Gy:BigInt("32670510020758816978083085130507043184471273380659243275938904335757337482424"),h:BigInt(1),lowS:!0,endo:{beta:BigInt("0x7ae96a2b657c07106e64479eac3434e99cf0497512f58995c1396c28719501ee"),splitScalar:t=>{const e=R2,n=BigInt("0x3086d221a7d46bcde86c90e49284eb15"),r=-G4*BigInt("0xe4437ed6010e88286f547fa90abfe4c3"),i=BigInt("0x114ca50f7a8e2f3f657c1108d9d44cfd8"),s=n,o=BigInt("0x100000000000000000000000000000000"),a=I2(s*t,e),l=I2(-r*t,e);let c=On(t-a*n-l*i,e),u=On(-a*r-l*s,e);const d=c>o,f=u>o;if(d&&(c=e-c),f&&(u=e-u),c>o||u>o)throw new Error("splitScalar: Endomorphism failed, k="+t);return{k1neg:d,k1:c,k2neg:f,k2:u}}}},R_);BigInt(0);js.ProjectivePoint;const Kd="0x0000000000000000000000000000000000000000",O2="0x0000000000000000000000000000000000000000000000000000000000000000",N2=BigInt(0),M2=BigInt(1),L2=BigInt(2),B2=BigInt(27),D2=BigInt(28),fh=BigInt(35),yl={};function $2(t){return xs(Pt(t),32)}var Ac,hi,Sc,Na;const Br=class Br{constructor(e,n,r,i){Z(this,Ac);Z(this,hi);Z(this,Sc);Z(this,Na);Of(e,yl,"Signature"),H(this,Ac,n),H(this,hi,r),H(this,Sc,i),H(this,Na,null)}get r(){return k(this,Ac)}set r(e){G(sc(e)===32,"invalid r","value",e),H(this,Ac,fe(e))}get s(){return G(parseInt(k(this,hi).substring(0,3))<8,"non-canonical s; use ._s","s",k(this,hi)),k(this,hi)}set s(e){G(sc(e)===32,"invalid s","value",e),H(this,hi,fe(e))}get _s(){return k(this,hi)}isValid(){return parseInt(k(this,hi).substring(0,3))<8}get v(){return k(this,Sc)}set v(e){const n=_e(e,"value");G(n===27||n===28,"invalid v","v",e),H(this,Sc,n)}get networkV(){return k(this,Na)}get legacyChainId(){const e=this.networkV;return e==null?null:Br.getChainId(e)}get yParity(){return this.v===27?0:1}get yParityAndS(){const e=Ie(this.s);return this.yParity&&(e[0]|=128),fe(e)}get compactSerialized(){return mt([this.r,this.yParityAndS])}get serialized(){return mt([this.r,this.s,this.yParity?"0x1c":"0x1b"])}[Symbol.for("nodejs.util.inspect.custom")](){return`Signature { r: "${this.r}", s: "${this._s}"${this.isValid()?"":', valid: "false"'}, yParity: ${this.yParity}, networkV: ${this.networkV} }`}clone(){const e=new Br(yl,this.r,this._s,this.v);return this.networkV&&H(e,Na,this.networkV),e}toJSON(){const e=this.networkV;return{_type:"signature",networkV:e!=null?e.toString():null,r:this.r,s:this._s,v:this.v}}static getChainId(e){const n=we(e,"v");return n==B2||n==D2?N2:(G(n>=fh,"invalid EIP-155 v","v",e),(n-fh)/L2)}static getChainIdV(e,n){return we(e)*L2+BigInt(35+n-27)}static getNormalizedV(e){const n=we(e);return n===N2||n===B2?27:n===M2||n===D2?28:(G(n>=fh,"invalid v","v",e),n&M2?27:28)}static from(e){function n(c,u){G(c,u,"signature",e)}if(e==null)return new Br(yl,O2,O2,27);if(typeof e=="string"){const c=Ie(e,"signature");if(c.length===64){const u=fe(c.slice(0,32)),d=c.slice(32,64),f=d[0]&128?28:27;return d[0]&=127,new Br(yl,u,fe(d),f)}if(c.length===65){const u=fe(c.slice(0,32)),d=fe(c.slice(32,64)),f=Br.getNormalizedV(c[64]);return new Br(yl,u,d,f)}n(!1,"invalid raw signature length")}if(e instanceof Br)return e.clone();const r=e.r;n(r!=null,"missing r");const i=$2(r),s=function(c,u){if(c!=null)return $2(c);if(u!=null){n(nt(u,32),"invalid yParityAndS");const d=Ie(u);return d[0]&=127,fe(d)}n(!1,"missing s")}(e.s,e.yParityAndS),{networkV:o,v:a}=function(c,u,d){if(c!=null){const f=we(c);return{networkV:f>=fh?f:void 0,v:Br.getNormalizedV(f)}}if(u!=null)return n(nt(u,32),"invalid yParityAndS"),{v:Ie(u)[0]&128?28:27};if(d!=null){switch(_e(d,"sig.yParity")){case 0:return{v:27};case 1:return{v:28}}n(!1,"invalid yParity")}n(!1,"missing v")}(e.v,e.yParityAndS,e.yParity),l=new Br(yl,i,s,a);return o&&H(l,Na,o),n(e.yParity==null||_e(e.yParity,"sig.yParity")===l.yParity,"yParity mismatch"),n(e.yParityAndS==null||e.yParityAndS===l.yParityAndS,"yParityAndS mismatch"),l}};Ac=new WeakMap,hi=new WeakMap,Sc=new WeakMap,Na=new WeakMap;let Fn=Br;var ts;const ua=class ua{constructor(e){Z(this,ts);G(sc(e)===32,"invalid private key","privateKey","[REDACTED]"),H(this,ts,fe(e))}get privateKey(){return k(this,ts)}get publicKey(){return ua.computePublicKey(k(this,ts))}get compressedPublicKey(){return ua.computePublicKey(k(this,ts),!0)}sign(e){G(sc(e)===32,"invalid digest length","digest",e);const n=js.sign(vn(e),vn(k(this,ts)),{lowS:!0});return Fn.from({r:jo(n.r,32),s:jo(n.s,32),v:n.recovery?28:27})}computeSharedSecret(e){const n=ua.computePublicKey(e);return fe(js.getSharedSecret(vn(k(this,ts)),Ie(n),!1))}static computePublicKey(e,n){let r=Ie(e,"key");if(r.length===32){const s=js.getPublicKey(r,!!n);return fe(s)}if(r.length===64){const s=new Uint8Array(65);s[0]=4,s.set(r,1),r=s}const i=js.ProjectivePoint.fromHex(r);return fe(i.toRawBytes(n))}static recoverPublicKey(e,n){G(sc(e)===32,"invalid digest length","digest",e);const r=Fn.from(n);let i=js.Signature.fromCompact(vn(mt([r.r,r.s])));i=i.addRecoveryBit(r.yParity);const s=i.recoverPublicKey(vn(e));return G(s!=null,"invalid signature for digest","signature",n),"0x"+s.toHex(!1)}static addPoints(e,n,r){const i=js.ProjectivePoint.fromHex(ua.computePublicKey(e).substring(2)),s=js.ProjectivePoint.fromHex(ua.computePublicKey(n).substring(2));return"0x"+i.add(s).toHex(!!r)}};ts=new WeakMap;let zd=ua;const q4=BigInt(0),Q4=BigInt(36);function U2(t){t=t.toLowerCase();const e=t.substring(2).split(""),n=new Uint8Array(40);for(let i=0;i<40;i++)n[i]=e[i].charCodeAt(0);const r=Ie(St(n));for(let i=0;i<40;i+=2)r[i>>1]>>4>=8&&(e[i]=e[i].toUpperCase()),(r[i>>1]&15)>=8&&(e[i+1]=e[i+1].toUpperCase());return"0x"+e.join("")}const q1={};for(let t=0;t<10;t++)q1[String(t)]=String(t);for(let t=0;t<26;t++)q1[String.fromCharCode(65+t)]=String(10+t);const F2=15;function Y4(t){t=t.toUpperCase(),t=t.substring(4)+t.substring(0,2)+"00";let e=t.split("").map(r=>q1[r]).join("");for(;e.length>=F2;){let r=e.substring(0,F2);e=parseInt(r,10)%97+e.substring(r.length)}let n=String(98-parseInt(e,10)%97);for(;n.length<2;)n="0"+n;return n}const J4=function(){const t={};for(let e=0;e<36;e++){const n="0123456789abcdefghijklmnopqrstuvwxyz"[e];t[n]=BigInt(e)}return t}();function Z4(t){t=t.toLowerCase();let e=q4;for(let n=0;n<t.length;n++)e=e*Q4+J4[t[n]];return e}function Qe(t){if(G(typeof t=="string","invalid address","address",t),t.match(/^(0x)?[0-9a-fA-F]{40}$/)){t.startsWith("0x")||(t="0x"+t);const e=U2(t);return G(!t.match(/([A-F].*[a-f])|([a-f].*[A-F])/)||e===t,"bad address checksum","address",t),e}if(t.match(/^XE[0-9]{2}[0-9A-Za-z]{30,31}$/)){G(t.substring(2,4)===Y4(t),"bad icap checksum","address",t);let e=Z4(t.substring(4)).toString(16);for(;e.length<40;)e="0"+e;return U2("0x"+e)}G(!1,"invalid address","address",t)}function X4(t){const e=Qe(t.from);let r=we(t.nonce,"tx.nonce").toString(16);return r==="0"?r="0x":r.length%2?r="0x0"+r:r="0x"+r,Qe(ht(St(Ko([e,r])),12))}function e3(t){return t&&typeof t.getAddress=="function"}async function Am(t,e){const n=await e;return(n==null||n==="0x0000000000000000000000000000000000000000")&&(se(typeof t!="string","unconfigured name","UNCONFIGURED_NAME",{value:t}),G(!1,"invalid AddressLike value; did not resolve to a value address","target",t)),Qe(n)}function bn(t,e){if(typeof t=="string")return t.match(/^0x[0-9a-f]{40}$/i)?Qe(t):(se(e!=null,"ENS resolution requires a provider","UNSUPPORTED_OPERATION",{operation:"resolveName"}),Am(t,e.resolveName(t)));if(e3(t))return Am(t,t.getAddress());if(t&&typeof t.then=="function")return Am(t,t);G(!1,"unsupported addressable value","target",t)}const zi={};function ye(t,e){let n=!1;return e<0&&(n=!0,e*=-1),new cn(zi,`${n?"":"u"}int${e}`,t,{signed:n,width:e})}function ze(t,e){return new cn(zi,`bytes${e||""}`,t,{size:e})}const j2=Symbol.for("_ethers_typed");var Ma;const Vi=class Vi{constructor(e,n,r,i){Q(this,"type");Q(this,"value");Z(this,Ma);Q(this,"_typedSymbol");i==null&&(i=null),Of(zi,e,"Typed"),Ce(this,{_typedSymbol:j2,type:n,value:r}),H(this,Ma,i),this.format()}format(){if(this.type==="array")throw new Error("");if(this.type==="dynamicArray")throw new Error("");return this.type==="tuple"?`tuple(${this.value.map(e=>e.format()).join(",")})`:this.type}defaultValue(){return 0}minValue(){return 0}maxValue(){return 0}isBigInt(){return!!this.type.match(/^u?int[0-9]+$/)}isData(){return this.type.startsWith("bytes")}isString(){return this.type==="string"}get tupleName(){if(this.type!=="tuple")throw TypeError("not a tuple");return k(this,Ma)}get arrayLength(){if(this.type!=="array")throw TypeError("not an array");return k(this,Ma)===!0?-1:k(this,Ma)===!1?this.value.length:null}static from(e,n){return new Vi(zi,e,n)}static uint8(e){return ye(e,8)}static uint16(e){return ye(e,16)}static uint24(e){return ye(e,24)}static uint32(e){return ye(e,32)}static uint40(e){return ye(e,40)}static uint48(e){return ye(e,48)}static uint56(e){return ye(e,56)}static uint64(e){return ye(e,64)}static uint72(e){return ye(e,72)}static uint80(e){return ye(e,80)}static uint88(e){return ye(e,88)}static uint96(e){return ye(e,96)}static uint104(e){return ye(e,104)}static uint112(e){return ye(e,112)}static uint120(e){return ye(e,120)}static uint128(e){return ye(e,128)}static uint136(e){return ye(e,136)}static uint144(e){return ye(e,144)}static uint152(e){return ye(e,152)}static uint160(e){return ye(e,160)}static uint168(e){return ye(e,168)}static uint176(e){return ye(e,176)}static uint184(e){return ye(e,184)}static uint192(e){return ye(e,192)}static uint200(e){return ye(e,200)}static uint208(e){return ye(e,208)}static uint216(e){return ye(e,216)}static uint224(e){return ye(e,224)}static uint232(e){return ye(e,232)}static uint240(e){return ye(e,240)}static uint248(e){return ye(e,248)}static uint256(e){return ye(e,256)}static uint(e){return ye(e,256)}static int8(e){return ye(e,-8)}static int16(e){return ye(e,-16)}static int24(e){return ye(e,-24)}static int32(e){return ye(e,-32)}static int40(e){return ye(e,-40)}static int48(e){return ye(e,-48)}static int56(e){return ye(e,-56)}static int64(e){return ye(e,-64)}static int72(e){return ye(e,-72)}static int80(e){return ye(e,-80)}static int88(e){return ye(e,-88)}static int96(e){return ye(e,-96)}static int104(e){return ye(e,-104)}static int112(e){return ye(e,-112)}static int120(e){return ye(e,-120)}static int128(e){return ye(e,-128)}static int136(e){return ye(e,-136)}static int144(e){return ye(e,-144)}static int152(e){return ye(e,-152)}static int160(e){return ye(e,-160)}static int168(e){return ye(e,-168)}static int176(e){return ye(e,-176)}static int184(e){return ye(e,-184)}static int192(e){return ye(e,-192)}static int200(e){return ye(e,-200)}static int208(e){return ye(e,-208)}static int216(e){return ye(e,-216)}static int224(e){return ye(e,-224)}static int232(e){return ye(e,-232)}static int240(e){return ye(e,-240)}static int248(e){return ye(e,-248)}static int256(e){return ye(e,-256)}static int(e){return ye(e,-256)}static bytes1(e){return ze(e,1)}static bytes2(e){return ze(e,2)}static bytes3(e){return ze(e,3)}static bytes4(e){return ze(e,4)}static bytes5(e){return ze(e,5)}static bytes6(e){return ze(e,6)}static bytes7(e){return ze(e,7)}static bytes8(e){return ze(e,8)}static bytes9(e){return ze(e,9)}static bytes10(e){return ze(e,10)}static bytes11(e){return ze(e,11)}static bytes12(e){return ze(e,12)}static bytes13(e){return ze(e,13)}static bytes14(e){return ze(e,14)}static bytes15(e){return ze(e,15)}static bytes16(e){return ze(e,16)}static bytes17(e){return ze(e,17)}static bytes18(e){return ze(e,18)}static bytes19(e){return ze(e,19)}static bytes20(e){return ze(e,20)}static bytes21(e){return ze(e,21)}static bytes22(e){return ze(e,22)}static bytes23(e){return ze(e,23)}static bytes24(e){return ze(e,24)}static bytes25(e){return ze(e,25)}static bytes26(e){return ze(e,26)}static bytes27(e){return ze(e,27)}static bytes28(e){return ze(e,28)}static bytes29(e){return ze(e,29)}static bytes30(e){return ze(e,30)}static bytes31(e){return ze(e,31)}static bytes32(e){return ze(e,32)}static address(e){return new Vi(zi,"address",e)}static bool(e){return new Vi(zi,"bool",!!e)}static bytes(e){return new Vi(zi,"bytes",e)}static string(e){return new Vi(zi,"string",e)}static array(e,n){throw new Error("not implemented yet")}static tuple(e,n){throw new Error("not implemented yet")}static overrides(e){return new Vi(zi,"overrides",Object.assign({},e))}static isTyped(e){return e&&typeof e=="object"&&"_typedSymbol"in e&&e._typedSymbol===j2}static dereference(e,n){if(Vi.isTyped(e)){if(e.type!==n)throw new Error(`invalid type: expecetd ${n}, got ${e.type}`);return e.value}return e}};Ma=new WeakMap;let cn=Vi;class eM extends Ts{constructor(e){super("address","address",e,!1)}defaultValue(){return"0x0000000000000000000000000000000000000000"}encode(e,n){let r=cn.dereference(n,"string");try{r=Qe(r)}catch(i){return this._throwError(i.message,n)}return e.writeValue(r)}decode(e){return Qe(jo(e.readValue(),20))}}class tM extends Ts{constructor(n){super(n.name,n.type,"_",n.dynamic);Q(this,"coder");this.coder=n}defaultValue(){return this.coder.defaultValue()}encode(n,r){return this.coder.encode(n,r)}decode(n){return this.coder.decode(n)}}function t3(t,e,n){let r=[];if(Array.isArray(n))r=n;else if(n&&typeof n=="object"){let l={};r=e.map(c=>{const u=c.localName;return se(u,"cannot encode object for signature with missing names","INVALID_ARGUMENT",{argument:"values",info:{coder:c},value:n}),se(!l[u],"cannot encode object for signature with duplicate names","INVALID_ARGUMENT",{argument:"values",info:{coder:c},value:n}),l[u]=!0,n[u]})}else G(!1,"invalid tuple value","tuple",n);G(e.length===r.length,"types/value length mismatch","tuple",n);let i=new xv,s=new xv,o=[];e.forEach((l,c)=>{let u=r[c];if(l.dynamic){let d=s.length;l.encode(s,u);let f=i.writeUpdatableValue();o.push(h=>{f(h+d)})}else l.encode(i,u)}),o.forEach(l=>{l(i.length)});let a=t.appendWriter(i);return a+=t.appendWriter(s),a}function n3(t,e){let n=[],r=[],i=t.subReader(0);return e.forEach(s=>{let o=null;if(s.dynamic){let a=t.readIndex(),l=i.subReader(a);try{o=s.decode(l)}catch(c){if(Vt(c,"BUFFER_OVERRUN"))throw c;o=c,o.baseType=s.name,o.name=s.localName,o.type=s.type}}else try{o=s.decode(t)}catch(a){if(Vt(a,"BUFFER_OVERRUN"))throw a;o=a,o.baseType=s.name,o.name=s.localName,o.type=s.type}if(o==null)throw new Error("investigate");n.push(o),r.push(s.localName||null)}),au.fromItems(n,r)}class nM extends Ts{constructor(n,r,i){const s=n.type+"["+(r>=0?r:"")+"]",o=r===-1||n.dynamic;super("array",s,i,o);Q(this,"coder");Q(this,"length");Ce(this,{coder:n,length:r})}defaultValue(){const n=this.coder.defaultValue(),r=[];for(let i=0;i<this.length;i++)r.push(n);return r}encode(n,r){const i=cn.dereference(r,"array");Array.isArray(i)||this._throwError("expected array value",i);let s=this.length;s===-1&&(s=i.length,n.writeValue(i.length)),u_(i.length,s,"coder array"+(this.localName?" "+this.localName:""));let o=[];for(let a=0;a<i.length;a++)o.push(this.coder);return t3(n,o,i)}decode(n){let r=this.length;r===-1&&(r=n.readIndex(),se(r*wn<=n.dataLength,"insufficient data length","BUFFER_OVERRUN",{buffer:n.bytes,offset:r*wn,length:n.dataLength}));let i=[];for(let s=0;s<r;s++)i.push(new tM(this.coder));return n3(n,i)}}class rM extends Ts{constructor(e){super("bool","bool",e,!1)}defaultValue(){return!1}encode(e,n){const r=cn.dereference(n,"bool");return e.writeValue(r?1:0)}decode(e){return!!e.readValue()}}class r3 extends Ts{constructor(e,n){super(e,e,n,!0)}defaultValue(){return"0x"}encode(e,n){n=vn(n);let r=e.writeValue(n.length);return r+=e.writeBytes(n),r}decode(e){return e.readBytes(e.readIndex(),!0)}}class iM extends r3{constructor(e){super("bytes",e)}decode(e){return fe(super.decode(e))}}class sM extends Ts{constructor(n,r){let i="bytes"+String(n);super(i,i,r,!1);Q(this,"size");Ce(this,{size:n},{size:"number"})}defaultValue(){return"0x0000000000000000000000000000000000000000000000000000000000000000".substring(0,2+this.size*2)}encode(n,r){let i=vn(cn.dereference(r,this.type));return i.length!==this.size&&this._throwError("incorrect data length",r),n.writeBytes(i)}decode(n){return fe(n.readBytes(this.size))}}const oM=new Uint8Array([]);class aM extends Ts{constructor(e){super("null","",e,!1)}defaultValue(){return null}encode(e,n){return n!=null&&this._throwError("not null",n),e.writeBytes(oM)}decode(e){return e.readBytes(0),null}}const lM=BigInt(0),cM=BigInt(1),uM=BigInt("0xffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffff");class dM extends Ts{constructor(n,r,i){const s=(r?"int":"uint")+n*8;super(s,s,i,!1);Q(this,"size");Q(this,"signed");Ce(this,{size:n,signed:r},{size:"number",signed:"boolean"})}defaultValue(){return 0}encode(n,r){let i=we(cn.dereference(r,this.type)),s=ma(uM,wn*8);if(this.signed){let o=ma(s,this.size*8-1);(i>o||i<-(o+cM))&&this._throwError("value out-of-bounds",r),i=h_(i,8*wn)}else(i<lM||i>ma(s,this.size*8))&&this._throwError("value out-of-bounds",r);return n.writeValue(i)}decode(n){let r=ma(n.readValue(),this.size*8);return this.signed&&(r=t0(r,this.size*8)),r}}class fM extends r3{constructor(e){super("string",e)}defaultValue(){return""}encode(e,n){return super.encode(e,vs(cn.dereference(n,"string")))}decode(e){return n0(super.decode(e))}}class hh extends Ts{constructor(n,r){let i=!1;const s=[];n.forEach(a=>{a.dynamic&&(i=!0),s.push(a.type)});const o="tuple("+s.join(",")+")";super("tuple",o,r,i);Q(this,"coders");Ce(this,{coders:Object.freeze(n.slice())})}defaultValue(){const n=[];this.coders.forEach(i=>{n.push(i.defaultValue())});const r=this.coders.reduce((i,s)=>{const o=s.localName;return o&&(i[o]||(i[o]=0),i[o]++),i},{});return this.coders.forEach((i,s)=>{let o=i.localName;!o||r[o]!==1||(o==="length"&&(o="_length"),n[o]==null&&(n[o]=n[s]))}),Object.freeze(n)}encode(n,r){const i=cn.dereference(r,"tuple");return t3(n,this.coders,i)}decode(n){return n3(n,this.coders)}}function Sm(t,e){return{address:Qe(t),storageKeys:e.map((n,r)=>(G(nt(n,32),"invalid slot",`storageKeys[${r}]`,n),n.toLowerCase()))}}function cl(t){if(Array.isArray(t))return t.map((n,r)=>Array.isArray(n)?(G(n.length===2,"invalid slot set",`value[${r}]`,n),Sm(n[0],n[1])):(G(n!=null&&typeof n=="object","invalid address-slot set","value",t),Sm(n.address,n.storageKeys)));G(t!=null&&typeof t=="object","invalid access list","value",t);const e=Object.keys(t).map(n=>{const r=t[n].reduce((i,s)=>(i[s]=!0,i),{});return Sm(n,Object.keys(r).sort())});return e.sort((n,r)=>n.address.localeCompare(r.address)),e}function i3(t){return{address:Qe(t.address),nonce:we(t.nonce!=null?t.nonce:0),chainId:we(t.chainId!=null?t.chainId:0),signature:Fn.from(t.signature)}}function hM(t){let e;return typeof t=="string"?e=zd.computePublicKey(t,!1):e=t.publicKey,Qe(St("0x"+e.substring(4)).substring(26))}function pM(t,e){return hM(zd.recoverPublicKey(t,e))}const Lt=BigInt(0),gM=BigInt(2),mM=BigInt(27),yM=BigInt(28),vM=BigInt(35),wM=BigInt("0xffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffff"),Cm=4096*32;function bM(t){return{blobToKzgCommitment:r=>{if("computeBlobProof"in t){if("blobToKzgCommitment"in t&&typeof t.blobToKzgCommitment=="function")return Ie(t.blobToKzgCommitment(fe(r)))}else if("blobToKzgCommitment"in t&&typeof t.blobToKzgCommitment=="function")return Ie(t.blobToKzgCommitment(r));if("blobToKZGCommitment"in t&&typeof t.blobToKZGCommitment=="function")return Ie(t.blobToKZGCommitment(fe(r)));G(!1,"unsupported KZG library","kzg",t)},computeBlobKzgProof:(r,i)=>{if("computeBlobProof"in t&&typeof t.computeBlobProof=="function")return Ie(t.computeBlobProof(fe(r),fe(i)));if("computeBlobKzgProof"in t&&typeof t.computeBlobKzgProof=="function")return t.computeBlobKzgProof(r,i);if("computeBlobKZGProof"in t&&typeof t.computeBlobKZGProof=="function")return Ie(t.computeBlobKZGProof(fe(r),fe(i)));G(!1,"unsupported KZG library","kzg",t)}}}function H2(t,e){let n=t.toString(16);for(;n.length<2;)n="0"+n;return n+=Au(e).substring(4),"0x"+n}function Su(t){return t==="0x"?null:Qe(t)}function vg(t,e){try{return cl(t)}catch(n){G(!1,n.message,e,t)}}function EM(t,e){try{if(!Array.isArray(t))throw new Error("authorizationList: invalid array");const n=[];for(let r=0;r<t.length;r++){const i=t[r];if(!Array.isArray(i))throw new Error(`authorization[${r}]: invalid array`);if(i.length!==6)throw new Error(`authorization[${r}]: wrong length`);if(!i[1])throw new Error(`authorization[${r}]: null address`);n.push({address:Su(i[1]),nonce:Ze(i[2],"nonce"),chainId:Ze(i[0],"chainId"),signature:Fn.from({yParity:ul(i[3],"yParity"),r:xs(i[4],32),s:xs(i[5],32)})})}return n}catch(n){G(!1,n.message,e,t)}}function ul(t,e){return t==="0x"?0:_e(t,e)}function Ze(t,e){if(t==="0x")return Lt;const n=we(t,e);return G(n<=wM,"value exceeds uint size",e,n),n}function $e(t,e){const n=we(t,"value"),r=Pt(n);return G(r.length<=32,"value too large",`tx.${e}`,n),r}function wg(t){return cl(t).map(e=>[e.address,e.storageKeys])}function AM(t){return t.map(e=>[$e(e.chainId,"chainId"),e.address,$e(e.nonce,"nonce"),$e(e.signature.yParity,"yParity"),Pt(e.signature.r),Pt(e.signature.s)])}function SM(t,e){G(Array.isArray(t),`invalid ${e}`,"value",t);for(let n=0;n<t.length;n++)G(nt(t[n],32),"invalid ${ param } hash",`value[${n}]`,t[n]);return t}function CM(t){const e=Nf(t);G(Array.isArray(e)&&(e.length===9||e.length===6),"invalid field count for legacy transaction","data",t);const n={type:0,nonce:ul(e[0],"nonce"),gasPrice:Ze(e[1],"gasPrice"),gasLimit:Ze(e[2],"gasLimit"),to:Su(e[3]),value:Ze(e[4],"value"),data:fe(e[5]),chainId:Lt};if(e.length===6)return n;const r=Ze(e[6],"v"),i=Ze(e[7],"r"),s=Ze(e[8],"s");if(i===Lt&&s===Lt)n.chainId=r;else{let o=(r-vM)/gM;o<Lt&&(o=Lt),n.chainId=o,G(o!==Lt||r===mM||r===yM,"non-canonical legacy v","v",e[6]),n.signature=Fn.from({r:xs(e[7],32),s:xs(e[8],32),v:r})}return n}function xM(t,e){const n=[$e(t.nonce,"nonce"),$e(t.gasPrice||0,"gasPrice"),$e(t.gasLimit,"gasLimit"),t.to||"0x",$e(t.value,"value"),t.data];let r=Lt;if(t.chainId!=Lt)r=we(t.chainId,"tx.chainId"),G(!e||e.networkV==null||e.legacyChainId===r,"tx.chainId/sig.v mismatch","sig",e);else if(t.signature){const s=t.signature.legacyChainId;s!=null&&(r=s)}if(!e)return r!==Lt&&(n.push(Pt(r)),n.push("0x"),n.push("0x")),Ko(n);let i=BigInt(27+e.yParity);return r!==Lt?i=Fn.getChainIdV(r,e.v):BigInt(e.v)!==i&&G(!1,"tx.chainId/sig.v mismatch","sig",e),n.push(Pt(i)),n.push(Pt(e.r)),n.push(Pt(e.s)),Ko(n)}function bg(t,e){let n;try{if(n=ul(e[0],"yParity"),n!==0&&n!==1)throw new Error("bad yParity")}catch{G(!1,"invalid yParity","yParity",e[0])}const r=xs(e[1],32),i=xs(e[2],32),s=Fn.from({r,s:i,yParity:n});t.signature=s}function kM(t){const e=Nf(Ie(t).slice(1));G(Array.isArray(e)&&(e.length===9||e.length===12),"invalid field count for transaction type: 2","data",fe(t));const n={type:2,chainId:Ze(e[0],"chainId"),nonce:ul(e[1],"nonce"),maxPriorityFeePerGas:Ze(e[2],"maxPriorityFeePerGas"),maxFeePerGas:Ze(e[3],"maxFeePerGas"),gasPrice:null,gasLimit:Ze(e[4],"gasLimit"),to:Su(e[5]),value:Ze(e[6],"value"),data:fe(e[7]),accessList:vg(e[8],"accessList")};return e.length===9||bg(n,e.slice(9)),n}function _M(t,e){const n=[$e(t.chainId,"chainId"),$e(t.nonce,"nonce"),$e(t.maxPriorityFeePerGas||0,"maxPriorityFeePerGas"),$e(t.maxFeePerGas||0,"maxFeePerGas"),$e(t.gasLimit,"gasLimit"),t.to||"0x",$e(t.value,"value"),t.data,wg(t.accessList||[])];return e&&(n.push($e(e.yParity,"yParity")),n.push(Pt(e.r)),n.push(Pt(e.s))),mt(["0x02",Ko(n)])}function PM(t){const e=Nf(Ie(t).slice(1));G(Array.isArray(e)&&(e.length===8||e.length===11),"invalid field count for transaction type: 1","data",fe(t));const n={type:1,chainId:Ze(e[0],"chainId"),nonce:ul(e[1],"nonce"),gasPrice:Ze(e[2],"gasPrice"),gasLimit:Ze(e[3],"gasLimit"),to:Su(e[4]),value:Ze(e[5],"value"),data:fe(e[6]),accessList:vg(e[7],"accessList")};return e.length===8||bg(n,e.slice(8)),n}function TM(t,e){const n=[$e(t.chainId,"chainId"),$e(t.nonce,"nonce"),$e(t.gasPrice||0,"gasPrice"),$e(t.gasLimit,"gasLimit"),t.to||"0x",$e(t.value,"value"),t.data,wg(t.accessList||[])];return e&&(n.push($e(e.yParity,"recoveryParam")),n.push(Pt(e.r)),n.push(Pt(e.s))),mt(["0x01",Ko(n)])}function RM(t){let e=Nf(Ie(t).slice(1)),n="3",r=null;if(e.length===4&&Array.isArray(e[0])){n="3 (network format)";const s=e[1],o=e[2],a=e[3];G(Array.isArray(s),"invalid network format: blobs not an array","fields[1]",s),G(Array.isArray(o),"invalid network format: commitments not an array","fields[2]",o),G(Array.isArray(a),"invalid network format: proofs not an array","fields[3]",a),G(s.length===o.length,"invalid network format: blobs/commitments length mismatch","fields",e),G(s.length===a.length,"invalid network format: blobs/proofs length mismatch","fields",e),r=[];for(let l=0;l<e[1].length;l++)r.push({data:s[l],commitment:o[l],proof:a[l]});e=e[0]}G(Array.isArray(e)&&(e.length===11||e.length===14),`invalid field count for transaction type: ${n}`,"data",fe(t));const i={type:3,chainId:Ze(e[0],"chainId"),nonce:ul(e[1],"nonce"),maxPriorityFeePerGas:Ze(e[2],"maxPriorityFeePerGas"),maxFeePerGas:Ze(e[3],"maxFeePerGas"),gasPrice:null,gasLimit:Ze(e[4],"gasLimit"),to:Su(e[5]),value:Ze(e[6],"value"),data:fe(e[7]),accessList:vg(e[8],"accessList"),maxFeePerBlobGas:Ze(e[9],"maxFeePerBlobGas"),blobVersionedHashes:e[10]};r&&(i.blobs=r),G(i.to!=null,`invalid address for transaction type: ${n}`,"data",t),G(Array.isArray(i.blobVersionedHashes),"invalid blobVersionedHashes: must be an array","data",t);for(let s=0;s<i.blobVersionedHashes.length;s++)G(nt(i.blobVersionedHashes[s],32),`invalid blobVersionedHash at index ${s}: must be length 32`,"data",t);return e.length===11||bg(i,e.slice(11)),i}function IM(t,e,n){const r=[$e(t.chainId,"chainId"),$e(t.nonce,"nonce"),$e(t.maxPriorityFeePerGas||0,"maxPriorityFeePerGas"),$e(t.maxFeePerGas||0,"maxFeePerGas"),$e(t.gasLimit,"gasLimit"),t.to||Kd,$e(t.value,"value"),t.data,wg(t.accessList||[]),$e(t.maxFeePerBlobGas||0,"maxFeePerBlobGas"),SM(t.blobVersionedHashes||[],"blobVersionedHashes")];return e&&(r.push($e(e.yParity,"yParity")),r.push(Pt(e.r)),r.push(Pt(e.s)),n)?mt(["0x03",Ko([r,n.map(i=>i.data),n.map(i=>i.commitment),n.map(i=>i.proof)])]):mt(["0x03",Ko(r)])}function OM(t){const e=Nf(Ie(t).slice(1));G(Array.isArray(e)&&(e.length===10||e.length===13),"invalid field count for transaction type: 4","data",fe(t));const n={type:4,chainId:Ze(e[0],"chainId"),nonce:ul(e[1],"nonce"),maxPriorityFeePerGas:Ze(e[2],"maxPriorityFeePerGas"),maxFeePerGas:Ze(e[3],"maxFeePerGas"),gasPrice:null,gasLimit:Ze(e[4],"gasLimit"),to:Su(e[5]),value:Ze(e[6],"value"),data:fe(e[7]),accessList:vg(e[8],"accessList"),authorizationList:EM(e[9],"authorizationList")};return e.length===10||bg(n,e.slice(10)),n}function NM(t,e){const n=[$e(t.chainId,"chainId"),$e(t.nonce,"nonce"),$e(t.maxPriorityFeePerGas||0,"maxPriorityFeePerGas"),$e(t.maxFeePerGas||0,"maxFeePerGas"),$e(t.gasLimit,"gasLimit"),t.to||"0x",$e(t.value,"value"),t.data,wg(t.accessList||[]),AM(t.authorizationList||[])];return e&&(n.push($e(e.yParity,"yParity")),n.push(Pt(e.r)),n.push(Pt(e.s))),mt(["0x04",Ko(n)])}var Hr,Cc,xc,kc,_c,Pc,Tc,Rc,Ic,Oc,Nc,Mc,La,lo,pi,co,Lc,Bc,np;const di=class di{constructor(){Z(this,Bc);Z(this,Hr);Z(this,Cc);Z(this,xc);Z(this,kc);Z(this,_c);Z(this,Pc);Z(this,Tc);Z(this,Rc);Z(this,Ic);Z(this,Oc);Z(this,Nc);Z(this,Mc);Z(this,La);Z(this,lo);Z(this,pi);Z(this,co);Z(this,Lc);H(this,Hr,null),H(this,Cc,null),H(this,kc,0),H(this,_c,Lt),H(this,Pc,null),H(this,Tc,null),H(this,Rc,null),H(this,xc,"0x"),H(this,Ic,Lt),H(this,Oc,Lt),H(this,Nc,null),H(this,Mc,null),H(this,La,null),H(this,lo,null),H(this,pi,null),H(this,co,null),H(this,Lc,null)}get type(){return k(this,Hr)}set type(e){switch(e){case null:H(this,Hr,null);break;case 0:case"legacy":H(this,Hr,0);break;case 1:case"berlin":case"eip-2930":H(this,Hr,1);break;case 2:case"london":case"eip-1559":H(this,Hr,2);break;case 3:case"cancun":case"eip-4844":H(this,Hr,3);break;case 4:case"pectra":case"eip-7702":H(this,Hr,4);break;default:G(!1,"unsupported transaction type","type",e)}}get typeName(){switch(this.type){case 0:return"legacy";case 1:return"eip-2930";case 2:return"eip-1559";case 3:return"eip-4844";case 4:return"eip-7702"}return null}get to(){const e=k(this,Cc);return e==null&&this.type===3?Kd:e}set to(e){H(this,Cc,e==null?null:Qe(e))}get nonce(){return k(this,kc)}set nonce(e){H(this,kc,_e(e,"value"))}get gasLimit(){return k(this,_c)}set gasLimit(e){H(this,_c,we(e))}get gasPrice(){const e=k(this,Pc);return e==null&&(this.type===0||this.type===1)?Lt:e}set gasPrice(e){H(this,Pc,e==null?null:we(e,"gasPrice"))}get maxPriorityFeePerGas(){const e=k(this,Tc);return e??(this.type===2||this.type===3?Lt:null)}set maxPriorityFeePerGas(e){H(this,Tc,e==null?null:we(e,"maxPriorityFeePerGas"))}get maxFeePerGas(){const e=k(this,Rc);return e??(this.type===2||this.type===3?Lt:null)}set maxFeePerGas(e){H(this,Rc,e==null?null:we(e,"maxFeePerGas"))}get data(){return k(this,xc)}set data(e){H(this,xc,fe(e))}get value(){return k(this,Ic)}set value(e){H(this,Ic,we(e,"value"))}get chainId(){return k(this,Oc)}set chainId(e){H(this,Oc,we(e))}get signature(){return k(this,Nc)||null}set signature(e){H(this,Nc,e==null?null:Fn.from(e))}get accessList(){const e=k(this,Mc)||null;return e??(this.type===1||this.type===2||this.type===3?[]:null)}set accessList(e){H(this,Mc,e==null?null:cl(e))}get authorizationList(){const e=k(this,Lc)||null;return e==null&&this.type===4?[]:e}set authorizationList(e){H(this,Lc,e==null?null:e.map(n=>i3(n)))}get maxFeePerBlobGas(){const e=k(this,La);return e==null&&this.type===3?Lt:e}set maxFeePerBlobGas(e){H(this,La,e==null?null:we(e,"maxFeePerBlobGas"))}get blobVersionedHashes(){let e=k(this,lo);return e==null&&this.type===3?[]:e}set blobVersionedHashes(e){if(e!=null){G(Array.isArray(e),"blobVersionedHashes must be an Array","value",e),e=e.slice();for(let n=0;n<e.length;n++)G(nt(e[n],32),"invalid blobVersionedHash",`value[${n}]`,e[n])}H(this,lo,e)}get blobs(){return k(this,co)==null?null:k(this,co).map(e=>Object.assign({},e))}set blobs(e){if(e==null){H(this,co,null);return}const n=[],r=[];for(let i=0;i<e.length;i++){const s=e[i];if(U1(s)){se(k(this,pi),"adding a raw blob requires a KZG library","UNSUPPORTED_OPERATION",{operation:"set blobs()"});let o=Ie(s);if(G(o.length<=Cm,"blob is too large",`blobs[${i}]`,s),o.length!==Cm){const c=new Uint8Array(Cm);c.set(o),o=c}const a=k(this,pi).blobToKzgCommitment(o),l=fe(k(this,pi).computeBlobKzgProof(o,a));n.push({data:fe(o),commitment:fe(a),proof:l}),r.push(H2(1,a))}else{const o=fe(s.commitment);n.push({data:fe(s.data),commitment:o,proof:fe(s.proof)}),r.push(H2(1,o))}}H(this,co,n),H(this,lo,r)}get kzg(){return k(this,pi)}set kzg(e){e==null?H(this,pi,null):H(this,pi,bM(e))}get hash(){return this.signature==null?null:St(ce(this,Bc,np).call(this,!0,!1))}get unsignedHash(){return St(this.unsignedSerialized)}get from(){return this.signature==null?null:pM(this.unsignedHash,this.signature)}get fromPublicKey(){return this.signature==null?null:zd.recoverPublicKey(this.unsignedHash,this.signature)}isSigned(){return this.signature!=null}get serialized(){return ce(this,Bc,np).call(this,!0,!0)}get unsignedSerialized(){return ce(this,Bc,np).call(this,!1,!1)}inferType(){const e=this.inferTypes();return e.indexOf(2)>=0?2:e.pop()}inferTypes(){const e=this.gasPrice!=null,n=this.maxFeePerGas!=null||this.maxPriorityFeePerGas!=null,r=this.accessList!=null,i=k(this,La)!=null||k(this,lo);this.maxFeePerGas!=null&&this.maxPriorityFeePerGas!=null&&se(this.maxFeePerGas>=this.maxPriorityFeePerGas,"priorityFee cannot be more than maxFee","BAD_DATA",{value:this}),se(!n||this.type!==0&&this.type!==1,"transaction type cannot have maxFeePerGas or maxPriorityFeePerGas","BAD_DATA",{value:this}),se(this.type!==0||!r,"legacy transaction cannot have accessList","BAD_DATA",{value:this});const s=[];return this.type!=null?s.push(this.type):this.authorizationList&&this.authorizationList.length?s.push(4):n?s.push(2):e?(s.push(1),r||s.push(0)):r?(s.push(1),s.push(2)):(i&&this.to||(s.push(0),s.push(1),s.push(2)),s.push(3)),s.sort(),s}isLegacy(){return this.type===0}isBerlin(){return this.type===1}isLondon(){return this.type===2}isCancun(){return this.type===3}clone(){return di.from(this)}toJSON(){const e=n=>n==null?null:n.toString();return{type:this.type,to:this.to,data:this.data,nonce:this.nonce,gasLimit:e(this.gasLimit),gasPrice:e(this.gasPrice),maxPriorityFeePerGas:e(this.maxPriorityFeePerGas),maxFeePerGas:e(this.maxFeePerGas),value:e(this.value),chainId:e(this.chainId),sig:this.signature?this.signature.toJSON():null,accessList:this.accessList}}static from(e){if(e==null)return new di;if(typeof e=="string"){const r=Ie(e);if(r[0]>=127)return di.from(CM(r));switch(r[0]){case 1:return di.from(PM(r));case 2:return di.from(kM(r));case 3:return di.from(RM(r));case 4:return di.from(OM(r))}se(!1,"unsupported transaction type","UNSUPPORTED_OPERATION",{operation:"from"})}const n=new di;return e.type!=null&&(n.type=e.type),e.to!=null&&(n.to=e.to),e.nonce!=null&&(n.nonce=e.nonce),e.gasLimit!=null&&(n.gasLimit=e.gasLimit),e.gasPrice!=null&&(n.gasPrice=e.gasPrice),e.maxPriorityFeePerGas!=null&&(n.maxPriorityFeePerGas=e.maxPriorityFeePerGas),e.maxFeePerGas!=null&&(n.maxFeePerGas=e.maxFeePerGas),e.maxFeePerBlobGas!=null&&(n.maxFeePerBlobGas=e.maxFeePerBlobGas),e.data!=null&&(n.data=e.data),e.value!=null&&(n.value=e.value),e.chainId!=null&&(n.chainId=e.chainId),e.signature!=null&&(n.signature=Fn.from(e.signature)),e.accessList!=null&&(n.accessList=e.accessList),e.authorizationList!=null&&(n.authorizationList=e.authorizationList),e.blobVersionedHashes!=null&&(n.blobVersionedHashes=e.blobVersionedHashes),e.kzg!=null&&(n.kzg=e.kzg),e.blobs!=null&&(n.blobs=e.blobs),e.hash!=null&&(G(n.isSigned(),"unsigned transaction cannot define '.hash'","tx",e),G(n.hash===e.hash,"hash mismatch","tx",e)),e.from!=null&&(G(n.isSigned(),"unsigned transaction cannot define '.from'","tx",e),G(n.from.toLowerCase()===(e.from||"").toLowerCase(),"from mismatch","tx",e)),n}};Hr=new WeakMap,Cc=new WeakMap,xc=new WeakMap,kc=new WeakMap,_c=new WeakMap,Pc=new WeakMap,Tc=new WeakMap,Rc=new WeakMap,Ic=new WeakMap,Oc=new WeakMap,Nc=new WeakMap,Mc=new WeakMap,La=new WeakMap,lo=new WeakMap,pi=new WeakMap,co=new WeakMap,Lc=new WeakMap,Bc=new WeakSet,np=function(e,n){se(!e||this.signature!=null,"cannot serialize unsigned transaction; maybe you meant .unsignedSerialized","UNSUPPORTED_OPERATION",{operation:".serialized"});const r=e?this.signature:null;switch(this.inferType()){case 0:return xM(this,r);case 1:return TM(this,r);case 2:return _M(this,r);case 3:return IM(this,r,n?this.blobs:null);case 4:return NM(this,r)}se(!1,"unsupported transaction type","UNSUPPORTED_OPERATION",{operation:".serialized"})};let s0=di;function el(t){return St(vs(t))}var MM="AEEUdwmgDS8BxQKKAP4BOgDjATAAngDUAIMAoABoAOAAagCOAEQAhABMAHIAOwA9ACsANgAmAGIAHgAuACgAJwAXAC0AGgAjAB8ALwAUACkAEgAeAAkAGwARABkAFgA5ACgALQArADcAFQApABAAHgAiABAAGgAeABMAGAUhBe8BFxREN8sF2wC5AK5HAW8ArQkDzQCuhzc3NzcBP68NEfMABQdHBuw5BV8FYAA9MzkI9r4ZBg7QyQAWA9CeOwLNCjcCjqkChuA/lm+RAsXTAoP6ASfnEQDytQFJAjWVCkeXAOsA6godAB/cwdAUE0WlBCN/AQUCQRjFD/MRBjHxDQSJbw0jBzUAswBxme+tnIcAYwabAysG8QAjAEMMmxcDqgPKQyDXCMMxA7kUQwD3NXOrAKmFIAAfBC0D3x4BJQDBGdUFAhEgVD8JnwmQJiNWYUzrg0oAGwAUAB0AFnNcACkAFgBP9h3gPfsDOWDKneY2ChglX1UDYD30ABsAFAAdABZzIGRAnwDD8wAjAEEMzRbDqgMB2sAFYwXqAtCnAsS4AwpUJKRtFHsadUz9AMMVbwLpABM1NJEX0ZkCgYMBEyMAxRVvAukAEzUBUFAtmUwSAy4DBTER33EftQHfSwB5MxJ/AjkWKQLzL8E/cwBB6QH9LQDPDtO9ASNriQC5DQANAwCK21EFI91zHwCoL9kBqQcHBwcHKzUDowBvAQohPvU3fAQgHwCyAc8CKQMA5zMSezr7ULgFmDp/LzVQBgEGAi8FYQVgt8AFcTtlQhpCWEmfe5tmZ6IAExsDzQ8t+X8rBKtTAltbAn0jsy8Bl6utPWMDTR8Ei2kRANkDBrNHNysDBzECQWUAcwFpJ3kAiyUhAJ0BUb8AL3EfAbfNAz81KUsFWwF3YQZtAm0A+VEfAzEJDQBRSQCzAQBlAHsAM70GD/v3IZWHBwARKQAxALsjTwHZAeMPEzmXgIHwABIAGQA8AEUAQDt3gdvIEGcQZAkGTRFMdEIVEwK0D64L7REdDNkq09PgADSxB/MDWwfzA1sDWwfzB/MDWwfzA1sDWwNbA1scEvAi28gQZw9QBHUFlgWTBN4IiyZREYkHMAjaVBV0JhxPA00BBCMtSSQ7mzMTJUpMFE0LCAQ2SmyvfUADTzGzVP2QqgPTMlc5dAkGHnkSqAAyD3skNb1OhnpPcagKU0+2tYdJak5vAsY6sEAACikJm2/Dd1YGRRAfJ6kQ+ww3AbkBPw3xS9wE9QY/BM0fgRkdD9GVoAipLeEM8SbnLqWAXiP5KocF8Uv4POELUVFsD10LaQnnOmeBUgMlAREijwrhDT0IcRD3Cs1vDekRSQc9A9lJngCpBwULFR05FbkmFGKwCw05ewb/GvoLkyazEy17AAXXGiUGUQEtGwMA0y7rhbRaNVwgT2MGBwspI8sUrFAkDSlAu3hMGh8HGSWtApVDdEqLUToelyH6PEENai4XUYAH+TwJGVMLhTyiRq9FEhHWPpE9TCJNTDAEOYMsMyePCdMPiQy9fHYBXQklCbUMdRM1ERs3yQg9Bx0xlygnGQglRplgngT7owP3E9UDDwVDCUUHFwO5HDETMhUtBRGBKNsC9zbZLrcCk1aEARsFzw8pH+MQVEfkDu0InwJpA4cl7wAxFSUAGyKfCEdnAGOP3FMJLs8Iy2pwI3gDaxTrZRF3B5UOWwerHDcVwxzlcMxeD4YMKKezCV8BeQmdAWME5wgNNV+MpCBFZ1eLXBifIGVBQ14AAjUMaRWjRMGHfAKPD28SHwE5AXcHPQ0FAnsR8RFvEJkI74YINbkz/DopBFMhhyAVCisDU2zSCysm/Qz8bQGnEmYDEDRBd/Jnr2C6KBgBBx0yyUFkIfULlk/RDKAaxRhGVDIZ6AfDA/ca9yfuQVsGAwOnBxc6UTPyBMELbQiPCUMATQ6nGwfbGG4KdYzUATWPAbudA1uVhwJzkwY7Bw8Aaw+LBX3pACECqwinAAkA0wNbAD0CsQehAB0AiUUBQQMrMwEl6QKTA5cINc8BmTMB9y0EH8cMGQD7O25OAsO1AoBuZqYF4VwCkgJNOQFRKQQJUktVA7N15QDfAE8GF+NLARmvTs8e50cB43MvAMsA/wAJOQcJRQHRAfdxALsBYws1Caa3uQFR7S0AhwAZbwHbAo0A4QA5AIP1AVcAUQVd/QXXAlNNARU1HC9bZQG/AyMBNwERAH0Gz5GpzQsjBHEH1wIQHxXlAu8yB7kFAyLjE9FCyQK94lkAMhoKPAqrCqpgX2Q3CjV2PVQAEh+sPss/UgVVO1c7XDtXO1w7VztcO1c7XDtXO1wDm8Pmw+YKcF9JYe8Mqg3YRMw6TRPfYFVgNhPMLbsUxRXSJVoZQRrAJwkl6FUNDwgt12Y0CDA0eRfAAEMpbINFY4oeNApPHOtTlVT8LR8AtUumM7MNsBsZREQFS3XxYi4WEgomAmSFAmJGX1GzAV83JAKh+wJonAJmDQKfiDgfDwJmPwJmKgRyBIMDfxcDfpY5Cjl7GzmGOicnAmwhAjI6OA4CbcsCbbLzjgM3a0kvAWsA4gDlAE4JB5wMkQECD8YAEbkCdzMCdqZDAnlPRwJ4viFg30WyRvcCfEMCeswCfQ0CfPRIBEiBZygALxlJXEpfGRtK0ALRBQLQ0EsrA4hTA4fqRMmRNgLypV0HAwOyS9JMMSkH001QTbMCi0MCitzFHwshR2sJuwKOOwKOYESbhQKO3QKOYHxRuFM5AQ5S2FSJApP/ApMQAO0AIFUiVbNV1AosHymZijLleGpFPz0Cl6MC77ZYJawAXSkClpMCloCgAK1ZsFoNhVEAPwKWuQKWUlxIXNUCmc8CmWhczl0LHQKcnznGOqECnBoCn58CnryOACETNS4TAp31Ap6WALlBYThh8wKe1wKgcgGtAp6jIwKeUqljzGQrKS8CJ7MCJoICoP8CoFDbAqYzAqXSAqgDAIECp/ZogGi1AAdNaiBq1QKs5wKssgKtawKtBgJXIQJV4AKx5dsDH1JsmwKywRECsuwbbORtZ21MYwMl0QK2YD9DbpQDKUkCuGICuUsZArkue3A6cOUCvR0DLbYDMhUCvoxyBgMzdQK+HnMmc1MCw88CwwhzhnRPOUl05AM8qwEDPJ4DPcMCxYACxksCxhSNAshtVQLISALJUwLJMgJkoQLd1nh9ZXiyeSlL1AMYp2cGAmH4GfeVKHsPXpZevxUCz28Cz3AzT1fW9xejAMqxAs93AS3uA04Wfk8JAtwrAtuOAtJTA1JgA1NjAQUDVZCAjUMEzxrxZEl5A4LSg5EC2ssC2eKEFIRNp0ADhqkAMwNkEoZ1Xf0AWQLfaQLevHd7AuIz7RgB8zQrAfSfAfLWiwLr9wLpdH0DAur9AuroAP1LAb0C7o0C66CWrpcHAu5DA4XkmH1w5HGlAvMHAG0DjhqZlwL3FwORcgOSiwL3nAL53QL4apogmq+/O5siA52HAv7+AR8APZ8gAZ+3AwWRA6ZuA6bdANXJAwZuoYyiCQ0DDE0BEwEjB3EGZb1rCQC/BG/DFY8etxEAG3k9ACcDNxJRA42DAWcrJQCM8wAlAOanC6OVCLsGI6fJBgCvBRnDBvElRUYFFoAFcD9GSDNCKUK8X3kZX8QAls0FOgCQVCGbwTsuYDoZutcONxjOGJHJ/gVfBWAFXwVgBWsFYAVfBWAFXwVgBV8FYAVfBWBOHQjfjW8KCgoKbF7xMwTRA7kGN8PDAMMEr8MA70gxFroFTj5xPnhCR0K+X30/X/AAWBkzswCNBsxzzASm70aCRS4rDDMeLz49fnXfcsH5GcoscQFz13Y4HwVnBXLJycnACNdRYwgICAqEXoWTxgA7P4kACxbZBu21Kw0AjMsTAwkVAOVtJUUsJ1JCuULESUArXy9gPi9AKwnJRQYKTD9LPoA+iT54PnkCkULEUUpDX9NWV3JVEjQAc1w3A3IBE3YnX+g7QiMJb6MKaiszRCUuQrNCxDPMCcwEX9EWJzYREBEEBwIHKn6l33JCNVIfybPJtAltydPUCmhBZw/tEKsZAJOVJU1CLRuxbUHOQAo7P0s+eEJHHA8SJVRPdGM0NVrpvBoKhfUlM0JHHGUQUhEWO1xLSj8MO0ucNAqJIzVCRxv9EFsqKyA4OQgNj2nwZgp5ZNFgE2A1K3YHS2AhQQojJmC7DgpzGG1WYFUZCQYHZO9gHWCdYIVgu2BTYJlwFh8GvRbcXbG8YgtDHrMBwzPVyQonHQgkCyYBgQJ0Ajc4nVqIAwGSCsBPIgDsK3SWEtIVBa5N8gGjAo+kVwVIZwD/AEUSCDweX4ITrRQsJ8K3TwBXFDwEAB0TvzVcAtoTS20RIwDgVgZ9BBImYgA5AL4Coi8LFnezOkCnIQFjAY4KBAPh9RcGsgZSBsEAJctdsWIRu2kTkQstRw7DAcMBKgpPBGIGMDAwKCYnKTQaLg4AKRSVAFwCdl+YUZ0JdicFD3lPAdt1F9ZZKCGxuE3yBxkFVGcA/wBFEgiCBwAOLHQSjxOtQDg1z7deFRMAZ8QTAGtKb1ApIiPHADkAvgKiLy1DFtYCmBiDAlDDWNB0eo7fpaMO/aEVRRv0ATEQZBIODyMEAc8JQhCbDRgzFD4TAEMAu9YBCgCsAOkAm5I3ABwAYxvONnR+MhXJAxgKQyxL2+kkJhMbhQKDBMkSsvF0AD9BNQ6uQC7WqSQHwxEAEEIu1hkhAH2z4iQPwyJPHNWpdyYBRSpnJALzoBAEVPPsH20MxA0CCEQKRgAFyAtFAlMNwwjEDUQJRArELtapMg7DDZgJIw+TGukEIwvDFkMAqAtDEMMMBhioe+QAO3MMRAACrgnEBSPY9Q0FDnbSBoMAB8MSYxkSxAEJAPIJAAB8FWMOFtMc/HcXwxhDAC7DAvOowwAewwJdKDKHAAHDAALrFUQVwwAbwyvzpWMWv8wA/ABpAy++bcYDUKPD0KhDCwKmJ1MAAmMA5+UZwxAagwipBRL/eADfw6fDGOMCGsOjk3l6BwOpo4sAEsMOGxMAA5sAbcMOAAvDp0MJGkMDwgipnNIPAwfIqUMGAOGDAAPzABXDAAcDAAnDAGmTABrDAA7DChjDjnEWAwABYwAOcwAuUyYABsMAF8MIKQANUgC6wy4AA8MADqMq8wCyYgAcIwAB8wqpAAXOCx0V4wAHowBCwwEKAGnDAAuDAB3DAAjDCakABdIAbqcZ3QCZCCkABdIAAAFDAAfjAB2jCCkABqIACYMAGzMAbSMA5sOIAAhjAAhDABTDBAkpAAbSAOOTAAlDC6kOzPtnAAdDAG6kQFAATwAKwwwAA0MACbUDPwAHIwAZgwACE6cDAAojAApDAAoDp/MGwwAJIwADEwAQQwgAFEMAEXMAD5MADfMADcMAGRMOFiMAFUMAbqMWuwHDAMIAE0MLAGkzEgDhUwACQwAEWgAXgwUjAAbYABjDBSYBgzBaAEFNALcQBxUMegAwMngBrA0IZgJ0KxQHBREPd1N0ZzKRJwaIHAZqNT4DqQq8BwngAB4DAwt2AX56T1ocKQNXAh1GATQGC3tOxYNagkgAMQA5CQADAQEAWxLjAIOYNAEzAH7tFRk6TglSAF8NAAlYAQ+S1ACAQwQorQBiAN4dAJ1wPyeTANVzuQDX3AIeEMp9eyMgXiUAEdkBkJizKltbVVAaRMqRAAEAhyQ/SDEz6BmfVwB6ATEsOClKIRcDOF0E/832AFNt5AByAnkCRxGCOs94NjXdAwINGBonDBwPALW2AwICAgAAAAAAAAYDBQMDARrUAwAtAAAAAgEGBgYGBgYFBQUFBQUEBQYHCAkEBQUFBQQAAAICAAAAIgCNAJAAlT0A6gC7ANwApEQAwgCyAK0AqADuAKYA2gCjAOcBCAEDAMcAgQBiANIA1AEDAN4A8gCQAKkBMQDqAN8A3AsBCQ8yO9ra2tq8xuLT1tRJOB0BUgFcNU0BWgFpAWgBWwFMUUlLbhMBUxsNEAs6PhMOACcUKy0vMj5AQENDQ0RFFEYGJFdXV1dZWVhZL1pbXVxcI2NnZ2ZoZypsbnZ1eHh4eHh4enp6enp6enp6enp8fH18e2IARPIASQCaAHgAMgBm+ACOAFcAVwA3AnbvAIsABfj4AGQAk/IAnwBPAGIAZP//sACFAIUAaQBWALEAJAC2AIMCQAJDAPwA5wD+AP4A6AD/AOkA6QDoAOYALwJ7AVEBQAE+AVQBPgE+AT4BOQE4ATgBOAEcAVgXADEQCAEAUx8SHgsdHhYAjgCWAKYAUQBqIAIxAHYAbwCXAxUDJzIDIUlGTzEAkQJPAMcCVwKkAMAClgKWApYClgKWApYCiwKWApYClgKWApYClgKVApUCmAKgApcClgKWApQClAKUApQCkgKVAnUB1AKXAp8ClgKWApUeAIETBQD+DQOfAmECOh8BVBg9AuIZEjMbAU4/G1WZAXusRAFpYQEFA0FPAQYAmTEeIJdyADFoAHEANgCRA5zMk/C2jGINwjMWygIZCaXdfDILBCs5dAE7YnQBugDlhoiHhoiGiYqKhouOjIaNkI6Ij4qQipGGkoaThpSSlYaWhpeKmIaZhpqGm4aci52QnoqfhuIC4XTpAt90AIp0LHSoAIsAdHQEQwRABEIERQRDBEkERgRBBEcESQRIBEQERgRJAJ5udACrA490ALxuAQ10ANFZdHQA13QCFHQA/mJ0AP4BIQD+APwA/AD9APwDhGZ03ASMK23HAP4A/AD8AP0A/CR0dACRYnQA/gCRASEA/gCRAvQA/gCRA4RmdNwEjCttxyR0AP9idAEhAP4A/gD8APwA/QD8AP8A/AD8AP0A/AOEZnTcBIwrbcckdHQAkWJ0ASEA/gCRAP4AkQL0AP4AkQOEZnTcBIwrbcckdAJLAT50AlIBQXQCU8l0dAJfdHQDpgL0A6YDpgOnA6cDpwOnA4RmdNwEjCttxyR0dACRYnQBIQOmAJEDpgCRAvQDpgCRA4RmdNwEjCttxyR0BDh0AJEEOQCRDpU5dSgCADR03gV2CwArdAEFAM5iCnR0AF1iAAYcOgp0dACRCnQAXAEIwWZ0CnRmdHQAkWZ0CnRmdEXgAFF03gp0dEY0tlT2u3SOAQTwscwhjZZKrhYcBSfFp9XNbKiVDOD2b+cpe4/Z17mQnbtzzhaeQtE2GGj0IDNTjRUSyTxxw/RPHW/+vS7d1NfRt9z9QPZg4X7QFfhCnkvgNPIItOsC2eV6hPannZNHlZ9xrwZXIMOlu3jSoQSq78WEjwLjw1ELSlF1aBvfzwk5ZX7AUvQzjPQKbDuQ+sm4wNOp4A6AdVuRS0t1y/DZpg4R6m7FNjM9HgvW7Bi88zaMjOo6lM8wtBBdj8LP4ylv3zCXPhebMKJc066o9sF71oFW/8JXu86HJbwDID5lzw5GWLR/LhT0Qqnp2JQxNZNfcbLIzPy+YypqRm/lBmGmex+82+PisxUumSeJkALIT6rJezxMH+CTJmQtt5uwTVbL3ptmjDUQzlSIvWi8Tl7ng1NpuRn1Ng4n14Qc+3Iil7OwkvNWogLSPkn3pihIFytyIGmMhOe3n1tWsuMy9BdKyqF4Z3v2SgggTL9KVvMXPnCbRe+oOuFFP3HejBG/w9gvmfNYvg6JuWia2lcSSN1uIjBktzoIazOHPJZ7kKHPz8mRWVdW3lA8WGF9dQF6Bm673boov3BUWDU2JNcahR23GtfHKLOz/viZ+rYnZFaIznXO67CYEJ1fXuTRpZhYZkKe54xeoagkNGLs+NTZHE0rX45/XvQ2RGADX6vcAvdxIUBV27wxGm2zjZo4X3ILgAlrOFheuZ6wtsvaIj4yLY7qqawlliaIcrz2G+c3vscAnCkCuMzMmZvMfu9lLwTvfX+3cVSyPdN9ZwgDZhfjRgNJcLiJ67b9xx8JHswprbiE3v9UphotAPIgnXVIN5KmMc0piXhc6cChPnN+MRhG9adtdttQTTwSIpl8I4/j//d3sz1326qTBTpPRM/Hgh3kzqEXs8ZAk4ErQhNO8hzrQ0DLkWMA/N+91tn2MdOJnWC2FCZehkQrwzwbKOjhvZsbM95QoeL9skYyMf4srVPVJSgg7pOLUtr/n9eT99oe9nLtFRpjA9okV2Kj8h9k5HaC0oivRD8VyXkJ81tcd4fHNXPCfloIQasxsuO18/46dR2jgul/UIet2G0kRvnyONMKhHs6J26FEoqSqd+rfYjeEGwHWVDpX1fh1jBBcKGMqRepju9Y00mDVHC+Xdij/j44rKfvfjGinNs1jO/0F3jB83XCDINN/HB84axlP+3E/klktRo+vl3U/aiyMJbIodE1XSsDn6UAzIoMtUObY2+k/4gY/l+AkZJ5Sj2vQrkyLm3FoxjhDX+31UXBFf9XrAH31fFqoBmDEZvhvvpnZ87N+oZEu7U9O/nnk+QWj3x8uyoRbEnf+O5UMr9i0nHP38IF5AvzrBW8YWBUR0mIAzIvndQq9N3v/Jto3aPjPXUPl8ASdPPyAp7jENf8bk7VMM9ol9XGmlBmeDMuGqt+WzuL6CXAxXjIhCPM5vACchgMJ/8XBGLO/D1isVvGhwwHHr1DLaI5mn2Jr/b1pUD90uciDaS8cXNDzCWvNmT/PhQe5e8nTnnnkt8Ds/SIjibcum/fqDhKopxAY8AkSrPn+IGDEKOO+U3XOP6djFs2H5N9+orhOahiQk5KnEUWa+CzkVzhp8bMHRbg81qhjjXuIKbHjSLSIBKWqockGtKinY+z4/RdBUF6pcc3JmnlxVcNgrI4SEzKUZSwcD2QCyxzKve+gAmg6ZuSRkpPFa6mfThu7LJNu3H5K42uCpNvPAsoedolKV/LHe/eJ+BbaG5MG0NaSGVPRUmNFMFFSSpXEcXwbVh7UETOZZtoVNRGOIbbkig3McEtR68cG0RZAoJevWYo7Dg/lZ1CQzblWeUvVHmr8fY4Nqd9JJiH/zEX24mJviH60fAyFr0A3c4bC1j3yZU60VgJxXn8JgJXLUIsiBnmKmMYz+7yBQFBvqb2eYnuW59joZBf56/wXvWIR4R8wTmV80i1mZy+S4+BUES+hzjk0uXpC///z/IlqHZ1monzlXp8aCfhGKMti73FI1KbL1q6IKO4fuBuZ59gagjn5xU79muMpHXg6S+e+gDM/U9BKLHbl9l6o8czQKl4RUkJJiqftQG2i3BMg/TQlUYFkJDYBOOvAugYuzYSDnZbDDd/aSd9x0Oe6F+bJcHfl9+gp6L5/TgA+BdFFovbfCrQ40s5vMPw8866pNX8zyFGeFWdxIpPVp9Rg1UPOVFbFZrvaFq/YAzHQgqMWpahMYfqHpmwXfHL1/kpYmGuHFwT55mQu0dylfNuq2Oq0hTMCPwqfxnuBIPLXfci4Y1ANy+1CUipQxld/izVh16WyG2Q0CQQ9NqtAnx1HCHwDj7sYxOSB0wopZSnOzxQOcExmxrVTF2BkOthVpGfuhaGECfCJpJKpjnihY+xOT2QJxN61+9K6QSqtv2Shr82I3jgJrqBg0wELFZPjvHpvzTtaJnLK6Vb97Yn933koO/saN7fsjwNKzp4l2lJVx2orjCGzC/4ZL4zCver6aQYtC5sdoychuFE6ufOiog+VWi5UDkbmvmtah/3aArEBIi39s5ILUnlFLgilcGuz9CQshEY7fw2ouoILAYPVT/gyAIq3TFAIwVsl+ktkRz/qGfnCDGrm5gsl/l9QdvCWGsjPz3dU7XuqKfdUrr/6XIgjp4rey6AJBmCmUJMjITHVdFb5m1p+dLMCL8t55zD42cmftmLEJC0Da04YiRCVUBLLa8D071/N5UBNBXDh0LFsmhV/5B5ExOB4j3WVG/S3lfK5o+V6ELHvy6RR9n4ac+VsK4VE4yphPvV+kG9FegTBH4ZRXL2HytUHCduJazB/KykjfetYxOXTLws267aGOd+I+JhKP//+VnXmS90OD/jvLcVu0asyqcuYN1mSb6XTlCkqv1vigZPIYwNF/zpWcT1GR/6aEIRjkh0yhg4LXJfaGobYJTY4JI58KiAKgmmgAKWdl5nYCeLqavRJGQNuYuZtZFGx+IkI4w4NS2xwbetNMunOjBu/hmKCI/w7tfiiyUd//4rbTeWt4izBY8YvGIN6vyKYmP/8X8wHKCeN+WRcKM70+tXKNGyevU9H2Dg5BsljnTf8YbsJ1TmMs74Ce2XlHisleguhyeg44rQOHZuw/6HTkhnnurK2d62q6yS7210SsAIaR+jXMQA+svkrLpsUY+F30Uw89uOdGAR6vo4FIME0EfVVeHTu6eKicfhSqOeXJhbftcd08sWEnNUL1C9fnprTgd83IMut8onVUF0hvqzZfHduPjbjwEXIcoYmy+P6tcJZHmeOv6VrvEdkHDJecjHuHeWANe79VG662qTjA/HCvumVv3qL+LrOcpqGps2ZGwQdFJ7PU4iuyRlBrwfO+xnPyr47s2cXVbWzAyznDiBGjCM3ksxjjqM62GE9C8f5U38kB3VjtabKp/nRdvMESPGDG90bWRLAt1Qk5DyLuazRR1YzdC1c+hZXvAWV8xA72S4A8B67vjVhbba3MMop293FeEXpe7zItMWrJG/LOH9ByOXmYnNJfjmfuX9KbrpgLOba4nZ+fl8Gbdv/ihv+6wFGKHCYrVwmhFC0J3V2bn2tIB1wCc1CST3d3X2OyxhguXcs4sm679UngzofuSeBewMFJboIQHbUh/m2JhW2hG9DIvG2t7yZIzKBTz9wBtnNC+2pCRYhSIuQ1j8xsz5VvqnyUIthvuoyyu7fNIrg/KQUVmGQaqkqZk/Vx5b33/gsEs8yX7SC1J+NV4icz6bvIE7C5G6McBaI8rVg56q5QBJWxn/87Q1sPK4+sQa8fLU5gXo4paaq4cOcQ4wR0VBHPGjKh+UlPCbA1nLXyEUX45qZ8J7/Ln4FPJE2TdzD0Z8MLSNQiykMMmSyOCiFfy84Rq60emYB2vD09KjYwsoIpeDcBDTElBbXxND72yhd9pC/1CMid/5HUMvAL27OtcIJDzNKpRPNqPOpyt2aPGz9QWIs9hQ9LiX5s8m9hjTUu/f7MyIatjjd+tSfQ3ufZxPpmJhTaBtZtKLUcfOCUqADuO+QoH8B9v6U+P0HV1GLQmtoNFTb3s74ivZgjES0qfK+8RdGgBbcCMSy8eBvh98+et1KIFqSe1KQPyXULBMTsIYnysIwiZBJYdI20vseV+wuJkcqGemehKjaAb9L57xZm3g2zX0bZ2xk/fU+bCo7TlnbW7JuF1YdURo/2Gw7VclDG1W7LOtas2LX4upifZ/23rzpsnY/ALfRgrcWP5hYmV9VxVOQA1fZvp9F2UNU+7d7xRyVm5wiLp3/0dlV7vdw1PMiZrbDAYzIVqEjRY2YU03sJhPnlwIPcZUG5ltL6S8XCxU1eYS5cjr34veBmXAvy7yN4ZjArIG0dfD/5UpBNlX1ZPoxJOwyqRi3wQWtOzd4oNKh0LkoTm8cwqgIfKhqqGOhwo71I+zXnMemTv2B2AUzABWyFztGgGULjDDzWYwJUVBTjKCn5K2QGMK1CQT7SzziOjo+BhAmqBjzuc3xYym2eedGeOIRJVyTwDw37iCMe4g5Vbnsb5ZBdxOAnMT7HU4DHpxWGuQ7GeiY30Cpbvzss55+5Km1YsbD5ea3NI9QNYIXol5apgSu9dZ8f8xS5dtHpido5BclDuLWY4lhik0tbJa07yJhH0BOyEut/GRbYTS6RfiTYWGMCkNpfSHi7HvdiTglEVHKZXaVhezH4kkXiIvKopYAlPusftpE4a5IZwvw1x/eLvoDIh/zpo9FiQInsTb2SAkKHV42XYBjpJDg4374XiVb3ws4qM0s9eSQ5HzsMU4OZJKuopFjBM+dAZEl8RUMx5uU2N486Kr141tVsGQfGjORYMCJAMsxELeNT4RmWjRcpdTGBwcx6XN9drWqPmJzcrGrH4+DRc7+n1w3kPZwu0BkNr6hQrqgo7JTB9A5kdJ/H7P4cWBMwsmuixAzJB3yrQpnGIq90lxAXLzDCdn1LPibsRt7rHNjgQBklRgPZ8vTbjXdgXrTWQsK5MdrXXQVPp0Rinq3frzZKJ0qD6Qhc40VzAraUXlob1gvkhK3vpmHgI6FRlQZNx6eRqkp0zy4AQlX813fAPtL3jMRaitGFFjo0zmErloC+h+YYdVQ6k4F/epxAoF0BmqEoKNTt6j4vQZNQ2BoqF9Vj53TOIoNmDiu9Xp15RkIgQIGcoLpfoIbenzpGUAtqFJp5W+LLnx38jHeECTJ/navKY1NWfN0sY1T8/pB8kIH3DU3DX+u6W3YwpypBMYOhbSxGjq84RZ84fWJow8pyHqn4S/9J15EcCMsXqrfwyd9mhiu3+rEo9pPpoJkdZqHjra4NvzFwuThNKy6hao/SlLw3ZADUcUp3w3SRVfW2rhl80zOgTYnKE0Hs2qp1J6H3xqPqIkvUDRMFDYyRbsFI3M9MEyovPk8rlw7/0a81cDVLmBsR2ze2pBuKb23fbeZC0uXoIvDppfTwIDxk1Oq2dGesGc+oJXWJLGkOha3CX+DUnzgAp9HGH9RsPZN63Hn4RMA5eSVhPHO+9RcRb/IOgtW31V1Q5IPGtoxPjC+MEJbVlIMYADd9aHYWUIQKopuPOHmoqSkubnAKnzgKHqgIOfW5RdAgotN6BN+O2ZYHkuemLnvQ8U9THVrS1RtLmKbcC7PeeDsYznvqzeg6VCNwmr0Yyx1wnLjyT84BZz3EJyCptD3yeueAyDWIs0L2qs/VQ3HUyqfrja0V1LdDzqAikeWuV4sc7RLIB69jEIBjCkyZedoUHqCrOvShVzyd73OdrJW0hPOuQv2qOoHDc9xVb6Yu6uq3Xqp2ZaH46A7lzevbxQEmfrzvAYSJuZ4WDk1Hz3QX1LVdiUK0EvlAGAYlG3Md30r7dcPN63yqBCIj25prpvZP0nI4+EgWoFG95V596CurXpKRBGRjQlHCvy5Ib/iW8nZJWwrET3mgd6mEhfP4KCuaLjopWs7h+MdXFdIv8dHQJgg1xi1eYqB0uDYjxwVmri0Sv5XKut/onqapC+FQiC2C1lvYJ9MVco6yDYsS3AANUfMtvtbYI2hfwZatiSsnoUeMZd34GVjkMMKA+XnjJpXgRW2SHTZplVowPmJsvXy6w3cfO1AK2dvtZEKTkC/TY9LFiKHCG0DnrMQdGm2lzlBHM9iEYynH2UcVMhUEjsc0oDBTgo2ZSQ1gzkAHeWeBXYFjYLuuf8yzTCy7/RFR81WDjXMbq2BOH5dURnxo6oivmxL3cKzKInlZkD31nvpHB9Kk7GfcfE1t+1V64b9LtgeJGlpRFxQCAqWJ5DoY77ski8gsOEOr2uywZaoO/NGa0X0y1pNQHBi3b2SUGNpcZxDT7rLbBf1FSnQ8guxGW3W+36BW0gBje4DOz6Ba6SVk0xiKgt+q2JOFyr4SYfnu+Ic1QZYIuwHBrgzr6UvOcSCzPTOo7D6IC4ISeS7zkl4h+2VoeHpnG/uWR3+ysNgPcOIXQbv0n4mr3BwQcdKJxgPSeyuP/z1Jjg4e9nUvoXegqQVIE30EHx5GHv+FAVUNTowYDJgyFhf5IvlYmEqRif6+WN1MkEJmDcQITx9FX23a4mxy1AQRsOHO/+eImX9l8EMJI3oPWzVXxSOeHU1dUWYr2uAA7AMb+vAEZSbU3qob9ibCyXeypEMpZ6863o6QPqlqGHZkuWABSTVNd4cOh9hv3qEpSx2Zy/DJMP6cItEmiBJ5PFqQnDEIt3NrA3COlOSgz43D7gpNFNJ5MBh4oFzhDPiglC2ypsNU4ISywY2erkyb1NC3Qh/IfWj0eDgZI4/ln8WPfBsT3meTjq1Uqt1E7Zl/qftqkx6aM9KueMCekSnMrcHj1CqTWWzEzPsZGcDe3Ue4Ws+XFYVxNbOFF8ezkvQGR6ZOtOLU2lQEnMBStx47vE6Pb7AYMBRj2OOfZXfisjJnpTfSNjo6sZ6qSvNxZNmDeS7Gk3yYyCk1HtKN2UnhMIjOXUzAqDv90lx9O/q/AT1ZMnit5XQe9wmQxnE/WSH0CqZ9/2Hy+Sfmpeg8RwsHI5Z8kC8H293m/LHVVM/BA7HaTJYg5Enk7M/xWpq0192ACfBai2LA/qrCjCr6Dh1BIMzMXINBmX96MJ5Hn2nxln/RXPFhwHxUmSV0EV2V0jm86/dxxuYSU1W7sVkEbN9EzkG0QFwPhyHKyb3t+Fj5WoUUTErcazE/N6EW6Lvp0d//SDPj7EV9UdJN+Amnf3Wwk3A0SlJ9Z00yvXZ7n3z70G47Hfsow8Wq1JXcfwnA+Yxa5mFsgV464KKP4T31wqIgzFPd3eCe3j5ory5fBF2hgCFyVFrLzI9eetNXvM7oQqyFgDo4CTp/hDV9NMX9JDHQ/nyHTLvZLNLF6ftn2OxjGm8+PqOwhxnPHWipkE/8wbtyri80Sr7pMNkQGMfo4ZYK9OcCC4ESVFFbLMIvlxSoRqWie0wxqnLfcLSXMSpMMQEJYDVObYsXIQNv4TGNwjq1kvT1UOkicTrG3IaBZ3XdScS3u8sgeZPVpOLkbiF940FjbCeNRINNvDbd01EPBrTCPpm12m43ze1bBB59Ia6Ovhnur/Nvx3IxwSWol+3H2qfCJR8df6aQf4v6WiONxkK+IqT4pKQrZK/LplgDI/PJZbOep8dtbV7oCr6CgfpWa8NczOkPx81iSHbsNhVSJBOtrLIMrL31LK9TqHqAbAHe0RLmmV806kRLDLNEhUEJfm9u0sxpkL93Zgd6rw+tqBfTMi59xqXHLXSHwSbSBl0EK0+loECOPtrl+/nsaFe197di4yUgoe4jKoAJDXc6DGDjrQOoFDWZJ9HXwt8xDrQP+7aRwWKWI1GF8s8O4KzxWBBcwnl3vnl1Oez3oh6Ea1vjR7/z7DDTrFtqU2W/KAEzAuXDNZ7MY73MF216dzdSbWmUp4lcm7keJfWaMHgut9x5C9mj66Z0lJ+yhsjVvyiWrfk1lzPOTdhG15Y7gQlXtacvI7qv/XNSscDwqkgwHT/gUsD5yB7LdRRvJxQGYINn9hTpodKFVSTPrtGvyQw+HlRFXIkodErAGu9Iy1YpfSPc3jkFh5CX3lPxv7aqjE/JAfTIpEjGb/H7MO0e2vsViSW1qa/Lmi4/n4DEI3g7lYrcanspDfEpKkdV1OjSLOy0BCUqVoECaB55vs06rXl4jqmLsPsFM/7vYJ0vrBhDCm/00A/H81l1uekJ/6Lml3Hb9+NKiLqATJmDpyzfYZFHumEjC662L0Bwkxi7E9U4cQA0XMVDuMYAIeLMPgQaMVOd8fmt5SflFIfuBoszeAw7ow5gXPE2Y/yBc/7jExARUf/BxIHQBF5Sn3i61w4z5xJdCyO1F1X3+3ax+JSvMeZ7S6QSKp1Fp/sjYz6Z+VgCZzibGeEoujryfMulH7Rai5kAft9ebcW50DyJr2uo2z97mTWIu45YsSnNSMrrNUuG1XsYBtD9TDYzQffKB87vWbkM4EbPAFgoBV4GQS+vtFDUqOFAoi1nTtmIOvg38N4hT2Sn8r8clmBCXspBlMBYTnrqFJGBT3wZOzAyJDre9dHH7+x7qaaKDOB4UQALD5ecS0DE4obubQEiuJZ0EpBVpLuYcce8Aa4PYd/V4DLDAJBYKQPCWTcrEaZ5HYbJi11Gd6hjGom1ii18VHYnG28NKpkz2UKVPxlhYSp8uZr367iOmoy7zsxehW9wzcy2zG0a80PBMCRQMb32hnaHeOR8fnNDzZhaNYhkOdDsBUZ3loDMa1YP0uS0cjUP3b/6DBlqmZOeNABDsLl5BI5QJups8uxAuWJdkUB/pO6Zax6tsg7fN5mjjDgMGngO+DPcKqiHIDbFIGudxtPTIyDi9SFMKBDcfdGQRv41q1AqmxgkVfJMnP8w/Bc7N9/TR6C7mGObFqFkIEom8sKi2xYqJLTCHK7cxzaZvqODo22c3wisBCP4HeAgcRbNPAsBkNRhSmD48dHupdBRw4mIvtS5oeF6zeT1KMCyhMnmhpkFAGWnGscoNkwvQ8ZM5lE/vgTHFYL99OuNxdFBxTEDd5v2qLR8y9WkXsWgG6kZNndFG+pO/UAkOCipqIhL3hq7cRSdrCq7YhUsTocEcnaFa6nVkhnSeRYUA1YO0z5itF9Sly3VlxYDw239TJJH6f3EUfYO5lb7bcFcz8Bp7Oo8QmnsUHOz/fagVUBtKEw1iT88j+aKkv8cscKNkMxjYr8344D1kFoZ7/td1W6LCNYN594301tUGRmFjAzeRg5vyoM1F6+bJZ/Q54jN/k8SFd3DxPTYaAUsivsBfgTn7Mx8H2SpPt4GOdYRnEJOH6jHM2p6SgB0gzIRq6fHxGMmSmqaPCmlfwxiuloaVIitLGN8wie2CDWhkzLoCJcODh7KIOAqbHEvXdUxaS4TTTs07Clzj/6GmVs9kiZDerMxEnhUB6QQPlcfqkG9882RqHoLiHGBoHfQuXIsAG8GTAtao2KVwRnvvam8jo1e312GQAKWEa4sUVEAMG4G6ckcONDwRcg1e2D3+ohXgY4UAWF8wHKQMrSnzCgfFpsxh+aHXMGtPQroQasRY4U6UdG0rz1Vjbka0MekOGRZQEvqQFlxseFor8zWFgHek3v29+WqN6gaK5gZOTOMZzpQIC1201LkMCXild3vWXSc5UX9xcFYfbRPzGFa1FDcPfPB/jUEq/FeGt419CI3YmBlVoHsa4KdcwQP5ZSwHHhFJ7/Ph/Rap/4vmG91eDwPP0lDfCDRCLszTqfzM71xpmiKi2HwS4WlqvGNwtvwF5Dqpn6KTq8ax00UMPkxDcZrEEEsIvHiUXXEphdb4GB4FymlPwBz4Gperqq5pW7TQ6/yNRhW8VT5NhuP0udlxo4gILq5ZxAZk8ZGh3g4CqxJlPKY7AQxupfUcVpWT5VItp1+30UqoyP4wWsRo3olRRgkWZZ2ZN6VC3OZFeXB8NbnUrSdikNptD1QiGuKkr8EmSR/AK9Rw+FF3s5uwuPbvHGiPeFOViltMK7AUaOsq9+x9cndk3iJEE5LKZRlWJbKOZweROzmPNVPkjE3K/TyA57Rs68TkZ3MR8akKpm7cFjnjPd/DdkWjgYoKHSr5Wu5ssoBYU4acRs5g2DHxUmdq8VXOXRbunD8QN0LhgkssgahcdoYsNvuXGUK/KXD/7oFb+VGdhqIn02veuM5bLudJOc2Ky0GMaG4W/xWBxIJcL7yliJOXOpx0AkBqUgzlDczmLT4iILXDxxtRR1oZa2JWFgiAb43obrJnG/TZC2KSK2wqOzRZTXavZZFMb1f3bXvVaNaK828w9TO610gk8JNf3gMfETzXXsbcvRGCG9JWQZ6+cDPqc4466Yo2RcKH+PILeKOqtnlbInR3MmBeGG3FH10yzkybuqEC2HSQwpA0An7d9+73BkDUTm30bZmoP/RGbgFN+GrCOfADgqr0WbI1a1okpFms8iHYw9hm0zUvlEMivBRxModrbJJ+9/p3jUdQQ9BCtQdxnOGrT5dzRUmw0593/mbRSdBg0nRvRZM5/E16m7ZHmDEtWhwvfdZCZ8J8M12W0yRMszXamWfQTwIZ4ayYktrnscQuWr8idp3PjT2eF/jmtdhIfcpMnb+IfZY2FebW6UY/AK3jP4u3Tu4zE4qlnQgLFbM19EBIsNf7KhjdbqQ/D6yiDb+NlEi2SKD+ivXVUK8ib0oBo366gXkR8ZxGjpJIDcEgZPa9TcYe0TIbiPl/rPUQDu3XBJ9X/GNq3FAUsKsll57DzaGMrjcT+gctp+9MLYXCq+sqP81eVQ0r9lt+gcQfZbACRbEjvlMskztZG8gbC8Qn9tt26Q7y7nDrbZq/LEz7kR6Jc6pg3N9rVX8Y5MJrGlML9p9lU4jbTkKqCveeZUJjHB03m2KRKR2TytoFkTXOLg7keU1s1lrPMQJpoOKLuAAC+y1HlJucU6ysB5hsXhvSPPLq5J7JtnqHKZ4vYjC4Vy8153QY+6780xDuGARsGbOs1WqzH0QS765rnSKEbbKlkO8oI/VDwUd0is13tKpqILu1mDJFNy/iJAWcvDgjxvusIT+PGz3ST/J9r9Mtfd0jpaGeiLYIqXc7DiHSS8TcjFVksi66PEkxW1z6ujbLLUGNNYnzOWpH8BZGK4bCK7iR+MbIv8ncDAz1u4StN3vTTzewr9IQjk9wxFxn+6N1ddKs0vffJiS08N3a4G1SVrlZ97Q/M+8G9fe5AP6d9/Qq4WRnORVhofPIKEdCr3llspUfE0oKIIYoByBRPh+bX1HLS3JWGJRhIvE1aW4NTd8ePi4Z+kXb+Z8snYfSNcqijhAgVsx4RCM54cXUiYkjeBmmC4ajOHrChoELscJJC7+9jjMjw5BagZKlgRMiSNYz7h7vvZIoQqbtQmspc0cUk1G/73iXtSpROl5wtLgQi0mW2Ex8i3WULhcggx6E1LMVHUsdc9GHI1PH3U2Ko0PyGdn9KdVOLm7FPBui0i9a0HpA60MsewVE4z8CAt5d401Gv6zXlIT5Ybit1VIA0FCs7wtvYreru1fUyW3oLAZ/+aTnZrOcYRNVA8spoRtlRoWflsRClFcgzkqiHOrf0/SVw+EpVaFlJ0g4Kxq1MMOmiQdpMNpte8lMMQqm6cIFXlnGbfJllysKDi+0JJMotkqgIxOSQgU9dn/lWkeVf8nUm3iwX2Nl3WDw9i6AUK3vBAbZZrcJpDQ/N64AVwjT07Jef30GSSmtNu2WlW7YoyW2FlWfZFQUwk867EdLYKk9VG6JgEnBiBxkY7LMo4YLQJJlAo9l/oTvJkSARDF/XtyAzM8O2t3eT/iXa6wDN3WewNmQHdPfsxChU/KtLG2Mn8i4ZqKdSlIaBZadxJmRzVS/o4yA65RTSViq60oa395Lqw0pzY4SipwE0SXXsKV+GZraGSkr/RW08wPRvqvSUkYBMA9lPx4m24az+IHmCbXA+0faxTRE9wuGeO06DIXa6QlKJ3puIyiuAVfPr736vzo2pBirS+Vxel3TMm3JKhz9o2ZoRvaFVpIkykb0Hcm4oHFBMcNSNj7/4GJt43ogonY2Vg4nsDQIWxAcorpXACzgBqQPjYsE/VUpXpwNManEru4NwMCFPkXvMoqvoeLN3qyu/N1eWEHttMD65v19l/0kH2mR35iv/FI+yjoHJ9gPMz67af3Mq/BoWXqu3rphiWMXVkmnPSEkpGpUI2h1MThideGFEOK6YZHPwYzMBvpNC7+ZHxPb7epfefGyIB4JzO9DTNEYnDLVVHdQyvOEVefrk6Uv5kTQYVYWWdqrdcIl7yljwwIWdfQ/y+2QB3eR/qxYObuYyB4gTbo2in4PzarU1sO9nETkmj9/AoxDA+JM3GMqQtJR4jtduHtnoCLxd1gQUscHRB/MoRYIEsP2pDZ9KvHgtlk1iTbWWbHhohwFEYX7y51fUV2nuUmnoUcqnWIQAAgl9LTVX+Bc0QGNEhChxHR4YjfE51PUdGfsSFE6ck7BL3/hTf9jLq4G1IafINxOLKeAtO7quulYvH5YOBc+zX7CrMgWnW47/jfRsWnJjYYoE7xMfWV2HN2iyIqLI";const K2=new Map([[8217,"apostrophe"],[8260,"fraction slash"],[12539,"middle dot"]]),z2=4;function LM(t){let e=0;function n(){return t[e++]<<8|t[e++]}let r=n(),i=1,s=[0,1];for(let T=1;T<r;T++)s.push(i+=n());let o=n(),a=e;e+=o;let l=0,c=0;function u(){return l==0&&(c=c<<8|t[e++],l=8),c>>--l&1}const d=31,f=2**d,h=f>>>1,m=h>>1,g=f-1;let w=0;for(let T=0;T<d;T++)w=w<<1|u();let p=[],v=0,y=f;for(;;){let T=Math.floor(((w-v+1)*i-1)/y),B=0,j=r;for(;j-B>1;){let U=B+j>>>1;T<s[U]?j=U:B=U}if(B==0)break;p.push(B);let M=v+Math.floor(y*s[B]/i),K=v+Math.floor(y*s[B+1]/i)-1;for(;!((M^K)&h);)w=w<<1&g|u(),M=M<<1&g,K=K<<1&g|1;for(;M&~K&m;)w=w&h|w<<1&g>>>1|u(),M=M<<1^h,K=(K^h)<<1|h|1;v=M,y=1+K-M}let x=r-4;return p.map(T=>{switch(T-x){case 3:return x+65792+(t[a++]<<16|t[a++]<<8|t[a++]);case 2:return x+256+(t[a++]<<8|t[a++]);case 1:return x+t[a++];default:return T-1}})}function BM(t){let e=0;return()=>t[e++]}function s3(t){return BM(LM(DM(t)))}function DM(t){let e=[];[..."ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/"].forEach((i,s)=>e[i.charCodeAt(0)]=s);let n=t.length,r=new Uint8Array(6*n>>3);for(let i=0,s=0,o=0,a=0;i<n;i++)a=a<<6|e[t.charCodeAt(i)],o+=6,o>=8&&(r[s++]=a>>(o-=8));return r}function $M(t){return t&1?~t>>1:t>>1}function UM(t,e){let n=Array(t);for(let r=0,i=0;r<t;r++)n[r]=i+=$M(e());return n}function Vd(t,e=0){let n=[];for(;;){let r=t(),i=t();if(!i)break;e+=r;for(let s=0;s<i;s++)n.push(e+s);e+=i+1}return n}function o3(t){return Gd(()=>{let e=Vd(t);if(e.length)return e})}function a3(t){let e=[];for(;;){let n=t();if(n==0)break;e.push(FM(n,t))}for(;;){let n=t()-1;if(n<0)break;e.push(jM(n,t))}return e.flat()}function Gd(t){let e=[];for(;;){let n=t(e.length);if(!n)break;e.push(n)}return e}function l3(t,e,n){let r=Array(t).fill().map(()=>[]);for(let i=0;i<e;i++)UM(t,n).forEach((s,o)=>r[o].push(s));return r}function FM(t,e){let n=1+e(),r=e(),i=Gd(e);return l3(i.length,1+t,e).flatMap((o,a)=>{let[l,...c]=o;return Array(i[a]).fill().map((u,d)=>{let f=d*r;return[l+d*n,c.map(h=>h+f)]})})}function jM(t,e){let n=1+e();return l3(n,1+t,e).map(i=>[i[0],i.slice(1)])}function HM(t){let e=[],n=Vd(t);return i(r([]),[]),e;function r(s){let o=t(),a=Gd(()=>{let l=Vd(t).map(c=>n[c]);if(l.length)return r(l)});return{S:o,B:a,Q:s}}function i({S:s,B:o},a,l){if(!(s&4&&l===a[a.length-1])){s&2&&(l=a[a.length-1]),s&1&&e.push(a);for(let c of o)for(let u of c.Q)i(c,[...a,u],l)}}}function KM(t){return t.toString(16).toUpperCase().padStart(2,"0")}function c3(t){return`{${KM(t)}}`}function zM(t){let e=[];for(let n=0,r=t.length;n<r;){let i=t.codePointAt(n);n+=i<65536?1:2,e.push(i)}return e}function fu(t){let n=t.length;if(n<4096)return String.fromCodePoint(...t);let r=[];for(let i=0;i<n;)r.push(String.fromCodePoint(...t.slice(i,i+=4096)));return r.join("")}function VM(t,e){let n=t.length,r=n-e.length;for(let i=0;r==0&&i<n;i++)r=t[i]-e[i];return r}var GM="AEUDTAHBCFQATQDRADAAcgAgADQAFAAsABQAHwAOACQADQARAAoAFwAHABIACAAPAAUACwAFAAwABAAQAAMABwAEAAoABQAIAAIACgABAAQAFAALAAIACwABAAIAAQAHAAMAAwAEAAsADAAMAAwACgANAA0AAwAKAAkABAAdAAYAZwDSAdsDJgC0CkMB8xhZAqfoC190UGcThgBurwf7PT09Pb09AjgJum8OjDllxHYUKXAPxzq6tABAxgK8ysUvWAgMPT09PT09PSs6LT2HcgWXWwFLoSMEEEl5RFVMKvO0XQ8ExDdJMnIgsj26PTQyy8FfEQ8AY8IPAGcEbwRwBHEEcgRzBHQEdQR2BHcEeAR6BHsEfAR+BIAEgfndBQoBYgULAWIFDAFiBNcE2ATZBRAFEQUvBdALFAsVDPcNBw13DYcOMA4xDjMB4BllHI0B2grbAMDpHLkQ7QHVAPRNQQFnGRUEg0yEB2uaJF8AJpIBpob5AERSMAKNoAXqaQLUBMCzEiACnwRZEkkVsS7tANAsBG0RuAQLEPABv9HICTUBXigPZwRBApMDOwAamhtaABqEAY8KvKx3LQ4ArAB8UhwEBAVSagD8AEFZADkBIadVj2UMUgx5Il4ANQC9AxIB1BlbEPMAs30CGxlXAhwZKQIECBc6EbsCoxngzv7UzRQA8M0BawL6ZwkN7wABAD33OQRcsgLJCjMCjqUChtw/km+NAsXPAoP2BT84PwURAK0RAvptb6cApQS/OMMey5HJS84UdxpxTPkCogVFITaTOwERAK5pAvkNBOVyA7q3BKlOJSALAgUIBRcEdASpBXqzABXFSWZOawLCOqw//AolCZdvv3dSBkEQGyelEPcMMwG1ATsN7UvYBPEGOwTJH30ZGQ/NlZwIpS3dDO0m4y6hgFoj9SqDBe1L9DzdC01RaA9ZC2UJ4zpjgU4DIQENIosK3Q05CG0Q8wrJaw3lEUUHOQPVSZoApQcBCxEdNRW1JhBirAsJOXcG+xr2C48mrxMpevwF0xohBk0BKRr/AM8u54WwWjFcHE9fBgMLJSPHFKhQIA0lQLd4SBobBxUlqQKRQ3BKh1E2HpMh9jw9DWYuE1F8B/U8BRlPC4E8nkarRQ4R0j6NPUgiSUwsBDV/LC8niwnPD4UMuXxyAVkJIQmxDHETMREXN8UIOQcZLZckJxUIIUaVYJoE958D8xPRAwsFPwlBBxMDtRwtEy4VKQUNgSTXAvM21S6zAo9WgAEXBcsPJR/fEFBH4A7pCJsCZQODJesALRUhABcimwhDYwBfj9hTBS7LCMdqbCN0A2cU52ERcweRDlcHpxwzFb8c4XDIXguGCCijrwlbAXUJmQFfBOMICTVbjKAgQWdTi1gYmyBhQT9d/AIxDGUVn0S9h3gCiw9rEhsBNQFzBzkNAQJ3Ee0RaxCVCOuGBDW1M/g6JQRPIYMgEQonA09szgsnJvkM+GkBoxJiAww0PXfuZ6tgtiQX/QcZMsVBYCHxC5JPzQycGsEYQlQuGeQHvwPzGvMn6kFXBf8DowMTOk0z7gS9C2kIiwk/AEkOoxcH1xhqCnGM0AExiwG3mQNXkYMCb48GNwcLAGcLhwV55QAdAqcIowAFAM8DVwA5Aq0HnQAZAIVBAT0DJy8BIeUCjwOTCDHLAZUvAfMpBBvDDBUA9zduSgLDsQKAamaiBd1YAo4CSTUBTSUEBU5HUQOvceEA2wBLBhPfRwEVq0rLGuNDAd9vKwDHAPsABTUHBUEBzQHzbQC3AV8LMQmis7UBTekpAIMAFWsB1wKJAN0ANQB/8QFTAE0FWfkF0wJPSQERMRgrV2EBuwMfATMBDQB5BsuNpckHHwRtB9MCEBsV4QLvLge1AQMi3xPNQsUCvd5VoWACZIECYkJbTa9bNyACofcCaJgCZgkCn4Q4GwsCZjsCZiYEbgR/A38TA36SOQY5dxc5gjojIwJsHQIyNjgKAm3HAm2u74ozZ0UrAWcA3gDhAEoFB5gMjQD+C8IADbUCdy8CdqI/AnlLQwJ4uh1c20WuRtcCfD8CesgCfQkCfPAFWQUgSABIfWMkAoFtAoAAAoAFAn+uSVhKWxUXSswC0QEC0MxLJwOITwOH5kTFkTIC8qFdAwMDrkvOTC0lA89NTE2vAos/AorYwRsHHUNnBbcCjjcCjlxAl4ECjtkCjlx4UbRTNQpS1FSFApP7ApMMAOkAHFUeVa9V0AYsGymVhjLheGZFOzkCl58C77JYIagAWSUClo8ClnycAKlZrFoJgU0AOwKWtQKWTlxEXNECmcsCmWRcyl0HGQKcmznCOp0CnBYCn5sCnriKAB0PMSoPAp3xAp6SALU9YTRh7wKe0wKgbgGpAp6fHwKeTqVjyGQnJSsCJ68CJn4CoPsCoEwCot0CocQCpi8Cpc4Cp/8AfQKn8mh8aLEAA0lqHGrRAqzjAqyuAq1nAq0CAlcdAlXcArHh1wMfTmyXArK9DQKy6Bds4G1jbUhfAyXNArZcOz9ukAMpRQK4XgK5RxUCuSp3cDZw4QK9GQK72nCWAzIRAr6IcgIDM3ECvhpzInNPAsPLAsMEc4J0SzVFdOADPKcDPJoDPb8CxXwCxkcCxhCJAshpUQLIRALJTwLJLgJknQLd0nh5YXiueSVL0AMYo2cCAmH0GfOVJHsLXpJeuxECz2sCz2wvS1PS8xOfAMatAs9zASnqA04SfksFAtwnAtuKAtJPA1JcA1NfAQEDVYyAiT8AyxbtYEWCHILTgs6DjQLaxwLZ3oQQhEmnPAOGpQAvA2QOhnFZ+QBVAt9lAt64c3cC4i/tFAHzMCcB9JsB8tKHAuvzAulweQLq+QLq5AD5RwG5Au6JAuuclqqXAwLuPwOF4Jh5cOBxoQLzAwBpA44WmZMC9xMDkW4DkocC95gC+dkC+GaaHJqruzebHgOdgwL++gEbADmfHJ+zAwWNA6ZqA6bZANHFAwZqoYiiBQkDDEkCwAA/AwDhQRdTARHzA2sHl2cFAJMtK7evvdsBiZkUfxEEOQH7KQUhDp0JnwCS/SlXxQL3AZ0AtwW5AG8LbUEuFCaNLgFDAYD8AbUmAHUDDgRtACwCFgyhAAAKAj0CagPdA34EkQEgRQUhfAoABQBEABMANhICdwEABdUDa+8KxQIA9wqfJ7+xt+UBkSFBQgHpFH8RNMCJAAQAGwBaAkUChIsABjpTOpSNbQC4Oo860ACNOME63AClAOgAywE6gTo7Ofw5+Tt2iTpbO56JOm85GAFWATMBbAUvNV01njWtNWY1dTW2NcU1gjWRNdI14TWeNa017jX9NbI1wTYCNhE1xjXVNhY2JzXeNe02LjY9Ni41LSE2OjY9Njw2yTcIBJA8VzY4Nt03IDcPNsogN4k3MAoEsDxnNiQ3GTdsOo03IULUQwdC4EMLHA8PCZsobShRVQYA6X8A6bABFCnXAukBowC9BbcAbwNzBL8MDAMMAQgDAAkKCwsLCQoGBAVVBI/DvwDz9b29kaUCb0QtsRTNLt4eGBcSHAMZFhYZEhYEARAEBUEcQRxBHEEcQRxBHEEaQRxBHEFCSTxBPElISUhBNkM2QTYbNklISVmBVIgBFLWZAu0BhQCjBcEAbykBvwGJAaQcEZ0ePCklMAAhMvAIMAL54gC7Bm8EescjzQMpARQpKgDUABavAj626xQAJP0A3etzuf4NNRA7efy2Z9NQrCnC0OSyANz5BBIbJ5IFDR6miIavYS6tprjjmuKebxm5C74Q225X1pkaYYPb6f1DK4k3xMEBb9S2WMjEibTNWhsRJIA+vwNVEiXTE5iXs/wezV66oFLfp9NZGYW+Gk19J2+bCT6Ye2w6LDYdgzKMUabk595eLBCXANz9HUpWbATq9vqXVx9XDg+Pc9Xp4+bsS005SVM/BJBM4687WUuf+Uj9dEi8aDNaPxtpbDxcG1THTImUMZq4UCaaNYpsVqraNyKLJXDYsFZ/5jl7bLRtO88t7P3xZaAxhb5OdPMXqsSkp1WCieG8jXm1U99+blvLlXzPCS+M93VnJCiK+09LfaSaBAVBomyDgJua8dfUzR7ga34IvR2Nvj+A9heJ6lsl1KG4NkI1032Cnff1m1wof2B9oHJK4bi6JkEdSqeNeiuo6QoZZincoc73/TH9SXF8sCE7XyuYyW8WSgbGFCjPV0ihLKhdPs08Tx82fYAkLLc4I2wdl4apY7GU5lHRFzRWJep7Ww3wbeA3qmd59/86P4xuNaqDpygXt6M85glSBHOCGgJDnt+pN9bK7HApMguX6+06RZNjzVmcZJ+wcUrJ9//bpRNxNuKpNl9uFds+S9tdx7LaM5ZkIrPj6nIU9mnbFtVbs9s/uLgl8MVczAwet+iOEzzBlYW7RCMgE6gyNLeq6+1tIx4dpgZnd0DksJS5f+JNDpwwcPNXaaVspq1fbQajOrJgK0ofKtJ1Ne90L6VO4MOl5S886p7u6xo7OLjG8TGL+HU1JXGJgppg4nNbNJ5nlzSpuPYy21JUEcUA94PoFiZfjZue+QnyQ80ekOuZVkxx4g+cvhJfHgNl4hy1/a6+RKcKlar/J29y//EztlbVPHVUeQ1zX86eQVAjR/M3dA9w4W8LfaXp4EgM85wOWasli837PzVMOnsLzR+k3o75/lRPAJSE1xAKQzEi5v10ke+VBvRt1cwQRMd+U5mLCTGVd6XiZtgBG5cDi0w22GKcVNvHiu5LQbZEDVtz0onn7k5+heuKXVsZtSzilkLRAUmjMXEMB3J9YC50XBxPiz53SC+EhnPl9WsKCv92SM/OFFIMJZYfl0WW8tIO3UxYcwdMAj7FSmgrsZ2aAZO03BOhP1bNNZItyXYQFTpC3SG1VuPDqH9GkiCDmE+JwxyIVSO5siDErAOpEXFgjy6PQtOVDj+s6e1r8heWVvmZnTciuf4EiNZzCAd7SOMhXERIOlsHIMG399i9aLTy3m2hRLZjJVDNLS53iGIK11dPqQt0zBDyg6qc7YqkDm2M5Ve6dCWCaCbTXX2rToaIgz6+zh4lYUi/+6nqcFMAkQJKHYLK0wYk5N9szV6xihDbDDFr45lN1K4aCXBq/FitPSud9gLt5ZVn+ZqGX7cwm2z5EGMgfFpIFyhGGuDPmso6TItTMwny+7uPnLCf4W6goFQFV0oQSsc9VfMmVLcLr6ZetDZbaSFTLqnSO/bIPjA3/zAUoqgGFAEQS4IhuMzEp2I3jJzbzkk/IEmyax+rhZTwd6f+CGtwPixu8IvzACquPWPREu9ZvGkUzpRwvRRuaNN6cr0W1wWits9ICdYJ7ltbgMiSL3sTPeufgNcVqMVWFkCPDH4jG2jA0XcVgQj62Cb29v9f/z/+2KbYvIv/zzjpQAPkliaVDzNrW57TZ/ZOyZD0nlfMmAIBIAGAI0D3k/mdN4xr9v85ZbZbbqfH2jGd5hUqNZWwl5SPfoGmfElmazUIeNL1j/mkF7VNAzTq4jNt8JoQ11NQOcmhprXoxSxfRGJ9LDEOAQ+dmxAQH90iti9e2u/MoeuaGcDTHoC+xsmEeWmxEKefQuIzHbpw5Tc5cEocboAD09oipWQhtTO1wivf/O+DRe2rpl/E9wlrzBorjJsOeG1B/XPW4EaJEFdNlECEZga5ZoGRHXgYouGRuVkm8tDESiEyFNo+3s5M5puSdTyUL2llnINVHEt91XUNW4ewdMgJ4boJfEyt/iY5WXqbA+A2Fkt5Z0lutiWhe9nZIyIUjyXDC3UsaG1t+eNx6z4W/OYoTB7A6x+dNSTOi9AInctbESqm5gvOLww7OWXPrmHwVZasrl4eD113pm+JtT7JVOvnCXqdzzdTRHgJ0PiGTFYW5Gvt9R9LD6Lzfs0v/TZZHSmyVNq7viIHE6DBK7Qp07Iz55EM8SYtQvZf/obBniTWi5C2/ovHfw4VndkE5XYdjOhCMRjDeOEfXeN/CwfGduiUIfsoFeUxXeQXba7c7972XNv8w+dTjjUM0QeNAReW+J014dKAD/McQYXT7c0GQPIkn3Ll6R7gGjuiQoZD0TEeEqQpKoZ15g/0OPQI17QiSv9AUROa/V/TQN3dvLArec3RrsYlvBm1b8LWzltdugsC50lNKYLEp2a+ZZYqPejULRlOJh5zj/LVMyTDvwKhMxxwuDkxJ1QpoNI0OTWLom4Z71SNzI9TV1iXJrIu9Wcnd+MCaAw8o1jSXd94YU/1gnkrC9BUEOtQvEIQ7g0i6h+KL2JKk8Ydl7HruvgWMSAmNe+LshGhV4qnWHhO9/RIPQzY1tHRj2VqOyNsDpK0cww+56AdDC4gsWwY0XxoucIWIqs/GcwnWqlaT0KPr8mbK5U94/301i1WLt4YINTVvCFBrFZbIbY8eycOdeJ2teD5IfPLCRg7jjcFTwlMFNl9zdh/o3E/hHPwj7BWg0MU09pPrBLbrCgm54A6H+I6v27+jL5gkjWg/iYdks9jbfVP5y/n0dlgWEMlKasl7JvFZd56LfybW1eeaVO0gxTfXZwD8G4SI116yx7UKVRgui6Ya1YpixqXeNLc8IxtAwCU5IhwQgn+NqHnRaDv61CxKhOq4pOX7M6pkA+Pmpd4j1vn6ACUALoLLc4vpXci8VidLxzm7qFBe7s+quuJs6ETYmnpgS3LwSZxPIltgBDXz8M1k/W2ySNv2f9/NPhxLGK2D21dkHeSGmenRT3Yqcdl0m/h3OYr8V+lXNYGf8aCCpd4bWjE4QIPj7vUKN4Nrfs7ML6Y2OyS830JCnofg/k7lpFpt4SqZc5HGg1HCOrHvOdC8bP6FGDbE/VV0mX4IakzbdS/op+Kt3G24/8QbBV7y86sGSQ/vZzU8FXs7u6jIvwchsEP2BpIhW3G8uWNwa3HmjfH/ZjhhCWvluAcF+nMf14ClKg5hGgtPLJ98ueNAkc5Hs2WZlk2QHvfreCK1CCGO6nMZVSb99VM/ajr8WHTte9JSmkXq/i/U943HEbdzW6Re/S88dKgg8pGOLlAeNiqrcLkUR3/aClFpMXcOUP3rmETcWSfMXZE3TUOi8i+fqRnTYLflVx/Vb/6GJ7eIRZUA6k3RYR3iFSK9c4iDdNwJuZL2FKz/IK5VimcNWEqdXjSoxSgmF0UPlDoUlNrPcM7ftmA8Y9gKiqKEHuWN+AZRIwtVSxye2Kf8rM3lhJ5XcBXU9n4v0Oy1RU2M+4qM8AQPVwse8ErNSob5oFPWxuqZnVzo1qB/IBxkM3EVUKFUUlO3e51259GgNcJbCmlvrdjtoTW7rChm1wyCKzpCTwozUUEOIcWLneRLgMXh+SjGSFkAllzbGS5HK7LlfCMRNRDSvbQPjcXaenNYxCvu2Qyznz6StuxVj66SgI0T8B6/sfHAJYZaZ78thjOSIFumNWLQbeZixDCCC+v0YBtkxiBB3jefHqZ/dFHU+crbj6OvS1x/JDD7vlm7zOVPwpUC01nhxZuY/63E7g";const Wd=44032,o0=4352,a0=4449,l0=4519,u3=19,d3=21,hu=28,c0=d3*hu,WM=u3*c0,qM=Wd+WM,QM=o0+u3,YM=a0+d3,JM=l0+hu;function Ju(t){return t>>24&255}function f3(t){return t&16777215}let Nv,V2,Mv,rp;function ZM(){let t=s3(GM);Nv=new Map(o3(t).flatMap((e,n)=>e.map(r=>[r,n+1<<24]))),V2=new Set(Vd(t)),Mv=new Map,rp=new Map;for(let[e,n]of a3(t)){if(!V2.has(e)&&n.length==2){let[r,i]=n,s=rp.get(r);s||(s=new Map,rp.set(r,s)),s.set(i,e)}Mv.set(e,n.reverse())}}function h3(t){return t>=Wd&&t<qM}function XM(t,e){if(t>=o0&&t<QM&&e>=a0&&e<YM)return Wd+(t-o0)*c0+(e-a0)*hu;if(h3(t)&&e>l0&&e<JM&&(t-Wd)%hu==0)return t+(e-l0);{let n=rp.get(t);return n&&(n=n.get(e),n)?n:-1}}function p3(t){Nv||ZM();let e=[],n=[],r=!1;function i(s){let o=Nv.get(s);o&&(r=!0,s|=o),e.push(s)}for(let s of t)for(;;){if(s<128)e.push(s);else if(h3(s)){let o=s-Wd,a=o/c0|0,l=o%c0/hu|0,c=o%hu;i(o0+a),i(a0+l),c>0&&i(l0+c)}else{let o=Mv.get(s);o?n.push(...o):i(s)}if(!n.length)break;s=n.pop()}if(r&&e.length>1){let s=Ju(e[0]);for(let o=1;o<e.length;o++){let a=Ju(e[o]);if(a==0||s<=a){s=a;continue}let l=o-1;for(;;){let c=e[l+1];if(e[l+1]=e[l],e[l]=c,!l||(s=Ju(e[--l]),s<=a))break}s=Ju(e[o])}}return e}function e5(t){let e=[],n=[],r=-1,i=0;for(let s of t){let o=Ju(s),a=f3(s);if(r==-1)o==0?r=a:e.push(a);else if(i>0&&i>=o)o==0?(e.push(r,...n),n.length=0,r=a):n.push(a),i=o;else{let l=XM(r,a);l>=0?r=l:i==0&&o==0?(e.push(r),r=a):(n.push(a),i=o)}}return r>=0&&e.push(r,...n),e}function g3(t){return p3(t).map(f3)}function t5(t){return e5(p3(t))}const G2=45,m3=".",y3=65039,v3=1,u0=t=>Array.from(t);function qd(t,e){return t.P.has(e)||t.Q.has(e)}class n5 extends Array{get is_emoji(){return!0}}let Lv,w3,va,Bv,b3,ac,xm,Sl,sa,W2,Dv;function Q1(){if(Lv)return;let t=s3(MM);const e=()=>Vd(t),n=()=>new Set(e()),r=(u,d)=>d.forEach(f=>u.add(f));Lv=new Map(a3(t)),w3=n(),va=e(),Bv=new Set(e().map(u=>va[u])),va=new Set(va),b3=n(),n();let i=o3(t),s=t();const o=()=>{let u=new Set;return e().forEach(d=>r(u,i[d])),r(u,e()),u};ac=Gd(u=>{let d=Gd(t).map(f=>f+96);if(d.length){let f=u>=s;d[0]-=32,d=fu(d),f&&(d=`Restricted[${d}]`);let h=o(),m=o(),g=!t();return{N:d,P:h,Q:m,M:g,R:f}}}),xm=n(),Sl=new Map;let a=e().concat(u0(xm)).sort((u,d)=>u-d);a.forEach((u,d)=>{let f=t(),h=a[d]=f?a[d-f]:{V:[],M:new Map};h.V.push(u),xm.has(u)||Sl.set(u,h)});for(let{V:u,M:d}of new Set(Sl.values())){let f=[];for(let m of u){let g=ac.filter(p=>qd(p,m)),w=f.find(({G:p})=>g.some(v=>p.has(v)));w||(w={G:new Set,V:[]},f.push(w)),w.V.push(m),r(w.G,g)}let h=f.flatMap(m=>u0(m.G));for(let{G:m,V:g}of f){let w=new Set(h.filter(p=>!m.has(p)));for(let p of g)d.set(p,w)}}sa=new Set;let l=new Set;const c=u=>sa.has(u)?l.add(u):sa.add(u);for(let u of ac){for(let d of u.P)c(d);for(let d of u.Q)c(d)}for(let u of sa)!Sl.has(u)&&!l.has(u)&&Sl.set(u,v3);r(sa,g3(sa)),W2=HM(t).map(u=>n5.from(u)).sort(VM),Dv=new Map;for(let u of W2){let d=[Dv];for(let f of u){let h=d.map(m=>{let g=m.get(f);return g||(g=new Map,m.set(f,g)),g});f===y3?d.push(...h):d=h}for(let f of d)f.V=u}}function Y1(t){return(E3(t)?"":`${J1(Eg([t]))} `)+c3(t)}function J1(t){return`"${t}"‎`}function r5(t){if(t.length>=4&&t[2]==G2&&t[3]==G2)throw new Error(`invalid label extension: "${fu(t.slice(0,4))}"`)}function i5(t){for(let n=t.lastIndexOf(95);n>0;)if(t[--n]!==95)throw new Error("underscore allowed only at start")}function s5(t){let e=t[0],n=K2.get(e);if(n)throw gd(`leading ${n}`);let r=t.length,i=-1;for(let s=1;s<r;s++){e=t[s];let o=K2.get(e);if(o){if(i==s)throw gd(`${n} + ${o}`);i=s+1,n=o}}if(i==r)throw gd(`trailing ${n}`)}function Eg(t,e=1/0,n=c3){let r=[];o5(t[0])&&r.push("◌"),t.length>e&&(e>>=1,t=[...t.slice(0,e),8230,...t.slice(-e)]);let i=0,s=t.length;for(let o=0;o<s;o++){let a=t[o];E3(a)&&(r.push(fu(t.slice(i,o))),r.push(n(a)),i=o+1)}return r.push(fu(t.slice(i,s))),r.join("")}function o5(t){return Q1(),va.has(t)}function E3(t){return Q1(),b3.has(t)}function a5(t){return d5(l5(t,t5,p5))}function l5(t,e,n){if(!t)return[];Q1();let r=0;return t.split(m3).map(i=>{let s=zM(i),o={input:s,offset:r};r+=s.length+1;try{let a=o.tokens=h5(s,e,n),l=a.length,c;if(!l)throw new Error("empty label");let u=o.output=a.flat();if(i5(u),!(o.emoji=l>1||a[0].is_emoji)&&u.every(f=>f<128))r5(u),c="ASCII";else{let f=a.flatMap(h=>h.is_emoji?[]:h);if(!f.length)c="Emoji";else{if(va.has(u[0]))throw gd("leading combining mark");for(let g=1;g<l;g++){let w=a[g];if(!w.is_emoji&&va.has(w[0]))throw gd(`emoji + combining mark: "${fu(a[g-1])} + ${Eg([w[0]])}"`)}s5(u);let h=u0(new Set(f)),[m]=u5(h);f5(m,f),c5(m,h),c=m.N}}o.type=c}catch(a){o.error=a}return o})}function c5(t,e){let n,r=[];for(let i of e){let s=Sl.get(i);if(s===v3)return;if(s){let o=s.M.get(i);if(n=n?n.filter(a=>o.has(a)):u0(o),!n.length)return}else r.push(i)}if(n){for(let i of n)if(r.every(s=>qd(i,s)))throw new Error(`whole-script confusable: ${t.N}/${i.N}`)}}function u5(t){let e=ac;for(let n of t){let r=e.filter(i=>qd(i,n));if(!r.length)throw ac.some(i=>qd(i,n))?S3(e[0],n):A3(n);if(e=r,r.length==1)break}return e}function d5(t){return t.map(({input:e,error:n,output:r})=>{if(n){let i=n.message;throw new Error(t.length==1?i:`Invalid label ${J1(Eg(e,63))}: ${i}`)}return fu(r)}).join(m3)}function A3(t){return new Error(`disallowed character: ${Y1(t)}`)}function S3(t,e){let n=Y1(e),r=ac.find(i=>i.P.has(e));return r&&(n=`${r.N} ${n}`),new Error(`illegal mixture: ${t.N} + ${n}`)}function gd(t){return new Error(`illegal placement: ${t}`)}function f5(t,e){for(let n of e)if(!qd(t,n))throw S3(t,n);if(t.M){let n=g3(e);for(let r=1,i=n.length;r<i;r++)if(Bv.has(n[r])){let s=r+1;for(let o;s<i&&Bv.has(o=n[s]);s++)for(let a=r;a<s;a++)if(n[a]==o)throw new Error(`duplicate non-spacing marks: ${Y1(o)}`);if(s-r>z2)throw new Error(`excessive non-spacing marks: ${J1(Eg(n.slice(r-1,s)))} (${s-r}/${z2})`);r=s}}}function h5(t,e,n){let r=[],i=[];for(t=t.slice().reverse();t.length;){let s=g5(t);if(s)i.length&&(r.push(e(i)),i=[]),r.push(n(s));else{let o=t.pop();if(sa.has(o))i.push(o);else{let a=Lv.get(o);if(a)i.push(...a);else if(!w3.has(o))throw A3(o)}}}return i.length&&r.push(e(i)),r}function p5(t){return t.filter(e=>e!=y3)}function g5(t,e){let n=Dv,r,i=t.length;for(;i&&(n=n.get(t[--i]),!!n);){let{V:s}=n;s&&(r=s,t.length=i)}return r}const C3=new Uint8Array(32);C3.fill(0);function q2(t){return G(t.length!==0,"invalid ENS name; empty component","comp",t),t}function x3(t){const e=vs(m5(t)),n=[];if(t.length===0)return n;let r=0;for(let i=0;i<e.length;i++)e[i]===46&&(n.push(q2(e.slice(r,i))),r=i+1);return G(r<e.length,"invalid ENS name; empty component","name",t),n.push(q2(e.slice(r))),n}function m5(t){try{if(t.length===0)throw new Error("empty label");return a5(t)}catch(e){G(!1,`invalid ENS name (${e.message})`,"name",t)}}function $v(t){G(typeof t=="string","invalid ENS name; not a string","name",t),G(t.length,"invalid ENS name (empty label)","name",t);let e=C3;const n=x3(t);for(;n.length;)e=St(mt([e,St(n.pop())]));return fe(e)}function y5(t,e){const n=e;return G(n<=255,"DNS encoded label cannot exceed 255","length",n),fe(mt(x3(t).map(r=>{G(r.length<=n,`label ${JSON.stringify(t)} exceeds ${n} bytes`,"name",t);const i=new Uint8Array(r.length+1);return i.set(r,1),i[0]=i.length-1,i})))+"00"}const k3=new Uint8Array(32);k3.fill(0);const v5=BigInt(-1),_3=BigInt(0),P3=BigInt(1),w5=BigInt("0xffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffff");function b5(t){const e=Ie(t),n=e.length%32;return n?mt([e,k3.slice(n)]):fe(e)}const E5=jo(P3,32),A5=jo(_3,32),Q2={name:"string",version:"string",chainId:"uint256",verifyingContract:"address",salt:"bytes32"},km=["name","version","chainId","verifyingContract","salt"];function Y2(t){return function(e){return G(typeof e=="string",`invalid domain value for ${JSON.stringify(t)}`,`domain.${t}`,e),e}}const S5={name:Y2("name"),version:Y2("version"),chainId:function(t){const e=we(t,"domain.chainId");return G(e>=0,"invalid chain ID","domain.chainId",t),Number.isSafeInteger(e)?Number(e):qr(e)},verifyingContract:function(t){try{return Qe(t).toLowerCase()}catch{}G(!1,'invalid domain value "verifyingContract"',"domain.verifyingContract",t)},salt:function(t){const e=Ie(t,"domain.salt");return G(e.length===32,'invalid domain value "salt"',"domain.salt",t),fe(e)}};function _m(t){{const e=t.match(/^(u?)int(\d+)$/);if(e){const n=e[1]==="",r=parseInt(e[2]);G(r%8===0&&r!==0&&r<=256&&e[2]===String(r),"invalid numeric width","type",t);const i=ma(w5,n?r-1:r),s=n?(i+P3)*v5:_3;return function(o){const a=we(o,"value");return G(a>=s&&a<=i,`value out-of-bounds for ${t}`,"value",a),jo(n?h_(a,256):a,32)}}}{const e=t.match(/^bytes(\d+)$/);if(e){const n=parseInt(e[1]);return G(n!==0&&n<=32&&e[1]===String(n),"invalid bytes width","type",t),function(r){const i=Ie(r);return G(i.length===n,`invalid length for ${t}`,"value",r),b5(r)}}}switch(t){case"address":return function(e){return xs(Qe(e),32)};case"bool":return function(e){return e?E5:A5};case"bytes":return function(e){return St(e)};case"string":return function(e){return el(e)}}return null}function J2(t,e){return`${t}(${e.map(({name:n,type:r})=>r+" "+n).join(",")})`}function ph(t){const e=t.match(/^([^\x5b]*)((\x5b\d*\x5d)*)(\x5b(\d*)\x5d)$/);return e?{base:e[1],index:e[2]+e[4],array:{base:e[1],prefix:e[1]+e[2],count:e[5]?parseInt(e[5]):-1}}:{base:t}}var vf,ns,Dc,K0,T3;const pr=class pr{constructor(e){Z(this,K0);Q(this,"primaryType");Z(this,vf);Z(this,ns);Z(this,Dc);H(this,ns,new Map),H(this,Dc,new Map);const n=new Map,r=new Map,i=new Map,s={};Object.keys(e).forEach(l=>{s[l]=e[l].map(({name:c,type:u})=>{let{base:d,index:f}=ph(u);return d==="int"&&!e.int&&(d="int256"),d==="uint"&&!e.uint&&(d="uint256"),{name:c,type:d+(f||"")}}),n.set(l,new Set),r.set(l,[]),i.set(l,new Set)}),H(this,vf,JSON.stringify(s));for(const l in s){const c=new Set;for(const u of s[l]){G(!c.has(u.name),`duplicate variable name ${JSON.stringify(u.name)} in ${JSON.stringify(l)}`,"types",e),c.add(u.name);const d=ph(u.type).base;G(d!==l,`circular type reference to ${JSON.stringify(d)}`,"types",e),!_m(d)&&(G(r.has(d),`unknown type ${JSON.stringify(d)}`,"types",e),r.get(d).push(l),n.get(l).add(d))}}const o=Array.from(r.keys()).filter(l=>r.get(l).length===0);G(o.length!==0,"missing primary type","types",e),G(o.length===1,`ambiguous primary types or unused types: ${o.map(l=>JSON.stringify(l)).join(", ")}`,"types",e),Ce(this,{primaryType:o[0]});function a(l,c){G(!c.has(l),`circular type reference to ${JSON.stringify(l)}`,"types",e),c.add(l);for(const u of n.get(l))if(r.has(u)){a(u,c);for(const d of c)i.get(d).add(u)}c.delete(l)}a(this.primaryType,new Set);for(const[l,c]of i){const u=Array.from(c);u.sort(),k(this,ns).set(l,J2(l,s[l])+u.map(d=>J2(d,s[d])).join(""))}}get types(){return JSON.parse(k(this,vf))}getEncoder(e){let n=k(this,Dc).get(e);return n||(n=ce(this,K0,T3).call(this,e),k(this,Dc).set(e,n)),n}encodeType(e){const n=k(this,ns).get(e);return G(n,`unknown type: ${JSON.stringify(e)}`,"name",e),n}encodeData(e,n){return this.getEncoder(e)(n)}hashStruct(e,n){return St(this.encodeData(e,n))}encode(e){return this.encodeData(this.primaryType,e)}hash(e){return this.hashStruct(this.primaryType,e)}_visit(e,n,r){if(_m(e))return r(e,n);const i=ph(e).array;if(i)return G(i.count===-1||i.count===n.length,`array length mismatch; expected length ${i.count}`,"value",n),n.map(o=>this._visit(i.prefix,o,r));const s=this.types[e];if(s)return s.reduce((o,{name:a,type:l})=>(o[a]=this._visit(l,n[a],r),o),{});G(!1,`unknown type: ${e}`,"type",e)}visit(e,n){return this._visit(this.primaryType,e,n)}static from(e){return new pr(e)}static getPrimaryType(e){return pr.from(e).primaryType}static hashStruct(e,n,r){return pr.from(n).hashStruct(e,r)}static hashDomain(e){const n=[];for(const r in e){if(e[r]==null)continue;const i=Q2[r];G(i,`invalid typed-data domain key: ${JSON.stringify(r)}`,"domain",e),n.push({name:r,type:i})}return n.sort((r,i)=>km.indexOf(r.name)-km.indexOf(i.name)),pr.hashStruct("EIP712Domain",{EIP712Domain:n},e)}static encode(e,n,r){return mt(["0x1901",pr.hashDomain(e),pr.from(n).hash(r)])}static hash(e,n,r){return St(pr.encode(e,n,r))}static async resolveNames(e,n,r,i){e=Object.assign({},e);for(const a in e)e[a]==null&&delete e[a];const s={};e.verifyingContract&&!nt(e.verifyingContract,20)&&(s[e.verifyingContract]="0x");const o=pr.from(n);o.visit(r,(a,l)=>(a==="address"&&!nt(l,20)&&(s[l]="0x"),l));for(const a in s)s[a]=await i(a);return e.verifyingContract&&s[e.verifyingContract]&&(e.verifyingContract=s[e.verifyingContract]),r=o.visit(r,(a,l)=>a==="address"&&s[l]?s[l]:l),{domain:e,value:r}}static getPayload(e,n,r){pr.hashDomain(e);const i={},s=[];km.forEach(l=>{const c=e[l];c!=null&&(i[l]=S5[l](c),s.push({name:l,type:Q2[l]}))});const o=pr.from(n);n=o.types;const a=Object.assign({},n);return G(a.EIP712Domain==null,"types must not contain EIP712Domain type","types.EIP712Domain",n),a.EIP712Domain=s,o.encode(r),{types:a,domain:i,primaryType:o.primaryType,message:o.visit(r,(l,c)=>{if(l.match(/^bytes(\d*)/))return fe(Ie(c));if(l.match(/^u?int/))return we(c).toString();switch(l){case"address":return c.toLowerCase();case"bool":return!!c;case"string":return G(typeof c=="string","invalid string","value",c),c}G(!1,"unsupported type","type",l)})}}};vf=new WeakMap,ns=new WeakMap,Dc=new WeakMap,K0=new WeakSet,T3=function(e){{const i=_m(e);if(i)return i}const n=ph(e).array;if(n){const i=n.prefix,s=this.getEncoder(i);return o=>{G(n.count===-1||n.count===o.length,`array length mismatch; expected length ${n.count}`,"value",o);let a=o.map(s);return k(this,ns).has(i)&&(a=a.map(St)),St(mt(a))}}const r=this.types[e];if(r){const i=el(k(this,ns).get(e));return s=>{const o=r.map(({name:a,type:l})=>{const c=this.getEncoder(l)(s[a]);return k(this,ns).has(l)?St(c):c});return o.unshift(i),mt(o)}}G(!1,`unknown type: ${e}`,"type",e)};let d0=pr;function En(t){const e=new Set;return t.forEach(n=>e.add(n)),Object.freeze(e)}const C5="external public payable override",x5=En(C5.split(" ")),R3="constant external internal payable private public pure view override",k5=En(R3.split(" ")),I3="constructor error event fallback function receive struct",O3=En(I3.split(" ")),N3="calldata memory storage payable indexed",_5=En(N3.split(" ")),P5="tuple returns",T5=[I3,N3,P5,R3].join(" "),R5=En(T5.split(" ")),I5={"(":"OPEN_PAREN",")":"CLOSE_PAREN","[":"OPEN_BRACKET","]":"CLOSE_BRACKET",",":"COMMA","@":"AT"},O5=new RegExp("^(\\s*)"),N5=new RegExp("^([0-9]+)"),M5=new RegExp("^([a-zA-Z$_][a-zA-Z0-9$_]*)"),M3=new RegExp("^([a-zA-Z$_][a-zA-Z0-9$_]*)$"),L3=new RegExp("^(address|bool|bytes([0-9]*)|string|u?int([0-9]*))$");var jt,Kr,wf,Uv;const z0=class z0{constructor(e){Z(this,wf);Z(this,jt);Z(this,Kr);H(this,jt,0),H(this,Kr,e.slice())}get offset(){return k(this,jt)}get length(){return k(this,Kr).length-k(this,jt)}clone(){return new z0(k(this,Kr))}reset(){H(this,jt,0)}popKeyword(e){const n=this.peek();if(n.type!=="KEYWORD"||!e.has(n.text))throw new Error(`expected keyword ${n.text}`);return this.pop().text}popType(e){if(this.peek().type!==e){const n=this.peek();throw new Error(`expected ${e}; got ${n.type} ${JSON.stringify(n.text)}`)}return this.pop().text}popParen(){const e=this.peek();if(e.type!=="OPEN_PAREN")throw new Error("bad start");const n=ce(this,wf,Uv).call(this,k(this,jt)+1,e.match+1);return H(this,jt,e.match+1),n}popParams(){const e=this.peek();if(e.type!=="OPEN_PAREN")throw new Error("bad start");const n=[];for(;k(this,jt)<e.match-1;){const r=this.peek().linkNext;n.push(ce(this,wf,Uv).call(this,k(this,jt)+1,r)),H(this,jt,r)}return H(this,jt,e.match+1),n}peek(){if(k(this,jt)>=k(this,Kr).length)throw new Error("out-of-bounds");return k(this,Kr)[k(this,jt)]}peekKeyword(e){const n=this.peekType("KEYWORD");return n!=null&&e.has(n)?n:null}peekType(e){if(this.length===0)return null;const n=this.peek();return n.type===e?n.text:null}pop(){const e=this.peek();return Pu(this,jt)._++,e}toString(){const e=[];for(let n=k(this,jt);n<k(this,Kr).length;n++){const r=k(this,Kr)[n];e.push(`${r.type}:${r.text}`)}return`<TokenString ${e.join(" ")}>`}};jt=new WeakMap,Kr=new WeakMap,wf=new WeakSet,Uv=function(e=0,n=0){return new z0(k(this,Kr).slice(e,n).map(r=>Object.freeze(Object.assign({},r,{match:r.match-e,linkBack:r.linkBack-e,linkNext:r.linkNext-e}))))};let ni=z0;function Jo(t){const e=[],n=o=>{const a=s<t.length?JSON.stringify(t[s]):"$EOI";throw new Error(`invalid token ${a} at ${s}: ${o}`)};let r=[],i=[],s=0;for(;s<t.length;){let o=t.substring(s),a=o.match(O5);a&&(s+=a[1].length,o=t.substring(s));const l={depth:r.length,linkBack:-1,linkNext:-1,match:-1,type:"",text:"",offset:s,value:-1};e.push(l);let c=I5[o[0]]||"";if(c){if(l.type=c,l.text=o[0],s++,c==="OPEN_PAREN")r.push(e.length-1),i.push(e.length-1);else if(c=="CLOSE_PAREN")r.length===0&&n("no matching open bracket"),l.match=r.pop(),e[l.match].match=e.length-1,l.depth--,l.linkBack=i.pop(),e[l.linkBack].linkNext=e.length-1;else if(c==="COMMA")l.linkBack=i.pop(),e[l.linkBack].linkNext=e.length-1,i.push(e.length-1);else if(c==="OPEN_BRACKET")l.type="BRACKET";else if(c==="CLOSE_BRACKET"){let u=e.pop().text;if(e.length>0&&e[e.length-1].type==="NUMBER"){const d=e.pop().text;u=d+u,e[e.length-1].value=_e(d)}if(e.length===0||e[e.length-1].type!=="BRACKET")throw new Error("missing opening bracket");e[e.length-1].text+=u}continue}if(a=o.match(M5),a){if(l.text=a[1],s+=l.text.length,R5.has(l.text)){l.type="KEYWORD";continue}if(l.text.match(L3)){l.type="TYPE";continue}l.type="ID";continue}if(a=o.match(N5),a){l.text=a[1],l.type="NUMBER",s+=l.text.length;continue}throw new Error(`unexpected token ${JSON.stringify(o[0])} at position ${s}`)}return new ni(e.map(o=>Object.freeze(o)))}function Z2(t,e){let n=[];for(const r in e.keys())t.has(r)&&n.push(r);if(n.length>1)throw new Error(`conflicting types: ${n.join(", ")}`)}function Ag(t,e){if(e.peekKeyword(O3)){const n=e.pop().text;if(n!==t)throw new Error(`expected ${t}, got ${n}`)}return e.popType("ID")}function ks(t,e){const n=new Set;for(;;){const r=t.peekType("KEYWORD");if(r==null||e&&!e.has(r))break;if(t.pop(),n.has(r))throw new Error(`duplicate keywords: ${JSON.stringify(r)}`);n.add(r)}return Object.freeze(n)}function B3(t){let e=ks(t,k5);return Z2(e,En("constant payable nonpayable".split(" "))),Z2(e,En("pure view payable nonpayable".split(" "))),e.has("view")?"view":e.has("pure")?"pure":e.has("payable")?"payable":e.has("nonpayable")?"nonpayable":e.has("constant")?"view":"nonpayable"}function ws(t,e){return t.popParams().map(n=>qt.from(n,e))}function D3(t){if(t.peekType("AT")){if(t.pop(),t.peekType("NUMBER"))return we(t.pop().text);throw new Error("invalid gas")}return null}function tl(t){if(t.length)throw new Error(`unexpected tokens at offset ${t.offset}: ${t.toString()}`)}const L5=new RegExp(/^(.*)\[([0-9]*)\]$/);function X2(t){const e=t.match(L3);if(G(e,"invalid type","type",t),t==="uint")return"uint256";if(t==="int")return"int256";if(e[2]){const n=parseInt(e[2]);G(n!==0&&n<=32,"invalid bytes length","type",t)}else if(e[3]){const n=parseInt(e[3]);G(n!==0&&n<=256&&n%8===0,"invalid numeric width","type",t)}return t}const ct={},Hn=Symbol.for("_ethers_internal"),eA="_ParamTypeInternal",tA="_ErrorInternal",nA="_EventInternal",rA="_ConstructorInternal",iA="_FallbackInternal",sA="_FunctionInternal",oA="_StructInternal";var $c,ip;const gr=class gr{constructor(e,n,r,i,s,o,a,l){Z(this,$c);Q(this,"name");Q(this,"type");Q(this,"baseType");Q(this,"indexed");Q(this,"components");Q(this,"arrayLength");Q(this,"arrayChildren");if(Of(e,ct,"ParamType"),Object.defineProperty(this,Hn,{value:eA}),o&&(o=Object.freeze(o.slice())),i==="array"){if(a==null||l==null)throw new Error("")}else if(a!=null||l!=null)throw new Error("");if(i==="tuple"){if(o==null)throw new Error("")}else if(o!=null)throw new Error("");Ce(this,{name:n,type:r,baseType:i,indexed:s,components:o,arrayLength:a,arrayChildren:l})}format(e){if(e==null&&(e="sighash"),e==="json"){const r=this.name||"";if(this.isArray()){const s=JSON.parse(this.arrayChildren.format("json"));return s.name=r,s.type+=`[${this.arrayLength<0?"":String(this.arrayLength)}]`,JSON.stringify(s)}const i={type:this.baseType==="tuple"?"tuple":this.type,name:r};return typeof this.indexed=="boolean"&&(i.indexed=this.indexed),this.isTuple()&&(i.components=this.components.map(s=>JSON.parse(s.format(e)))),JSON.stringify(i)}let n="";return this.isArray()?(n+=this.arrayChildren.format(e),n+=`[${this.arrayLength<0?"":String(this.arrayLength)}]`):this.isTuple()?n+="("+this.components.map(r=>r.format(e)).join(e==="full"?", ":",")+")":n+=this.type,e!=="sighash"&&(this.indexed===!0&&(n+=" indexed"),e==="full"&&this.name&&(n+=" "+this.name)),n}isArray(){return this.baseType==="array"}isTuple(){return this.baseType==="tuple"}isIndexable(){return this.indexed!=null}walk(e,n){if(this.isArray()){if(!Array.isArray(e))throw new Error("invalid array value");if(this.arrayLength!==-1&&e.length!==this.arrayLength)throw new Error("array is wrong length");const r=this;return e.map(i=>r.arrayChildren.walk(i,n))}if(this.isTuple()){if(!Array.isArray(e))throw new Error("invalid tuple value");if(e.length!==this.components.length)throw new Error("array is wrong length");const r=this;return e.map((i,s)=>r.components[s].walk(i,n))}return n(this.type,e)}async walkAsync(e,n){const r=[],i=[e];return ce(this,$c,ip).call(this,r,e,n,s=>{i[0]=s}),r.length&&await Promise.all(r),i[0]}static from(e,n){if(gr.isParamType(e))return e;if(typeof e=="string")try{return gr.from(Jo(e),n)}catch{G(!1,"invalid param type","obj",e)}else if(e instanceof ni){let a="",l="",c=null;ks(e,En(["tuple"])).has("tuple")||e.peekType("OPEN_PAREN")?(l="tuple",c=e.popParams().map(g=>gr.from(g)),a=`tuple(${c.map(g=>g.format()).join(",")})`):(a=X2(e.popType("TYPE")),l=a);let u=null,d=null;for(;e.length&&e.peekType("BRACKET");){const g=e.pop();u=new gr(ct,"",a,l,null,c,d,u),d=g.value,a+=g.text,l="array",c=null}let f=null;if(ks(e,_5).has("indexed")){if(!n)throw new Error("");f=!0}const m=e.peekType("ID")?e.pop().text:"";if(e.length)throw new Error("leftover tokens");return new gr(ct,m,a,l,f,c,d,u)}const r=e.name;G(!r||typeof r=="string"&&r.match(M3),"invalid name","obj.name",r);let i=e.indexed;i!=null&&(G(n,"parameter cannot be indexed","obj.indexed",e.indexed),i=!!i);let s=e.type,o=s.match(L5);if(o){const a=parseInt(o[2]||"-1"),l=gr.from({type:o[1],components:e.components});return new gr(ct,r||"",s,"array",i,null,a,l)}if(s==="tuple"||s.startsWith("tuple(")||s.startsWith("(")){const a=e.components!=null?e.components.map(c=>gr.from(c)):null;return new gr(ct,r||"",s,"tuple",i,a,null,null)}return s=X2(e.type),new gr(ct,r||"",s,s,i,null,null,null)}static isParamType(e){return e&&e[Hn]===eA}};$c=new WeakSet,ip=function(e,n,r,i){if(this.isArray()){if(!Array.isArray(n))throw new Error("invalid array value");if(this.arrayLength!==-1&&n.length!==this.arrayLength)throw new Error("array is wrong length");const o=this.arrayChildren,a=n.slice();a.forEach((l,c)=>{var u;ce(u=o,$c,ip).call(u,e,l,r,d=>{a[c]=d})}),i(a);return}if(this.isTuple()){const o=this.components;let a;if(Array.isArray(n))a=n.slice();else{if(n==null||typeof n!="object")throw new Error("invalid tuple value");a=o.map(l=>{if(!l.name)throw new Error("cannot use object value with unnamed components");if(!(l.name in n))throw new Error(`missing value for component ${l.name}`);return n[l.name]})}if(a.length!==this.components.length)throw new Error("array is wrong length");a.forEach((l,c)=>{var u;ce(u=o[c],$c,ip).call(u,e,l,r,d=>{a[c]=d})}),i(a);return}const s=r(this.type,n);s.then?e.push(async function(){i(await s)}()):i(s)};let qt=gr;class nl{constructor(e,n,r){Q(this,"type");Q(this,"inputs");Of(e,ct,"Fragment"),r=Object.freeze(r.slice()),Ce(this,{type:n,inputs:r})}static from(e){if(typeof e=="string"){try{nl.from(JSON.parse(e))}catch{}return nl.from(Jo(e))}if(e instanceof ni)switch(e.peekKeyword(O3)){case"constructor":return fs.from(e);case"error":return Mn.from(e);case"event":return Ai.from(e);case"fallback":case"receive":return Wi.from(e);case"function":return Si.from(e);case"struct":return Wa.from(e)}else if(typeof e=="object"){switch(e.type){case"constructor":return fs.from(e);case"error":return Mn.from(e);case"event":return Ai.from(e);case"fallback":case"receive":return Wi.from(e);case"function":return Si.from(e);case"struct":return Wa.from(e)}se(!1,`unsupported type: ${e.type}`,"UNSUPPORTED_OPERATION",{operation:"Fragment.from"})}G(!1,"unsupported frgament object","obj",e)}static isConstructor(e){return fs.isFragment(e)}static isError(e){return Mn.isFragment(e)}static isEvent(e){return Ai.isFragment(e)}static isFunction(e){return Si.isFragment(e)}static isStruct(e){return Wa.isFragment(e)}}class Sg extends nl{constructor(n,r,i,s){super(n,r,s);Q(this,"name");G(typeof i=="string"&&i.match(M3),"invalid identifier","name",i),s=Object.freeze(s.slice()),Ce(this,{name:i})}}function Qd(t,e){return"("+e.map(n=>n.format(t)).join(t==="full"?", ":",")+")"}class Mn extends Sg{constructor(e,n,r){super(e,"error",n,r),Object.defineProperty(this,Hn,{value:tA})}get selector(){return el(this.format("sighash")).substring(0,10)}format(e){if(e==null&&(e="sighash"),e==="json")return JSON.stringify({type:"error",name:this.name,inputs:this.inputs.map(r=>JSON.parse(r.format(e)))});const n=[];return e!=="sighash"&&n.push("error"),n.push(this.name+Qd(e,this.inputs)),n.join(" ")}static from(e){if(Mn.isFragment(e))return e;if(typeof e=="string")return Mn.from(Jo(e));if(e instanceof ni){const n=Ag("error",e),r=ws(e);return tl(e),new Mn(ct,n,r)}return new Mn(ct,e.name,e.inputs?e.inputs.map(qt.from):[])}static isFragment(e){return e&&e[Hn]===tA}}class Ai extends Sg{constructor(n,r,i,s){super(n,"event",r,i);Q(this,"anonymous");Object.defineProperty(this,Hn,{value:nA}),Ce(this,{anonymous:s})}get topicHash(){return el(this.format("sighash"))}format(n){if(n==null&&(n="sighash"),n==="json")return JSON.stringify({type:"event",anonymous:this.anonymous,name:this.name,inputs:this.inputs.map(i=>JSON.parse(i.format(n)))});const r=[];return n!=="sighash"&&r.push("event"),r.push(this.name+Qd(n,this.inputs)),n!=="sighash"&&this.anonymous&&r.push("anonymous"),r.join(" ")}static getTopicHash(n,r){return r=(r||[]).map(s=>qt.from(s)),new Ai(ct,n,r,!1).topicHash}static from(n){if(Ai.isFragment(n))return n;if(typeof n=="string")try{return Ai.from(Jo(n))}catch{G(!1,"invalid event fragment","obj",n)}else if(n instanceof ni){const r=Ag("event",n),i=ws(n,!0),s=!!ks(n,En(["anonymous"])).has("anonymous");return tl(n),new Ai(ct,r,i,s)}return new Ai(ct,n.name,n.inputs?n.inputs.map(r=>qt.from(r,!0)):[],!!n.anonymous)}static isFragment(n){return n&&n[Hn]===nA}}class fs extends nl{constructor(n,r,i,s,o){super(n,r,i);Q(this,"payable");Q(this,"gas");Object.defineProperty(this,Hn,{value:rA}),Ce(this,{payable:s,gas:o})}format(n){if(se(n!=null&&n!=="sighash","cannot format a constructor for sighash","UNSUPPORTED_OPERATION",{operation:"format(sighash)"}),n==="json")return JSON.stringify({type:"constructor",stateMutability:this.payable?"payable":"undefined",payable:this.payable,gas:this.gas!=null?this.gas:void 0,inputs:this.inputs.map(i=>JSON.parse(i.format(n)))});const r=[`constructor${Qd(n,this.inputs)}`];return this.payable&&r.push("payable"),this.gas!=null&&r.push(`@${this.gas.toString()}`),r.join(" ")}static from(n){if(fs.isFragment(n))return n;if(typeof n=="string")try{return fs.from(Jo(n))}catch{G(!1,"invalid constuctor fragment","obj",n)}else if(n instanceof ni){ks(n,En(["constructor"]));const r=ws(n),i=!!ks(n,x5).has("payable"),s=D3(n);return tl(n),new fs(ct,"constructor",r,i,s)}return new fs(ct,"constructor",n.inputs?n.inputs.map(qt.from):[],!!n.payable,n.gas!=null?n.gas:null)}static isFragment(n){return n&&n[Hn]===rA}}class Wi extends nl{constructor(n,r,i){super(n,"fallback",r);Q(this,"payable");Object.defineProperty(this,Hn,{value:iA}),Ce(this,{payable:i})}format(n){const r=this.inputs.length===0?"receive":"fallback";if(n==="json"){const i=this.payable?"payable":"nonpayable";return JSON.stringify({type:r,stateMutability:i})}return`${r}()${this.payable?" payable":""}`}static from(n){if(Wi.isFragment(n))return n;if(typeof n=="string")try{return Wi.from(Jo(n))}catch{G(!1,"invalid fallback fragment","obj",n)}else if(n instanceof ni){const r=n.toString(),i=n.peekKeyword(En(["fallback","receive"]));if(G(i,"type must be fallback or receive","obj",r),n.popKeyword(En(["fallback","receive"]))==="receive"){const l=ws(n);return G(l.length===0,"receive cannot have arguments","obj.inputs",l),ks(n,En(["payable"])),tl(n),new Wi(ct,[],!0)}let o=ws(n);o.length?G(o.length===1&&o[0].type==="bytes","invalid fallback inputs","obj.inputs",o.map(l=>l.format("minimal")).join(", ")):o=[qt.from("bytes")];const a=B3(n);if(G(a==="nonpayable"||a==="payable","fallback cannot be constants","obj.stateMutability",a),ks(n,En(["returns"])).has("returns")){const l=ws(n);G(l.length===1&&l[0].type==="bytes","invalid fallback outputs","obj.outputs",l.map(c=>c.format("minimal")).join(", "))}return tl(n),new Wi(ct,o,a==="payable")}if(n.type==="receive")return new Wi(ct,[],!0);if(n.type==="fallback"){const r=[qt.from("bytes")],i=n.stateMutability==="payable";return new Wi(ct,r,i)}G(!1,"invalid fallback description","obj",n)}static isFragment(n){return n&&n[Hn]===iA}}class Si extends Sg{constructor(n,r,i,s,o,a){super(n,"function",r,s);Q(this,"constant");Q(this,"outputs");Q(this,"stateMutability");Q(this,"payable");Q(this,"gas");Object.defineProperty(this,Hn,{value:sA}),o=Object.freeze(o.slice()),Ce(this,{constant:i==="view"||i==="pure",gas:a,outputs:o,payable:i==="payable",stateMutability:i})}get selector(){return el(this.format("sighash")).substring(0,10)}format(n){if(n==null&&(n="sighash"),n==="json")return JSON.stringify({type:"function",name:this.name,constant:this.constant,stateMutability:this.stateMutability!=="nonpayable"?this.stateMutability:void 0,payable:this.payable,gas:this.gas!=null?this.gas:void 0,inputs:this.inputs.map(i=>JSON.parse(i.format(n))),outputs:this.outputs.map(i=>JSON.parse(i.format(n)))});const r=[];return n!=="sighash"&&r.push("function"),r.push(this.name+Qd(n,this.inputs)),n!=="sighash"&&(this.stateMutability!=="nonpayable"&&r.push(this.stateMutability),this.outputs&&this.outputs.length&&(r.push("returns"),r.push(Qd(n,this.outputs))),this.gas!=null&&r.push(`@${this.gas.toString()}`)),r.join(" ")}static getSelector(n,r){return r=(r||[]).map(s=>qt.from(s)),new Si(ct,n,"view",r,[],null).selector}static from(n){if(Si.isFragment(n))return n;if(typeof n=="string")try{return Si.from(Jo(n))}catch{G(!1,"invalid function fragment","obj",n)}else if(n instanceof ni){const i=Ag("function",n),s=ws(n),o=B3(n);let a=[];ks(n,En(["returns"])).has("returns")&&(a=ws(n));const l=D3(n);return tl(n),new Si(ct,i,o,s,a,l)}let r=n.stateMutability;return r==null&&(r="payable",typeof n.constant=="boolean"?(r="view",n.constant||(r="payable",typeof n.payable=="boolean"&&!n.payable&&(r="nonpayable"))):typeof n.payable=="boolean"&&!n.payable&&(r="nonpayable")),new Si(ct,n.name,r,n.inputs?n.inputs.map(qt.from):[],n.outputs?n.outputs.map(qt.from):[],n.gas!=null?n.gas:null)}static isFragment(n){return n&&n[Hn]===sA}}class Wa extends Sg{constructor(e,n,r){super(e,"struct",n,r),Object.defineProperty(this,Hn,{value:oA})}format(){throw new Error("@TODO")}static from(e){if(typeof e=="string")try{return Wa.from(Jo(e))}catch{G(!1,"invalid struct fragment","obj",e)}else if(e instanceof ni){const n=Ag("struct",e),r=ws(e);return tl(e),new Wa(ct,n,r)}return new Wa(ct,e.name,e.inputs?e.inputs.map(qt.from):[])}static isFragment(e){return e&&e[Hn]===oA}}const ri=new Map;ri.set(0,"GENERIC_PANIC");ri.set(1,"ASSERT_FALSE");ri.set(17,"OVERFLOW");ri.set(18,"DIVIDE_BY_ZERO");ri.set(33,"ENUM_RANGE_ERROR");ri.set(34,"BAD_STORAGE_DATA");ri.set(49,"STACK_UNDERFLOW");ri.set(50,"ARRAY_RANGE_ERROR");ri.set(65,"OUT_OF_MEMORY");ri.set(81,"UNINITIALIZED_FUNCTION_CALL");const B5=new RegExp(/^bytes([0-9]*)$/),D5=new RegExp(/^(u?int)([0-9]*)$/);let Pm=null,aA=1024;function $5(t,e,n,r){let i="missing revert data",s=null;const o=null;let a=null;if(n){i="execution reverted";const c=Ie(n);if(n=fe(n),c.length===0)i+=" (no data present; likely require(false) occurred",s="require(false)";else if(c.length%32!==4)i+=" (could not decode reason; invalid data length)";else if(fe(c.slice(0,4))==="0x08c379a0")try{s=r.decode(["string"],c.slice(4))[0],a={signature:"Error(string)",name:"Error",args:[s]},i+=`: ${JSON.stringify(s)}`}catch{i+=" (could not decode reason; invalid string data)"}else if(fe(c.slice(0,4))==="0x4e487b71")try{const u=Number(r.decode(["uint256"],c.slice(4))[0]);a={signature:"Panic(uint256)",name:"Panic",args:[u]},s=`Panic due to ${ri.get(u)||"UNKNOWN"}(${u})`,i+=`: ${s}`}catch{i+=" (could not decode panic code)"}else i+=" (unknown custom error)"}const l={to:e.to?Qe(e.to):null,data:e.data||"0x"};return e.from&&(l.from=Qe(e.from)),st(i,"CALL_EXCEPTION",{action:t,data:n,reason:s,transaction:l,invocation:o,revert:a})}var uo,Cl;const V0=class V0{constructor(){Z(this,uo)}getDefaultValue(e){const n=e.map(i=>ce(this,uo,Cl).call(this,qt.from(i)));return new hh(n,"_").defaultValue()}encode(e,n){u_(n.length,e.length,"types/values length mismatch");const r=e.map(o=>ce(this,uo,Cl).call(this,qt.from(o))),i=new hh(r,"_"),s=new xv;return i.encode(s,n),s.data}decode(e,n,r){const i=e.map(o=>ce(this,uo,Cl).call(this,qt.from(o)));return new hh(i,"_").decode(new kv(n,r,aA))}static _setDefaultMaxInflation(e){G(typeof e=="number"&&Number.isInteger(e),"invalid defaultMaxInflation factor","value",e),aA=e}static defaultAbiCoder(){return Pm==null&&(Pm=new V0),Pm}static getBuiltinCallException(e,n,r){return $5(e,n,r,V0.defaultAbiCoder())}};uo=new WeakSet,Cl=function(e){if(e.isArray())return new nM(ce(this,uo,Cl).call(this,e.arrayChildren),e.arrayLength,e.name);if(e.isTuple())return new hh(e.components.map(r=>ce(this,uo,Cl).call(this,r)),e.name);switch(e.baseType){case"address":return new eM(e.name);case"bool":return new rM(e.name);case"string":return new fM(e.name);case"bytes":return new iM(e.name);case"":return new aM(e.name)}let n=e.type.match(D5);if(n){let r=parseInt(n[2]||"256");return G(r!==0&&r<=256&&r%8===0,"invalid "+n[1]+" bit length","param",e),new dM(r/8,n[1]==="int",e.name)}if(n=e.type.match(B5),n){let r=parseInt(n[1]);return G(r!==0&&r<=32,"invalid bytes length","param",e),new sM(r,e.name)}G(!1,"invalid type","type",e.type)};let Yd=V0;class U5{constructor(e,n,r){Q(this,"fragment");Q(this,"name");Q(this,"signature");Q(this,"topic");Q(this,"args");const i=e.name,s=e.format();Ce(this,{fragment:e,name:i,signature:s,topic:n,args:r})}}class F5{constructor(e,n,r,i){Q(this,"fragment");Q(this,"name");Q(this,"args");Q(this,"signature");Q(this,"selector");Q(this,"value");const s=e.name,o=e.format();Ce(this,{fragment:e,name:s,args:r,signature:o,selector:n,value:i})}}class j5{constructor(e,n,r){Q(this,"fragment");Q(this,"name");Q(this,"args");Q(this,"signature");Q(this,"selector");const i=e.name,s=e.format();Ce(this,{fragment:e,name:i,args:r,signature:s,selector:n})}}class lA{constructor(e){Q(this,"hash");Q(this,"_isIndexed");Ce(this,{hash:e,_isIndexed:!0})}static isIndexed(e){return!!(e&&e._isIndexed)}}const cA={0:"generic panic",1:"assert(false)",17:"arithmetic overflow",18:"division or modulo by zero",33:"enum overflow",34:"invalid encoded storage byte array accessed",49:"out-of-bounds array access; popping on an empty array",50:"out-of-bounds access of an array or bytesN",65:"out of memory",81:"uninitialized function"},uA={"0x08c379a0":{signature:"Error(string)",name:"Error",inputs:["string"],reason:t=>`reverted with reason string ${JSON.stringify(t)}`},"0x4e487b71":{signature:"Panic(uint256)",name:"Panic",inputs:["uint256"],reason:t=>{let e="unknown panic code";return t>=0&&t<=255&&cA[t.toString()]&&(e=cA[t.toString()]),`reverted with panic code 0x${t.toString(16)} (${e})`}}};var gi,mi,yi,en,Di,sp,op;const da=class da{constructor(e){Z(this,Di);Q(this,"fragments");Q(this,"deploy");Q(this,"fallback");Q(this,"receive");Z(this,gi);Z(this,mi);Z(this,yi);Z(this,en);let n=[];typeof e=="string"?n=JSON.parse(e):n=e,H(this,yi,new Map),H(this,gi,new Map),H(this,mi,new Map);const r=[];for(const o of n)try{r.push(nl.from(o))}catch(a){console.log(`[Warning] Invalid Fragment ${JSON.stringify(o)}:`,a.message)}Ce(this,{fragments:Object.freeze(r)});let i=null,s=!1;H(this,en,this.getAbiCoder()),this.fragments.forEach((o,a)=>{let l;switch(o.type){case"constructor":if(this.deploy){console.log("duplicate definition - constructor");return}Ce(this,{deploy:o});return;case"fallback":o.inputs.length===0?s=!0:(G(!i||o.payable!==i.payable,"conflicting fallback fragments",`fragments[${a}]`,o),i=o,s=i.payable);return;case"function":l=k(this,yi);break;case"event":l=k(this,mi);break;case"error":l=k(this,gi);break;default:return}const c=o.format();l.has(c)||l.set(c,o)}),this.deploy||Ce(this,{deploy:fs.from("constructor()")}),Ce(this,{fallback:i,receive:s})}format(e){const n=e?"minimal":"full";return this.fragments.map(i=>i.format(n))}formatJson(){const e=this.fragments.map(n=>n.format("json"));return JSON.stringify(e.map(n=>JSON.parse(n)))}getAbiCoder(){return Yd.defaultAbiCoder()}getFunctionName(e){const n=ce(this,Di,sp).call(this,e,null,!1);return G(n,"no matching function","key",e),n.name}hasFunction(e){return!!ce(this,Di,sp).call(this,e,null,!1)}getFunction(e,n){return ce(this,Di,sp).call(this,e,n||null,!0)}forEachFunction(e){const n=Array.from(k(this,yi).keys());n.sort((r,i)=>r.localeCompare(i));for(let r=0;r<n.length;r++){const i=n[r];e(k(this,yi).get(i),r)}}getEventName(e){const n=ce(this,Di,op).call(this,e,null,!1);return G(n,"no matching event","key",e),n.name}hasEvent(e){return!!ce(this,Di,op).call(this,e,null,!1)}getEvent(e,n){return ce(this,Di,op).call(this,e,n||null,!0)}forEachEvent(e){const n=Array.from(k(this,mi).keys());n.sort((r,i)=>r.localeCompare(i));for(let r=0;r<n.length;r++){const i=n[r];e(k(this,mi).get(i),r)}}getError(e,n){if(nt(e)){const i=e.toLowerCase();if(uA[i])return Mn.from(uA[i].signature);for(const s of k(this,gi).values())if(i===s.selector)return s;return null}if(e.indexOf("(")===-1){const i=[];for(const[s,o]of k(this,gi))s.split("(")[0]===e&&i.push(o);if(i.length===0)return e==="Error"?Mn.from("error Error(string)"):e==="Panic"?Mn.from("error Panic(uint256)"):null;if(i.length>1){const s=i.map(o=>JSON.stringify(o.format())).join(", ");G(!1,`ambiguous error description (i.e. ${s})`,"name",e)}return i[0]}if(e=Mn.from(e).format(),e==="Error(string)")return Mn.from("error Error(string)");if(e==="Panic(uint256)")return Mn.from("error Panic(uint256)");const r=k(this,gi).get(e);return r||null}forEachError(e){const n=Array.from(k(this,gi).keys());n.sort((r,i)=>r.localeCompare(i));for(let r=0;r<n.length;r++){const i=n[r];e(k(this,gi).get(i),r)}}_decodeParams(e,n){return k(this,en).decode(e,n)}_encodeParams(e,n){return k(this,en).encode(e,n)}encodeDeploy(e){return this._encodeParams(this.deploy.inputs,e||[])}decodeErrorResult(e,n){if(typeof e=="string"){const r=this.getError(e);G(r,"unknown error","fragment",e),e=r}return G(ht(n,0,4)===e.selector,`data signature does not match error ${e.name}.`,"data",n),this._decodeParams(e.inputs,ht(n,4))}encodeErrorResult(e,n){if(typeof e=="string"){const r=this.getError(e);G(r,"unknown error","fragment",e),e=r}return mt([e.selector,this._encodeParams(e.inputs,n||[])])}decodeFunctionData(e,n){if(typeof e=="string"){const r=this.getFunction(e);G(r,"unknown function","fragment",e),e=r}return G(ht(n,0,4)===e.selector,`data signature does not match function ${e.name}.`,"data",n),this._decodeParams(e.inputs,ht(n,4))}encodeFunctionData(e,n){if(typeof e=="string"){const r=this.getFunction(e);G(r,"unknown function","fragment",e),e=r}return mt([e.selector,this._encodeParams(e.inputs,n||[])])}decodeFunctionResult(e,n){if(typeof e=="string"){const s=this.getFunction(e);G(s,"unknown function","fragment",e),e=s}let r="invalid length for result data";const i=vn(n);if(i.length%32===0)try{return k(this,en).decode(e.outputs,i)}catch{r="could not decode result data"}se(!1,r,"BAD_DATA",{value:fe(i),info:{method:e.name,signature:e.format()}})}makeError(e,n){const r=Ie(e,"data"),i=Yd.getBuiltinCallException("call",n,r);if(i.message.startsWith("execution reverted (unknown custom error)")){const a=fe(r.slice(0,4)),l=this.getError(a);if(l)try{const c=k(this,en).decode(l.inputs,r.slice(4));i.revert={name:l.name,signature:l.format(),args:c},i.reason=i.revert.signature,i.message=`execution reverted: ${i.reason}`}catch{i.message="execution reverted (coult not decode custom error)"}}const o=this.parseTransaction(n);return o&&(i.invocation={method:o.name,signature:o.signature,args:o.args}),i}encodeFunctionResult(e,n){if(typeof e=="string"){const r=this.getFunction(e);G(r,"unknown function","fragment",e),e=r}return fe(k(this,en).encode(e.outputs,n||[]))}encodeFilterTopics(e,n){if(typeof e=="string"){const s=this.getEvent(e);G(s,"unknown event","eventFragment",e),e=s}se(n.length<=e.inputs.length,`too many arguments for ${e.format()}`,"UNEXPECTED_ARGUMENT",{count:n.length,expectedCount:e.inputs.length});const r=[];e.anonymous||r.push(e.topicHash);const i=(s,o)=>s.type==="string"?el(o):s.type==="bytes"?St(fe(o)):(s.type==="bool"&&typeof o=="boolean"?o=o?"0x01":"0x00":s.type.match(/^u?int/)?o=jo(o):s.type.match(/^bytes/)?o=iN(o,32):s.type==="address"&&k(this,en).encode(["address"],[o]),xs(fe(o),32));for(n.forEach((s,o)=>{const a=e.inputs[o];if(!a.indexed){G(s==null,"cannot filter non-indexed parameters; must be null","contract."+a.name,s);return}s==null?r.push(null):a.baseType==="array"||a.baseType==="tuple"?G(!1,"filtering with tuples or arrays not supported","contract."+a.name,s):Array.isArray(s)?r.push(s.map(l=>i(a,l))):r.push(i(a,s))});r.length&&r[r.length-1]===null;)r.pop();return r}encodeEventLog(e,n){if(typeof e=="string"){const o=this.getEvent(e);G(o,"unknown event","eventFragment",e),e=o}const r=[],i=[],s=[];return e.anonymous||r.push(e.topicHash),G(n.length===e.inputs.length,"event arguments/values mismatch","values",n),e.inputs.forEach((o,a)=>{const l=n[a];if(o.indexed)if(o.type==="string")r.push(el(l));else if(o.type==="bytes")r.push(St(l));else{if(o.baseType==="tuple"||o.baseType==="array")throw new Error("not implemented");r.push(k(this,en).encode([o.type],[l]))}else i.push(o),s.push(l)}),{data:k(this,en).encode(i,s),topics:r}}decodeEventLog(e,n,r){if(typeof e=="string"){const h=this.getEvent(e);G(h,"unknown event","eventFragment",e),e=h}if(r!=null&&!e.anonymous){const h=e.topicHash;G(nt(r[0],32)&&r[0].toLowerCase()===h,"fragment/topic mismatch","topics[0]",r[0]),r=r.slice(1)}const i=[],s=[],o=[];e.inputs.forEach((h,m)=>{h.indexed?h.type==="string"||h.type==="bytes"||h.baseType==="tuple"||h.baseType==="array"?(i.push(qt.from({type:"bytes32",name:h.name})),o.push(!0)):(i.push(h),o.push(!1)):(s.push(h),o.push(!1))});const a=r!=null?k(this,en).decode(i,mt(r)):null,l=k(this,en).decode(s,n,!0),c=[],u=[];let d=0,f=0;return e.inputs.forEach((h,m)=>{let g=null;if(h.indexed)if(a==null)g=new lA(null);else if(o[m])g=new lA(a[f++]);else try{g=a[f++]}catch(w){g=w}else try{g=l[d++]}catch(w){g=w}c.push(g),u.push(h.name||null)}),au.fromItems(c,u)}parseTransaction(e){const n=Ie(e.data,"tx.data"),r=we(e.value!=null?e.value:0,"tx.value"),i=this.getFunction(fe(n.slice(0,4)));if(!i)return null;const s=k(this,en).decode(i.inputs,n.slice(4));return new F5(i,i.selector,s,r)}parseCallResult(e){throw new Error("@TODO")}parseLog(e){const n=this.getEvent(e.topics[0]);return!n||n.anonymous?null:new U5(n,n.topicHash,this.decodeEventLog(n,e.data,e.topics))}parseError(e){const n=fe(e),r=this.getError(ht(n,0,4));if(!r)return null;const i=k(this,en).decode(r.inputs,ht(n,4));return new j5(r,r.selector,i)}static from(e){return e instanceof da?e:typeof e=="string"?new da(JSON.parse(e)):typeof e.formatJson=="function"?new da(e.formatJson()):typeof e.format=="function"?new da(e.format("json")):new da(e)}};gi=new WeakMap,mi=new WeakMap,yi=new WeakMap,en=new WeakMap,Di=new WeakSet,sp=function(e,n,r){if(nt(e)){const s=e.toLowerCase();for(const o of k(this,yi).values())if(s===o.selector)return o;return null}if(e.indexOf("(")===-1){const s=[];for(const[o,a]of k(this,yi))o.split("(")[0]===e&&s.push(a);if(n){const o=n.length>0?n[n.length-1]:null;let a=n.length,l=!0;cn.isTyped(o)&&o.type==="overrides"&&(l=!1,a--);for(let c=s.length-1;c>=0;c--){const u=s[c].inputs.length;u!==a&&(!l||u!==a-1)&&s.splice(c,1)}for(let c=s.length-1;c>=0;c--){const u=s[c].inputs;for(let d=0;d<n.length;d++)if(cn.isTyped(n[d])){if(d>=u.length){if(n[d].type==="overrides")continue;s.splice(c,1);break}if(n[d].type!==u[d].baseType){s.splice(c,1);break}}}}if(s.length===1&&n&&n.length!==s[0].inputs.length){const o=n[n.length-1];(o==null||Array.isArray(o)||typeof o!="object")&&s.splice(0,1)}if(s.length===0)return null;if(s.length>1&&r){const o=s.map(a=>JSON.stringify(a.format())).join(", ");G(!1,`ambiguous function description (i.e. matches ${o})`,"key",e)}return s[0]}const i=k(this,yi).get(Si.from(e).format());return i||null},op=function(e,n,r){if(nt(e)){const s=e.toLowerCase();for(const o of k(this,mi).values())if(s===o.topicHash)return o;return null}if(e.indexOf("(")===-1){const s=[];for(const[o,a]of k(this,mi))o.split("(")[0]===e&&s.push(a);if(n){for(let o=s.length-1;o>=0;o--)s[o].inputs.length<n.length&&s.splice(o,1);for(let o=s.length-1;o>=0;o--){const a=s[o].inputs;for(let l=0;l<n.length;l++)if(cn.isTyped(n[l])&&n[l].type!==a[l].baseType){s.splice(o,1);break}}}if(s.length===0)return null;if(s.length>1&&r){const o=s.map(a=>JSON.stringify(a.format())).join(", ");G(!1,`ambiguous event description (i.e. matches ${o})`,"key",e)}return s[0]}const i=k(this,mi).get(Ai.from(e).format());return i||null};let Fv=da;const $3=BigInt(0);function lc(t){return t??null}function yt(t){return t==null?null:t.toString()}class dA{constructor(e,n,r){Q(this,"gasPrice");Q(this,"maxFeePerGas");Q(this,"maxPriorityFeePerGas");Ce(this,{gasPrice:lc(e),maxFeePerGas:lc(n),maxPriorityFeePerGas:lc(r)})}toJSON(){const{gasPrice:e,maxFeePerGas:n,maxPriorityFeePerGas:r}=this;return{_type:"FeeData",gasPrice:yt(e),maxFeePerGas:yt(n),maxPriorityFeePerGas:yt(r)}}}function f0(t){const e={};t.to&&(e.to=t.to),t.from&&(e.from=t.from),t.data&&(e.data=fe(t.data));const n="chainId,gasLimit,gasPrice,maxFeePerBlobGas,maxFeePerGas,maxPriorityFeePerGas,value".split(/,/);for(const i of n)!(i in t)||t[i]==null||(e[i]=we(t[i],`request.${i}`));const r="type,nonce".split(/,/);for(const i of r)!(i in t)||t[i]==null||(e[i]=_e(t[i],`request.${i}`));return t.accessList&&(e.accessList=cl(t.accessList)),t.authorizationList&&(e.authorizationList=t.authorizationList.slice()),"blockTag"in t&&(e.blockTag=t.blockTag),"enableCcipRead"in t&&(e.enableCcipRead=!!t.enableCcipRead),"customData"in t&&(e.customData=t.customData),"blobVersionedHashes"in t&&t.blobVersionedHashes&&(e.blobVersionedHashes=t.blobVersionedHashes.slice()),"kzg"in t&&(e.kzg=t.kzg),"blobs"in t&&t.blobs&&(e.blobs=t.blobs.map(i=>U1(i)?fe(i):Object.assign({},i))),e}var rs;class H5{constructor(e,n){Q(this,"provider");Q(this,"number");Q(this,"hash");Q(this,"timestamp");Q(this,"parentHash");Q(this,"parentBeaconBlockRoot");Q(this,"nonce");Q(this,"difficulty");Q(this,"gasLimit");Q(this,"gasUsed");Q(this,"stateRoot");Q(this,"receiptsRoot");Q(this,"blobGasUsed");Q(this,"excessBlobGas");Q(this,"miner");Q(this,"prevRandao");Q(this,"extraData");Q(this,"baseFeePerGas");Z(this,rs);H(this,rs,e.transactions.map(r=>typeof r!="string"?new Jd(r,n):r)),Ce(this,{provider:n,hash:lc(e.hash),number:e.number,timestamp:e.timestamp,parentHash:e.parentHash,parentBeaconBlockRoot:e.parentBeaconBlockRoot,nonce:e.nonce,difficulty:e.difficulty,gasLimit:e.gasLimit,gasUsed:e.gasUsed,blobGasUsed:e.blobGasUsed,excessBlobGas:e.excessBlobGas,miner:e.miner,prevRandao:lc(e.prevRandao),extraData:e.extraData,baseFeePerGas:lc(e.baseFeePerGas),stateRoot:e.stateRoot,receiptsRoot:e.receiptsRoot})}get transactions(){return k(this,rs).map(e=>typeof e=="string"?e:e.hash)}get prefetchedTransactions(){const e=k(this,rs).slice();return e.length===0?[]:(se(typeof e[0]=="object","transactions were not prefetched with block request","UNSUPPORTED_OPERATION",{operation:"transactionResponses()"}),e)}toJSON(){const{baseFeePerGas:e,difficulty:n,extraData:r,gasLimit:i,gasUsed:s,hash:o,miner:a,prevRandao:l,nonce:c,number:u,parentHash:d,parentBeaconBlockRoot:f,stateRoot:h,receiptsRoot:m,timestamp:g,transactions:w}=this;return{_type:"Block",baseFeePerGas:yt(e),difficulty:yt(n),extraData:r,gasLimit:yt(i),gasUsed:yt(s),blobGasUsed:yt(this.blobGasUsed),excessBlobGas:yt(this.excessBlobGas),hash:o,miner:a,prevRandao:l,nonce:c,number:u,parentHash:d,timestamp:g,parentBeaconBlockRoot:f,stateRoot:h,receiptsRoot:m,transactions:w}}[Symbol.iterator](){let e=0;const n=this.transactions;return{next:()=>e<this.length?{value:n[e++],done:!1}:{value:void 0,done:!0}}}get length(){return k(this,rs).length}get date(){return this.timestamp==null?null:new Date(this.timestamp*1e3)}async getTransaction(e){let n;if(typeof e=="number")n=k(this,rs)[e];else{const r=e.toLowerCase();for(const i of k(this,rs))if(typeof i=="string"){if(i!==r)continue;n=i;break}else{if(i.hash!==r)continue;n=i;break}}if(n==null)throw new Error("no such tx");return typeof n=="string"?await this.provider.getTransaction(n):n}getPrefetchedTransaction(e){const n=this.prefetchedTransactions;if(typeof e=="number")return n[e];e=e.toLowerCase();for(const r of n)if(r.hash===e)return r;G(!1,"no matching transaction","indexOrHash",e)}isMined(){return!!this.hash}isLondon(){return!!this.baseFeePerGas}orphanedEvent(){if(!this.isMined())throw new Error("");return K5(this)}}rs=new WeakMap;class Lf{constructor(e,n){Q(this,"provider");Q(this,"transactionHash");Q(this,"blockHash");Q(this,"blockNumber");Q(this,"removed");Q(this,"address");Q(this,"data");Q(this,"topics");Q(this,"index");Q(this,"transactionIndex");this.provider=n;const r=Object.freeze(e.topics.slice());Ce(this,{transactionHash:e.transactionHash,blockHash:e.blockHash,blockNumber:e.blockNumber,removed:e.removed,address:e.address,data:e.data,topics:r,index:e.index,transactionIndex:e.transactionIndex})}toJSON(){const{address:e,blockHash:n,blockNumber:r,data:i,index:s,removed:o,topics:a,transactionHash:l,transactionIndex:c}=this;return{_type:"log",address:e,blockHash:n,blockNumber:r,data:i,index:s,removed:o,topics:a,transactionHash:l,transactionIndex:c}}async getBlock(){const e=await this.provider.getBlock(this.blockHash);return se(!!e,"failed to find transaction","UNKNOWN_ERROR",{}),e}async getTransaction(){const e=await this.provider.getTransaction(this.transactionHash);return se(!!e,"failed to find transaction","UNKNOWN_ERROR",{}),e}async getTransactionReceipt(){const e=await this.provider.getTransactionReceipt(this.transactionHash);return se(!!e,"failed to find transaction receipt","UNKNOWN_ERROR",{}),e}removedEvent(){return z5(this)}}var bf;class U3{constructor(e,n){Q(this,"provider");Q(this,"to");Q(this,"from");Q(this,"contractAddress");Q(this,"hash");Q(this,"index");Q(this,"blockHash");Q(this,"blockNumber");Q(this,"logsBloom");Q(this,"gasUsed");Q(this,"blobGasUsed");Q(this,"cumulativeGasUsed");Q(this,"gasPrice");Q(this,"blobGasPrice");Q(this,"type");Q(this,"status");Q(this,"root");Z(this,bf);H(this,bf,Object.freeze(e.logs.map(i=>new Lf(i,n))));let r=$3;e.effectiveGasPrice!=null?r=e.effectiveGasPrice:e.gasPrice!=null&&(r=e.gasPrice),Ce(this,{provider:n,to:e.to,from:e.from,contractAddress:e.contractAddress,hash:e.hash,index:e.index,blockHash:e.blockHash,blockNumber:e.blockNumber,logsBloom:e.logsBloom,gasUsed:e.gasUsed,cumulativeGasUsed:e.cumulativeGasUsed,blobGasUsed:e.blobGasUsed,gasPrice:r,blobGasPrice:e.blobGasPrice,type:e.type,status:e.status,root:e.root})}get logs(){return k(this,bf)}toJSON(){const{to:e,from:n,contractAddress:r,hash:i,index:s,blockHash:o,blockNumber:a,logsBloom:l,logs:c,status:u,root:d}=this;return{_type:"TransactionReceipt",blockHash:o,blockNumber:a,contractAddress:r,cumulativeGasUsed:yt(this.cumulativeGasUsed),from:n,gasPrice:yt(this.gasPrice),blobGasUsed:yt(this.blobGasUsed),blobGasPrice:yt(this.blobGasPrice),gasUsed:yt(this.gasUsed),hash:i,index:s,logs:c,logsBloom:l,root:d,status:u,to:e}}get length(){return this.logs.length}[Symbol.iterator](){let e=0;return{next:()=>e<this.length?{value:this.logs[e++],done:!1}:{value:void 0,done:!0}}}get fee(){return this.gasUsed*this.gasPrice}async getBlock(){const e=await this.provider.getBlock(this.blockHash);if(e==null)throw new Error("TODO");return e}async getTransaction(){const e=await this.provider.getTransaction(this.hash);if(e==null)throw new Error("TODO");return e}async getResult(){return await this.provider.getTransactionResult(this.hash)}async confirmations(){return await this.provider.getBlockNumber()-this.blockNumber+1}removedEvent(){return j3(this)}reorderedEvent(e){return se(!e||e.isMined(),"unmined 'other' transction cannot be orphaned","UNSUPPORTED_OPERATION",{operation:"reorderedEvent(other)"}),F3(this,e)}}bf=new WeakMap;var fo;const Zb=class Zb{constructor(e,n){Q(this,"provider");Q(this,"blockNumber");Q(this,"blockHash");Q(this,"index");Q(this,"hash");Q(this,"type");Q(this,"to");Q(this,"from");Q(this,"nonce");Q(this,"gasLimit");Q(this,"gasPrice");Q(this,"maxPriorityFeePerGas");Q(this,"maxFeePerGas");Q(this,"maxFeePerBlobGas");Q(this,"data");Q(this,"value");Q(this,"chainId");Q(this,"signature");Q(this,"accessList");Q(this,"blobVersionedHashes");Q(this,"authorizationList");Z(this,fo);this.provider=n,this.blockNumber=e.blockNumber!=null?e.blockNumber:null,this.blockHash=e.blockHash!=null?e.blockHash:null,this.hash=e.hash,this.index=e.index,this.type=e.type,this.from=e.from,this.to=e.to||null,this.gasLimit=e.gasLimit,this.nonce=e.nonce,this.data=e.data,this.value=e.value,this.gasPrice=e.gasPrice,this.maxPriorityFeePerGas=e.maxPriorityFeePerGas!=null?e.maxPriorityFeePerGas:null,this.maxFeePerGas=e.maxFeePerGas!=null?e.maxFeePerGas:null,this.maxFeePerBlobGas=e.maxFeePerBlobGas!=null?e.maxFeePerBlobGas:null,this.chainId=e.chainId,this.signature=e.signature,this.accessList=e.accessList!=null?e.accessList:null,this.blobVersionedHashes=e.blobVersionedHashes!=null?e.blobVersionedHashes:null,this.authorizationList=e.authorizationList!=null?e.authorizationList:null,H(this,fo,-1)}toJSON(){const{blockNumber:e,blockHash:n,index:r,hash:i,type:s,to:o,from:a,nonce:l,data:c,signature:u,accessList:d,blobVersionedHashes:f}=this;return{_type:"TransactionResponse",accessList:d,blockNumber:e,blockHash:n,blobVersionedHashes:f,chainId:yt(this.chainId),data:c,from:a,gasLimit:yt(this.gasLimit),gasPrice:yt(this.gasPrice),hash:i,maxFeePerGas:yt(this.maxFeePerGas),maxPriorityFeePerGas:yt(this.maxPriorityFeePerGas),maxFeePerBlobGas:yt(this.maxFeePerBlobGas),nonce:l,signature:u,to:o,index:r,type:s,value:yt(this.value)}}async getBlock(){let e=this.blockNumber;if(e==null){const r=await this.getTransaction();r&&(e=r.blockNumber)}if(e==null)return null;const n=this.provider.getBlock(e);if(n==null)throw new Error("TODO");return n}async getTransaction(){return this.provider.getTransaction(this.hash)}async confirmations(){if(this.blockNumber==null){const{tx:n,blockNumber:r}=await gn({tx:this.getTransaction(),blockNumber:this.provider.getBlockNumber()});return n==null||n.blockNumber==null?0:r-n.blockNumber+1}return await this.provider.getBlockNumber()-this.blockNumber+1}async wait(e,n){const r=e??1,i=n??0;let s=k(this,fo),o=-1,a=s===-1;const l=async()=>{if(a)return null;const{blockNumber:f,nonce:h}=await gn({blockNumber:this.provider.getBlockNumber(),nonce:this.provider.getTransactionCount(this.from)});if(h<this.nonce){s=f;return}if(a)return null;const m=await this.getTransaction();if(!(m&&m.blockNumber!=null))for(o===-1&&(o=s-3,o<k(this,fo)&&(o=k(this,fo)));o<=f;){if(a)return null;const g=await this.provider.getBlock(o,!0);if(g==null)return;for(const w of g)if(w===this.hash)return;for(let w=0;w<g.length;w++){const p=await g.getTransaction(w);if(p.from===this.from&&p.nonce===this.nonce){if(a)return null;const v=await this.provider.getTransactionReceipt(p.hash);if(v==null||f-v.blockNumber+1<r)return;let y="replaced";p.data===this.data&&p.to===this.to&&p.value===this.value?y="repriced":p.data==="0x"&&p.from===p.to&&p.value===$3&&(y="cancelled"),se(!1,"transaction was replaced","TRANSACTION_REPLACED",{cancelled:y==="replaced"||y==="cancelled",reason:y,replacement:p.replaceableTransaction(s),hash:p.hash,receipt:v})}}o++}},c=f=>{if(f==null||f.status!==0)return f;se(!1,"transaction execution reverted","CALL_EXCEPTION",{action:"sendTransaction",data:null,reason:null,invocation:null,revert:null,transaction:{to:f.to,from:f.from,data:""},receipt:f})},u=await this.provider.getTransactionReceipt(this.hash);if(r===0)return c(u);if(u){if(r===1||await u.confirmations()>=r)return c(u)}else if(await l(),r===0)return null;return await new Promise((f,h)=>{const m=[],g=()=>{m.forEach(p=>p())};if(m.push(()=>{a=!0}),i>0){const p=setTimeout(()=>{g(),h(st("wait for transaction timeout","TIMEOUT"))},i);m.push(()=>{clearTimeout(p)})}const w=async p=>{if(await p.confirmations()>=r){g();try{f(c(p))}catch(v){h(v)}}};if(m.push(()=>{this.provider.off(this.hash,w)}),this.provider.on(this.hash,w),s>=0){const p=async()=>{try{await l()}catch(v){if(Vt(v,"TRANSACTION_REPLACED")){g(),h(v);return}}a||this.provider.once("block",p)};m.push(()=>{this.provider.off("block",p)}),this.provider.once("block",p)}})}isMined(){return this.blockHash!=null}isLegacy(){return this.type===0}isBerlin(){return this.type===1}isLondon(){return this.type===2}isCancun(){return this.type===3}removedEvent(){return se(this.isMined(),"unmined transaction canot be orphaned","UNSUPPORTED_OPERATION",{operation:"removeEvent()"}),j3(this)}reorderedEvent(e){return se(this.isMined(),"unmined transaction canot be orphaned","UNSUPPORTED_OPERATION",{operation:"removeEvent()"}),se(!e||e.isMined(),"unmined 'other' transaction canot be orphaned","UNSUPPORTED_OPERATION",{operation:"removeEvent()"}),F3(this,e)}replaceableTransaction(e){G(Number.isInteger(e)&&e>=0,"invalid startBlock","startBlock",e);const n=new Zb(this,this.provider);return H(n,fo,e),n}};fo=new WeakMap;let Jd=Zb;function K5(t){return{orphan:"drop-block",hash:t.hash,number:t.number}}function F3(t,e){return{orphan:"reorder-transaction",tx:t,other:e}}function j3(t){return{orphan:"drop-transaction",tx:t}}function z5(t){return{orphan:"drop-log",log:{transactionHash:t.transactionHash,blockHash:t.blockHash,blockNumber:t.blockNumber,address:t.address,data:t.data,topics:Object.freeze(t.topics.slice()),index:t.index}}}class Z1 extends Lf{constructor(n,r,i){super(n,n.provider);Q(this,"interface");Q(this,"fragment");Q(this,"args");const s=r.decodeEventLog(i,n.data,n.topics);Ce(this,{args:s,fragment:i,interface:r})}get eventName(){return this.fragment.name}get eventSignature(){return this.fragment.format()}}class H3 extends Lf{constructor(n,r){super(n,n.provider);Q(this,"error");Ce(this,{error:r})}}var Uc;class V5 extends U3{constructor(n,r,i){super(i,r);Z(this,Uc);H(this,Uc,n)}get logs(){return super.logs.map(n=>{const r=n.topics.length?k(this,Uc).getEvent(n.topics[0]):null;if(r)try{return new Z1(n,k(this,Uc),r)}catch(i){return new H3(n,i)}return n})}}Uc=new WeakMap;var Ef;class X1 extends Jd{constructor(n,r,i){super(i,r);Z(this,Ef);H(this,Ef,n)}async wait(n,r){const i=await super.wait(n,r);return i==null?null:new V5(k(this,Ef),this.provider,i)}}Ef=new WeakMap;class K3 extends p_{constructor(n,r,i,s){super(n,r,i);Q(this,"log");Ce(this,{log:s})}async getBlock(){return await this.log.getBlock()}async getTransaction(){return await this.log.getTransaction()}async getTransactionReceipt(){return await this.log.getTransactionReceipt()}}class G5 extends K3{constructor(e,n,r,i,s){super(e,n,r,new Z1(s,e.interface,i));const o=e.interface.decodeEventLog(i,this.log.data,this.log.topics);Ce(this,{args:o,fragment:i})}get eventName(){return this.fragment.name}get eventSignature(){return this.fragment.format()}}const fA=BigInt(0);function z3(t){return t&&typeof t.call=="function"}function V3(t){return t&&typeof t.estimateGas=="function"}function Cg(t){return t&&typeof t.resolveName=="function"}function G3(t){return t&&typeof t.sendTransaction=="function"}function W3(t){if(t!=null){if(Cg(t))return t;if(t.provider)return t.provider}}var Af;class W5{constructor(e,n,r){Z(this,Af);Q(this,"fragment");if(Ce(this,{fragment:n}),n.inputs.length<r.length)throw new Error("too many arguments");const i=rl(e.runner,"resolveName"),s=Cg(i)?i:null;H(this,Af,async function(){const o=await Promise.all(n.inputs.map((a,l)=>r[l]==null?null:a.walkAsync(r[l],(u,d)=>u==="address"?Array.isArray(d)?Promise.all(d.map(f=>bn(f,s))):bn(d,s):d)));return e.interface.encodeFilterTopics(n,o)}())}getTopicFilter(){return k(this,Af)}}Af=new WeakMap;function rl(t,e){return t==null?null:typeof t[e]=="function"?t:t.provider&&typeof t.provider[e]=="function"?t.provider:null}function wa(t){return t==null?null:t.provider||null}async function q3(t,e){const n=cn.dereference(t,"overrides");G(typeof n=="object","invalid overrides parameter","overrides",t);const r=f0(n);return G(r.to==null||(e||[]).indexOf("to")>=0,"cannot override to","overrides.to",r.to),G(r.data==null||(e||[]).indexOf("data")>=0,"cannot override data","overrides.data",r.data),r.from&&(r.from=r.from),r}async function q5(t,e,n){const r=rl(t,"resolveName"),i=Cg(r)?r:null;return await Promise.all(e.map((s,o)=>s.walkAsync(n[o],(a,l)=>(l=cn.dereference(l,a),a==="address"?bn(l,i):l))))}function Q5(t){const e=async function(o){const a=await q3(o,["data"]);a.to=await t.getAddress(),a.from&&(a.from=await bn(a.from,W3(t.runner)));const l=t.interface,c=we(a.value||fA,"overrides.value")===fA,u=(a.data||"0x")==="0x";l.fallback&&!l.fallback.payable&&l.receive&&!u&&!c&&G(!1,"cannot send data to receive or send value to non-payable fallback","overrides",o),G(l.fallback||u,"cannot send data to receive-only contract","overrides.data",a.data);const d=l.receive||l.fallback&&l.fallback.payable;return G(d||c,"cannot send value to non-payable fallback","overrides.value",a.value),G(l.fallback||u,"cannot send data to receive-only contract","overrides.data",a.data),a},n=async function(o){const a=rl(t.runner,"call");se(z3(a),"contract runner does not support calling","UNSUPPORTED_OPERATION",{operation:"call"});const l=await e(o);try{return await a.call(l)}catch(c){throw $1(c)&&c.data?t.interface.makeError(c.data,l):c}},r=async function(o){const a=t.runner;se(G3(a),"contract runner does not support sending transactions","UNSUPPORTED_OPERATION",{operation:"sendTransaction"});const l=await a.sendTransaction(await e(o)),c=wa(t.runner);return new X1(t.interface,c,l)},i=async function(o){const a=rl(t.runner,"estimateGas");return se(V3(a),"contract runner does not support gas estimation","UNSUPPORTED_OPERATION",{operation:"estimateGas"}),await a.estimateGas(await e(o))},s=async o=>await r(o);return Ce(s,{_contract:t,estimateGas:i,populateTransaction:e,send:r,staticCall:n}),s}function Y5(t,e){const n=function(...c){const u=t.interface.getFunction(e,c);return se(u,"no matching fragment","UNSUPPORTED_OPERATION",{operation:"fragment",info:{key:e,args:c}}),u},r=async function(...c){const u=n(...c);let d={};if(u.inputs.length+1===c.length&&(d=await q3(c.pop()),d.from&&(d.from=await bn(d.from,W3(t.runner)))),u.inputs.length!==c.length)throw new Error("internal error: fragment inputs doesn't match arguments; should not happen");const f=await q5(t.runner,u.inputs,c);return Object.assign({},d,await gn({to:t.getAddress(),data:t.interface.encodeFunctionData(u,f)}))},i=async function(...c){const u=await a(...c);return u.length===1?u[0]:u},s=async function(...c){const u=t.runner;se(G3(u),"contract runner does not support sending transactions","UNSUPPORTED_OPERATION",{operation:"sendTransaction"});const d=await u.sendTransaction(await r(...c)),f=wa(t.runner);return new X1(t.interface,f,d)},o=async function(...c){const u=rl(t.runner,"estimateGas");return se(V3(u),"contract runner does not support gas estimation","UNSUPPORTED_OPERATION",{operation:"estimateGas"}),await u.estimateGas(await r(...c))},a=async function(...c){const u=rl(t.runner,"call");se(z3(u),"contract runner does not support calling","UNSUPPORTED_OPERATION",{operation:"call"});const d=await r(...c);let f="0x";try{f=await u.call(d)}catch(m){throw $1(m)&&m.data?t.interface.makeError(m.data,d):m}const h=n(...c);return t.interface.decodeFunctionResult(h,f)},l=async(...c)=>n(...c).constant?await i(...c):await s(...c);return Ce(l,{name:t.interface.getFunctionName(e),_contract:t,_key:e,getFragment:n,estimateGas:o,populateTransaction:r,send:s,staticCall:i,staticCallResult:a}),Object.defineProperty(l,"fragment",{configurable:!1,enumerable:!0,get:()=>{const c=t.interface.getFunction(e);return se(c,"no matching fragment","UNSUPPORTED_OPERATION",{operation:"fragment",info:{key:e}}),c}}),l}function J5(t,e){const n=function(...i){const s=t.interface.getEvent(e,i);return se(s,"no matching fragment","UNSUPPORTED_OPERATION",{operation:"fragment",info:{key:e,args:i}}),s},r=function(...i){return new W5(t,n(...i),i)};return Ce(r,{name:t.interface.getEventName(e),_contract:t,_key:e,getFragment:n}),Object.defineProperty(r,"fragment",{configurable:!1,enumerable:!0,get:()=>{const i=t.interface.getEvent(e);return se(i,"no matching fragment","UNSUPPORTED_OPERATION",{operation:"fragment",info:{key:e}}),i}}),r}const h0=Symbol.for("_ethersInternal_contract"),Q3=new WeakMap;function Z5(t,e){Q3.set(t[h0],e)}function Gn(t){return Q3.get(t[h0])}function X5(t){return t&&typeof t=="object"&&"getTopicFilter"in t&&typeof t.getTopicFilter=="function"&&t.fragment}async function eb(t,e){let n,r=null;if(Array.isArray(e)){const s=function(o){if(nt(o,32))return o;const a=t.interface.getEvent(o);return G(a,"unknown fragment","name",o),a.topicHash};n=e.map(o=>o==null?null:Array.isArray(o)?o.map(s):s(o))}else e==="*"?n=[null]:typeof e=="string"?nt(e,32)?n=[e]:(r=t.interface.getEvent(e),G(r,"unknown fragment","event",e),n=[r.topicHash]):X5(e)?n=await e.getTopicFilter():"fragment"in e?(r=e.fragment,n=[r.topicHash]):G(!1,"unknown event name","event",e);n=n.map(s=>{if(s==null)return null;if(Array.isArray(s)){const o=Array.from(new Set(s.map(a=>a.toLowerCase())).values());return o.length===1?o[0]:(o.sort(),o)}return s.toLowerCase()});const i=n.map(s=>s==null?"null":Array.isArray(s)?s.join("|"):s).join("&");return{fragment:r,tag:i,topics:n}}async function Zu(t,e){const{subs:n}=Gn(t);return n.get((await eb(t,e)).tag)||null}async function hA(t,e,n){const r=wa(t.runner);se(r,"contract runner does not support subscribing","UNSUPPORTED_OPERATION",{operation:e});const{fragment:i,tag:s,topics:o}=await eb(t,n),{addr:a,subs:l}=Gn(t);let c=l.get(s);if(!c){const d={address:a||t,topics:o},f=w=>{let p=i;if(p==null)try{p=t.interface.getEvent(w.topics[0])}catch{}if(p){const v=p,y=i?t.interface.decodeEventLog(i,w.data,w.topics):[];Hv(t,n,y,x=>new G5(t,x,n,v,w))}else Hv(t,n,[],v=>new K3(t,v,n,w))};let h=[];c={tag:s,listeners:[],start:()=>{h.length||h.push(r.on(d,f))},stop:async()=>{if(h.length==0)return;let w=h;h=[],await Promise.all(w),r.off(d,f)}},l.set(s,c)}return c}let jv=Promise.resolve();async function e6(t,e,n,r){await jv;const i=await Zu(t,e);if(!i)return!1;const s=i.listeners.length;return i.listeners=i.listeners.filter(({listener:o,once:a})=>{const l=Array.from(n);r&&l.push(r(a?null:o));try{o.call(t,...l)}catch{}return!a}),i.listeners.length===0&&(i.stop(),Gn(t).subs.delete(i.tag)),s>0}async function Hv(t,e,n,r){try{await jv}catch{}const i=e6(t,e,n,r);return jv=i,await i}const gh=["then"];var JC;JC=h0;const Cd=class Cd{constructor(e,n,r,i){Q(this,"target");Q(this,"interface");Q(this,"runner");Q(this,"filters");Q(this,JC);Q(this,"fallback");G(typeof e=="string"||e3(e),"invalid value for Contract target","target",e),r==null&&(r=null);const s=Fv.from(n);Ce(this,{target:e,runner:r,interface:s}),Object.defineProperty(this,h0,{value:{}});let o,a=null,l=null;if(i){const d=wa(r);l=new X1(this.interface,d,i)}let c=new Map;if(typeof e=="string")if(nt(e))a=e,o=Promise.resolve(e);else{const d=rl(r,"resolveName");if(!Cg(d))throw st("contract runner does not support name resolution","UNSUPPORTED_OPERATION",{operation:"resolveName"});o=d.resolveName(e).then(f=>{if(f==null)throw st("an ENS name used for a contract target must be correctly configured","UNCONFIGURED_NAME",{value:e});return Gn(this).addr=f,f})}else o=e.getAddress().then(d=>{if(d==null)throw new Error("TODO");return Gn(this).addr=d,d});Z5(this,{addrPromise:o,addr:a,deployTx:l,subs:c});const u=new Proxy({},{get:(d,f,h)=>{if(typeof f=="symbol"||gh.indexOf(f)>=0)return Reflect.get(d,f,h);try{return this.getEvent(f)}catch(m){if(!Vt(m,"INVALID_ARGUMENT")||m.argument!=="key")throw m}},has:(d,f)=>gh.indexOf(f)>=0?Reflect.has(d,f):Reflect.has(d,f)||this.interface.hasEvent(String(f))});return Ce(this,{filters:u}),Ce(this,{fallback:s.receive||s.fallback?Q5(this):null}),new Proxy(this,{get:(d,f,h)=>{if(typeof f=="symbol"||f in d||gh.indexOf(f)>=0)return Reflect.get(d,f,h);try{return d.getFunction(f)}catch(m){if(!Vt(m,"INVALID_ARGUMENT")||m.argument!=="key")throw m}},has:(d,f)=>typeof f=="symbol"||f in d||gh.indexOf(f)>=0?Reflect.has(d,f):d.interface.hasFunction(f)})}connect(e){return new Cd(this.target,this.interface,e)}attach(e){return new Cd(e,this.interface,this.runner)}async getAddress(){return await Gn(this).addrPromise}async getDeployedCode(){const e=wa(this.runner);se(e,"runner does not support .provider","UNSUPPORTED_OPERATION",{operation:"getDeployedCode"});const n=await e.getCode(await this.getAddress());return n==="0x"?null:n}async waitForDeployment(){const e=this.deploymentTransaction();if(e)return await e.wait(),this;if(await this.getDeployedCode()!=null)return this;const r=wa(this.runner);return se(r!=null,"contract runner does not support .provider","UNSUPPORTED_OPERATION",{operation:"waitForDeployment"}),new Promise((i,s)=>{const o=async()=>{try{if(await this.getDeployedCode()!=null)return i(this);r.once("block",o)}catch(a){s(a)}};o()})}deploymentTransaction(){return Gn(this).deployTx}getFunction(e){return typeof e!="string"&&(e=e.format()),Y5(this,e)}getEvent(e){return typeof e!="string"&&(e=e.format()),J5(this,e)}async queryTransaction(e){throw new Error("@TODO")}async queryFilter(e,n,r){n==null&&(n=0),r==null&&(r="latest");const{addr:i,addrPromise:s}=Gn(this),o=i||await s,{fragment:a,topics:l}=await eb(this,e),c={address:o,topics:l,fromBlock:n,toBlock:r},u=wa(this.runner);return se(u,"contract runner does not have a provider","UNSUPPORTED_OPERATION",{operation:"queryFilter"}),(await u.getLogs(c)).map(d=>{let f=a;if(f==null)try{f=this.interface.getEvent(d.topics[0])}catch{}if(f)try{return new Z1(d,this.interface,f)}catch(h){return new H3(d,h)}return new Lf(d,u)})}async on(e,n){const r=await hA(this,"on",e);return r.listeners.push({listener:n,once:!1}),r.start(),this}async once(e,n){const r=await hA(this,"once",e);return r.listeners.push({listener:n,once:!0}),r.start(),this}async emit(e,...n){return await Hv(this,e,n,null)}async listenerCount(e){if(e){const i=await Zu(this,e);return i?i.listeners.length:0}const{subs:n}=Gn(this);let r=0;for(const{listeners:i}of n.values())r+=i.length;return r}async listeners(e){if(e){const i=await Zu(this,e);return i?i.listeners.map(({listener:s})=>s):[]}const{subs:n}=Gn(this);let r=[];for(const{listeners:i}of n.values())r=r.concat(i.map(({listener:s})=>s));return r}async off(e,n){const r=await Zu(this,e);if(!r)return this;if(n){const i=r.listeners.map(({listener:s})=>s).indexOf(n);i>=0&&r.listeners.splice(i,1)}return(n==null||r.listeners.length===0)&&(r.stop(),Gn(this).subs.delete(r.tag)),this}async removeAllListeners(e){if(e){const n=await Zu(this,e);if(!n)return this;n.stop(),Gn(this).subs.delete(n.tag)}else{const{subs:n}=Gn(this);for(const{tag:r,stop:i}of n.values())i(),n.delete(r)}return this}async addListener(e,n){return await this.on(e,n)}async removeListener(e,n){return await this.off(e,n)}static buildClass(e){class n extends Cd{constructor(i,s=null){super(i,e,s)}}return n}static from(e,n,r){return r==null&&(r=null),new this(e,n,r)}};let Kv=Cd;function t6(){return Kv}class kt extends t6(){}function Tm(t){return t.match(/^ipfs:\/\/ipfs\//i)?t=t.substring(12):t.match(/^ipfs:\/\//i)?t=t.substring(7):G(!1,"unsupported IPFS format","link",t),`https://gateway.ipfs.io/ipfs/${t}`}class n6{constructor(e){Q(this,"name");Ce(this,{name:e})}connect(e){return this}supportsCoinType(e){return!1}async encodeAddress(e,n){throw new Error("unsupported coin")}async decodeAddress(e,n){throw new Error("unsupported coin")}}const Y3=new RegExp("^(ipfs)://(.*)$","i"),pA=[new RegExp("^(https)://(.*)$","i"),new RegExp("^(data):(.*)$","i"),Y3,new RegExp("^eip155:[0-9]+/(erc[0-9]+):(.*)$","i")];var ho,Ba,po,xl,G0,J3;const Jl=class Jl{constructor(e,n,r){Z(this,po);Q(this,"provider");Q(this,"address");Q(this,"name");Z(this,ho);Z(this,Ba);Ce(this,{provider:e,address:n,name:r}),H(this,ho,null),H(this,Ba,new kt(n,["function supportsInterface(bytes4) view returns (bool)","function resolve(bytes, bytes) view returns (bytes)","function addr(bytes32) view returns (address)","function addr(bytes32, uint) view returns (bytes)","function text(bytes32, string) view returns (string)","function contenthash(bytes32) view returns (bytes)"],e))}async supportsWildcard(){return k(this,ho)==null&&H(this,ho,(async()=>{try{return await k(this,Ba).supportsInterface("0x9061b923")}catch(e){if(Vt(e,"CALL_EXCEPTION"))return!1;throw H(this,ho,null),e}})()),await k(this,ho)}async getAddress(e){if(e==null&&(e=60),e===60)try{const s=await ce(this,po,xl).call(this,"addr(bytes32)");return s==null||s===Kd?null:s}catch(s){if(Vt(s,"CALL_EXCEPTION"))return null;throw s}if(e>=0&&e<2147483648){let s=e+2147483648;const o=await ce(this,po,xl).call(this,"addr(bytes32,uint)",[s]);if(nt(o,20))return Qe(o)}let n=null;for(const s of this.provider.plugins)if(s instanceof n6&&s.supportsCoinType(e)){n=s;break}if(n==null)return null;const r=await ce(this,po,xl).call(this,"addr(bytes32,uint)",[e]);if(r==null||r==="0x")return null;const i=await n.decodeAddress(e,r);if(i!=null)return i;se(!1,"invalid coin data","UNSUPPORTED_OPERATION",{operation:`getAddress(${e})`,info:{coinType:e,data:r}})}async getText(e){const n=await ce(this,po,xl).call(this,"text(bytes32,string)",[e]);return n==null||n==="0x"?null:n}async getContentHash(){const e=await ce(this,po,xl).call(this,"contenthash(bytes32)");if(e==null||e==="0x")return null;const n=e.match(/^0x(e3010170|e5010172)(([0-9a-f][0-9a-f])([0-9a-f][0-9a-f])([0-9a-f]*))$/);if(n){const i=n[1]==="e3010170"?"ipfs":"ipns",s=parseInt(n[4],16);if(n[5].length===s*2)return`${i}://${oN("0x"+n[2])}`}const r=e.match(/^0xe40101fa011b20([0-9a-f]*)$/);if(r&&r[1].length===64)return`bzz://${r[1]}`;se(!1,"invalid or unsupported content hash data","UNSUPPORTED_OPERATION",{operation:"getContentHash()",info:{data:e}})}async getAvatar(){return(await this._getAvatar()).url}async _getAvatar(){const e=[{type:"name",value:this.name}];try{const n=await this.getText("avatar");if(n==null)return e.push({type:"!avatar",value:""}),{url:null,linkage:e};e.push({type:"avatar",value:n});for(let r=0;r<pA.length;r++){const i=n.match(pA[r]);if(i==null)continue;const s=i[1].toLowerCase();switch(s){case"https":case"data":return e.push({type:"url",value:n}),{linkage:e,url:n};case"ipfs":{const o=Tm(n);return e.push({type:"ipfs",value:n}),e.push({type:"url",value:o}),{linkage:e,url:o}}case"erc721":case"erc1155":{const o=s==="erc721"?"tokenURI(uint256)":"uri(uint256)";e.push({type:s,value:n});const a=await this.getAddress();if(a==null)return e.push({type:"!owner",value:""}),{url:null,linkage:e};const l=(i[2]||"").split("/");if(l.length!==2)return e.push({type:`!${s}caip`,value:i[2]||""}),{url:null,linkage:e};const c=l[1],u=new kt(l[0],["function tokenURI(uint) view returns (string)","function ownerOf(uint) view returns (address)","function uri(uint) view returns (string)","function balanceOf(address, uint256) view returns (uint)"],this.provider);if(s==="erc721"){const g=await u.ownerOf(c);if(a!==g)return e.push({type:"!owner",value:g}),{url:null,linkage:e};e.push({type:"owner",value:g})}else if(s==="erc1155"){const g=await u.balanceOf(a,c);if(!g)return e.push({type:"!balance",value:"0"}),{url:null,linkage:e};e.push({type:"balance",value:g.toString()})}let d=await u[o](c);if(d==null||d==="0x")return e.push({type:"!metadata-url",value:""}),{url:null,linkage:e};e.push({type:"metadata-url-base",value:d}),s==="erc1155"&&(d=d.replace("{id}",jo(c,32).substring(2)),e.push({type:"metadata-url-expanded",value:d})),d.match(/^ipfs:/i)&&(d=Tm(d)),e.push({type:"metadata-url",value:d});let f={};const h=await new Ho(d).send();h.assertOk();try{f=h.bodyJson}catch{try{e.push({type:"!metadata",value:h.bodyText})}catch{const p=h.body;return p&&e.push({type:"!metadata",value:fe(p)}),{url:null,linkage:e}}return{url:null,linkage:e}}if(!f)return e.push({type:"!metadata",value:""}),{url:null,linkage:e};e.push({type:"metadata",value:JSON.stringify(f)});let m=f.image;if(typeof m!="string")return e.push({type:"!imageUrl",value:""}),{url:null,linkage:e};if(!m.match(/^(https:\/\/|data:)/i)){if(m.match(Y3)==null)return e.push({type:"!imageUrl-ipfs",value:m}),{url:null,linkage:e};e.push({type:"imageUrl-ipfs",value:m}),m=Tm(m)}return e.push({type:"url",value:m}),{linkage:e,url:m}}}}}catch{}return{linkage:e,url:null}}static async getEnsAddress(e){const n=await e.getNetwork(),r=n.getPlugin("org.ethers.plugins.network.Ens");return se(r,"network does not support ENS","UNSUPPORTED_OPERATION",{operation:"getEnsAddress",info:{network:n}}),r.address}static async fromName(e,n){var i;let r=n;for(;;){if(r===""||r==="."||n!=="eth"&&r==="eth")return null;const s=await ce(i=Jl,G0,J3).call(i,e,r);if(s!=null){const o=new Jl(e,s,n);return r!==n&&!await o.supportsWildcard()?null:o}r=r.split(".").slice(1).join(".")}}};ho=new WeakMap,Ba=new WeakMap,po=new WeakSet,xl=async function(e,n){n=(n||[]).slice();const r=k(this,Ba).interface;n.unshift($v(this.name));let i=null;await this.supportsWildcard()&&(i=r.getFunction(e),se(i,"missing fragment","UNKNOWN_ERROR",{info:{funcName:e}}),n=[y5(this.name,255),r.encodeFunctionData(i,n)],e="resolve(bytes,bytes)"),n.push({enableCcipRead:!0});try{const s=await k(this,Ba)[e](...n);return i?r.decodeFunctionResult(i,s)[0]:s}catch(s){if(!Vt(s,"CALL_EXCEPTION"))throw s}return null},G0=new WeakSet,J3=async function(e,n){const r=await Jl.getEnsAddress(e);try{const s=await new kt(r,["function resolver(bytes32) view returns (address)"],e).resolver($v(n),{enableCcipRead:!0});return s===Kd?null:s}catch(i){throw i}return null},Z(Jl,G0);let p0=Jl;const gA=BigInt(0);function Be(t,e){return function(n){return n==null?e:t(n)}}function Zd(t,e){return n=>{if(e&&n==null)return null;if(!Array.isArray(n))throw new Error("not an array");return n.map(r=>t(r))}}function Bf(t,e){return n=>{const r={};for(const i in t){let s=i;if(e&&i in e&&!(s in n)){for(const o of e[i])if(o in n){s=o;break}}try{const o=t[i](n[s]);o!==void 0&&(r[i]=o)}catch(o){const a=o instanceof Error?o.message:"not-an-error";se(!1,`invalid value for value.${i} (${a})`,"BAD_DATA",{value:n})}}return r}}function r6(t){switch(t){case!0:case"true":return!0;case!1:case"false":return!1}G(!1,`invalid boolean; ${JSON.stringify(t)}`,"value",t)}function pu(t){return G(nt(t,!0),"invalid data","value",t),t}function zt(t){return G(nt(t,32),"invalid hash","value",t),t}const i6=Bf({address:Qe,blockHash:zt,blockNumber:_e,data:pu,index:_e,removed:Be(r6,!1),topics:Zd(zt),transactionHash:zt,transactionIndex:_e},{index:["logIndex"]});function s6(t){return i6(t)}const o6=Bf({hash:Be(zt),parentHash:zt,parentBeaconBlockRoot:Be(zt,null),number:_e,timestamp:_e,nonce:Be(pu),difficulty:we,gasLimit:we,gasUsed:we,stateRoot:Be(zt,null),receiptsRoot:Be(zt,null),blobGasUsed:Be(we,null),excessBlobGas:Be(we,null),miner:Be(Qe),prevRandao:Be(zt,null),extraData:pu,baseFeePerGas:Be(we)},{prevRandao:["mixHash"]});function a6(t){const e=o6(t);return e.transactions=t.transactions.map(n=>typeof n=="string"?n:Z3(n)),e}const l6=Bf({transactionIndex:_e,blockNumber:_e,transactionHash:zt,address:Qe,topics:Zd(zt),data:pu,index:_e,blockHash:zt},{index:["logIndex"]});function c6(t){return l6(t)}const u6=Bf({to:Be(Qe,null),from:Be(Qe,null),contractAddress:Be(Qe,null),index:_e,root:Be(fe),gasUsed:we,blobGasUsed:Be(we,null),logsBloom:Be(pu),blockHash:zt,hash:zt,logs:Zd(c6),blockNumber:_e,cumulativeGasUsed:we,effectiveGasPrice:Be(we),blobGasPrice:Be(we,null),status:Be(_e),type:Be(_e,0)},{effectiveGasPrice:["gasPrice"],hash:["transactionHash"],index:["transactionIndex"]});function d6(t){return u6(t)}function Z3(t){t.to&&we(t.to)===gA&&(t.to="0x0000000000000000000000000000000000000000");const e=Bf({hash:zt,index:Be(_e,void 0),type:n=>n==="0x"||n==null?0:_e(n),accessList:Be(cl,null),blobVersionedHashes:Be(Zd(zt,!0),null),authorizationList:Be(Zd(n=>{let r;if(n.signature)r=n.signature;else{let i=n.yParity;i==="0x1b"?i=0:i==="0x1c"&&(i=1),r=Object.assign({},n,{yParity:i})}return{address:Qe(n.address),chainId:we(n.chainId),nonce:we(n.nonce),signature:Fn.from(r)}},!1),null),blockHash:Be(zt,null),blockNumber:Be(_e,null),transactionIndex:Be(_e,null),from:Qe,gasPrice:Be(we),maxPriorityFeePerGas:Be(we),maxFeePerGas:Be(we),maxFeePerBlobGas:Be(we,null),gasLimit:we,to:Be(Qe,null),value:we,nonce:_e,data:pu,creates:Be(Qe,null),chainId:Be(we,null)},{data:["input"],gasLimit:["gas"],index:["transactionIndex"]})(t);if(e.to==null&&e.creates==null&&(e.creates=X4(e)),(t.type===1||t.type===2)&&t.accessList==null&&(e.accessList=[]),t.signature?e.signature=Fn.from(t.signature):e.signature=Fn.from(t),e.chainId==null){const n=e.signature.legacyChainId;n!=null&&(e.chainId=n)}return e.blockHash&&we(e.blockHash)===gA&&(e.blockHash=null),e}const f6="0x00000000000C2E074eC69A0dFb2997BA6C7d2e1e";class Df{constructor(e){Q(this,"name");Ce(this,{name:e})}clone(){return new Df(this.name)}}class xg extends Df{constructor(n,r){n==null&&(n=0);super(`org.ethers.network.plugins.GasCost#${n||0}`);Q(this,"effectiveBlock");Q(this,"txBase");Q(this,"txCreate");Q(this,"txDataZero");Q(this,"txDataNonzero");Q(this,"txAccessListStorageKey");Q(this,"txAccessListAddress");const i={effectiveBlock:n};function s(o,a){let l=(r||{})[o];l==null&&(l=a),G(typeof l=="number",`invalud value for ${o}`,"costs",r),i[o]=l}s("txBase",21e3),s("txCreate",32e3),s("txDataZero",4),s("txDataNonzero",16),s("txAccessListStorageKey",1900),s("txAccessListAddress",2400),Ce(this,i)}clone(){return new xg(this.effectiveBlock,this)}}class kg extends Df{constructor(n,r){super("org.ethers.plugins.network.Ens");Q(this,"address");Q(this,"targetNetwork");Ce(this,{address:n||f6,targetNetwork:r??1})}clone(){return new kg(this.address,this.targetNetwork)}}var Sf,Cf;class h6 extends Df{constructor(n,r){super("org.ethers.plugins.network.FetchUrlFeeDataPlugin");Z(this,Sf);Z(this,Cf);H(this,Sf,n),H(this,Cf,r)}get url(){return k(this,Sf)}get processFunc(){return k(this,Cf)}clone(){return this}}Sf=new WeakMap,Cf=new WeakMap;const Rm=new Map;var Fc,jc,go;const Zl=class Zl{constructor(e,n){Z(this,Fc);Z(this,jc);Z(this,go);H(this,Fc,e),H(this,jc,we(n)),H(this,go,new Map)}toJSON(){return{name:this.name,chainId:String(this.chainId)}}get name(){return k(this,Fc)}set name(e){H(this,Fc,e)}get chainId(){return k(this,jc)}set chainId(e){H(this,jc,we(e,"chainId"))}matches(e){if(e==null)return!1;if(typeof e=="string"){try{return this.chainId===we(e)}catch{}return this.name===e}if(typeof e=="number"||typeof e=="bigint"){try{return this.chainId===we(e)}catch{}return!1}if(typeof e=="object"){if(e.chainId!=null){try{return this.chainId===we(e.chainId)}catch{}return!1}return e.name!=null?this.name===e.name:!1}return!1}get plugins(){return Array.from(k(this,go).values())}attachPlugin(e){if(k(this,go).get(e.name))throw new Error(`cannot replace existing plugin: ${e.name} `);return k(this,go).set(e.name,e.clone()),this}getPlugin(e){return k(this,go).get(e)||null}getPlugins(e){return this.plugins.filter(n=>n.name.split("#")[0]===e)}clone(){const e=new Zl(this.name,this.chainId);return this.plugins.forEach(n=>{e.attachPlugin(n.clone())}),e}computeIntrinsicGas(e){const n=this.getPlugin("org.ethers.plugins.network.GasCost")||new xg;let r=n.txBase;if(e.to==null&&(r+=n.txCreate),e.data)for(let i=2;i<e.data.length;i+=2)e.data.substring(i,i+2)==="00"?r+=n.txDataZero:r+=n.txDataNonzero;if(e.accessList){const i=cl(e.accessList);for(const s in i)r+=n.txAccessListAddress+n.txAccessListStorageKey*i[s].storageKeys.length}return r}static from(e){if(p6(),e==null)return Zl.from("mainnet");if(typeof e=="number"&&(e=BigInt(e)),typeof e=="string"||typeof e=="bigint"){const n=Rm.get(e);if(n)return n();if(typeof e=="bigint")return new Zl("unknown",e);G(!1,"unknown network","network",e)}if(typeof e.clone=="function")return e.clone();if(typeof e=="object"){G(typeof e.name=="string"&&typeof e.chainId=="number","invalid network object name or chainId","network",e);const n=new Zl(e.name,e.chainId);return(e.ensAddress||e.ensNetwork!=null)&&n.attachPlugin(new kg(e.ensAddress,e.ensNetwork)),n}G(!1,"invalid network","network",e)}static register(e,n){typeof e=="number"&&(e=BigInt(e));const r=Rm.get(e);r&&G(!1,`conflicting network for ${JSON.stringify(r.name)}`,"nameOrChainId",e),Rm.set(e,n)}};Fc=new WeakMap,jc=new WeakMap,go=new WeakMap;let Pi=Zl;function mA(t,e){const n=String(t);if(!n.match(/^[0-9.]+$/))throw new Error(`invalid gwei value: ${t}`);const r=n.split(".");if(r.length===1&&r.push(""),r.length!==2)throw new Error(`invalid gwei value: ${t}`);for(;r[1].length<e;)r[1]+="0";if(r[1].length>9){let i=BigInt(r[1].substring(0,9));r[1].substring(9).match(/^0+$/)||i++,r[1]=i.toString()}return BigInt(r[0]+r[1])}function yA(t){return new h6(t,async(e,n,r)=>{r.setHeader("User-Agent","ethers");let i;try{const[s,o]=await Promise.all([r.send(),e()]);i=s;const a=i.bodyJson.standard;return{gasPrice:o.gasPrice,maxFeePerGas:mA(a.maxFee,9),maxPriorityFeePerGas:mA(a.maxPriorityFee,9)}}catch(s){se(!1,`error encountered with polygon gas station (${JSON.stringify(r.url)})`,"SERVER_ERROR",{request:r,response:i,error:s})}})}let vA=!1;function p6(){if(vA)return;vA=!0;function t(e,n,r){const i=function(){const s=new Pi(e,n);return r.ensNetwork!=null&&s.attachPlugin(new kg(null,r.ensNetwork)),s.attachPlugin(new xg),(r.plugins||[]).forEach(o=>{s.attachPlugin(o)}),s};Pi.register(e,i),Pi.register(n,i),r.altNames&&r.altNames.forEach(s=>{Pi.register(s,i)})}t("mainnet",1,{ensNetwork:1,altNames:["homestead"]}),t("ropsten",3,{ensNetwork:3}),t("rinkeby",4,{ensNetwork:4}),t("goerli",5,{ensNetwork:5}),t("kovan",42,{ensNetwork:42}),t("sepolia",11155111,{ensNetwork:11155111}),t("holesky",17e3,{ensNetwork:17e3}),t("classic",61,{}),t("classicKotti",6,{}),t("arbitrum",42161,{ensNetwork:1}),t("arbitrum-goerli",421613,{}),t("arbitrum-sepolia",421614,{}),t("base",8453,{ensNetwork:1}),t("base-goerli",84531,{}),t("base-sepolia",84532,{}),t("bnb",56,{ensNetwork:1}),t("bnbt",97,{}),t("linea",59144,{ensNetwork:1}),t("linea-goerli",59140,{}),t("linea-sepolia",59141,{}),t("matic",137,{ensNetwork:1,plugins:[yA("https://gasstation.polygon.technology/v2")]}),t("matic-amoy",80002,{}),t("matic-mumbai",80001,{altNames:["maticMumbai","maticmum"],plugins:[yA("https://gasstation-testnet.polygon.technology/v2")]}),t("optimism",10,{ensNetwork:1,plugins:[]}),t("optimism-goerli",420,{}),t("optimism-sepolia",11155420,{}),t("xdai",100,{ensNetwork:1})}function zv(t){return JSON.parse(JSON.stringify(t))}var is,yr,mo,vi,Hc,ap;class g6{constructor(e){Z(this,Hc);Z(this,is);Z(this,yr);Z(this,mo);Z(this,vi);H(this,is,e),H(this,yr,null),H(this,mo,4e3),H(this,vi,-2)}get pollingInterval(){return k(this,mo)}set pollingInterval(e){H(this,mo,e)}start(){k(this,yr)||(H(this,yr,k(this,is)._setTimeout(ce(this,Hc,ap).bind(this),k(this,mo))),ce(this,Hc,ap).call(this))}stop(){k(this,yr)&&(k(this,is)._clearTimeout(k(this,yr)),H(this,yr,null))}pause(e){this.stop(),e&&H(this,vi,-2)}resume(){this.start()}}is=new WeakMap,yr=new WeakMap,mo=new WeakMap,vi=new WeakMap,Hc=new WeakSet,ap=async function(){try{const e=await k(this,is).getBlockNumber();if(k(this,vi)===-2){H(this,vi,e);return}if(e!==k(this,vi)){for(let n=k(this,vi)+1;n<=e;n++){if(k(this,yr)==null)return;await k(this,is).emit("block",n)}H(this,vi,e)}}catch{}k(this,yr)!=null&&H(this,yr,k(this,is)._setTimeout(ce(this,Hc,ap).bind(this),k(this,mo)))};var Da,$a,yo;class tb{constructor(e){Z(this,Da);Z(this,$a);Z(this,yo);H(this,Da,e),H(this,yo,!1),H(this,$a,n=>{this._poll(n,k(this,Da))})}async _poll(e,n){throw new Error("sub-classes must override this")}start(){k(this,yo)||(H(this,yo,!0),k(this,$a).call(this,-2),k(this,Da).on("block",k(this,$a)))}stop(){k(this,yo)&&(H(this,yo,!1),k(this,Da).off("block",k(this,$a)))}pause(e){this.stop()}resume(){this.start()}}Da=new WeakMap,$a=new WeakMap,yo=new WeakMap;var Kc,ss;class m6 extends tb{constructor(n,r){super(n);Z(this,Kc);Z(this,ss);H(this,Kc,r),H(this,ss,-2)}pause(n){n&&H(this,ss,-2),super.pause(n)}async _poll(n,r){const i=await r.getBlock(k(this,Kc));i!=null&&(k(this,ss)===-2?H(this,ss,i.number):i.number>k(this,ss)&&(r.emit(k(this,Kc),i.number),H(this,ss,i.number)))}}Kc=new WeakMap,ss=new WeakMap;var W0;class y6 extends tb{constructor(n,r){super(n);Z(this,W0);H(this,W0,zv(r))}async _poll(n,r){throw new Error("@TODO")}}W0=new WeakMap;var zc;class v6 extends tb{constructor(n,r){super(n);Z(this,zc);H(this,zc,r)}async _poll(n,r){const i=await r.getTransactionReceipt(k(this,zc));i&&r.emit(k(this,zc),i)}}zc=new WeakMap;var os,Vc,Gc,vo,vr,q0,X3;class nb{constructor(e,n){Z(this,q0);Z(this,os);Z(this,Vc);Z(this,Gc);Z(this,vo);Z(this,vr);H(this,os,e),H(this,Vc,zv(n)),H(this,Gc,ce(this,q0,X3).bind(this)),H(this,vo,!1),H(this,vr,-2)}start(){k(this,vo)||(H(this,vo,!0),k(this,vr)===-2&&k(this,os).getBlockNumber().then(e=>{H(this,vr,e)}),k(this,os).on("block",k(this,Gc)))}stop(){k(this,vo)&&(H(this,vo,!1),k(this,os).off("block",k(this,Gc)))}pause(e){this.stop(),e&&H(this,vr,-2)}resume(){this.start()}}os=new WeakMap,Vc=new WeakMap,Gc=new WeakMap,vo=new WeakMap,vr=new WeakMap,q0=new WeakSet,X3=async function(e){if(k(this,vr)===-2)return;const n=zv(k(this,Vc));n.fromBlock=k(this,vr)+1,n.toBlock=e;const r=await k(this,os).getLogs(n);if(r.length===0){k(this,vr)<e-60&&H(this,vr,e-60);return}for(const i of r)k(this,os).emit(k(this,Vc),i),H(this,vr,i.blockNumber)};const w6=BigInt(2),b6=10;function mh(t){return t&&typeof t.then=="function"}function lp(t,e){return t+":"+JSON.stringify(e,(n,r)=>{if(r==null)return"null";if(typeof r=="bigint")return`bigint:${r.toString()}`;if(typeof r=="string")return r.toLowerCase();if(typeof r=="object"&&!Array.isArray(r)){const i=Object.keys(r);return i.sort(),i.reduce((s,o)=>(s[o]=r[o],s),{})}return r})}class eP{constructor(e){Q(this,"name");Ce(this,{name:e})}start(){}stop(){}pause(e){}resume(){}}function E6(t){return JSON.parse(JSON.stringify(t))}function Vv(t){return t=Array.from(new Set(t).values()),t.sort(),t}async function Im(t,e){if(t==null)throw new Error("invalid event");if(Array.isArray(t)&&(t={topics:t}),typeof t=="string")switch(t){case"block":case"debug":case"error":case"finalized":case"network":case"pending":case"safe":return{type:t,tag:t}}if(nt(t,32)){const n=t.toLowerCase();return{type:"transaction",tag:lp("tx",{hash:n}),hash:n}}if(t.orphan){const n=t;return{type:"orphan",tag:lp("orphan",n),filter:E6(n)}}if(t.address||t.topics){const n=t,r={topics:(n.topics||[]).map(i=>i==null?null:Array.isArray(i)?Vv(i.map(s=>s.toLowerCase())):i.toLowerCase())};if(n.address){const i=[],s=[],o=a=>{nt(a)?i.push(a):s.push((async()=>{i.push(await bn(a,e))})())};Array.isArray(n.address)?n.address.forEach(o):o(n.address),s.length&&await Promise.all(s),r.address=Vv(i.map(a=>a.toLowerCase()))}return{filter:r,tag:lp("event",r),type:"event"}}G(!1,"unknown ProviderEvent","event",t)}function Om(){return new Date().getTime()}const A6={cacheTimeout:250,pollingInterval:4e3};var tn,wo,nn,Wc,Jn,Ua,bo,as,xf,wr,qc,Qc,Ne,Vn,Gv,Wv,Xu,qv,ed,cp;class S6{constructor(e,n){Z(this,Ne);Z(this,tn);Z(this,wo);Z(this,nn);Z(this,Wc);Z(this,Jn);Z(this,Ua);Z(this,bo);Z(this,as);Z(this,xf);Z(this,wr);Z(this,qc);Z(this,Qc);if(H(this,Qc,Object.assign({},A6,n||{})),e==="any")H(this,Ua,!0),H(this,Jn,null);else if(e){const r=Pi.from(e);H(this,Ua,!1),H(this,Jn,Promise.resolve(r)),setTimeout(()=>{this.emit("network",r,null)},0)}else H(this,Ua,!1),H(this,Jn,null);H(this,as,-1),H(this,bo,new Map),H(this,tn,new Map),H(this,wo,new Map),H(this,nn,null),H(this,Wc,!1),H(this,xf,1),H(this,wr,new Map),H(this,qc,!1)}get pollingInterval(){return k(this,Qc).pollingInterval}get provider(){return this}get plugins(){return Array.from(k(this,wo).values())}attachPlugin(e){if(k(this,wo).get(e.name))throw new Error(`cannot replace existing plugin: ${e.name} `);return k(this,wo).set(e.name,e.connect(this)),this}getPlugin(e){return k(this,wo).get(e)||null}get disableCcipRead(){return k(this,qc)}set disableCcipRead(e){H(this,qc,!!e)}async ccipReadFetch(e,n,r){if(this.disableCcipRead||r.length===0||e.to==null)return null;const i=e.to.toLowerCase(),s=n.toLowerCase(),o=[];for(let a=0;a<r.length;a++){const l=r[a],c=l.replace("{sender}",i).replace("{data}",s),u=new Ho(c);l.indexOf("{data}")===-1&&(u.body={data:s,sender:i}),this.emit("debug",{action:"sendCcipReadFetchRequest",request:u,index:a,urls:r});let d="unknown error",f;try{f=await u.send()}catch(h){o.push(h.message),this.emit("debug",{action:"receiveCcipReadFetchError",request:u,result:{error:h}});continue}try{const h=f.bodyJson;if(h.data)return this.emit("debug",{action:"receiveCcipReadFetchResult",request:u,result:h}),h.data;h.message&&(d=h.message),this.emit("debug",{action:"receiveCcipReadFetchError",request:u,result:h})}catch{}se(f.statusCode<400||f.statusCode>=500,`response not found during CCIP fetch: ${d}`,"OFFCHAIN_FAULT",{reason:"404_MISSING_RESOURCE",transaction:e,info:{url:l,errorMessage:d}}),o.push(d)}se(!1,`error encountered during CCIP fetch: ${o.map(a=>JSON.stringify(a)).join(", ")}`,"OFFCHAIN_FAULT",{reason:"500_SERVER_ERROR",transaction:e,info:{urls:r,errorMessages:o}})}_wrapBlock(e,n){return new H5(a6(e),this)}_wrapLog(e,n){return new Lf(s6(e),this)}_wrapTransactionReceipt(e,n){return new U3(d6(e),this)}_wrapTransactionResponse(e,n){return new Jd(Z3(e),this)}_detectNetwork(){se(!1,"sub-classes must implement this","UNSUPPORTED_OPERATION",{operation:"_detectNetwork"})}async _perform(e){se(!1,`unsupported method: ${e.method}`,"UNSUPPORTED_OPERATION",{operation:e.method,info:e})}async getBlockNumber(){const e=_e(await ce(this,Ne,Vn).call(this,{method:"getBlockNumber"}),"%response");return k(this,as)>=0&&H(this,as,e),e}_getAddress(e){return bn(e,this)}_getBlockTag(e){if(e==null)return"latest";switch(e){case"earliest":return"0x0";case"finalized":case"latest":case"pending":case"safe":return e}if(nt(e))return nt(e,32)?e:qr(e);if(typeof e=="bigint"&&(e=_e(e,"blockTag")),typeof e=="number")return e>=0?qr(e):k(this,as)>=0?qr(k(this,as)+e):this.getBlockNumber().then(n=>qr(n+e));G(!1,"invalid blockTag","blockTag",e)}_getFilter(e){const n=(e.topics||[]).map(l=>l==null?null:Array.isArray(l)?Vv(l.map(c=>c.toLowerCase())):l.toLowerCase()),r="blockHash"in e?e.blockHash:void 0,i=(l,c,u)=>{let d;switch(l.length){case 0:break;case 1:d=l[0];break;default:l.sort(),d=l}if(r&&(c!=null||u!=null))throw new Error("invalid filter");const f={};return d&&(f.address=d),n.length&&(f.topics=n),c&&(f.fromBlock=c),u&&(f.toBlock=u),r&&(f.blockHash=r),f};let s=[];if(e.address)if(Array.isArray(e.address))for(const l of e.address)s.push(this._getAddress(l));else s.push(this._getAddress(e.address));let o;"fromBlock"in e&&(o=this._getBlockTag(e.fromBlock));let a;return"toBlock"in e&&(a=this._getBlockTag(e.toBlock)),s.filter(l=>typeof l!="string").length||o!=null&&typeof o!="string"||a!=null&&typeof a!="string"?Promise.all([Promise.all(s),o,a]).then(l=>i(l[0],l[1],l[2])):i(s,o,a)}_getTransactionRequest(e){const n=f0(e),r=[];if(["to","from"].forEach(i=>{if(n[i]==null)return;const s=bn(n[i],this);mh(s)?r.push(async function(){n[i]=await s}()):n[i]=s}),n.blockTag!=null){const i=this._getBlockTag(n.blockTag);mh(i)?r.push(async function(){n.blockTag=await i}()):n.blockTag=i}return r.length?async function(){return await Promise.all(r),n}():n}async getNetwork(){if(k(this,Jn)==null){const i=(async()=>{try{const s=await this._detectNetwork();return this.emit("network",s,null),s}catch(s){throw k(this,Jn)===i&&H(this,Jn,null),s}})();return H(this,Jn,i),(await i).clone()}const e=k(this,Jn),[n,r]=await Promise.all([e,this._detectNetwork()]);return n.chainId!==r.chainId&&(k(this,Ua)?(this.emit("network",r,n),k(this,Jn)===e&&H(this,Jn,Promise.resolve(r))):se(!1,`network changed: ${n.chainId} => ${r.chainId} `,"NETWORK_ERROR",{event:"changed"})),n.clone()}async getFeeData(){const e=await this.getNetwork(),n=async()=>{const{_block:i,gasPrice:s,priorityFee:o}=await gn({_block:ce(this,Ne,qv).call(this,"latest",!1),gasPrice:(async()=>{try{const u=await ce(this,Ne,Vn).call(this,{method:"getGasPrice"});return we(u,"%response")}catch{}return null})(),priorityFee:(async()=>{try{const u=await ce(this,Ne,Vn).call(this,{method:"getPriorityFee"});return we(u,"%response")}catch{}return null})()});let a=null,l=null;const c=this._wrapBlock(i,e);return c&&c.baseFeePerGas&&(l=o??BigInt("1000000000"),a=c.baseFeePerGas*w6+l),new dA(s,a,l)},r=e.getPlugin("org.ethers.plugins.network.FetchUrlFeeDataPlugin");if(r){const i=new Ho(r.url),s=await r.processFunc(n,this,i);return new dA(s.gasPrice,s.maxFeePerGas,s.maxPriorityFeePerGas)}return await n()}async estimateGas(e){let n=this._getTransactionRequest(e);return mh(n)&&(n=await n),we(await ce(this,Ne,Vn).call(this,{method:"estimateGas",transaction:n}),"%response")}async call(e){const{tx:n,blockTag:r}=await gn({tx:this._getTransactionRequest(e),blockTag:this._getBlockTag(e.blockTag)});return await ce(this,Ne,Wv).call(this,ce(this,Ne,Gv).call(this,n,r,e.enableCcipRead?0:-1))}async getBalance(e,n){return we(await ce(this,Ne,Xu).call(this,{method:"getBalance"},e,n),"%response")}async getTransactionCount(e,n){return _e(await ce(this,Ne,Xu).call(this,{method:"getTransactionCount"},e,n),"%response")}async getCode(e,n){return fe(await ce(this,Ne,Xu).call(this,{method:"getCode"},e,n))}async getStorage(e,n,r){const i=we(n,"position");return fe(await ce(this,Ne,Xu).call(this,{method:"getStorage",position:i},e,r))}async broadcastTransaction(e){const{blockNumber:n,hash:r,network:i}=await gn({blockNumber:this.getBlockNumber(),hash:this._perform({method:"broadcastTransaction",signedTransaction:e}),network:this.getNetwork()}),s=s0.from(e);if(s.hash!==r)throw new Error("@TODO: the returned hash did not match");return this._wrapTransactionResponse(s,i).replaceableTransaction(n)}async getBlock(e,n){const{network:r,params:i}=await gn({network:this.getNetwork(),params:ce(this,Ne,qv).call(this,e,!!n)});return i==null?null:this._wrapBlock(i,r)}async getTransaction(e){const{network:n,params:r}=await gn({network:this.getNetwork(),params:ce(this,Ne,Vn).call(this,{method:"getTransaction",hash:e})});return r==null?null:this._wrapTransactionResponse(r,n)}async getTransactionReceipt(e){const{network:n,params:r}=await gn({network:this.getNetwork(),params:ce(this,Ne,Vn).call(this,{method:"getTransactionReceipt",hash:e})});if(r==null)return null;if(r.gasPrice==null&&r.effectiveGasPrice==null){const i=await ce(this,Ne,Vn).call(this,{method:"getTransaction",hash:e});if(i==null)throw new Error("report this; could not find tx or effectiveGasPrice");r.effectiveGasPrice=i.gasPrice}return this._wrapTransactionReceipt(r,n)}async getTransactionResult(e){const{result:n}=await gn({network:this.getNetwork(),result:ce(this,Ne,Vn).call(this,{method:"getTransactionResult",hash:e})});return n==null?null:fe(n)}async getLogs(e){let n=this._getFilter(e);mh(n)&&(n=await n);const{network:r,params:i}=await gn({network:this.getNetwork(),params:ce(this,Ne,Vn).call(this,{method:"getLogs",filter:n})});return i.map(s=>this._wrapLog(s,r))}_getProvider(e){se(!1,"provider cannot connect to target network","UNSUPPORTED_OPERATION",{operation:"_getProvider()"})}async getResolver(e){return await p0.fromName(this,e)}async getAvatar(e){const n=await this.getResolver(e);return n?await n.getAvatar():null}async resolveName(e){const n=await this.getResolver(e);return n?await n.getAddress():null}async lookupAddress(e){e=Qe(e);const n=$v(e.substring(2).toLowerCase()+".addr.reverse");try{const r=await p0.getEnsAddress(this),s=await new kt(r,["function resolver(bytes32) view returns (address)"],this).resolver(n);if(s==null||s===Kd)return null;const a=await new kt(s,["function name(bytes32) view returns (string)"],this).name(n);return await this.resolveName(a)!==e?null:a}catch(r){if(Vt(r,"BAD_DATA")&&r.value==="0x"||Vt(r,"CALL_EXCEPTION"))return null;throw r}return null}async waitForTransaction(e,n,r){const i=n??1;return i===0?this.getTransactionReceipt(e):new Promise(async(s,o)=>{let a=null;const l=async c=>{try{const u=await this.getTransactionReceipt(e);if(u!=null&&c-u.blockNumber+1>=i){s(u),a&&(clearTimeout(a),a=null);return}}catch(u){console.log("EEE",u)}this.once("block",l)};r!=null&&(a=setTimeout(()=>{a!=null&&(a=null,this.off("block",l),o(st("timeout","TIMEOUT",{reason:"timeout"})))},r)),l(await this.getBlockNumber())})}async waitForBlock(e){se(!1,"not implemented yet","NOT_IMPLEMENTED",{operation:"waitForBlock"})}_clearTimeout(e){const n=k(this,wr).get(e);n&&(n.timer&&clearTimeout(n.timer),k(this,wr).delete(e))}_setTimeout(e,n){n==null&&(n=0);const r=Pu(this,xf)._++,i=()=>{k(this,wr).delete(r),e()};if(this.paused)k(this,wr).set(r,{timer:null,func:i,time:n});else{const s=setTimeout(i,n);k(this,wr).set(r,{timer:s,func:i,time:Om()})}return r}_forEachSubscriber(e){for(const n of k(this,tn).values())e(n.subscriber)}_getSubscriber(e){switch(e.type){case"debug":case"error":case"network":return new eP(e.type);case"block":{const n=new g6(this);return n.pollingInterval=this.pollingInterval,n}case"safe":case"finalized":return new m6(this,e.type);case"event":return new nb(this,e.filter);case"transaction":return new v6(this,e.hash);case"orphan":return new y6(this,e.filter)}throw new Error(`unsupported event: ${e.type}`)}_recoverSubscriber(e,n){for(const r of k(this,tn).values())if(r.subscriber===e){r.started&&r.subscriber.stop(),r.subscriber=n,r.started&&n.start(),k(this,nn)!=null&&n.pause(k(this,nn));break}}async on(e,n){const r=await ce(this,Ne,cp).call(this,e);return r.listeners.push({listener:n,once:!1}),r.started||(r.subscriber.start(),r.started=!0,k(this,nn)!=null&&r.subscriber.pause(k(this,nn))),this}async once(e,n){const r=await ce(this,Ne,cp).call(this,e);return r.listeners.push({listener:n,once:!0}),r.started||(r.subscriber.start(),r.started=!0,k(this,nn)!=null&&r.subscriber.pause(k(this,nn))),this}async emit(e,...n){const r=await ce(this,Ne,ed).call(this,e,n);if(!r||r.listeners.length===0)return!1;const i=r.listeners.length;return r.listeners=r.listeners.filter(({listener:s,once:o})=>{const a=new p_(this,o?null:s,e);try{s.call(this,...n,a)}catch{}return!o}),r.listeners.length===0&&(r.started&&r.subscriber.stop(),k(this,tn).delete(r.tag)),i>0}async listenerCount(e){if(e){const r=await ce(this,Ne,ed).call(this,e);return r?r.listeners.length:0}let n=0;for(const{listeners:r}of k(this,tn).values())n+=r.length;return n}async listeners(e){if(e){const r=await ce(this,Ne,ed).call(this,e);return r?r.listeners.map(({listener:i})=>i):[]}let n=[];for(const{listeners:r}of k(this,tn).values())n=n.concat(r.map(({listener:i})=>i));return n}async off(e,n){const r=await ce(this,Ne,ed).call(this,e);if(!r)return this;if(n){const i=r.listeners.map(({listener:s})=>s).indexOf(n);i>=0&&r.listeners.splice(i,1)}return(!n||r.listeners.length===0)&&(r.started&&r.subscriber.stop(),k(this,tn).delete(r.tag)),this}async removeAllListeners(e){if(e){const{tag:n,started:r,subscriber:i}=await ce(this,Ne,cp).call(this,e);r&&i.stop(),k(this,tn).delete(n)}else for(const[n,{started:r,subscriber:i}]of k(this,tn))r&&i.stop(),k(this,tn).delete(n);return this}async addListener(e,n){return await this.on(e,n)}async removeListener(e,n){return this.off(e,n)}get destroyed(){return k(this,Wc)}destroy(){this.removeAllListeners();for(const e of k(this,wr).keys())this._clearTimeout(e);H(this,Wc,!0)}get paused(){return k(this,nn)!=null}set paused(e){!!e!==this.paused&&(this.paused?this.resume():this.pause(!1))}pause(e){if(H(this,as,-1),k(this,nn)!=null){if(k(this,nn)==!!e)return;se(!1,"cannot change pause type; resume first","UNSUPPORTED_OPERATION",{operation:"pause"})}this._forEachSubscriber(n=>n.pause(e)),H(this,nn,!!e);for(const n of k(this,wr).values())n.timer&&clearTimeout(n.timer),n.time=Om()-n.time}resume(){if(k(this,nn)!=null){this._forEachSubscriber(e=>e.resume()),H(this,nn,null);for(const e of k(this,wr).values()){let n=e.time;n<0&&(n=0),e.time=Om(),setTimeout(e.func,n)}}}}tn=new WeakMap,wo=new WeakMap,nn=new WeakMap,Wc=new WeakMap,Jn=new WeakMap,Ua=new WeakMap,bo=new WeakMap,as=new WeakMap,xf=new WeakMap,wr=new WeakMap,qc=new WeakMap,Qc=new WeakMap,Ne=new WeakSet,Vn=async function(e){const n=k(this,Qc).cacheTimeout;if(n<0)return await this._perform(e);const r=lp(e.method,e);let i=k(this,bo).get(r);return i||(i=this._perform(e),k(this,bo).set(r,i),setTimeout(()=>{k(this,bo).get(r)===i&&k(this,bo).delete(r)},n)),await i},Gv=async function(e,n,r){se(r<b6,"CCIP read exceeded maximum redirections","OFFCHAIN_FAULT",{reason:"TOO_MANY_REDIRECTS",transaction:Object.assign({},e,{blockTag:n,enableCcipRead:!0})});const i=f0(e);try{return fe(await this._perform({method:"call",transaction:i,blockTag:n}))}catch(s){if(!this.disableCcipRead&&$1(s)&&s.data&&r>=0&&n==="latest"&&i.to!=null&&ht(s.data,0,4)==="0x556f1830"){const o=s.data,a=await bn(i.to,this);let l;try{l=P6(ht(s.data,4))}catch(d){se(!1,d.message,"OFFCHAIN_FAULT",{reason:"BAD_DATA",transaction:i,info:{data:o}})}se(l.sender.toLowerCase()===a.toLowerCase(),"CCIP Read sender mismatch","CALL_EXCEPTION",{action:"call",data:o,reason:"OffchainLookup",transaction:i,invocation:null,revert:{signature:"OffchainLookup(address,string[],bytes,bytes4,bytes)",name:"OffchainLookup",args:l.errorArgs}});const c=await this.ccipReadFetch(i,l.calldata,l.urls);se(c!=null,"CCIP Read failed to fetch data","OFFCHAIN_FAULT",{reason:"FETCH_FAILED",transaction:i,info:{data:s.data,errorArgs:l.errorArgs}});const u={to:a,data:mt([l.selector,_6([c,l.extraData])])};this.emit("debug",{action:"sendCcipReadCall",transaction:u});try{const d=await ce(this,Ne,Gv).call(this,u,n,r+1);return this.emit("debug",{action:"receiveCcipReadCallResult",transaction:Object.assign({},u),result:d}),d}catch(d){throw this.emit("debug",{action:"receiveCcipReadCallError",transaction:Object.assign({},u),error:d}),d}}throw s}},Wv=async function(e){const{value:n}=await gn({network:this.getNetwork(),value:e});return n},Xu=async function(e,n,r){let i=this._getAddress(n),s=this._getBlockTag(r);return(typeof i!="string"||typeof s!="string")&&([i,s]=await Promise.all([i,s])),await ce(this,Ne,Wv).call(this,ce(this,Ne,Vn).call(this,Object.assign(e,{address:i,blockTag:s})))},qv=async function(e,n){if(nt(e,32))return await ce(this,Ne,Vn).call(this,{method:"getBlock",blockHash:e,includeTransactions:n});let r=this._getBlockTag(e);return typeof r!="string"&&(r=await r),await ce(this,Ne,Vn).call(this,{method:"getBlock",blockTag:r,includeTransactions:n})},ed=async function(e,n){let r=await Im(e,this);return r.type==="event"&&n&&n.length>0&&n[0].removed===!0&&(r=await Im({orphan:"drop-log",log:n[0]},this)),k(this,tn).get(r.tag)||null},cp=async function(e){const n=await Im(e,this),r=n.tag;let i=k(this,tn).get(r);return i||(i={subscriber:this._getSubscriber(n),tag:r,addressableMap:new WeakMap,nameMap:new Map,started:!1,listeners:[]},k(this,tn).set(r,i)),i};function C6(t,e){try{const n=Qv(t,e);if(n)return n0(n)}catch{}return null}function Qv(t,e){if(t==="0x")return null;try{const n=_e(ht(t,e,e+32)),r=_e(ht(t,n,n+32));return ht(t,n+32,n+32+r)}catch{}return null}function wA(t){const e=Pt(t);if(e.length>32)throw new Error("internal; should not happen");const n=new Uint8Array(32);return n.set(e,32-e.length),n}function x6(t){if(t.length%32===0)return t;const e=new Uint8Array(Math.ceil(t.length/32)*32);return e.set(t),e}const k6=new Uint8Array([]);function _6(t){const e=[];let n=0;for(let r=0;r<t.length;r++)e.push(k6),n+=32;for(let r=0;r<t.length;r++){const i=Ie(t[r]);e[r]=wA(n),e.push(wA(i.length)),e.push(x6(i)),n+=32+Math.ceil(i.length/32)*32}return mt(e)}const bA="0x0000000000000000000000000000000000000000000000000000000000000000";function P6(t){const e={sender:"",urls:[],calldata:"",selector:"",extraData:"",errorArgs:[]};se(sc(t)>=5*32,"insufficient OffchainLookup data","OFFCHAIN_FAULT",{reason:"insufficient OffchainLookup data"});const n=ht(t,0,32);se(ht(n,0,12)===ht(bA,0,12),"corrupt OffchainLookup sender","OFFCHAIN_FAULT",{reason:"corrupt OffchainLookup sender"}),e.sender=ht(n,12);try{const r=[],i=_e(ht(t,32,64)),s=_e(ht(t,i,i+32)),o=ht(t,i+32);for(let a=0;a<s;a++){const l=C6(o,a*32);if(l==null)throw new Error("abort");r.push(l)}e.urls=r}catch{se(!1,"corrupt OffchainLookup urls","OFFCHAIN_FAULT",{reason:"corrupt OffchainLookup urls"})}try{const r=Qv(t,64);if(r==null)throw new Error("abort");e.calldata=r}catch{se(!1,"corrupt OffchainLookup calldata","OFFCHAIN_FAULT",{reason:"corrupt OffchainLookup calldata"})}se(ht(t,100,128)===ht(bA,0,28),"corrupt OffchainLookup callbaackSelector","OFFCHAIN_FAULT",{reason:"corrupt OffchainLookup callbaackSelector"}),e.selector=ht(t,96,100);try{const r=Qv(t,128);if(r==null)throw new Error("abort");e.extraData=r}catch{se(!1,"corrupt OffchainLookup extraData","OFFCHAIN_FAULT",{reason:"corrupt OffchainLookup extraData"})}return e.errorArgs="sender,urls,calldata,selector,extraData".split(/,/).map(r=>e[r]),e}function Xo(t,e){if(t.provider)return t.provider;se(!1,"missing provider","UNSUPPORTED_OPERATION",{operation:e})}async function EA(t,e){let n=f0(e);if(n.to!=null&&(n.to=bn(n.to,t)),n.from!=null){const r=n.from;n.from=Promise.all([t.getAddress(),bn(r,t)]).then(([i,s])=>(G(i.toLowerCase()===s.toLowerCase(),"transaction from mismatch","tx.from",s),i))}else n.from=t.getAddress();return await gn(n)}class T6{constructor(e){Q(this,"provider");Ce(this,{provider:e||null})}async getNonce(e){return Xo(this,"getTransactionCount").getTransactionCount(await this.getAddress(),e)}async populateCall(e){return await EA(this,e)}async populateTransaction(e){const n=Xo(this,"populateTransaction"),r=await EA(this,e);r.nonce==null&&(r.nonce=await this.getNonce("pending")),r.gasLimit==null&&(r.gasLimit=await this.estimateGas(r));const i=await this.provider.getNetwork();if(r.chainId!=null){const o=we(r.chainId);G(o===i.chainId,"transaction chainId mismatch","tx.chainId",e.chainId)}else r.chainId=i.chainId;const s=r.maxFeePerGas!=null||r.maxPriorityFeePerGas!=null;if(r.gasPrice!=null&&(r.type===2||s)?G(!1,"eip-1559 transaction do not support gasPrice","tx",e):(r.type===0||r.type===1)&&s&&G(!1,"pre-eip-1559 transaction do not support maxFeePerGas/maxPriorityFeePerGas","tx",e),(r.type===2||r.type==null)&&r.maxFeePerGas!=null&&r.maxPriorityFeePerGas!=null)r.type=2;else if(r.type===0||r.type===1){const o=await n.getFeeData();se(o.gasPrice!=null,"network does not support gasPrice","UNSUPPORTED_OPERATION",{operation:"getGasPrice"}),r.gasPrice==null&&(r.gasPrice=o.gasPrice)}else{const o=await n.getFeeData();if(r.type==null)if(o.maxFeePerGas!=null&&o.maxPriorityFeePerGas!=null)if(r.authorizationList&&r.authorizationList.length?r.type=4:r.type=2,r.gasPrice!=null){const a=r.gasPrice;delete r.gasPrice,r.maxFeePerGas=a,r.maxPriorityFeePerGas=a}else r.maxFeePerGas==null&&(r.maxFeePerGas=o.maxFeePerGas),r.maxPriorityFeePerGas==null&&(r.maxPriorityFeePerGas=o.maxPriorityFeePerGas);else o.gasPrice!=null?(se(!s,"network does not support EIP-1559","UNSUPPORTED_OPERATION",{operation:"populateTransaction"}),r.gasPrice==null&&(r.gasPrice=o.gasPrice),r.type=0):se(!1,"failed to get consistent fee data","UNSUPPORTED_OPERATION",{operation:"signer.getFeeData"});else(r.type===2||r.type===3||r.type===4)&&(r.maxFeePerGas==null&&(r.maxFeePerGas=o.maxFeePerGas),r.maxPriorityFeePerGas==null&&(r.maxPriorityFeePerGas=o.maxPriorityFeePerGas))}return await gn(r)}async populateAuthorization(e){const n=Object.assign({},e);return n.chainId==null&&(n.chainId=(await Xo(this,"getNetwork").getNetwork()).chainId),n.nonce==null&&(n.nonce=await this.getNonce()),n}async estimateGas(e){return Xo(this,"estimateGas").estimateGas(await this.populateCall(e))}async call(e){return Xo(this,"call").call(await this.populateCall(e))}async resolveName(e){return await Xo(this,"resolveName").resolveName(e)}async sendTransaction(e){const n=Xo(this,"sendTransaction"),r=await this.populateTransaction(e);delete r.from;const i=s0.from(r);return await n.broadcastTransaction(await this.signTransaction(i))}authorize(e){se(!1,"authorization not implemented for this signer","UNSUPPORTED_OPERATION",{operation:"authorize"})}}function R6(t){return JSON.parse(JSON.stringify(t))}var fn,wi,Fa,Eo,ja,Yc,Wo,Yv,Jv;class tP{constructor(e){Z(this,Wo);Z(this,fn);Z(this,wi);Z(this,Fa);Z(this,Eo);Z(this,ja);Z(this,Yc);H(this,fn,e),H(this,wi,null),H(this,Fa,ce(this,Wo,Yv).bind(this)),H(this,Eo,!1),H(this,ja,null),H(this,Yc,!1)}_subscribe(e){throw new Error("subclasses must override this")}_emitResults(e,n){throw new Error("subclasses must override this")}_recover(e){throw new Error("subclasses must override this")}start(){k(this,Eo)||(H(this,Eo,!0),ce(this,Wo,Yv).call(this,-2))}stop(){k(this,Eo)&&(H(this,Eo,!1),H(this,Yc,!0),ce(this,Wo,Jv).call(this),k(this,fn).off("block",k(this,Fa)))}pause(e){e&&ce(this,Wo,Jv).call(this),k(this,fn).off("block",k(this,Fa))}resume(){this.start()}}fn=new WeakMap,wi=new WeakMap,Fa=new WeakMap,Eo=new WeakMap,ja=new WeakMap,Yc=new WeakMap,Wo=new WeakSet,Yv=async function(e){try{k(this,wi)==null&&H(this,wi,this._subscribe(k(this,fn)));let n=null;try{n=await k(this,wi)}catch(s){if(!Vt(s,"UNSUPPORTED_OPERATION")||s.operation!=="eth_newFilter")throw s}if(n==null){H(this,wi,null),k(this,fn)._recoverSubscriber(this,this._recover(k(this,fn)));return}const r=await k(this,fn).getNetwork();if(k(this,ja)||H(this,ja,r),k(this,ja).chainId!==r.chainId)throw new Error("chaid changed");if(k(this,Yc))return;const i=await k(this,fn).send("eth_getFilterChanges",[n]);await this._emitResults(k(this,fn),i)}catch(n){console.log("@TODO",n)}k(this,fn).once("block",k(this,Fa))},Jv=function(){const e=k(this,wi);e&&(H(this,wi,null),e.then(n=>{k(this,fn).destroyed||k(this,fn).send("eth_uninstallFilter",[n])}))};var Ha;class I6 extends tP{constructor(n,r){super(n);Z(this,Ha);H(this,Ha,R6(r))}_recover(n){return new nb(n,k(this,Ha))}async _subscribe(n){return await n.send("eth_newFilter",[k(this,Ha)])}async _emitResults(n,r){for(const i of r)n.emit(k(this,Ha),n._wrapLog(i,n._network))}}Ha=new WeakMap;class O6 extends tP{async _subscribe(e){return await e.send("eth_newPendingTransactionFilter",[])}async _emitResults(e,n){for(const r of n)e.emit("pending",r)}}const N6="bigint,boolean,function,number,string,symbol".split(/,/g);function up(t){if(t==null||N6.indexOf(typeof t)>=0||typeof t.getAddress=="function")return t;if(Array.isArray(t))return t.map(up);if(typeof t=="object")return Object.keys(t).reduce((e,n)=>(e[n]=t[n],e),{});throw new Error(`should not happen: ${t} (${typeof t})`)}function M6(t){return new Promise(e=>{setTimeout(e,t)})}function vl(t){return t&&t.toLowerCase()}function AA(t){return t&&typeof t.pollingInterval=="number"}const nP={polling:!1,staticNetwork:null,batchStallTime:10,batchMaxSize:1<<20,batchMaxCount:100,cacheTimeout:250,pollingInterval:4e3};class Nm extends T6{constructor(n,r){super(n);Q(this,"address");r=Qe(r),Ce(this,{address:r})}connect(n){se(!1,"cannot reconnect JsonRpcSigner","UNSUPPORTED_OPERATION",{operation:"signer.connect"})}async getAddress(){return this.address}async populateTransaction(n){return await this.populateCall(n)}async sendUncheckedTransaction(n){const r=up(n),i=[];if(r.from){const o=r.from;i.push((async()=>{const a=await bn(o,this.provider);G(a!=null&&a.toLowerCase()===this.address.toLowerCase(),"from address mismatch","transaction",n),r.from=a})())}else r.from=this.address;if(r.gasLimit==null&&i.push((async()=>{r.gasLimit=await this.provider.estimateGas({...r,from:this.address})})()),r.to!=null){const o=r.to;i.push((async()=>{r.to=await bn(o,this.provider)})())}i.length&&await Promise.all(i);const s=this.provider.getRpcTransaction(r);return this.provider.send("eth_sendTransaction",[s])}async sendTransaction(n){const r=await this.provider.getBlockNumber(),i=await this.sendUncheckedTransaction(n);return await new Promise((s,o)=>{const a=[1e3,100];let l=0;const c=async()=>{try{const u=await this.provider.getTransaction(i);if(u!=null){s(u.replaceableTransaction(r));return}}catch(u){if(Vt(u,"CANCELLED")||Vt(u,"BAD_DATA")||Vt(u,"NETWORK_ERROR")||Vt(u,"UNSUPPORTED_OPERATION")){u.info==null&&(u.info={}),u.info.sendTransactionHash=i,o(u);return}if(Vt(u,"INVALID_ARGUMENT")&&(l++,u.info==null&&(u.info={}),u.info.sendTransactionHash=i,l>10)){o(u);return}this.provider.emit("error",st("failed to fetch transation after sending (will try again)","UNKNOWN_ERROR",{error:u}))}this.provider._setTimeout(()=>{c()},a.pop()||4e3)};c()})}async signTransaction(n){const r=up(n);if(r.from){const s=await bn(r.from,this.provider);G(s!=null&&s.toLowerCase()===this.address.toLowerCase(),"from address mismatch","transaction",n),r.from=s}else r.from=this.address;const i=this.provider.getRpcTransaction(r);return await this.provider.send("eth_signTransaction",[i])}async signMessage(n){const r=typeof n=="string"?vs(n):n;return await this.provider.send("personal_sign",[fe(r),this.address.toLowerCase()])}async signTypedData(n,r,i){const s=up(i),o=await d0.resolveNames(n,r,s,async a=>{const l=await bn(a);return G(l!=null,"TypedData does not support null address","value",a),l});return await this.provider.send("eth_signTypedData_v4",[this.address.toLowerCase(),JSON.stringify(d0.getPayload(o.domain,r,o.value))])}async unlock(n){return this.provider.send("personal_unlockAccount",[this.address.toLowerCase(),n,null])}async _legacySignMessage(n){const r=typeof n=="string"?vs(n):n;return await this.provider.send("eth_sign",[this.address.toLowerCase(),fe(r)])}}var Ka,Jc,ls,bi,zr,br,In,kf,Zv;class L6 extends S6{constructor(n,r){super(n,r);Z(this,kf);Z(this,Ka);Z(this,Jc);Z(this,ls);Z(this,bi);Z(this,zr);Z(this,br);Z(this,In);H(this,Jc,1),H(this,Ka,Object.assign({},nP,r||{})),H(this,ls,[]),H(this,bi,null),H(this,br,null),H(this,In,null);{let s=null;const o=new Promise(a=>{s=a});H(this,zr,{promise:o,resolve:s})}const i=this._getOption("staticNetwork");typeof i=="boolean"?(G(!i||n!=="any","staticNetwork cannot be used on special network 'any'","options",r),i&&n!=null&&H(this,br,Pi.from(n))):i&&(G(n==null||i.matches(n),"staticNetwork MUST match network object","options",r),H(this,br,i))}_getOption(n){return k(this,Ka)[n]}get _network(){return se(k(this,br),"network is not available yet","NETWORK_ERROR"),k(this,br)}async _perform(n){if(n.method==="call"||n.method==="estimateGas"){let i=n.transaction;if(i&&i.type!=null&&we(i.type)&&i.maxFeePerGas==null&&i.maxPriorityFeePerGas==null){const s=await this.getFeeData();s.maxFeePerGas==null&&s.maxPriorityFeePerGas==null&&(n=Object.assign({},n,{transaction:Object.assign({},i,{type:void 0})}))}}const r=this.getRpcRequest(n);return r!=null?await this.send(r.method,r.args):super._perform(n)}async _detectNetwork(){const n=this._getOption("staticNetwork");if(n)if(n===!0){if(k(this,br))return k(this,br)}else return n;return k(this,In)?await k(this,In):this.ready?(H(this,In,(async()=>{try{const r=Pi.from(we(await this.send("eth_chainId",[])));return H(this,In,null),r}catch(r){throw H(this,In,null),r}})()),await k(this,In)):(H(this,In,(async()=>{const r={id:Pu(this,Jc)._++,method:"eth_chainId",params:[],jsonrpc:"2.0"};this.emit("debug",{action:"sendRpcPayload",payload:r});let i;try{i=(await this._send(r))[0],H(this,In,null)}catch(s){throw H(this,In,null),this.emit("debug",{action:"receiveRpcError",error:s}),s}if(this.emit("debug",{action:"receiveRpcResult",result:i}),"result"in i)return Pi.from(we(i.result));throw this.getRpcError(r,i)})()),await k(this,In))}_start(){k(this,zr)==null||k(this,zr).resolve==null||(k(this,zr).resolve(),H(this,zr,null),(async()=>{for(;k(this,br)==null&&!this.destroyed;)try{H(this,br,await this._detectNetwork())}catch(n){if(this.destroyed)break;console.log("JsonRpcProvider failed to detect network and cannot start up; retry in 1s (perhaps the URL is wrong or the node is not started)"),this.emit("error",st("failed to bootstrap network detection","NETWORK_ERROR",{event:"initial-network-discovery",info:{error:n}})),await M6(1e3)}ce(this,kf,Zv).call(this)})())}async _waitUntilReady(){if(k(this,zr)!=null)return await k(this,zr).promise}_getSubscriber(n){return n.type==="pending"?new O6(this):n.type==="event"?this._getOption("polling")?new nb(this,n.filter):new I6(this,n.filter):n.type==="orphan"&&n.filter.orphan==="drop-log"?new eP("orphan"):super._getSubscriber(n)}get ready(){return k(this,zr)==null}getRpcTransaction(n){const r={};return["chainId","gasLimit","gasPrice","type","maxFeePerGas","maxPriorityFeePerGas","nonce","value"].forEach(i=>{if(n[i]==null)return;let s=i;i==="gasLimit"&&(s="gas"),r[s]=qr(we(n[i],`tx.${i}`))}),["from","to","data"].forEach(i=>{n[i]!=null&&(r[i]=fe(n[i]))}),n.accessList&&(r.accessList=cl(n.accessList)),n.blobVersionedHashes&&(r.blobVersionedHashes=n.blobVersionedHashes.map(i=>i.toLowerCase())),n.authorizationList&&(r.authorizationList=n.authorizationList.map(i=>{const s=i3(i);return{address:s.address,nonce:qr(s.nonce),chainId:qr(s.chainId),yParity:qr(s.signature.yParity),r:qr(s.signature.r),s:qr(s.signature.s)}})),r}getRpcRequest(n){switch(n.method){case"chainId":return{method:"eth_chainId",args:[]};case"getBlockNumber":return{method:"eth_blockNumber",args:[]};case"getGasPrice":return{method:"eth_gasPrice",args:[]};case"getPriorityFee":return{method:"eth_maxPriorityFeePerGas",args:[]};case"getBalance":return{method:"eth_getBalance",args:[vl(n.address),n.blockTag]};case"getTransactionCount":return{method:"eth_getTransactionCount",args:[vl(n.address),n.blockTag]};case"getCode":return{method:"eth_getCode",args:[vl(n.address),n.blockTag]};case"getStorage":return{method:"eth_getStorageAt",args:[vl(n.address),"0x"+n.position.toString(16),n.blockTag]};case"broadcastTransaction":return{method:"eth_sendRawTransaction",args:[n.signedTransaction]};case"getBlock":if("blockTag"in n)return{method:"eth_getBlockByNumber",args:[n.blockTag,!!n.includeTransactions]};if("blockHash"in n)return{method:"eth_getBlockByHash",args:[n.blockHash,!!n.includeTransactions]};break;case"getTransaction":return{method:"eth_getTransactionByHash",args:[n.hash]};case"getTransactionReceipt":return{method:"eth_getTransactionReceipt",args:[n.hash]};case"call":return{method:"eth_call",args:[this.getRpcTransaction(n.transaction),n.blockTag]};case"estimateGas":return{method:"eth_estimateGas",args:[this.getRpcTransaction(n.transaction)]};case"getLogs":return n.filter&&n.filter.address!=null&&(Array.isArray(n.filter.address)?n.filter.address=n.filter.address.map(vl):n.filter.address=vl(n.filter.address)),{method:"eth_getLogs",args:[n.filter]}}return null}getRpcError(n,r){const{method:i}=n,{error:s}=r;if(i==="eth_estimateGas"&&s.message){const l=s.message;if(!l.match(/revert/i)&&l.match(/insufficient funds/i))return st("insufficient funds","INSUFFICIENT_FUNDS",{transaction:n.params[0],info:{payload:n,error:s}});if(l.match(/nonce/i)&&l.match(/too low/i))return st("nonce has already been used","NONCE_EXPIRED",{transaction:n.params[0],info:{payload:n,error:s}})}if(i==="eth_call"||i==="eth_estimateGas"){const l=Xv(s),c=Yd.getBuiltinCallException(i==="eth_call"?"call":"estimateGas",n.params[0],l?l.data:null);return c.info={error:s,payload:n},c}const o=JSON.stringify(D6(s));if(typeof s.message=="string"&&s.message.match(/user denied|ethers-user-denied/i))return st("user rejected action","ACTION_REJECTED",{action:{eth_sign:"signMessage",personal_sign:"signMessage",eth_signTypedData_v4:"signTypedData",eth_signTransaction:"signTransaction",eth_sendTransaction:"sendTransaction",eth_requestAccounts:"requestAccess",wallet_requestAccounts:"requestAccess"}[i]||"unknown",reason:"rejected",info:{payload:n,error:s}});if(i==="eth_sendRawTransaction"||i==="eth_sendTransaction"){const l=n.params[0];if(o.match(/insufficient funds|base fee exceeds gas limit/i))return st("insufficient funds for intrinsic transaction cost","INSUFFICIENT_FUNDS",{transaction:l,info:{error:s}});if(o.match(/nonce/i)&&o.match(/too low/i))return st("nonce has already been used","NONCE_EXPIRED",{transaction:l,info:{error:s}});if(o.match(/replacement transaction/i)&&o.match(/underpriced/i))return st("replacement fee too low","REPLACEMENT_UNDERPRICED",{transaction:l,info:{error:s}});if(o.match(/only replay-protected/i))return st("legacy pre-eip-155 transactions not supported","UNSUPPORTED_OPERATION",{operation:i,info:{transaction:l,info:{error:s}}})}let a=!!o.match(/the method .* does not exist/i);return a||s&&s.details&&s.details.startsWith("Unauthorized method:")&&(a=!0),a?st("unsupported operation","UNSUPPORTED_OPERATION",{operation:n.method,info:{error:s,payload:n}}):st("could not coalesce error","UNKNOWN_ERROR",{error:s,payload:n})}send(n,r){if(this.destroyed)return Promise.reject(st("provider destroyed; cancelled request","UNSUPPORTED_OPERATION",{operation:n}));const i=Pu(this,Jc)._++,s=new Promise((o,a)=>{k(this,ls).push({resolve:o,reject:a,payload:{method:n,params:r,id:i,jsonrpc:"2.0"}})});return ce(this,kf,Zv).call(this),s}async getSigner(n){n==null&&(n=0);const r=this.send("eth_accounts",[]);if(typeof n=="number"){const s=await r;if(n>=s.length)throw new Error("no such account");return new Nm(this,s[n])}const{accounts:i}=await gn({network:this.getNetwork(),accounts:r});n=Qe(n);for(const s of i)if(Qe(s)===n)return new Nm(this,n);throw new Error("invalid account")}async listAccounts(){return(await this.send("eth_accounts",[])).map(r=>new Nm(this,r))}destroy(){k(this,bi)&&(clearTimeout(k(this,bi)),H(this,bi,null));for(const{payload:n,reject:r}of k(this,ls))r(st("provider destroyed; cancelled request","UNSUPPORTED_OPERATION",{operation:n.method}));H(this,ls,[]),super.destroy()}}Ka=new WeakMap,Jc=new WeakMap,ls=new WeakMap,bi=new WeakMap,zr=new WeakMap,br=new WeakMap,In=new WeakMap,kf=new WeakSet,Zv=function(){if(k(this,bi))return;const n=this._getOption("batchMaxCount")===1?0:this._getOption("batchStallTime");H(this,bi,setTimeout(()=>{H(this,bi,null);const r=k(this,ls);for(H(this,ls,[]);r.length;){const i=[r.shift()];for(;r.length&&i.length!==k(this,Ka).batchMaxCount;)if(i.push(r.shift()),JSON.stringify(i.map(o=>o.payload)).length>k(this,Ka).batchMaxSize){r.unshift(i.pop());break}(async()=>{const s=i.length===1?i[0].payload:i.map(o=>o.payload);this.emit("debug",{action:"sendRpcPayload",payload:s});try{const o=await this._send(s);this.emit("debug",{action:"receiveRpcResult",result:o});for(const{resolve:a,reject:l,payload:c}of i){if(this.destroyed){l(st("provider destroyed; cancelled request","UNSUPPORTED_OPERATION",{operation:c.method}));continue}const u=o.filter(d=>d.id===c.id)[0];if(u==null){const d=st("missing response for request","BAD_DATA",{value:o,info:{payload:c}});this.emit("error",d),l(d);continue}if("error"in u){l(this.getRpcError(c,u));continue}a(u.result)}}catch(o){this.emit("debug",{action:"receiveRpcError",error:o});for(const{reject:a}of i)a(o)}})()}},n))};var Ao;class B6 extends L6{constructor(n,r){super(n,r);Z(this,Ao);let i=this._getOption("pollingInterval");i==null&&(i=nP.pollingInterval),H(this,Ao,i)}_getSubscriber(n){const r=super._getSubscriber(n);return AA(r)&&(r.pollingInterval=k(this,Ao)),r}get pollingInterval(){return k(this,Ao)}set pollingInterval(n){if(!Number.isInteger(n)||n<0)throw new Error("invalid interval");H(this,Ao,n),this._forEachSubscriber(r=>{AA(r)&&(r.pollingInterval=k(this,Ao))})}}Ao=new WeakMap;function Xv(t){if(t==null)return null;if(typeof t.message=="string"&&t.message.match(/revert/i)&&nt(t.data))return{message:t.message,data:t.data};if(typeof t=="object"){for(const e in t){const n=Xv(t[e]);if(n)return n}return null}if(typeof t=="string")try{return Xv(JSON.parse(t))}catch{}return null}function ew(t,e){if(t!=null){if(typeof t.message=="string"&&e.push(t.message),typeof t=="object")for(const n in t)ew(t[n],e);if(typeof t=="string")try{return ew(JSON.parse(t),e)}catch{}}}function D6(t){const e=[];return ew(t,e),e}var Zc,Xc;const fa=class fa extends B6{constructor(n,r,i){const s=Object.assign({},i??{},{batchMaxCount:1});G(n&&n.request,"invalid EIP-1193 provider","ethereum",n);super(r,s);Z(this,Zc);Z(this,Xc);H(this,Xc,null),i&&i.providerInfo&&H(this,Xc,i.providerInfo),H(this,Zc,async(o,a)=>{const l={method:o,params:a};this.emit("debug",{action:"sendEip1193Request",payload:l});try{const c=await n.request(l);return this.emit("debug",{action:"receiveEip1193Result",result:c}),c}catch(c){const u=new Error(c.message);throw u.code=c.code,u.data=c.data,u.payload=l,this.emit("debug",{action:"receiveEip1193Error",error:u}),u}})}get providerInfo(){return k(this,Xc)}async send(n,r){return await this._start(),await super.send(n,r)}async _send(n){G(!Array.isArray(n),"EIP-1193 does not support batch request","payload",n);try{const r=await k(this,Zc).call(this,n.method,n.params||[]);return[{id:n.id,result:r}]}catch(r){return[{id:n.id,error:{code:r.code,data:r.data,message:r.message}}]}}getRpcError(n,r){switch(r=JSON.parse(JSON.stringify(r)),r.error.code||-1){case 4001:r.error.message=`ethers-user-denied: ${r.error.message}`;break;case 4200:r.error.message=`ethers-unsupported: ${r.error.message}`;break}return super.getRpcError(n,r)}async hasSigner(n){n==null&&(n=0);const r=await this.send("eth_accounts",[]);return typeof n=="number"?r.length>n:(n=n.toLowerCase(),r.filter(i=>i.toLowerCase()===n).length!==0)}async getSigner(n){if(n==null&&(n=0),!await this.hasSigner(n))try{await k(this,Zc).call(this,"eth_requestAccounts",[])}catch(r){const i=r.payload;throw this.getRpcError(i,{id:i.id,error:r})}return await super.getSigner(n)}static async discover(n){if(n==null&&(n={}),n.provider)return new fa(n.provider);const r=n.window?n.window:typeof window<"u"?window:null;if(r==null)return null;const i=n.anyProvider;if(i&&r.ethereum)return new fa(r.ethereum);if(!("addEventListener"in r&&"dispatchEvent"in r&&"removeEventListener"in r))return null;const s=n.timeout?n.timeout:300;return s===0?null:await new Promise((o,a)=>{let l=[];const c=f=>{l.push(f.detail),i&&u()},u=()=>{if(clearTimeout(d),l.length)if(n&&n.filter){const f=n.filter(l.map(h=>Object.assign({},h.info)));if(f==null)o(null);else if(f instanceof fa)o(f);else{let h=null;if(f.uuid&&(h=l.filter(g=>f.uuid===g.info.uuid)[0]),h){const{provider:m,info:g}=h;o(new fa(m,void 0,{providerInfo:g}))}else a(st("filter returned unknown info","UNSUPPORTED_OPERATION",{value:f}))}}else{const{provider:f,info:h}=l[0];o(new fa(f,void 0,{providerInfo:h}))}else o(null);r.removeEventListener("eip6963:announceProvider",c)},d=setTimeout(()=>{u()},s);r.addEventListener("eip6963:announceProvider",c),r.dispatchEvent(new Event("eip6963:requestProvider"))})}};Zc=new WeakMap,Xc=new WeakMap;let g0=fa;const $6="modulepreload",U6=function(t,e){return new URL(t,e).href},SA={},F6=function(e,n,r){let i=Promise.resolve();if(n&&n.length>0){const o=document.getElementsByTagName("link"),a=document.querySelector("meta[property=csp-nonce]"),l=(a==null?void 0:a.nonce)||(a==null?void 0:a.getAttribute("nonce"));i=Promise.allSettled(n.map(c=>{if(c=U6(c,r),c in SA)return;SA[c]=!0;const u=c.endsWith(".css"),d=u?'[rel="stylesheet"]':"";if(!!r)for(let m=o.length-1;m>=0;m--){const g=o[m];if(g.href===c&&(!u||g.rel==="stylesheet"))return}else if(document.querySelector(`link[href="${c}"]${d}`))return;const h=document.createElement("link");if(h.rel=u?"stylesheet":$6,u||(h.as="script"),h.crossOrigin="",h.href=c,l&&h.setAttribute("nonce",l),document.head.appendChild(h),u)return new Promise((m,g)=>{h.addEventListener("load",m),h.addEventListener("error",()=>g(new Error(`Unable to preload CSS for ${c}`)))})}))}function s(o){const a=new Event("vite:preloadError",{cancelable:!0});if(a.payload=o,window.dispatchEvent(a),!a.defaultPrevented)throw o}return i.then(o=>{for(const a of o||[])a.status==="rejected"&&s(a.reason);return e().catch(s)})};var tw={exports:{}};(function(t,e){var n=typeof globalThis<"u"&&globalThis||typeof self<"u"&&self||typeof zf<"u"&&zf,r=function(){function s(){this.fetch=!1,this.DOMException=n.DOMException}return s.prototype=n,new s}();(function(s){(function(o){var a=typeof s<"u"&&s||typeof self<"u"&&self||typeof zf<"u"&&zf||{},l={searchParams:"URLSearchParams"in a,iterable:"Symbol"in a&&"iterator"in Symbol,blob:"FileReader"in a&&"Blob"in a&&function(){try{return new Blob,!0}catch{return!1}}(),formData:"FormData"in a,arrayBuffer:"ArrayBuffer"in a};function c(C){return C&&DataView.prototype.isPrototypeOf(C)}if(l.arrayBuffer)var u=["[object Int8Array]","[object Uint8Array]","[object Uint8ClampedArray]","[object Int16Array]","[object Uint16Array]","[object Int32Array]","[object Uint32Array]","[object Float32Array]","[object Float64Array]"],d=ArrayBuffer.isView||function(C){return C&&u.indexOf(Object.prototype.toString.call(C))>-1};function f(C){if(typeof C!="string"&&(C=String(C)),/[^a-z0-9\-#$%&'*+.^_`|~!]/i.test(C)||C==="")throw new TypeError('Invalid character in header field name: "'+C+'"');return C.toLowerCase()}function h(C){return typeof C!="string"&&(C=String(C)),C}function m(C){var O={next:function(){var D=C.shift();return{done:D===void 0,value:D}}};return l.iterable&&(O[Symbol.iterator]=function(){return O}),O}function g(C){this.map={},C instanceof g?C.forEach(function(O,D){this.append(D,O)},this):Array.isArray(C)?C.forEach(function(O){if(O.length!=2)throw new TypeError("Headers constructor: expected name/value pair to be length 2, found"+O.length);this.append(O[0],O[1])},this):C&&Object.getOwnPropertyNames(C).forEach(function(O){this.append(O,C[O])},this)}g.prototype.append=function(C,O){C=f(C),O=h(O);var D=this.map[C];this.map[C]=D?D+", "+O:O},g.prototype.delete=function(C){delete this.map[f(C)]},g.prototype.get=function(C){return C=f(C),this.has(C)?this.map[C]:null},g.prototype.has=function(C){return this.map.hasOwnProperty(f(C))},g.prototype.set=function(C,O){this.map[f(C)]=h(O)},g.prototype.forEach=function(C,O){for(var D in this.map)this.map.hasOwnProperty(D)&&C.call(O,this.map[D],D,this)},g.prototype.keys=function(){var C=[];return this.forEach(function(O,D){C.push(D)}),m(C)},g.prototype.values=function(){var C=[];return this.forEach(function(O){C.push(O)}),m(C)},g.prototype.entries=function(){var C=[];return this.forEach(function(O,D){C.push([D,O])}),m(C)},l.iterable&&(g.prototype[Symbol.iterator]=g.prototype.entries);function w(C){if(!C._noBody){if(C.bodyUsed)return Promise.reject(new TypeError("Already read"));C.bodyUsed=!0}}function p(C){return new Promise(function(O,D){C.onload=function(){O(C.result)},C.onerror=function(){D(C.error)}})}function v(C){var O=new FileReader,D=p(O);return O.readAsArrayBuffer(C),D}function y(C){var O=new FileReader,D=p(O),b=/charset=([A-Za-z0-9_-]+)/.exec(C.type),E=b?b[1]:"utf-8";return O.readAsText(C,E),D}function x(C){for(var O=new Uint8Array(C),D=new Array(O.length),b=0;b<O.length;b++)D[b]=String.fromCharCode(O[b]);return D.join("")}function T(C){if(C.slice)return C.slice(0);var O=new Uint8Array(C.byteLength);return O.set(new Uint8Array(C)),O.buffer}function B(){return this.bodyUsed=!1,this._initBody=function(C){this.bodyUsed=this.bodyUsed,this._bodyInit=C,C?typeof C=="string"?this._bodyText=C:l.blob&&Blob.prototype.isPrototypeOf(C)?this._bodyBlob=C:l.formData&&FormData.prototype.isPrototypeOf(C)?this._bodyFormData=C:l.searchParams&&URLSearchParams.prototype.isPrototypeOf(C)?this._bodyText=C.toString():l.arrayBuffer&&l.blob&&c(C)?(this._bodyArrayBuffer=T(C.buffer),this._bodyInit=new Blob([this._bodyArrayBuffer])):l.arrayBuffer&&(ArrayBuffer.prototype.isPrototypeOf(C)||d(C))?this._bodyArrayBuffer=T(C):this._bodyText=C=Object.prototype.toString.call(C):(this._noBody=!0,this._bodyText=""),this.headers.get("content-type")||(typeof C=="string"?this.headers.set("content-type","text/plain;charset=UTF-8"):this._bodyBlob&&this._bodyBlob.type?this.headers.set("content-type",this._bodyBlob.type):l.searchParams&&URLSearchParams.prototype.isPrototypeOf(C)&&this.headers.set("content-type","application/x-www-form-urlencoded;charset=UTF-8"))},l.blob&&(this.blob=function(){var C=w(this);if(C)return C;if(this._bodyBlob)return Promise.resolve(this._bodyBlob);if(this._bodyArrayBuffer)return Promise.resolve(new Blob([this._bodyArrayBuffer]));if(this._bodyFormData)throw new Error("could not read FormData body as blob");return Promise.resolve(new Blob([this._bodyText]))}),this.arrayBuffer=function(){if(this._bodyArrayBuffer){var C=w(this);return C||(ArrayBuffer.isView(this._bodyArrayBuffer)?Promise.resolve(this._bodyArrayBuffer.buffer.slice(this._bodyArrayBuffer.byteOffset,this._bodyArrayBuffer.byteOffset+this._bodyArrayBuffer.byteLength)):Promise.resolve(this._bodyArrayBuffer))}else{if(l.blob)return this.blob().then(v);throw new Error("could not read as ArrayBuffer")}},this.text=function(){var C=w(this);if(C)return C;if(this._bodyBlob)return y(this._bodyBlob);if(this._bodyArrayBuffer)return Promise.resolve(x(this._bodyArrayBuffer));if(this._bodyFormData)throw new Error("could not read FormData body as text");return Promise.resolve(this._bodyText)},l.formData&&(this.formData=function(){return this.text().then(U)}),this.json=function(){return this.text().then(JSON.parse)},this}var j=["CONNECT","DELETE","GET","HEAD","OPTIONS","PATCH","POST","PUT","TRACE"];function M(C){var O=C.toUpperCase();return j.indexOf(O)>-1?O:C}function K(C,O){if(!(this instanceof K))throw new TypeError('Please use the "new" operator, this DOM object constructor cannot be called as a function.');O=O||{};var D=O.body;if(C instanceof K){if(C.bodyUsed)throw new TypeError("Already read");this.url=C.url,this.credentials=C.credentials,O.headers||(this.headers=new g(C.headers)),this.method=C.method,this.mode=C.mode,this.signal=C.signal,!D&&C._bodyInit!=null&&(D=C._bodyInit,C.bodyUsed=!0)}else this.url=String(C);if(this.credentials=O.credentials||this.credentials||"same-origin",(O.headers||!this.headers)&&(this.headers=new g(O.headers)),this.method=M(O.method||this.method||"GET"),this.mode=O.mode||this.mode||null,this.signal=O.signal||this.signal||function(){if("AbortController"in a){var _=new AbortController;return _.signal}}(),this.referrer=null,(this.method==="GET"||this.method==="HEAD")&&D)throw new TypeError("Body not allowed for GET or HEAD requests");if(this._initBody(D),(this.method==="GET"||this.method==="HEAD")&&(O.cache==="no-store"||O.cache==="no-cache")){var b=/([?&])_=[^&]*/;if(b.test(this.url))this.url=this.url.replace(b,"$1_="+new Date().getTime());else{var E=/\?/;this.url+=(E.test(this.url)?"&":"?")+"_="+new Date().getTime()}}}K.prototype.clone=function(){return new K(this,{body:this._bodyInit})};function U(C){var O=new FormData;return C.trim().split("&").forEach(function(D){if(D){var b=D.split("="),E=b.shift().replace(/\+/g," "),_=b.join("=").replace(/\+/g," ");O.append(decodeURIComponent(E),decodeURIComponent(_))}}),O}function W(C){var O=new g,D=C.replace(/\r?\n[\t ]+/g," ");return D.split("\r").map(function(b){return b.indexOf(`
`)===0?b.substr(1,b.length):b}).forEach(function(b){var E=b.split(":"),_=E.shift().trim();if(_){var I=E.join(":").trim();try{O.append(_,I)}catch(A){console.warn("Response "+A.message)}}}),O}B.call(K.prototype);function z(C,O){if(!(this instanceof z))throw new TypeError('Please use the "new" operator, this DOM object constructor cannot be called as a function.');if(O||(O={}),this.type="default",this.status=O.status===void 0?200:O.status,this.status<200||this.status>599)throw new RangeError("Failed to construct 'Response': The status provided (0) is outside the range [200, 599].");this.ok=this.status>=200&&this.status<300,this.statusText=O.statusText===void 0?"":""+O.statusText,this.headers=new g(O.headers),this.url=O.url||"",this._initBody(C)}B.call(z.prototype),z.prototype.clone=function(){return new z(this._bodyInit,{status:this.status,statusText:this.statusText,headers:new g(this.headers),url:this.url})},z.error=function(){var C=new z(null,{status:200,statusText:""});return C.ok=!1,C.status=0,C.type="error",C};var $=[301,302,303,307,308];z.redirect=function(C,O){if($.indexOf(O)===-1)throw new RangeError("Invalid status code");return new z(null,{status:O,headers:{location:C}})},o.DOMException=a.DOMException;try{new o.DOMException}catch{o.DOMException=function(O,D){this.message=O,this.name=D;var b=Error(O);this.stack=b.stack},o.DOMException.prototype=Object.create(Error.prototype),o.DOMException.prototype.constructor=o.DOMException}function N(C,O){return new Promise(function(D,b){var E=new K(C,O);if(E.signal&&E.signal.aborted)return b(new o.DOMException("Aborted","AbortError"));var _=new XMLHttpRequest;function I(){_.abort()}_.onload=function(){var P={statusText:_.statusText,headers:W(_.getAllResponseHeaders()||"")};E.url.indexOf("file://")===0&&(_.status<200||_.status>599)?P.status=200:P.status=_.status,P.url="responseURL"in _?_.responseURL:P.headers.get("X-Request-URL");var R="response"in _?_.response:_.responseText;setTimeout(function(){D(new z(R,P))},0)},_.onerror=function(){setTimeout(function(){b(new TypeError("Network request failed"))},0)},_.ontimeout=function(){setTimeout(function(){b(new TypeError("Network request timed out"))},0)},_.onabort=function(){setTimeout(function(){b(new o.DOMException("Aborted","AbortError"))},0)};function A(P){try{return P===""&&a.location.href?a.location.href:P}catch{return P}}if(_.open(E.method,A(E.url),!0),E.credentials==="include"?_.withCredentials=!0:E.credentials==="omit"&&(_.withCredentials=!1),"responseType"in _&&(l.blob?_.responseType="blob":l.arrayBuffer&&(_.responseType="arraybuffer")),O&&typeof O.headers=="object"&&!(O.headers instanceof g||a.Headers&&O.headers instanceof a.Headers)){var S=[];Object.getOwnPropertyNames(O.headers).forEach(function(P){S.push(f(P)),_.setRequestHeader(P,h(O.headers[P]))}),E.headers.forEach(function(P,R){S.indexOf(R)===-1&&_.setRequestHeader(R,P)})}else E.headers.forEach(function(P,R){_.setRequestHeader(R,P)});E.signal&&(E.signal.addEventListener("abort",I),_.onreadystatechange=function(){_.readyState===4&&E.signal.removeEventListener("abort",I)}),_.send(typeof E._bodyInit>"u"?null:E._bodyInit)})}return N.polyfill=!0,a.fetch||(a.fetch=N,a.Headers=g,a.Request=K,a.Response=z),o.Headers=g,o.Request=K,o.Response=z,o.fetch=N,o})({})})(r),r.fetch.ponyfill=!0,delete r.fetch.polyfill;var i=n.fetch?n:r;e=i.fetch,e.default=i.fetch,e.fetch=i.fetch,e.Headers=i.Headers,e.Request=i.Request,e.Response=i.Response,t.exports=e})(tw,tw.exports);var j6=tw.exports;const rP=Q0(j6);var nw={exports:{}},Mm,CA;function H6(){if(CA)return Mm;CA=1;var t=1e3,e=t*60,n=e*60,r=n*24,i=r*7,s=r*365.25;Mm=function(u,d){d=d||{};var f=typeof u;if(f==="string"&&u.length>0)return o(u);if(f==="number"&&isFinite(u))return d.long?l(u):a(u);throw new Error("val is not a non-empty string or a valid number. val="+JSON.stringify(u))};function o(u){if(u=String(u),!(u.length>100)){var d=/^(-?(?:\d+)?\.?\d+) *(milliseconds?|msecs?|ms|seconds?|secs?|s|minutes?|mins?|m|hours?|hrs?|h|days?|d|weeks?|w|years?|yrs?|y)?$/i.exec(u);if(d){var f=parseFloat(d[1]),h=(d[2]||"ms").toLowerCase();switch(h){case"years":case"year":case"yrs":case"yr":case"y":return f*s;case"weeks":case"week":case"w":return f*i;case"days":case"day":case"d":return f*r;case"hours":case"hour":case"hrs":case"hr":case"h":return f*n;case"minutes":case"minute":case"mins":case"min":case"m":return f*e;case"seconds":case"second":case"secs":case"sec":case"s":return f*t;case"milliseconds":case"millisecond":case"msecs":case"msec":case"ms":return f;default:return}}}}function a(u){var d=Math.abs(u);return d>=r?Math.round(u/r)+"d":d>=n?Math.round(u/n)+"h":d>=e?Math.round(u/e)+"m":d>=t?Math.round(u/t)+"s":u+"ms"}function l(u){var d=Math.abs(u);return d>=r?c(u,d,r,"day"):d>=n?c(u,d,n,"hour"):d>=e?c(u,d,e,"minute"):d>=t?c(u,d,t,"second"):u+" ms"}function c(u,d,f,h){var m=d>=f*1.5;return Math.round(u/f)+" "+h+(m?"s":"")}return Mm}function K6(t){n.debug=n,n.default=n,n.coerce=l,n.disable=o,n.enable=i,n.enabled=a,n.humanize=H6(),n.destroy=c,Object.keys(t).forEach(u=>{n[u]=t[u]}),n.names=[],n.skips=[],n.formatters={};function e(u){let d=0;for(let f=0;f<u.length;f++)d=(d<<5)-d+u.charCodeAt(f),d|=0;return n.colors[Math.abs(d)%n.colors.length]}n.selectColor=e;function n(u){let d,f=null,h,m;function g(...w){if(!g.enabled)return;const p=g,v=Number(new Date),y=v-(d||v);p.diff=y,p.prev=d,p.curr=v,d=v,w[0]=n.coerce(w[0]),typeof w[0]!="string"&&w.unshift("%O");let x=0;w[0]=w[0].replace(/%([a-zA-Z%])/g,(B,j)=>{if(B==="%%")return"%";x++;const M=n.formatters[j];if(typeof M=="function"){const K=w[x];B=M.call(p,K),w.splice(x,1),x--}return B}),n.formatArgs.call(p,w),(p.log||n.log).apply(p,w)}return g.namespace=u,g.useColors=n.useColors(),g.color=n.selectColor(u),g.extend=r,g.destroy=n.destroy,Object.defineProperty(g,"enabled",{enumerable:!0,configurable:!1,get:()=>f!==null?f:(h!==n.namespaces&&(h=n.namespaces,m=n.enabled(u)),m),set:w=>{f=w}}),typeof n.init=="function"&&n.init(g),g}function r(u,d){const f=n(this.namespace+(typeof d>"u"?":":d)+u);return f.log=this.log,f}function i(u){n.save(u),n.namespaces=u,n.names=[],n.skips=[];const d=(typeof u=="string"?u:"").trim().replace(/\s+/g,",").split(",").filter(Boolean);for(const f of d)f[0]==="-"?n.skips.push(f.slice(1)):n.names.push(f)}function s(u,d){let f=0,h=0,m=-1,g=0;for(;f<u.length;)if(h<d.length&&(d[h]===u[f]||d[h]==="*"))d[h]==="*"?(m=h,g=f,h++):(f++,h++);else if(m!==-1)h=m+1,g++,f=g;else return!1;for(;h<d.length&&d[h]==="*";)h++;return h===d.length}function o(){const u=[...n.names,...n.skips.map(d=>"-"+d)].join(",");return n.enable(""),u}function a(u){for(const d of n.skips)if(s(u,d))return!1;for(const d of n.names)if(s(u,d))return!0;return!1}function l(u){return u instanceof Error?u.stack||u.message:u}function c(){console.warn("Instance method `debug.destroy()` is deprecated and no longer does anything. It will be removed in the next major version of `debug`.")}return n.enable(n.load()),n}var z6=K6;(function(t,e){var n={};e.formatArgs=i,e.save=s,e.load=o,e.useColors=r,e.storage=a(),e.destroy=(()=>{let c=!1;return()=>{c||(c=!0,console.warn("Instance method `debug.destroy()` is deprecated and no longer does anything. It will be removed in the next major version of `debug`."))}})(),e.colors=["#0000CC","#0000FF","#0033CC","#0033FF","#0066CC","#0066FF","#0099CC","#0099FF","#00CC00","#00CC33","#00CC66","#00CC99","#00CCCC","#00CCFF","#3300CC","#3300FF","#3333CC","#3333FF","#3366CC","#3366FF","#3399CC","#3399FF","#33CC00","#33CC33","#33CC66","#33CC99","#33CCCC","#33CCFF","#6600CC","#6600FF","#6633CC","#6633FF","#66CC00","#66CC33","#9900CC","#9900FF","#9933CC","#9933FF","#99CC00","#99CC33","#CC0000","#CC0033","#CC0066","#CC0099","#CC00CC","#CC00FF","#CC3300","#CC3333","#CC3366","#CC3399","#CC33CC","#CC33FF","#CC6600","#CC6633","#CC9900","#CC9933","#CCCC00","#CCCC33","#FF0000","#FF0033","#FF0066","#FF0099","#FF00CC","#FF00FF","#FF3300","#FF3333","#FF3366","#FF3399","#FF33CC","#FF33FF","#FF6600","#FF6633","#FF9900","#FF9933","#FFCC00","#FFCC33"];function r(){if(typeof window<"u"&&window.process&&(window.process.type==="renderer"||window.process.__nwjs))return!0;if(typeof navigator<"u"&&navigator.userAgent&&navigator.userAgent.toLowerCase().match(/(edge|trident)\/(\d+)/))return!1;let c;return typeof document<"u"&&document.documentElement&&document.documentElement.style&&document.documentElement.style.WebkitAppearance||typeof window<"u"&&window.console&&(window.console.firebug||window.console.exception&&window.console.table)||typeof navigator<"u"&&navigator.userAgent&&(c=navigator.userAgent.toLowerCase().match(/firefox\/(\d+)/))&&parseInt(c[1],10)>=31||typeof navigator<"u"&&navigator.userAgent&&navigator.userAgent.toLowerCase().match(/applewebkit\/(\d+)/)}function i(c){if(c[0]=(this.useColors?"%c":"")+this.namespace+(this.useColors?" %c":" ")+c[0]+(this.useColors?"%c ":" ")+"+"+t.exports.humanize(this.diff),!this.useColors)return;const u="color: "+this.color;c.splice(1,0,u,"color: inherit");let d=0,f=0;c[0].replace(/%[a-zA-Z%]/g,h=>{h!=="%%"&&(d++,h==="%c"&&(f=d))}),c.splice(f,0,u)}e.log=console.debug||console.log||(()=>{});function s(c){try{c?e.storage.setItem("debug",c):e.storage.removeItem("debug")}catch{}}function o(){let c;try{c=e.storage.getItem("debug")||e.storage.getItem("DEBUG")}catch{}return!c&&typeof process<"u"&&"env"in process&&(c=n.DEBUG),c}function a(){try{return localStorage}catch{}}t.exports=z6(e);const{formatters:l}=t.exports;l.j=function(c){try{return JSON.stringify(c)}catch(u){return"[UnexpectedJSONParseError]: "+u.message}}})(nw,nw.exports);var V6=nw.exports;const An=Q0(V6);var rb=Object.defineProperty,G6=Object.getOwnPropertyDescriptor,W6=Object.getOwnPropertyNames,q6=Object.prototype.hasOwnProperty,Q6=(t,e)=>{for(var n in e)rb(t,n,{get:e[n],enumerable:!0})},Y6=(t,e,n,r)=>{if(e&&typeof e=="object"||typeof e=="function")for(let i of W6(e))!q6.call(t,i)&&i!==n&&rb(t,i,{get:()=>e[i],enumerable:!(r=G6(e,i))||r.enumerable});return t},J6=t=>Y6(rb({},"__esModule",{value:!0}),t),iP={};Q6(iP,{createFinalURL:()=>uP,createPathBasedClient:()=>rL,createQuerySerializer:()=>rw,default:()=>oP,defaultBodySerializer:()=>cP,defaultPathSerializer:()=>lP,mergeHeaders:()=>iw,randomID:()=>sP,removeTrailingSlash:()=>sw,serializeArrayParam:()=>sb,serializeObjectParam:()=>ib,serializePrimitiveParam:()=>$f,wrapAsPathBasedClient:()=>aP});var Z6=J6(iP),X6=/\{[^{}]+\}/g,eL=()=>{var t,e;return typeof process=="object"&&Number.parseInt((e=(t=process==null?void 0:process.versions)==null?void 0:t.node)==null?void 0:e.substring(0,2))>=18&&process.versions.undici};function sP(){return Math.random().toString(36).slice(2,11)}function oP(t){let{baseUrl:e="",Request:n=globalThis.Request,fetch:r=globalThis.fetch,querySerializer:i,bodySerializer:s,headers:o,requestInitExt:a=void 0,...l}={...t};a=eL()?a:void 0,e=sw(e);const c=[];async function u(d,f){const{baseUrl:h,fetch:m=r,Request:g=n,headers:w,params:p={},parseAs:v="json",querySerializer:y,bodySerializer:x=s??cP,body:T,...B}=f||{};let j=e;h&&(j=sw(h)??e);let M=typeof i=="function"?i:rw(i);y&&(M=typeof y=="function"?y:rw({...typeof i=="object"?i:{},...y}));const K=T===void 0?void 0:x(T,iw(o,w,p.header)),U=iw(K===void 0||K instanceof FormData?{}:{"Content-Type":"application/json"},o,w,p.header),W={redirect:"follow",...l,...B,body:K,headers:U};let z,$,N=new n(uP(d,{baseUrl:j,params:p,querySerializer:M}),W),C;for(const D in B)D in N||(N[D]=B[D]);if(c.length){z=sP(),$=Object.freeze({baseUrl:j,fetch:m,parseAs:v,querySerializer:M,bodySerializer:x});for(const D of c)if(D&&typeof D=="object"&&typeof D.onRequest=="function"){const b=await D.onRequest({request:N,schemaPath:d,params:p,options:$,id:z});if(b)if(b instanceof n)N=b;else if(b instanceof Response){C=b;break}else throw new Error("onRequest: must return new Request() or Response() when modifying the request")}}if(!C){try{C=await m(N,a)}catch(D){let b=D;if(c.length)for(let E=c.length-1;E>=0;E--){const _=c[E];if(_&&typeof _=="object"&&typeof _.onError=="function"){const I=await _.onError({request:N,error:b,schemaPath:d,params:p,options:$,id:z});if(I){if(I instanceof Response){b=void 0,C=I;break}if(I instanceof Error){b=I;continue}throw new Error("onError: must return new Response() or instance of Error")}}}if(b)throw b}if(c.length)for(let D=c.length-1;D>=0;D--){const b=c[D];if(b&&typeof b=="object"&&typeof b.onResponse=="function"){const E=await b.onResponse({request:N,response:C,schemaPath:d,params:p,options:$,id:z});if(E){if(!(E instanceof Response))throw new Error("onResponse: must return new Response() when modifying the response");C=E}}}}if(C.status===204||N.method==="HEAD"||C.headers.get("Content-Length")==="0")return C.ok?{data:void 0,response:C}:{error:void 0,response:C};if(C.ok)return v==="stream"?{data:C.body,response:C}:{data:await C[v](),response:C};let O=await C.text();try{O=JSON.parse(O)}catch{}return{error:O,response:C}}return{request(d,f,h){return u(f,{...h,method:d.toUpperCase()})},GET(d,f){return u(d,{...f,method:"GET"})},PUT(d,f){return u(d,{...f,method:"PUT"})},POST(d,f){return u(d,{...f,method:"POST"})},DELETE(d,f){return u(d,{...f,method:"DELETE"})},OPTIONS(d,f){return u(d,{...f,method:"OPTIONS"})},HEAD(d,f){return u(d,{...f,method:"HEAD"})},PATCH(d,f){return u(d,{...f,method:"PATCH"})},TRACE(d,f){return u(d,{...f,method:"TRACE"})},use(...d){for(const f of d)if(f){if(typeof f!="object"||!("onRequest"in f||"onResponse"in f||"onError"in f))throw new Error("Middleware must be an object with one of `onRequest()`, `onResponse() or `onError()`");c.push(f)}},eject(...d){for(const f of d){const h=c.indexOf(f);h!==-1&&c.splice(h,1)}}}}var tL=class{constructor(t,e){Q(this,"GET",t=>this.client.GET(this.url,t));Q(this,"PUT",t=>this.client.PUT(this.url,t));Q(this,"POST",t=>this.client.POST(this.url,t));Q(this,"DELETE",t=>this.client.DELETE(this.url,t));Q(this,"OPTIONS",t=>this.client.OPTIONS(this.url,t));Q(this,"HEAD",t=>this.client.HEAD(this.url,t));Q(this,"PATCH",t=>this.client.PATCH(this.url,t));Q(this,"TRACE",t=>this.client.TRACE(this.url,t));this.client=t,this.url=e}},nL=class{constructor(){this.client=null}get(t,e){const n=new tL(t,e);return this.client[e]=n,n}};function aP(t){const e=new nL,n=new Proxy(t,e);function r(){}r.prototype=n;const i=new r;return e.client=i,i}function rL(t){return aP(oP(t))}function $f(t,e,n){if(e==null)return"";if(typeof e=="object")throw new Error("Deeply-nested arrays/objects aren’t supported. Provide your own `querySerializer()` to handle these.");return`${t}=${(n==null?void 0:n.allowReserved)===!0?e:encodeURIComponent(e)}`}function ib(t,e,n){if(!e||typeof e!="object")return"";const r=[],i={simple:",",label:".",matrix:";"}[n.style]||"&";if(n.style!=="deepObject"&&n.explode===!1){for(const a in e)r.push(a,n.allowReserved===!0?e[a]:encodeURIComponent(e[a]));const o=r.join(",");switch(n.style){case"form":return`${t}=${o}`;case"label":return`.${o}`;case"matrix":return`;${t}=${o}`;default:return o}}for(const o in e){const a=n.style==="deepObject"?`${t}[${o}]`:o;r.push($f(a,e[o],n))}const s=r.join(i);return n.style==="label"||n.style==="matrix"?`${i}${s}`:s}function sb(t,e,n){if(!Array.isArray(e))return"";if(n.explode===!1){const s={form:",",spaceDelimited:"%20",pipeDelimited:"|"}[n.style]||",",o=(n.allowReserved===!0?e:e.map(a=>encodeURIComponent(a))).join(s);switch(n.style){case"simple":return o;case"label":return`.${o}`;case"matrix":return`;${t}=${o}`;default:return`${t}=${o}`}}const r={simple:",",label:".",matrix:";"}[n.style]||"&",i=[];for(const s of e)n.style==="simple"||n.style==="label"?i.push(n.allowReserved===!0?s:encodeURIComponent(s)):i.push($f(t,s,n));return n.style==="label"||n.style==="matrix"?`${r}${i.join(r)}`:i.join(r)}function rw(t){return function(n){const r=[];if(n&&typeof n=="object")for(const i in n){const s=n[i];if(s!=null){if(Array.isArray(s)){if(s.length===0)continue;r.push(sb(i,s,{style:"form",explode:!0,...t==null?void 0:t.array,allowReserved:(t==null?void 0:t.allowReserved)||!1}));continue}if(typeof s=="object"){r.push(ib(i,s,{style:"deepObject",explode:!0,...t==null?void 0:t.object,allowReserved:(t==null?void 0:t.allowReserved)||!1}));continue}r.push($f(i,s,t))}}return r.join("&")}}function lP(t,e){let n=t;for(const r of t.match(X6)??[]){let i=r.substring(1,r.length-1),s=!1,o="simple";if(i.endsWith("*")&&(s=!0,i=i.substring(0,i.length-1)),i.startsWith(".")?(o="label",i=i.substring(1)):i.startsWith(";")&&(o="matrix",i=i.substring(1)),!e||e[i]===void 0||e[i]===null)continue;const a=e[i];if(Array.isArray(a)){n=n.replace(r,sb(i,a,{style:o,explode:s}));continue}if(typeof a=="object"){n=n.replace(r,ib(i,a,{style:o,explode:s}));continue}if(o==="matrix"){n=n.replace(r,`;${$f(i,a)}`);continue}n=n.replace(r,o==="label"?`.${encodeURIComponent(a)}`:encodeURIComponent(a))}return n}function cP(t,e){return t instanceof FormData?t:e&&(e.get instanceof Function?e.get("Content-Type")??e.get("content-type"):e["Content-Type"]??e["content-type"])==="application/x-www-form-urlencoded"?new URLSearchParams(t).toString():JSON.stringify(t)}function uP(t,e){var i;let n=`${e.baseUrl}${t}`;(i=e.params)!=null&&i.path&&(n=lP(n,e.params.path));let r=e.querySerializer(e.params.query??{});return r.startsWith("?")&&(r=r.substring(1)),r&&(n+=`?${r}`),n}function iw(...t){const e=new Headers;for(const n of t){if(!n||typeof n!="object")continue;const r=n instanceof Headers?n.entries():Object.entries(n);for(const[i,s]of r)if(s===null)e.delete(i);else if(Array.isArray(s))for(const o of s)e.append(i,o);else s!==void 0&&e.set(i,s)}return e}function sw(t){return t.endsWith("/")?t.substring(0,t.length-1):t}var Lm={},iL=Object.create,_g=Object.defineProperty,sL=Object.getOwnPropertyDescriptor,oL=Object.getOwnPropertyNames,aL=Object.getPrototypeOf,lL=Object.prototype.hasOwnProperty,cL=(t,e)=>{for(var n in e)_g(t,n,{get:e[n],enumerable:!0})},dP=(t,e,n,r)=>{if(e&&typeof e=="object"||typeof e=="function")for(let i of oL(e))!lL.call(t,i)&&i!==n&&_g(t,i,{get:()=>e[i],enumerable:!(r=sL(e,i))||r.enumerable});return t},uL=(t,e,n)=>(n=t!=null?iL(aL(t)):{},dP(!t||!t.__esModule?_g(n,"default",{value:t,enumerable:!0}):n,t)),dL=t=>dP(_g({},"__esModule",{value:!0}),t),fP={};cL(fP,{analytics:()=>wL});var vt=dL(fP),fL=uL(Z6),hL=class{constructor(t){this.batch=[],this.maxTimeoutMs=3e4,this.timeoutId=null,this.isSending=!1,this.batchSize=t.batchSize,this.baseTimeoutMs=t.baseTimeoutMs,this.currentTimeoutMs=t.baseTimeoutMs,this.sendFn=t.sendFn}enqueue(t){this.batch.push(t),this.schedule()}schedule(){this.batch.length>0&&!this.timeoutId&&(this.timeoutId=setTimeout(()=>{this.timeoutId=null,this.flush()},this.currentTimeoutMs))}async flush(){if(this.isSending||this.batch.length===0)return;this.isSending=!0;const t=[...this.batch.slice(0,this.batchSize)];this.batch=this.batch.slice(this.batchSize);try{await this.sendFn(t),this.currentTimeoutMs=this.baseTimeoutMs}catch(e){console.error("Sender: Failed to send batch",e),this.batch=[...t,...this.batch],this.currentTimeoutMs=Math.min(this.currentTimeoutMs*2,this.maxTimeoutMs)}finally{this.isSending=!1,this.schedule()}}},pL=hL,gL=class{constructor(t){this.enabled=!1,this.properties={};const e=(0,fL.default)({baseUrl:t}),n=async r=>{const i=await e.POST("/v1/events",{body:r});if(i.response.status!==200)throw new Error(i.error)};this.sender=new pL({batchSize:100,baseTimeoutMs:200,sendFn:n})}enable(){this.enabled=!0}setGlobalProperty(t,e){this.properties[t]=e}track(t,e){if(!this.enabled)return;const n={name:t,...this.properties,...e};this.sender.enqueue(n)}},mL=gL,ow,xA;typeof process<"u"&&Lm&&(ow=(xA=Lm.METAMASK_ANALYTICS_ENDPOINT)!=null?xA:Lm.NEXT_PUBLIC_METAMASK_ANALYTICS_ENDPOINT);var yL=ow??"https://mm-sdk-analytics.api.cx.metamask.io/",vL=new mL(yL),wL=vL,hP={exports:{}};/*!
 * EventEmitter2
 * https://github.com/hij1nx/EventEmitter2
 *
 * Copyright (c) 2013 hij1nx
 * Licensed under the MIT license.
 */(function(t,e){(function(n){var r=Object.hasOwnProperty,i=Array.isArray?Array.isArray:function(E){return Object.prototype.toString.call(E)==="[object Array]"},s=10,o=typeof process=="object"&&typeof process.nextTick=="function",a=typeof Symbol=="function",l=typeof Reflect=="object",c=typeof setImmediate=="function",u=c?setImmediate:setTimeout,d=a?l&&typeof Reflect.ownKeys=="function"?Reflect.ownKeys:function(b){var E=Object.getOwnPropertyNames(b);return E.push.apply(E,Object.getOwnPropertySymbols(b)),E}:Object.keys;function f(){this._events={},this._conf&&h.call(this,this._conf)}function h(b){b&&(this._conf=b,b.delimiter&&(this.delimiter=b.delimiter),b.maxListeners!==n&&(this._maxListeners=b.maxListeners),b.wildcard&&(this.wildcard=b.wildcard),b.newListener&&(this._newListener=b.newListener),b.removeListener&&(this._removeListener=b.removeListener),b.verboseMemoryLeak&&(this.verboseMemoryLeak=b.verboseMemoryLeak),b.ignoreErrors&&(this.ignoreErrors=b.ignoreErrors),this.wildcard&&(this.listenerTree={}))}function m(b,E){var _="(node) warning: possible EventEmitter memory leak detected. "+b+" listeners added. Use emitter.setMaxListeners() to increase limit.";if(this.verboseMemoryLeak&&(_+=" Event name: "+E+"."),typeof process<"u"&&process.emitWarning){var I=new Error(_);I.name="MaxListenersExceededWarning",I.emitter=this,I.count=b,process.emitWarning(I)}else console.error(_),console.trace&&console.trace()}var g=function(b,E,_){var I=arguments.length;switch(I){case 0:return[];case 1:return[b];case 2:return[b,E];case 3:return[b,E,_];default:for(var A=new Array(I);I--;)A[I]=arguments[I];return A}};function w(b,E){for(var _={},I,A=b.length,S=0,P=0;P<A;P++)I=b[P],_[I]=P<S?E[P]:n;return _}function p(b,E,_){this._emitter=b,this._target=E,this._listeners={},this._listenersCount=0;var I,A;if((_.on||_.off)&&(I=_.on,A=_.off),E.addEventListener?(I=E.addEventListener,A=E.removeEventListener):E.addListener?(I=E.addListener,A=E.removeListener):E.on&&(I=E.on,A=E.off),!I&&!A)throw Error("target does not implement any known event API");if(typeof I!="function")throw TypeError("on method must be a function");if(typeof A!="function")throw TypeError("off method must be a function");this._on=I,this._off=A;var S=b._observers;S?S.push(this):b._observers=[this]}Object.assign(p.prototype,{subscribe:function(b,E,_){var I=this,A=this._target,S=this._emitter,P=this._listeners,R=function(){var L=g.apply(null,arguments),F={data:L,name:E,original:b};if(_){var V=_.call(A,F);V!==!1&&S.emit.apply(S,[F.name].concat(L));return}S.emit.apply(S,[E].concat(L))};if(P[b])throw Error("Event '"+b+"' is already listening");this._listenersCount++,S._newListener&&S._removeListener&&!I._onNewListener?(this._onNewListener=function(L){L===E&&P[b]===null&&(P[b]=R,I._on.call(A,b,R))},S.on("newListener",this._onNewListener),this._onRemoveListener=function(L){L===E&&!S.hasListeners(L)&&P[b]&&(P[b]=null,I._off.call(A,b,R))},P[b]=null,S.on("removeListener",this._onRemoveListener)):(P[b]=R,I._on.call(A,b,R))},unsubscribe:function(b){var E=this,_=this._listeners,I=this._emitter,A,S,P=this._off,R=this._target,L;if(b&&typeof b!="string")throw TypeError("event must be a string");function F(){E._onNewListener&&(I.off("newListener",E._onNewListener),I.off("removeListener",E._onRemoveListener),E._onNewListener=null,E._onRemoveListener=null);var V=M.call(I,E);I._observers.splice(V,1)}if(b){if(A=_[b],!A)return;P.call(R,b,A),delete _[b],--this._listenersCount||F()}else{for(S=d(_),L=S.length;L-- >0;)b=S[L],P.call(R,b,_[b]);this._listeners={},this._listenersCount=0,F()}}});function v(b,E,_,I){var A=Object.assign({},E);if(!b)return A;if(typeof b!="object")throw TypeError("options must be an object");var S=Object.keys(b),P=S.length,R,L,F;function V(Y){throw Error('Invalid "'+R+'" option value'+(Y?". Reason: "+Y:""))}for(var q=0;q<P;q++){if(R=S[q],!r.call(E,R))throw Error('Unknown "'+R+'" option');L=b[R],L!==n&&(F=_[R],A[R]=F?F(L,V):L)}return A}function y(b,E){return(typeof b!="function"||!b.hasOwnProperty("prototype"))&&E("value must be a constructor"),b}function x(b){var E="value must be type of "+b.join("|"),_=b.length,I=b[0],A=b[1];return _===1?function(S,P){if(typeof S===I)return S;P(E)}:_===2?function(S,P){var R=typeof S;if(R===I||R===A)return S;P(E)}:function(S,P){for(var R=typeof S,L=_;L-- >0;)if(R===b[L])return S;P(E)}}var T=x(["function"]),B=x(["object","function"]);function j(b,E,_){var I,A,S=0,P,R=new b(function(L,F,V){_=v(_,{timeout:0,overload:!1},{timeout:function(ie,le){return ie*=1,(typeof ie!="number"||ie<0||!Number.isFinite(ie))&&le("timeout must be a positive number"),ie}}),I=!_.overload&&typeof b.prototype.cancel=="function"&&typeof V=="function";function q(){A&&(A=null),S&&(clearTimeout(S),S=0)}var Y=function(ie){q(),L(ie)},te=function(ie){q(),F(ie)};I?E(Y,te,V):(A=[function(ie){te(ie||Error("canceled"))}],E(Y,te,function(ie){if(P)throw Error("Unable to subscribe on cancel event asynchronously");if(typeof ie!="function")throw TypeError("onCancel callback must be a function");A.push(ie)}),P=!0),_.timeout>0&&(S=setTimeout(function(){var ie=Error("timeout");ie.code="ETIMEDOUT",S=0,R.cancel(ie),F(ie)},_.timeout))});return I||(R.cancel=function(L){if(A){for(var F=A.length,V=1;V<F;V++)A[V](L);A[0](L),A=null}}),R}function M(b){var E=this._observers;if(!E)return-1;for(var _=E.length,I=0;I<_;I++)if(E[I]._target===b)return I;return-1}function K(b,E,_,I,A){if(!_)return null;if(I===0){var S=typeof E;if(S==="string"){var P,R,L=0,F=0,V=this.delimiter,q=V.length;if((R=E.indexOf(V))!==-1){P=new Array(5);do P[L++]=E.slice(F,R),F=R+q;while((R=E.indexOf(V,F))!==-1);P[L++]=E.slice(F),E=P,A=L}else E=[E],A=1}else S==="object"?A=E.length:(E=[E],A=1)}var Y=null,te,ie,le,he,Ee,de=E[I],pe=E[I+1],Ae,be;if(I===A)_._listeners&&(typeof _._listeners=="function"?(b&&b.push(_._listeners),Y=[_]):(b&&b.push.apply(b,_._listeners),Y=[_]));else if(de==="*"){for(Ae=d(_),R=Ae.length;R-- >0;)te=Ae[R],te!=="_listeners"&&(be=K(b,E,_[te],I+1,A),be&&(Y?Y.push.apply(Y,be):Y=be));return Y}else if(de==="**"){for(Ee=I+1===A||I+2===A&&pe==="*",Ee&&_._listeners&&(Y=K(b,E,_,A,A)),Ae=d(_),R=Ae.length;R-- >0;)te=Ae[R],te!=="_listeners"&&(te==="*"||te==="**"?(_[te]._listeners&&!Ee&&(be=K(b,E,_[te],A,A),be&&(Y?Y.push.apply(Y,be):Y=be)),be=K(b,E,_[te],I,A)):te===pe?be=K(b,E,_[te],I+2,A):be=K(b,E,_[te],I,A),be&&(Y?Y.push.apply(Y,be):Y=be));return Y}else _[de]&&(Y=K(b,E,_[de],I+1,A));if(ie=_["*"],ie&&K(b,E,ie,I+1,A),le=_["**"],le)if(I<A)for(le._listeners&&K(b,E,le,A,A),Ae=d(le),R=Ae.length;R-- >0;)te=Ae[R],te!=="_listeners"&&(te===pe?K(b,E,le[te],I+2,A):te===de?K(b,E,le[te],I+1,A):(he={},he[te]=le[te],K(b,E,{"**":he},I+1,A)));else le._listeners?K(b,E,le,A,A):le["*"]&&le["*"]._listeners&&K(b,E,le["*"],A,A);return Y}function U(b,E,_){var I=0,A=0,S,P=this.delimiter,R=P.length,L;if(typeof b=="string")if((S=b.indexOf(P))!==-1){L=new Array(5);do L[I++]=b.slice(A,S),A=S+R;while((S=b.indexOf(P,A))!==-1);L[I++]=b.slice(A)}else L=[b],I=1;else L=b,I=b.length;if(I>1){for(S=0;S+1<I;S++)if(L[S]==="**"&&L[S+1]==="**")return}var F=this.listenerTree,V;for(S=0;S<I;S++)if(V=L[S],F=F[V]||(F[V]={}),S===I-1)return F._listeners?(typeof F._listeners=="function"&&(F._listeners=[F._listeners]),_?F._listeners.unshift(E):F._listeners.push(E),!F._listeners.warned&&this._maxListeners>0&&F._listeners.length>this._maxListeners&&(F._listeners.warned=!0,m.call(this,F._listeners.length,V))):F._listeners=E,!0;return!0}function W(b,E,_,I){for(var A=d(b),S=A.length,P,R,L,F=b._listeners,V;S-- >0;)R=A[S],P=b[R],R==="_listeners"?L=_:L=_?_.concat(R):[R],V=I||typeof R=="symbol",F&&E.push(V?L:L.join(this.delimiter)),typeof P=="object"&&W.call(this,P,E,L,V);return E}function z(b){for(var E=d(b),_=E.length,I,A,S;_-- >0;)A=E[_],I=b[A],I&&(S=!0,A!=="_listeners"&&!z(I)&&delete b[A]);return S}function $(b,E,_){this.emitter=b,this.event=E,this.listener=_}$.prototype.off=function(){return this.emitter.off(this.event,this.listener),this};function N(b,E,_){if(_===!0)A=!0;else if(_===!1)I=!0;else{if(!_||typeof _!="object")throw TypeError("options should be an object or true");var I=_.async,A=_.promisify,S=_.nextTick,P=_.objectify}if(I||S||A){var R=E,L=E._origin||E;if(S&&!o)throw Error("process.nextTick is not supported");A===n&&(A=E.constructor.name==="AsyncFunction"),E=function(){var F=arguments,V=this,q=this.event;return A?S?Promise.resolve():new Promise(function(Y){u(Y)}).then(function(){return V.event=q,R.apply(V,F)}):(S?process.nextTick:u)(function(){V.event=q,R.apply(V,F)})},E._async=!0,E._origin=L}return[E,P?new $(this,b,E):this]}function C(b){this._events={},this._newListener=!1,this._removeListener=!1,this.verboseMemoryLeak=!1,h.call(this,b)}C.EventEmitter2=C,C.prototype.listenTo=function(b,E,_){if(typeof b!="object")throw TypeError("target musts be an object");var I=this;_=v(_,{on:n,off:n,reducers:n},{on:T,off:T,reducers:B});function A(S){if(typeof S!="object")throw TypeError("events must be an object");var P=_.reducers,R=M.call(I,b),L;R===-1?L=new p(I,b,_):L=I._observers[R];for(var F=d(S),V=F.length,q,Y=typeof P=="function",te=0;te<V;te++)q=F[te],L.subscribe(q,S[q]||q,Y?P:P&&P[q])}return i(E)?A(w(E)):A(typeof E=="string"?w(E.split(/\s+/)):E),this},C.prototype.stopListeningTo=function(b,E){var _=this._observers;if(!_)return!1;var I=_.length,A,S=!1;if(b&&typeof b!="object")throw TypeError("target should be an object");for(;I-- >0;)A=_[I],(!b||A._target===b)&&(A.unsubscribe(E),S=!0);return S},C.prototype.delimiter=".",C.prototype.setMaxListeners=function(b){b!==n&&(this._maxListeners=b,this._conf||(this._conf={}),this._conf.maxListeners=b)},C.prototype.getMaxListeners=function(){return this._maxListeners},C.prototype.event="",C.prototype.once=function(b,E,_){return this._once(b,E,!1,_)},C.prototype.prependOnceListener=function(b,E,_){return this._once(b,E,!0,_)},C.prototype._once=function(b,E,_,I){return this._many(b,1,E,_,I)},C.prototype.many=function(b,E,_,I){return this._many(b,E,_,!1,I)},C.prototype.prependMany=function(b,E,_,I){return this._many(b,E,_,!0,I)},C.prototype._many=function(b,E,_,I,A){var S=this;if(typeof _!="function")throw new Error("many only accepts instances of Function");function P(){return--E===0&&S.off(b,P),_.apply(this,arguments)}return P._origin=_,this._on(b,P,I,A)},C.prototype.emit=function(){if(!this._events&&!this._all)return!1;this._events||f.call(this);var b=arguments[0],E,_=this.wildcard,I,A,S,P,R;if(b==="newListener"&&!this._newListener&&!this._events.newListener)return!1;if(_&&(E=b,b!=="newListener"&&b!=="removeListener"&&typeof b=="object")){if(A=b.length,a){for(S=0;S<A;S++)if(typeof b[S]=="symbol"){R=!0;break}}R||(b=b.join(this.delimiter))}var L=arguments.length,F;if(this._all&&this._all.length)for(F=this._all.slice(),S=0,A=F.length;S<A;S++)switch(this.event=b,L){case 1:F[S].call(this,b);break;case 2:F[S].call(this,b,arguments[1]);break;case 3:F[S].call(this,b,arguments[1],arguments[2]);break;default:F[S].apply(this,arguments)}if(_)F=[],K.call(this,F,E,this.listenerTree,0,A);else if(F=this._events[b],typeof F=="function"){switch(this.event=b,L){case 1:F.call(this);break;case 2:F.call(this,arguments[1]);break;case 3:F.call(this,arguments[1],arguments[2]);break;default:for(I=new Array(L-1),P=1;P<L;P++)I[P-1]=arguments[P];F.apply(this,I)}return!0}else F&&(F=F.slice());if(F&&F.length){if(L>3)for(I=new Array(L-1),P=1;P<L;P++)I[P-1]=arguments[P];for(S=0,A=F.length;S<A;S++)switch(this.event=b,L){case 1:F[S].call(this);break;case 2:F[S].call(this,arguments[1]);break;case 3:F[S].call(this,arguments[1],arguments[2]);break;default:F[S].apply(this,I)}return!0}else if(!this.ignoreErrors&&!this._all&&b==="error")throw arguments[1]instanceof Error?arguments[1]:new Error("Uncaught, unspecified 'error' event.");return!!this._all},C.prototype.emitAsync=function(){if(!this._events&&!this._all)return!1;this._events||f.call(this);var b=arguments[0],E=this.wildcard,_,I,A,S,P,R;if(b==="newListener"&&!this._newListener&&!this._events.newListener)return Promise.resolve([!1]);if(E&&(_=b,b!=="newListener"&&b!=="removeListener"&&typeof b=="object")){if(S=b.length,a){for(P=0;P<S;P++)if(typeof b[P]=="symbol"){I=!0;break}}I||(b=b.join(this.delimiter))}var L=[],F=arguments.length,V;if(this._all)for(P=0,S=this._all.length;P<S;P++)switch(this.event=b,F){case 1:L.push(this._all[P].call(this,b));break;case 2:L.push(this._all[P].call(this,b,arguments[1]));break;case 3:L.push(this._all[P].call(this,b,arguments[1],arguments[2]));break;default:L.push(this._all[P].apply(this,arguments))}if(E?(V=[],K.call(this,V,_,this.listenerTree,0)):V=this._events[b],typeof V=="function")switch(this.event=b,F){case 1:L.push(V.call(this));break;case 2:L.push(V.call(this,arguments[1]));break;case 3:L.push(V.call(this,arguments[1],arguments[2]));break;default:for(A=new Array(F-1),R=1;R<F;R++)A[R-1]=arguments[R];L.push(V.apply(this,A))}else if(V&&V.length){if(V=V.slice(),F>3)for(A=new Array(F-1),R=1;R<F;R++)A[R-1]=arguments[R];for(P=0,S=V.length;P<S;P++)switch(this.event=b,F){case 1:L.push(V[P].call(this));break;case 2:L.push(V[P].call(this,arguments[1]));break;case 3:L.push(V[P].call(this,arguments[1],arguments[2]));break;default:L.push(V[P].apply(this,A))}}else if(!this.ignoreErrors&&!this._all&&b==="error")return arguments[1]instanceof Error?Promise.reject(arguments[1]):Promise.reject("Uncaught, unspecified 'error' event.");return Promise.all(L)},C.prototype.on=function(b,E,_){return this._on(b,E,!1,_)},C.prototype.prependListener=function(b,E,_){return this._on(b,E,!0,_)},C.prototype.onAny=function(b){return this._onAny(b,!1)},C.prototype.prependAny=function(b){return this._onAny(b,!0)},C.prototype.addListener=C.prototype.on,C.prototype._onAny=function(b,E){if(typeof b!="function")throw new Error("onAny only accepts instances of Function");return this._all||(this._all=[]),E?this._all.unshift(b):this._all.push(b),this},C.prototype._on=function(b,E,_,I){if(typeof b=="function")return this._onAny(b,E),this;if(typeof E!="function")throw new Error("on only accepts instances of Function");this._events||f.call(this);var A=this,S;return I!==n&&(S=N.call(this,b,E,I),E=S[0],A=S[1]),this._newListener&&this.emit("newListener",b,E),this.wildcard?(U.call(this,b,E,_),A):(this._events[b]?(typeof this._events[b]=="function"&&(this._events[b]=[this._events[b]]),_?this._events[b].unshift(E):this._events[b].push(E),!this._events[b].warned&&this._maxListeners>0&&this._events[b].length>this._maxListeners&&(this._events[b].warned=!0,m.call(this,this._events[b].length,b))):this._events[b]=E,A)},C.prototype.off=function(b,E){if(typeof E!="function")throw new Error("removeListener only takes instances of Function");var _,I=[];if(this.wildcard){var A=typeof b=="string"?b.split(this.delimiter):b.slice();if(I=K.call(this,null,A,this.listenerTree,0),!I)return this}else{if(!this._events[b])return this;_=this._events[b],I.push({_listeners:_})}for(var S=0;S<I.length;S++){var P=I[S];if(_=P._listeners,i(_)){for(var R=-1,L=0,F=_.length;L<F;L++)if(_[L]===E||_[L].listener&&_[L].listener===E||_[L]._origin&&_[L]._origin===E){R=L;break}if(R<0)continue;return this.wildcard?P._listeners.splice(R,1):this._events[b].splice(R,1),_.length===0&&(this.wildcard?delete P._listeners:delete this._events[b]),this._removeListener&&this.emit("removeListener",b,E),this}else(_===E||_.listener&&_.listener===E||_._origin&&_._origin===E)&&(this.wildcard?delete P._listeners:delete this._events[b],this._removeListener&&this.emit("removeListener",b,E))}return this.listenerTree&&z(this.listenerTree),this},C.prototype.offAny=function(b){var E=0,_=0,I;if(b&&this._all&&this._all.length>0){for(I=this._all,E=0,_=I.length;E<_;E++)if(b===I[E])return I.splice(E,1),this._removeListener&&this.emit("removeListenerAny",b),this}else{if(I=this._all,this._removeListener)for(E=0,_=I.length;E<_;E++)this.emit("removeListenerAny",I[E]);this._all=[]}return this},C.prototype.removeListener=C.prototype.off,C.prototype.removeAllListeners=function(b){if(b===n)return!this._events||f.call(this),this;if(this.wildcard){var E=K.call(this,null,b,this.listenerTree,0),_,I;if(!E)return this;for(I=0;I<E.length;I++)_=E[I],_._listeners=null;this.listenerTree&&z(this.listenerTree)}else this._events&&(this._events[b]=null);return this},C.prototype.listeners=function(b){var E=this._events,_,I,A,S,P;if(b===n){if(this.wildcard)throw Error("event name required for wildcard emitter");if(!E)return[];for(_=d(E),S=_.length,A=[];S-- >0;)I=E[_[S]],typeof I=="function"?A.push(I):A.push.apply(A,I);return A}else{if(this.wildcard){if(P=this.listenerTree,!P)return[];var R=[],L=typeof b=="string"?b.split(this.delimiter):b.slice();return K.call(this,R,L,P,0),R}return E?(I=E[b],I?typeof I=="function"?[I]:I:[]):[]}},C.prototype.eventNames=function(b){var E=this._events;return this.wildcard?W.call(this,this.listenerTree,[],null,b):E?d(E):[]},C.prototype.listenerCount=function(b){return this.listeners(b).length},C.prototype.hasListeners=function(b){if(this.wildcard){var E=[],_=typeof b=="string"?b.split(this.delimiter):b.slice();return K.call(this,E,_,this.listenerTree,0),E.length>0}var I=this._events,A=this._all;return!!(A&&A.length||I&&(b===n?d(I).length:I[b]))},C.prototype.listenersAny=function(){return this._all?this._all:[]},C.prototype.waitFor=function(b,E){var _=this,I=typeof E;return I==="number"?E={timeout:E}:I==="function"&&(E={filter:E}),E=v(E,{timeout:0,filter:n,handleError:!1,Promise,overload:!1},{filter:T,Promise:y}),j(E.Promise,function(A,S,P){function R(){var L=E.filter;if(!(L&&!L.apply(_,arguments)))if(_.off(b,R),E.handleError){var F=arguments[0];F?S(F):A(g.apply(null,arguments).slice(1))}else A(g.apply(null,arguments))}P(function(){_.off(b,R)}),_._on(b,R,!1)},{timeout:E.timeout,overload:E.overload})};function O(b,E,_){_=v(_,{Promise,timeout:0,overload:!1},{Promise:y});var I=_.Promise;return j(I,function(A,S,P){var R;if(typeof b.addEventListener=="function"){R=function(){A(g.apply(null,arguments))},P(function(){b.removeEventListener(E,R)}),b.addEventListener(E,R,{once:!0});return}var L=function(){F&&b.removeListener("error",F),A(g.apply(null,arguments))},F;E!=="error"&&(F=function(V){b.removeListener(E,L),S(V)},b.once("error",F)),P(function(){F&&b.removeListener("error",F),b.removeListener(E,L)}),b.once(E,L)},{timeout:_.timeout,overload:_.overload})}var D=C.prototype;Object.defineProperties(C,{defaultMaxListeners:{get:function(){return D._maxListeners},set:function(b){if(typeof b!="number"||b<0||Number.isNaN(b))throw TypeError("n must be a non-negative number");D._maxListeners=b},enumerable:!0},once:{value:O,writable:!0,configurable:!0}}),Object.defineProperties(D,{_maxListeners:{value:s,writable:!0,configurable:!0},_observers:{value:null,writable:!0,configurable:!0}}),t.exports=C})()})(hP);var Pg=hP.exports;const bL=Q0(Pg);var yh,EL=new Uint8Array(16);function AL(){if(!yh&&(yh=typeof crypto<"u"&&crypto.getRandomValues&&crypto.getRandomValues.bind(crypto)||typeof msCrypto<"u"&&typeof msCrypto.getRandomValues=="function"&&msCrypto.getRandomValues.bind(msCrypto),!yh))throw new Error("crypto.getRandomValues() not supported. See https://github.com/uuidjs/uuid#getrandomvalues-not-supported");return yh(EL)}const SL=/^(?:[0-9a-f]{8}-[0-9a-f]{4}-[1-5][0-9a-f]{3}-[89ab][0-9a-f]{3}-[0-9a-f]{12}|00000000-0000-0000-0000-000000000000)$/i;function aw(t){return typeof t=="string"&&SL.test(t)}var Ft=[];for(var Bm=0;Bm<256;++Bm)Ft.push((Bm+256).toString(16).substr(1));function CL(t){var e=arguments.length>1&&arguments[1]!==void 0?arguments[1]:0,n=(Ft[t[e+0]]+Ft[t[e+1]]+Ft[t[e+2]]+Ft[t[e+3]]+"-"+Ft[t[e+4]]+Ft[t[e+5]]+"-"+Ft[t[e+6]]+Ft[t[e+7]]+"-"+Ft[t[e+8]]+Ft[t[e+9]]+"-"+Ft[t[e+10]]+Ft[t[e+11]]+Ft[t[e+12]]+Ft[t[e+13]]+Ft[t[e+14]]+Ft[t[e+15]]).toLowerCase();if(!aw(n))throw TypeError("Stringified UUID is invalid");return n}function no(t,e,n){t=t||{};var r=t.random||(t.rng||AL)();return r[6]=r[6]&15|64,r[8]=r[8]&63|128,CL(r)}const $i=Object.create(null);$i.open="0";$i.close="1";$i.ping="2";$i.pong="3";$i.message="4";$i.upgrade="5";$i.noop="6";const dp=Object.create(null);Object.keys($i).forEach(t=>{dp[$i[t]]=t});const lw={type:"error",data:"parser error"},pP=typeof Blob=="function"||typeof Blob<"u"&&Object.prototype.toString.call(Blob)==="[object BlobConstructor]",gP=typeof ArrayBuffer=="function",mP=t=>typeof ArrayBuffer.isView=="function"?ArrayBuffer.isView(t):t&&t.buffer instanceof ArrayBuffer,ob=({type:t,data:e},n,r)=>pP&&e instanceof Blob?n?r(e):kA(e,r):gP&&(e instanceof ArrayBuffer||mP(e))?n?r(e):kA(new Blob([e]),r):r($i[t]+(e||"")),kA=(t,e)=>{const n=new FileReader;return n.onload=function(){const r=n.result.split(",")[1];e("b"+(r||""))},n.readAsDataURL(t)};function _A(t){return t instanceof Uint8Array?t:t instanceof ArrayBuffer?new Uint8Array(t):new Uint8Array(t.buffer,t.byteOffset,t.byteLength)}let Dm;function xL(t,e){if(pP&&t.data instanceof Blob)return t.data.arrayBuffer().then(_A).then(e);if(gP&&(t.data instanceof ArrayBuffer||mP(t.data)))return e(_A(t.data));ob(t,!1,n=>{Dm||(Dm=new TextEncoder),e(Dm.encode(n))})}const PA="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",td=typeof Uint8Array>"u"?[]:new Uint8Array(256);for(let t=0;t<PA.length;t++)td[PA.charCodeAt(t)]=t;const kL=t=>{let e=t.length*.75,n=t.length,r,i=0,s,o,a,l;t[t.length-1]==="="&&(e--,t[t.length-2]==="="&&e--);const c=new ArrayBuffer(e),u=new Uint8Array(c);for(r=0;r<n;r+=4)s=td[t.charCodeAt(r)],o=td[t.charCodeAt(r+1)],a=td[t.charCodeAt(r+2)],l=td[t.charCodeAt(r+3)],u[i++]=s<<2|o>>4,u[i++]=(o&15)<<4|a>>2,u[i++]=(a&3)<<6|l&63;return c},_L=typeof ArrayBuffer=="function",ab=(t,e)=>{if(typeof t!="string")return{type:"message",data:yP(t,e)};const n=t.charAt(0);return n==="b"?{type:"message",data:PL(t.substring(1),e)}:dp[n]?t.length>1?{type:dp[n],data:t.substring(1)}:{type:dp[n]}:lw},PL=(t,e)=>{if(_L){const n=kL(t);return yP(n,e)}else return{base64:!0,data:t}},yP=(t,e)=>{switch(e){case"blob":return t instanceof Blob?t:new Blob([t]);case"arraybuffer":default:return t instanceof ArrayBuffer?t:t.buffer}},vP="",TL=(t,e)=>{const n=t.length,r=new Array(n);let i=0;t.forEach((s,o)=>{ob(s,!1,a=>{r[o]=a,++i===n&&e(r.join(vP))})})},RL=(t,e)=>{const n=t.split(vP),r=[];for(let i=0;i<n.length;i++){const s=ab(n[i],e);if(r.push(s),s.type==="error")break}return r};function IL(){return new TransformStream({transform(t,e){xL(t,n=>{const r=n.length;let i;if(r<126)i=new Uint8Array(1),new DataView(i.buffer).setUint8(0,r);else if(r<65536){i=new Uint8Array(3);const s=new DataView(i.buffer);s.setUint8(0,126),s.setUint16(1,r)}else{i=new Uint8Array(9);const s=new DataView(i.buffer);s.setUint8(0,127),s.setBigUint64(1,BigInt(r))}t.data&&typeof t.data!="string"&&(i[0]|=128),e.enqueue(i),e.enqueue(n)})}})}let $m;function vh(t){return t.reduce((e,n)=>e+n.length,0)}function wh(t,e){if(t[0].length===e)return t.shift();const n=new Uint8Array(e);let r=0;for(let i=0;i<e;i++)n[i]=t[0][r++],r===t[0].length&&(t.shift(),r=0);return t.length&&r<t[0].length&&(t[0]=t[0].slice(r)),n}function OL(t,e){$m||($m=new TextDecoder);const n=[];let r=0,i=-1,s=!1;return new TransformStream({transform(o,a){for(n.push(o);;){if(r===0){if(vh(n)<1)break;const l=wh(n,1);s=(l[0]&128)===128,i=l[0]&127,i<126?r=3:i===126?r=1:r=2}else if(r===1){if(vh(n)<2)break;const l=wh(n,2);i=new DataView(l.buffer,l.byteOffset,l.length).getUint16(0),r=3}else if(r===2){if(vh(n)<8)break;const l=wh(n,8),c=new DataView(l.buffer,l.byteOffset,l.length),u=c.getUint32(0);if(u>Math.pow(2,21)-1){a.enqueue(lw);break}i=u*Math.pow(2,32)+c.getUint32(4),r=3}else{if(vh(n)<i)break;const l=wh(n,i);a.enqueue(ab(s?l:$m.decode(l),e)),r=0}if(i===0||i>t){a.enqueue(lw);break}}}})}const wP=4;function Ct(t){if(t)return NL(t)}function NL(t){for(var e in Ct.prototype)t[e]=Ct.prototype[e];return t}Ct.prototype.on=Ct.prototype.addEventListener=function(t,e){return this._callbacks=this._callbacks||{},(this._callbacks["$"+t]=this._callbacks["$"+t]||[]).push(e),this};Ct.prototype.once=function(t,e){function n(){this.off(t,n),e.apply(this,arguments)}return n.fn=e,this.on(t,n),this};Ct.prototype.off=Ct.prototype.removeListener=Ct.prototype.removeAllListeners=Ct.prototype.removeEventListener=function(t,e){if(this._callbacks=this._callbacks||{},arguments.length==0)return this._callbacks={},this;var n=this._callbacks["$"+t];if(!n)return this;if(arguments.length==1)return delete this._callbacks["$"+t],this;for(var r,i=0;i<n.length;i++)if(r=n[i],r===e||r.fn===e){n.splice(i,1);break}return n.length===0&&delete this._callbacks["$"+t],this};Ct.prototype.emit=function(t){this._callbacks=this._callbacks||{};for(var e=new Array(arguments.length-1),n=this._callbacks["$"+t],r=1;r<arguments.length;r++)e[r-1]=arguments[r];if(n){n=n.slice(0);for(var r=0,i=n.length;r<i;++r)n[r].apply(this,e)}return this};Ct.prototype.emitReserved=Ct.prototype.emit;Ct.prototype.listeners=function(t){return this._callbacks=this._callbacks||{},this._callbacks["$"+t]||[]};Ct.prototype.hasListeners=function(t){return!!this.listeners(t).length};const Tg=typeof Promise=="function"&&typeof Promise.resolve=="function"?e=>Promise.resolve().then(e):(e,n)=>n(e,0),kr=typeof self<"u"?self:typeof window<"u"?window:Function("return this")(),ML="arraybuffer";function bP(t,...e){return e.reduce((n,r)=>(t.hasOwnProperty(r)&&(n[r]=t[r]),n),{})}const LL=kr.setTimeout,BL=kr.clearTimeout;function Rg(t,e){e.useNativeTimers?(t.setTimeoutFn=LL.bind(kr),t.clearTimeoutFn=BL.bind(kr)):(t.setTimeoutFn=kr.setTimeout.bind(kr),t.clearTimeoutFn=kr.clearTimeout.bind(kr))}const DL=1.33;function $L(t){return typeof t=="string"?UL(t):Math.ceil((t.byteLength||t.size)*DL)}function UL(t){let e=0,n=0;for(let r=0,i=t.length;r<i;r++)e=t.charCodeAt(r),e<128?n+=1:e<2048?n+=2:e<55296||e>=57344?n+=3:(r++,n+=4);return n}function EP(){return Date.now().toString(36).substring(3)+Math.random().toString(36).substring(2,5)}function FL(t){let e="";for(let n in t)t.hasOwnProperty(n)&&(e.length&&(e+="&"),e+=encodeURIComponent(n)+"="+encodeURIComponent(t[n]));return e}function jL(t){let e={},n=t.split("&");for(let r=0,i=n.length;r<i;r++){let s=n[r].split("=");e[decodeURIComponent(s[0])]=decodeURIComponent(s[1])}return e}class HL extends Error{constructor(e,n,r){super(e),this.description=n,this.context=r,this.type="TransportError"}}class lb extends Ct{constructor(e){super(),this.writable=!1,Rg(this,e),this.opts=e,this.query=e.query,this.socket=e.socket,this.supportsBinary=!e.forceBase64}onError(e,n,r){return super.emitReserved("error",new HL(e,n,r)),this}open(){return this.readyState="opening",this.doOpen(),this}close(){return(this.readyState==="opening"||this.readyState==="open")&&(this.doClose(),this.onClose()),this}send(e){this.readyState==="open"&&this.write(e)}onOpen(){this.readyState="open",this.writable=!0,super.emitReserved("open")}onData(e){const n=ab(e,this.socket.binaryType);this.onPacket(n)}onPacket(e){super.emitReserved("packet",e)}onClose(e){this.readyState="closed",super.emitReserved("close",e)}pause(e){}createUri(e,n={}){return e+"://"+this._hostname()+this._port()+this.opts.path+this._query(n)}_hostname(){const e=this.opts.hostname;return e.indexOf(":")===-1?e:"["+e+"]"}_port(){return this.opts.port&&(this.opts.secure&&+(this.opts.port!==443)||!this.opts.secure&&Number(this.opts.port)!==80)?":"+this.opts.port:""}_query(e){const n=FL(e);return n.length?"?"+n:""}}class KL extends lb{constructor(){super(...arguments),this._polling=!1}get name(){return"polling"}doOpen(){this._poll()}pause(e){this.readyState="pausing";const n=()=>{this.readyState="paused",e()};if(this._polling||!this.writable){let r=0;this._polling&&(r++,this.once("pollComplete",function(){--r||n()})),this.writable||(r++,this.once("drain",function(){--r||n()}))}else n()}_poll(){this._polling=!0,this.doPoll(),this.emitReserved("poll")}onData(e){const n=r=>{if(this.readyState==="opening"&&r.type==="open"&&this.onOpen(),r.type==="close")return this.onClose({description:"transport closed by the server"}),!1;this.onPacket(r)};RL(e,this.socket.binaryType).forEach(n),this.readyState!=="closed"&&(this._polling=!1,this.emitReserved("pollComplete"),this.readyState==="open"&&this._poll())}doClose(){const e=()=>{this.write([{type:"close"}])};this.readyState==="open"?e():this.once("open",e)}write(e){this.writable=!1,TL(e,n=>{this.doWrite(n,()=>{this.writable=!0,this.emitReserved("drain")})})}uri(){const e=this.opts.secure?"https":"http",n=this.query||{};return this.opts.timestampRequests!==!1&&(n[this.opts.timestampParam]=EP()),!this.supportsBinary&&!n.sid&&(n.b64=1),this.createUri(e,n)}}let AP=!1;try{AP=typeof XMLHttpRequest<"u"&&"withCredentials"in new XMLHttpRequest}catch{}const zL=AP;function VL(){}class GL extends KL{constructor(e){if(super(e),typeof location<"u"){const n=location.protocol==="https:";let r=location.port;r||(r=n?"443":"80"),this.xd=typeof location<"u"&&e.hostname!==location.hostname||r!==e.port}}doWrite(e,n){const r=this.request({method:"POST",data:e});r.on("success",n),r.on("error",(i,s)=>{this.onError("xhr post error",i,s)})}doPoll(){const e=this.request();e.on("data",this.onData.bind(this)),e.on("error",(n,r)=>{this.onError("xhr poll error",n,r)}),this.pollXhr=e}}class Mi extends Ct{constructor(e,n,r){super(),this.createRequest=e,Rg(this,r),this._opts=r,this._method=r.method||"GET",this._uri=n,this._data=r.data!==void 0?r.data:null,this._create()}_create(){var e;const n=bP(this._opts,"agent","pfx","key","passphrase","cert","ca","ciphers","rejectUnauthorized","autoUnref");n.xdomain=!!this._opts.xd;const r=this._xhr=this.createRequest(n);try{r.open(this._method,this._uri,!0);try{if(this._opts.extraHeaders){r.setDisableHeaderCheck&&r.setDisableHeaderCheck(!0);for(let i in this._opts.extraHeaders)this._opts.extraHeaders.hasOwnProperty(i)&&r.setRequestHeader(i,this._opts.extraHeaders[i])}}catch{}if(this._method==="POST")try{r.setRequestHeader("Content-type","text/plain;charset=UTF-8")}catch{}try{r.setRequestHeader("Accept","*/*")}catch{}(e=this._opts.cookieJar)===null||e===void 0||e.addCookies(r),"withCredentials"in r&&(r.withCredentials=this._opts.withCredentials),this._opts.requestTimeout&&(r.timeout=this._opts.requestTimeout),r.onreadystatechange=()=>{var i;r.readyState===3&&((i=this._opts.cookieJar)===null||i===void 0||i.parseCookies(r.getResponseHeader("set-cookie"))),r.readyState===4&&(r.status===200||r.status===1223?this._onLoad():this.setTimeoutFn(()=>{this._onError(typeof r.status=="number"?r.status:0)},0))},r.send(this._data)}catch(i){this.setTimeoutFn(()=>{this._onError(i)},0);return}typeof document<"u"&&(this._index=Mi.requestsCount++,Mi.requests[this._index]=this)}_onError(e){this.emitReserved("error",e,this._xhr),this._cleanup(!0)}_cleanup(e){if(!(typeof this._xhr>"u"||this._xhr===null)){if(this._xhr.onreadystatechange=VL,e)try{this._xhr.abort()}catch{}typeof document<"u"&&delete Mi.requests[this._index],this._xhr=null}}_onLoad(){const e=this._xhr.responseText;e!==null&&(this.emitReserved("data",e),this.emitReserved("success"),this._cleanup())}abort(){this._cleanup()}}Mi.requestsCount=0;Mi.requests={};if(typeof document<"u"){if(typeof attachEvent=="function")attachEvent("onunload",TA);else if(typeof addEventListener=="function"){const t="onpagehide"in kr?"pagehide":"unload";addEventListener(t,TA,!1)}}function TA(){for(let t in Mi.requests)Mi.requests.hasOwnProperty(t)&&Mi.requests[t].abort()}const WL=function(){const t=SP({xdomain:!1});return t&&t.responseType!==null}();class qL extends GL{constructor(e){super(e);const n=e&&e.forceBase64;this.supportsBinary=WL&&!n}request(e={}){return Object.assign(e,{xd:this.xd},this.opts),new Mi(SP,this.uri(),e)}}function SP(t){const e=t.xdomain;try{if(typeof XMLHttpRequest<"u"&&(!e||zL))return new XMLHttpRequest}catch{}if(!e)try{return new kr[["Active"].concat("Object").join("X")]("Microsoft.XMLHTTP")}catch{}}const CP=typeof navigator<"u"&&typeof navigator.product=="string"&&navigator.product.toLowerCase()==="reactnative";class QL extends lb{get name(){return"websocket"}doOpen(){const e=this.uri(),n=this.opts.protocols,r=CP?{}:bP(this.opts,"agent","perMessageDeflate","pfx","key","passphrase","cert","ca","ciphers","rejectUnauthorized","localAddress","protocolVersion","origin","maxPayload","family","checkServerIdentity");this.opts.extraHeaders&&(r.headers=this.opts.extraHeaders);try{this.ws=this.createSocket(e,n,r)}catch(i){return this.emitReserved("error",i)}this.ws.binaryType=this.socket.binaryType,this.addEventListeners()}addEventListeners(){this.ws.onopen=()=>{this.opts.autoUnref&&this.ws._socket.unref(),this.onOpen()},this.ws.onclose=e=>this.onClose({description:"websocket connection closed",context:e}),this.ws.onmessage=e=>this.onData(e.data),this.ws.onerror=e=>this.onError("websocket error",e)}write(e){this.writable=!1;for(let n=0;n<e.length;n++){const r=e[n],i=n===e.length-1;ob(r,this.supportsBinary,s=>{try{this.doWrite(r,s)}catch{}i&&Tg(()=>{this.writable=!0,this.emitReserved("drain")},this.setTimeoutFn)})}}doClose(){typeof this.ws<"u"&&(this.ws.onerror=()=>{},this.ws.close(),this.ws=null)}uri(){const e=this.opts.secure?"wss":"ws",n=this.query||{};return this.opts.timestampRequests&&(n[this.opts.timestampParam]=EP()),this.supportsBinary||(n.b64=1),this.createUri(e,n)}}const Um=kr.WebSocket||kr.MozWebSocket;class YL extends QL{createSocket(e,n,r){return CP?new Um(e,n,r):n?new Um(e,n):new Um(e)}doWrite(e,n){this.ws.send(n)}}class JL extends lb{get name(){return"webtransport"}doOpen(){try{this._transport=new WebTransport(this.createUri("https"),this.opts.transportOptions[this.name])}catch(e){return this.emitReserved("error",e)}this._transport.closed.then(()=>{this.onClose()}).catch(e=>{this.onError("webtransport error",e)}),this._transport.ready.then(()=>{this._transport.createBidirectionalStream().then(e=>{const n=OL(Number.MAX_SAFE_INTEGER,this.socket.binaryType),r=e.readable.pipeThrough(n).getReader(),i=IL();i.readable.pipeTo(e.writable),this._writer=i.writable.getWriter();const s=()=>{r.read().then(({done:a,value:l})=>{a||(this.onPacket(l),s())}).catch(a=>{})};s();const o={type:"open"};this.query.sid&&(o.data=`{"sid":"${this.query.sid}"}`),this._writer.write(o).then(()=>this.onOpen())})})}write(e){this.writable=!1;for(let n=0;n<e.length;n++){const r=e[n],i=n===e.length-1;this._writer.write(r).then(()=>{i&&Tg(()=>{this.writable=!0,this.emitReserved("drain")},this.setTimeoutFn)})}}doClose(){var e;(e=this._transport)===null||e===void 0||e.close()}}const ZL={websocket:YL,webtransport:JL,polling:qL},XL=/^(?:(?![^:@\/?#]+:[^:@\/]*@)(http|https|ws|wss):\/\/)?((?:(([^:@\/?#]*)(?::([^:@\/?#]*))?)?@)?((?:[a-f0-9]{0,4}:){2,7}[a-f0-9]{0,4}|[^:\/?#]*)(?::(\d*))?)(((\/(?:[^?#](?![^?#\/]*\.[^?#\/.]+(?:[?#]|$)))*\/?)?([^?#\/]*))(?:\?([^#]*))?(?:#(.*))?)/,eB=["source","protocol","authority","userInfo","user","password","host","port","relative","path","directory","file","query","anchor"];function cw(t){if(t.length>8e3)throw"URI too long";const e=t,n=t.indexOf("["),r=t.indexOf("]");n!=-1&&r!=-1&&(t=t.substring(0,n)+t.substring(n,r).replace(/:/g,";")+t.substring(r,t.length));let i=XL.exec(t||""),s={},o=14;for(;o--;)s[eB[o]]=i[o]||"";return n!=-1&&r!=-1&&(s.source=e,s.host=s.host.substring(1,s.host.length-1).replace(/;/g,":"),s.authority=s.authority.replace("[","").replace("]","").replace(/;/g,":"),s.ipv6uri=!0),s.pathNames=tB(s,s.path),s.queryKey=nB(s,s.query),s}function tB(t,e){const n=/\/{2,9}/g,r=e.replace(n,"/").split("/");return(e.slice(0,1)=="/"||e.length===0)&&r.splice(0,1),e.slice(-1)=="/"&&r.splice(r.length-1,1),r}function nB(t,e){const n={};return e.replace(/(?:^|&)([^&=]*)=?([^&]*)/g,function(r,i,s){i&&(n[i]=s)}),n}const uw=typeof addEventListener=="function"&&typeof removeEventListener=="function",fp=[];uw&&addEventListener("offline",()=>{fp.forEach(t=>t())},!1);class Bo extends Ct{constructor(e,n){if(super(),this.binaryType=ML,this.writeBuffer=[],this._prevBufferLen=0,this._pingInterval=-1,this._pingTimeout=-1,this._maxPayload=-1,this._pingTimeoutTime=1/0,e&&typeof e=="object"&&(n=e,e=null),e){const r=cw(e);n.hostname=r.host,n.secure=r.protocol==="https"||r.protocol==="wss",n.port=r.port,r.query&&(n.query=r.query)}else n.host&&(n.hostname=cw(n.host).host);Rg(this,n),this.secure=n.secure!=null?n.secure:typeof location<"u"&&location.protocol==="https:",n.hostname&&!n.port&&(n.port=this.secure?"443":"80"),this.hostname=n.hostname||(typeof location<"u"?location.hostname:"localhost"),this.port=n.port||(typeof location<"u"&&location.port?location.port:this.secure?"443":"80"),this.transports=[],this._transportsByName={},n.transports.forEach(r=>{const i=r.prototype.name;this.transports.push(i),this._transportsByName[i]=r}),this.opts=Object.assign({path:"/engine.io",agent:!1,withCredentials:!1,upgrade:!0,timestampParam:"t",rememberUpgrade:!1,addTrailingSlash:!0,rejectUnauthorized:!0,perMessageDeflate:{threshold:1024},transportOptions:{},closeOnBeforeunload:!1},n),this.opts.path=this.opts.path.replace(/\/$/,"")+(this.opts.addTrailingSlash?"/":""),typeof this.opts.query=="string"&&(this.opts.query=jL(this.opts.query)),uw&&(this.opts.closeOnBeforeunload&&(this._beforeunloadEventListener=()=>{this.transport&&(this.transport.removeAllListeners(),this.transport.close())},addEventListener("beforeunload",this._beforeunloadEventListener,!1)),this.hostname!=="localhost"&&(this._offlineEventListener=()=>{this._onClose("transport close",{description:"network connection lost"})},fp.push(this._offlineEventListener))),this.opts.withCredentials&&(this._cookieJar=void 0),this._open()}createTransport(e){const n=Object.assign({},this.opts.query);n.EIO=wP,n.transport=e,this.id&&(n.sid=this.id);const r=Object.assign({},this.opts,{query:n,socket:this,hostname:this.hostname,secure:this.secure,port:this.port},this.opts.transportOptions[e]);return new this._transportsByName[e](r)}_open(){if(this.transports.length===0){this.setTimeoutFn(()=>{this.emitReserved("error","No transports available")},0);return}const e=this.opts.rememberUpgrade&&Bo.priorWebsocketSuccess&&this.transports.indexOf("websocket")!==-1?"websocket":this.transports[0];this.readyState="opening";const n=this.createTransport(e);n.open(),this.setTransport(n)}setTransport(e){this.transport&&this.transport.removeAllListeners(),this.transport=e,e.on("drain",this._onDrain.bind(this)).on("packet",this._onPacket.bind(this)).on("error",this._onError.bind(this)).on("close",n=>this._onClose("transport close",n))}onOpen(){this.readyState="open",Bo.priorWebsocketSuccess=this.transport.name==="websocket",this.emitReserved("open"),this.flush()}_onPacket(e){if(this.readyState==="opening"||this.readyState==="open"||this.readyState==="closing")switch(this.emitReserved("packet",e),this.emitReserved("heartbeat"),e.type){case"open":this.onHandshake(JSON.parse(e.data));break;case"ping":this._sendPacket("pong"),this.emitReserved("ping"),this.emitReserved("pong"),this._resetPingTimeout();break;case"error":const n=new Error("server error");n.code=e.data,this._onError(n);break;case"message":this.emitReserved("data",e.data),this.emitReserved("message",e.data);break}}onHandshake(e){this.emitReserved("handshake",e),this.id=e.sid,this.transport.query.sid=e.sid,this._pingInterval=e.pingInterval,this._pingTimeout=e.pingTimeout,this._maxPayload=e.maxPayload,this.onOpen(),this.readyState!=="closed"&&this._resetPingTimeout()}_resetPingTimeout(){this.clearTimeoutFn(this._pingTimeoutTimer);const e=this._pingInterval+this._pingTimeout;this._pingTimeoutTime=Date.now()+e,this._pingTimeoutTimer=this.setTimeoutFn(()=>{this._onClose("ping timeout")},e),this.opts.autoUnref&&this._pingTimeoutTimer.unref()}_onDrain(){this.writeBuffer.splice(0,this._prevBufferLen),this._prevBufferLen=0,this.writeBuffer.length===0?this.emitReserved("drain"):this.flush()}flush(){if(this.readyState!=="closed"&&this.transport.writable&&!this.upgrading&&this.writeBuffer.length){const e=this._getWritablePackets();this.transport.send(e),this._prevBufferLen=e.length,this.emitReserved("flush")}}_getWritablePackets(){if(!(this._maxPayload&&this.transport.name==="polling"&&this.writeBuffer.length>1))return this.writeBuffer;let n=1;for(let r=0;r<this.writeBuffer.length;r++){const i=this.writeBuffer[r].data;if(i&&(n+=$L(i)),r>0&&n>this._maxPayload)return this.writeBuffer.slice(0,r);n+=2}return this.writeBuffer}_hasPingExpired(){if(!this._pingTimeoutTime)return!0;const e=Date.now()>this._pingTimeoutTime;return e&&(this._pingTimeoutTime=0,Tg(()=>{this._onClose("ping timeout")},this.setTimeoutFn)),e}write(e,n,r){return this._sendPacket("message",e,n,r),this}send(e,n,r){return this._sendPacket("message",e,n,r),this}_sendPacket(e,n,r,i){if(typeof n=="function"&&(i=n,n=void 0),typeof r=="function"&&(i=r,r=null),this.readyState==="closing"||this.readyState==="closed")return;r=r||{},r.compress=r.compress!==!1;const s={type:e,data:n,options:r};this.emitReserved("packetCreate",s),this.writeBuffer.push(s),i&&this.once("flush",i),this.flush()}close(){const e=()=>{this._onClose("forced close"),this.transport.close()},n=()=>{this.off("upgrade",n),this.off("upgradeError",n),e()},r=()=>{this.once("upgrade",n),this.once("upgradeError",n)};return(this.readyState==="opening"||this.readyState==="open")&&(this.readyState="closing",this.writeBuffer.length?this.once("drain",()=>{this.upgrading?r():e()}):this.upgrading?r():e()),this}_onError(e){if(Bo.priorWebsocketSuccess=!1,this.opts.tryAllTransports&&this.transports.length>1&&this.readyState==="opening")return this.transports.shift(),this._open();this.emitReserved("error",e),this._onClose("transport error",e)}_onClose(e,n){if(this.readyState==="opening"||this.readyState==="open"||this.readyState==="closing"){if(this.clearTimeoutFn(this._pingTimeoutTimer),this.transport.removeAllListeners("close"),this.transport.close(),this.transport.removeAllListeners(),uw&&(this._beforeunloadEventListener&&removeEventListener("beforeunload",this._beforeunloadEventListener,!1),this._offlineEventListener)){const r=fp.indexOf(this._offlineEventListener);r!==-1&&fp.splice(r,1)}this.readyState="closed",this.id=null,this.emitReserved("close",e,n),this.writeBuffer=[],this._prevBufferLen=0}}}Bo.protocol=wP;class rB extends Bo{constructor(){super(...arguments),this._upgrades=[]}onOpen(){if(super.onOpen(),this.readyState==="open"&&this.opts.upgrade)for(let e=0;e<this._upgrades.length;e++)this._probe(this._upgrades[e])}_probe(e){let n=this.createTransport(e),r=!1;Bo.priorWebsocketSuccess=!1;const i=()=>{r||(n.send([{type:"ping",data:"probe"}]),n.once("packet",d=>{if(!r)if(d.type==="pong"&&d.data==="probe"){if(this.upgrading=!0,this.emitReserved("upgrading",n),!n)return;Bo.priorWebsocketSuccess=n.name==="websocket",this.transport.pause(()=>{r||this.readyState!=="closed"&&(u(),this.setTransport(n),n.send([{type:"upgrade"}]),this.emitReserved("upgrade",n),n=null,this.upgrading=!1,this.flush())})}else{const f=new Error("probe error");f.transport=n.name,this.emitReserved("upgradeError",f)}}))};function s(){r||(r=!0,u(),n.close(),n=null)}const o=d=>{const f=new Error("probe error: "+d);f.transport=n.name,s(),this.emitReserved("upgradeError",f)};function a(){o("transport closed")}function l(){o("socket closed")}function c(d){n&&d.name!==n.name&&s()}const u=()=>{n.removeListener("open",i),n.removeListener("error",o),n.removeListener("close",a),this.off("close",l),this.off("upgrading",c)};n.once("open",i),n.once("error",o),n.once("close",a),this.once("close",l),this.once("upgrading",c),this._upgrades.indexOf("webtransport")!==-1&&e!=="webtransport"?this.setTimeoutFn(()=>{r||n.open()},200):n.open()}onHandshake(e){this._upgrades=this._filterUpgrades(e.upgrades),super.onHandshake(e)}_filterUpgrades(e){const n=[];for(let r=0;r<e.length;r++)~this.transports.indexOf(e[r])&&n.push(e[r]);return n}}let iB=class extends rB{constructor(e,n={}){const r=typeof e=="object"?e:n;(!r.transports||r.transports&&typeof r.transports[0]=="string")&&(r.transports=(r.transports||["polling","websocket","webtransport"]).map(i=>ZL[i]).filter(i=>!!i)),super(e,r)}};function sB(t,e="",n){let r=t;n=n||typeof location<"u"&&location,t==null&&(t=n.protocol+"//"+n.host),typeof t=="string"&&(t.charAt(0)==="/"&&(t.charAt(1)==="/"?t=n.protocol+t:t=n.host+t),/^(https?|wss?):\/\//.test(t)||(typeof n<"u"?t=n.protocol+"//"+t:t="https://"+t),r=cw(t)),r.port||(/^(http|ws)$/.test(r.protocol)?r.port="80":/^(http|ws)s$/.test(r.protocol)&&(r.port="443")),r.path=r.path||"/";const s=r.host.indexOf(":")!==-1?"["+r.host+"]":r.host;return r.id=r.protocol+"://"+s+":"+r.port+e,r.href=r.protocol+"://"+s+(n&&n.port===r.port?"":":"+r.port),r}const oB=typeof ArrayBuffer=="function",aB=t=>typeof ArrayBuffer.isView=="function"?ArrayBuffer.isView(t):t.buffer instanceof ArrayBuffer,xP=Object.prototype.toString,lB=typeof Blob=="function"||typeof Blob<"u"&&xP.call(Blob)==="[object BlobConstructor]",cB=typeof File=="function"||typeof File<"u"&&xP.call(File)==="[object FileConstructor]";function cb(t){return oB&&(t instanceof ArrayBuffer||aB(t))||lB&&t instanceof Blob||cB&&t instanceof File}function hp(t,e){if(!t||typeof t!="object")return!1;if(Array.isArray(t)){for(let n=0,r=t.length;n<r;n++)if(hp(t[n]))return!0;return!1}if(cb(t))return!0;if(t.toJSON&&typeof t.toJSON=="function"&&arguments.length===1)return hp(t.toJSON(),!0);for(const n in t)if(Object.prototype.hasOwnProperty.call(t,n)&&hp(t[n]))return!0;return!1}function uB(t){const e=[],n=t.data,r=t;return r.data=dw(n,e),r.attachments=e.length,{packet:r,buffers:e}}function dw(t,e){if(!t)return t;if(cb(t)){const n={_placeholder:!0,num:e.length};return e.push(t),n}else if(Array.isArray(t)){const n=new Array(t.length);for(let r=0;r<t.length;r++)n[r]=dw(t[r],e);return n}else if(typeof t=="object"&&!(t instanceof Date)){const n={};for(const r in t)Object.prototype.hasOwnProperty.call(t,r)&&(n[r]=dw(t[r],e));return n}return t}function dB(t,e){return t.data=fw(t.data,e),delete t.attachments,t}function fw(t,e){if(!t)return t;if(t&&t._placeholder===!0){if(typeof t.num=="number"&&t.num>=0&&t.num<e.length)return e[t.num];throw new Error("illegal attachments")}else if(Array.isArray(t))for(let n=0;n<t.length;n++)t[n]=fw(t[n],e);else if(typeof t=="object")for(const n in t)Object.prototype.hasOwnProperty.call(t,n)&&(t[n]=fw(t[n],e));return t}const fB=["connect","connect_error","disconnect","disconnecting","newListener","removeListener"],hB=5;var De;(function(t){t[t.CONNECT=0]="CONNECT",t[t.DISCONNECT=1]="DISCONNECT",t[t.EVENT=2]="EVENT",t[t.ACK=3]="ACK",t[t.CONNECT_ERROR=4]="CONNECT_ERROR",t[t.BINARY_EVENT=5]="BINARY_EVENT",t[t.BINARY_ACK=6]="BINARY_ACK"})(De||(De={}));class pB{constructor(e){this.replacer=e}encode(e){return(e.type===De.EVENT||e.type===De.ACK)&&hp(e)?this.encodeAsBinary({type:e.type===De.EVENT?De.BINARY_EVENT:De.BINARY_ACK,nsp:e.nsp,data:e.data,id:e.id}):[this.encodeAsString(e)]}encodeAsString(e){let n=""+e.type;return(e.type===De.BINARY_EVENT||e.type===De.BINARY_ACK)&&(n+=e.attachments+"-"),e.nsp&&e.nsp!=="/"&&(n+=e.nsp+","),e.id!=null&&(n+=e.id),e.data!=null&&(n+=JSON.stringify(e.data,this.replacer)),n}encodeAsBinary(e){const n=uB(e),r=this.encodeAsString(n.packet),i=n.buffers;return i.unshift(r),i}}function RA(t){return Object.prototype.toString.call(t)==="[object Object]"}class ub extends Ct{constructor(e){super(),this.reviver=e}add(e){let n;if(typeof e=="string"){if(this.reconstructor)throw new Error("got plaintext data when reconstructing a packet");n=this.decodeString(e);const r=n.type===De.BINARY_EVENT;r||n.type===De.BINARY_ACK?(n.type=r?De.EVENT:De.ACK,this.reconstructor=new gB(n),n.attachments===0&&super.emitReserved("decoded",n)):super.emitReserved("decoded",n)}else if(cb(e)||e.base64)if(this.reconstructor)n=this.reconstructor.takeBinaryData(e),n&&(this.reconstructor=null,super.emitReserved("decoded",n));else throw new Error("got binary data when not reconstructing a packet");else throw new Error("Unknown type: "+e)}decodeString(e){let n=0;const r={type:Number(e.charAt(0))};if(De[r.type]===void 0)throw new Error("unknown packet type "+r.type);if(r.type===De.BINARY_EVENT||r.type===De.BINARY_ACK){const s=n+1;for(;e.charAt(++n)!=="-"&&n!=e.length;);const o=e.substring(s,n);if(o!=Number(o)||e.charAt(n)!=="-")throw new Error("Illegal attachments");r.attachments=Number(o)}if(e.charAt(n+1)==="/"){const s=n+1;for(;++n&&!(e.charAt(n)===","||n===e.length););r.nsp=e.substring(s,n)}else r.nsp="/";const i=e.charAt(n+1);if(i!==""&&Number(i)==i){const s=n+1;for(;++n;){const o=e.charAt(n);if(o==null||Number(o)!=o){--n;break}if(n===e.length)break}r.id=Number(e.substring(s,n+1))}if(e.charAt(++n)){const s=this.tryParse(e.substr(n));if(ub.isPayloadValid(r.type,s))r.data=s;else throw new Error("invalid payload")}return r}tryParse(e){try{return JSON.parse(e,this.reviver)}catch{return!1}}static isPayloadValid(e,n){switch(e){case De.CONNECT:return RA(n);case De.DISCONNECT:return n===void 0;case De.CONNECT_ERROR:return typeof n=="string"||RA(n);case De.EVENT:case De.BINARY_EVENT:return Array.isArray(n)&&(typeof n[0]=="number"||typeof n[0]=="string"&&fB.indexOf(n[0])===-1);case De.ACK:case De.BINARY_ACK:return Array.isArray(n)}}destroy(){this.reconstructor&&(this.reconstructor.finishedReconstruction(),this.reconstructor=null)}}class gB{constructor(e){this.packet=e,this.buffers=[],this.reconPack=e}takeBinaryData(e){if(this.buffers.push(e),this.buffers.length===this.reconPack.attachments){const n=dB(this.reconPack,this.buffers);return this.finishedReconstruction(),n}return null}finishedReconstruction(){this.reconPack=null,this.buffers=[]}}const mB=Object.freeze(Object.defineProperty({__proto__:null,Decoder:ub,Encoder:pB,get PacketType(){return De},protocol:hB},Symbol.toStringTag,{value:"Module"}));function Gr(t,e,n){return t.on(e,n),function(){t.off(e,n)}}const yB=Object.freeze({connect:1,connect_error:1,disconnect:1,disconnecting:1,newListener:1,removeListener:1});class kP extends Ct{constructor(e,n,r){super(),this.connected=!1,this.recovered=!1,this.receiveBuffer=[],this.sendBuffer=[],this._queue=[],this._queueSeq=0,this.ids=0,this.acks={},this.flags={},this.io=e,this.nsp=n,r&&r.auth&&(this.auth=r.auth),this._opts=Object.assign({},r),this.io._autoConnect&&this.open()}get disconnected(){return!this.connected}subEvents(){if(this.subs)return;const e=this.io;this.subs=[Gr(e,"open",this.onopen.bind(this)),Gr(e,"packet",this.onpacket.bind(this)),Gr(e,"error",this.onerror.bind(this)),Gr(e,"close",this.onclose.bind(this))]}get active(){return!!this.subs}connect(){return this.connected?this:(this.subEvents(),this.io._reconnecting||this.io.open(),this.io._readyState==="open"&&this.onopen(),this)}open(){return this.connect()}send(...e){return e.unshift("message"),this.emit.apply(this,e),this}emit(e,...n){var r,i,s;if(yB.hasOwnProperty(e))throw new Error('"'+e.toString()+'" is a reserved event name');if(n.unshift(e),this._opts.retries&&!this.flags.fromQueue&&!this.flags.volatile)return this._addToQueue(n),this;const o={type:De.EVENT,data:n};if(o.options={},o.options.compress=this.flags.compress!==!1,typeof n[n.length-1]=="function"){const u=this.ids++,d=n.pop();this._registerAckCallback(u,d),o.id=u}const a=(i=(r=this.io.engine)===null||r===void 0?void 0:r.transport)===null||i===void 0?void 0:i.writable,l=this.connected&&!(!((s=this.io.engine)===null||s===void 0)&&s._hasPingExpired());return this.flags.volatile&&!a||(l?(this.notifyOutgoingListeners(o),this.packet(o)):this.sendBuffer.push(o)),this.flags={},this}_registerAckCallback(e,n){var r;const i=(r=this.flags.timeout)!==null&&r!==void 0?r:this._opts.ackTimeout;if(i===void 0){this.acks[e]=n;return}const s=this.io.setTimeoutFn(()=>{delete this.acks[e];for(let a=0;a<this.sendBuffer.length;a++)this.sendBuffer[a].id===e&&this.sendBuffer.splice(a,1);n.call(this,new Error("operation has timed out"))},i),o=(...a)=>{this.io.clearTimeoutFn(s),n.apply(this,a)};o.withError=!0,this.acks[e]=o}emitWithAck(e,...n){return new Promise((r,i)=>{const s=(o,a)=>o?i(o):r(a);s.withError=!0,n.push(s),this.emit(e,...n)})}_addToQueue(e){let n;typeof e[e.length-1]=="function"&&(n=e.pop());const r={id:this._queueSeq++,tryCount:0,pending:!1,args:e,flags:Object.assign({fromQueue:!0},this.flags)};e.push((i,...s)=>r!==this._queue[0]?void 0:(i!==null?r.tryCount>this._opts.retries&&(this._queue.shift(),n&&n(i)):(this._queue.shift(),n&&n(null,...s)),r.pending=!1,this._drainQueue())),this._queue.push(r),this._drainQueue()}_drainQueue(e=!1){if(!this.connected||this._queue.length===0)return;const n=this._queue[0];n.pending&&!e||(n.pending=!0,n.tryCount++,this.flags=n.flags,this.emit.apply(this,n.args))}packet(e){e.nsp=this.nsp,this.io._packet(e)}onopen(){typeof this.auth=="function"?this.auth(e=>{this._sendConnectPacket(e)}):this._sendConnectPacket(this.auth)}_sendConnectPacket(e){this.packet({type:De.CONNECT,data:this._pid?Object.assign({pid:this._pid,offset:this._lastOffset},e):e})}onerror(e){this.connected||this.emitReserved("connect_error",e)}onclose(e,n){this.connected=!1,delete this.id,this.emitReserved("disconnect",e,n),this._clearAcks()}_clearAcks(){Object.keys(this.acks).forEach(e=>{if(!this.sendBuffer.some(r=>String(r.id)===e)){const r=this.acks[e];delete this.acks[e],r.withError&&r.call(this,new Error("socket has been disconnected"))}})}onpacket(e){if(e.nsp===this.nsp)switch(e.type){case De.CONNECT:e.data&&e.data.sid?this.onconnect(e.data.sid,e.data.pid):this.emitReserved("connect_error",new Error("It seems you are trying to reach a Socket.IO server in v2.x with a v3.x client, but they are not compatible (more information here: https://socket.io/docs/v3/migrating-from-2-x-to-3-0/)"));break;case De.EVENT:case De.BINARY_EVENT:this.onevent(e);break;case De.ACK:case De.BINARY_ACK:this.onack(e);break;case De.DISCONNECT:this.ondisconnect();break;case De.CONNECT_ERROR:this.destroy();const r=new Error(e.data.message);r.data=e.data.data,this.emitReserved("connect_error",r);break}}onevent(e){const n=e.data||[];e.id!=null&&n.push(this.ack(e.id)),this.connected?this.emitEvent(n):this.receiveBuffer.push(Object.freeze(n))}emitEvent(e){if(this._anyListeners&&this._anyListeners.length){const n=this._anyListeners.slice();for(const r of n)r.apply(this,e)}super.emit.apply(this,e),this._pid&&e.length&&typeof e[e.length-1]=="string"&&(this._lastOffset=e[e.length-1])}ack(e){const n=this;let r=!1;return function(...i){r||(r=!0,n.packet({type:De.ACK,id:e,data:i}))}}onack(e){const n=this.acks[e.id];typeof n=="function"&&(delete this.acks[e.id],n.withError&&e.data.unshift(null),n.apply(this,e.data))}onconnect(e,n){this.id=e,this.recovered=n&&this._pid===n,this._pid=n,this.connected=!0,this.emitBuffered(),this.emitReserved("connect"),this._drainQueue(!0)}emitBuffered(){this.receiveBuffer.forEach(e=>this.emitEvent(e)),this.receiveBuffer=[],this.sendBuffer.forEach(e=>{this.notifyOutgoingListeners(e),this.packet(e)}),this.sendBuffer=[]}ondisconnect(){this.destroy(),this.onclose("io server disconnect")}destroy(){this.subs&&(this.subs.forEach(e=>e()),this.subs=void 0),this.io._destroy(this)}disconnect(){return this.connected&&this.packet({type:De.DISCONNECT}),this.destroy(),this.connected&&this.onclose("io client disconnect"),this}close(){return this.disconnect()}compress(e){return this.flags.compress=e,this}get volatile(){return this.flags.volatile=!0,this}timeout(e){return this.flags.timeout=e,this}onAny(e){return this._anyListeners=this._anyListeners||[],this._anyListeners.push(e),this}prependAny(e){return this._anyListeners=this._anyListeners||[],this._anyListeners.unshift(e),this}offAny(e){if(!this._anyListeners)return this;if(e){const n=this._anyListeners;for(let r=0;r<n.length;r++)if(e===n[r])return n.splice(r,1),this}else this._anyListeners=[];return this}listenersAny(){return this._anyListeners||[]}onAnyOutgoing(e){return this._anyOutgoingListeners=this._anyOutgoingListeners||[],this._anyOutgoingListeners.push(e),this}prependAnyOutgoing(e){return this._anyOutgoingListeners=this._anyOutgoingListeners||[],this._anyOutgoingListeners.unshift(e),this}offAnyOutgoing(e){if(!this._anyOutgoingListeners)return this;if(e){const n=this._anyOutgoingListeners;for(let r=0;r<n.length;r++)if(e===n[r])return n.splice(r,1),this}else this._anyOutgoingListeners=[];return this}listenersAnyOutgoing(){return this._anyOutgoingListeners||[]}notifyOutgoingListeners(e){if(this._anyOutgoingListeners&&this._anyOutgoingListeners.length){const n=this._anyOutgoingListeners.slice();for(const r of n)r.apply(this,e.data)}}}function Cu(t){t=t||{},this.ms=t.min||100,this.max=t.max||1e4,this.factor=t.factor||2,this.jitter=t.jitter>0&&t.jitter<=1?t.jitter:0,this.attempts=0}Cu.prototype.duration=function(){var t=this.ms*Math.pow(this.factor,this.attempts++);if(this.jitter){var e=Math.random(),n=Math.floor(e*this.jitter*t);t=Math.floor(e*10)&1?t+n:t-n}return Math.min(t,this.max)|0};Cu.prototype.reset=function(){this.attempts=0};Cu.prototype.setMin=function(t){this.ms=t};Cu.prototype.setMax=function(t){this.max=t};Cu.prototype.setJitter=function(t){this.jitter=t};class hw extends Ct{constructor(e,n){var r;super(),this.nsps={},this.subs=[],e&&typeof e=="object"&&(n=e,e=void 0),n=n||{},n.path=n.path||"/socket.io",this.opts=n,Rg(this,n),this.reconnection(n.reconnection!==!1),this.reconnectionAttempts(n.reconnectionAttempts||1/0),this.reconnectionDelay(n.reconnectionDelay||1e3),this.reconnectionDelayMax(n.reconnectionDelayMax||5e3),this.randomizationFactor((r=n.randomizationFactor)!==null&&r!==void 0?r:.5),this.backoff=new Cu({min:this.reconnectionDelay(),max:this.reconnectionDelayMax(),jitter:this.randomizationFactor()}),this.timeout(n.timeout==null?2e4:n.timeout),this._readyState="closed",this.uri=e;const i=n.parser||mB;this.encoder=new i.Encoder,this.decoder=new i.Decoder,this._autoConnect=n.autoConnect!==!1,this._autoConnect&&this.open()}reconnection(e){return arguments.length?(this._reconnection=!!e,e||(this.skipReconnect=!0),this):this._reconnection}reconnectionAttempts(e){return e===void 0?this._reconnectionAttempts:(this._reconnectionAttempts=e,this)}reconnectionDelay(e){var n;return e===void 0?this._reconnectionDelay:(this._reconnectionDelay=e,(n=this.backoff)===null||n===void 0||n.setMin(e),this)}randomizationFactor(e){var n;return e===void 0?this._randomizationFactor:(this._randomizationFactor=e,(n=this.backoff)===null||n===void 0||n.setJitter(e),this)}reconnectionDelayMax(e){var n;return e===void 0?this._reconnectionDelayMax:(this._reconnectionDelayMax=e,(n=this.backoff)===null||n===void 0||n.setMax(e),this)}timeout(e){return arguments.length?(this._timeout=e,this):this._timeout}maybeReconnectOnOpen(){!this._reconnecting&&this._reconnection&&this.backoff.attempts===0&&this.reconnect()}open(e){if(~this._readyState.indexOf("open"))return this;this.engine=new iB(this.uri,this.opts);const n=this.engine,r=this;this._readyState="opening",this.skipReconnect=!1;const i=Gr(n,"open",function(){r.onopen(),e&&e()}),s=a=>{this.cleanup(),this._readyState="closed",this.emitReserved("error",a),e?e(a):this.maybeReconnectOnOpen()},o=Gr(n,"error",s);if(this._timeout!==!1){const a=this._timeout,l=this.setTimeoutFn(()=>{i(),s(new Error("timeout")),n.close()},a);this.opts.autoUnref&&l.unref(),this.subs.push(()=>{this.clearTimeoutFn(l)})}return this.subs.push(i),this.subs.push(o),this}connect(e){return this.open(e)}onopen(){this.cleanup(),this._readyState="open",this.emitReserved("open");const e=this.engine;this.subs.push(Gr(e,"ping",this.onping.bind(this)),Gr(e,"data",this.ondata.bind(this)),Gr(e,"error",this.onerror.bind(this)),Gr(e,"close",this.onclose.bind(this)),Gr(this.decoder,"decoded",this.ondecoded.bind(this)))}onping(){this.emitReserved("ping")}ondata(e){try{this.decoder.add(e)}catch(n){this.onclose("parse error",n)}}ondecoded(e){Tg(()=>{this.emitReserved("packet",e)},this.setTimeoutFn)}onerror(e){this.emitReserved("error",e)}socket(e,n){let r=this.nsps[e];return r?this._autoConnect&&!r.active&&r.connect():(r=new kP(this,e,n),this.nsps[e]=r),r}_destroy(e){const n=Object.keys(this.nsps);for(const r of n)if(this.nsps[r].active)return;this._close()}_packet(e){const n=this.encoder.encode(e);for(let r=0;r<n.length;r++)this.engine.write(n[r],e.options)}cleanup(){this.subs.forEach(e=>e()),this.subs.length=0,this.decoder.destroy()}_close(){this.skipReconnect=!0,this._reconnecting=!1,this.onclose("forced close")}disconnect(){return this._close()}onclose(e,n){var r;this.cleanup(),(r=this.engine)===null||r===void 0||r.close(),this.backoff.reset(),this._readyState="closed",this.emitReserved("close",e,n),this._reconnection&&!this.skipReconnect&&this.reconnect()}reconnect(){if(this._reconnecting||this.skipReconnect)return this;const e=this;if(this.backoff.attempts>=this._reconnectionAttempts)this.backoff.reset(),this.emitReserved("reconnect_failed"),this._reconnecting=!1;else{const n=this.backoff.duration();this._reconnecting=!0;const r=this.setTimeoutFn(()=>{e.skipReconnect||(this.emitReserved("reconnect_attempt",e.backoff.attempts),!e.skipReconnect&&e.open(i=>{i?(e._reconnecting=!1,e.reconnect(),this.emitReserved("reconnect_error",i)):e.onreconnect()}))},n);this.opts.autoUnref&&r.unref(),this.subs.push(()=>{this.clearTimeoutFn(r)})}}onreconnect(){const e=this.backoff.attempts;this._reconnecting=!1,this.backoff.reset(),this.emitReserved("reconnect",e)}}const Fu={};function pp(t,e){typeof t=="object"&&(e=t,t=void 0),e=e||{};const n=sB(t,e.path||"/socket.io"),r=n.source,i=n.id,s=n.path,o=Fu[i]&&s in Fu[i].nsps,a=e.forceNew||e["force new connection"]||e.multiplex===!1||o;let l;return a?l=new hw(r,e):(Fu[i]||(Fu[i]=new hw(r,e)),l=Fu[i]),n.query&&!e.query&&(e.query=n.queryKey),l.socket(n.path,e)}Object.assign(pp,{Manager:hw,Socket:kP,io:pp,connect:pp});function ne(t,e,n,r){return new(n||(n=Promise))(function(i,s){function o(c){try{l(r.next(c))}catch(u){s(u)}}function a(c){try{l(r.throw(c))}catch(u){s(u)}}function l(c){var u;c.done?i(c.value):(u=c.value,u instanceof n?u:new n(function(d){d(u)})).then(o,a)}l((r=r.apply(t,e||[])).next())})}var Cn=typeof global<"u"?global:typeof self<"u"?self:typeof window<"u"?window:{},Ci=[],mr=[],vB=typeof Uint8Array<"u"?Uint8Array:Array,db=!1;function _P(){db=!0;for(var t="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",e=0;e<64;++e)Ci[e]=t[e],mr[t.charCodeAt(e)]=e;mr[45]=62,mr[95]=63}function wB(t,e,n){for(var r,i,s=[],o=e;o<n;o+=3)r=(t[o]<<16)+(t[o+1]<<8)+t[o+2],s.push(Ci[(i=r)>>18&63]+Ci[i>>12&63]+Ci[i>>6&63]+Ci[63&i]);return s.join("")}function IA(t){var e;db||_P();for(var n=t.length,r=n%3,i="",s=[],o=16383,a=0,l=n-r;a<l;a+=o)s.push(wB(t,a,a+o>l?l:a+o));return r===1?(e=t[n-1],i+=Ci[e>>2],i+=Ci[e<<4&63],i+="=="):r===2&&(e=(t[n-2]<<8)+t[n-1],i+=Ci[e>>10],i+=Ci[e>>4&63],i+=Ci[e<<2&63],i+="="),s.push(i),s.join("")}function bh(t,e,n,r,i){var s,o,a=8*i-r-1,l=(1<<a)-1,c=l>>1,u=-7,d=n?i-1:0,f=n?-1:1,h=t[e+d];for(d+=f,s=h&(1<<-u)-1,h>>=-u,u+=a;u>0;s=256*s+t[e+d],d+=f,u-=8);for(o=s&(1<<-u)-1,s>>=-u,u+=r;u>0;o=256*o+t[e+d],d+=f,u-=8);if(s===0)s=1-c;else{if(s===l)return o?NaN:1/0*(h?-1:1);o+=Math.pow(2,r),s-=c}return(h?-1:1)*o*Math.pow(2,s-r)}function PP(t,e,n,r,i,s){var o,a,l,c=8*s-i-1,u=(1<<c)-1,d=u>>1,f=i===23?Math.pow(2,-24)-Math.pow(2,-77):0,h=r?0:s-1,m=r?1:-1,g=e<0||e===0&&1/e<0?1:0;for(e=Math.abs(e),isNaN(e)||e===1/0?(a=isNaN(e)?1:0,o=u):(o=Math.floor(Math.log(e)/Math.LN2),e*(l=Math.pow(2,-o))<1&&(o--,l*=2),(e+=o+d>=1?f/l:f*Math.pow(2,1-d))*l>=2&&(o++,l/=2),o+d>=u?(a=0,o=u):o+d>=1?(a=(e*l-1)*Math.pow(2,i),o+=d):(a=e*Math.pow(2,d-1)*Math.pow(2,i),o=0));i>=8;t[n+h]=255&a,h+=m,a/=256,i-=8);for(o=o<<i|a,c+=i;c>0;t[n+h]=255&o,h+=m,o/=256,c-=8);t[n+h-m]|=128*g}var bB={}.toString,TP=Array.isArray||function(t){return bB.call(t)=="[object Array]"};re.TYPED_ARRAY_SUPPORT=Cn.TYPED_ARRAY_SUPPORT===void 0||Cn.TYPED_ARRAY_SUPPORT;var EB=m0();function m0(){return re.TYPED_ARRAY_SUPPORT?2147483647:1073741823}function hs(t,e){if(m0()<e)throw new RangeError("Invalid typed array length");return re.TYPED_ARRAY_SUPPORT?(t=new Uint8Array(e)).__proto__=re.prototype:(t===null&&(t=new re(e)),t.length=e),t}function re(t,e,n){if(!(re.TYPED_ARRAY_SUPPORT||this instanceof re))return new re(t,e,n);if(typeof t=="number"){if(typeof e=="string")throw new Error("If encoding is specified then the first argument must be a string");return pw(this,t)}return RP(this,t,e,n)}function RP(t,e,n,r){if(typeof e=="number")throw new TypeError('"value" argument must not be a number');return typeof ArrayBuffer<"u"&&e instanceof ArrayBuffer?function(i,s,o,a){if(s.byteLength,o<0||s.byteLength<o)throw new RangeError("'offset' is out of bounds");if(s.byteLength<o+(a||0))throw new RangeError("'length' is out of bounds");return s=o===void 0&&a===void 0?new Uint8Array(s):a===void 0?new Uint8Array(s,o):new Uint8Array(s,o,a),re.TYPED_ARRAY_SUPPORT?(i=s).__proto__=re.prototype:i=Fm(i,s),i}(t,e,n,r):typeof e=="string"?function(i,s,o){if(typeof o=="string"&&o!==""||(o="utf8"),!re.isEncoding(o))throw new TypeError('"encoding" must be a valid string encoding');var a=0|OP(s,o);i=hs(i,a);var l=i.write(s,o);return l!==a&&(i=i.slice(0,l)),i}(t,e,n):function(i,s){if(xi(s)){var o=0|fb(s.length);return(i=hs(i,o)).length===0||s.copy(i,0,0,o),i}if(s){if(typeof ArrayBuffer<"u"&&s.buffer instanceof ArrayBuffer||"length"in s)return typeof s.length!="number"||(a=s.length)!=a?hs(i,0):Fm(i,s);if(s.type==="Buffer"&&TP(s.data))return Fm(i,s.data)}var a;throw new TypeError("First argument must be a string, Buffer, ArrayBuffer, Array, or array-like object.")}(t,e)}function IP(t){if(typeof t!="number")throw new TypeError('"size" argument must be a number');if(t<0)throw new RangeError('"size" argument must not be negative')}function pw(t,e){if(IP(e),t=hs(t,e<0?0:0|fb(e)),!re.TYPED_ARRAY_SUPPORT)for(var n=0;n<e;++n)t[n]=0;return t}function Fm(t,e){var n=e.length<0?0:0|fb(e.length);t=hs(t,n);for(var r=0;r<n;r+=1)t[r]=255&e[r];return t}function fb(t){if(t>=m0())throw new RangeError("Attempt to allocate Buffer larger than maximum size: 0x"+m0().toString(16)+" bytes");return 0|t}function xi(t){return!(t==null||!t._isBuffer)}function OP(t,e){if(xi(t))return t.length;if(typeof ArrayBuffer<"u"&&typeof ArrayBuffer.isView=="function"&&(ArrayBuffer.isView(t)||t instanceof ArrayBuffer))return t.byteLength;typeof t!="string"&&(t=""+t);var n=t.length;if(n===0)return 0;for(var r=!1;;)switch(e){case"ascii":case"latin1":case"binary":return n;case"utf8":case"utf-8":case void 0:return y0(t).length;case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return 2*n;case"hex":return n>>>1;case"base64":return BP(t).length;default:if(r)return y0(t).length;e=(""+e).toLowerCase(),r=!0}}function AB(t,e,n){var r=!1;if((e===void 0||e<0)&&(e=0),e>this.length||((n===void 0||n>this.length)&&(n=this.length),n<=0)||(n>>>=0)<=(e>>>=0))return"";for(t||(t="utf8");;)switch(t){case"hex":return IB(this,e,n);case"utf8":case"utf-8":return MP(this,e,n);case"ascii":return TB(this,e,n);case"latin1":case"binary":return RB(this,e,n);case"base64":return PB(this,e,n);case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return OB(this,e,n);default:if(r)throw new TypeError("Unknown encoding: "+t);t=(t+"").toLowerCase(),r=!0}}function ea(t,e,n){var r=t[e];t[e]=t[n],t[n]=r}function OA(t,e,n,r,i){if(t.length===0)return-1;if(typeof n=="string"?(r=n,n=0):n>2147483647?n=2147483647:n<-2147483648&&(n=-2147483648),n=+n,isNaN(n)&&(n=i?0:t.length-1),n<0&&(n=t.length+n),n>=t.length){if(i)return-1;n=t.length-1}else if(n<0){if(!i)return-1;n=0}if(typeof e=="string"&&(e=re.from(e,r)),xi(e))return e.length===0?-1:NA(t,e,n,r,i);if(typeof e=="number")return e&=255,re.TYPED_ARRAY_SUPPORT&&typeof Uint8Array.prototype.indexOf=="function"?i?Uint8Array.prototype.indexOf.call(t,e,n):Uint8Array.prototype.lastIndexOf.call(t,e,n):NA(t,[e],n,r,i);throw new TypeError("val must be string, number or Buffer")}function NA(t,e,n,r,i){var s,o=1,a=t.length,l=e.length;if(r!==void 0&&((r=String(r).toLowerCase())==="ucs2"||r==="ucs-2"||r==="utf16le"||r==="utf-16le")){if(t.length<2||e.length<2)return-1;o=2,a/=2,l/=2,n/=2}function c(h,m){return o===1?h[m]:h.readUInt16BE(m*o)}if(i){var u=-1;for(s=n;s<a;s++)if(c(t,s)===c(e,u===-1?0:s-u)){if(u===-1&&(u=s),s-u+1===l)return u*o}else u!==-1&&(s-=s-u),u=-1}else for(n+l>a&&(n=a-l),s=n;s>=0;s--){for(var d=!0,f=0;f<l;f++)if(c(t,s+f)!==c(e,f)){d=!1;break}if(d)return s}return-1}function SB(t,e,n,r){n=Number(n)||0;var i=t.length-n;r?(r=Number(r))>i&&(r=i):r=i;var s=e.length;if(s%2!=0)throw new TypeError("Invalid hex string");r>s/2&&(r=s/2);for(var o=0;o<r;++o){var a=parseInt(e.substr(2*o,2),16);if(isNaN(a))return o;t[n+o]=a}return o}function CB(t,e,n,r){return Ig(y0(e,t.length-n),t,n,r)}function NP(t,e,n,r){return Ig(function(i){for(var s=[],o=0;o<i.length;++o)s.push(255&i.charCodeAt(o));return s}(e),t,n,r)}function xB(t,e,n,r){return NP(t,e,n,r)}function kB(t,e,n,r){return Ig(BP(e),t,n,r)}function _B(t,e,n,r){return Ig(function(i,s){for(var o,a,l,c=[],u=0;u<i.length&&!((s-=2)<0);++u)a=(o=i.charCodeAt(u))>>8,l=o%256,c.push(l),c.push(a);return c}(e,t.length-n),t,n,r)}function PB(t,e,n){return e===0&&n===t.length?IA(t):IA(t.slice(e,n))}function MP(t,e,n){n=Math.min(t.length,n);for(var r=[],i=e;i<n;){var s,o,a,l,c=t[i],u=null,d=c>239?4:c>223?3:c>191?2:1;if(i+d<=n)switch(d){case 1:c<128&&(u=c);break;case 2:(192&(s=t[i+1]))==128&&(l=(31&c)<<6|63&s)>127&&(u=l);break;case 3:s=t[i+1],o=t[i+2],(192&s)==128&&(192&o)==128&&(l=(15&c)<<12|(63&s)<<6|63&o)>2047&&(l<55296||l>57343)&&(u=l);break;case 4:s=t[i+1],o=t[i+2],a=t[i+3],(192&s)==128&&(192&o)==128&&(192&a)==128&&(l=(15&c)<<18|(63&s)<<12|(63&o)<<6|63&a)>65535&&l<1114112&&(u=l)}u===null?(u=65533,d=1):u>65535&&(u-=65536,r.push(u>>>10&1023|55296),u=56320|1023&u),r.push(u),i+=d}return function(f){var h=f.length;if(h<=MA)return String.fromCharCode.apply(String,f);for(var m="",g=0;g<h;)m+=String.fromCharCode.apply(String,f.slice(g,g+=MA));return m}(r)}re.poolSize=8192,re._augment=function(t){return t.__proto__=re.prototype,t},re.from=function(t,e,n){return RP(null,t,e,n)},re.TYPED_ARRAY_SUPPORT&&(re.prototype.__proto__=Uint8Array.prototype,re.__proto__=Uint8Array,typeof Symbol<"u"&&Symbol.species&&re[Symbol.species]),re.alloc=function(t,e,n){return function(r,i,s,o){return IP(i),i<=0?hs(r,i):s!==void 0?typeof o=="string"?hs(r,i).fill(s,o):hs(r,i).fill(s):hs(r,i)}(null,t,e,n)},re.allocUnsafe=function(t){return pw(null,t)},re.allocUnsafeSlow=function(t){return pw(null,t)},re.isBuffer=DP,re.compare=function(t,e){if(!xi(t)||!xi(e))throw new TypeError("Arguments must be Buffers");if(t===e)return 0;for(var n=t.length,r=e.length,i=0,s=Math.min(n,r);i<s;++i)if(t[i]!==e[i]){n=t[i],r=e[i];break}return n<r?-1:r<n?1:0},re.isEncoding=function(t){switch(String(t).toLowerCase()){case"hex":case"utf8":case"utf-8":case"ascii":case"latin1":case"binary":case"base64":case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return!0;default:return!1}},re.concat=function(t,e){if(!TP(t))throw new TypeError('"list" argument must be an Array of Buffers');if(t.length===0)return re.alloc(0);var n;if(e===void 0)for(e=0,n=0;n<t.length;++n)e+=t[n].length;var r=re.allocUnsafe(e),i=0;for(n=0;n<t.length;++n){var s=t[n];if(!xi(s))throw new TypeError('"list" argument must be an Array of Buffers');s.copy(r,i),i+=s.length}return r},re.byteLength=OP,re.prototype._isBuffer=!0,re.prototype.swap16=function(){var t=this.length;if(t%2!=0)throw new RangeError("Buffer size must be a multiple of 16-bits");for(var e=0;e<t;e+=2)ea(this,e,e+1);return this},re.prototype.swap32=function(){var t=this.length;if(t%4!=0)throw new RangeError("Buffer size must be a multiple of 32-bits");for(var e=0;e<t;e+=4)ea(this,e,e+3),ea(this,e+1,e+2);return this},re.prototype.swap64=function(){var t=this.length;if(t%8!=0)throw new RangeError("Buffer size must be a multiple of 64-bits");for(var e=0;e<t;e+=8)ea(this,e,e+7),ea(this,e+1,e+6),ea(this,e+2,e+5),ea(this,e+3,e+4);return this},re.prototype.toString=function(){var t=0|this.length;return t===0?"":arguments.length===0?MP(this,0,t):AB.apply(this,arguments)},re.prototype.equals=function(t){if(!xi(t))throw new TypeError("Argument must be a Buffer");return this===t||re.compare(this,t)===0},re.prototype.inspect=function(){var t="";return this.length>0&&(t=this.toString("hex",0,50).match(/.{2}/g).join(" "),this.length>50&&(t+=" ... ")),"<Buffer "+t+">"},re.prototype.compare=function(t,e,n,r,i){if(!xi(t))throw new TypeError("Argument must be a Buffer");if(e===void 0&&(e=0),n===void 0&&(n=t?t.length:0),r===void 0&&(r=0),i===void 0&&(i=this.length),e<0||n>t.length||r<0||i>this.length)throw new RangeError("out of range index");if(r>=i&&e>=n)return 0;if(r>=i)return-1;if(e>=n)return 1;if(this===t)return 0;for(var s=(i>>>=0)-(r>>>=0),o=(n>>>=0)-(e>>>=0),a=Math.min(s,o),l=this.slice(r,i),c=t.slice(e,n),u=0;u<a;++u)if(l[u]!==c[u]){s=l[u],o=c[u];break}return s<o?-1:o<s?1:0},re.prototype.includes=function(t,e,n){return this.indexOf(t,e,n)!==-1},re.prototype.indexOf=function(t,e,n){return OA(this,t,e,n,!0)},re.prototype.lastIndexOf=function(t,e,n){return OA(this,t,e,n,!1)},re.prototype.write=function(t,e,n,r){if(e===void 0)r="utf8",n=this.length,e=0;else if(n===void 0&&typeof e=="string")r=e,n=this.length,e=0;else{if(!isFinite(e))throw new Error("Buffer.write(string, encoding, offset[, length]) is no longer supported");e|=0,isFinite(n)?(n|=0,r===void 0&&(r="utf8")):(r=n,n=void 0)}var i=this.length-e;if((n===void 0||n>i)&&(n=i),t.length>0&&(n<0||e<0)||e>this.length)throw new RangeError("Attempt to write outside buffer bounds");r||(r="utf8");for(var s=!1;;)switch(r){case"hex":return SB(this,t,e,n);case"utf8":case"utf-8":return CB(this,t,e,n);case"ascii":return NP(this,t,e,n);case"latin1":case"binary":return xB(this,t,e,n);case"base64":return kB(this,t,e,n);case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return _B(this,t,e,n);default:if(s)throw new TypeError("Unknown encoding: "+r);r=(""+r).toLowerCase(),s=!0}},re.prototype.toJSON=function(){return{type:"Buffer",data:Array.prototype.slice.call(this._arr||this,0)}};var MA=4096;function TB(t,e,n){var r="";n=Math.min(t.length,n);for(var i=e;i<n;++i)r+=String.fromCharCode(127&t[i]);return r}function RB(t,e,n){var r="";n=Math.min(t.length,n);for(var i=e;i<n;++i)r+=String.fromCharCode(t[i]);return r}function IB(t,e,n){var r=t.length;(!e||e<0)&&(e=0),(!n||n<0||n>r)&&(n=r);for(var i="",s=e;s<n;++s)i+=MB(t[s]);return i}function OB(t,e,n){for(var r=t.slice(e,n),i="",s=0;s<r.length;s+=2)i+=String.fromCharCode(r[s]+256*r[s+1]);return i}function Rt(t,e,n){if(t%1!=0||t<0)throw new RangeError("offset is not uint");if(t+e>n)throw new RangeError("Trying to access beyond buffer length")}function _n(t,e,n,r,i,s){if(!xi(t))throw new TypeError('"buffer" argument must be a Buffer instance');if(e>i||e<s)throw new RangeError('"value" argument is out of bounds');if(n+r>t.length)throw new RangeError("Index out of range")}function Eh(t,e,n,r){e<0&&(e=65535+e+1);for(var i=0,s=Math.min(t.length-n,2);i<s;++i)t[n+i]=(e&255<<8*(r?i:1-i))>>>8*(r?i:1-i)}function Ah(t,e,n,r){e<0&&(e=4294967295+e+1);for(var i=0,s=Math.min(t.length-n,4);i<s;++i)t[n+i]=e>>>8*(r?i:3-i)&255}function LP(t,e,n,r,i,s){if(n+r>t.length)throw new RangeError("Index out of range");if(n<0)throw new RangeError("Index out of range")}function LA(t,e,n,r,i){return i||LP(t,0,n,4),PP(t,e,n,r,23,4),n+4}function BA(t,e,n,r,i){return i||LP(t,0,n,8),PP(t,e,n,r,52,8),n+8}re.prototype.slice=function(t,e){var n,r=this.length;if((t=~~t)<0?(t+=r)<0&&(t=0):t>r&&(t=r),(e=e===void 0?r:~~e)<0?(e+=r)<0&&(e=0):e>r&&(e=r),e<t&&(e=t),re.TYPED_ARRAY_SUPPORT)(n=this.subarray(t,e)).__proto__=re.prototype;else{var i=e-t;n=new re(i,void 0);for(var s=0;s<i;++s)n[s]=this[s+t]}return n},re.prototype.readUIntLE=function(t,e,n){t|=0,e|=0,n||Rt(t,e,this.length);for(var r=this[t],i=1,s=0;++s<e&&(i*=256);)r+=this[t+s]*i;return r},re.prototype.readUIntBE=function(t,e,n){t|=0,e|=0,n||Rt(t,e,this.length);for(var r=this[t+--e],i=1;e>0&&(i*=256);)r+=this[t+--e]*i;return r},re.prototype.readUInt8=function(t,e){return e||Rt(t,1,this.length),this[t]},re.prototype.readUInt16LE=function(t,e){return e||Rt(t,2,this.length),this[t]|this[t+1]<<8},re.prototype.readUInt16BE=function(t,e){return e||Rt(t,2,this.length),this[t]<<8|this[t+1]},re.prototype.readUInt32LE=function(t,e){return e||Rt(t,4,this.length),(this[t]|this[t+1]<<8|this[t+2]<<16)+16777216*this[t+3]},re.prototype.readUInt32BE=function(t,e){return e||Rt(t,4,this.length),16777216*this[t]+(this[t+1]<<16|this[t+2]<<8|this[t+3])},re.prototype.readIntLE=function(t,e,n){t|=0,e|=0,n||Rt(t,e,this.length);for(var r=this[t],i=1,s=0;++s<e&&(i*=256);)r+=this[t+s]*i;return r>=(i*=128)&&(r-=Math.pow(2,8*e)),r},re.prototype.readIntBE=function(t,e,n){t|=0,e|=0,n||Rt(t,e,this.length);for(var r=e,i=1,s=this[t+--r];r>0&&(i*=256);)s+=this[t+--r]*i;return s>=(i*=128)&&(s-=Math.pow(2,8*e)),s},re.prototype.readInt8=function(t,e){return e||Rt(t,1,this.length),128&this[t]?-1*(255-this[t]+1):this[t]},re.prototype.readInt16LE=function(t,e){e||Rt(t,2,this.length);var n=this[t]|this[t+1]<<8;return 32768&n?4294901760|n:n},re.prototype.readInt16BE=function(t,e){e||Rt(t,2,this.length);var n=this[t+1]|this[t]<<8;return 32768&n?4294901760|n:n},re.prototype.readInt32LE=function(t,e){return e||Rt(t,4,this.length),this[t]|this[t+1]<<8|this[t+2]<<16|this[t+3]<<24},re.prototype.readInt32BE=function(t,e){return e||Rt(t,4,this.length),this[t]<<24|this[t+1]<<16|this[t+2]<<8|this[t+3]},re.prototype.readFloatLE=function(t,e){return e||Rt(t,4,this.length),bh(this,t,!0,23,4)},re.prototype.readFloatBE=function(t,e){return e||Rt(t,4,this.length),bh(this,t,!1,23,4)},re.prototype.readDoubleLE=function(t,e){return e||Rt(t,8,this.length),bh(this,t,!0,52,8)},re.prototype.readDoubleBE=function(t,e){return e||Rt(t,8,this.length),bh(this,t,!1,52,8)},re.prototype.writeUIntLE=function(t,e,n,r){t=+t,e|=0,n|=0,r||_n(this,t,e,n,Math.pow(2,8*n)-1,0);var i=1,s=0;for(this[e]=255&t;++s<n&&(i*=256);)this[e+s]=t/i&255;return e+n},re.prototype.writeUIntBE=function(t,e,n,r){t=+t,e|=0,n|=0,r||_n(this,t,e,n,Math.pow(2,8*n)-1,0);var i=n-1,s=1;for(this[e+i]=255&t;--i>=0&&(s*=256);)this[e+i]=t/s&255;return e+n},re.prototype.writeUInt8=function(t,e,n){return t=+t,e|=0,n||_n(this,t,e,1,255,0),re.TYPED_ARRAY_SUPPORT||(t=Math.floor(t)),this[e]=255&t,e+1},re.prototype.writeUInt16LE=function(t,e,n){return t=+t,e|=0,n||_n(this,t,e,2,65535,0),re.TYPED_ARRAY_SUPPORT?(this[e]=255&t,this[e+1]=t>>>8):Eh(this,t,e,!0),e+2},re.prototype.writeUInt16BE=function(t,e,n){return t=+t,e|=0,n||_n(this,t,e,2,65535,0),re.TYPED_ARRAY_SUPPORT?(this[e]=t>>>8,this[e+1]=255&t):Eh(this,t,e,!1),e+2},re.prototype.writeUInt32LE=function(t,e,n){return t=+t,e|=0,n||_n(this,t,e,4,4294967295,0),re.TYPED_ARRAY_SUPPORT?(this[e+3]=t>>>24,this[e+2]=t>>>16,this[e+1]=t>>>8,this[e]=255&t):Ah(this,t,e,!0),e+4},re.prototype.writeUInt32BE=function(t,e,n){return t=+t,e|=0,n||_n(this,t,e,4,4294967295,0),re.TYPED_ARRAY_SUPPORT?(this[e]=t>>>24,this[e+1]=t>>>16,this[e+2]=t>>>8,this[e+3]=255&t):Ah(this,t,e,!1),e+4},re.prototype.writeIntLE=function(t,e,n,r){if(t=+t,e|=0,!r){var i=Math.pow(2,8*n-1);_n(this,t,e,n,i-1,-i)}var s=0,o=1,a=0;for(this[e]=255&t;++s<n&&(o*=256);)t<0&&a===0&&this[e+s-1]!==0&&(a=1),this[e+s]=(t/o>>0)-a&255;return e+n},re.prototype.writeIntBE=function(t,e,n,r){if(t=+t,e|=0,!r){var i=Math.pow(2,8*n-1);_n(this,t,e,n,i-1,-i)}var s=n-1,o=1,a=0;for(this[e+s]=255&t;--s>=0&&(o*=256);)t<0&&a===0&&this[e+s+1]!==0&&(a=1),this[e+s]=(t/o>>0)-a&255;return e+n},re.prototype.writeInt8=function(t,e,n){return t=+t,e|=0,n||_n(this,t,e,1,127,-128),re.TYPED_ARRAY_SUPPORT||(t=Math.floor(t)),t<0&&(t=255+t+1),this[e]=255&t,e+1},re.prototype.writeInt16LE=function(t,e,n){return t=+t,e|=0,n||_n(this,t,e,2,32767,-32768),re.TYPED_ARRAY_SUPPORT?(this[e]=255&t,this[e+1]=t>>>8):Eh(this,t,e,!0),e+2},re.prototype.writeInt16BE=function(t,e,n){return t=+t,e|=0,n||_n(this,t,e,2,32767,-32768),re.TYPED_ARRAY_SUPPORT?(this[e]=t>>>8,this[e+1]=255&t):Eh(this,t,e,!1),e+2},re.prototype.writeInt32LE=function(t,e,n){return t=+t,e|=0,n||_n(this,t,e,4,2147483647,-2147483648),re.TYPED_ARRAY_SUPPORT?(this[e]=255&t,this[e+1]=t>>>8,this[e+2]=t>>>16,this[e+3]=t>>>24):Ah(this,t,e,!0),e+4},re.prototype.writeInt32BE=function(t,e,n){return t=+t,e|=0,n||_n(this,t,e,4,2147483647,-2147483648),t<0&&(t=4294967295+t+1),re.TYPED_ARRAY_SUPPORT?(this[e]=t>>>24,this[e+1]=t>>>16,this[e+2]=t>>>8,this[e+3]=255&t):Ah(this,t,e,!1),e+4},re.prototype.writeFloatLE=function(t,e,n){return LA(this,t,e,!0,n)},re.prototype.writeFloatBE=function(t,e,n){return LA(this,t,e,!1,n)},re.prototype.writeDoubleLE=function(t,e,n){return BA(this,t,e,!0,n)},re.prototype.writeDoubleBE=function(t,e,n){return BA(this,t,e,!1,n)},re.prototype.copy=function(t,e,n,r){if(n||(n=0),r||r===0||(r=this.length),e>=t.length&&(e=t.length),e||(e=0),r>0&&r<n&&(r=n),r===n||t.length===0||this.length===0)return 0;if(e<0)throw new RangeError("targetStart out of bounds");if(n<0||n>=this.length)throw new RangeError("sourceStart out of bounds");if(r<0)throw new RangeError("sourceEnd out of bounds");r>this.length&&(r=this.length),t.length-e<r-n&&(r=t.length-e+n);var i,s=r-n;if(this===t&&n<e&&e<r)for(i=s-1;i>=0;--i)t[i+e]=this[i+n];else if(s<1e3||!re.TYPED_ARRAY_SUPPORT)for(i=0;i<s;++i)t[i+e]=this[i+n];else Uint8Array.prototype.set.call(t,this.subarray(n,n+s),e);return s},re.prototype.fill=function(t,e,n,r){if(typeof t=="string"){if(typeof e=="string"?(r=e,e=0,n=this.length):typeof n=="string"&&(r=n,n=this.length),t.length===1){var i=t.charCodeAt(0);i<256&&(t=i)}if(r!==void 0&&typeof r!="string")throw new TypeError("encoding must be a string");if(typeof r=="string"&&!re.isEncoding(r))throw new TypeError("Unknown encoding: "+r)}else typeof t=="number"&&(t&=255);if(e<0||this.length<e||this.length<n)throw new RangeError("Out of range index");if(n<=e)return this;var s;if(e>>>=0,n=n===void 0?this.length:n>>>0,t||(t=0),typeof t=="number")for(s=e;s<n;++s)this[s]=t;else{var o=xi(t)?t:y0(new re(t,r).toString()),a=o.length;for(s=0;s<n-e;++s)this[s+e]=o[s%a]}return this};var NB=/[^+\/0-9A-Za-z-_]/g;function MB(t){return t<16?"0"+t.toString(16):t.toString(16)}function y0(t,e){var n;e=e||1/0;for(var r=t.length,i=null,s=[],o=0;o<r;++o){if((n=t.charCodeAt(o))>55295&&n<57344){if(!i){if(n>56319){(e-=3)>-1&&s.push(239,191,189);continue}if(o+1===r){(e-=3)>-1&&s.push(239,191,189);continue}i=n;continue}if(n<56320){(e-=3)>-1&&s.push(239,191,189),i=n;continue}n=65536+(i-55296<<10|n-56320)}else i&&(e-=3)>-1&&s.push(239,191,189);if(i=null,n<128){if((e-=1)<0)break;s.push(n)}else if(n<2048){if((e-=2)<0)break;s.push(n>>6|192,63&n|128)}else if(n<65536){if((e-=3)<0)break;s.push(n>>12|224,n>>6&63|128,63&n|128)}else{if(!(n<1114112))throw new Error("Invalid code point");if((e-=4)<0)break;s.push(n>>18|240,n>>12&63|128,n>>6&63|128,63&n|128)}}return s}function BP(t){return function(e){var n,r,i,s,o,a;db||_P();var l=e.length;if(l%4>0)throw new Error("Invalid string. Length must be a multiple of 4");o=e[l-2]==="="?2:e[l-1]==="="?1:0,a=new vB(3*l/4-o),i=o>0?l-4:l;var c=0;for(n=0,r=0;n<i;n+=4,r+=3)s=mr[e.charCodeAt(n)]<<18|mr[e.charCodeAt(n+1)]<<12|mr[e.charCodeAt(n+2)]<<6|mr[e.charCodeAt(n+3)],a[c++]=s>>16&255,a[c++]=s>>8&255,a[c++]=255&s;return o===2?(s=mr[e.charCodeAt(n)]<<2|mr[e.charCodeAt(n+1)]>>4,a[c++]=255&s):o===1&&(s=mr[e.charCodeAt(n)]<<10|mr[e.charCodeAt(n+1)]<<4|mr[e.charCodeAt(n+2)]>>2,a[c++]=s>>8&255,a[c++]=255&s),a}(function(e){if((e=function(n){return n.trim?n.trim():n.replace(/^\s+|\s+$/g,"")}(e).replace(NB,"")).length<2)return"";for(;e.length%4!=0;)e+="=";return e}(t))}function Ig(t,e,n,r){for(var i=0;i<r&&!(i+n>=e.length||i>=t.length);++i)e[i+n]=t[i];return i}function DP(t){return t!=null&&(!!t._isBuffer||DA(t)||function(e){return typeof e.readFloatLE=="function"&&typeof e.slice=="function"&&DA(e.slice(0,0))}(t))}function DA(t){return!!t.constructor&&typeof t.constructor.isBuffer=="function"&&t.constructor.isBuffer(t)}var LB=Object.freeze({__proto__:null,Buffer:re,INSPECT_MAX_BYTES:50,SlowBuffer:function(t){return+t!=t&&(t=0),re.alloc(+t)},isBuffer:DP,kMaxLength:EB}),Pr=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};function Og(t){return t&&t.__esModule&&Object.prototype.hasOwnProperty.call(t,"default")?t.default:t}function Uf(t){if(t.__esModule)return t;var e=t.default;if(typeof e=="function"){var n=function r(){return this instanceof r?Reflect.construct(e,arguments,this.constructor):e.apply(this,arguments)};n.prototype=e.prototype}else n={};return Object.defineProperty(n,"__esModule",{value:!0}),Object.keys(t).forEach(function(r){var i=Object.getOwnPropertyDescriptor(t,r);Object.defineProperty(n,r,i.get?i:{enumerable:!0,get:function(){return t[r]}})}),n}var kl={},ar={},sn={};function v0(t){if(!Number.isSafeInteger(t)||t<0)throw new Error(`positive integer expected, not ${t}`)}function $P(t){if(typeof t!="boolean")throw new Error(`boolean expected, not ${t}`)}function UP(t){return t instanceof Uint8Array||t!=null&&typeof t=="object"&&t.constructor.name==="Uint8Array"}function hb(t,...e){if(!UP(t))throw new Error("Uint8Array expected");if(e.length>0&&!e.includes(t.length))throw new Error(`Uint8Array expected of length ${e}, not of length=${t.length}`)}function FP(t){if(typeof t!="function"||typeof t.create!="function")throw new Error("hash must be wrapped by utils.wrapConstructor");v0(t.outputLen),v0(t.blockLen)}function jP(t,e=!0){if(t.destroyed)throw new Error("Hash instance has been destroyed");if(e&&t.finished)throw new Error("Hash#digest() has already been called")}function HP(t,e){hb(t);const n=e.outputLen;if(t.length<n)throw new Error(`digestInto() expects output buffer of length at least ${n}`)}Object.defineProperty(sn,"__esModule",{value:!0}),sn.isBytes=UP,sn.number=v0,sn.bool=$P,sn.bytes=hb,sn.hash=FP,sn.exists=jP,sn.output=HP;const BB={number:v0,bool:$P,bytes:hb,hash:FP,exists:jP,output:HP};sn.default=BB,function(t){Object.defineProperty(t,"__esModule",{value:!0}),t.wrapCipher=t.Hash=t.nextTick=t.isLE=t.createView=t.u32=t.u16=t.u8=void 0,t.bytesToHex=r,t.hexToBytes=o,t.hexToNumber=a,t.bytesToNumberBE=function(d){return a(r(d))},t.numberToBytesBE=function(d,f){return o(d.toString(16).padStart(2*f,"0"))},t.asyncLoop=async function(d,f,h){let m=Date.now();for(let g=0;g<d;g++){h(g);const w=Date.now()-m;w>=0&&w<f||(await(0,t.nextTick)(),m+=w)}},t.utf8ToBytes=l,t.bytesToUtf8=function(d){return new TextDecoder().decode(d)},t.toBytes=function(d){if(typeof d=="string")d=l(d);else{if(!(0,e.isBytes)(d))throw new Error("Uint8Array expected, got "+typeof d);d=u(d)}return d},t.concatBytes=function(...d){let f=0;for(let m=0;m<d.length;m++){const g=d[m];(0,e.bytes)(g),f+=g.length}const h=new Uint8Array(f);for(let m=0,g=0;m<d.length;m++){const w=d[m];h.set(w,g),g+=w.length}return h},t.checkOpts=function(d,f){if(f==null||typeof f!="object")throw new Error("options must be defined");return Object.assign(d,f)},t.equalBytes=function(d,f){if(d.length!==f.length)return!1;let h=0;for(let m=0;m<d.length;m++)h|=d[m]^f[m];return h===0},t.setBigUint64=c,t.u64Lengths=function(d,f){const h=new Uint8Array(16),m=(0,t.createView)(h);return c(m,0,BigInt(f?f.length:0),!0),c(m,8,BigInt(d.length),!0),h},t.isAligned32=function(d){return d.byteOffset%4==0},t.copyBytes=u,t.clean=function(...d){for(let f=0;f<d.length;f++)d[f].fill(0)};const e=sn;if(t.u8=d=>new Uint8Array(d.buffer,d.byteOffset,d.byteLength),t.u16=d=>new Uint16Array(d.buffer,d.byteOffset,Math.floor(d.byteLength/2)),t.u32=d=>new Uint32Array(d.buffer,d.byteOffset,Math.floor(d.byteLength/4)),t.createView=d=>new DataView(d.buffer,d.byteOffset,d.byteLength),t.isLE=new Uint8Array(new Uint32Array([287454020]).buffer)[0]===68,!t.isLE)throw new Error("Non little-endian hardware is not supported");const n=Array.from({length:256},(d,f)=>f.toString(16).padStart(2,"0"));function r(d){(0,e.bytes)(d);let f="";for(let h=0;h<d.length;h++)f+=n[d[h]];return f}const i={_0:48,_9:57,_A:65,_F:70,_a:97,_f:102};function s(d){return d>=i._0&&d<=i._9?d-i._0:d>=i._A&&d<=i._F?d-(i._A-10):d>=i._a&&d<=i._f?d-(i._a-10):void 0}function o(d){if(typeof d!="string")throw new Error("hex string expected, got "+typeof d);const f=d.length,h=f/2;if(f%2)throw new Error("padded hex string expected, got unpadded hex of length "+f);const m=new Uint8Array(h);for(let g=0,w=0;g<h;g++,w+=2){const p=s(d.charCodeAt(w)),v=s(d.charCodeAt(w+1));if(p===void 0||v===void 0){const y=d[w]+d[w+1];throw new Error('hex string expected, got non-hex character "'+y+'" at index '+w)}m[g]=16*p+v}return m}function a(d){if(typeof d!="string")throw new Error("hex string expected, got "+typeof d);return BigInt(d===""?"0":`0x${d}`)}function l(d){if(typeof d!="string")throw new Error("string expected, got "+typeof d);return new Uint8Array(new TextEncoder().encode(d))}t.nextTick=async()=>{},t.Hash=class{};function c(d,f,h,m){if(typeof d.setBigUint64=="function")return d.setBigUint64(f,h,m);const g=BigInt(32),w=BigInt(4294967295),p=Number(h>>g&w),v=Number(h&w),y=m?4:0,x=m?0:4;d.setUint32(f+y,p,m),d.setUint32(f+x,v,m)}function u(d){return Uint8Array.from(d)}t.wrapCipher=(d,f)=>(Object.assign(f,d),f)}(ar);var Xd={},It={};Object.defineProperty(It,"__esModule",{value:!0}),It.AEAD_TAG_LENGTH=It.XCHACHA20_NONCE_LENGTH=It.CURVE25519_PUBLIC_KEY_SIZE=It.ETH_PUBLIC_KEY_SIZE=It.UNCOMPRESSED_PUBLIC_KEY_SIZE=It.COMPRESSED_PUBLIC_KEY_SIZE=It.SECRET_KEY_LENGTH=void 0,It.SECRET_KEY_LENGTH=32,It.COMPRESSED_PUBLIC_KEY_SIZE=33,It.UNCOMPRESSED_PUBLIC_KEY_SIZE=65,It.ETH_PUBLIC_KEY_SIZE=64,It.CURVE25519_PUBLIC_KEY_SIZE=32,It.XCHACHA20_NONCE_LENGTH=24,It.AEAD_TAG_LENGTH=16,function(t){Object.defineProperty(t,"__esModule",{value:!0}),t.ephemeralKeySize=t.symmetricNonceLength=t.symmetricAlgorithm=t.isHkdfKeyCompressed=t.isEphemeralKeyCompressed=t.ellipticCurve=t.ECIES_CONFIG=void 0;var e=It,n=function(){this.ellipticCurve="secp256k1",this.isEphemeralKeyCompressed=!1,this.isHkdfKeyCompressed=!1,this.symmetricAlgorithm="aes-256-gcm",this.symmetricNonceLength=16};t.ECIES_CONFIG=new n,t.ellipticCurve=function(){return t.ECIES_CONFIG.ellipticCurve},t.isEphemeralKeyCompressed=function(){return t.ECIES_CONFIG.isEphemeralKeyCompressed},t.isHkdfKeyCompressed=function(){return t.ECIES_CONFIG.isHkdfKeyCompressed},t.symmetricAlgorithm=function(){return t.ECIES_CONFIG.symmetricAlgorithm},t.symmetricNonceLength=function(){return t.ECIES_CONFIG.symmetricNonceLength},t.ephemeralKeySize=function(){var r={secp256k1:t.ECIES_CONFIG.isEphemeralKeyCompressed?e.COMPRESSED_PUBLIC_KEY_SIZE:e.UNCOMPRESSED_PUBLIC_KEY_SIZE,x25519:e.CURVE25519_PUBLIC_KEY_SIZE,ed25519:e.CURVE25519_PUBLIC_KEY_SIZE};if(t.ECIES_CONFIG.ellipticCurve in r)return r[t.ECIES_CONFIG.ellipticCurve];throw new Error("Not implemented")}}(Xd);var jm={},w0={},Ng={},KP={},pb={},Sh={};Object.defineProperty(Sh,"__esModule",{value:!0}),Sh.crypto=void 0,Sh.crypto=typeof globalThis=="object"&&"crypto"in globalThis?globalThis.crypto:void 0,function(t){Object.defineProperty(t,"__esModule",{value:!0}),t.gcm=t.ctr=t.cbc=t.utils=void 0,t.randomBytes=i,t.getWebcryptoSubtle=s,t.managedNonce=function(l){return(0,n.number)(l.nonceLength),(c,...u)=>({encrypt(d,...f){const{nonceLength:h}=l,m=i(h),g=l(c,m,...u).encrypt(d,...f),w=(0,r.concatBytes)(m,g);return g.fill(0),w},decrypt(d,...f){const{nonceLength:h}=l,m=d.subarray(0,h),g=d.subarray(h);return l(c,m,...u).decrypt(g,...f)}})};const e=Sh,n=sn,r=ar;function i(l=32){if(e.crypto&&typeof e.crypto.getRandomValues=="function")return e.crypto.getRandomValues(new Uint8Array(l));if(e.crypto&&typeof e.crypto.randomBytes=="function")return e.crypto.randomBytes(l);throw new Error("crypto.getRandomValues must be defined")}function s(){if(e.crypto&&typeof e.crypto.subtle=="object"&&e.crypto.subtle!=null)return e.crypto.subtle;throw new Error("crypto.subtle must be defined")}t.utils={async encrypt(l,c,u,d){const f=s(),h=await f.importKey("raw",l,c,!0,["encrypt"]),m=await f.encrypt(u,h,d);return new Uint8Array(m)},async decrypt(l,c,u,d){const f=s(),h=await f.importKey("raw",l,c,!0,["decrypt"]),m=await f.decrypt(u,h,d);return new Uint8Array(m)}};const o={CBC:"AES-CBC",CTR:"AES-CTR",GCM:"AES-GCM"};function a(l){return(c,u,d)=>{(0,n.bytes)(c),(0,n.bytes)(u);const f={name:l,length:8*c.length},h=function(m,g,w){if(m===o.CBC)return{name:o.CBC,iv:g};if(m===o.CTR)return{name:o.CTR,counter:g,length:64};if(m===o.GCM)return w?{name:o.GCM,iv:g,additionalData:w}:{name:o.GCM,iv:g};throw new Error("unknown aes block mode")}(l,u,d);return{encrypt:m=>((0,n.bytes)(m),t.utils.encrypt(c,f,h,m)),decrypt:m=>((0,n.bytes)(m),t.utils.decrypt(c,f,h,m))}}}t.cbc=a(o.CBC),t.ctr=a(o.CTR),t.gcm=a(o.GCM)}(pb);var zP={},Nt={},ps={},er={};function b0(t){if(!Number.isSafeInteger(t)||t<0)throw new Error(`positive integer expected, not ${t}`)}function VP(t){if(typeof t!="boolean")throw new Error(`boolean expected, not ${t}`)}function GP(t){return t instanceof Uint8Array||t!=null&&typeof t=="object"&&t.constructor.name==="Uint8Array"}function gb(t,...e){if(!GP(t))throw new Error("Uint8Array expected");if(e.length>0&&!e.includes(t.length))throw new Error(`Uint8Array expected of length ${e}, not of length=${t.length}`)}function WP(t){if(typeof t!="function"||typeof t.create!="function")throw new Error("Hash should be wrapped by utils.wrapConstructor");b0(t.outputLen),b0(t.blockLen)}function qP(t,e=!0){if(t.destroyed)throw new Error("Hash instance has been destroyed");if(e&&t.finished)throw new Error("Hash#digest() has already been called")}function QP(t,e){gb(t);const n=e.outputLen;if(t.length<n)throw new Error(`digestInto() expects output buffer of length at least ${n}`)}Object.defineProperty(er,"__esModule",{value:!0}),er.isBytes=GP,er.number=b0,er.bool=VP,er.bytes=gb,er.hash=WP,er.exists=qP,er.output=QP;const DB={number:b0,bool:VP,bytes:gb,hash:WP,exists:qP,output:QP};er.default=DB;var Rs={},Ch={};Object.defineProperty(Ch,"__esModule",{value:!0}),Ch.crypto=void 0,Ch.crypto=typeof globalThis=="object"&&"crypto"in globalThis?globalThis.crypto:void 0,function(t){Object.defineProperty(t,"__esModule",{value:!0}),t.Hash=t.nextTick=t.byteSwapIfBE=t.byteSwap=t.isLE=t.rotl=t.rotr=t.createView=t.u32=t.u8=void 0,t.isBytes=function(c){return c instanceof Uint8Array||c!=null&&typeof c=="object"&&c.constructor.name==="Uint8Array"},t.byteSwap32=function(c){for(let u=0;u<c.length;u++)c[u]=(0,t.byteSwap)(c[u])},t.bytesToHex=function(c){(0,n.bytes)(c);let u="";for(let d=0;d<c.length;d++)u+=r[c[d]];return u},t.hexToBytes=function(c){if(typeof c!="string")throw new Error("hex string expected, got "+typeof c);const u=c.length,d=u/2;if(u%2)throw new Error("padded hex string expected, got unpadded hex of length "+u);const f=new Uint8Array(d);for(let h=0,m=0;h<d;h++,m+=2){const g=s(c.charCodeAt(m)),w=s(c.charCodeAt(m+1));if(g===void 0||w===void 0){const p=c[m]+c[m+1];throw new Error('hex string expected, got non-hex character "'+p+'" at index '+m)}f[h]=16*g+w}return f},t.asyncLoop=async function(c,u,d){let f=Date.now();for(let h=0;h<c;h++){d(h);const m=Date.now()-f;m>=0&&m<u||(await(0,t.nextTick)(),f+=m)}},t.utf8ToBytes=o,t.toBytes=a,t.concatBytes=function(...c){let u=0;for(let f=0;f<c.length;f++){const h=c[f];(0,n.bytes)(h),u+=h.length}const d=new Uint8Array(u);for(let f=0,h=0;f<c.length;f++){const m=c[f];d.set(m,h),h+=m.length}return d},t.checkOpts=function(c,u){if(u!==void 0&&l.call(u)!=="[object Object]")throw new Error("Options should be object or undefined");return Object.assign(c,u)},t.wrapConstructor=function(c){const u=f=>c().update(a(f)).digest(),d=c();return u.outputLen=d.outputLen,u.blockLen=d.blockLen,u.create=()=>c(),u},t.wrapConstructorWithOpts=function(c){const u=(f,h)=>c(h).update(a(f)).digest(),d=c({});return u.outputLen=d.outputLen,u.blockLen=d.blockLen,u.create=f=>c(f),u},t.wrapXOFConstructorWithOpts=function(c){const u=(f,h)=>c(h).update(a(f)).digest(),d=c({});return u.outputLen=d.outputLen,u.blockLen=d.blockLen,u.create=f=>c(f),u},t.randomBytes=function(c=32){if(e.crypto&&typeof e.crypto.getRandomValues=="function")return e.crypto.getRandomValues(new Uint8Array(c));if(e.crypto&&typeof e.crypto.randomBytes=="function")return e.crypto.randomBytes(c);throw new Error("crypto.getRandomValues must be defined")};const e=Ch,n=er;t.u8=c=>new Uint8Array(c.buffer,c.byteOffset,c.byteLength),t.u32=c=>new Uint32Array(c.buffer,c.byteOffset,Math.floor(c.byteLength/4)),t.createView=c=>new DataView(c.buffer,c.byteOffset,c.byteLength),t.rotr=(c,u)=>c<<32-u|c>>>u,t.rotl=(c,u)=>c<<u|c>>>32-u>>>0,t.isLE=new Uint8Array(new Uint32Array([287454020]).buffer)[0]===68,t.byteSwap=c=>c<<24&4278190080|c<<8&16711680|c>>>8&65280|c>>>24&255,t.byteSwapIfBE=t.isLE?c=>c:c=>(0,t.byteSwap)(c);const r=Array.from({length:256},(c,u)=>u.toString(16).padStart(2,"0")),i={_0:48,_9:57,_A:65,_F:70,_a:97,_f:102};function s(c){return c>=i._0&&c<=i._9?c-i._0:c>=i._A&&c<=i._F?c-(i._A-10):c>=i._a&&c<=i._f?c-(i._a-10):void 0}function o(c){if(typeof c!="string")throw new Error("utf8ToBytes expected string, got "+typeof c);return new Uint8Array(new TextEncoder().encode(c))}function a(c){return typeof c=="string"&&(c=o(c)),(0,n.bytes)(c),c}t.nextTick=async()=>{},t.Hash=class{clone(){return this._cloneInto()}};const l={}.toString}(Rs),Object.defineProperty(ps,"__esModule",{value:!0}),ps.HashMD=ps.Maj=ps.Chi=void 0;const Hm=er,ju=Rs;ps.Chi=(t,e,n)=>t&e^~t&n;ps.Maj=(t,e,n)=>t&e^t&n^e&n;ps.HashMD=class extends ju.Hash{constructor(t,e,n,r){super(),this.blockLen=t,this.outputLen=e,this.padOffset=n,this.isLE=r,this.finished=!1,this.length=0,this.pos=0,this.destroyed=!1,this.buffer=new Uint8Array(t),this.view=(0,ju.createView)(this.buffer)}update(t){(0,Hm.exists)(this);const{view:e,buffer:n,blockLen:r}=this,i=(t=(0,ju.toBytes)(t)).length;for(let s=0;s<i;){const o=Math.min(r-this.pos,i-s);if(o!==r)n.set(t.subarray(s,s+o),this.pos),this.pos+=o,s+=o,this.pos===r&&(this.process(e,0),this.pos=0);else{const a=(0,ju.createView)(t);for(;r<=i-s;s+=r)this.process(a,s)}}return this.length+=t.length,this.roundClean(),this}digestInto(t){(0,Hm.exists)(this),(0,Hm.output)(t,this),this.finished=!0;const{buffer:e,view:n,blockLen:r,isLE:i}=this;let{pos:s}=this;e[s++]=128,this.buffer.subarray(s).fill(0),this.padOffset>r-s&&(this.process(n,0),s=0);for(let u=s;u<r;u++)e[u]=0;(function(u,d,f,h){if(typeof u.setBigUint64=="function")return u.setBigUint64(d,f,h);const m=BigInt(32),g=BigInt(4294967295),w=Number(f>>m&g),p=Number(f&g),v=h?4:0,y=h?0:4;u.setUint32(d+v,w,h),u.setUint32(d+y,p,h)})(n,r-8,BigInt(8*this.length),i),this.process(n,0);const o=(0,ju.createView)(t),a=this.outputLen;if(a%4)throw new Error("_sha2: outputLen should be aligned to 32bit");const l=a/4,c=this.get();if(l>c.length)throw new Error("_sha2: outputLen bigger than state");for(let u=0;u<l;u++)o.setUint32(4*u,c[u],i)}digest(){const{buffer:t,outputLen:e}=this;this.digestInto(t);const n=t.slice(0,e);return this.destroy(),n}_cloneInto(t){t||(t=new this.constructor),t.set(...this.get());const{blockLen:e,buffer:n,length:r,finished:i,destroyed:s,pos:o}=this;return t.length=r,t.pos=o,t.finished=i,t.destroyed=s,r%e&&t.buffer.set(n),t}};var ke={};Object.defineProperty(ke,"__esModule",{value:!0}),ke.add5L=ke.add5H=ke.add4H=ke.add4L=ke.add3H=ke.add3L=ke.rotlBL=ke.rotlBH=ke.rotlSL=ke.rotlSH=ke.rotr32L=ke.rotr32H=ke.rotrBL=ke.rotrBH=ke.rotrSL=ke.rotrSH=ke.shrSL=ke.shrSH=ke.toBig=void 0,ke.fromBig=mb,ke.split=YP,ke.add=uT;const xh=BigInt(2**32-1),gw=BigInt(32);function mb(t,e=!1){return e?{h:Number(t&xh),l:Number(t>>gw&xh)}:{h:0|Number(t>>gw&xh),l:0|Number(t&xh)}}function YP(t,e=!1){let n=new Uint32Array(t.length),r=new Uint32Array(t.length);for(let i=0;i<t.length;i++){const{h:s,l:o}=mb(t[i],e);[n[i],r[i]]=[s,o]}return[n,r]}const JP=(t,e)=>BigInt(t>>>0)<<gw|BigInt(e>>>0);ke.toBig=JP;const ZP=(t,e,n)=>t>>>n;ke.shrSH=ZP;const XP=(t,e,n)=>t<<32-n|e>>>n;ke.shrSL=XP;const eT=(t,e,n)=>t>>>n|e<<32-n;ke.rotrSH=eT;const tT=(t,e,n)=>t<<32-n|e>>>n;ke.rotrSL=tT;const nT=(t,e,n)=>t<<64-n|e>>>n-32;ke.rotrBH=nT;const rT=(t,e,n)=>t>>>n-32|e<<64-n;ke.rotrBL=rT;const iT=(t,e)=>e;ke.rotr32H=iT;const sT=(t,e)=>t;ke.rotr32L=sT;const oT=(t,e,n)=>t<<n|e>>>32-n;ke.rotlSH=oT;const aT=(t,e,n)=>e<<n|t>>>32-n;ke.rotlSL=aT;const lT=(t,e,n)=>e<<n-32|t>>>64-n;ke.rotlBH=lT;const cT=(t,e,n)=>t<<n-32|e>>>64-n;function uT(t,e,n,r){const i=(e>>>0)+(r>>>0);return{h:t+n+(i/2**32|0)|0,l:0|i}}ke.rotlBL=cT;const dT=(t,e,n)=>(t>>>0)+(e>>>0)+(n>>>0);ke.add3L=dT;const fT=(t,e,n,r)=>e+n+r+(t/2**32|0)|0;ke.add3H=fT;const hT=(t,e,n,r)=>(t>>>0)+(e>>>0)+(n>>>0)+(r>>>0);ke.add4L=hT;const pT=(t,e,n,r,i)=>e+n+r+i+(t/2**32|0)|0;ke.add4H=pT;const gT=(t,e,n,r,i)=>(t>>>0)+(e>>>0)+(n>>>0)+(r>>>0)+(i>>>0);ke.add5L=gT;const mT=(t,e,n,r,i,s)=>e+n+r+i+s+(t/2**32|0)|0;ke.add5H=mT;const $B={fromBig:mb,split:YP,toBig:JP,shrSH:ZP,shrSL:XP,rotrSH:eT,rotrSL:tT,rotrBH:nT,rotrBL:rT,rotr32H:iT,rotr32L:sT,rotlSH:oT,rotlSL:aT,rotlBH:lT,rotlBL:cT,add:uT,add3L:dT,add3H:fT,add4L:hT,add4H:pT,add5H:mT,add5L:gT};ke.default=$B,Object.defineProperty(Nt,"__esModule",{value:!0}),Nt.sha384=Nt.sha512_256=Nt.sha512_224=Nt.sha512=Nt.SHA384=Nt.SHA512_256=Nt.SHA512_224=Nt.SHA512=void 0;const UB=ps,Te=ke,kh=Rs,[FB,jB]=Te.default.split(["0x428a2f98d728ae22","0x7137449123ef65cd","0xb5c0fbcfec4d3b2f","0xe9b5dba58189dbbc","0x3956c25bf348b538","0x59f111f1b605d019","0x923f82a4af194f9b","0xab1c5ed5da6d8118","0xd807aa98a3030242","0x12835b0145706fbe","0x243185be4ee4b28c","0x550c7dc3d5ffb4e2","0x72be5d74f27b896f","0x80deb1fe3b1696b1","0x9bdc06a725c71235","0xc19bf174cf692694","0xe49b69c19ef14ad2","0xefbe4786384f25e3","0x0fc19dc68b8cd5b5","0x240ca1cc77ac9c65","0x2de92c6f592b0275","0x4a7484aa6ea6e483","0x5cb0a9dcbd41fbd4","0x76f988da831153b5","0x983e5152ee66dfab","0xa831c66d2db43210","0xb00327c898fb213f","0xbf597fc7beef0ee4","0xc6e00bf33da88fc2","0xd5a79147930aa725","0x06ca6351e003826f","0x142929670a0e6e70","0x27b70a8546d22ffc","0x2e1b21385c26c926","0x4d2c6dfc5ac42aed","0x53380d139d95b3df","0x650a73548baf63de","0x766a0abb3c77b2a8","0x81c2c92e47edaee6","0x92722c851482353b","0xa2bfe8a14cf10364","0xa81a664bbc423001","0xc24b8b70d0f89791","0xc76c51a30654be30","0xd192e819d6ef5218","0xd69906245565a910","0xf40e35855771202a","0x106aa07032bbd1b8","0x19a4c116b8d2d0c8","0x1e376c085141ab53","0x2748774cdf8eeb99","0x34b0bcb5e19b48a8","0x391c0cb3c5c95a63","0x4ed8aa4ae3418acb","0x5b9cca4f7763e373","0x682e6ff3d6b2b8a3","0x748f82ee5defb2fc","0x78a5636f43172f60","0x84c87814a1f0ab72","0x8cc702081a6439ec","0x90befffa23631e28","0xa4506cebde82bde9","0xbef9a3f7b2c67915","0xc67178f2e372532b","0xca273eceea26619c","0xd186b8c721c0c207","0xeada7dd6cde0eb1e","0xf57d4f7fee6ed178","0x06f067aa72176fba","0x0a637dc5a2c898a6","0x113f9804bef90dae","0x1b710b35131c471b","0x28db77f523047d84","0x32caab7b40c72493","0x3c9ebe0a15c9bebc","0x431d67c49c100d4c","0x4cc5d4becb3e42b6","0x597f299cfc657e2a","0x5fcb6fab3ad6faec","0x6c44198c4a475817"].map(t=>BigInt(t))),Bs=new Uint32Array(80),Ds=new Uint32Array(80);class Ff extends UB.HashMD{constructor(){super(128,64,16,!1),this.Ah=1779033703,this.Al=-205731576,this.Bh=-1150833019,this.Bl=-2067093701,this.Ch=1013904242,this.Cl=-23791573,this.Dh=-1521486534,this.Dl=1595750129,this.Eh=1359893119,this.El=-1377402159,this.Fh=-1694144372,this.Fl=725511199,this.Gh=528734635,this.Gl=-79577749,this.Hh=1541459225,this.Hl=327033209}get(){const{Ah:e,Al:n,Bh:r,Bl:i,Ch:s,Cl:o,Dh:a,Dl:l,Eh:c,El:u,Fh:d,Fl:f,Gh:h,Gl:m,Hh:g,Hl:w}=this;return[e,n,r,i,s,o,a,l,c,u,d,f,h,m,g,w]}set(e,n,r,i,s,o,a,l,c,u,d,f,h,m,g,w){this.Ah=0|e,this.Al=0|n,this.Bh=0|r,this.Bl=0|i,this.Ch=0|s,this.Cl=0|o,this.Dh=0|a,this.Dl=0|l,this.Eh=0|c,this.El=0|u,this.Fh=0|d,this.Fl=0|f,this.Gh=0|h,this.Gl=0|m,this.Hh=0|g,this.Hl=0|w}process(e,n){for(let y=0;y<16;y++,n+=4)Bs[y]=e.getUint32(n),Ds[y]=e.getUint32(n+=4);for(let y=16;y<80;y++){const x=0|Bs[y-15],T=0|Ds[y-15],B=Te.default.rotrSH(x,T,1)^Te.default.rotrSH(x,T,8)^Te.default.shrSH(x,T,7),j=Te.default.rotrSL(x,T,1)^Te.default.rotrSL(x,T,8)^Te.default.shrSL(x,T,7),M=0|Bs[y-2],K=0|Ds[y-2],U=Te.default.rotrSH(M,K,19)^Te.default.rotrBH(M,K,61)^Te.default.shrSH(M,K,6),W=Te.default.rotrSL(M,K,19)^Te.default.rotrBL(M,K,61)^Te.default.shrSL(M,K,6),z=Te.default.add4L(j,W,Ds[y-7],Ds[y-16]),$=Te.default.add4H(z,B,U,Bs[y-7],Bs[y-16]);Bs[y]=0|$,Ds[y]=0|z}let{Ah:r,Al:i,Bh:s,Bl:o,Ch:a,Cl:l,Dh:c,Dl:u,Eh:d,El:f,Fh:h,Fl:m,Gh:g,Gl:w,Hh:p,Hl:v}=this;for(let y=0;y<80;y++){const x=Te.default.rotrSH(d,f,14)^Te.default.rotrSH(d,f,18)^Te.default.rotrBH(d,f,41),T=Te.default.rotrSL(d,f,14)^Te.default.rotrSL(d,f,18)^Te.default.rotrBL(d,f,41),B=d&h^~d&g,j=f&m^~f&w,M=Te.default.add5L(v,T,j,jB[y],Ds[y]),K=Te.default.add5H(M,p,x,B,FB[y],Bs[y]),U=0|M,W=Te.default.rotrSH(r,i,28)^Te.default.rotrBH(r,i,34)^Te.default.rotrBH(r,i,39),z=Te.default.rotrSL(r,i,28)^Te.default.rotrBL(r,i,34)^Te.default.rotrBL(r,i,39),$=r&s^r&a^s&a,N=i&o^i&l^o&l;p=0|g,v=0|w,g=0|h,w=0|m,h=0|d,m=0|f,{h:d,l:f}=Te.default.add(0|c,0|u,0|K,0|U),c=0|a,u=0|l,a=0|s,l=0|o,s=0|r,o=0|i;const C=Te.default.add3L(U,z,N);r=Te.default.add3H(C,K,W,$),i=0|C}({h:r,l:i}=Te.default.add(0|this.Ah,0|this.Al,0|r,0|i)),{h:s,l:o}=Te.default.add(0|this.Bh,0|this.Bl,0|s,0|o),{h:a,l}=Te.default.add(0|this.Ch,0|this.Cl,0|a,0|l),{h:c,l:u}=Te.default.add(0|this.Dh,0|this.Dl,0|c,0|u),{h:d,l:f}=Te.default.add(0|this.Eh,0|this.El,0|d,0|f),{h,l:m}=Te.default.add(0|this.Fh,0|this.Fl,0|h,0|m),{h:g,l:w}=Te.default.add(0|this.Gh,0|this.Gl,0|g,0|w),{h:p,l:v}=Te.default.add(0|this.Hh,0|this.Hl,0|p,0|v),this.set(r,i,s,o,a,l,c,u,d,f,h,m,g,w,p,v)}roundClean(){Bs.fill(0),Ds.fill(0)}destroy(){this.buffer.fill(0),this.set(0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0)}}Nt.SHA512=Ff;class yT extends Ff{constructor(){super(),this.Ah=-1942145080,this.Al=424955298,this.Bh=1944164710,this.Bl=-1982016298,this.Ch=502970286,this.Cl=855612546,this.Dh=1738396948,this.Dl=1479516111,this.Eh=258812777,this.El=2077511080,this.Fh=2011393907,this.Fl=79989058,this.Gh=1067287976,this.Gl=1780299464,this.Hh=286451373,this.Hl=-1848208735,this.outputLen=28}}Nt.SHA512_224=yT;class vT extends Ff{constructor(){super(),this.Ah=573645204,this.Al=-64227540,this.Bh=-1621794909,this.Bl=-934517566,this.Ch=596883563,this.Cl=1867755857,this.Dh=-1774684391,this.Dl=1497426621,this.Eh=-1775747358,this.El=-1467023389,this.Fh=-1101128155,this.Fl=1401305490,this.Gh=721525244,this.Gl=746961066,this.Hh=246885852,this.Hl=-2117784414,this.outputLen=32}}Nt.SHA512_256=vT;class $A extends Ff{constructor(){super(),this.Ah=-876896931,this.Al=-1056596264,this.Bh=1654270250,this.Bl=914150663,this.Ch=-1856437926,this.Cl=812702999,this.Dh=355462360,this.Dl=-150054599,this.Eh=1731405415,this.El=-4191439,this.Fh=-1900787065,this.Fl=1750603025,this.Gh=-619958771,this.Gl=1694076839,this.Hh=1203062813,this.Hl=-1090891868,this.outputLen=48}}Nt.SHA384=$A,Nt.sha512=(0,kh.wrapConstructor)(()=>new Ff),Nt.sha512_224=(0,kh.wrapConstructor)(()=>new yT),Nt.sha512_256=(0,kh.wrapConstructor)(()=>new vT),Nt.sha384=(0,kh.wrapConstructor)(()=>new $A);var mw={},Kl={},We={},Re={};Object.defineProperty(Re,"__esModule",{value:!0}),Re.notImplemented=Re.bitMask=void 0,Re.isBytes=E0,Re.abytes=A0,Re.abool=function(t,e){if(typeof e!="boolean")throw new Error(`${t} must be valid boolean, got "${e}".`)},Re.bytesToHex=Km,Re.numberToHexUnpadded=UA,Re.hexToNumber=zm,Re.hexToBytes=mp,Re.bytesToNumberBE=function(t){return zm(Km(t))},Re.bytesToNumberLE=function(t){return A0(t),zm(Km(Uint8Array.from(t).reverse()))},Re.numberToBytesBE=jA,Re.numberToBytesLE=function(t,e){return jA(t,e).reverse()},Re.numberToVarBytesBE=function(t){return mp(UA(t))},Re.ensureBytes=function(t,e,n){let r;if(typeof e=="string")try{r=mp(e)}catch(s){throw new Error(`${t} must be valid hex string, got "${e}". Cause: ${s}`)}else{if(!E0(e))throw new Error(`${t} must be hex string or Uint8Array`);r=Uint8Array.from(e)}const i=r.length;if(typeof n=="number"&&i!==n)throw new Error(`${t} expected ${n} bytes, got ${i}`);return r},Re.concatBytes=HA,Re.equalBytes=function(t,e){if(t.length!==e.length)return!1;let n=0;for(let r=0;r<t.length;r++)n|=t[r]^e[r];return n===0},Re.utf8ToBytes=function(t){if(typeof t!="string")throw new Error("utf8ToBytes expected string, got "+typeof t);return new Uint8Array(new TextEncoder().encode(t))},Re.inRange=KA,Re.aInRange=function(t,e,n,r){if(!KA(e,n,r))throw new Error(`expected valid ${t}: ${n} <= n < ${r}, got ${typeof e} ${e}`)},Re.bitLen=function(t){let e;for(e=0;t>yw;t>>=gp,e+=1);return e},Re.bitGet=function(t,e){return t>>BigInt(e)&gp},Re.bitSet=function(t,e,n){return t|(n?gp:yw)<<BigInt(e)},Re.createHmacDrbg=function(t,e,n){if(typeof t!="number"||t<2)throw new Error("hashLen must be a number");if(typeof e!="number"||e<2)throw new Error("qByteLen must be a number");if(typeof n!="function")throw new Error("hmacFn must be a function");let r=Gm(t),i=Gm(t),s=0;const o=()=>{r.fill(1),i.fill(0),s=0},a=(...u)=>n(i,r,...u),l=(u=Gm())=>{i=a(zA([0]),u),r=a(),u.length!==0&&(i=a(zA([1]),u),r=a())},c=()=>{if(s++>=1e3)throw new Error("drbg: tried 1000 values");let u=0;const d=[];for(;u<e;){r=a();const f=r.slice();d.push(f),u+=r.length}return HA(...d)};return(u,d)=>{let f;for(o(),l(u);!(f=d(c()));)l();return o(),f}},Re.validateObject=function(t,e,n={}){const r=(i,s,o)=>{const a=zB[s];if(typeof a!="function")throw new Error(`Invalid validator "${s}", expected function`);const l=t[i];if(!(o&&l===void 0||a(l,t)))throw new Error(`Invalid param ${String(i)}=${l} (${typeof l}), expected ${s}`)};for(const[i,s]of Object.entries(e))r(i,s,!1);for(const[i,s]of Object.entries(n))r(i,s,!0);return t},Re.memoized=function(t){const e=new WeakMap;return(n,...r)=>{const i=e.get(n);if(i!==void 0)return i;const s=t(n,...r);return e.set(n,s),s}};const yw=BigInt(0),gp=BigInt(1),HB=BigInt(2);function E0(t){return t instanceof Uint8Array||t!=null&&typeof t=="object"&&t.constructor.name==="Uint8Array"}function A0(t){if(!E0(t))throw new Error("Uint8Array expected")}const KB=Array.from({length:256},(t,e)=>e.toString(16).padStart(2,"0"));function Km(t){A0(t);let e="";for(let n=0;n<t.length;n++)e+=KB[t[n]];return e}function UA(t){const e=t.toString(16);return 1&e.length?`0${e}`:e}function zm(t){if(typeof t!="string")throw new Error("hex string expected, got "+typeof t);return BigInt(t===""?"0":`0x${t}`)}const Fi={_0:48,_9:57,_A:65,_F:70,_a:97,_f:102};function FA(t){return t>=Fi._0&&t<=Fi._9?t-Fi._0:t>=Fi._A&&t<=Fi._F?t-(Fi._A-10):t>=Fi._a&&t<=Fi._f?t-(Fi._a-10):void 0}function mp(t){if(typeof t!="string")throw new Error("hex string expected, got "+typeof t);const e=t.length,n=e/2;if(e%2)throw new Error("padded hex string expected, got unpadded hex of length "+e);const r=new Uint8Array(n);for(let i=0,s=0;i<n;i++,s+=2){const o=FA(t.charCodeAt(s)),a=FA(t.charCodeAt(s+1));if(o===void 0||a===void 0){const l=t[s]+t[s+1];throw new Error('hex string expected, got non-hex character "'+l+'" at index '+s)}r[i]=16*o+a}return r}function jA(t,e){return mp(t.toString(16).padStart(2*e,"0"))}function HA(...t){let e=0;for(let r=0;r<t.length;r++){const i=t[r];A0(i),e+=i.length}const n=new Uint8Array(e);for(let r=0,i=0;r<t.length;r++){const s=t[r];n.set(s,i),i+=s.length}return n}const Vm=t=>typeof t=="bigint"&&yw<=t;function KA(t,e,n){return Vm(t)&&Vm(e)&&Vm(n)&&e<=t&&t<n}Re.bitMask=t=>(HB<<BigInt(t-1))-gp;const Gm=t=>new Uint8Array(t),zA=t=>Uint8Array.from(t),zB={bigint:t=>typeof t=="bigint",function:t=>typeof t=="function",boolean:t=>typeof t=="boolean",string:t=>typeof t=="string",stringOrUint8Array:t=>typeof t=="string"||E0(t),isSafeInteger:t=>Number.isSafeInteger(t),array:t=>Array.isArray(t),field:(t,e)=>e.Fp.isValid(t),hash:t=>typeof t=="function"&&Number.isSafeInteger(t.outputLen)};Re.notImplemented=()=>{throw new Error("not implemented")},Object.defineProperty(We,"__esModule",{value:!0}),We.isNegativeLE=void 0,We.mod=Wn,We.pow=wT,We.pow2=function(t,e,n){let r=t;for(;e-- >Bt;)r*=r,r%=n;return r},We.invert=_h,We.tonelliShanks=bT,We.FpSqrt=WA,We.validateField=function(t){const e=GB.reduce((n,r)=>(n[r]="function",n),{ORDER:"bigint",MASK:"bigint",BYTES:"isSafeInteger",BITS:"isSafeInteger"});return(0,Kn.validateObject)(t,e)},We.FpPow=qA,We.FpInvertBatch=QA,We.FpDiv=function(t,e,n){return t.mul(e,typeof n=="bigint"?_h(n,t.ORDER):t.inv(n))},We.FpLegendre=YA,We.FpIsSquare=function(t){const e=YA(t.ORDER);return n=>{const r=e(t,n);return t.eql(r,t.ZERO)||t.eql(r,t.ONE)}},We.nLength=Wm,We.Field=function(t,e,n=!1,r={}){if(t<=Bt)throw new Error(`Expected Field ORDER > 0, got ${t}`);const{nBitLength:i,nByteLength:s}=Wm(t,e);if(s>2048)throw new Error("Field lengths over 2048 bytes are not supported");const o=WA(t),a=Object.freeze({ORDER:t,BITS:i,BYTES:s,MASK:(0,Kn.bitMask)(i),ZERO:Bt,ONE:et,create:l=>Wn(l,t),isValid:l=>{if(typeof l!="bigint")throw new Error("Invalid field element: expected bigint, got "+typeof l);return Bt<=l&&l<t},is0:l=>l===Bt,isOdd:l=>(l&et)===et,neg:l=>Wn(-l,t),eql:(l,c)=>l===c,sqr:l=>Wn(l*l,t),add:(l,c)=>Wn(l+c,t),sub:(l,c)=>Wn(l-c,t),mul:(l,c)=>Wn(l*c,t),pow:(l,c)=>qA(a,l,c),div:(l,c)=>Wn(l*_h(c,t),t),sqrN:l=>l*l,addN:(l,c)=>l+c,subN:(l,c)=>l-c,mulN:(l,c)=>l*c,inv:l=>_h(l,t),sqrt:r.sqrt||(l=>o(a,l)),invertBatch:l=>QA(a,l),cmov:(l,c,u)=>u?c:l,toBytes:l=>n?(0,Kn.numberToBytesLE)(l,s):(0,Kn.numberToBytesBE)(l,s),fromBytes:l=>{if(l.length!==s)throw new Error(`Fp.fromBytes: expected ${s}, got ${l.length}`);return n?(0,Kn.bytesToNumberLE)(l):(0,Kn.bytesToNumberBE)(l)}});return Object.freeze(a)},We.FpSqrtOdd=function(t,e){if(!t.isOdd)throw new Error("Field doesn't have isOdd");const n=t.sqrt(e);return t.isOdd(n)?n:t.neg(n)},We.FpSqrtEven=function(t,e){if(!t.isOdd)throw new Error("Field doesn't have isOdd");const n=t.sqrt(e);return t.isOdd(n)?t.neg(n):n},We.hashToPrivateScalar=function(t,e,n=!1){t=(0,Kn.ensureBytes)("privateHash",t);const r=t.length,i=Wm(e).nByteLength+8;if(i<24||r<i||r>1024)throw new Error(`hashToPrivateScalar: expected ${i}-1024 bytes of input, got ${r}`);const s=n?(0,Kn.bytesToNumberLE)(t):(0,Kn.bytesToNumberBE)(t);return Wn(s,e-et)+et},We.getFieldBytesLength=ww,We.getMinHashLength=JA,We.mapHashToField=function(t,e,n=!1){const r=t.length,i=ww(e),s=JA(e);if(r<16||r<s||r>1024)throw new Error(`expected ${s}-1024 bytes of input, got ${r}`);const o=Wn(n?(0,Kn.bytesToNumberBE)(t):(0,Kn.bytesToNumberLE)(t),e-et)+et;return n?(0,Kn.numberToBytesLE)(o,i):(0,Kn.numberToBytesBE)(o,i)};const Kn=Re,Bt=BigInt(0),et=BigInt(1),ro=BigInt(2),VB=BigInt(3),vw=BigInt(4),VA=BigInt(5),GA=BigInt(8);function Wn(t,e){const n=t%e;return n>=Bt?n:e+n}function wT(t,e,n){if(n<=Bt||e<Bt)throw new Error("Expected power/modulo > 0");if(n===et)return Bt;let r=et;for(;e>Bt;)e&et&&(r=r*t%n),t=t*t%n,e>>=et;return r}function _h(t,e){if(t===Bt||e<=Bt)throw new Error(`invert: expected positive integers, got n=${t} mod=${e}`);let n=Wn(t,e),r=e,i=Bt,s=et;for(;n!==Bt;){const o=r%n,a=i-s*(r/n);r=n,n=o,i=s,s=a}if(r!==et)throw new Error("invert: does not exist");return Wn(i,e)}function bT(t){const e=(t-et)/ro;let n,r,i;for(n=t-et,r=0;n%ro===Bt;n/=ro,r++);for(i=ro;i<t&&wT(i,e,t)!==t-et;i++);if(r===1){const o=(t+et)/vw;return function(a,l){const c=a.pow(l,o);if(!a.eql(a.sqr(c),l))throw new Error("Cannot find square root");return c}}const s=(n+et)/ro;return function(o,a){if(o.pow(a,e)===o.neg(o.ONE))throw new Error("Cannot find square root");let l=r,c=o.pow(o.mul(o.ONE,i),n),u=o.pow(a,s),d=o.pow(a,n);for(;!o.eql(d,o.ONE);){if(o.eql(d,o.ZERO))return o.ZERO;let f=1;for(let m=o.sqr(d);f<l&&!o.eql(m,o.ONE);f++)m=o.sqr(m);const h=o.pow(c,et<<BigInt(l-f-1));c=o.sqr(h),u=o.mul(u,h),d=o.mul(d,c),l=f}return u}}function WA(t){if(t%vw===VB){const e=(t+et)/vw;return function(n,r){const i=n.pow(r,e);if(!n.eql(n.sqr(i),r))throw new Error("Cannot find square root");return i}}if(t%GA===VA){const e=(t-VA)/GA;return function(n,r){const i=n.mul(r,ro),s=n.pow(i,e),o=n.mul(r,s),a=n.mul(n.mul(o,ro),s),l=n.mul(o,n.sub(a,n.ONE));if(!n.eql(n.sqr(l),r))throw new Error("Cannot find square root");return l}}return bT(t)}BigInt(9),BigInt(16);We.isNegativeLE=(t,e)=>(Wn(t,e)&et)===et;const GB=["create","isValid","is0","neg","inv","sqrt","sqr","eql","add","sub","mul","pow","div","addN","subN","mulN","sqrN"];function qA(t,e,n){if(n<Bt)throw new Error("Expected power > 0");if(n===Bt)return t.ONE;if(n===et)return e;let r=t.ONE,i=e;for(;n>Bt;)n&et&&(r=t.mul(r,i)),i=t.sqr(i),n>>=et;return r}function QA(t,e){const n=new Array(e.length),r=e.reduce((s,o,a)=>t.is0(o)?s:(n[a]=s,t.mul(s,o)),t.ONE),i=t.inv(r);return e.reduceRight((s,o,a)=>t.is0(o)?s:(n[a]=t.mul(s,n[a]),t.mul(s,o)),i),n}function YA(t){const e=(t-et)/ro;return(n,r)=>n.pow(r,e)}function Wm(t,e){const n=e!==void 0?e:t.toString(2).length;return{nBitLength:n,nByteLength:Math.ceil(n/8)}}function ww(t){if(typeof t!="bigint")throw new Error("field order must be bigint");const e=t.toString(2).length;return Math.ceil(e/8)}function JA(t){const e=ww(t);return e+Math.ceil(e/2)}Object.defineProperty(Kl,"__esModule",{value:!0}),Kl.wNAF=function(t,e){const n=(s,o)=>{const a=o.negate();return s?a:o},r=s=>{if(!Number.isSafeInteger(s)||s<=0||s>e)throw new Error(`Wrong window size=${s}, should be [1..${e}]`)},i=s=>(r(s),{windows:Math.ceil(e/s)+1,windowSize:2**(s-1)});return{constTimeNegate:n,unsafeLadder(s,o){let a=t.ZERO,l=s;for(;o>WB;)o&qm&&(a=a.add(l)),l=l.double(),o>>=qm;return a},precomputeWindow(s,o){const{windows:a,windowSize:l}=i(o),c=[];let u=s,d=u;for(let f=0;f<a;f++){d=u,c.push(d);for(let h=1;h<l;h++)d=d.add(u),c.push(d);u=d.double()}return c},wNAF(s,o,a){const{windows:l,windowSize:c}=i(s);let u=t.ZERO,d=t.BASE;const f=BigInt(2**s-1),h=2**s,m=BigInt(s);for(let g=0;g<l;g++){const w=g*c;let p=Number(a&f);a>>=m,p>c&&(p-=h,a+=qm);const v=w,y=w+Math.abs(p)-1,x=g%2!=0,T=p<0;p===0?d=d.add(n(x,o[v])):u=u.add(n(T,o[y]))}return{p:u,f:d}},wNAFCached(s,o,a){const l=eS.get(s)||1;let c=Qm.get(s);return c||(c=this.precomputeWindow(s,l),l!==1&&Qm.set(s,a(c))),this.wNAF(l,c,o)},setWindowSize(s,o){r(o),eS.set(s,o),Qm.delete(s)}}},Kl.pippenger=function(t,e,n,r){if(!Array.isArray(n)||!Array.isArray(r)||r.length!==n.length)throw new Error("arrays of points and scalars must have equal length");r.forEach((u,d)=>{if(!e.isValid(u))throw new Error(`wrong scalar at index ${d}`)}),n.forEach((u,d)=>{if(!(u instanceof t))throw new Error(`wrong point at index ${d}`)});const i=(0,XA.bitLen)(BigInt(n.length)),s=i>12?i-3:i>4?i-2:i?2:1,o=(1<<s)-1,a=new Array(o+1).fill(t.ZERO),l=Math.floor((e.BITS-1)/s)*s;let c=t.ZERO;for(let u=l;u>=0;u-=s){a.fill(t.ZERO);for(let f=0;f<r.length;f++){const h=r[f],m=Number(h>>BigInt(u)&BigInt(o));a[m]=a[m].add(n[f])}let d=t.ZERO;for(let f=a.length-1,h=t.ZERO;f>0;f--)h=h.add(a[f]),d=d.add(h);if(c=c.add(d),u!==0)for(let f=0;f<s;f++)c=c.double()}return c},Kl.validateBasic=function(t){return(0,ZA.validateField)(t.Fp),(0,XA.validateObject)(t,{n:"bigint",h:"bigint",Gx:"field",Gy:"field"},{nBitLength:"isSafeInteger",nByteLength:"isSafeInteger"}),Object.freeze({...(0,ZA.nLength)(t.n,t.nBitLength),...t,p:t.Fp.ORDER})};const ZA=We,XA=Re,WB=BigInt(0),qm=BigInt(1),Qm=new WeakMap,eS=new WeakMap;Object.defineProperty(mw,"__esModule",{value:!0}),mw.twistedEdwards=function(t){const e=function($){const N=(0,Ym.validateBasic)($);return Pn.validateObject($,{hash:"function",a:"bigint",d:"bigint",randomBytes:"function"},{adjustScalarBytes:"function",domain:"function",uvRatio:"function",mapToCurve:"function"}),Object.freeze({...N})}(t),{Fp:n,n:r,prehash:i,hash:s,randomBytes:o,nByteLength:a,h:l}=e,c=Ph<<BigInt(8*a)-Tn,u=n.create,d=(0,tS.Field)(e.n,e.nBitLength),f=e.uvRatio||(($,N)=>{try{return{isValid:!0,value:n.sqrt($*n.inv(N))}}catch{return{isValid:!1,value:Nr}}}),h=e.adjustScalarBytes||($=>$),m=e.domain||(($,N,C)=>{if((0,zn.abool)("phflag",C),N.length||C)throw new Error("Contexts/pre-hash are not supported");return $});function g($,N){Pn.aInRange("coordinate "+$,N,Nr,c)}function w($){if(!($ instanceof y))throw new Error("ExtendedPoint expected")}const p=(0,zn.memoized)(($,N)=>{const{ex:C,ey:O,ez:D}=$,b=$.is0();N==null&&(N=b?qB:n.inv(D));const E=u(C*N),_=u(O*N),I=u(D*N);if(b)return{x:Nr,y:Tn};if(I!==Tn)throw new Error("invZ was invalid");return{x:E,y:_}}),v=(0,zn.memoized)($=>{const{a:N,d:C}=e;if($.is0())throw new Error("bad point: ZERO");const{ex:O,ey:D,ez:b,et:E}=$,_=u(O*O),I=u(D*D),A=u(b*b),S=u(A*A),P=u(_*N);if(u(A*u(P+I))!==u(S+u(C*u(_*I))))throw new Error("bad point: equation left != right (1)");if(u(O*D)!==u(b*E))throw new Error("bad point: equation left != right (2)");return!0});class y{constructor(N,C,O,D){this.ex=N,this.ey=C,this.ez=O,this.et=D,g("x",N),g("y",C),g("z",O),g("t",D),Object.freeze(this)}get x(){return this.toAffine().x}get y(){return this.toAffine().y}static fromAffine(N){if(N instanceof y)throw new Error("extended point not allowed");const{x:C,y:O}=N||{};return g("x",C),g("y",O),new y(C,O,Tn,u(C*O))}static normalizeZ(N){const C=n.invertBatch(N.map(O=>O.ez));return N.map((O,D)=>O.toAffine(C[D])).map(y.fromAffine)}static msm(N,C){return(0,Ym.pippenger)(y,d,N,C)}_setWindowSize(N){B.setWindowSize(this,N)}assertValidity(){v(this)}equals(N){w(N);const{ex:C,ey:O,ez:D}=this,{ex:b,ey:E,ez:_}=N,I=u(C*_),A=u(b*D),S=u(O*_),P=u(E*D);return I===A&&S===P}is0(){return this.equals(y.ZERO)}negate(){return new y(u(-this.ex),this.ey,this.ez,u(-this.et))}double(){const{a:N}=e,{ex:C,ey:O,ez:D}=this,b=u(C*C),E=u(O*O),_=u(Ph*u(D*D)),I=u(N*b),A=C+O,S=u(u(A*A)-b-E),P=I+E,R=P-_,L=I-E,F=u(S*R),V=u(P*L),q=u(S*L),Y=u(R*P);return new y(F,V,Y,q)}add(N){w(N);const{a:C,d:O}=e,{ex:D,ey:b,ez:E,et:_}=this,{ex:I,ey:A,ez:S,et:P}=N;if(C===BigInt(-1)){const pe=u((b-D)*(A+I)),Ae=u((b+D)*(A-I)),be=u(Ae-pe);if(be===Nr)return this.double();const Le=u(E*Ph*P),Ke=u(_*Ph*S),xe=Ke+Le,Oe=Ae+pe,Ue=Ke-Le,Tt=u(xe*be),lr=u(Oe*Ue),Fg=u(xe*Ue),jg=u(be*Oe);return new y(Tt,lr,jg,Fg)}const R=u(D*I),L=u(b*A),F=u(_*O*P),V=u(E*S),q=u((D+b)*(I+A)-R-L),Y=V-F,te=V+F,ie=u(L-C*R),le=u(q*Y),he=u(te*ie),Ee=u(q*ie),de=u(Y*te);return new y(le,he,de,Ee)}subtract(N){return this.add(N.negate())}wNAF(N){return B.wNAFCached(this,N,y.normalizeZ)}multiply(N){const C=N;Pn.aInRange("scalar",C,Tn,r);const{p:O,f:D}=this.wNAF(C);return y.normalizeZ([O,D])[0]}multiplyUnsafe(N){const C=N;return Pn.aInRange("scalar",C,Nr,r),C===Nr?T:this.equals(T)||C===Tn?this:this.equals(x)?this.wNAF(C).p:B.unsafeLadder(this,C)}isSmallOrder(){return this.multiplyUnsafe(l).is0()}isTorsionFree(){return B.unsafeLadder(this,r).is0()}toAffine(N){return p(this,N)}clearCofactor(){const{h:N}=e;return N===Tn?this:this.multiplyUnsafe(N)}static fromHex(N,C=!1){const{d:O,a:D}=e,b=n.BYTES;N=(0,zn.ensureBytes)("pointHex",N,b),(0,zn.abool)("zip215",C);const E=N.slice(),_=N[b-1];E[b-1]=-129&_;const I=Pn.bytesToNumberLE(E),A=C?c:n.ORDER;Pn.aInRange("pointHex.y",I,Nr,A);const S=u(I*I),P=u(S-Tn),R=u(O*S-D);let{isValid:L,value:F}=f(P,R);if(!L)throw new Error("Point.fromHex: invalid y coordinate");const V=(F&Tn)===Tn,q=(128&_)!=0;if(!C&&F===Nr&&q)throw new Error("Point.fromHex: x=0 and x_0=1");return q!==V&&(F=u(-F)),y.fromAffine({x:F,y:I})}static fromPrivateKey(N){return K(N).point}toRawBytes(){const{x:N,y:C}=this.toAffine(),O=Pn.numberToBytesLE(C,n.BYTES);return O[O.length-1]|=N&Tn?128:0,O}toHex(){return Pn.bytesToHex(this.toRawBytes())}}y.BASE=new y(e.Gx,e.Gy,Tn,u(e.Gx*e.Gy)),y.ZERO=new y(Nr,Tn,Tn,Nr);const{BASE:x,ZERO:T}=y,B=(0,Ym.wNAF)(y,8*a);function j($){return(0,tS.mod)($,r)}function M($){return j(Pn.bytesToNumberLE($))}function K($){const N=a;$=(0,zn.ensureBytes)("private key",$,N);const C=(0,zn.ensureBytes)("hashed private key",s($),2*N),O=h(C.slice(0,N)),D=C.slice(N,2*N),b=M(O),E=x.multiply(b),_=E.toRawBytes();return{head:O,prefix:D,scalar:b,point:E,pointBytes:_}}function U($=new Uint8Array,...N){const C=Pn.concatBytes(...N);return M(s(m(C,(0,zn.ensureBytes)("context",$),!!i)))}const W=QB;return x._setWindowSize(8),{CURVE:e,getPublicKey:function($){return K($).pointBytes},sign:function($,N,C={}){$=(0,zn.ensureBytes)("message",$),i&&($=i($));const{prefix:O,scalar:D,pointBytes:b}=K(N),E=U(C.context,O,$),_=x.multiply(E).toRawBytes(),I=j(E+U(C.context,_,b,$)*D);Pn.aInRange("signature.s",I,Nr,r);const A=Pn.concatBytes(_,Pn.numberToBytesLE(I,n.BYTES));return(0,zn.ensureBytes)("result",A,2*a)},verify:function($,N,C,O=W){const{context:D,zip215:b}=O,E=n.BYTES;$=(0,zn.ensureBytes)("signature",$,2*E),N=(0,zn.ensureBytes)("message",N),b!==void 0&&(0,zn.abool)("zip215",b),i&&(N=i(N));const _=Pn.bytesToNumberLE($.slice(E,2*E));let I,A,S;try{I=y.fromHex(C,b),A=y.fromHex($.slice(0,E),b),S=x.multiplyUnsafe(_)}catch{return!1}if(!b&&I.isSmallOrder())return!1;const P=U(D,A.toRawBytes(),I.toRawBytes(),N);return A.add(I.multiplyUnsafe(P)).subtract(S).clearCofactor().equals(y.ZERO)},ExtendedPoint:y,utils:{getExtendedPublicKey:K,randomPrivateKey:()=>o(n.BYTES),precompute:($=8,N=y.BASE)=>(N._setWindowSize($),N.multiply(BigInt(3)),N)}}};const Ym=Kl,tS=We,Pn=Re,zn=Re,Nr=BigInt(0),Tn=BigInt(1),Ph=BigInt(2),qB=BigInt(8),QB={zip215:!0};var qs={};Object.defineProperty(qs,"__esModule",{value:!0}),qs.expand_message_xmd=ET,qs.expand_message_xof=AT,qs.hash_to_field=Jm,qs.isogenyMap=function(t,e){const n=e.map(r=>Array.from(r).reverse());return(r,i)=>{const[s,o,a,l]=n.map(c=>c.reduce((u,d)=>t.add(t.mul(u,r),d)));return r=t.div(s,o),i=t.mul(i,t.div(a,l)),{x:r,y:i}}},qs.createHasher=function(t,e,n){if(typeof e!="function")throw new Error("mapToCurve() must be defined");return{hashToCurve(r,i){const s=Jm(r,2,{...n,DST:n.DST,...i}),o=t.fromAffine(e(s[0])),a=t.fromAffine(e(s[1])),l=o.add(a).clearCofactor();return l.assertValidity(),l},encodeToCurve(r,i){const s=Jm(r,1,{...n,DST:n.encodeDST,...i}),o=t.fromAffine(e(s[0])).clearCofactor();return o.assertValidity(),o},mapToCurve(r){if(!Array.isArray(r))throw new Error("mapToCurve: expected array of bigints");for(const s of r)if(typeof s!="bigint")throw new Error(`mapToCurve: expected array of bigints, got ${s} in array`);const i=t.fromAffine(e(r)).clearCofactor();return i.assertValidity(),i}}};const YB=We,rn=Re,JB=rn.bytesToNumberBE;function Qs(t,e){if(ef(t),ef(e),t<0||t>=1<<8*e)throw new Error(`bad I2OSP call: value=${t} length=${e}`);const n=Array.from({length:e}).fill(0);for(let r=e-1;r>=0;r--)n[r]=255&t,t>>>=8;return new Uint8Array(n)}function ZB(t,e){const n=new Uint8Array(t.length);for(let r=0;r<t.length;r++)n[r]=t[r]^e[r];return n}function ef(t){if(!Number.isSafeInteger(t))throw new Error("number expected")}function ET(t,e,n,r){(0,rn.abytes)(t),(0,rn.abytes)(e),ef(n),e.length>255&&(e=r((0,rn.concatBytes)((0,rn.utf8ToBytes)("H2C-OVERSIZE-DST-"),e)));const{outputLen:i,blockLen:s}=r,o=Math.ceil(n/i);if(n>65535||o>255)throw new Error("expand_message_xmd: invalid lenInBytes");const a=(0,rn.concatBytes)(e,Qs(e.length,1)),l=Qs(0,s),c=Qs(n,2),u=new Array(o),d=r((0,rn.concatBytes)(l,t,c,Qs(0,1),a));u[0]=r((0,rn.concatBytes)(d,Qs(1,1),a));for(let f=1;f<=o;f++){const h=[ZB(d,u[f-1]),Qs(f+1,1),a];u[f]=r((0,rn.concatBytes)(...h))}return(0,rn.concatBytes)(...u).slice(0,n)}function AT(t,e,n,r,i){if((0,rn.abytes)(t),(0,rn.abytes)(e),ef(n),e.length>255){const s=Math.ceil(2*r/8);e=i.create({dkLen:s}).update((0,rn.utf8ToBytes)("H2C-OVERSIZE-DST-")).update(e).digest()}if(n>65535||e.length>255)throw new Error("expand_message_xof: invalid lenInBytes");return i.create({dkLen:n}).update(t).update(Qs(n,2)).update(e).update(Qs(e.length,1)).digest()}function Jm(t,e,n){(0,rn.validateObject)(n,{DST:"stringOrUint8Array",p:"bigint",m:"isSafeInteger",k:"isSafeInteger",hash:"hash"});const{p:r,k:i,m:s,hash:o,expand:a,DST:l}=n;(0,rn.abytes)(t),ef(e);const c=typeof l=="string"?(0,rn.utf8ToBytes)(l):l,u=r.toString(2).length,d=Math.ceil((u+i)/8),f=e*s*d;let h;if(a==="xmd")h=ET(t,c,f,o);else if(a==="xof")h=AT(t,c,f,i,o);else{if(a!=="_internal_pass")throw new Error('expand must be "xmd" or "xof"');h=t}const m=new Array(e);for(let g=0;g<e;g++){const w=new Array(s);for(let p=0;p<s;p++){const v=d*(p+g*s),y=h.subarray(v,v+d);w[p]=(0,YB.mod)(JB(y),r)}m[g]=w}return m}var bw={};Object.defineProperty(bw,"__esModule",{value:!0}),bw.montgomery=function(t){const e=function(g){return(0,$s.validateObject)(g,{a:"bigint"},{montgomeryBits:"isSafeInteger",nByteLength:"isSafeInteger",adjustScalarBytes:"function",domain:"function",powPminus2:"function",Gu:"bigint"}),Object.freeze({...g})}(t),{P:n}=e,r=g=>(0,nS.mod)(g,n),i=e.montgomeryBits,s=Math.ceil(i/8),o=e.nByteLength,a=e.adjustScalarBytes||(g=>g),l=e.powPminus2||(g=>(0,nS.pow)(g,n-BigInt(2),n));function c(g,w,p){const v=r(g*(w-p));return[w=r(w-v),p=r(p+v)]}const u=(e.a-BigInt(2))/BigInt(4);function d(g){return(0,$s.numberToBytesLE)(r(g),s)}function f(g,w){const p=function(x){const T=(0,$s.ensureBytes)("u coordinate",x,s);return o===32&&(T[31]&=127),(0,$s.bytesToNumberLE)(T)}(w),v=function(x){const T=(0,$s.ensureBytes)("scalar",x),B=T.length;if(B!==s&&B!==o)throw new Error(`Expected ${s} or ${o} bytes, got ${B}`);return(0,$s.bytesToNumberLE)(a(T))}(g),y=function(x,T){(0,$s.aInRange)("u",x,wl,n),(0,$s.aInRange)("scalar",T,wl,n);const B=T,j=x;let M,K=Zm,U=wl,W=x,z=Zm,$=wl;for(let C=BigInt(i-1);C>=wl;C--){const O=B>>C&Zm;$^=O,M=c($,K,W),K=M[0],W=M[1],M=c($,U,z),U=M[0],z=M[1],$=O;const D=K+U,b=r(D*D),E=K-U,_=r(E*E),I=b-_,A=W+z,S=r((W-z)*D),P=r(A*E),R=S+P,L=S-P;W=r(R*R),z=r(j*r(L*L)),K=r(b*_),U=r(I*(b+r(u*I)))}M=c($,K,W),K=M[0],W=M[1],M=c($,U,z),U=M[0],z=M[1];const N=l(U);return r(K*N)}(p,v);if(y===wl)throw new Error("Invalid private or public key received");return d(y)}const h=d(e.Gu);function m(g){return f(g,h)}return{scalarMult:f,scalarMultBase:m,getSharedSecret:(g,w)=>f(g,w),getPublicKey:g=>m(g),utils:{randomPrivateKey:()=>e.randomBytes(e.nByteLength)},GuBytes:h}};const nS=We,$s=Re,wl=BigInt(0),Zm=BigInt(1);(function(t){Object.defineProperty(t,"__esModule",{value:!0}),t.hash_to_ristretto255=t.hashToRistretto255=t.RistrettoPoint=t.encodeToCurve=t.hashToCurve=t.edwardsToMontgomery=t.x25519=t.ed25519ph=t.ed25519ctx=t.ed25519=t.ED25519_TORSION_SUBGROUP=void 0,t.edwardsToMontgomeryPub=B,t.edwardsToMontgomeryPriv=function(P){const R=x.hash(P.subarray(0,32));return x.adjustScalarBytes(R).subarray(0,32)};const e=Nt,n=Rs,r=mw,i=qs,s=We,o=bw,a=Re,l=BigInt("57896044618658097711785492504343953926634992332820282019728792003956564819949"),c=BigInt("19681161376707505956807079304988542015446066515923890162744021073123829784752"),u=BigInt(0),d=BigInt(1),f=BigInt(2),h=BigInt(3),m=BigInt(5),g=BigInt(8);function w(P){const R=BigInt(10),L=BigInt(20),F=BigInt(40),V=BigInt(80),q=l,Y=P*P%q*P%q,te=(0,s.pow2)(Y,f,q)*Y%q,ie=(0,s.pow2)(te,d,q)*P%q,le=(0,s.pow2)(ie,m,q)*ie%q,he=(0,s.pow2)(le,R,q)*le%q,Ee=(0,s.pow2)(he,L,q)*he%q,de=(0,s.pow2)(Ee,F,q)*Ee%q,pe=(0,s.pow2)(de,V,q)*de%q,Ae=(0,s.pow2)(pe,V,q)*de%q,be=(0,s.pow2)(Ae,R,q)*le%q;return{pow_p_5_8:(0,s.pow2)(be,f,q)*P%q,b2:Y}}function p(P){return P[0]&=248,P[31]&=127,P[31]|=64,P}function v(P,R){const L=l,F=(0,s.mod)(R*R*R,L),V=w(P*(0,s.mod)(F*F*R,L)).pow_p_5_8;let q=(0,s.mod)(P*F*V,L);const Y=(0,s.mod)(R*q*q,L),te=q,ie=(0,s.mod)(q*c,L),le=Y===P,he=Y===(0,s.mod)(-P,L),Ee=Y===(0,s.mod)(-P*c,L);return le&&(q=te),(he||Ee)&&(q=ie),(0,s.isNegativeLE)(q,L)&&(q=(0,s.mod)(-q,L)),{isValid:le||he,value:q}}t.ED25519_TORSION_SUBGROUP=["0100000000000000000000000000000000000000000000000000000000000000","c7176a703d4dd84fba3c0b760d10670f2a2053fa2c39ccc64ec7fd7792ac037a","0000000000000000000000000000000000000000000000000000000000000080","26e8958fc2b227b045c3f489f2ef98f0d5dfac05d3c63339b13802886d53fc05","ecffffffffffffffffffffffffffffffffffffffffffffffffffffffffffff7f","26e8958fc2b227b045c3f489f2ef98f0d5dfac05d3c63339b13802886d53fc85","0000000000000000000000000000000000000000000000000000000000000000","c7176a703d4dd84fba3c0b760d10670f2a2053fa2c39ccc64ec7fd7792ac03fa"];const y=(0,s.Field)(l,void 0,!0),x={a:BigInt(-1),d:BigInt("37095705934669439343138083508754565189542113879843219016388785533085940283555"),Fp:y,n:BigInt("7237005577332262213973186563042994240857116359379907606001950938285454250989"),h:g,Gx:BigInt("15112221349535400772501151409588531511454012693041857206046113283949847762202"),Gy:BigInt("46316835694926478169428394003475163141307993866256225615783033603165251855960"),hash:e.sha512,randomBytes:n.randomBytes,adjustScalarBytes:p,uvRatio:v};function T(P,R,L){if(R.length>255)throw new Error("Context is too big");return(0,n.concatBytes)((0,n.utf8ToBytes)("SigEd25519 no Ed25519 collisions"),new Uint8Array([L?1:0,R.length]),R,P)}function B(P){const{y:R}=t.ed25519.ExtendedPoint.fromHex(P),L=BigInt(1);return y.toBytes(y.create((L+R)*y.inv(L-R)))}t.ed25519=(0,r.twistedEdwards)(x),t.ed25519ctx=(0,r.twistedEdwards)({...x,domain:T}),t.ed25519ph=(0,r.twistedEdwards)(Object.assign({},x,{domain:T,prehash:e.sha512})),t.x25519=(0,o.montgomery)({P:l,a:BigInt(486662),montgomeryBits:255,nByteLength:32,Gu:BigInt(9),powPminus2:P=>{const R=l,{pow_p_5_8:L,b2:F}=w(P);return(0,s.mod)((0,s.pow2)(L,h,R)*F,R)},adjustScalarBytes:p,randomBytes:n.randomBytes}),t.edwardsToMontgomery=B;const j=(y.ORDER+h)/g,M=y.pow(f,j),K=y.sqrt(y.neg(y.ONE)),U=(0,s.FpSqrtEven)(y,y.neg(BigInt(486664)));function W(P){const{xMn:R,xMd:L,yMn:F,yMd:V}=function(de){const pe=(y.ORDER-m)/g,Ae=BigInt(486662);let be=y.sqr(de);be=y.mul(be,f);let Le=y.add(be,y.ONE),Ke=y.neg(Ae),xe=y.sqr(Le),Oe=y.mul(xe,Le),Ue=y.mul(be,Ae);Ue=y.mul(Ue,Ke),Ue=y.add(Ue,xe),Ue=y.mul(Ue,Ke);let Tt=y.sqr(Oe);xe=y.sqr(Tt),Tt=y.mul(Tt,Oe),Tt=y.mul(Tt,Ue),xe=y.mul(xe,Tt);let lr=y.pow(xe,pe);lr=y.mul(lr,Tt);let Fg=y.mul(lr,K);xe=y.sqr(lr),xe=y.mul(xe,Oe);let jg=y.eql(xe,Ue),Xb=y.cmov(Fg,lr,jg),bI=y.mul(Ke,be),ku=y.mul(lr,de);ku=y.mul(ku,M);let EI=y.mul(ku,K),AI=y.mul(Ue,be);xe=y.sqr(ku),xe=y.mul(xe,Oe);let SI=y.eql(xe,AI),CI=y.cmov(EI,ku,SI);xe=y.sqr(Xb),xe=y.mul(xe,Oe);let Hg=y.eql(xe,Ue),xI=y.cmov(bI,Ke,Hg),_u=y.cmov(CI,Xb,Hg),kI=y.isOdd(_u);return _u=y.cmov(_u,y.neg(_u),Hg!==kI),{xMn:xI,xMd:Le,yMn:_u,yMd:d}}(P);let q=y.mul(R,V);q=y.mul(q,U);let Y=y.mul(L,F),te=y.sub(R,L),ie=y.add(R,L),le=y.mul(Y,ie),he=y.eql(le,y.ZERO);q=y.cmov(q,y.ZERO,he),Y=y.cmov(Y,y.ONE,he),te=y.cmov(te,y.ONE,he),ie=y.cmov(ie,y.ONE,he);const Ee=y.invertBatch([Y,ie]);return{x:y.mul(q,Ee[0]),y:y.mul(te,Ee[1])}}const z=(0,i.createHasher)(t.ed25519.ExtendedPoint,P=>W(P[0]),{DST:"edwards25519_XMD:SHA-512_ELL2_RO_",encodeDST:"edwards25519_XMD:SHA-512_ELL2_NU_",p:y.ORDER,m:1,k:128,expand:"xmd",hash:e.sha512});function $(P){if(!(P instanceof S))throw new Error("RistrettoPoint expected")}t.hashToCurve=z.hashToCurve,t.encodeToCurve=z.encodeToCurve;const N=c,C=BigInt("25063068953384623474111414158702152701244531502492656460079210482610430750235"),O=BigInt("54469307008909316920995813868745141605393597292927456921205312896311721017578"),D=BigInt("1159843021668779879193775521855586647937357759715417654439879720876111806838"),b=BigInt("40440834346308536858101042469323190826248399146238708352240133220865137265952"),E=P=>v(d,P),_=BigInt("0x7fffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffff"),I=P=>t.ed25519.CURVE.Fp.create((0,a.bytesToNumberLE)(P)&_);function A(P){const{d:R}=t.ed25519.CURVE,L=t.ed25519.CURVE.Fp.ORDER,F=t.ed25519.CURVE.Fp.create,V=F(N*P*P),q=F((V+d)*D);let Y=BigInt(-1);const te=F((Y-R*V)*F(V+R));let{isValid:ie,value:le}=v(q,te),he=F(le*P);(0,s.isNegativeLE)(he,L)||(he=F(-he)),ie||(le=he),ie||(Y=V);const Ee=F(Y*(V-d)*b-te),de=le*le,pe=F((le+le)*te),Ae=F(Ee*C),be=F(d-de),Le=F(d+de);return new t.ed25519.ExtendedPoint(F(pe*Le),F(be*Ae),F(Ae*Le),F(pe*be))}class S{constructor(R){this.ep=R}static fromAffine(R){return new S(t.ed25519.ExtendedPoint.fromAffine(R))}static hashToCurve(R){R=(0,a.ensureBytes)("ristrettoHash",R,64);const L=A(I(R.slice(0,32))),F=A(I(R.slice(32,64)));return new S(L.add(F))}static fromHex(R){R=(0,a.ensureBytes)("ristrettoHex",R,32);const{a:L,d:F}=t.ed25519.CURVE,V=t.ed25519.CURVE.Fp.ORDER,q=t.ed25519.CURVE.Fp.create,Y="RistrettoPoint.fromHex: the hex is not valid encoding of RistrettoPoint",te=I(R);if(!(0,a.equalBytes)((0,a.numberToBytesLE)(te,32),R)||(0,s.isNegativeLE)(te,V))throw new Error(Y);const ie=q(te*te),le=q(d+L*ie),he=q(d-L*ie),Ee=q(le*le),de=q(he*he),pe=q(L*F*Ee-de),{isValid:Ae,value:be}=E(q(pe*de)),Le=q(be*he),Ke=q(be*Le*pe);let xe=q((te+te)*Le);(0,s.isNegativeLE)(xe,V)&&(xe=q(-xe));const Oe=q(le*Ke),Ue=q(xe*Oe);if(!Ae||(0,s.isNegativeLE)(Ue,V)||Oe===u)throw new Error(Y);return new S(new t.ed25519.ExtendedPoint(xe,Oe,d,Ue))}toRawBytes(){let{ex:R,ey:L,ez:F,et:V}=this.ep;const q=t.ed25519.CURVE.Fp.ORDER,Y=t.ed25519.CURVE.Fp.create,te=Y(Y(F+L)*Y(F-L)),ie=Y(R*L),le=Y(ie*ie),{value:he}=E(Y(te*le)),Ee=Y(he*te),de=Y(he*ie),pe=Y(Ee*de*V);let Ae;if((0,s.isNegativeLE)(V*pe,q)){let Le=Y(L*N),Ke=Y(R*N);R=Le,L=Ke,Ae=Y(Ee*O)}else Ae=de;(0,s.isNegativeLE)(R*pe,q)&&(L=Y(-L));let be=Y((F-L)*Ae);return(0,s.isNegativeLE)(be,q)&&(be=Y(-be)),(0,a.numberToBytesLE)(be,32)}toHex(){return(0,a.bytesToHex)(this.toRawBytes())}toString(){return this.toHex()}equals(R){$(R);const{ex:L,ey:F}=this.ep,{ex:V,ey:q}=R.ep,Y=t.ed25519.CURVE.Fp.create,te=Y(L*q)===Y(F*V),ie=Y(F*q)===Y(L*V);return te||ie}add(R){return $(R),new S(this.ep.add(R.ep))}subtract(R){return $(R),new S(this.ep.subtract(R.ep))}multiply(R){return new S(this.ep.multiply(R))}multiplyUnsafe(R){return new S(this.ep.multiplyUnsafe(R))}double(){return new S(this.ep.double())}negate(){return new S(this.ep.negate())}}t.RistrettoPoint=(S.BASE||(S.BASE=new S(t.ed25519.ExtendedPoint.BASE)),S.ZERO||(S.ZERO=new S(t.ed25519.ExtendedPoint.ZERO)),S),t.hashToRistretto255=(P,R)=>{const L=R.DST,F=typeof L=="string"?(0,n.utf8ToBytes)(L):L,V=(0,i.expand_message_xmd)(P,F,64,e.sha512);return S.hashToCurve(V)},t.hash_to_ristretto255=t.hashToRistretto255})(zP);var ST={},gs={};Object.defineProperty(gs,"__esModule",{value:!0}),gs.sha224=gs.sha256=gs.SHA256=void 0;const Xm=ps,fr=Rs,XB=new Uint32Array([1116352408,1899447441,3049323471,3921009573,961987163,1508970993,2453635748,2870763221,3624381080,310598401,607225278,1426881987,1925078388,2162078206,2614888103,3248222580,3835390401,4022224774,264347078,604807628,770255983,1249150122,1555081692,1996064986,2554220882,2821834349,2952996808,3210313671,3336571891,3584528711,113926993,338241895,666307205,773529912,1294757372,1396182291,1695183700,1986661051,2177026350,2456956037,2730485921,2820302411,3259730800,3345764771,3516065817,3600352804,4094571909,275423344,430227734,506948616,659060556,883997877,958139571,1322822218,1537002063,1747873779,1955562222,2024104815,2227730452,2361852424,2428436474,2756734187,3204031479,3329325298]),Us=new Uint32Array([1779033703,3144134277,1013904242,2773480762,1359893119,2600822924,528734635,1541459225]),Fs=new Uint32Array(64);class yb extends Xm.HashMD{constructor(){super(64,32,8,!1),this.A=0|Us[0],this.B=0|Us[1],this.C=0|Us[2],this.D=0|Us[3],this.E=0|Us[4],this.F=0|Us[5],this.G=0|Us[6],this.H=0|Us[7]}get(){const{A:e,B:n,C:r,D:i,E:s,F:o,G:a,H:l}=this;return[e,n,r,i,s,o,a,l]}set(e,n,r,i,s,o,a,l){this.A=0|e,this.B=0|n,this.C=0|r,this.D=0|i,this.E=0|s,this.F=0|o,this.G=0|a,this.H=0|l}process(e,n){for(let d=0;d<16;d++,n+=4)Fs[d]=e.getUint32(n,!1);for(let d=16;d<64;d++){const f=Fs[d-15],h=Fs[d-2],m=(0,fr.rotr)(f,7)^(0,fr.rotr)(f,18)^f>>>3,g=(0,fr.rotr)(h,17)^(0,fr.rotr)(h,19)^h>>>10;Fs[d]=g+Fs[d-7]+m+Fs[d-16]|0}let{A:r,B:i,C:s,D:o,E:a,F:l,G:c,H:u}=this;for(let d=0;d<64;d++){const f=u+((0,fr.rotr)(a,6)^(0,fr.rotr)(a,11)^(0,fr.rotr)(a,25))+(0,Xm.Chi)(a,l,c)+XB[d]+Fs[d]|0,h=((0,fr.rotr)(r,2)^(0,fr.rotr)(r,13)^(0,fr.rotr)(r,22))+(0,Xm.Maj)(r,i,s)|0;u=c,c=l,l=a,a=o+f|0,o=s,s=i,i=r,r=f+h|0}r=r+this.A|0,i=i+this.B|0,s=s+this.C|0,o=o+this.D|0,a=a+this.E|0,l=l+this.F|0,c=c+this.G|0,u=u+this.H|0,this.set(r,i,s,o,a,l,c,u)}roundClean(){Fs.fill(0)}destroy(){this.set(0,0,0,0,0,0,0,0),this.buffer.fill(0)}}gs.SHA256=yb;class eD extends yb{constructor(){super(),this.A=-1056596264,this.B=914150663,this.C=812702999,this.D=-150054599,this.E=-4191439,this.F=1750603025,this.G=1694076839,this.H=-1090891868,this.outputLen=28}}gs.sha256=(0,fr.wrapConstructor)(()=>new yb),gs.sha224=(0,fr.wrapConstructor)(()=>new eD);var yp={},vb={};(function(t){Object.defineProperty(t,"__esModule",{value:!0}),t.hmac=t.HMAC=void 0;const e=er,n=Rs;class r extends n.Hash{constructor(s,o){super(),this.finished=!1,this.destroyed=!1,(0,e.hash)(s);const a=(0,n.toBytes)(o);if(this.iHash=s.create(),typeof this.iHash.update!="function")throw new Error("Expected instance of class which extends utils.Hash");this.blockLen=this.iHash.blockLen,this.outputLen=this.iHash.outputLen;const l=this.blockLen,c=new Uint8Array(l);c.set(a.length>l?s.create().update(a).digest():a);for(let u=0;u<c.length;u++)c[u]^=54;this.iHash.update(c),this.oHash=s.create();for(let u=0;u<c.length;u++)c[u]^=106;this.oHash.update(c),c.fill(0)}update(s){return(0,e.exists)(this),this.iHash.update(s),this}digestInto(s){(0,e.exists)(this),(0,e.bytes)(s,this.outputLen),this.finished=!0,this.iHash.digestInto(s),this.oHash.update(s),this.oHash.digestInto(s),this.destroy()}digest(){const s=new Uint8Array(this.oHash.outputLen);return this.digestInto(s),s}_cloneInto(s){s||(s=Object.create(Object.getPrototypeOf(this),{}));const{oHash:o,iHash:a,finished:l,destroyed:c,blockLen:u,outputLen:d}=this;return s.finished=l,s.destroyed=c,s.blockLen=u,s.outputLen=d,s.oHash=o._cloneInto(s.oHash),s.iHash=a._cloneInto(s.iHash),s}destroy(){this.destroyed=!0,this.oHash.destroy(),this.iHash.destroy()}}t.HMAC=r,t.hmac=(i,s,o)=>new r(i,s).update(o).digest(),t.hmac.create=(i,s)=>new r(i,s)})(vb);var wb={};(function(t){Object.defineProperty(t,"__esModule",{value:!0}),t.DER=void 0,t.weierstrassPoints=h,t.weierstrass=function(g){const w=function(P){const R=(0,e.validateBasic)(P);return r.validateObject(R,{hash:"hash",hmac:"function",randomBytes:"function"},{bits2int:"function",bits2int_modN:"function",lowS:"boolean"}),Object.freeze({lowS:!0,...R})}(g),{Fp:p,n:v}=w,y=p.BYTES+1,x=2*p.BYTES+1;function T(P){return n.mod(P,v)}function B(P){return n.invert(P,v)}const{ProjectivePoint:j,normPrivateKeyToScalar:M,weierstrassEquation:K,isWithinCurveOrder:U}=h({...w,toBytes(P,R,L){const F=R.toAffine(),V=p.toBytes(F.x),q=r.concatBytes;return(0,i.abool)("isCompressed",L),L?q(Uint8Array.from([R.hasEvenY()?2:3]),V):q(Uint8Array.from([4]),V,p.toBytes(F.y))},fromBytes(P){const R=P.length,L=P[0],F=P.subarray(1);if(R!==y||L!==2&&L!==3){if(R===x&&L===4)return{x:p.fromBytes(F.subarray(0,p.BYTES)),y:p.fromBytes(F.subarray(p.BYTES,2*p.BYTES))};throw new Error(`Point of length ${R} was invalid. Expected ${y} compressed bytes or ${x} uncompressed bytes`)}{const V=r.bytesToNumberBE(F);if(!r.inRange(V,c,p.ORDER))throw new Error("Point is not on curve");const q=K(V);let Y;try{Y=p.sqrt(q)}catch(te){const ie=te instanceof Error?": "+te.message:"";throw new Error("Point is not on curve"+ie)}return(1&L)==1!=((Y&c)===c)&&(Y=p.neg(Y)),{x:V,y:Y}}}}),W=P=>r.bytesToHex(r.numberToBytesBE(P,w.nByteLength));function z(P){return P>v>>c}const $=(P,R,L)=>r.bytesToNumberBE(P.slice(R,L));class N{constructor(R,L,F){this.r=R,this.s=L,this.recovery=F,this.assertValidity()}static fromCompact(R){const L=w.nByteLength;return R=(0,i.ensureBytes)("compactSignature",R,2*L),new N($(R,0,L),$(R,L,2*L))}static fromDER(R){const{r:L,s:F}=t.DER.toSig((0,i.ensureBytes)("DER",R));return new N(L,F)}assertValidity(){r.aInRange("r",this.r,c,v),r.aInRange("s",this.s,c,v)}addRecoveryBit(R){return new N(this.r,this.s,R)}recoverPublicKey(R){const{r:L,s:F,recovery:V}=this,q=b((0,i.ensureBytes)("msgHash",R));if(V==null||![0,1,2,3].includes(V))throw new Error("recovery id invalid");const Y=V===2||V===3?L+w.n:L;if(Y>=p.ORDER)throw new Error("recovery id 2 or 3 invalid");const te=1&V?"03":"02",ie=j.fromHex(te+W(Y)),le=B(Y),he=T(-q*le),Ee=T(F*le),de=j.BASE.multiplyAndAddUnsafe(ie,he,Ee);if(!de)throw new Error("point at infinify");return de.assertValidity(),de}hasHighS(){return z(this.s)}normalizeS(){return this.hasHighS()?new N(this.r,T(-this.s),this.recovery):this}toDERRawBytes(){return r.hexToBytes(this.toDERHex())}toDERHex(){return t.DER.hexFromSig({r:this.r,s:this.s})}toCompactRawBytes(){return r.hexToBytes(this.toCompactHex())}toCompactHex(){return W(this.r)+W(this.s)}}const C={isValidPrivateKey(P){try{return M(P),!0}catch{return!1}},normPrivateKeyToScalar:M,randomPrivateKey:()=>{const P=n.getMinHashLength(w.n);return n.mapHashToField(w.randomBytes(P),w.n)},precompute:(P=8,R=j.BASE)=>(R._setWindowSize(P),R.multiply(BigInt(3)),R)};function O(P){const R=r.isBytes(P),L=typeof P=="string",F=(R||L)&&P.length;return R?F===y||F===x:L?F===2*y||F===2*x:P instanceof j}const D=w.bits2int||function(P){const R=r.bytesToNumberBE(P),L=8*P.length-w.nBitLength;return L>0?R>>BigInt(L):R},b=w.bits2int_modN||function(P){return T(D(P))},E=r.bitMask(w.nBitLength);function _(P){return r.aInRange(`num < 2^${w.nBitLength}`,P,l,E),r.numberToBytesBE(P,w.nByteLength)}function I(P,R,L=A){if(["recovered","canonical"].some(pe=>pe in L))throw new Error("sign() legacy options not supported");const{hash:F,randomBytes:V}=w;let{lowS:q,prehash:Y,extraEntropy:te}=L;q==null&&(q=!0),P=(0,i.ensureBytes)("msgHash",P),s(L),Y&&(P=(0,i.ensureBytes)("prehashed msgHash",F(P)));const ie=b(P),le=M(R),he=[_(le),_(ie)];if(te!=null&&te!==!1){const pe=te===!0?V(p.BYTES):te;he.push((0,i.ensureBytes)("extraEntropy",pe))}const Ee=r.concatBytes(...he),de=ie;return{seed:Ee,k2sig:function(pe){const Ae=D(pe);if(!U(Ae))return;const be=B(Ae),Le=j.BASE.multiply(Ae).toAffine(),Ke=T(Le.x);if(Ke===l)return;const xe=T(be*T(de+Ke*le));if(xe===l)return;let Oe=(Le.x===Ke?0:2)|Number(Le.y&c),Ue=xe;return q&&z(xe)&&(Ue=function(Tt){return z(Tt)?T(-Tt):Tt}(xe),Oe^=1),new N(Ke,Ue,Oe)}}}const A={lowS:w.lowS,prehash:!1},S={lowS:w.lowS,prehash:!1};return j.BASE._setWindowSize(8),{CURVE:w,getPublicKey:function(P,R=!0){return j.fromPrivateKey(P).toRawBytes(R)},getSharedSecret:function(P,R,L=!0){if(O(P))throw new Error("first arg must be private key");if(!O(R))throw new Error("second arg must be public key");return j.fromHex(R).multiply(M(P)).toRawBytes(L)},sign:function(P,R,L=A){const{seed:F,k2sig:V}=I(P,R,L),q=w;return r.createHmacDrbg(q.hash.outputLen,q.nByteLength,q.hmac)(F,V)},verify:function(P,R,L,F=S){var Ke;const V=P;if(R=(0,i.ensureBytes)("msgHash",R),L=(0,i.ensureBytes)("publicKey",L),"strict"in F)throw new Error("options.strict was renamed to lowS");s(F);const{lowS:q,prehash:Y}=F;let te,ie;try{if(typeof V=="string"||r.isBytes(V))try{te=N.fromDER(V)}catch(xe){if(!(xe instanceof t.DER.Err))throw xe;te=N.fromCompact(V)}else{if(typeof V!="object"||typeof V.r!="bigint"||typeof V.s!="bigint")throw new Error("PARSE");{const{r:xe,s:Oe}=V;te=new N(xe,Oe)}}ie=j.fromHex(L)}catch(xe){if(xe.message==="PARSE")throw new Error("signature must be Signature instance, Uint8Array or hex string");return!1}if(q&&te.hasHighS())return!1;Y&&(R=w.hash(R));const{r:le,s:he}=te,Ee=b(R),de=B(he),pe=T(Ee*de),Ae=T(le*de),be=(Ke=j.BASE.multiplyAndAddUnsafe(ie,pe,Ae))==null?void 0:Ke.toAffine();return be?T(be.x)===le:!1},ProjectivePoint:j,Signature:N,utils:C}},t.SWUFpSqrtRatio=m,t.mapToCurveSimpleSWU=function(g,w){if(n.validateField(g),!g.isValid(w.A)||!g.isValid(w.B)||!g.isValid(w.Z))throw new Error("mapToCurveSimpleSWU: invalid opts");const p=m(g,w.Z);if(!g.isOdd)throw new Error("Fp.isOdd is not implemented!");return v=>{let y,x,T,B,j,M,K,U;y=g.sqr(v),y=g.mul(y,w.Z),x=g.sqr(y),x=g.add(x,y),T=g.add(x,g.ONE),T=g.mul(T,w.B),B=g.cmov(w.Z,g.neg(x),!g.eql(x,g.ZERO)),B=g.mul(B,w.A),x=g.sqr(T),M=g.sqr(B),j=g.mul(M,w.A),x=g.add(x,j),x=g.mul(x,T),M=g.mul(M,B),j=g.mul(M,w.B),x=g.add(x,j),K=g.mul(y,T);const{isValid:W,value:z}=p(x,M);U=g.mul(y,v),U=g.mul(U,z),K=g.cmov(K,T,W),U=g.cmov(U,z,W);const $=g.isOdd(v)===g.isOdd(U);return U=g.cmov(g.neg(U),U,$),K=g.div(K,B),{x:K,y:U}}};const e=Kl,n=We,r=Re,i=Re;function s(g){g.lowS!==void 0&&(0,i.abool)("lowS",g.lowS),g.prehash!==void 0&&(0,i.abool)("prehash",g.prehash)}const{bytesToNumberBE:o,hexToBytes:a}=r;t.DER={Err:class extends Error{constructor(g=""){super(g)}},_tlv:{encode:(g,w)=>{const{Err:p}=t.DER;if(g<0||g>256)throw new p("tlv.encode: wrong tag");if(1&w.length)throw new p("tlv.encode: unpadded data");const v=w.length/2,y=r.numberToHexUnpadded(v);if(y.length/2&128)throw new p("tlv.encode: long form length too big");const x=v>127?r.numberToHexUnpadded(y.length/2|128):"";return`${r.numberToHexUnpadded(g)}${x}${y}${w}`},decode(g,w){const{Err:p}=t.DER;let v=0;if(g<0||g>256)throw new p("tlv.encode: wrong tag");if(w.length<2||w[v++]!==g)throw new p("tlv.decode: wrong tlv");const y=w[v++];let x=0;if(128&y){const B=127&y;if(!B)throw new p("tlv.decode(long): indefinite length not supported");if(B>4)throw new p("tlv.decode(long): byte length is too big");const j=w.subarray(v,v+B);if(j.length!==B)throw new p("tlv.decode: length bytes not complete");if(j[0]===0)throw new p("tlv.decode(long): zero leftmost byte");for(const M of j)x=x<<8|M;if(v+=B,x<128)throw new p("tlv.decode(long): not minimal encoding")}else x=y;const T=w.subarray(v,v+x);if(T.length!==x)throw new p("tlv.decode: wrong value length");return{v:T,l:w.subarray(v+x)}}},_int:{encode(g){const{Err:w}=t.DER;if(g<l)throw new w("integer: negative integers are not allowed");let p=r.numberToHexUnpadded(g);if(8&Number.parseInt(p[0],16)&&(p="00"+p),1&p.length)throw new w("unexpected assertion");return p},decode(g){const{Err:w}=t.DER;if(128&g[0])throw new w("Invalid signature integer: negative");if(g[0]===0&&!(128&g[1]))throw new w("Invalid signature integer: unnecessary leading zero");return o(g)}},toSig(g){const{Err:w,_int:p,_tlv:v}=t.DER,y=typeof g=="string"?a(g):g;r.abytes(y);const{v:x,l:T}=v.decode(48,y);if(T.length)throw new w("Invalid signature: left bytes after parsing");const{v:B,l:j}=v.decode(2,x),{v:M,l:K}=v.decode(2,j);if(K.length)throw new w("Invalid signature: left bytes after parsing");return{r:p.decode(B),s:p.decode(M)}},hexFromSig(g){const{_tlv:w,_int:p}=t.DER,v=`${w.encode(2,p.encode(g.r))}${w.encode(2,p.encode(g.s))}`;return w.encode(48,v)}};const l=BigInt(0),c=BigInt(1),u=BigInt(2),d=BigInt(3),f=BigInt(4);function h(g){const w=function($){const N=(0,e.validateBasic)($);r.validateObject(N,{a:"field",b:"field"},{allowedPrivateKeyLengths:"array",wrapPrivateKey:"boolean",isTorsionFree:"function",clearCofactor:"function",allowInfinityPoint:"boolean",fromBytes:"function",toBytes:"function"});const{endo:C,Fp:O,a:D}=N;if(C){if(!O.eql(D,O.ZERO))throw new Error("Endomorphism can only be defined for Koblitz curves that have a=0");if(typeof C!="object"||typeof C.beta!="bigint"||typeof C.splitScalar!="function")throw new Error("Expected endomorphism with beta: bigint and splitScalar: function")}return Object.freeze({...N})}(g),{Fp:p}=w,v=n.Field(w.n,w.nBitLength),y=w.toBytes||(($,N,C)=>{const O=N.toAffine();return r.concatBytes(Uint8Array.from([4]),p.toBytes(O.x),p.toBytes(O.y))}),x=w.fromBytes||($=>{const N=$.subarray(1);return{x:p.fromBytes(N.subarray(0,p.BYTES)),y:p.fromBytes(N.subarray(p.BYTES,2*p.BYTES))}});function T($){const{a:N,b:C}=w,O=p.sqr($),D=p.mul(O,$);return p.add(p.add(D,p.mul($,N)),C)}if(!p.eql(p.sqr(w.Gy),T(w.Gx)))throw new Error("bad generator point: equation left != right");function B($){const{allowedPrivateKeyLengths:N,nByteLength:C,wrapPrivateKey:O,n:D}=w;if(N&&typeof $!="bigint"){if(r.isBytes($)&&($=r.bytesToHex($)),typeof $!="string"||!N.includes($.length))throw new Error("Invalid key");$=$.padStart(2*C,"0")}let b;try{b=typeof $=="bigint"?$:r.bytesToNumberBE((0,i.ensureBytes)("private key",$,C))}catch{throw new Error(`private key must be ${C} bytes, hex or bigint, not ${typeof $}`)}return O&&(b=n.mod(b,D)),r.aInRange("private key",b,c,D),b}function j($){if(!($ instanceof U))throw new Error("ProjectivePoint expected")}const M=(0,i.memoized)(($,N)=>{const{px:C,py:O,pz:D}=$;if(p.eql(D,p.ONE))return{x:C,y:O};const b=$.is0();N==null&&(N=b?p.ONE:p.inv(D));const E=p.mul(C,N),_=p.mul(O,N),I=p.mul(D,N);if(b)return{x:p.ZERO,y:p.ZERO};if(!p.eql(I,p.ONE))throw new Error("invZ was invalid");return{x:E,y:_}}),K=(0,i.memoized)($=>{if($.is0()){if(w.allowInfinityPoint&&!p.is0($.py))return;throw new Error("bad point: ZERO")}const{x:N,y:C}=$.toAffine();if(!p.isValid(N)||!p.isValid(C))throw new Error("bad point: x or y not FE");const O=p.sqr(C),D=T(N);if(!p.eql(O,D))throw new Error("bad point: equation left != right");if(!$.isTorsionFree())throw new Error("bad point: not in prime-order subgroup");return!0});class U{constructor(N,C,O){if(this.px=N,this.py=C,this.pz=O,N==null||!p.isValid(N))throw new Error("x required");if(C==null||!p.isValid(C))throw new Error("y required");if(O==null||!p.isValid(O))throw new Error("z required");Object.freeze(this)}static fromAffine(N){const{x:C,y:O}=N||{};if(!N||!p.isValid(C)||!p.isValid(O))throw new Error("invalid affine point");if(N instanceof U)throw new Error("projective point not allowed");const D=b=>p.eql(b,p.ZERO);return D(C)&&D(O)?U.ZERO:new U(C,O,p.ONE)}get x(){return this.toAffine().x}get y(){return this.toAffine().y}static normalizeZ(N){const C=p.invertBatch(N.map(O=>O.pz));return N.map((O,D)=>O.toAffine(C[D])).map(U.fromAffine)}static fromHex(N){const C=U.fromAffine(x((0,i.ensureBytes)("pointHex",N)));return C.assertValidity(),C}static fromPrivateKey(N){return U.BASE.multiply(B(N))}static msm(N,C){return(0,e.pippenger)(U,v,N,C)}_setWindowSize(N){z.setWindowSize(this,N)}assertValidity(){K(this)}hasEvenY(){const{y:N}=this.toAffine();if(p.isOdd)return!p.isOdd(N);throw new Error("Field doesn't support isOdd")}equals(N){j(N);const{px:C,py:O,pz:D}=this,{px:b,py:E,pz:_}=N,I=p.eql(p.mul(C,_),p.mul(b,D)),A=p.eql(p.mul(O,_),p.mul(E,D));return I&&A}negate(){return new U(this.px,p.neg(this.py),this.pz)}double(){const{a:N,b:C}=w,O=p.mul(C,d),{px:D,py:b,pz:E}=this;let _=p.ZERO,I=p.ZERO,A=p.ZERO,S=p.mul(D,D),P=p.mul(b,b),R=p.mul(E,E),L=p.mul(D,b);return L=p.add(L,L),A=p.mul(D,E),A=p.add(A,A),_=p.mul(N,A),I=p.mul(O,R),I=p.add(_,I),_=p.sub(P,I),I=p.add(P,I),I=p.mul(_,I),_=p.mul(L,_),A=p.mul(O,A),R=p.mul(N,R),L=p.sub(S,R),L=p.mul(N,L),L=p.add(L,A),A=p.add(S,S),S=p.add(A,S),S=p.add(S,R),S=p.mul(S,L),I=p.add(I,S),R=p.mul(b,E),R=p.add(R,R),S=p.mul(R,L),_=p.sub(_,S),A=p.mul(R,P),A=p.add(A,A),A=p.add(A,A),new U(_,I,A)}add(N){j(N);const{px:C,py:O,pz:D}=this,{px:b,py:E,pz:_}=N;let I=p.ZERO,A=p.ZERO,S=p.ZERO;const P=w.a,R=p.mul(w.b,d);let L=p.mul(C,b),F=p.mul(O,E),V=p.mul(D,_),q=p.add(C,O),Y=p.add(b,E);q=p.mul(q,Y),Y=p.add(L,F),q=p.sub(q,Y),Y=p.add(C,D);let te=p.add(b,_);return Y=p.mul(Y,te),te=p.add(L,V),Y=p.sub(Y,te),te=p.add(O,D),I=p.add(E,_),te=p.mul(te,I),I=p.add(F,V),te=p.sub(te,I),S=p.mul(P,Y),I=p.mul(R,V),S=p.add(I,S),I=p.sub(F,S),S=p.add(F,S),A=p.mul(I,S),F=p.add(L,L),F=p.add(F,L),V=p.mul(P,V),Y=p.mul(R,Y),F=p.add(F,V),V=p.sub(L,V),V=p.mul(P,V),Y=p.add(Y,V),L=p.mul(F,Y),A=p.add(A,L),L=p.mul(te,Y),I=p.mul(q,I),I=p.sub(I,L),L=p.mul(q,F),S=p.mul(te,S),S=p.add(S,L),new U(I,A,S)}subtract(N){return this.add(N.negate())}is0(){return this.equals(U.ZERO)}wNAF(N){return z.wNAFCached(this,N,U.normalizeZ)}multiplyUnsafe(N){r.aInRange("scalar",N,l,w.n);const C=U.ZERO;if(N===l)return C;if(N===c)return this;const{endo:O}=w;if(!O)return z.unsafeLadder(this,N);let{k1neg:D,k1:b,k2neg:E,k2:_}=O.splitScalar(N),I=C,A=C,S=this;for(;b>l||_>l;)b&c&&(I=I.add(S)),_&c&&(A=A.add(S)),S=S.double(),b>>=c,_>>=c;return D&&(I=I.negate()),E&&(A=A.negate()),A=new U(p.mul(A.px,O.beta),A.py,A.pz),I.add(A)}multiply(N){const{endo:C,n:O}=w;let D,b;if(r.aInRange("scalar",N,c,O),C){const{k1neg:E,k1:_,k2neg:I,k2:A}=C.splitScalar(N);let{p:S,f:P}=this.wNAF(_),{p:R,f:L}=this.wNAF(A);S=z.constTimeNegate(E,S),R=z.constTimeNegate(I,R),R=new U(p.mul(R.px,C.beta),R.py,R.pz),D=S.add(R),b=P.add(L)}else{const{p:E,f:_}=this.wNAF(N);D=E,b=_}return U.normalizeZ([D,b])[0]}multiplyAndAddUnsafe(N,C,O){const D=U.BASE,b=(_,I)=>I!==l&&I!==c&&_.equals(D)?_.multiply(I):_.multiplyUnsafe(I),E=b(this,C).add(b(N,O));return E.is0()?void 0:E}toAffine(N){return M(this,N)}isTorsionFree(){const{h:N,isTorsionFree:C}=w;if(N===c)return!0;if(C)return C(U,this);throw new Error("isTorsionFree() has not been declared for the elliptic curve")}clearCofactor(){const{h:N,clearCofactor:C}=w;return N===c?this:C?C(U,this):this.multiplyUnsafe(w.h)}toRawBytes(N=!0){return(0,i.abool)("isCompressed",N),this.assertValidity(),y(U,this,N)}toHex(N=!0){return(0,i.abool)("isCompressed",N),r.bytesToHex(this.toRawBytes(N))}}U.BASE=new U(w.Gx,w.Gy,p.ONE),U.ZERO=new U(p.ZERO,p.ONE,p.ZERO);const W=w.nBitLength,z=(0,e.wNAF)(U,w.endo?Math.ceil(W/2):W);return{CURVE:w,ProjectivePoint:U,normPrivateKeyToScalar:B,weierstrassEquation:T,isWithinCurveOrder:function($){return r.inRange($,c,w.n)}}}function m(g,w){const p=g.ORDER;let v=l;for(let $=p-c;$%u===l;$/=u)v+=c;const y=v,x=u<<y-c-c,T=x*u,B=(p-c)/T,j=(B-c)/u,M=T-c,K=x,U=g.pow(w,B),W=g.pow(w,(B+c)/u);let z=($,N)=>{let C=U,O=g.pow(N,M),D=g.sqr(O);D=g.mul(D,N);let b=g.mul($,D);b=g.pow(b,j),b=g.mul(b,O),O=g.mul(b,N),D=g.mul(b,$);let E=g.mul(D,O);b=g.pow(E,K);let _=g.eql(b,g.ONE);O=g.mul(D,W),b=g.mul(E,C),D=g.cmov(O,D,_),E=g.cmov(b,E,_);for(let I=y;I>c;I--){let A=I-u;A=u<<A-c;let S=g.pow(E,A);const P=g.eql(S,g.ONE);O=g.mul(D,C),C=g.mul(C,C),S=g.mul(E,C),D=g.cmov(O,D,P),E=g.cmov(S,E,P)}return{isValid:_,value:D}};if(g.ORDER%f===d){const $=(g.ORDER-d)/f,N=g.sqrt(g.neg(w));z=(C,O)=>{let D=g.sqr(O);const b=g.mul(C,O);D=g.mul(D,b);let E=g.pow(D,$);E=g.mul(E,b);const _=g.mul(E,N),I=g.mul(g.sqr(E),O),A=g.eql(I,C);return{isValid:A,value:g.cmov(_,E,A)}}}return z}})(wb),Object.defineProperty(yp,"__esModule",{value:!0}),yp.getHash=iS,yp.createCurve=function(t,e){const n=r=>(0,nD.weierstrass)({...t,...iS(r)});return Object.freeze({...n(e),create:n})};const tD=vb,rS=Rs,nD=wb;function iS(t){return{hash:t,hmac:(e,...n)=>(0,tD.hmac)(t,e,(0,rS.concatBytes)(...n)),randomBytes:rS.randomBytes}}(function(t){Object.defineProperty(t,"__esModule",{value:!0}),t.encodeToCurve=t.hashToCurve=t.schnorr=t.secp256k1=void 0;const e=gs,n=Rs,r=yp,i=qs,s=We,o=Re,a=wb,l=BigInt("0xfffffffffffffffffffffffffffffffffffffffffffffffffffffffefffffc2f"),c=BigInt("0xfffffffffffffffffffffffffffffffebaaedce6af48a03bbfd25e8cd0364141"),u=BigInt(1),d=BigInt(2),f=(b,E)=>(b+E/d)/E;function h(b){const E=l,_=BigInt(3),I=BigInt(6),A=BigInt(11),S=BigInt(22),P=BigInt(23),R=BigInt(44),L=BigInt(88),F=b*b*b%E,V=F*F*b%E,q=(0,s.pow2)(V,_,E)*V%E,Y=(0,s.pow2)(q,_,E)*V%E,te=(0,s.pow2)(Y,d,E)*F%E,ie=(0,s.pow2)(te,A,E)*te%E,le=(0,s.pow2)(ie,S,E)*ie%E,he=(0,s.pow2)(le,R,E)*le%E,Ee=(0,s.pow2)(he,L,E)*he%E,de=(0,s.pow2)(Ee,R,E)*le%E,pe=(0,s.pow2)(de,_,E)*V%E,Ae=(0,s.pow2)(pe,P,E)*ie%E,be=(0,s.pow2)(Ae,I,E)*F%E,Le=(0,s.pow2)(be,d,E);if(!m.eql(m.sqr(Le),b))throw new Error("Cannot find square root");return Le}const m=(0,s.Field)(l,void 0,void 0,{sqrt:h});t.secp256k1=(0,r.createCurve)({a:BigInt(0),b:BigInt(7),Fp:m,n:c,Gx:BigInt("55066263022277343669578718895168534326250603453777594175500187360389116729240"),Gy:BigInt("32670510020758816978083085130507043184471273380659243275938904335757337482424"),h:BigInt(1),lowS:!0,endo:{beta:BigInt("0x7ae96a2b657c07106e64479eac3434e99cf0497512f58995c1396c28719501ee"),splitScalar:b=>{const E=c,_=BigInt("0x3086d221a7d46bcde86c90e49284eb15"),I=-u*BigInt("0xe4437ed6010e88286f547fa90abfe4c3"),A=BigInt("0x114ca50f7a8e2f3f657c1108d9d44cfd8"),S=_,P=BigInt("0x100000000000000000000000000000000"),R=f(S*b,E),L=f(-I*b,E);let F=(0,s.mod)(b-R*_-L*A,E),V=(0,s.mod)(-R*I-L*S,E);const q=F>P,Y=V>P;if(q&&(F=E-F),Y&&(V=E-V),F>P||V>P)throw new Error("splitScalar: Endomorphism failed, k="+b);return{k1neg:q,k1:F,k2neg:Y,k2:V}}}},e.sha256);const g=BigInt(0),w={};function p(b,...E){let _=w[b];if(_===void 0){const I=(0,e.sha256)(Uint8Array.from(b,A=>A.charCodeAt(0)));_=(0,o.concatBytes)(I,I),w[b]=_}return(0,e.sha256)((0,o.concatBytes)(_,...E))}const v=b=>b.toRawBytes(!0).slice(1),y=b=>(0,o.numberToBytesBE)(b,32),x=b=>(0,s.mod)(b,l),T=b=>(0,s.mod)(b,c),B=t.secp256k1.ProjectivePoint,j=(b,E,_)=>B.BASE.multiplyAndAddUnsafe(b,E,_);function M(b){let E=t.secp256k1.utils.normPrivateKeyToScalar(b),_=B.fromPrivateKey(E);return{scalar:_.hasEvenY()?E:T(-E),bytes:v(_)}}function K(b){(0,o.aInRange)("x",b,u,l);const E=x(b*b);let _=h(x(E*b+BigInt(7)));_%d!==g&&(_=x(-_));const I=new B(b,_,u);return I.assertValidity(),I}const U=o.bytesToNumberBE;function W(...b){return T(U(p("BIP0340/challenge",...b)))}function z(b){return M(b).bytes}function $(b,E,_=(0,n.randomBytes)(32)){const I=(0,o.ensureBytes)("message",b),{bytes:A,scalar:S}=M(E),P=(0,o.ensureBytes)("auxRand",_,32),R=y(S^U(p("BIP0340/aux",P))),L=p("BIP0340/nonce",R,A,I),F=T(U(L));if(F===g)throw new Error("sign failed: k is zero");const{bytes:V,scalar:q}=M(F),Y=W(V,A,I),te=new Uint8Array(64);if(te.set(V,0),te.set(y(T(q+Y*S)),32),!N(te,I,A))throw new Error("sign: Invalid signature produced");return te}function N(b,E,_){const I=(0,o.ensureBytes)("signature",b,64),A=(0,o.ensureBytes)("message",E),S=(0,o.ensureBytes)("publicKey",_,32);try{const P=K(U(S)),R=U(I.subarray(0,32));if(!(0,o.inRange)(R,u,l))return!1;const L=U(I.subarray(32,64));if(!(0,o.inRange)(L,u,c))return!1;const F=W(y(R),v(P),A),V=j(P,L,T(-F));return!(!V||!V.hasEvenY()||V.toAffine().x!==R)}catch{return!1}}t.schnorr={getPublicKey:z,sign:$,verify:N,utils:{randomPrivateKey:t.secp256k1.utils.randomPrivateKey,lift_x:K,pointToBytes:v,numberToBytesBE:o.numberToBytesBE,bytesToNumberBE:o.bytesToNumberBE,taggedHash:p,mod:s.mod}};const C=(0,i.isogenyMap)(m,[["0x8e38e38e38e38e38e38e38e38e38e38e38e38e38e38e38e38e38e38daaaaa8c7","0x7d3d4c80bc321d5b9f315cea7fd44c5d595d2fc0bf63b92dfff1044f17c6581","0x534c328d23f234e6e2a413deca25caece4506144037c40314ecbd0b53d9dd262","0x8e38e38e38e38e38e38e38e38e38e38e38e38e38e38e38e38e38e38daaaaa88c"],["0xd35771193d94918a9ca34ccbb7b640dd86cd409542f8487d9fe6b745781eb49b","0xedadc6f64383dc1df7c4b2d51b54225406d36b641f5e41bbc52a56612a8c6d14","0x0000000000000000000000000000000000000000000000000000000000000001"],["0x4bda12f684bda12f684bda12f684bda12f684bda12f684bda12f684b8e38e23c","0xc75e0c32d5cb7c0fa9d0a54b12a0a6d5647ab046d686da6fdffc90fc201d71a3","0x29a6194691f91a73715209ef6512e576722830a201be2018a765e85a9ecee931","0x2f684bda12f684bda12f684bda12f684bda12f684bda12f684bda12f38e38d84"],["0xfffffffffffffffffffffffffffffffffffffffffffffffffffffffefffff93b","0x7a06534bb8bdb49fd5e9e6632722c2989467c1bfc8e8d978dfb425d2685c2573","0x6484aa716545ca2cf3a70c3fa8fe337e0a3d21162f0d6299a7bf8192bfd2a76f","0x0000000000000000000000000000000000000000000000000000000000000001"]].map(b=>b.map(E=>BigInt(E)))),O=(0,a.mapToCurveSimpleSWU)(m,{A:BigInt("0x3f8731abdd661adca08a5558f0f5d272e953d363cb6f0e5d405447c01a444533"),B:BigInt("1771"),Z:m.create(BigInt("-11"))}),D=(0,i.createHasher)(t.secp256k1.ProjectivePoint,b=>{const{x:E,y:_}=O(m.create(b[0]));return C(E,_)},{DST:"secp256k1_XMD:SHA-256_SSWU_RO_",encodeDST:"secp256k1_XMD:SHA-256_SSWU_NU_",p:m.ORDER,m:1,k:128,expand:"xmd",hash:e.sha256});t.hashToCurve=D.hashToCurve,t.encodeToCurve=D.encodeToCurve})(ST);var Ew={};(function(t){Object.defineProperty(t,"__esModule",{value:!0}),t.decodeHex=t.remove0x=void 0;var e=ar;t.remove0x=function(n){return n.startsWith("0x")||n.startsWith("0X")?n.slice(2):n},t.decodeHex=function(n){return(0,e.hexToBytes)((0,t.remove0x)(n))}})(Ew),function(t){Object.defineProperty(t,"__esModule",{value:!0}),t.hexToPublicKey=t.convertPublicKeyFormat=t.getSharedPoint=t.getPublicKey=t.isValidPrivateKey=t.getValidSecret=void 0;var e=pb,n=zP,r=ST,i=Xd,s=It,o=Ew;t.getValidSecret=function(){var u;do u=(0,e.randomBytes)(s.SECRET_KEY_LENGTH);while(!(0,t.isValidPrivateKey)(u));return u},t.isValidPrivateKey=function(u){return a((0,i.ellipticCurve)(),function(d){return d.utils.isValidPrivateKey(u)},function(){return!0},function(){return!0})},t.getPublicKey=function(u){return a((0,i.ellipticCurve)(),function(d){return d.getPublicKey(u)},function(d){return d.getPublicKey(u)},function(d){return d.getPublicKey(u)})},t.getSharedPoint=function(u,d,f){return a((0,i.ellipticCurve)(),function(h){return h.getSharedSecret(u,d,f)},function(h){return h.getSharedSecret(u,d)},function(h){return c(h,u,d)})},t.convertPublicKeyFormat=function(u,d){return a((0,i.ellipticCurve)(),function(f){return f.getSharedSecret(BigInt(1),u,d)},function(){return u},function(){return u})};function a(u,d,f,h){if(u==="secp256k1")return d(r.secp256k1);if(u==="x25519")return f(n.x25519);if(u==="ed25519")return h(n.ed25519);throw new Error("Not implemented")}t.hexToPublicKey=function(u){var d=(0,o.decodeHex)(u);return a((0,i.ellipticCurve)(),function(){return l(d)},function(){return d},function(){return d})};var l=function(u){if(u.length===s.ETH_PUBLIC_KEY_SIZE){var d=new Uint8Array(1+u.length);return d.set([4]),d.set(u,1),d}return u},c=function(u,d,f){var h=u.utils.getExtendedPublicKey(d).scalar;return u.ExtendedPoint.fromHex(f).multiply(h).toRawBytes()}}(KP);var CT={},zl={};Object.defineProperty(zl,"__esModule",{value:!0}),zl.hkdf=void 0,zl.extract=kT,zl.expand=_T;const Aw=er,sS=Rs,xT=vb;function kT(t,e,n){return(0,Aw.hash)(t),n===void 0&&(n=new Uint8Array(t.outputLen)),(0,xT.hmac)(t,(0,sS.toBytes)(n),(0,sS.toBytes)(e))}const ey=new Uint8Array([0]),oS=new Uint8Array;function _T(t,e,n,r=32){if((0,Aw.hash)(t),(0,Aw.number)(r),r>255*t.outputLen)throw new Error("Length should be <= 255*HashLen");const i=Math.ceil(r/t.outputLen);n===void 0&&(n=oS);const s=new Uint8Array(i*t.outputLen),o=xT.hmac.create(t,e),a=o._cloneInto(),l=new Uint8Array(o.outputLen);for(let c=0;c<i;c++)ey[0]=c+1,a.update(c===0?oS:l).update(n).update(ey).digestInto(l),s.set(l,t.outputLen*c),o._cloneInto(a);return o.destroy(),a.destroy(),l.fill(0),ey.fill(0),s.slice(0,r)}zl.hkdf=(t,e,n,r,i)=>_T(t,kT(t,e,n),r,i),function(t){Object.defineProperty(t,"__esModule",{value:!0}),t.getSharedKey=t.deriveKey=void 0;var e=ar,n=zl,r=gs;t.deriveKey=function(i,s,o){return(0,n.hkdf)(r.sha256,i,s,o,32)},t.getSharedKey=function(){for(var i=[],s=0;s<arguments.length;s++)i[s]=arguments[s];return(0,t.deriveKey)(e.concatBytes.apply(void 0,i))}}(CT);var aS={},cc={},ft={},ba={};Object.defineProperty(ba,"__esModule",{value:!0}),ba.polyval=ba.ghash=void 0,ba._toGHASHKey=PT;const Ea=sn,mn=ar,qi=16,bb=new Uint8Array(16),ki=(0,mn.u32)(bb),Ar=t=>(t>>>0&255)<<24|(t>>>8&255)<<16|(t>>>16&255)<<8|t>>>24&255|0;function PT(t){t.reverse();const e=1&t[15];let n=0;for(let r=0;r<t.length;r++){const i=t[r];t[r]=i>>>1|n,n=(1&i)<<7}return t[0]^=225&-e,t}class TT{constructor(e,n){this.blockLen=qi,this.outputLen=qi,this.s0=0,this.s1=0,this.s2=0,this.s3=0,this.finished=!1,e=(0,mn.toBytes)(e),(0,Ea.bytes)(e,16);const r=(0,mn.createView)(e);let i=r.getUint32(0,!1),s=r.getUint32(4,!1),o=r.getUint32(8,!1),a=r.getUint32(12,!1);const l=[];for(let p=0;p<128;p++)l.push({s0:Ar(i),s1:Ar(s),s2:Ar(o),s3:Ar(a)}),{s0:i,s1:s,s2:o,s3:a}={s3:(d=o)<<31|(f=a)>>>1,s2:(u=s)<<31|d>>>1,s1:(c=i)<<31|u>>>1,s0:c>>>1^225<<24&-(1&f)};var c,u,d,f;const h=(p=>p>65536?8:p>1024?4:2)(n||1024);if(![1,2,4,8].includes(h))throw new Error(`ghash: wrong window size=${h}, should be 2, 4 or 8`);this.W=h;const m=128/h,g=this.windowSize=2**h,w=[];for(let p=0;p<m;p++)for(let v=0;v<g;v++){let y=0,x=0,T=0,B=0;for(let j=0;j<h;j++){if(!(v>>>h-j-1&1))continue;const{s0:M,s1:K,s2:U,s3:W}=l[h*p+j];y^=M,x^=K,T^=U,B^=W}w.push({s0:y,s1:x,s2:T,s3:B})}this.t=w}_updateBlock(e,n,r,i){e^=this.s0,n^=this.s1,r^=this.s2,i^=this.s3;const{W:s,t:o,windowSize:a}=this;let l=0,c=0,u=0,d=0;const f=(1<<s)-1;let h=0;for(const m of[e,n,r,i])for(let g=0;g<4;g++){const w=m>>>8*g&255;for(let p=8/s-1;p>=0;p--){const v=w>>>s*p&f,{s0:y,s1:x,s2:T,s3:B}=o[h*a+v];l^=y,c^=x,u^=T,d^=B,h+=1}}this.s0=l,this.s1=c,this.s2=u,this.s3=d}update(e){e=(0,mn.toBytes)(e),(0,Ea.exists)(this);const n=(0,mn.u32)(e),r=Math.floor(e.length/qi),i=e.length%qi;for(let s=0;s<r;s++)this._updateBlock(n[4*s+0],n[4*s+1],n[4*s+2],n[4*s+3]);return i&&(bb.set(e.subarray(r*qi)),this._updateBlock(ki[0],ki[1],ki[2],ki[3]),(0,mn.clean)(ki)),this}destroy(){const{t:e}=this;for(const n of e)n.s0=0,n.s1=0,n.s2=0,n.s3=0}digestInto(e){(0,Ea.exists)(this),(0,Ea.output)(e,this),this.finished=!0;const{s0:n,s1:r,s2:i,s3:s}=this,o=(0,mn.u32)(e);return o[0]=n,o[1]=r,o[2]=i,o[3]=s,e}digest(){const e=new Uint8Array(qi);return this.digestInto(e),this.destroy(),e}}class rD extends TT{constructor(e,n){e=(0,mn.toBytes)(e);const r=PT((0,mn.copyBytes)(e));super(r,n),(0,mn.clean)(r)}update(e){e=(0,mn.toBytes)(e),(0,Ea.exists)(this);const n=(0,mn.u32)(e),r=e.length%qi,i=Math.floor(e.length/qi);for(let s=0;s<i;s++)this._updateBlock(Ar(n[4*s+3]),Ar(n[4*s+2]),Ar(n[4*s+1]),Ar(n[4*s+0]));return r&&(bb.set(e.subarray(i*qi)),this._updateBlock(Ar(ki[3]),Ar(ki[2]),Ar(ki[1]),Ar(ki[0])),(0,mn.clean)(ki)),this}digestInto(e){(0,Ea.exists)(this),(0,Ea.output)(e,this),this.finished=!0;const{s0:n,s1:r,s2:i,s3:s}=this,o=(0,mn.u32)(e);return o[0]=n,o[1]=r,o[2]=i,o[3]=s,e.reverse()}}function lS(t){const e=(r,i)=>t(i,r.length).update((0,mn.toBytes)(r)).digest(),n=t(new Uint8Array(16),0);return e.outputLen=n.outputLen,e.blockLen=n.blockLen,e.create=(r,i)=>t(r,i),e}ba.ghash=lS((t,e)=>new TT(t,e)),ba.polyval=lS((t,e)=>new rD(t,e)),Object.defineProperty(ft,"__esModule",{value:!0}),ft.unsafe=ft.aeskwp=ft.aeskw=ft.siv=ft.gcm=ft.cfb=ft.cbc=ft.ecb=ft.ctr=void 0,ft.expandKeyLE=Jr,ft.expandKeyDecLE=tf;const Fe=sn,Sw=ba,oe=ar,jn=16,Th=new Uint8Array(jn),iD=283;function Eb(t){return t<<1^iD&-(t>>7)}function Vl(t,e){let n=0;for(;e>0;e>>=1)n^=t&-(1&e),t=Eb(t);return n}const Cw=(()=>{const t=new Uint8Array(256);for(let n=0,r=1;n<256;n++,r^=Eb(r))t[n]=r;const e=new Uint8Array(256);e[0]=99;for(let n=0;n<255;n++){let r=t[255-n];r|=r<<8,e[t[n]]=255&(r^r>>4^r>>5^r>>6^r>>7^99)}return(0,oe.clean)(t),e})(),sD=Cw.map((t,e)=>Cw.indexOf(e)),oD=t=>t<<24|t>>>8,ty=t=>t<<8|t>>>24,S0=t=>t<<24&4278190080|t<<8&16711680|t>>>8&65280|t>>>24&255;function RT(t,e){if(t.length!==256)throw new Error("Wrong sbox length");const n=new Uint32Array(256).map((c,u)=>e(t[u])),r=n.map(ty),i=r.map(ty),s=i.map(ty),o=new Uint32Array(65536),a=new Uint32Array(65536),l=new Uint16Array(65536);for(let c=0;c<256;c++)for(let u=0;u<256;u++){const d=256*c+u;o[d]=n[c]^r[u],a[d]=i[c]^s[u],l[d]=t[c]<<8|t[u]}return{sbox:t,sbox2:l,T0:n,T1:r,T2:i,T3:s,T01:o,T23:a}}const Ab=RT(Cw,t=>Vl(t,3)<<24|t<<16|t<<8|Vl(t,2)),IT=RT(sD,t=>Vl(t,11)<<24|Vl(t,13)<<16|Vl(t,9)<<8|Vl(t,14)),aD=(()=>{const t=new Uint8Array(16);for(let e=0,n=1;e<16;e++,n=Eb(n))t[e]=n;return t})();function Jr(t){(0,Fe.bytes)(t);const e=t.length;if(![16,24,32].includes(e))throw new Error(`aes: wrong key size: should be 16, 24 or 32, got: ${e}`);const{sbox2:n}=Ab,r=[];(0,oe.isAligned32)(t)||r.push(t=(0,oe.copyBytes)(t));const i=(0,oe.u32)(t),s=i.length,o=l=>Ti(n,l,l,l,l),a=new Uint32Array(e+28);a.set(i);for(let l=s;l<a.length;l++){let c=a[l-1];l%s==0?c=o(oD(c))^aD[l/s-1]:s>6&&l%s==4&&(c=o(c)),a[l]=a[l-s]^c}return(0,oe.clean)(...r),a}function tf(t){const e=Jr(t),n=e.slice(),r=e.length,{sbox2:i}=Ab,{T0:s,T1:o,T2:a,T3:l}=IT;for(let c=0;c<r;c+=4)for(let u=0;u<4;u++)n[c+u]=e[r-c-4+u];(0,oe.clean)(e);for(let c=4;c<r-4;c++){const u=n[c],d=Ti(i,u,u,u,u);n[c]=s[255&d]^o[d>>>8&255]^a[d>>>16&255]^l[d>>>24]}return n}function xo(t,e,n,r,i,s){return t[n<<8&65280|r>>>8&255]^e[i>>>8&65280|s>>>24&255]}function Ti(t,e,n,r,i){return t[255&e|65280&n]|t[r>>>16&255|i>>>16&65280]<<16}function yn(t,e,n,r,i){const{sbox2:s,T01:o,T23:a}=Ab;let l=0;e^=t[l++],n^=t[l++],r^=t[l++],i^=t[l++];const c=t.length/4-2;for(let u=0;u<c;u++){const d=t[l++]^xo(o,a,e,n,r,i),f=t[l++]^xo(o,a,n,r,i,e),h=t[l++]^xo(o,a,r,i,e,n),m=t[l++]^xo(o,a,i,e,n,r);e=d,n=f,r=h,i=m}return{s0:t[l++]^Ti(s,e,n,r,i),s1:t[l++]^Ti(s,n,r,i,e),s2:t[l++]^Ti(s,r,i,e,n),s3:t[l++]^Ti(s,i,e,n,r)}}function nf(t,e,n,r,i){const{sbox2:s,T01:o,T23:a}=IT;let l=0;e^=t[l++],n^=t[l++],r^=t[l++],i^=t[l++];const c=t.length/4-2;for(let u=0;u<c;u++){const d=t[l++]^xo(o,a,e,i,r,n),f=t[l++]^xo(o,a,n,e,i,r),h=t[l++]^xo(o,a,r,n,e,i),m=t[l++]^xo(o,a,i,r,n,e);e=d,n=f,r=h,i=m}return{s0:t[l++]^Ti(s,e,i,r,n),s1:t[l++]^Ti(s,n,e,i,r),s2:t[l++]^Ti(s,r,n,e,i),s3:t[l++]^Ti(s,i,r,n,e)}}function uc(t,e){if(e===void 0)return new Uint8Array(t);if((0,Fe.bytes)(e),e.length<t)throw new Error(`aes: wrong destination length, expected at least ${t}, got: ${e.length}`);if(!(0,oe.isAligned32)(e))throw new Error("unaligned dst");return e}function OT(t,e,n,r){(0,Fe.bytes)(e,jn),(0,Fe.bytes)(n);const i=n.length;r=uc(i,r);const s=e,o=(0,oe.u32)(s);let{s0:a,s1:l,s2:c,s3:u}=yn(t,o[0],o[1],o[2],o[3]);const d=(0,oe.u32)(n),f=(0,oe.u32)(r);for(let m=0;m+4<=d.length;m+=4){f[m+0]=d[m+0]^a,f[m+1]=d[m+1]^l,f[m+2]=d[m+2]^c,f[m+3]=d[m+3]^u;let g=1;for(let w=s.length-1;w>=0;w--)g=g+(255&s[w])|0,s[w]=255&g,g>>>=8;({s0:a,s1:l,s2:c,s3:u}=yn(t,o[0],o[1],o[2],o[3]))}const h=jn*Math.floor(d.length/4);if(h<i){const m=new Uint32Array([a,l,c,u]),g=(0,oe.u8)(m);for(let w=h,p=0;w<i;w++,p++)r[w]=n[w]^g[p];(0,oe.clean)(m)}return r}function Gl(t,e,n,r,i){(0,Fe.bytes)(n,jn),(0,Fe.bytes)(r),i=uc(r.length,i);const s=n,o=(0,oe.u32)(s),a=(0,oe.createView)(s),l=(0,oe.u32)(r),c=(0,oe.u32)(i),u=e?0:12,d=r.length;let f=a.getUint32(u,e),{s0:h,s1:m,s2:g,s3:w}=yn(t,o[0],o[1],o[2],o[3]);for(let v=0;v+4<=l.length;v+=4)c[v+0]=l[v+0]^h,c[v+1]=l[v+1]^m,c[v+2]=l[v+2]^g,c[v+3]=l[v+3]^w,f=f+1>>>0,a.setUint32(u,f,e),{s0:h,s1:m,s2:g,s3:w}=yn(t,o[0],o[1],o[2],o[3]);const p=jn*Math.floor(l.length/4);if(p<d){const v=new Uint32Array([h,m,g,w]),y=(0,oe.u8)(v);for(let x=p,T=0;x<d;x++,T++)i[x]=r[x]^y[T];(0,oe.clean)(v)}return i}function cS(t){if((0,Fe.bytes)(t),t.length%jn!=0)throw new Error("aes/(cbc-ecb).decrypt ciphertext should consist of blocks with size 16")}function uS(t,e,n){(0,Fe.bytes)(t);let r=t.length;const i=r%jn;if(!e&&i!==0)throw new Error("aec/(cbc-ecb): unpadded plaintext with disabled padding");(0,oe.isAligned32)(t)||(t=(0,oe.copyBytes)(t));const s=(0,oe.u32)(t);if(e){let a=jn-i;a||(a=jn),r+=a}const o=uc(r,n);return{b:s,o:(0,oe.u32)(o),out:o}}function dS(t,e){if(!e)return t;const n=t.length;if(!n)throw new Error("aes/pcks5: empty ciphertext not allowed");const r=t[n-1];if(r<=0||r>16)throw new Error("aes/pcks5: wrong padding");const i=t.subarray(0,-r);for(let s=0;s<r;s++)if(t[n-s-1]!==r)throw new Error("aes/pcks5: wrong padding");return i}function fS(t){const e=new Uint8Array(16),n=(0,oe.u32)(e);e.set(t);const r=jn-t.length;for(let i=jn-r;i<jn;i++)e[i]=r;return n}function NT(t,e,n,r,i){const s=i==null?0:i.length,o=t.create(n,r.length+s);i&&o.update(i),o.update(r);const a=new Uint8Array(16),l=(0,oe.createView)(a);i&&(0,oe.setBigUint64)(l,0,BigInt(8*s),e),(0,oe.setBigUint64)(l,8,BigInt(8*r.length),e),o.update(a);const c=o.digest();return(0,oe.clean)(a),c}ft.ctr=(0,oe.wrapCipher)({blockSize:16,nonceLength:16},function(t,e){function n(r,i){if((0,Fe.bytes)(r),i!==void 0&&((0,Fe.bytes)(i),!(0,oe.isAligned32)(i)))throw new Error("unaligned destination");const s=Jr(t),o=(0,oe.copyBytes)(e),a=[s,o];(0,oe.isAligned32)(r)||a.push(r=(0,oe.copyBytes)(r));const l=OT(s,o,r,i);return(0,oe.clean)(...a),l}return(0,Fe.bytes)(t),(0,Fe.bytes)(e,jn),{encrypt:(r,i)=>n(r,i),decrypt:(r,i)=>n(r,i)}}),ft.ecb=(0,oe.wrapCipher)({blockSize:16},function(t,e={}){(0,Fe.bytes)(t);const n=!e.disablePadding;return{encrypt(r,i){const{b:s,o,out:a}=uS(r,n,i),l=Jr(t);let c=0;for(;c+4<=s.length;){const{s0:u,s1:d,s2:f,s3:h}=yn(l,s[c+0],s[c+1],s[c+2],s[c+3]);o[c++]=u,o[c++]=d,o[c++]=f,o[c++]=h}if(n){const u=fS(r.subarray(4*c)),{s0:d,s1:f,s2:h,s3:m}=yn(l,u[0],u[1],u[2],u[3]);o[c++]=d,o[c++]=f,o[c++]=h,o[c++]=m}return(0,oe.clean)(l),a},decrypt(r,i){cS(r);const s=tf(t),o=uc(r.length,i),a=[s];(0,oe.isAligned32)(r)||a.push(r=(0,oe.copyBytes)(r));const l=(0,oe.u32)(r),c=(0,oe.u32)(o);for(let u=0;u+4<=l.length;){const{s0:d,s1:f,s2:h,s3:m}=nf(s,l[u+0],l[u+1],l[u+2],l[u+3]);c[u++]=d,c[u++]=f,c[u++]=h,c[u++]=m}return(0,oe.clean)(...a),dS(o,n)}}}),ft.cbc=(0,oe.wrapCipher)({blockSize:16,nonceLength:16},function(t,e,n={}){(0,Fe.bytes)(t),(0,Fe.bytes)(e,16);const r=!n.disablePadding;return{encrypt(i,s){const o=Jr(t),{b:a,o:l,out:c}=uS(i,r,s);let u=e;const d=[o];(0,oe.isAligned32)(u)||d.push(u=(0,oe.copyBytes)(u));const f=(0,oe.u32)(u);let h=f[0],m=f[1],g=f[2],w=f[3],p=0;for(;p+4<=a.length;)h^=a[p+0],m^=a[p+1],g^=a[p+2],w^=a[p+3],{s0:h,s1:m,s2:g,s3:w}=yn(o,h,m,g,w),l[p++]=h,l[p++]=m,l[p++]=g,l[p++]=w;if(r){const v=fS(i.subarray(4*p));h^=v[0],m^=v[1],g^=v[2],w^=v[3],{s0:h,s1:m,s2:g,s3:w}=yn(o,h,m,g,w),l[p++]=h,l[p++]=m,l[p++]=g,l[p++]=w}return(0,oe.clean)(...d),c},decrypt(i,s){cS(i);const o=tf(t);let a=e;const l=[o];(0,oe.isAligned32)(a)||l.push(a=(0,oe.copyBytes)(a));const c=(0,oe.u32)(a),u=uc(i.length,s);(0,oe.isAligned32)(i)||l.push(i=(0,oe.copyBytes)(i));const d=(0,oe.u32)(i),f=(0,oe.u32)(u);let h=c[0],m=c[1],g=c[2],w=c[3];for(let p=0;p+4<=d.length;){const v=h,y=m,x=g,T=w;h=d[p+0],m=d[p+1],g=d[p+2],w=d[p+3];const{s0:B,s1:j,s2:M,s3:K}=nf(o,h,m,g,w);f[p++]=B^v,f[p++]=j^y,f[p++]=M^x,f[p++]=K^T}return(0,oe.clean)(...l),dS(u,r)}}}),ft.cfb=(0,oe.wrapCipher)({blockSize:16,nonceLength:16},function(t,e){function n(r,i,s){(0,Fe.bytes)(r);const o=r.length;s=uc(o,s);const a=Jr(t);let l=e;const c=[a];(0,oe.isAligned32)(l)||c.push(l=(0,oe.copyBytes)(l)),(0,oe.isAligned32)(r)||c.push(r=(0,oe.copyBytes)(r));const u=(0,oe.u32)(r),d=(0,oe.u32)(s),f=i?d:u,h=(0,oe.u32)(l);let m=h[0],g=h[1],w=h[2],p=h[3];for(let y=0;y+4<=u.length;){const{s0:x,s1:T,s2:B,s3:j}=yn(a,m,g,w,p);d[y+0]=u[y+0]^x,d[y+1]=u[y+1]^T,d[y+2]=u[y+2]^B,d[y+3]=u[y+3]^j,m=f[y++],g=f[y++],w=f[y++],p=f[y++]}const v=jn*Math.floor(u.length/4);if(v<o){({s0:m,s1:g,s2:w,s3:p}=yn(a,m,g,w,p));const y=(0,oe.u8)(new Uint32Array([m,g,w,p]));for(let x=v,T=0;x<o;x++,T++)s[x]=r[x]^y[T];(0,oe.clean)(y)}return(0,oe.clean)(...c),s}return(0,Fe.bytes)(t),(0,Fe.bytes)(e,16),{encrypt:(r,i)=>n(r,!0,i),decrypt:(r,i)=>n(r,!1,i)}}),ft.gcm=(0,oe.wrapCipher)({blockSize:16,nonceLength:12,tagLength:16},function(t,e,n){if((0,Fe.bytes)(t),(0,Fe.bytes)(e),n!==void 0&&(0,Fe.bytes)(n),e.length<8)throw new Error("aes/gcm: invalid nonce length");const r=16;function i(o,a,l){const c=NT(Sw.ghash,!1,o,l,n);for(let u=0;u<a.length;u++)c[u]^=a[u];return c}function s(){const o=Jr(t),a=Th.slice(),l=Th.slice();if(Gl(o,!1,l,l,a),e.length===12)l.set(e);else{const c=Th.slice(),u=(0,oe.createView)(c);(0,oe.setBigUint64)(u,8,BigInt(8*e.length),!1);const d=Sw.ghash.create(a).update(e).update(c);d.digestInto(l),d.destroy()}return{xk:o,authKey:a,counter:l,tagMask:Gl(o,!1,l,Th)}}return{encrypt(o){(0,Fe.bytes)(o);const{xk:a,authKey:l,counter:c,tagMask:u}=s(),d=new Uint8Array(o.length+r),f=[a,l,c,u];(0,oe.isAligned32)(o)||f.push(o=(0,oe.copyBytes)(o)),Gl(a,!1,c,o,d);const h=i(l,u,d.subarray(0,d.length-r));return f.push(h),d.set(h,o.length),(0,oe.clean)(...f),d},decrypt(o){if((0,Fe.bytes)(o),o.length<r)throw new Error("aes/gcm: ciphertext less than tagLen (16)");const{xk:a,authKey:l,counter:c,tagMask:u}=s(),d=[a,l,u,c];(0,oe.isAligned32)(o)||d.push(o=(0,oe.copyBytes)(o));const f=o.subarray(0,-16),h=o.subarray(-16),m=i(l,u,f);if(d.push(m),!(0,oe.equalBytes)(m,h))throw new Error("aes/gcm: invalid ghash tag");const g=Gl(a,!1,c,f);return(0,oe.clean)(...d),g}}});const Rh=(t,e,n)=>r=>{if(!Number.isSafeInteger(r)||e>r||r>n)throw new Error(`${t}: invalid value=${r}, must be [${e}..${n}]`)};function MT(t){return t!=null&&typeof t=="object"&&(t instanceof Uint32Array||t.constructor.name==="Uint32Array")}function LT(t,e){if((0,Fe.bytes)(e,16),!MT(t))throw new Error("_encryptBlock accepts result of expandKeyLE");const n=(0,oe.u32)(e);let{s0:r,s1:i,s2:s,s3:o}=yn(t,n[0],n[1],n[2],n[3]);return n[0]=r,n[1]=i,n[2]=s,n[3]=o,e}function BT(t,e){if((0,Fe.bytes)(e,16),!MT(t))throw new Error("_decryptBlock accepts result of expandKeyLE");const n=(0,oe.u32)(e);let{s0:r,s1:i,s2:s,s3:o}=nf(t,n[0],n[1],n[2],n[3]);return n[0]=r,n[1]=i,n[2]=s,n[3]=o,e}ft.siv=(0,oe.wrapCipher)({blockSize:16,nonceLength:12,tagLength:16},function(t,e,n){const r=Rh("AAD",0,68719476736),i=Rh("plaintext",0,2**36),s=Rh("nonce",12,12),o=Rh("ciphertext",16,2**36+16);function a(){const u=Jr(t),d=new Uint8Array(t.length),f=new Uint8Array(16),h=[u,d];let m=e;(0,oe.isAligned32)(m)||h.push(m=(0,oe.copyBytes)(m));const g=(0,oe.u32)(m);let w=0,p=g[0],v=g[1],y=g[2],x=0;for(const B of[f,d].map(oe.u32)){const j=(0,oe.u32)(B);for(let M=0;M<j.length;M+=2){const{s0:K,s1:U}=yn(u,w,p,v,y);j[M+0]=K,j[M+1]=U,w=++x}}const T={authKey:f,encKey:Jr(d)};return(0,oe.clean)(...h),T}function l(u,d,f){const h=NT(Sw.polyval,!0,d,f,n);for(let y=0;y<12;y++)h[y]^=e[y];h[15]&=127;const m=(0,oe.u32)(h);let g=m[0],w=m[1],p=m[2],v=m[3];return{s0:g,s1:w,s2:p,s3:v}=yn(u,g,w,p,v),m[0]=g,m[1]=w,m[2]=p,m[3]=v,h}function c(u,d,f){let h=(0,oe.copyBytes)(d);h[15]|=128;const m=Gl(u,!0,h,f);return(0,oe.clean)(h),m}return(0,Fe.bytes)(t,16,24,32),(0,Fe.bytes)(e),s(e.length),n!==void 0&&((0,Fe.bytes)(n),r(n.length)),{encrypt(u){(0,Fe.bytes)(u),i(u.length);const{encKey:d,authKey:f}=a(),h=l(d,f,u),m=[d,f,h];(0,oe.isAligned32)(u)||m.push(u=(0,oe.copyBytes)(u));const g=new Uint8Array(u.length+16);return g.set(h,u.length),g.set(c(d,h,u)),(0,oe.clean)(...m),g},decrypt(u){(0,Fe.bytes)(u),o(u.length);const d=u.subarray(-16),{encKey:f,authKey:h}=a(),m=[f,h];(0,oe.isAligned32)(u)||m.push(u=(0,oe.copyBytes)(u));const g=c(f,d,u.subarray(0,-16)),w=l(f,h,g);if(m.push(w),!(0,oe.equalBytes)(d,w))throw(0,oe.clean)(...m),new Error("invalid polyval tag");return(0,oe.clean)(...m),g}}});const C0={encrypt(t,e){if(e.length>=2**32)throw new Error("plaintext should be less than 4gb");const n=Jr(t);if(e.length===16)LT(n,e);else{const r=(0,oe.u32)(e);let i=r[0],s=r[1];for(let o=0,a=1;o<6;o++)for(let l=2;l<r.length;l+=2,a++){const{s0:c,s1:u,s2:d,s3:f}=yn(n,i,s,r[l],r[l+1]);i=c,s=u^S0(a),r[l]=d,r[l+1]=f}r[0]=i,r[1]=s}n.fill(0)},decrypt(t,e){if(e.length-8>=2**32)throw new Error("ciphertext should be less than 4gb");const n=tf(t),r=e.length/8-1;if(r===1)BT(n,e);else{const i=(0,oe.u32)(e);let s=i[0],o=i[1];for(let a=0,l=6*r;a<6;a++)for(let c=2*r;c>=1;c-=2,l--){o^=S0(l);const{s0:u,s1:d,s2:f,s3:h}=nf(n,s,o,i[c],i[c+1]);s=u,o=d,i[c]=f,i[c+1]=h}i[0]=s,i[1]=o}n.fill(0)}},hS=new Uint8Array(8).fill(166);ft.aeskw=(0,oe.wrapCipher)({blockSize:8},t=>({encrypt(e){if((0,Fe.bytes)(e),!e.length||e.length%8!=0)throw new Error("invalid plaintext length");if(e.length===8)throw new Error("8-byte keys not allowed in AESKW, use AESKWP instead");const n=(0,oe.concatBytes)(hS,e);return C0.encrypt(t,n),n},decrypt(e){if((0,Fe.bytes)(e),e.length%8!=0||e.length<24)throw new Error("invalid ciphertext length");const n=(0,oe.copyBytes)(e);if(C0.decrypt(t,n),!(0,oe.equalBytes)(n.subarray(0,8),hS))throw new Error("integrity check failed");return n.subarray(0,8).fill(0),n.subarray(8)}}));const pS=2790873510;ft.aeskwp=(0,oe.wrapCipher)({blockSize:8},t=>({encrypt(e){if((0,Fe.bytes)(e),!e.length)throw new Error("invalid plaintext length");const n=8*Math.ceil(e.length/8),r=new Uint8Array(8+n);r.set(e,8);const i=(0,oe.u32)(r);return i[0]=pS,i[1]=S0(e.length),C0.encrypt(t,r),r},decrypt(e){if((0,Fe.bytes)(e),e.length<16)throw new Error("invalid ciphertext length");const n=(0,oe.copyBytes)(e),r=(0,oe.u32)(n);C0.decrypt(t,n);const i=S0(r[1])>>>0,s=8*Math.ceil(i/8);if(r[0]!==pS||n.length-8!==s)throw new Error("integrity check failed");for(let o=i;o<s;o++)if(n[8+o]!==0)throw new Error("integrity check failed");return n.subarray(0,8).fill(0),n.subarray(8,8+i)}})),ft.unsafe={expandKeyLE:Jr,expandKeyDecLE:tf,encrypt:yn,decrypt:nf,encryptBlock:LT,decryptBlock:BT,ctrCounter:OT,ctr32:Gl},Object.defineProperty(cc,"__esModule",{value:!0}),cc.aes256cbc=cc.aes256gcm=void 0;var DT=ft;cc.aes256gcm=function(t,e,n){return(0,DT.gcm)(t,e,n)};cc.aes256cbc=function(t,e,n){return(0,DT.cbc)(t,e)};var x0={},$T={},Wl={};Object.defineProperty(Wl,"__esModule",{value:!0}),Wl.sigma=void 0,Wl.rotl=function(t,e){return t<<e|t>>>32-e},Wl.createCipher=function(t,e){const{allowShortKeys:n,extendNonceFn:r,counterLength:i,counterRight:s,rounds:o}=(0,hr.checkOpts)({allowShortKeys:!1,counterLength:8,counterRight:!1,rounds:20},e);if(typeof t!="function")throw new Error("core must be a function");return(0,ji.number)(i),(0,ji.number)(o),(0,ji.bool)(s),(0,ji.bool)(n),(a,l,c,u,d=0)=>{(0,ji.bytes)(a),(0,ji.bytes)(l),(0,ji.bytes)(c);const f=c.length;if(u===void 0&&(u=new Uint8Array(f)),(0,ji.bytes)(u),(0,ji.number)(d),d<0||d>=gS)throw new Error("arx: counter overflow");if(u.length<f)throw new Error(`arx: output (${u.length}) is shorter than data (${f})`);const h=[];let m,g,w=a.length;if(w===32)h.push(m=(0,hr.copyBytes)(a)),g=FT;else{if(w!==16||!n)throw new Error(`arx: invalid 32-byte key, got length=${w}`);m=new Uint8Array(32),m.set(a),m.set(a,16),g=uD,h.push(m)}ny(l)||h.push(l=(0,hr.copyBytes)(l));const p=(0,hr.u32)(m);if(r){if(l.length!==24)throw new Error("arx: extended nonce must be 24 bytes");r(g,p,(0,hr.u32)(l.subarray(0,16)),p),l=l.subarray(16)}const v=16-i;if(v!==l.length)throw new Error(`arx: nonce must be ${v} or 16 bytes`);if(v!==12){const x=new Uint8Array(12);x.set(l,s?0:12-l.length),l=x,h.push(l)}const y=(0,hr.u32)(l);return function(x,T,B,j,M,K,U,W){const z=M.length,$=new Uint8Array(Ih),N=(0,hr.u32)($),C=ny(M)&&ny(K),O=C?(0,hr.u32)(M):mS,D=C?(0,hr.u32)(K):mS;for(let b=0;b<z;U++){if(x(T,B,j,N,U,W),U>=gS)throw new Error("arx: counter overflow");const E=Math.min(Ih,z-b);if(C&&E===Ih){const _=b/4;if(b%4!=0)throw new Error("arx: invalid block position");for(let I,A=0;A<dD;A++)I=_+A,D[I]=O[I]^N[A];b+=Ih}else{for(let _,I=0;I<E;I++)_=b+I,K[_]=M[_]^$[I];b+=E}}}(t,g,p,y,c,u,d,o),(0,hr.clean)(...h),u}};const ji=sn,hr=ar,UT=t=>Uint8Array.from(t.split("").map(e=>e.charCodeAt(0))),lD=UT("expand 16-byte k"),cD=UT("expand 32-byte k"),uD=(0,hr.u32)(lD),FT=(0,hr.u32)(cD);function ny(t){return t.byteOffset%4==0}Wl.sigma=FT.slice();const Ih=64,dD=16,gS=2**32-1,mS=new Uint32Array;var md={};Object.defineProperty(md,"__esModule",{value:!0}),md.poly1305=void 0,md.wrapConstructorWithKey=jT;const Oh=sn,nd=ar,Ut=(t,e)=>255&t[e++]|(255&t[e++])<<8;class fD{constructor(e){this.blockLen=16,this.outputLen=16,this.buffer=new Uint8Array(16),this.r=new Uint16Array(10),this.h=new Uint16Array(10),this.pad=new Uint16Array(8),this.pos=0,this.finished=!1,e=(0,nd.toBytes)(e),(0,Oh.bytes)(e,32);const n=Ut(e,0),r=Ut(e,2),i=Ut(e,4),s=Ut(e,6),o=Ut(e,8),a=Ut(e,10),l=Ut(e,12),c=Ut(e,14);this.r[0]=8191&n,this.r[1]=8191&(n>>>13|r<<3),this.r[2]=7939&(r>>>10|i<<6),this.r[3]=8191&(i>>>7|s<<9),this.r[4]=255&(s>>>4|o<<12),this.r[5]=o>>>1&8190,this.r[6]=8191&(o>>>14|a<<2),this.r[7]=8065&(a>>>11|l<<5),this.r[8]=8191&(l>>>8|c<<8),this.r[9]=c>>>5&127;for(let u=0;u<8;u++)this.pad[u]=Ut(e,16+2*u)}process(e,n,r=!1){const i=r?0:2048,{h:s,r:o}=this,a=o[0],l=o[1],c=o[2],u=o[3],d=o[4],f=o[5],h=o[6],m=o[7],g=o[8],w=o[9],p=Ut(e,n+0),v=Ut(e,n+2),y=Ut(e,n+4),x=Ut(e,n+6),T=Ut(e,n+8),B=Ut(e,n+10),j=Ut(e,n+12),M=Ut(e,n+14);let K=s[0]+(8191&p),U=s[1]+(8191&(p>>>13|v<<3)),W=s[2]+(8191&(v>>>10|y<<6)),z=s[3]+(8191&(y>>>7|x<<9)),$=s[4]+(8191&(x>>>4|T<<12)),N=s[5]+(T>>>1&8191),C=s[6]+(8191&(T>>>14|B<<2)),O=s[7]+(8191&(B>>>11|j<<5)),D=s[8]+(8191&(j>>>8|M<<8)),b=s[9]+(M>>>5|i),E=0,_=E+K*a+U*(5*w)+W*(5*g)+z*(5*m)+$*(5*h);E=_>>>13,_&=8191,_+=N*(5*f)+C*(5*d)+O*(5*u)+D*(5*c)+b*(5*l),E+=_>>>13,_&=8191;let I=E+K*l+U*a+W*(5*w)+z*(5*g)+$*(5*m);E=I>>>13,I&=8191,I+=N*(5*h)+C*(5*f)+O*(5*d)+D*(5*u)+b*(5*c),E+=I>>>13,I&=8191;let A=E+K*c+U*l+W*a+z*(5*w)+$*(5*g);E=A>>>13,A&=8191,A+=N*(5*m)+C*(5*h)+O*(5*f)+D*(5*d)+b*(5*u),E+=A>>>13,A&=8191;let S=E+K*u+U*c+W*l+z*a+$*(5*w);E=S>>>13,S&=8191,S+=N*(5*g)+C*(5*m)+O*(5*h)+D*(5*f)+b*(5*d),E+=S>>>13,S&=8191;let P=E+K*d+U*u+W*c+z*l+$*a;E=P>>>13,P&=8191,P+=N*(5*w)+C*(5*g)+O*(5*m)+D*(5*h)+b*(5*f),E+=P>>>13,P&=8191;let R=E+K*f+U*d+W*u+z*c+$*l;E=R>>>13,R&=8191,R+=N*a+C*(5*w)+O*(5*g)+D*(5*m)+b*(5*h),E+=R>>>13,R&=8191;let L=E+K*h+U*f+W*d+z*u+$*c;E=L>>>13,L&=8191,L+=N*l+C*a+O*(5*w)+D*(5*g)+b*(5*m),E+=L>>>13,L&=8191;let F=E+K*m+U*h+W*f+z*d+$*u;E=F>>>13,F&=8191,F+=N*c+C*l+O*a+D*(5*w)+b*(5*g),E+=F>>>13,F&=8191;let V=E+K*g+U*m+W*h+z*f+$*d;E=V>>>13,V&=8191,V+=N*u+C*c+O*l+D*a+b*(5*w),E+=V>>>13,V&=8191;let q=E+K*w+U*g+W*m+z*h+$*f;E=q>>>13,q&=8191,q+=N*d+C*u+O*c+D*l+b*a,E+=q>>>13,q&=8191,E=(E<<2)+E|0,E=E+_|0,_=8191&E,E>>>=13,I+=E,s[0]=_,s[1]=I,s[2]=A,s[3]=S,s[4]=P,s[5]=R,s[6]=L,s[7]=F,s[8]=V,s[9]=q}finalize(){const{h:e,pad:n}=this,r=new Uint16Array(10);let i=e[1]>>>13;e[1]&=8191;for(let a=2;a<10;a++)e[a]+=i,i=e[a]>>>13,e[a]&=8191;e[0]+=5*i,i=e[0]>>>13,e[0]&=8191,e[1]+=i,i=e[1]>>>13,e[1]&=8191,e[2]+=i,r[0]=e[0]+5,i=r[0]>>>13,r[0]&=8191;for(let a=1;a<10;a++)r[a]=e[a]+i,i=r[a]>>>13,r[a]&=8191;r[9]-=8192;let s=(1^i)-1;for(let a=0;a<10;a++)r[a]&=s;s=~s;for(let a=0;a<10;a++)e[a]=e[a]&s|r[a];e[0]=65535&(e[0]|e[1]<<13),e[1]=65535&(e[1]>>>3|e[2]<<10),e[2]=65535&(e[2]>>>6|e[3]<<7),e[3]=65535&(e[3]>>>9|e[4]<<4),e[4]=65535&(e[4]>>>12|e[5]<<1|e[6]<<14),e[5]=65535&(e[6]>>>2|e[7]<<11),e[6]=65535&(e[7]>>>5|e[8]<<8),e[7]=65535&(e[8]>>>8|e[9]<<5);let o=e[0]+n[0];e[0]=65535&o;for(let a=1;a<8;a++)o=(e[a]+n[a]|0)+(o>>>16)|0,e[a]=65535&o;(0,nd.clean)(r)}update(e){(0,Oh.exists)(this);const{buffer:n,blockLen:r}=this,i=(e=(0,nd.toBytes)(e)).length;for(let s=0;s<i;){const o=Math.min(r-this.pos,i-s);if(o!==r)n.set(e.subarray(s,s+o),this.pos),this.pos+=o,s+=o,this.pos===r&&(this.process(n,0,!1),this.pos=0);else for(;r<=i-s;s+=r)this.process(e,s)}return this}destroy(){(0,nd.clean)(this.h,this.r,this.buffer,this.pad)}digestInto(e){(0,Oh.exists)(this),(0,Oh.output)(e,this),this.finished=!0;const{buffer:n,h:r}=this;let{pos:i}=this;if(i){for(n[i++]=1;i<16;i++)n[i]=0;this.process(n,0,!0)}this.finalize();let s=0;for(let o=0;o<8;o++)e[s++]=r[o]>>>0,e[s++]=r[o]>>>8;return e}digest(){const{buffer:e,outputLen:n}=this;this.digestInto(e);const r=e.slice(0,n);return this.destroy(),r}}function jT(t){const e=(r,i)=>t(i).update((0,nd.toBytes)(r)).digest(),n=t(new Uint8Array(32));return e.outputLen=n.outputLen,e.blockLen=n.blockLen,e.create=r=>t(r),e}md.poly1305=jT(t=>new fD(t)),function(t){Object.defineProperty(t,"__esModule",{value:!0}),t.xchacha20poly1305=t.chacha20poly1305=t._poly1305_aead=t.chacha12=t.chacha8=t.xchacha20=t.chacha20=t.chacha20orig=void 0,t.hchacha=o;const e=Wl,n=sn,r=md,i=ar;function s(d,f,h,m,g,w=20){let p=d[0],v=d[1],y=d[2],x=d[3],T=f[0],B=f[1],j=f[2],M=f[3],K=f[4],U=f[5],W=f[6],z=f[7],$=g,N=h[0],C=h[1],O=h[2],D=p,b=v,E=y,_=x,I=T,A=B,S=j,P=M,R=K,L=U,F=W,V=z,q=$,Y=N,te=C,ie=O;for(let he=0;he<w;he+=2)D=D+I|0,q=(0,e.rotl)(q^D,16),R=R+q|0,I=(0,e.rotl)(I^R,12),D=D+I|0,q=(0,e.rotl)(q^D,8),R=R+q|0,I=(0,e.rotl)(I^R,7),b=b+A|0,Y=(0,e.rotl)(Y^b,16),L=L+Y|0,A=(0,e.rotl)(A^L,12),b=b+A|0,Y=(0,e.rotl)(Y^b,8),L=L+Y|0,A=(0,e.rotl)(A^L,7),E=E+S|0,te=(0,e.rotl)(te^E,16),F=F+te|0,S=(0,e.rotl)(S^F,12),E=E+S|0,te=(0,e.rotl)(te^E,8),F=F+te|0,S=(0,e.rotl)(S^F,7),_=_+P|0,ie=(0,e.rotl)(ie^_,16),V=V+ie|0,P=(0,e.rotl)(P^V,12),_=_+P|0,ie=(0,e.rotl)(ie^_,8),V=V+ie|0,P=(0,e.rotl)(P^V,7),D=D+A|0,ie=(0,e.rotl)(ie^D,16),F=F+ie|0,A=(0,e.rotl)(A^F,12),D=D+A|0,ie=(0,e.rotl)(ie^D,8),F=F+ie|0,A=(0,e.rotl)(A^F,7),b=b+S|0,q=(0,e.rotl)(q^b,16),V=V+q|0,S=(0,e.rotl)(S^V,12),b=b+S|0,q=(0,e.rotl)(q^b,8),V=V+q|0,S=(0,e.rotl)(S^V,7),E=E+P|0,Y=(0,e.rotl)(Y^E,16),R=R+Y|0,P=(0,e.rotl)(P^R,12),E=E+P|0,Y=(0,e.rotl)(Y^E,8),R=R+Y|0,P=(0,e.rotl)(P^R,7),_=_+I|0,te=(0,e.rotl)(te^_,16),L=L+te|0,I=(0,e.rotl)(I^L,12),_=_+I|0,te=(0,e.rotl)(te^_,8),L=L+te|0,I=(0,e.rotl)(I^L,7);let le=0;m[le++]=p+D|0,m[le++]=v+b|0,m[le++]=y+E|0,m[le++]=x+_|0,m[le++]=T+I|0,m[le++]=B+A|0,m[le++]=j+S|0,m[le++]=M+P|0,m[le++]=K+R|0,m[le++]=U+L|0,m[le++]=W+F|0,m[le++]=z+V|0,m[le++]=$+q|0,m[le++]=N+Y|0,m[le++]=C+te|0,m[le++]=O+ie|0}function o(d,f,h,m){let g=d[0],w=d[1],p=d[2],v=d[3],y=f[0],x=f[1],T=f[2],B=f[3],j=f[4],M=f[5],K=f[6],U=f[7],W=h[0],z=h[1],$=h[2],N=h[3];for(let O=0;O<20;O+=2)g=g+y|0,W=(0,e.rotl)(W^g,16),j=j+W|0,y=(0,e.rotl)(y^j,12),g=g+y|0,W=(0,e.rotl)(W^g,8),j=j+W|0,y=(0,e.rotl)(y^j,7),w=w+x|0,z=(0,e.rotl)(z^w,16),M=M+z|0,x=(0,e.rotl)(x^M,12),w=w+x|0,z=(0,e.rotl)(z^w,8),M=M+z|0,x=(0,e.rotl)(x^M,7),p=p+T|0,$=(0,e.rotl)($^p,16),K=K+$|0,T=(0,e.rotl)(T^K,12),p=p+T|0,$=(0,e.rotl)($^p,8),K=K+$|0,T=(0,e.rotl)(T^K,7),v=v+B|0,N=(0,e.rotl)(N^v,16),U=U+N|0,B=(0,e.rotl)(B^U,12),v=v+B|0,N=(0,e.rotl)(N^v,8),U=U+N|0,B=(0,e.rotl)(B^U,7),g=g+x|0,N=(0,e.rotl)(N^g,16),K=K+N|0,x=(0,e.rotl)(x^K,12),g=g+x|0,N=(0,e.rotl)(N^g,8),K=K+N|0,x=(0,e.rotl)(x^K,7),w=w+T|0,W=(0,e.rotl)(W^w,16),U=U+W|0,T=(0,e.rotl)(T^U,12),w=w+T|0,W=(0,e.rotl)(W^w,8),U=U+W|0,T=(0,e.rotl)(T^U,7),p=p+B|0,z=(0,e.rotl)(z^p,16),j=j+z|0,B=(0,e.rotl)(B^j,12),p=p+B|0,z=(0,e.rotl)(z^p,8),j=j+z|0,B=(0,e.rotl)(B^j,7),v=v+y|0,$=(0,e.rotl)($^v,16),M=M+$|0,y=(0,e.rotl)(y^M,12),v=v+y|0,$=(0,e.rotl)($^v,8),M=M+$|0,y=(0,e.rotl)(y^M,7);let C=0;m[C++]=g,m[C++]=w,m[C++]=p,m[C++]=v,m[C++]=W,m[C++]=z,m[C++]=$,m[C++]=N}t.chacha20orig=(0,e.createCipher)(s,{counterRight:!1,counterLength:8,allowShortKeys:!0}),t.chacha20=(0,e.createCipher)(s,{counterRight:!1,counterLength:4,allowShortKeys:!1}),t.xchacha20=(0,e.createCipher)(s,{counterRight:!1,counterLength:8,extendNonceFn:o,allowShortKeys:!1}),t.chacha8=(0,e.createCipher)(s,{counterRight:!1,counterLength:4,rounds:8}),t.chacha12=(0,e.createCipher)(s,{counterRight:!1,counterLength:4,rounds:12});const a=new Uint8Array(16),l=(d,f)=>{d.update(f);const h=f.length%16;h&&d.update(a.subarray(h))},c=new Uint8Array(32);function u(d,f,h,m,g){const w=d(f,h,c),p=r.poly1305.create(w);g&&l(p,g),l(p,m);const v=new Uint8Array(16),y=(0,i.createView)(v);(0,i.setBigUint64)(y,0,BigInt(g?g.length:0),!0),(0,i.setBigUint64)(y,8,BigInt(m.length),!0),p.update(v);const x=p.digest();return(0,i.clean)(w,v),x}t._poly1305_aead=d=>(f,h,m)=>((0,n.bytes)(f,32),(0,n.bytes)(h),{encrypt(w,p){const v=w.length,y=v+16;p?(0,n.bytes)(p,y):p=new Uint8Array(y),d(f,h,w,p,1);const x=u(d,f,h,p.subarray(0,-16),m);return p.set(x,v),(0,i.clean)(x),p},decrypt(w,p){const v=w.length,y=v-16;if(v<16)throw new Error("encrypted data must be at least 16 bytes");p?(0,n.bytes)(p,y):p=new Uint8Array(y);const x=w.subarray(0,-16),T=w.subarray(-16),B=u(d,f,h,x,m);if(!(0,i.equalBytes)(T,B))throw new Error("invalid tag");return d(f,h,x,p,1),(0,i.clean)(B),p}}),t.chacha20poly1305=(0,i.wrapCipher)({blockSize:64,nonceLength:12,tagLength:16},(0,t._poly1305_aead)(t.chacha20)),t.xchacha20poly1305=(0,i.wrapCipher)({blockSize:64,nonceLength:24,tagLength:16},(0,t._poly1305_aead)(t.xchacha20))}($T),Object.defineProperty(x0,"__esModule",{value:!0}),x0.xchacha20=void 0;var bl,yS,Hu,hD=$T;x0.xchacha20=function(t,e,n){return(0,hD.xchacha20poly1305)(t,e,n)},function(t){Object.defineProperty(t,"__esModule",{value:!0}),t.aesDecrypt=t.aesEncrypt=t.symDecrypt=t.symEncrypt=void 0;var e=ar,n=pb,r=cc,i=x0,s=Xd,o=It;t.symEncrypt=function(u,d,f){return a(l,u,d,f)};function a(u,d,f,h){var m=(0,s.symmetricAlgorithm)();if(m==="aes-256-gcm")return u(r.aes256gcm,d,f,(0,s.symmetricNonceLength)(),o.AEAD_TAG_LENGTH,h);if(m==="xchacha20")return u(i.xchacha20,d,f,o.XCHACHA20_NONCE_LENGTH,o.AEAD_TAG_LENGTH,h);if(m==="aes-256-cbc")return u(r.aes256cbc,d,f,16,0);throw new Error("Not implemented")}function l(u,d,f,h,m,g){var w=(0,n.randomBytes)(h),p=u(d,w,g).encrypt(f);if(m===0)return(0,e.concatBytes)(w,p);var v=p.length-m,y=p.subarray(0,v),x=p.subarray(v);return(0,e.concatBytes)(w,x,y)}function c(u,d,f,h,m,g){var w=f.subarray(0,h),p=u(d,Uint8Array.from(w),g),v=f.subarray(h);if(m===0)return p.decrypt(v);var y=v.subarray(0,m),x=v.subarray(m);return p.decrypt((0,e.concatBytes)(x,y))}t.symDecrypt=function(u,d,f){return a(c,u,d,f)},t.aesEncrypt=t.symEncrypt,t.aesDecrypt=t.symDecrypt}(aS),bl=Ng,yS=Pr&&Pr.__createBinding||(Object.create?function(t,e,n,r){r===void 0&&(r=n);var i=Object.getOwnPropertyDescriptor(e,n);i&&!("get"in i?!e.__esModule:i.writable||i.configurable)||(i={enumerable:!0,get:function(){return e[n]}}),Object.defineProperty(t,r,i)}:function(t,e,n,r){r===void 0&&(r=n),t[r]=e[n]}),Hu=Pr&&Pr.__exportStar||function(t,e){for(var n in t)n==="default"||Object.prototype.hasOwnProperty.call(e,n)||yS(e,t,n)},Object.defineProperty(bl,"__esModule",{value:!0}),Hu(KP,bl),Hu(CT,bl),Hu(Ew,bl),Hu(aS,bl);var rf={};Object.defineProperty(rf,"__esModule",{value:!0}),rf.PublicKey=void 0;var vS=ar,Nh=Ng,pD=function(){function t(e){this.data=(0,Nh.convertPublicKeyFormat)(e,!0)}return t.fromHex=function(e){return new t((0,Nh.hexToPublicKey)(e))},Object.defineProperty(t.prototype,"uncompressed",{get:function(){return re.from((0,Nh.convertPublicKeyFormat)(this.data,!1))},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"compressed",{get:function(){return re.from(this.data)},enumerable:!1,configurable:!0}),t.prototype.toHex=function(e){return e===void 0&&(e=!0),(0,vS.bytesToHex)(e?this.data:this.uncompressed)},t.prototype.decapsulate=function(e,n){n===void 0&&(n=!1);var r=n?this.data:this.uncompressed,i=e.multiply(this,n);return(0,Nh.getSharedKey)(r,i)},t.prototype.equals=function(e){return(0,vS.equalBytes)(this.data,e.data)},t}();rf.PublicKey=pD,Object.defineProperty(w0,"__esModule",{value:!0}),w0.PrivateKey=void 0;var wS=ar,El=Ng,gD=rf,mD=function(){function t(e){if(e===void 0)this.data=(0,El.getValidSecret)();else{if(!(0,El.isValidPrivateKey)(e))throw new Error("Invalid private key");this.data=e}this.publicKey=new gD.PublicKey((0,El.getPublicKey)(this.data))}return t.fromHex=function(e){return new t((0,El.decodeHex)(e))},Object.defineProperty(t.prototype,"secret",{get:function(){return re.from(this.data)},enumerable:!1,configurable:!0}),t.prototype.toHex=function(){return(0,wS.bytesToHex)(this.data)},t.prototype.encapsulate=function(e,n){n===void 0&&(n=!1);var r=n?this.publicKey.compressed:this.publicKey.uncompressed,i=this.multiply(e,n);return(0,El.getSharedKey)(r,i)},t.prototype.multiply=function(e,n){return n===void 0&&(n=!1),(0,El.getSharedPoint)(this.data,e.compressed,n)},t.prototype.equals=function(e){return(0,wS.equalBytes)(this.data,e.data)},t}();w0.PrivateKey=mD,function(t){Object.defineProperty(t,"__esModule",{value:!0}),t.PublicKey=t.PrivateKey=void 0;var e=w0;Object.defineProperty(t,"PrivateKey",{enumerable:!0,get:function(){return e.PrivateKey}});var n=rf;Object.defineProperty(t,"PublicKey",{enumerable:!0,get:function(){return n.PublicKey}})}(jm),function(t){Object.defineProperty(t,"__esModule",{value:!0}),t.utils=t.PublicKey=t.PrivateKey=t.ECIES_CONFIG=void 0,t.encrypt=function(a,l){var c=new r.PrivateKey,u=a instanceof Uint8Array?new r.PublicKey(a):r.PublicKey.fromHex(a),d=c.encapsulate(u,(0,n.isHkdfKeyCompressed)()),f=(0,n.isEphemeralKeyCompressed)()?c.publicKey.compressed:c.publicKey.uncompressed,h=(0,i.symEncrypt)(d,l);return re.from((0,e.concatBytes)(f,h))},t.decrypt=function(a,l){var c=a instanceof Uint8Array?new r.PrivateKey(a):r.PrivateKey.fromHex(a),u=(0,n.ephemeralKeySize)(),d=new r.PublicKey(l.subarray(0,u)),f=l.subarray(u),h=d.decapsulate(c,(0,n.isHkdfKeyCompressed)());return re.from((0,i.symDecrypt)(h,f))};var e=ar,n=Xd,r=jm,i=Ng,s=Xd;Object.defineProperty(t,"ECIES_CONFIG",{enumerable:!0,get:function(){return s.ECIES_CONFIG}});var o=jm;Object.defineProperty(t,"PrivateKey",{enumerable:!0,get:function(){return o.PrivateKey}}),Object.defineProperty(t,"PublicKey",{enumerable:!0,get:function(){return o.PublicKey}}),t.utils={aesEncrypt:i.aesEncrypt,aesDecrypt:i.aesDecrypt,symEncrypt:i.symEncrypt,symDecrypt:i.symDecrypt,decodeHex:i.decodeHex,getValidSecret:i.getValidSecret,remove0x:i.remove0x}}(kl);const HT=An("KeyExchange:Layer"),KT=An("SocketService:Layer"),zT=An("Ecies:Layer"),VT=An("RemoteCommunication:Layer");HT.color="##95c44e",KT.color="#f638d7",zT.color="#465b9c",VT.color="#47a2be";const J={KeyExchange:HT,SocketService:KT,Ecies:zT,RemoteCommunication:VT};let Ku,Mh=[],ry=[];const _s=(t,e)=>ne(void 0,void 0,void 0,function*(){Ku=e,ry.push(t),function(n){return ne(this,void 0,void 0,function*(){if(!Ku||!n)return;(function(){const o=ry;ry=Mh,Mh=o})();const r=Ku.endsWith("/")?`${Ku}evt`:`${Ku}/evt`,i=Object.assign({},n);if(delete i.params,n.params)for(const[o,a]of Object.entries(n.params))i[o]=a;const s=JSON.stringify(i);J.RemoteCommunication(`[sendBufferedEvents] Sending ${Mh.length} analytics events to ${r}`);try{const o=yield rP(r,{method:"POST",headers:{Accept:"application/json","Content-Type":"application/json"},body:s}),a=yield o.text();J.RemoteCommunication(`[sendBufferedEvents] Response: ${a}`),Mh.length=0}catch{}})}(t).catch(()=>{})});class iy{constructor(e){this.enabled=!0,e!=null&&e.debug&&An.enable("Ecies:Layer"),this.ecies=e!=null&&e.privateKey?kl.PrivateKey.fromHex(e.privateKey):new kl.PrivateKey,J.Ecies("[ECIES constructor()] initialized secret: ",this.ecies.toHex()),J.Ecies("[ECIES constructor()] initialized public: ",this.ecies.publicKey.toHex()),J.Ecies("[ECIES constructor()] init with",this)}generateECIES(){this.ecies=new kl.PrivateKey}getPublicKey(){return this.ecies.publicKey.toHex()}encrypt(e,n){let r=e;if(this.enabled)try{J.Ecies("[ECIES: encrypt()] using otherPublicKey",n);const i=re.from(e),s=kl.encrypt(n,i);r=re.from(s).toString("base64")}catch(i){throw J.Ecies("[ECIES: encrypt()] error encrypt:",i),J.Ecies("[ECIES: encrypt()] private: ",this.ecies.toHex()),J.Ecies("[ECIES: encrypt()] data: ",e),J.Ecies("[ECIES: encrypt()] otherkey: ",n),i}return r}decrypt(e){let n=e;if(this.enabled)try{J.Ecies("[ECIES: decrypt()] using privateKey",this.ecies.toHex());const r=re.from(e.toString(),"base64");n=kl.decrypt(this.ecies.toHex(),r).toString()}catch(r){throw J.Ecies("[ECIES: decrypt()] error decrypt",r),J.Ecies("[ECIES: decrypt()] private: ",this.ecies.toHex()),J.Ecies("[ECIES: decrypt()] encryptedData: ",e),r}return n}getKeyInfo(){return{private:this.ecies.toHex(),public:this.ecies.publicKey.toHex()}}toString(){J.Ecies("[ECIES: toString()]",this.getKeyInfo())}}var zo={version:"0.33.0"};const gu="https://metamask-sdk.api.cx.metamask.io/",yD=["websocket"],mu=6048e5,vD=3e3,Xt={METAMASK_CONNECTSIGN:"metamask_connectSign",METAMASK_CONNECTWITH:"metamask_connectWith",METAMASK_OPEN:"metamask_open",METAMASK_BATCH:"metamask_batch",PERSONAL_SIGN:"personal_sign",WALLET_REQUESTPERMISSIONS:"wallet_requestPermissions",WALLET_REVOKEPERMISSIONS:"wallet_revokePermissions",WALLET_WATCHASSET:"wallet_watchAsset",ETH_REQUESTACCOUNTS:"eth_requestAccounts",ETH_SENDTRANSACTION:"eth_sendTransaction",ETH_SIGNTYPEDDATA:"eth_signTypedData",ETH_SIGNTYPEDDATA_V3:"eth_signTypedData_v3",ETH_SIGNTYPEDDATA_V4:"eth_signTypedData_v4",ETH_SIGNTRANSACTION:"eth_signTransaction",ETH_SIGN:"eth_sign",PERSONAL_EC_RECOVER:"personal_ecRecover"},wD=[Xt.METAMASK_CONNECTSIGN,Xt.METAMASK_CONNECTWITH,Xt.METAMASK_OPEN,Xt.METAMASK_BATCH,Xt.PERSONAL_SIGN,Xt.WALLET_REQUESTPERMISSIONS,Xt.WALLET_REVOKEPERMISSIONS,Xt.WALLET_WATCHASSET,Xt.ETH_SENDTRANSACTION,Xt.ETH_SIGNTYPEDDATA,Xt.ETH_SIGNTYPEDDATA_V3,Xt.ETH_SIGNTYPEDDATA_V4,Xt.ETH_SIGNTRANSACTION,Xt.ETH_SIGN,Xt.PERSONAL_EC_RECOVER];function jf(t){return wD.includes(t)}function GT(t){const{context:e}=t;J.RemoteCommunication(`[RemoteCommunication: clean()] context=${e}`),t.channelConfig=void 0,t.ready=!1,t.originatorConnectStarted=!1}var Gt,ae,k0,Ge,at,Et,Al;(Al=Gt||(Gt={})).DISCONNECTED="disconnected",Al.WAITING="waiting",Al.TIMEOUT="timeout",Al.LINKED="linked",Al.PAUSED="paused",Al.TERMINATED="terminated",function(t){t.KEY_INFO="key_info",t.SERVICE_STATUS="service_status",t.PROVIDER_UPDATE="provider_update",t.RPC_UPDATE="rpc_update",t.KEYS_EXCHANGED="keys_exchanged",t.JOIN_CHANNEL="join_channel",t.PUBLIC_KEY="public_key",t.CHANNEL_CREATED="channel_created",t.CLIENTS_CONNECTED="clients_connected",t.CLIENTS_DISCONNECTED="clients_disconnected",t.CLIENTS_WAITING="clients_waiting",t.CLIENTS_READY="clients_ready",t.REJECTED="rejected",t.WALLET_INIT="wallet_init",t.CHANNEL_PERSISTENCE="channel_persistence",t.CONFIG="config",t.MESSAGE_ACK="ack",t.SOCKET_DISCONNECTED="socket_disconnected",t.SOCKET_RECONNECT="socket_reconnect",t.OTP="otp",t.SDK_RPC_CALL="sdk_rpc_call",t.AUTHORIZED="authorized",t.CONNECTION_STATUS="connection_status",t.MESSAGE="message",t.TERMINATE="terminate"}(ae||(ae={})),(k0||(k0={})).KEY_EXCHANGE="key_exchange",function(t){t.KEY_HANDSHAKE_START="key_handshake_start",t.KEY_HANDSHAKE_CHECK="key_handshake_check",t.KEY_HANDSHAKE_SYN="key_handshake_SYN",t.KEY_HANDSHAKE_SYNACK="key_handshake_SYNACK",t.KEY_HANDSHAKE_ACK="key_handshake_ACK",t.KEY_HANDSHAKE_WALLET="key_handshake_wallet",t.KEY_HANDSHAKE_NONE="none"}(Ge||(Ge={}));class bD extends Pg.EventEmitter2{constructor({communicationLayer:e,otherPublicKey:n,context:r,ecies:i,logging:s}){super(),this.keysExchanged=!1,this.step=Ge.KEY_HANDSHAKE_NONE,this.debug=!1,this.context=r,this.communicationLayer=e,i!=null&&i.privateKey&&n&&(J.KeyExchange(`[KeyExchange: constructor()] otherPubKey=${n} set keysExchanged to true!`,i),this.keysExchanged=!0),this.myECIES=new iy(Object.assign(Object.assign({},i),{debug:s==null?void 0:s.eciesLayer})),this.communicationLayer.state.eciesInstance=this.myECIES,this.myPublicKey=this.myECIES.getPublicKey(),this.debug=(s==null?void 0:s.keyExchangeLayer)===!0,n&&this.setOtherPublicKey(n),this.communicationLayer.on(k0.KEY_EXCHANGE,this.onKeyExchangeMessage.bind(this))}onKeyExchangeMessage(e){const{relayPersistence:n}=this.communicationLayer.remote.state;if(J.KeyExchange(`[KeyExchange: onKeyExchangeMessage()] context=${this.context} keysExchanged=${this.keysExchanged} relayPersistence=${n}`,e),n)return void J.KeyExchange("[KeyExchange: onKeyExchangeMessage()] Ignoring key exchange message because relay persistence is activated");const{message:r}=e;this.keysExchanged&&J.KeyExchange(`[KeyExchange: onKeyExchangeMessage()] context=${this.context} received handshake while already exchanged. step=${this.step} otherPubKey=${this.otherPublicKey}`),this.emit(ae.KEY_INFO,r.type),r.type===Ge.KEY_HANDSHAKE_SYN?(this.checkStep([Ge.KEY_HANDSHAKE_NONE,Ge.KEY_HANDSHAKE_ACK]),J.KeyExchange("[KeyExchange: onKeyExchangeMessage()] KEY_HANDSHAKE_SYN",r),r.pubkey&&this.setOtherPublicKey(r.pubkey),this.communicationLayer.sendMessage({type:Ge.KEY_HANDSHAKE_SYNACK,pubkey:this.myPublicKey}).catch(i=>{J.KeyExchange("[KeyExchange: onKeyExchangeMessage()] Error sending KEY_HANDSHAKE_SYNACK",i)}),this.setStep(Ge.KEY_HANDSHAKE_ACK)):r.type===Ge.KEY_HANDSHAKE_SYNACK?(this.checkStep([Ge.KEY_HANDSHAKE_SYNACK,Ge.KEY_HANDSHAKE_ACK,Ge.KEY_HANDSHAKE_NONE]),J.KeyExchange("[KeyExchange: onKeyExchangeMessage()] KEY_HANDSHAKE_SYNACK"),r.pubkey&&this.setOtherPublicKey(r.pubkey),this.communicationLayer.sendMessage({type:Ge.KEY_HANDSHAKE_ACK}).catch(i=>{J.KeyExchange("[KeyExchange: onKeyExchangeMessage()] Error sending KEY_HANDSHAKE_ACK",i)}),this.keysExchanged=!0,this.setStep(Ge.KEY_HANDSHAKE_ACK),this.emit(ae.KEYS_EXCHANGED)):r.type===Ge.KEY_HANDSHAKE_ACK&&(J.KeyExchange("[KeyExchange: onKeyExchangeMessage()] KEY_HANDSHAKE_ACK set keysExchanged to true!"),this.checkStep([Ge.KEY_HANDSHAKE_ACK,Ge.KEY_HANDSHAKE_NONE]),this.keysExchanged=!0,this.setStep(Ge.KEY_HANDSHAKE_ACK),this.emit(ae.KEYS_EXCHANGED))}resetKeys(e){this.clean(),this.myECIES=new iy(e)}clean(){J.KeyExchange(`[KeyExchange: clean()] context=${this.context} reset handshake state`),this.setStep(Ge.KEY_HANDSHAKE_NONE),this.emit(ae.KEY_INFO,this.step),this.keysExchanged=!1}start({isOriginator:e,force:n}){const{relayPersistence:r,protocolVersion:i}=this.communicationLayer.remote.state,s=i>=2;r?J.KeyExchange("[KeyExchange: start()] Ignoring key exchange message because relay persistence is activated"):(J.KeyExchange(`[KeyExchange: start()] context=${this.context} protocolVersion=${i} isOriginator=${e} step=${this.step} force=${n} relayPersistence=${r} keysExchanged=${this.keysExchanged}`),e?!(this.keysExchanged||this.step!==Ge.KEY_HANDSHAKE_NONE&&this.step!==Ge.KEY_HANDSHAKE_SYNACK)||n?(J.KeyExchange(`[KeyExchange: start()] context=${this.context} -- start key exchange (force=${n}) -- step=${this.step}`,this.step),this.clean(),this.setStep(Ge.KEY_HANDSHAKE_SYNACK),this.communicationLayer.sendMessage({type:Ge.KEY_HANDSHAKE_SYN,pubkey:this.myPublicKey,v:2}).catch(o=>{J.KeyExchange("[KeyExchange: start()] Error sending KEY_HANDSHAKE_SYN",o)})):J.KeyExchange(`[KeyExchange: start()] context=${this.context} -- key exchange already ${this.keysExchanged?"done":"in progress"} -- aborted.`,this.step):this.keysExchanged&&n!==!0?J.KeyExchange("[KeyExchange: start()] don't send KEY_HANDSHAKE_START -- exchange already done."):s?this.communicationLayer.sendMessage({type:Ge.KEY_HANDSHAKE_SYNACK,pubkey:this.myPublicKey,v:2}).catch(o=>{J.KeyExchange("[KeyExchange: start()] Error sending KEY_HANDSHAKE_SYNACK",o)}):(this.communicationLayer.sendMessage({type:Ge.KEY_HANDSHAKE_START}).catch(o=>{J.KeyExchange("[KeyExchange: start()] Error sending KEY_HANDSHAKE_START",o)}),this.clean()))}setStep(e){this.step=e,this.emit(ae.KEY_INFO,e)}checkStep(e){e.length>0&&e.indexOf(this.step.toString())}setRelayPersistence({localKey:e,otherKey:n}){this.otherPublicKey=n,this.myECIES=new iy({privateKey:e,debug:this.debug}),this.keysExchanged=!0}setKeysExchanged(e){this.keysExchanged=e}areKeysExchanged(){return this.keysExchanged}getMyPublicKey(){return this.myPublicKey}getOtherPublicKey(){return this.otherPublicKey}setOtherPublicKey(e){J.KeyExchange("[KeyExchange: setOtherPubKey()]",e),this.otherPublicKey=e}encryptMessage(e){if(!this.otherPublicKey)throw new Error("encryptMessage: Keys not exchanged - missing otherPubKey");return this.myECIES.encrypt(e,this.otherPublicKey)}decryptMessage(e){if(!this.otherPublicKey)throw new Error("decryptMessage: Keys not exchanged - missing otherPubKey");return this.myECIES.decrypt(e)}getKeyInfo(){return{ecies:Object.assign(Object.assign({},this.myECIES.getKeyInfo()),{otherPubKey:this.otherPublicKey}),step:this.step,keysExchanged:this.areKeysExchanged()}}toString(){const e={keyInfo:this.getKeyInfo(),keysExchanged:this.keysExchanged,step:this.step};return JSON.stringify(e)}}(function(t){t.TERMINATE="terminate",t.ANSWER="answer",t.OFFER="offer",t.CANDIDATE="candidate",t.JSONRPC="jsonrpc",t.WALLET_INFO="wallet_info",t.WALLET_INIT="wallet_init",t.ORIGINATOR_INFO="originator_info",t.PAUSE="pause",t.OTP="otp",t.AUTHORIZED="authorized",t.PING="ping",t.READY="ready"})(at||(at={})),function(t){t.REQUEST="sdk_connect_request_started",t.REQUEST_MOBILE="sdk_connect_request_started_mobile",t.RECONNECT="sdk_reconnect_request_started",t.CONNECTED="sdk_connection_established",t.CONNECTED_MOBILE="sdk_connection_established_mobile",t.AUTHORIZED="sdk_connection_authorized",t.REJECTED="sdk_connection_rejected",t.TERMINATED="sdk_connection_terminated",t.DISCONNECTED="sdk_disconnected",t.SDK_USE_EXTENSION="sdk_use_extension",t.SDK_RPC_REQUEST="sdk_rpc_request",t.SDK_RPC_REQUEST_RECEIVED="sdk_rpc_request_received",t.SDK_RPC_REQUEST_DONE="sdk_rpc_request_done",t.SDK_EXTENSION_UTILIZED="sdk_extension_utilized",t.SDK_USE_INAPP_BROWSER="sdk_use_inapp_browser"}(Et||(Et={}));const vp=(t,e,n)=>ne(void 0,void 0,void 0,function*(){var r,i,s,o,a,l;const{remote:c,state:u}=t,{channelId:d,isOriginator:f}=u;if(e==="error_terminated")return J.SocketService(`handleJoinChannelResults: Channel ${d} terminated`),void t.emit(ae.TERMINATE);if(!n)return void J.SocketService(`handleJoinChannelResults: No result for channel ${d}`);const{persistence:h,walletKey:m,rejected:g}=n;if(J.SocketService(`handleJoinChannelResults: Channel ${d} persistence=${h} walletKey=${m} rejected=${g}`),g)return J.SocketService(`handleJoinChannelResults: Channel ${d} rejected`),yield t.remote.disconnect({terminate:!0}),t.remote.emit(ae.REJECTED,{channelId:d}),void t.remote.emitServiceStatusEvent();if(m&&!(!((r=c.state.channelConfig)===null||r===void 0)&&r.otherKey)){t.getKeyExchange().setOtherPublicKey(m),(i=t.state.keyExchange)===null||i===void 0||i.setKeysExchanged(!0),c.state.ready=!0,c.state.authorized=!0,c.emit(ae.AUTHORIZED);const{communicationLayer:w,storageManager:p}=c.state,v=Object.assign(Object.assign({},c.state.channelConfig),{channelId:(s=c.state.channelId)!==null&&s!==void 0?s:"",validUntil:Date.now()+mu,localKey:w==null?void 0:w.getKeyInfo().ecies.private,otherKey:m});t.sendMessage({type:Ge.KEY_HANDSHAKE_ACK}).catch(y=>{}),(o=t.state.socket)===null||o===void 0||o.emit(at.PING,{id:d,clientType:f?"dapp":"wallet",context:"on_channel_reconnect",message:""}),yield p==null?void 0:p.persistChannelConfig(v),c.emitServiceStatusEvent(),c.setConnectionStatus(Gt.LINKED)}h&&(t.emit(ae.CHANNEL_PERSISTENCE),(a=t.state.keyExchange)===null||a===void 0||a.setKeysExchanged(!0),c.state.ready=!0,c.state.authorized=!0,c.emit(ae.AUTHORIZED),_s(Object.assign(Object.assign({id:d??"",event:f?Et.CONNECTED:Et.CONNECTED_MOBILE},t.remote.state.originatorInfo),{sdkVersion:t.remote.state.sdkVersion,commLayer:t.state.communicationLayerPreference,commLayerVersion:zo.version,walletVersion:(l=t.remote.state.walletInfo)===null||l===void 0?void 0:l.version}),u.communicationServerUrl).catch(w=>{}))}),dc=t=>new Promise(e=>{setTimeout(e,t)}),bS=(t,e,...n)=>ne(void 0,[t,e,...n],void 0,function*(r,i,s=200){let o;const a=Date.now();let l=!1;for(;!l;){if(l=Date.now()-a>3e5,o=i[r],o.elapsedTime!==void 0)return o;yield dc(s)}throw new Error(`RPC ${r} timed out`)}),xw=t=>ne(void 0,void 0,void 0,function*(){const{state:e}=t,{socket:n,channelId:r,context:i,isOriginator:s,isReconnecting:o}=e;if(o)return J.SocketService("[SocketService: reconnectSocket()] Reconnection already in progress, skipping",t),!1;if(!n)return J.SocketService("[SocketService: reconnectSocket()] socket is not defined",t),!1;if(!r)return!1;const{connected:a}=n;e.isReconnecting=!0,e.reconnectionAttempts=0,J.SocketService(`[SocketService: reconnectSocket()] connected=${a} trying to reconnect after socketio disconnection`,t);try{for(;3>e.reconnectionAttempts;){if(J.SocketService(`[SocketService: reconnectSocket()] Attempt ${e.reconnectionAttempts+1} of 3`,t),yield dc(200),n.connected)return J.SocketService("Socket already connected --- ping to retrieve messages"),n.emit(at.PING,{id:r,clientType:s?"dapp":"wallet",context:"on_channel_config",message:""}),!0;e.resumed=!0,n.connect(),t.emit(ae.SOCKET_RECONNECT);try{if(yield new Promise((l,c)=>{n.emit(ae.JOIN_CHANNEL,{channelId:r,context:`${i}connect_again`,clientType:s?"dapp":"wallet"},(u,d)=>ne(void 0,void 0,void 0,function*(){try{yield vp(t,u,d),l()}catch(f){c(f)}}))}),yield dc(100),n.connected)return J.SocketService(`Reconnection successful on attempt ${e.reconnectionAttempts+1}`),!0}catch(l){J.SocketService(`Error during reconnection attempt ${e.reconnectionAttempts+1}:`,l)}e.reconnectionAttempts+=1,3>e.reconnectionAttempts&&(yield dc(200))}return J.SocketService("Failed to reconnect after 3 attempts"),!1}finally{e.isReconnecting=!1,e.reconnectionAttempts=0}});function WT(t,e){return ne(this,void 0,void 0,function*(){var n;const r=(n=t.state.keyExchange)===null||n===void 0?void 0:n.encryptMessage(JSON.stringify(e)),i={id:t.state.channelId,context:t.state.context,clientType:t.state.isOriginator?"dapp":"wallet",message:r,plaintext:t.state.hasPlaintext?JSON.stringify(e):void 0};return J.SocketService(`[SocketService: encryptAndSendMessage()] context=${t.state.context}`,i),e.type===at.TERMINATE&&(t.state.manualDisconnect=!0),new Promise((s,o)=>{var a;(a=t.state.socket)===null||a===void 0||a.emit(ae.MESSAGE,i,(l,c)=>{var u;l&&(J.SocketService(`[SocketService: encryptAndSendMessage()] error=${l}`),o(l)),J.SocketService("[encryptAndSendMessage] response",c),s((u=c==null?void 0:c.success)!==null&&u!==void 0&&u)})})})}var ql;(function(t){t.RPC_CHECK="rpcCheck",t.SKIPPED_RPC="skippedRpc"})(ql||(ql={}));const qT=["eth_sendTransaction","eth_signTypedData","eth_signTransaction","personal_sign","wallet_requestPermissions","wallet_switchEthereumChain","eth_signTypedData_v3","eth_signTypedData_v4","metamask_connectSign","metamask_connectWith","metamask_batch"].map(t=>t.toLowerCase()),ED=[{event:ae.CLIENTS_CONNECTED,handler:function(t,e){return n=>ne(this,void 0,void 0,function*(){var r,i,s,o,a,l,c,u,d,f,h;const m=(i=(r=t.remote.state.channelConfig)===null||r===void 0?void 0:r.relayPersistence)!==null&&i!==void 0&&i;if(J.SocketService(`[SocketService: handleClientsConnected()] context=${t.state.context} on 'clients_connected-${e}' relayPersistence=${m} resumed=${t.state.resumed}  clientsPaused=${t.state.clientsPaused} keysExchanged=${(s=t.state.keyExchange)===null||s===void 0?void 0:s.areKeysExchanged()} isOriginator=${t.state.isOriginator}`),t.emit(ae.CLIENTS_CONNECTED,{isOriginator:t.state.isOriginator,keysExchanged:(o=t.state.keyExchange)===null||o===void 0?void 0:o.areKeysExchanged(),context:t.state.context}),t.state.resumed)t.state.isOriginator||(J.SocketService(`[SocketService: handleClientsConnected()] context=${t.state.context} 'clients_connected' / keysExchanged=${(a=t.state.keyExchange)===null||a===void 0?void 0:a.areKeysExchanged()} -- backward compatibility`),(l=t.state.keyExchange)===null||l===void 0||l.start({isOriginator:(c=t.state.isOriginator)!==null&&c!==void 0&&c})),t.state.resumed=!1;else if(t.state.clientsPaused)J.SocketService("[SocketService: handleClientsConnected()] 'clients_connected' skip sending originatorInfo on pause");else if(!t.state.isOriginator){const g=!m;J.SocketService(`[SocketService: handleClientsConnected()] context=${t.state.context} on 'clients_connected' / keysExchanged=${(u=t.state.keyExchange)===null||u===void 0?void 0:u.areKeysExchanged()} -- force=${g} -- backward compatibility`),J.SocketService(`[SocketService: handleClientsConnected()] context=${t.state.context} on 'clients_connected' / keysExchanged=${(d=t.state.keyExchange)===null||d===void 0?void 0:d.areKeysExchanged()} -- force=${g} -- backward compatibility`),(f=t.state.keyExchange)===null||f===void 0||f.start({isOriginator:(h=t.state.isOriginator)!==null&&h!==void 0&&h,force:g})}t.state.clientsConnected=!0,t.state.clientsPaused=!1})}},{event:ae.CHANNEL_CREATED,handler:function(t,e){return n=>{J.SocketService(`[SocketService: handleChannelCreated()] context=${t.state.context} on 'channel_created-${e}'`,n),t.emit(ae.CHANNEL_CREATED,n)}}},{event:ae.CLIENTS_DISCONNECTED,handler:function(t,e){return()=>{var n;t.state.clientsConnected=!1,J.SocketService(`[SocketService: handlesClientsDisconnected()] context=${t.state.context} on 'clients_disconnected-${e}'`),t.remote.state.relayPersistence?J.SocketService(`[SocketService: handlesClientsDisconnected()] context=${t.state.context} on 'clients_disconnected-${e}' - relayPersistence enabled, skipping key exchange cleanup.`):(t.state.isOriginator&&!t.state.clientsPaused&&((n=t.state.keyExchange)===null||n===void 0||n.clean()),t.emit(ae.CLIENTS_DISCONNECTED,e))}}},{event:ae.CONFIG,handler:function(t,e){return n=>ne(this,void 0,void 0,function*(){var r,i,s;J.SocketService(`[SocketService: handleChannelConfig()] update relayPersistence on 'config-${e}'`,n);const{persistence:o,walletKey:a}=n;t.state.isOriginator&&t.remote.state.channelConfig?(n.walletKey&&!t.remote.state.channelConfig.otherKey&&(J.SocketService(`Setting wallet key ${a}`),t.remote.state.channelConfig.otherKey=a,t.getKeyExchange().setOtherPublicKey(n.walletKey),(r=t.state.keyExchange)===null||r===void 0||r.setKeysExchanged(!0),yield t.remote.sendMessage({type:Ge.KEY_HANDSHAKE_ACK}),yield t.remote.sendMessage({type:at.PING}),yield(i=t.remote.state.storageManager)===null||i===void 0?void 0:i.persistChannelConfig(t.remote.state.channelConfig)),o!==!0||t.remote.state.channelConfig.relayPersistence||(J.SocketService(`Setting relay persistence ${o}`),t.remote.state.channelConfig.relayPersistence=o,t.remote.state.relayPersistence=!0,t.remote.emit(ae.CHANNEL_PERSISTENCE),t.remote.state.authorized=!0,t.remote.state.ready=!0,t.remote.emit(ae.AUTHORIZED),yield(s=t.remote.state.storageManager)===null||s===void 0?void 0:s.persistChannelConfig(t.remote.state.channelConfig))):t.state.isOriginator||n.persistence&&(t.remote.state.relayPersistence=!0,t.remote.emit(ae.CHANNEL_PERSISTENCE))})}},{event:ae.MESSAGE,handler:function(t,e){return n=>{var r,i,s,o,a,l,c,u,d,f,h,m,g,w,p,v,y,x;const{ackId:T,message:B,error:j}=n,M=(r=t.remote.state.relayPersistence)!==null&&r!==void 0&&r;if(J.SocketService(`[SocketService handleMessage()]  relayPersistence=${M}  context=${t.state.context} on 'message' ${e} keysExchanged=${(i=t.state.keyExchange)===null||i===void 0?void 0:i.areKeysExchanged()}`,n),j)throw J.SocketService(`
      [SocketService handleMessage()] context=${t.state.context}::on 'message' error=${j}`),new Error(j);const K=typeof B=="string";if(!K&&(B==null?void 0:B.type)===Ge.KEY_HANDSHAKE_START)return M?void 0:(J.SocketService(`[SocketService handleMessage()] context=${t.state.context}::on 'message' received HANDSHAKE_START isOriginator=${t.state.isOriginator}`,B),void((s=t.state.keyExchange)===null||s===void 0||s.start({isOriginator:(o=t.state.isOriginator)!==null&&o!==void 0&&o,force:!0})));if(!K&&(!((a=B==null?void 0:B.type)===null||a===void 0)&&a.startsWith("key_handshake")))return M?void 0:(J.SocketService(`[SocketService handleMessage()] context=${t.state.context}::on 'message' emit KEY_EXCHANGE`,B),void t.emit(k0.KEY_EXCHANGE,{message:B,context:t.state.context}));if(K&&!(!((l=t.state.keyExchange)===null||l===void 0)&&l.areKeysExchanged())){let z=!1;try{J.SocketService(`[SocketService handleMessage()] context=${t.state.context}::on 'message' trying to decrypt message`),(c=t.state.keyExchange)===null||c===void 0||c.decryptMessage(B),z=!0}catch($){J.SocketService(`[SocketService handleMessage()] context=${t.state.context}::on 'message' error`,$)}if(!z)return t.state.isOriginator?(d=t.state.keyExchange)===null||d===void 0||d.start({isOriginator:(f=t.state.isOriginator)!==null&&f!==void 0&&f}):t.sendMessage({type:Ge.KEY_HANDSHAKE_START}).catch($=>{}),void J.SocketService(`Message ignored because invalid key exchange status. step=${(h=t.state.keyExchange)===null||h===void 0?void 0:h.getKeyInfo().step}`,(m=t.state.keyExchange)===null||m===void 0?void 0:m.getKeyInfo(),B);J.SocketService("Invalid key exchange status detected --- updating it."),(u=t.state.keyExchange)===null||u===void 0||u.setKeysExchanged(!0)}else if(!K&&(B!=null&&B.type))return void t.emit(ae.MESSAGE,B);if(!K)return void t.emit(ae.MESSAGE,B);const U=(g=t.state.keyExchange)===null||g===void 0?void 0:g.decryptMessage(B),W=JSON.parse(U??"{}");if(T&&(T==null?void 0:T.length)>0&&(J.SocketService(`[SocketService handleMessage()] context=${t.state.context}::on 'message' ackid=${T} channelId=${e}`),(w=t.state.socket)===null||w===void 0||w.emit(ae.MESSAGE_ACK,{ackId:T,channelId:e,clientType:t.state.isOriginator?"dapp":"wallet"})),t.state.clientsPaused=(W==null?void 0:W.type)===at.PAUSE,t.state.isOriginator&&W.data){const z=W.data,$=t.state.rpcMethodTracker[z.id];if($){const N=Date.now()-$.timestamp;J.SocketService(`[SocketService handleMessage()] context=${t.state.context}::on 'message' received answer for id=${z.id} method=${$.method} responseTime=${N}`,W),t.remote.state.analytics&&qT.includes($.method.toLowerCase())&&_s(Object.assign(Object.assign({id:(p=t.remote.state.channelId)!==null&&p!==void 0?p:"",event:Et.SDK_RPC_REQUEST_DONE,sdkVersion:t.remote.state.sdkVersion,commLayerVersion:zo.version},t.remote.state.originatorInfo),{walletVersion:(v=t.remote.state.walletInfo)===null||v===void 0?void 0:v.version,params:{method:$.method,from:"mobile"}}),t.remote.state.communicationServerUrl).catch(O=>{}),jf($.method)&&vt.analytics.track(z.error?z.error.code===4001?"sdk_action_rejected":"sdk_action_failed":"sdk_action_succeeded",{action:$.method});const C=Object.assign(Object.assign({},$),{result:z.result,error:z.error?{code:(y=z.error)===null||y===void 0?void 0:y.code,message:(x=z.error)===null||x===void 0?void 0:x.message}:void 0,elapsedTime:N});t.state.rpcMethodTracker[z.id]=C,t.emit(ae.RPC_UPDATE,C)}}t.emit(ae.MESSAGE,{message:W})}}},{event:ae.REJECTED,handler:function(t,e){return n=>ne(this,void 0,void 0,function*(){var r;t.state.isOriginator&&!t.remote.state.ready?(J.SocketService(`[SocketService: handleChannelRejected()] context=${t.state.context} channelId=${e} isOriginator=${t.state.isOriginator} ready=${t.remote.state.ready}`,t.remote.state.originatorInfo),_s(Object.assign(Object.assign({id:e,event:Et.REJECTED},t.remote.state.originatorInfo),{sdkVersion:t.remote.state.sdkVersion,commLayer:t.state.communicationLayerPreference,commLayerVersion:zo.version,walletVersion:(r=t.remote.state.walletInfo)===null||r===void 0?void 0:r.version}),t.remote.state.communicationServerUrl).catch(i=>{}),vt.analytics.track("sdk_connection_rejected",{transport_type:"websocket"}),yield t.remote.disconnect({terminate:!0}),t.remote.emit(ae.REJECTED,{channelId:e}),t.remote.setConnectionStatus(Gt.DISCONNECTED)):J.SocketService(`[SocketService: handleChannelRejected()] SKIP -- channelId=${e} isOriginator=${t.state.isOriginator} ready=${t.remote.state.ready}`)})}},{event:"clients_waiting_to_join",handler:function(t,e){return n=>{J.SocketService(`[SocketService: handleClientsWaitingToJoin()] context=${t.state.context} on 'clients_waiting_to_join-${e}'`,n),t.emit(ae.CLIENTS_WAITING,n)}}}],AD=[{event:ae.KEY_INFO,handler:function(t){return e=>{J.SocketService("[SocketService: handleKeyInfo()] on 'KEY_INFO'",e),t.emit(ae.KEY_INFO,e)}}},{event:ae.KEYS_EXCHANGED,handler:function(t){return()=>{var e,n,r;J.SocketService(`[SocketService: handleKeysExchanged()] on 'keys_exchanged' keyschanged=${(e=t.state.keyExchange)===null||e===void 0?void 0:e.areKeysExchanged()}`);const{channelConfig:i}=t.remote.state;if(i){const o=t.getKeyExchange().getKeyInfo().ecies;i.localKey=o.private,i.otherKey=o.otherPubKey,t.remote.state.channelConfig=i,(n=t.remote.state.storageManager)===null||n===void 0||n.persistChannelConfig(i).catch(a=>{})}t.emit(ae.KEYS_EXCHANGED,{keysExchanged:(r=t.state.keyExchange)===null||r===void 0?void 0:r.areKeysExchanged(),isOriginator:t.state.isOriginator});const s={keyInfo:t.getKeyInfo()};t.emit(ae.SERVICE_STATUS,s)}}}];function ES(t,e){J.SocketService(`[SocketService: setupChannelListener()] context=${t.state.context} setting socket listeners for channel ${e}...`);const{socket:n}=t.state,{keyExchange:r}=t.state;n&&t.state.isOriginator&&(t.state.debug&&(n==null||n.io.on("error",i=>{J.SocketService(`[SocketService: setupChannelListener()] context=${t.state.context} socket event=error`,i)}),n==null||n.io.on("reconnect",i=>{J.SocketService(`[SocketService: setupChannelListener()] context=${t.state.context} socket event=reconnect`,i),xw(t).catch(s=>{})}),n==null||n.io.on("reconnect_error",i=>{J.SocketService(`[SocketService: setupChannelListener()] context=${t.state.context} socket event=reconnect_error`,i)}),n==null||n.io.on("reconnect_failed",()=>{J.SocketService(`[SocketService: setupChannelListener()] context=${t.state.context} socket event=reconnect_failed`)})),n==null||n.on("disconnect",i=>(J.SocketService(`[SocketService: setupChannelListener()] on 'disconnect' -- MetaMaskSDK socket disconnected '${i}' begin recovery...`),function(s){return o=>{J.SocketService(`[SocketService: handleDisconnect()] on 'disconnect' manualDisconnect=${s.state.manualDisconnect}`,o),s.state.manualDisconnect||(s.emit(ae.SOCKET_DISCONNECTED),xw(s).catch(a=>{}))}}(t)(i)))),ED.forEach(({event:i,handler:s})=>{n==null||n.on(`${i}-${e}`,s(t,e))}),AD.forEach(({event:i,handler:s})=>{r==null||r.on(i,s(t))}),t.state.setupChannelListeners=!0}class SD extends Pg.EventEmitter2{constructor(e){super(),this.state={clientsConnected:!1,clientsPaused:!1,manualDisconnect:!1,lastRpcId:void 0,rpcMethodTracker:{},hasPlaintext:!1,communicationServerUrl:"",focusListenerAdded:!1,removeFocusListener:void 0,isReconnecting:!1,reconnectionAttempts:0},this.options=e;const{reconnect:n,communicationLayerPreference:r,communicationServerUrl:i,context:s,remote:o,logging:a}=e;this.state.resumed=n,this.state.context=s,this.state.isOriginator=o.state.isOriginator,this.state.communicationLayerPreference=r,this.state.debug=(a==null?void 0:a.serviceLayer)===!0,this.remote=o,(a==null?void 0:a.serviceLayer)===!0&&An.enable("SocketService:Layer"),this.state.communicationServerUrl=i,this.state.hasPlaintext=this.state.communicationServerUrl!==gu&&(a==null?void 0:a.plaintext)===!0,J.SocketService(`[SocketService: constructor()] Socket IO url: ${this.state.communicationServerUrl}`),this.initSocket()}initSocket(){var e;const{otherPublicKey:n,ecies:r,logging:i}=this.options,s={autoConnect:!1,transports:yD,withCredentials:!0},o=this.state.communicationServerUrl;J.SocketService(`[SocketService: initSocket()] Socket IO url: ${o}`),this.state.socket=pp(o,s),function(l){if(typeof window<"u"&&typeof document<"u"&&(J.SocketService(`[SocketService: setupSocketFocusListener()] hasFocus=${document.hasFocus()}`,l),!l.state.focusListenerAdded)){const c=()=>{J.SocketService("Document has focus --- reconnecting socket"),xw(l).catch(u=>{})};window.addEventListener("focus",c),l.state.focusListenerAdded=!0,l.state.removeFocusListener=()=>{window.removeEventListener("focus",c),l.state.focusListenerAdded=!1}}}(this);const a={communicationLayer:this,otherPublicKey:n,sendPublicKey:!1,context:(e=this.state.context)!==null&&e!==void 0?e:"",ecies:r,logging:i};this.state.keyExchange=new bD(a)}resetKeys(){return J.SocketService("[SocketService: resetKeys()] Resetting keys."),void((e=this.state.keyExchange)===null||e===void 0||e.resetKeys());var e}createChannel(){return ne(this,void 0,void 0,function*(){return function(e){return ne(this,void 0,void 0,function*(){var n,r,i;if(J.SocketService(`[SocketService: createChannel()] context=${e.state.context}`),e.state.socket||e.initSocket(),(n=e.state.socket)===null||n===void 0?void 0:n.connected)throw new Error("socket already connected");(r=e.state.socket)===null||r===void 0||r.connect(),e.state.manualDisconnect=!1,e.state.isOriginator=!0;const s=no();e.state.channelId=s,ES(e,s),yield new Promise((a,l)=>{var c;(c=e.state.socket)===null||c===void 0||c.emit(ae.JOIN_CHANNEL,{channelId:s,context:`${e.state.context}createChannel`,clientType:"dapp"},(u,d)=>ne(this,void 0,void 0,function*(){try{yield vp(e,u,d),a()}catch(f){l(f)}}))});const o=(i=e.state.keyExchange)===null||i===void 0?void 0:i.getKeyInfo();return{channelId:s,pubKey:(o==null?void 0:o.ecies.public)||"",privKey:(o==null?void 0:o.ecies.private)||""}})}(this)})}connectToChannel({channelId:e,withKeyExchange:n=!1,authorized:r}){return function(i){return ne(this,arguments,void 0,function*({options:s,instance:o}){const{channelId:a,authorized:l,withKeyExchange:c}=s,{state:u,remote:d}=o,{isOriginator:f=!1,socket:h,keyExchange:m}=u,{channelConfig:g}=d.state;if(h!=null&&h.connected)throw new Error("socket already connected");if(f&&(g!=null&&g.relayPersistence)){const{localKey:w,otherKey:p}=g;w&&p&&(m==null||m.setRelayPersistence({localKey:w,otherKey:p}))}return Object.assign(u,{manualDisconnect:!1,withKeyExchange:c,isOriginator:f,channelId:a}),h==null||h.connect(),ES(o,a),!f&&l&&(m==null||m.setKeysExchanged(!0),Object.assign(d.state,{ready:!0,authorized:!0})),new Promise(w=>{var p;const v=(p=m==null?void 0:m.getKeyInfo())===null||p===void 0?void 0:p.ecies.public;h==null||h.emit(ae.JOIN_CHANNEL,{channelId:a,context:`${u.context}_connectToChannel`,clientType:f?"dapp":"wallet",publicKey:l&&!f?v:void 0},(y,x)=>ne(this,void 0,void 0,function*(){yield vp(o,y,x),w()}))})})}({options:{channelId:e,withKeyExchange:n,authorized:r},instance:this})}getKeyInfo(){return this.state.keyExchange.getKeyInfo()}keyCheck(){var e,n;(n=(e=this).state.socket)===null||n===void 0||n.emit(ae.MESSAGE,{id:e.state.channelId,context:e.state.context,message:{type:Ge.KEY_HANDSHAKE_CHECK,pubkey:e.getKeyInfo().ecies.otherPubKey}})}getKeyExchange(){return this.state.keyExchange}sendMessage(e){return ne(this,void 0,void 0,function*(){return function(n,r){return ne(this,void 0,void 0,function*(){var i,s,o;if(!n.state.channelId)throw J.SocketService("handleSendMessage: no channelId - Create a channel first"),new Error("Create a channel first");if(J.SocketService(`[SocketService: handleSendMessage()] context=${n.state.context} areKeysExchanged=${(i=n.state.keyExchange)===null||i===void 0?void 0:i.areKeysExchanged()}`,r),(s=r==null?void 0:r.type)===null||s===void 0?void 0:s.startsWith("key_handshake"))return function(l,c){var u;J.SocketService(`[SocketService: handleKeyHandshake()] context=${l.state.context}`,c),(u=l.state.socket)===null||u===void 0||u.emit(ae.MESSAGE,{id:l.state.channelId,context:l.state.context,clientType:l.state.isOriginator?"dapp":"wallet",message:c})}(n,r),!0;(function(l,c){var u;if(!(!((u=l.state.keyExchange)===null||u===void 0)&&u.areKeysExchanged())&&!l.remote.state.relayPersistence)throw J.SocketService(`[SocketService: validateKeyExchange()] context=${l.state.context} ERROR keys not exchanged`,c),new Error("Keys not exchanged BBB")})(n,r),function(l,c){var u;const d=(u=c==null?void 0:c.method)!==null&&u!==void 0?u:"",f=c==null?void 0:c.id;l.state.isOriginator&&f&&(l.state.rpcMethodTracker[f]={id:f,timestamp:Date.now(),method:d},l.emit(ae.RPC_UPDATE,l.state.rpcMethodTracker[f]))}(n,r);const a=yield WT(n,r);return n.remote.state.analytics&&n.remote.state.isOriginator&&r.method&&qT.includes(r.method.toLowerCase())&&_s({id:(o=n.remote.state.channelId)!==null&&o!==void 0?o:"",event:Et.SDK_RPC_REQUEST,params:{method:r.method,from:"mobile"}},n.remote.state.communicationServerUrl).catch(l=>{}),n.remote.state.isOriginator&&r.method&&jf(r.method)&&vt.analytics.track("sdk_action_requested",{action:r.method}),function(l,c){return ne(this,void 0,void 0,function*(){var u;const d=c==null?void 0:c.id,f=(u=c==null?void 0:c.method)!==null&&u!==void 0?u:"";if(l.state.isOriginator&&d)try{const h=bS(d,l.state.rpcMethodTracker,200).then(w=>({type:ql.RPC_CHECK,result:w})),m=ne(this,void 0,void 0,function*(){const w=yield(v=>ne(void 0,[v],void 0,function*({rpcId:y,instance:x}){for(;x.state.lastRpcId===y||x.state.lastRpcId===void 0;)yield dc(200);return x.state.lastRpcId}))({instance:l,rpcId:d}),p=yield bS(w,l.state.rpcMethodTracker,200);return{type:ql.SKIPPED_RPC,result:p}}),g=yield Promise.race([h,m]);if(g.type===ql.RPC_CHECK){const w=g.result;J.SocketService(`[SocketService:handleRpcReplies()] id=${c.id} ${f} ( ${w.elapsedTime} ms)`,w.result)}else{if(g.type!==ql.SKIPPED_RPC)throw new Error(`Error handling RPC replies for ${d}`);{const w=Object.assign(Object.assign({},l.state.rpcMethodTracker[d]),{error:new Error("SDK_CONNECTION_ISSUE")});l.emit(ae.RPC_UPDATE,w);const p={data:Object.assign(Object.assign({},w),{jsonrpc:"2.0"}),name:"metamask-provider"};l.emit(ae.MESSAGE,{message:p})}}}catch(h){throw h}})}(n,r).catch(l=>{}),a})}(this,e)})}ping(){return function(e){return ne(this,void 0,void 0,function*(){var n,r;J.SocketService(`[SocketService: ping()] context=${e.state.context} originator=${e.state.isOriginator} keysExchanged=${(n=e.state.keyExchange)===null||n===void 0?void 0:n.areKeysExchanged()}`),(r=e.state.socket)===null||r===void 0||r.emit(at.PING,{id:e.state.channelId,context:"ping",clientType:e.remote.state.isOriginator?"dapp":"wallet",message:""})})}(this)}pause(){return function(e){return ne(this,void 0,void 0,function*(){var n,r;J.SocketService(`[SocketService: pause()] context=${e.state.context}`),e.state.manualDisconnect=!0,!((n=e.state.keyExchange)===null||n===void 0)&&n.areKeysExchanged()&&(yield e.sendMessage({type:at.PAUSE})),(r=e.state.socket)===null||r===void 0||r.disconnect()})}(this)}isConnected(){var e;return(e=this.state.socket)===null||e===void 0?void 0:e.connected}resume(){return function(e){return ne(this,void 0,void 0,function*(){const{state:n,remote:r}=e,{socket:i,channelId:s,context:o,keyExchange:a,isOriginator:l}=n,{isOriginator:c}=r.state;if(J.SocketService(`[SocketService: resume()] channelId=${s} context=${o} connected=${i==null?void 0:i.connected} manualDisconnect=${n.manualDisconnect} resumed=${n.resumed} keysExchanged=${a==null?void 0:a.areKeysExchanged()}`),!s)throw J.SocketService("[SocketService: resume()] channelId is not defined"),new Error("ChannelId is not defined");i!=null&&i.connected?(J.SocketService("[SocketService: resume()] already connected."),i.emit(at.PING,{id:s,clientType:c?"dapp":"wallet",context:"on_channel_config",message:""}),r.hasRelayPersistence()||a!=null&&a.areKeysExchanged()||(l?yield e.sendMessage({type:at.READY}):a==null||a.start({isOriginator:!1}))):(i==null||i.connect(),J.SocketService(`[SocketService: resume()] after connecting socket --> connected=${i==null?void 0:i.connected}`),i==null||i.emit(ae.JOIN_CHANNEL,{channelId:s,context:`${o}_resume`,clientType:c?"dapp":"wallet"},(u,d)=>ne(this,void 0,void 0,function*(){try{yield vp(e,u,d)}catch{}}))),n.manualDisconnect=!1,n.resumed=!0})}(this)}getRPCMethodTracker(){return this.state.rpcMethodTracker}disconnect(e){return function(n,r){var i,s,o,a,l;J.SocketService(`[SocketService: disconnect()] context=${n.state.context}`,r),r!=null&&r.terminate&&((s=(i=n.state).removeFocusListener)===null||s===void 0||s.call(i),n.state.channelId=r.channelId,(o=n.state.socket)===null||o===void 0||o.removeAllListeners(),(a=n.state.keyExchange)===null||a===void 0||a.clean(),n.remote.state.ready=!1,n.state.socket=void 0,n.state.rpcMethodTracker={}),n.state.manualDisconnect=!0,(l=n.state.socket)===null||l===void 0||l.disconnect()}(this,e)}}var il,an,AS;function CD(t){return()=>ne(this,void 0,void 0,function*(){var e,n,r;const{state:i}=t;if(i.authorized)return;yield ne(this,void 0,void 0,function*(){for(;!i.walletInfo;)yield dc(500)});const s="7.3".localeCompare(((e=i.walletInfo)===null||e===void 0?void 0:e.version)||"");if(J.RemoteCommunication(`[RemoteCommunication: handleAuthorizedEvent()] HACK 'authorized' version=${(n=i.walletInfo)===null||n===void 0?void 0:n.version} compareValue=${s}`),s!==1)return;const o=i.platformType===an.MobileWeb||i.platformType===an.ReactNative||i.platformType===an.MetaMaskMobileWebview;J.RemoteCommunication(`[RemoteCommunication: handleAuthorizedEvent()] HACK 'authorized' platform=${i.platformType} secure=${o} channel=${i.channelId} walletVersion=${(r=i.walletInfo)===null||r===void 0?void 0:r.version}`),o&&(i.authorized=!0,t.emit(ae.AUTHORIZED))})}function xD(t){return e=>{const{state:n}=t;J.RemoteCommunication(`[RemoteCommunication: handleChannelCreatedEvent()] context=${n.context} on 'channel_created' channelId=${e}`),t.emit(ae.CHANNEL_CREATED,e)}}function kD(t,e){return()=>{var n,r,i,s;const{state:o}=t;J.RemoteCommunication(`[RemoteCommunication: handleClientsConnectedEvent()] on 'clients_connected' channel=${o.channelId} keysExchanged=${(r=(n=o.communicationLayer)===null||n===void 0?void 0:n.getKeyInfo())===null||r===void 0?void 0:r.keysExchanged}`),o.analytics&&_s(Object.assign(Object.assign({id:(i=o.channelId)!==null&&i!==void 0?i:"",event:o.reconnection?Et.RECONNECT:o.isOriginator?Et.REQUEST:Et.REQUEST_MOBILE},o.originatorInfo),{commLayer:e,sdkVersion:o.sdkVersion,walletVersion:(s=o.walletInfo)===null||s===void 0?void 0:s.version,commLayerVersion:zo.version}),o.communicationServerUrl).catch(a=>{}),o.isOriginator&&!o.reconnection&&vt.analytics.track("sdk_connection_established",{transport_type:"websocket"}),o.clientsConnected=!0,o.originatorInfoSent=!1,t.emit(ae.CLIENTS_CONNECTED)}}function _D(t){return e=>{const{state:n}=t;J.RemoteCommunication(`[RemoteCommunication: handleClientsDisconnectedEvent()] context=${n.context} on 'clients_disconnected' channelId=${e}`),n.relayPersistence||(n.clientsConnected=!1,n.ready=!1,n.authorized=!1),t.emit(ae.CLIENTS_DISCONNECTED,n.channelId),t.setConnectionStatus(Gt.DISCONNECTED)}}function PD(t){return e=>{var n;const{state:r}=t;if(J.RemoteCommunication(`[RemoteCommunication: handleClientsWaitingEvent()] context=${r.context} on 'clients_waiting' numberUsers=${e} ready=${r.ready} autoStarted=${r.originatorConnectStarted}`),t.setConnectionStatus(Gt.WAITING),t.emit(ae.CLIENTS_WAITING,e),r.originatorConnectStarted){J.RemoteCommunication(`[RemoteCommunication: handleClientsWaitingEvent()] on 'clients_waiting' watch autoStarted=${r.originatorConnectStarted} timeout`,r.autoConnectOptions);const i=((n=r.autoConnectOptions)===null||n===void 0?void 0:n.timeout)||3e3,s=setTimeout(()=>{J.RemoteCommunication(`[RemoteCommunication: handleClientsWaitingEvent()] setTimeout(${i}) terminate channelConfig`,r.autoConnectOptions),r.originatorConnectStarted=!1,r.ready||t.setConnectionStatus(Gt.TIMEOUT),clearTimeout(s)},i)}}}function TD(t,e){return n=>{var r,i,s,o,a,l,c,u;const{state:d}=t;if(J.RemoteCommunication(`[RemoteCommunication: handleKeysExchangedEvent()] context=${d.context} on commLayer.'keys_exchanged' channel=${d.channelId}`,n),(i=(r=d.communicationLayer)===null||r===void 0?void 0:r.getKeyInfo())===null||i===void 0?void 0:i.keysExchanged){const f=Object.assign(Object.assign({},d.channelConfig),{channelId:(s=d.channelId)!==null&&s!==void 0?s:"",validUntil:((o=d.channelConfig)===null||o===void 0?void 0:o.validUntil)||mu,localKey:d.communicationLayer.getKeyInfo().ecies.private,otherKey:d.communicationLayer.getKeyInfo().ecies.otherPubKey});(a=d.storageManager)===null||a===void 0||a.persistChannelConfig(f).catch(h=>{}),t.setConnectionStatus(Gt.LINKED)}(function(f,h){var m,g,w,p,v,y,x,T;const{state:B}=f;J.RemoteCommunication(`[RemoteCommunication: setLastActiveDate()] channel=${B.channelId}`,h);const j=Object.assign(Object.assign({},B.channelConfig),{channelId:(m=B.channelId)!==null&&m!==void 0?m:"",validUntil:(w=(g=B.channelConfig)===null||g===void 0?void 0:g.validUntil)!==null&&w!==void 0?w:0,relayPersistence:B.relayPersistence,localKey:(v=(p=B.communicationLayer)===null||p===void 0?void 0:p.state.keyExchange)===null||v===void 0?void 0:v.getKeyInfo().ecies.private,otherKey:(x=(y=B.communicationLayer)===null||y===void 0?void 0:y.state.keyExchange)===null||x===void 0?void 0:x.getKeyInfo().ecies.otherPubKey,lastActive:h.getTime()});(T=B.storageManager)===null||T===void 0||T.persistChannelConfig(j)})(t,new Date),d.analytics&&d.channelId&&_s(Object.assign(Object.assign({id:d.channelId,event:n.isOriginator?Et.CONNECTED:Et.CONNECTED_MOBILE},d.originatorInfo),{sdkVersion:d.sdkVersion,commLayer:e,commLayerVersion:zo.version,walletVersion:(l=d.walletInfo)===null||l===void 0?void 0:l.version}),d.communicationServerUrl).catch(f=>{}),d.isOriginator=n.isOriginator,n.isOriginator||((c=d.communicationLayer)===null||c===void 0||c.sendMessage({type:at.READY}),d.ready=!0,d.paused=!1),n.isOriginator&&!d.originatorInfoSent&&((u=d.communicationLayer)===null||u===void 0||u.sendMessage({type:at.ORIGINATOR_INFO,originatorInfo:d.originatorInfo,originator:d.originatorInfo}),d.originatorInfoSent=!0)}}function RD(t){return e=>{let n=e;e.message&&(n=n.message),function(r,i){const{state:s}=i;if(J.RemoteCommunication(`[RemoteCommunication: onCommunicationLayerMessage()] context=${s.context} on 'message' typeof=${typeof r}`,r),i.state.ready=!0,s.isOriginator||r.type!==at.ORIGINATOR_INFO)if(s.isOriginator&&r.type===at.WALLET_INFO)(function(o,a){const{state:l}=o;l.walletInfo=a.walletInfo,l.paused=!1})(i,r);else{if(s.isOriginator&&r.type===at.WALLET_INIT)(function(o,a){return ne(this,void 0,void 0,function*(){var l,c,u;const{state:d}=o;if(d.isOriginator){const f=a.data||{};if(typeof f=="object"&&"accounts"in f&&"chainId"in f&&"walletKey"in f)try{const{channelConfig:h}=o.state;if(J.RemoteCommunication("WALLET_INIT: channelConfig",JSON.stringify(h,null,2)),h){const m=f.accounts,g=f.chainId,w=f.walletKey;let p,v=!1;"deeplinkProtocol"in f&&(v=!!f.deeplinkProtocol,o.state.deeplinkProtocolAvailable=v),"walletVersion"in f&&(p=f.walletVersion),yield(l=o.state.storageManager)===null||l===void 0?void 0:l.persistChannelConfig(Object.assign(Object.assign({},h),{otherKey:w,walletVersion:p,deeplinkProtocolAvailable:v,relayPersistence:!0})),yield(c=o.state.storageManager)===null||c===void 0?void 0:c.persistAccounts(m),yield(u=o.state.storageManager)===null||u===void 0?void 0:u.persistChainId(g)}o.emit(ae.WALLET_INIT,{accounts:f.accounts,chainId:f.chainId})}catch{}}})})(i,r).catch(o=>{J.RemoteCommunication(`[RemoteCommunication: onCommunicationLayerMessage()] error=${o}`)});else if(r.type===at.TERMINATE)(function(o){return ne(this,void 0,void 0,function*(){const{state:a}=o;a.isOriginator&&(yield QT({options:{terminate:!0,sendMessage:!1},instance:o}),o.emit(ae.TERMINATE))})})(i).catch(o=>{J.RemoteCommunication(`[RemoteCommunication: onCommunicationLayerMessage()] error=${o}`)});else if(r.type===at.PAUSE)(function(o){const{state:a}=o;a.paused=!0,o.setConnectionStatus(Gt.PAUSED)})(i);else if(r.type===at.READY&&s.isOriginator)(function(o){const{state:a}=o;o.setConnectionStatus(Gt.LINKED);const l=a.paused;a.paused=!1,o.emit(ae.CLIENTS_READY,{isOriginator:a.isOriginator,walletInfo:a.walletInfo}),l&&(a.authorized=!0,o.emit(ae.AUTHORIZED))})(i);else{if(r.type===at.OTP&&s.isOriginator)return void function(o,a){var l;const{state:c}=o;o.emit(ae.OTP,a.otpAnswer),"6.6".localeCompare(((l=c.walletInfo)===null||l===void 0?void 0:l.version)||"")===1&&o.emit(ae.SDK_RPC_CALL,{method:Xt.ETH_REQUESTACCOUNTS,params:[]})}(i,r);r.type===at.AUTHORIZED&&s.isOriginator&&function(o){const{state:a}=o;a.authorized=!0,o.emit(ae.AUTHORIZED)}(i)}i.emit(ae.MESSAGE,r)}else(function(o,a){var l;const{state:c}=o;(l=c.communicationLayer)===null||l===void 0||l.sendMessage({type:at.WALLET_INFO,walletInfo:c.walletInfo}),c.originatorInfo=a.originatorInfo||a.originator,o.emit(ae.CLIENTS_READY,{isOriginator:c.isOriginator,originatorInfo:c.originatorInfo}),c.paused=!1})(i,r)}(n,t)}}function ID(t){return()=>{const{state:e}=t;J.RemoteCommunication("[RemoteCommunication: handleSocketReconnectEvent()] on 'socket_reconnect' -- reset key exchange status / set ready to false"),e.ready=!1,e.authorized=!1,GT(e),t.emitServiceStatusEvent({context:"socket_reconnect"})}}function OD(t){return()=>{const{state:e}=t;J.RemoteCommunication("[RemoteCommunication: handleSocketDisconnectedEvent()] on 'socket_Disconnected' set ready to false"),e.ready=!1}}function ND(t){return()=>ne(this,void 0,void 0,function*(){var e,n,r,i,s,o,a;const{state:l}=t;J.RemoteCommunication(`[RemoteCommunication: handleFullPersistenceEvent()] context=${l.context}`),t.state.ready=!0,t.state.clientsConnected=!0,t.state.authorized=!0,t.state.relayPersistence=!0,(e=t.state.communicationLayer)===null||e===void 0||e.getKeyExchange().setKeysExchanged(!0),t.emit(ae.KEYS_EXCHANGED,{keysExchanged:!0,isOriginator:!0}),t.emit(ae.AUTHORIZED),t.emit(ae.CLIENTS_READY),t.emit(ae.CHANNEL_PERSISTENCE);try{l.channelConfig=Object.assign(Object.assign({},l.channelConfig),{localKey:(n=l.communicationLayer)===null||n===void 0?void 0:n.getKeyExchange().getKeyInfo().ecies.private,otherKey:(r=l.communicationLayer)===null||r===void 0?void 0:r.getKeyExchange().getOtherPublicKey(),channelId:(i=l.channelId)!==null&&i!==void 0?i:"",validUntil:(o=(s=l.channelConfig)===null||s===void 0?void 0:s.validUntil)!==null&&o!==void 0?o:mu,relayPersistence:!0}),yield(a=l.storageManager)===null||a===void 0?void 0:a.persistChannelConfig(l.channelConfig)}catch{}})}function SS({communicationLayerPreference:t,otherPublicKey:e,reconnect:n,ecies:r,communicationServerUrl:i=gu,instance:s}){var o,a,l,c,u,d,f,h,m,g,w;const{state:p}=s;if(J.RemoteCommunication("[initCommunicationLayer()] ",JSON.stringify(p,null,2)),t!==il.SOCKET)throw new Error("Invalid communication protocol");p.communicationLayer=new SD({communicationLayerPreference:t,otherPublicKey:e,reconnect:n,transports:p.transports,communicationServerUrl:i,context:p.context,ecies:r,logging:p.logging,remote:s});let v=typeof document<"u"&&document.URL||"",y=typeof document<"u"&&document.title||"";!((o=p.dappMetadata)===null||o===void 0)&&o.url&&(v=p.dappMetadata.url),!((a=p.dappMetadata)===null||a===void 0)&&a.name&&(y=p.dappMetadata.name);const x=(d=(c=(l=p.dappMetadata)===null||l===void 0?void 0:l.name)!==null&&c!==void 0?c:(u=p.dappMetadata)===null||u===void 0?void 0:u.url)!==null&&d!==void 0?d:"N/A",T=typeof window<"u"&&window.location!==void 0&&(f=window.location.hostname)!==null&&f!==void 0?f:x,B={url:v,title:y,source:(h=p.dappMetadata)===null||h===void 0?void 0:h.source,dappId:T,anonId:p.anonId,icon:((m=p.dappMetadata)===null||m===void 0?void 0:m.iconUrl)||((g=p.dappMetadata)===null||g===void 0?void 0:g.base64Icon),platform:p.platformType,apiVersion:zo.version,connector:(w=p.dappMetadata)===null||w===void 0?void 0:w.connector};p.originatorInfo=B;const j={[ae.AUTHORIZED]:CD(s),[ae.MESSAGE]:RD(s),[ae.CHANNEL_PERSISTENCE]:ND(s),[ae.CLIENTS_CONNECTED]:kD(s,t),[ae.KEYS_EXCHANGED]:TD(s,t),[ae.SOCKET_DISCONNECTED]:OD(s),[ae.SOCKET_RECONNECT]:ID(s),[ae.CLIENTS_DISCONNECTED]:_D(s),[ae.KEY_INFO]:()=>{},[ae.CHANNEL_CREATED]:xD(s),[ae.CLIENTS_WAITING]:PD(s),[ae.RPC_UPDATE]:M=>{s.emit(ae.RPC_UPDATE,M)}};for(const[M,K]of Object.entries(j))try{p.communicationLayer.on(M,K)}catch{}}function QT(t){return ne(this,arguments,void 0,function*({options:e,instance:n}){const{state:r}=n;return J.RemoteCommunication(`[RemoteCommunication: disconnect()] channel=${r.channelId}`,e),new Promise((i,s)=>{var o,a,l,c,u,d;e!=null&&e.terminate?(n.state.ready&&_s({id:(o=n.state.channelId)!==null&&o!==void 0?o:"",event:Et.TERMINATED},n.state.communicationServerUrl).catch(f=>{}),r.ready=!1,r.paused=!1,(a=r.storageManager)===null||a===void 0||a.terminate((l=r.channelId)!==null&&l!==void 0?l:""),n.state.terminated=!0,e.sendMessage?!((c=r.communicationLayer)===null||c===void 0)&&c.getKeyInfo().keysExchanged&&n.state.communicationLayer&&WT(n.state.communicationLayer,{type:at.TERMINATE}).then(()=>{i(!0)}).catch(f=>{s(f)}):i(!0),r.authorized=!1,r.relayPersistence=!1,r.channelId=no(),e.channelId=r.channelId,r.channelConfig=void 0,r.originatorConnectStarted=!1,(u=r.communicationLayer)===null||u===void 0||u.disconnect(e),n.setConnectionStatus(Gt.TERMINATED)):((d=r.communicationLayer)===null||d===void 0||d.disconnect(e),n.setConnectionStatus(Gt.DISCONNECTED),i(!0))})})}(il||(il={})).SOCKET="socket",function(t){t.NonBrowser="nodejs",t.MetaMaskMobileWebview="in-app-browser",t.DesktopWeb="web-desktop",t.MobileWeb="web-mobile",t.ReactNative="react-native"}(an||(an={}));class MD extends Pg.EventEmitter2{constructor(e){super(),this.state={ready:!1,anonId:"",authorized:!1,isOriginator:!1,terminated:!1,protocolVersion:1,paused:!1,deeplinkProtocolAvailable:!1,platformType:"metamask-mobile",analytics:!1,reconnection:!1,originatorInfoSent:!1,communicationServerUrl:gu,context:"",persist:!1,clientsConnected:!1,sessionDuration:mu,originatorConnectStarted:!1,debug:!1,_connectionStatus:Gt.DISCONNECTED},this._options=e;const{anonId:n,platformType:r,communicationLayerPreference:i,otherPublicKey:s,reconnect:o,walletInfo:a,dappMetadata:l,protocolVersion:c,transports:u,context:d,relayPersistence:f,ecies:h,analytics:m=!1,storage:g,sdkVersion:w,communicationServerUrl:p=gu,logging:v,autoConnect:y={timeout:vD}}=e;this.state.anonId=n,this.state.otherPublicKey=s,this.state.dappMetadata=l,this.state.walletInfo=a,this.state.transports=u,this.state.platformType=r,this.state.analytics=m,this.state.protocolVersion=c??1,this.state.isOriginator=!s,this.state.relayPersistence=f,this.state.communicationServerUrl=p,this.state.context=d,this.state.terminated=!1,this.state.sdkVersion=w,this.setMaxListeners(50),this.setConnectionStatus(Gt.DISCONNECTED),g!=null&&g.duration&&(this.state.sessionDuration=mu),this.state.storageOptions=g,this.state.autoConnectOptions=y,this.state.debug=(v==null?void 0:v.remoteLayer)===!0,(v==null?void 0:v.remoteLayer)===!0&&An.enable("RemoteCommunication:Layer"),(v==null?void 0:v.serviceLayer)===!0&&An.enable("SocketService:Layer"),(v==null?void 0:v.eciesLayer)===!0&&An.enable("ECIES:Layer"),(v==null?void 0:v.keyExchangeLayer)===!0&&An.enable("KeyExchange:Layer"),this.state.logging=v,g!=null&&g.storageManager&&(this.state.storageManager=g.storageManager),J.RemoteCommunication(`[RemoteCommunication: constructor()] protocolVersion=${c} relayPersistence=${f} isOriginator=${this.state.isOriginator} communicationLayerPreference=${i} otherPublicKey=${s} reconnect=${o}`),this.state.isOriginator||SS({communicationLayerPreference:i,otherPublicKey:s,reconnect:o,ecies:h,communicationServerUrl:p,instance:this}),this.emitServiceStatusEvent({context:"constructor"})}initFromDappStorage(){return ne(this,void 0,void 0,function*(){var e;if(this.state.storageManager){const n=yield this.state.storageManager.getPersistedChannelConfig({});n&&(this.state.channelConfig=n,this.state.channelId=n.channelId,this.state.deeplinkProtocolAvailable=(e=n.deeplinkProtocolAvailable)!==null&&e!==void 0&&e,n.relayPersistence&&(this.state.authorized=!0,this.state.ready=!0,this.setConnectionStatus(Gt.LINKED),yield this.connectToChannel({channelId:n.channelId})))}SS({communicationLayerPreference:il.SOCKET,otherPublicKey:this.state.otherPublicKey,reconnect:this._options.reconnect,ecies:this._options.ecies,communicationServerUrl:this.state.communicationServerUrl,instance:this})})}originatorSessionConnect(){return ne(this,void 0,void 0,function*(){return yield function(e){return ne(this,void 0,void 0,function*(){var n;const{state:r}=e;if(!r.storageManager)return void J.RemoteCommunication("[RemoteCommunication: originatorSessionConnect()] no storage manager defined - skip");const i=yield r.storageManager.getPersistedChannelConfig({});if(J.RemoteCommunication(`[RemoteCommunication: originatorSessionConnect()] autoStarted=${r.originatorConnectStarted} channelConfig`,i),(n=r.communicationLayer)===null||n===void 0?void 0:n.isConnected())return J.RemoteCommunication("[RemoteCommunication: originatorSessionConnect()] socket already connected - skip"),i;if(i){if(i.validUntil>Date.now())return r.channelConfig=i,r.originatorConnectStarted=!0,r.channelId=i==null?void 0:i.channelId,r.reconnection=!0,i;J.RemoteCommunication("[RemoteCommunication: autoConnect()] Session has expired")}r.originatorConnectStarted=!1})}(this)})}generateChannelIdConnect(){return ne(this,void 0,void 0,function*(){return function(e){return ne(this,void 0,void 0,function*(){var n,r,i,s,o,a;if(!e.communicationLayer)throw new Error("communication layer not initialized");if(e.ready)throw new Error("Channel already connected");if(e.channelId&&(!((n=e.communicationLayer)===null||n===void 0)&&n.isConnected()))return e.channelConfig=Object.assign(Object.assign({},e.channelConfig),{channelId:e.channelId,validUntil:Date.now()+e.sessionDuration}),(r=e.storageManager)===null||r===void 0||r.persistChannelConfig(e.channelConfig),{channelId:e.channelId,privKey:(s=(i=e.communicationLayer)===null||i===void 0?void 0:i.getKeyInfo())===null||s===void 0?void 0:s.ecies.private,pubKey:(a=(o=e.communicationLayer)===null||o===void 0?void 0:o.getKeyInfo())===null||a===void 0?void 0:a.ecies.public};J.RemoteCommunication("[RemoteCommunication: generateChannelId()]");const l=yield e.communicationLayer.createChannel();J.RemoteCommunication("[RemoteCommunication: generateChannelId()] channel created",l);const c=Object.assign(Object.assign({},e.channelConfig),{channelId:l.channelId,localKey:l.privKey,validUntil:Date.now()+e.sessionDuration});return e.channelId=l.channelId,e.channelConfig=c,{channelId:e.channelId,pubKey:l.pubKey,privKey:l.privKey}})}(this.state)})}clean(){return GT(this.state)}connectToChannel({channelId:e,withKeyExchange:n,authorized:r}){return function(i){return ne(this,arguments,void 0,function*({channelId:s,withKeyExchange:o,authorized:a,state:l}){var c,u,d;if(!aw(s))throw J.RemoteCommunication(`[RemoteCommunication: connectToChannel()] context=${l.context} invalid channel channelId=${s}`),new Error(`Invalid channel ${s}`);if(J.RemoteCommunication(`[RemoteCommunication: connectToChannel()] context=${l.context} channelId=${s} withKeyExchange=${o}`),(c=l.communicationLayer)===null||c===void 0?void 0:c.isConnected())return void J.RemoteCommunication(`[RemoteCommunication: connectToChannel()] context=${l.context} already connected - interrupt connection.`);l.channelId=s,yield(u=l.communicationLayer)===null||u===void 0?void 0:u.connectToChannel({channelId:s,authorized:a,withKeyExchange:o});const f=Object.assign(Object.assign({},l.channelConfig),{channelId:s,validUntil:Date.now()+l.sessionDuration});l.channelConfig=f,(d=l.storageManager)===null||d===void 0||d.persistChannelConfig(f)})}({channelId:e,authorized:r,withKeyExchange:n,state:this.state})}sendMessage(e){return ne(this,void 0,void 0,function*(){const n=this.state.isOriginator&&e.method&&jf(e.method);n&&vt.analytics.track("sdk_action_requested",{action:e.method});try{return yield function(r,i){return ne(this,void 0,void 0,function*(){var s,o;const{state:a}=r;J.RemoteCommunication(`[RemoteCommunication: sendMessage()] context=${a.context} paused=${a.paused} ready=${a.ready} relayPersistence=${a.relayPersistence} authorized=${a.authorized} socket=${(s=a.communicationLayer)===null||s===void 0?void 0:s.isConnected()} clientsConnected=${a.clientsConnected} status=${a._connectionStatus}`,i),a.relayPersistence||a.ready&&(!((o=a.communicationLayer)===null||o===void 0)&&o.isConnected())&&a.clientsConnected||(J.RemoteCommunication(`[RemoteCommunication: sendMessage()] context=${a.context}  SKIP message waiting for MM mobile readiness.`),yield new Promise(l=>{r.once(ae.CLIENTS_READY,l)}),J.RemoteCommunication(`[RemoteCommunication: sendMessage()] context=${a.context}  AFTER SKIP / READY -- sending pending message`));try{return yield function(c,u){return ne(this,void 0,void 0,function*(){return new Promise(d=>{var f;const{state:h}=c;J.RemoteCommunication(`[RemoteCommunication: handleAuthorization()] context=${h.context} ready=${h.ready} authorized=${h.authorized} method=${u.method}`),!h.isOriginator||h.authorized||h.relayPersistence?(f=h.communicationLayer)===null||f===void 0||f.sendMessage(u).then(m=>{d(m)}).catch(m=>{d(!1)}):c.once(ae.AUTHORIZED,()=>{var m;J.RemoteCommunication(`[RemoteCommunication: handleAuthorization()] context=${h.context}  AFTER SKIP / AUTHORIZED -- sending pending message`),(m=h.communicationLayer)===null||m===void 0||m.sendMessage(u).then(g=>{d(g)}).catch(g=>{d(!1)})})})})}(r,i)}catch(l){throw l}})}(this,e)}catch(r){throw n&&vt.analytics.track("sdk_action_failed",{action:e.method}),r}})}testStorage(){return ne(this,void 0,void 0,function*(){return function(e){return ne(this,void 0,void 0,function*(){var n;const r=yield(n=e.storageManager)===null||n===void 0?void 0:n.getPersistedChannelConfig();J.RemoteCommunication("[RemoteCommunication: testStorage()] res",r)})}(this.state)})}hasDeeplinkProtocol(){return this.state.deeplinkProtocolAvailable}getChannelConfig(){return this.state.channelConfig}isReady(){return this.state.ready}isConnected(){var e;return(e=this.state.communicationLayer)===null||e===void 0?void 0:e.isConnected()}isAuthorized(){return this.state.authorized}isPaused(){return this.state.paused}getCommunicationLayer(){return this.state.communicationLayer}ping(){return ne(this,void 0,void 0,function*(){var e;J.RemoteCommunication(`[RemoteCommunication: ping()] channel=${this.state.channelId}`),yield(e=this.state.communicationLayer)===null||e===void 0?void 0:e.ping()})}testLogger(){J.RemoteCommunication(`testLogger() channel=${this.state.channelId}`),J.SocketService(`testLogger() channel=${this.state.channelId}`),J.Ecies(`testLogger() channel=${this.state.channelId}`),J.KeyExchange(`testLogger() channel=${this.state.channelId}`)}keyCheck(){var e;J.RemoteCommunication(`[RemoteCommunication: keyCheck()] channel=${this.state.channelId}`),(e=this.state.communicationLayer)===null||e===void 0||e.keyCheck()}setConnectionStatus(e){this.state._connectionStatus!==e&&(this.state._connectionStatus=e,this.emit(ae.CONNECTION_STATUS,e),this.emitServiceStatusEvent({context:"setConnectionStatus"}))}emitServiceStatusEvent(e={}){this.emit(ae.SERVICE_STATUS,this.getServiceStatus())}getConnectionStatus(){return this.state._connectionStatus}getServiceStatus(){return{originatorInfo:this.state.originatorInfo,keyInfo:this.getKeyInfo(),connectionStatus:this.state._connectionStatus,channelConfig:this.state.channelConfig,channelId:this.state.channelId}}getKeyInfo(){var e;return(e=this.state.communicationLayer)===null||e===void 0?void 0:e.getKeyInfo()}resetKeys(){var e;(e=this.state.communicationLayer)===null||e===void 0||e.resetKeys()}setOtherPublicKey(e){var n;const r=(n=this.state.communicationLayer)===null||n===void 0?void 0:n.getKeyExchange();if(!r)throw new Error("KeyExchange is not initialized.");r.getOtherPublicKey()!==e&&r.setOtherPublicKey(e)}pause(){return ne(this,void 0,void 0,function*(){var e;J.RemoteCommunication(`[RemoteCommunication: pause()] channel=${this.state.channelId}`),yield(e=this.state.communicationLayer)===null||e===void 0?void 0:e.pause(),this.setConnectionStatus(Gt.PAUSED)})}getVersion(){return zo.version}hasRelayPersistence(){var e;return(e=this.state.relayPersistence)!==null&&e!==void 0&&e}resume(){return ne(this,void 0,void 0,function*(){return function(e){return ne(this,void 0,void 0,function*(){var n;const{state:r}=e;J.RemoteCommunication(`[RemoteCommunication: resume()] channel=${r.channelId}`),yield(n=r.communicationLayer)===null||n===void 0?void 0:n.resume(),e.setConnectionStatus(Gt.LINKED)})}(this)})}encrypt(e){var n,r,i;const s=(n=this.state.communicationLayer)===null||n===void 0?void 0:n.getKeyExchange(),o=s==null?void 0:s.getOtherPublicKey();if(!o)throw new Error("KeyExchange not completed");return(i=(r=this.state.communicationLayer)===null||r===void 0?void 0:r.state.eciesInstance)===null||i===void 0?void 0:i.encrypt(e,o)}decrypt(e){var n,r,i;if(!(!((n=this.state.communicationLayer)===null||n===void 0)&&n.state.eciesInstance))throw new Error("ECIES instance is not initialized");return(i=(r=this.state.communicationLayer)===null||r===void 0?void 0:r.state.eciesInstance)===null||i===void 0?void 0:i.decrypt(e)}getChannelId(){return this.state.channelId}getRPCMethodTracker(){var e;return(e=this.state.communicationLayer)===null||e===void 0?void 0:e.getRPCMethodTracker()}reject({channelId:e}){return function(n){return ne(this,arguments,void 0,function*({channelId:r,state:i}){var s,o,a;if(!aw(r))throw J.RemoteCommunication(`[RemoteCommunication: connectToChannel()] context=${i.context} invalid channel channelId=${r}`),new Error(`Invalid channel ${r}`);if(i.isOriginator)return void J.RemoteCommunication(`[RemoteCommunication: reject()] context=${i.context} isOriginator=${i.isOriginator} channelId=${r}`);const{socket:l}=(o=(s=i.communicationLayer)===null||s===void 0?void 0:s.state)!==null&&o!==void 0?o:{};l!=null&&l.connected||(J.RemoteCommunication(`[RemoteCommunication: reject()] context=${i.context} socket already connected`),l==null||l.connect()),_s(Object.assign(Object.assign({id:r,event:Et.REJECTED},i.originatorInfo),{sdkVersion:i.sdkVersion,commLayerVersion:zo.version,walletVersion:(a=i.walletInfo)===null||a===void 0?void 0:a.version}),i.communicationServerUrl).catch(c=>{}),yield new Promise((c,u)=>{l==null||l.emit(ae.REJECTED,{channelId:r},(d,f)=>{J.RemoteCommunication(`[RemoteCommunication: reject()] context=${i.context} socket=${l==null?void 0:l.id}`,{error:d,response:f}),d?u(d):c(f)})})})}({channelId:e,state:this.state})}disconnect(e){return ne(this,void 0,void 0,function*(){return QT({options:e,instance:this})})}}(function(t){t.RENEW="renew",t.LINK="link"})(AS||(AS={}));var LD="ERC721",BD="ERC1155",gt={errors:{disconnected:()=>"MetaMask: Disconnected from chain. Attempting to connect.",permanentlyDisconnected:()=>"MetaMask: Disconnected from MetaMask background. Page reload required.",sendSiteMetadata:()=>"MetaMask: Failed to send site metadata. This is an internal error, please report this bug.",unsupportedSync:t=>`MetaMask: The MetaMask Ethereum provider does not support synchronous methods like ${t} without a callback parameter.`,invalidDuplexStream:()=>"Must provide a Node.js-style duplex stream.",invalidNetworkParams:()=>"MetaMask: Received invalid network parameters. Please report this bug.",invalidRequestArgs:()=>"Expected a single, non-array, object argument.",invalidRequestMethod:()=>"'args.method' must be a non-empty string.",invalidRequestParams:()=>"'args.params' must be an object or array if provided.",invalidLoggerObject:()=>"'args.logger' must be an object if provided.",invalidLoggerMethod:t=>`'args.logger' must include required method '${t}'.`},info:{connected:t=>`MetaMask: Connected to chain with ID "${t}".`},warnings:{chainIdDeprecation:`MetaMask: 'ethereum.chainId' is deprecated and may be removed in the future. Please use the 'eth_chainId' RPC method instead.
For more information, see: https://github.com/MetaMask/metamask-improvement-proposals/discussions/23`,networkVersionDeprecation:`MetaMask: 'ethereum.networkVersion' is deprecated and may be removed in the future. Please use the 'net_version' RPC method instead.
For more information, see: https://github.com/MetaMask/metamask-improvement-proposals/discussions/23`,selectedAddressDeprecation:`MetaMask: 'ethereum.selectedAddress' is deprecated and may be removed in the future. Please use the 'eth_accounts' RPC method instead.
For more information, see: https://github.com/MetaMask/metamask-improvement-proposals/discussions/23`,enableDeprecation:`MetaMask: 'ethereum.enable()' is deprecated and may be removed in the future. Please use the 'eth_requestAccounts' RPC method instead.
For more information, see: https://eips.ethereum.org/EIPS/eip-1102`,sendDeprecation:`MetaMask: 'ethereum.send(...)' is deprecated and may be removed in the future. Please use 'ethereum.sendAsync(...)' or 'ethereum.request(...)' instead.
For more information, see: https://eips.ethereum.org/EIPS/eip-1193`,events:{close:`MetaMask: The event 'close' is deprecated and may be removed in the future. Please use 'disconnect' instead.
For more information, see: https://eips.ethereum.org/EIPS/eip-1193#disconnect`,data:`MetaMask: The event 'data' is deprecated and will be removed in the future. Use 'message' instead.
For more information, see: https://eips.ethereum.org/EIPS/eip-1193#message`,networkChanged:`MetaMask: The event 'networkChanged' is deprecated and may be removed in the future. Use 'chainChanged' instead.
For more information, see: https://eips.ethereum.org/EIPS/eip-1193#chainchanged`,notification:`MetaMask: The event 'notification' is deprecated and may be removed in the future. Use 'message' instead.
For more information, see: https://eips.ethereum.org/EIPS/eip-1193#message`},rpc:{ethDecryptDeprecation:`MetaMask: The RPC method 'eth_decrypt' is deprecated and may be removed in the future.
For more information, see: https://medium.com/metamask/metamask-api-method-deprecation-2b0564a84686`,ethGetEncryptionPublicKeyDeprecation:`MetaMask: The RPC method 'eth_getEncryptionPublicKey' is deprecated and may be removed in the future.
For more information, see: https://medium.com/metamask/metamask-api-method-deprecation-2b0564a84686`,walletWatchAssetNFTExperimental:`MetaMask: The RPC method 'wallet_watchAsset' is experimental for ERC721/ERC1155 assets and may change in the future.
For more information, see: https://github.com/MetaMask/metamask-improvement-proposals/blob/main/MIPs/mip-1.md and https://github.com/MetaMask/metamask-improvement-proposals/blob/main/PROCESS-GUIDE.md#proposal-lifecycle`},experimentalMethods:"MetaMask: 'ethereum._metamask' exposes non-standard, experimental methods. They may be removed or changed without warning."}};function DD(t){const e={ethDecryptDeprecation:!1,ethGetEncryptionPublicKeyDeprecation:!1,walletWatchAssetNFTExperimental:!1};return(n,r,i)=>{var s;e.ethDecryptDeprecation||n.method!=="eth_decrypt"?e.ethGetEncryptionPublicKeyDeprecation||n.method!=="eth_getEncryptionPublicKey"?!e.walletWatchAssetNFTExperimental&&n.method==="wallet_watchAsset"&&[LD,BD].includes(((s=n.params)==null?void 0:s.type)||"")&&(t.warn(gt.warnings.rpc.walletWatchAssetNFTExperimental),e.walletWatchAssetNFTExperimental=!0):(t.warn(gt.warnings.rpc.ethGetEncryptionPublicKeyDeprecation),e.ethGetEncryptionPublicKeyDeprecation=!0):(t.warn(gt.warnings.rpc.ethDecryptDeprecation),e.ethDecryptDeprecation=!0),i()}}var YT=4294967295,CS=Math.floor(Math.random()*YT);function $D(){return(t,e,n,r)=>{const i=t.id,s=CS=(CS+1)%YT;t.id=s,e.id=s,n(o=>{t.id=i,e.id=i,o()})}}var Sb=(t,e,n)=>{if(!e.has(t))throw TypeError("Cannot "+n)},io=(t,e,n)=>(Sb(t,e,"read from private field"),n?n.call(t):e.get(t)),Qr=(t,e,n)=>{if(e.has(t))throw TypeError("Cannot add the same private member more than once");e instanceof WeakSet?e.add(t):e.set(t,n)},Lh=(t,e,n,r)=>(Sb(t,e,"write to private field"),e.set(t,n),n),hn=(t,e,n)=>(Sb(t,e,"access private method"),n),Ys={invalidInput:-32e3,resourceNotFound:-32001,resourceUnavailable:-32002,transactionRejected:-32003,methodNotSupported:-32004,limitExceeded:-32005,parse:-32700,invalidRequest:-32600,methodNotFound:-32601,invalidParams:-32602,internal:-32603},xS={"-32700":{standard:"JSON RPC 2.0",message:"Invalid JSON was received by the server. An error occurred on the server while parsing the JSON text."},"-32600":{standard:"JSON RPC 2.0",message:"The JSON sent is not a valid Request object."},"-32601":{standard:"JSON RPC 2.0",message:"The method does not exist / is not available."},"-32602":{standard:"JSON RPC 2.0",message:"Invalid method parameter(s)."},"-32603":{standard:"JSON RPC 2.0",message:"Internal JSON-RPC error."},"-32000":{standard:"EIP-1474",message:"Invalid input."},"-32001":{standard:"EIP-1474",message:"Resource not found."},"-32002":{standard:"EIP-1474",message:"Resource unavailable."},"-32003":{standard:"EIP-1474",message:"Transaction rejected."},"-32004":{standard:"EIP-1474",message:"Method not supported."},"-32005":{standard:"EIP-1474",message:"Request limit exceeded."},4001:{standard:"EIP-1193",message:"User rejected the request."},4100:{standard:"EIP-1193",message:"The requested account and/or method has not been authorized by the user."},4200:{standard:"EIP-1193",message:"The requested method is not supported by this Ethereum provider."},4900:{standard:"EIP-1193",message:"The provider is disconnected from all chains."},4901:{standard:"EIP-1193",message:"The provider is disconnected from the specified chain."}};function kS(t){return!!t&&typeof t=="object"&&!Array.isArray(t)}var _0=(t,e)=>Object.hasOwnProperty.call(t,e);class UD extends TypeError{constructor(e,n){let r;const{message:i,explanation:s,...o}=e,{path:a}=e,l=a.length===0?i:`At path: ${a.join(".")} -- ${i}`;super(s??l),s!=null&&(this.cause=l),Object.assign(this,o),this.name=this.constructor.name,this.failures=()=>r??(r=[e,...n()])}}function bs(t){return typeof t=="object"&&t!=null}function Ui(t){return typeof t=="symbol"?t.toString():typeof t=="string"?JSON.stringify(t):`${t}`}function FD(t,e,n,r){if(t===!0)return;t===!1?t={}:typeof t=="string"&&(t={message:t});const{path:i,branch:s}=e,{type:o}=n,{refinement:a,message:l=`Expected a value of type \`${o}\`${a?` with refinement \`${a}\``:""}, but received: \`${Ui(r)}\``}=t;return{value:r,type:o,refinement:a,key:i[i.length-1],path:i,branch:s,...t,message:l}}function*_S(t,e,n,r){(function(i){return bs(i)&&typeof i[Symbol.iterator]=="function"})(t)||(t=[t]);for(const i of t){const s=FD(i,e,n,r);s&&(yield s)}}function*Cb(t,e,n={}){const{path:r=[],branch:i=[t],coerce:s=!1,mask:o=!1}=n,a={path:r,branch:i};if(s&&(t=e.coercer(t,a),o&&e.type!=="type"&&bs(e.schema)&&bs(t)&&!Array.isArray(t)))for(const c in t)e.schema[c]===void 0&&delete t[c];let l="valid";for(const c of e.validator(t,a))c.explanation=n.message,l="not_valid",yield[c,void 0];for(let[c,u,d]of e.entries(t,a)){const f=Cb(u,d,{path:c===void 0?r:[...r,c],branch:c===void 0?i:[...i,u],coerce:s,mask:o,message:n.message});for(const h of f)h[0]?(l=h[0].refinement!=null?"not_refined":"not_valid",yield[h[0],void 0]):s&&(u=h[1],c===void 0?t=u:t instanceof Map?t.set(c,u):t instanceof Set?t.add(u):bs(t)&&(u!==void 0||c in t)&&(t[c]=u))}if(l!=="not_valid")for(const c of e.refiner(t,a))c.explanation=n.message,l="not_refined",yield[c,void 0];l==="valid"&&(yield[void 0,t])}class ii{constructor(e){const{type:n,schema:r,validator:i,refiner:s,coercer:o=l=>l,entries:a=function*(){}}=e;this.type=n,this.schema=r,this.entries=a,this.coercer=o,this.validator=i?(l,c)=>_S(i(l,c),c,this,l):()=>[],this.refiner=s?(l,c)=>_S(s(l,c),c,this,l):()=>[]}assert(e,n){return JT(e,this,n)}create(e,n){return ZT(e,this,n)}is(e){return xu(e,this)}mask(e,n){return function(r,i,s){const o=sf(r,i,{coerce:!0,mask:!0,message:s});if(o[0])throw o[0];return o[1]}(e,this,n)}validate(e,n={}){return sf(e,this,n)}}function JT(t,e,n){const r=sf(t,e,{message:n});if(r[0])throw r[0]}function ZT(t,e,n){const r=sf(t,e,{coerce:!0,message:n});if(r[0])throw r[0];return r[1]}function xu(t,e){return!sf(t,e)[0]}function sf(t,e,n={}){const r=Cb(t,e,n),i=function(s){const{done:o,value:a}=s.next();return o?void 0:a}(r);return i[0]?[new UD(i[0],function*(){for(const o of r)o[0]&&(yield o[0])}),void 0]:[void 0,i[1]]}function Vo(t,e){return new ii({type:t,schema:null,validator:e})}function PS(t){let e;return new ii({type:"lazy",schema:null,*entries(n,r){e??(e=t()),yield*e.entries(n,r)},validator:(n,r)=>(e??(e=t()),e.validator(n,r)),coercer:(n,r)=>(e??(e=t()),e.coercer(n,r)),refiner:(n,r)=>(e??(e=t()),e.refiner(n,r))})}function XT(t){return new ii({type:"array",schema:t,*entries(e){if(t&&Array.isArray(e))for(const[n,r]of e.entries())yield[n,r,t]},coercer:e=>Array.isArray(e)?e.slice():e,validator:e=>Array.isArray(e)||`Expected an array value, but received: ${Ui(e)}`})}function eR(t){const e=Ui(t),n=typeof t;return new ii({type:"literal",schema:n==="string"||n==="number"||n==="boolean"?t:null,validator:r=>r===t||`Expected the literal \`${e}\`, but received: ${Ui(r)}`})}function tR(){return Vo("number",t=>typeof t=="number"&&!isNaN(t)||`Expected a number, but received: ${Ui(t)}`)}function nR(t){const e=t?Object.keys(t):[],n=Vo("never",()=>!1);return new ii({type:"object",schema:t||null,*entries(r){if(t&&bs(r)){const i=new Set(Object.keys(r));for(const s of e)i.delete(s),yield[s,r[s],t[s]];for(const s of i)yield[s,r[s],n]}},validator:r=>bs(r)||`Expected an object, but received: ${Ui(r)}`,coercer:r=>bs(r)?{...r}:r})}function TS(t){return new ii({...t,validator:(e,n)=>e===void 0||t.validator(e,n),refiner:(e,n)=>e===void 0||t.refiner(e,n)})}function rR(t,e){return new ii({type:"record",schema:null,*entries(n){if(bs(n))for(const r in n){const i=n[r];yield[r,r,t],yield[r,i,e]}},validator:n=>bs(n)||`Expected an object, but received: ${Ui(n)}`})}function Go(){return Vo("string",t=>typeof t=="string"||`Expected a string, but received: ${Ui(t)}`)}function Mg(t){const e=t.map(n=>n.type).join(" | ");return new ii({type:"union",schema:null,coercer(n){for(const r of t){const[i,s]=r.validate(n,{coerce:!0});if(!i)return s}return n},validator(n,r){const i=[];for(const s of t){const[...o]=Cb(n,s,r),[a]=o;if(!a[0])return[];for(const[l]of o)l&&i.push(l)}return[`Expected the value to satisfy a union of \`${e}\`, but received: ${Ui(n)}`,...i]}})}function jD(t){return function(e){return function(n){return typeof n=="object"&&n!==null&&"message"in n}(e)&&typeof e.message=="string"?e.message:e==null?"":String(e)}(t).replace(/\.$/u,"")}function HD(t,e){var r,i;return n=t,typeof((i=(r=n==null?void 0:n.prototype)==null?void 0:r.constructor)==null?void 0:i.name)=="string"?new t({message:e}):t({message:e});var n}var KD=class extends Error{constructor(t){super(t.message),this.code="ERR_ASSERTION"}};function iR(){throw new Error("setTimeout has not been defined")}function sR(){throw new Error("clearTimeout has not been defined")}var Hs=iR,Ks=sR;function oR(t){if(Hs===setTimeout)return setTimeout(t,0);if((Hs===iR||!Hs)&&setTimeout)return Hs=setTimeout,setTimeout(t,0);try{return Hs(t,0)}catch{try{return Hs.call(null,t,0)}catch{return Hs.call(this,t,0)}}}typeof Cn.setTimeout=="function"&&(Hs=setTimeout),typeof Cn.clearTimeout=="function"&&(Ks=clearTimeout);var Aa,ms=[],fc=!1,wp=-1;function zD(){fc&&Aa&&(fc=!1,Aa.length?ms=Aa.concat(ms):wp=-1,ms.length&&aR())}function aR(){if(!fc){var t=oR(zD);fc=!0;for(var e=ms.length;e;){for(Aa=ms,ms=[];++wp<e;)Aa&&Aa[wp].run();wp=-1,e=ms.length}Aa=null,fc=!1,function(n){if(Ks===clearTimeout)return clearTimeout(n);if((Ks===sR||!Ks)&&clearTimeout)return Ks=clearTimeout,clearTimeout(n);try{return Ks(n)}catch{try{return Ks.call(null,n)}catch{return Ks.call(this,n)}}}(t)}}function lR(t,e){this.fun=t,this.array=e}lR.prototype.run=function(){this.fun.apply(null,this.array)};function dl(){}var VD=dl,GD=dl,WD=dl,qD=dl,QD=dl,YD=dl,JD=dl,_l=Cn.performance||{},ZD=_l.now||_l.mozNow||_l.msNow||_l.oNow||_l.webkitNow||function(){return new Date().getTime()},XD=new Date,je={nextTick:function(t){var e=new Array(arguments.length-1);if(arguments.length>1)for(var n=1;n<arguments.length;n++)e[n-1]=arguments[n];ms.push(new lR(t,e)),ms.length!==1||fc||oR(aR)},title:"browser",browser:!0,env:{},argv:[],version:"",versions:{},on:VD,addListener:GD,once:WD,off:qD,removeListener:QD,removeAllListeners:YD,emit:JD,binding:function(t){throw new Error("process.binding is not supported")},cwd:function(){return"/"},chdir:function(t){throw new Error("process.chdir is not supported")},umask:function(){return 0},hrtime:function(t){var e=.001*ZD.call(_l),n=Math.floor(e),r=Math.floor(e%1*1e9);return t&&(n-=t[0],(r-=t[1])<0&&(n--,r+=1e9)),[n,r]},platform:"browser",release:{},config:{},uptime:function(){return(new Date-XD)/1e3}},of=t=>nR(t);function RS({path:t,branch:e}){const n=t[t.length-1];return _0(e[e.length-2],n)}function P0(t){return new ii({...t,type:`optional ${t.type}`,validator:(e,n)=>!RS(n)||t.validator(e,n),refiner:(e,n)=>!RS(n)||t.refiner(e,n)})}var Bh,IS,OS,T0=Mg([eR(null),Vo("boolean",t=>typeof t=="boolean"),Vo("finite number",t=>xu(t,tR())&&Number.isFinite(t)),Go(),XT(PS(()=>T0)),rR(Go(),PS(()=>T0))]),af=(Bh=T0,IS=Vo("any",()=>!0),OS=t=>(function(e,n,r="Assertion failed",i=KD){try{JT(e,n)}catch(s){throw HD(i,`${r}: ${jD(s)}.`)}}(t,T0),JSON.parse(JSON.stringify(t,(e,n)=>{if(e!=="__proto__"&&e!=="constructor")return n}))),new ii({...Bh,coercer:(t,e)=>xu(t,IS)?Bh.coercer(OS(t,e),e):Bh.coercer(t,e)}));function kw(t){try{return function(e){ZT(e,af)}(t),!0}catch{return!1}}var yd=eR("2.0"),bp=function(t){return new ii({...t,validator:(e,n)=>e===null||t.validator(e,n),refiner:(e,n)=>e===null||t.refiner(e,n)})}(Mg([tR(),Go()])),_w=of({code:Vo("integer",t=>typeof t=="number"&&!isNaN(t)&&Number.isInteger(t)||`Expected an integer, but received: ${Ui(t)}`),message:Go(),data:P0(af),stack:P0(Go())}),cR=Mg([rR(Go(),af),XT(af)]),e9=of({id:bp,jsonrpc:yd,method:Go(),params:P0(cR)}),t9=of({jsonrpc:yd,method:Go(),params:P0(cR)});function NS(t){return xu(t,e9)}function MS(t){return xu(t,_w)}nR({id:bp,jsonrpc:yd,result:TS(Vo("unknown",()=>!0)),error:TS(_w)}),Mg([of({id:bp,jsonrpc:yd,result:af}),of({id:bp,jsonrpc:yd,error:_w})]);var LS=Ys.internal,n9="Unspecified error message. This is a bug, please report it.",r9={code:LS,message:uR(LS)},i9="Unspecified server error.";function uR(t,e=n9){if(function(n){return Number.isInteger(n)}(t)){const n=t.toString();if(_0(xS,n))return xS[n].message;if(function(r){return r>=-32099&&r<=-32e3}(t))return i9}return e}function BS(t,{fallbackError:e=r9,shouldIncludeStack:n=!0}={}){if(!MS(e))throw new Error("Must provide fallback error with integer number code and string message.");const r=function(i,s){if(i&&typeof i=="object"&&"serialize"in i&&typeof i.serialize=="function")return i.serialize();if(MS(i))return i;const o=dR(i);return{...s,data:{cause:o}}}(t,e);return n||delete r.stack,r}function dR(t){return Array.isArray(t)?t.map(e=>kw(e)?e:kS(e)?DS(e):null):kS(t)?DS(t):kw(t)?t:null}function DS(t){return Object.getOwnPropertyNames(t).reduce((e,n)=>{const r=t[n];return kw(r)&&(e[n]=r),e},{})}var fR=rd;rd.default=rd,rd.stable=$S,rd.stableStringify=$S;var R0="[...]",hR="[Circular]",sl=[],Sa=[];function pR(){return{depthLimit:Number.MAX_SAFE_INTEGER,edgesLimit:Number.MAX_SAFE_INTEGER}}function rd(t,e,n,r){var i;r===void 0&&(r=pR()),Pw(t,"",0,[],void 0,0,r);try{i=Sa.length===0?JSON.stringify(t,e,n):JSON.stringify(t,gR(e),n)}catch{return JSON.stringify("[unable to serialize, circular reference is too complex to analyze]")}finally{for(;sl.length!==0;){var s=sl.pop();s.length===4?Object.defineProperty(s[0],s[1],s[3]):s[0][s[1]]=s[2]}}return i}function hc(t,e,n,r){var i=Object.getOwnPropertyDescriptor(r,n);i.get!==void 0?i.configurable?(Object.defineProperty(r,n,{value:t}),sl.push([r,n,e,i])):Sa.push([e,n,t]):(r[n]=t,sl.push([r,n,e]))}function Pw(t,e,n,r,i,s,o){var a;if(s+=1,typeof t=="object"&&t!==null){for(a=0;a<r.length;a++)if(r[a]===t)return void hc(hR,t,e,i);if(o.depthLimit!==void 0&&s>o.depthLimit||o.edgesLimit!==void 0&&n+1>o.edgesLimit)return void hc(R0,t,e,i);if(r.push(t),Array.isArray(t))for(a=0;a<t.length;a++)Pw(t[a],a,a,r,t,s,o);else{var l=Object.keys(t);for(a=0;a<l.length;a++){var c=l[a];Pw(t[c],c,a,r,t,s,o)}}r.pop()}}function s9(t,e){return t<e?-1:t>e?1:0}function $S(t,e,n,r){r===void 0&&(r=pR());var i,s=Tw(t,"",0,[],void 0,0,r)||t;try{i=Sa.length===0?JSON.stringify(s,e,n):JSON.stringify(s,gR(e),n)}catch{return JSON.stringify("[unable to serialize, circular reference is too complex to analyze]")}finally{for(;sl.length!==0;){var o=sl.pop();o.length===4?Object.defineProperty(o[0],o[1],o[3]):o[0][o[1]]=o[2]}}return i}function Tw(t,e,n,r,i,s,o){var a;if(s+=1,typeof t=="object"&&t!==null){for(a=0;a<r.length;a++)if(r[a]===t)return void hc(hR,t,e,i);try{if(typeof t.toJSON=="function")return}catch{return}if(o.depthLimit!==void 0&&s>o.depthLimit||o.edgesLimit!==void 0&&n+1>o.edgesLimit)return void hc(R0,t,e,i);if(r.push(t),Array.isArray(t))for(a=0;a<t.length;a++)Tw(t[a],a,a,r,t,s,o);else{var l={},c=Object.keys(t).sort(s9);for(a=0;a<c.length;a++){var u=c[a];Tw(t[u],u,a,r,t,s,o),l[u]=t[u]}if(i===void 0)return l;sl.push([i,e,t]),i[e]=l}r.pop()}}function gR(t){return t=t!==void 0?t:function(e,n){return n},function(e,n){if(Sa.length>0)for(var r=0;r<Sa.length;r++){var i=Sa[r];if(i[1]===e&&i[0]===n){n=i[2],Sa.splice(r,1);break}}return t.call(this,e,n)}}var o9=Og(fR),Qi=class extends Error{constructor(t,e,n){if(!Number.isInteger(t))throw new Error('"code" must be an integer.');if(!e||typeof e!="string")throw new Error('"message" must be a non-empty string.');super(e),this.code=t,n!==void 0&&(this.data=n)}serialize(){const t={code:this.code,message:this.message};return this.data!==void 0&&(t.data=this.data,function(e){if(typeof e!="object"||e===null)return!1;try{let n=e;for(;Object.getPrototypeOf(n)!==null;)n=Object.getPrototypeOf(n);return Object.getPrototypeOf(e)===n}catch{return!1}}(this.data)&&(t.data.cause=dR(this.data.cause))),this.stack&&(t.stack=this.stack),t}toString(){return o9(this.serialize(),a9,2)}};function a9(t,e){if(e!=="[Circular]")return e}var vd=t=>l9(Ys.invalidRequest,t);function l9(t,e){const[n,r]=function(i){if(i){if(typeof i=="string")return[i];if(typeof i=="object"&&!Array.isArray(i)){const{message:s,data:o}=i;if(s&&typeof s!="string")throw new Error("Must specify string message.");return[s??void 0,o]}}return[]}(e);return new Qi(t,n??uR(t),r)}var mR={};function zs(){}function Ve(){Ve.init.call(this)}function yR(t){return t._maxListeners===void 0?Ve.defaultMaxListeners:t._maxListeners}function US(t,e,n,r){var i,s,o;if(typeof n!="function")throw new TypeError('"listener" argument must be a function');if((s=t._events)?(s.newListener&&(t.emit("newListener",e,n.listener?n.listener:n),s=t._events),o=s[e]):(s=t._events=new zs,t._eventsCount=0),o){if(typeof o=="function"?o=s[e]=r?[n,o]:[o,n]:r?o.unshift(n):o.push(n),!o.warned&&(i=yR(t))&&i>0&&o.length>i){o.warned=!0;var a=new Error("Possible EventEmitter memory leak detected. "+o.length+" "+e+" listeners added. Use emitter.setMaxListeners() to increase limit");a.name="MaxListenersExceededWarning",a.emitter=t,a.type=e,a.count=o.length,function(l){typeof console.warn=="function"?console.warn(l):console.log(l)}(a)}}else o=s[e]=n,++t._eventsCount;return t}function FS(t,e,n){var r=!1;function i(){t.removeListener(e,i),r||(r=!0,n.apply(t,arguments))}return i.listener=n,i}function jS(t){var e=this._events;if(e){var n=e[t];if(typeof n=="function")return 1;if(n)return n.length}return 0}function zu(t,e){for(var n=new Array(e);e--;)n[e]=t[e];return n}zs.prototype=Object.create(null),Ve.EventEmitter=Ve,Ve.usingDomains=!1,Ve.prototype.domain=void 0,Ve.prototype._events=void 0,Ve.prototype._maxListeners=void 0,Ve.defaultMaxListeners=10,Ve.init=function(){this.domain=null,Ve.usingDomains&&(void 0).active,this._events&&this._events!==Object.getPrototypeOf(this)._events||(this._events=new zs,this._eventsCount=0),this._maxListeners=this._maxListeners||void 0},Ve.prototype.setMaxListeners=function(t){if(typeof t!="number"||t<0||isNaN(t))throw new TypeError('"n" argument must be a positive number');return this._maxListeners=t,this},Ve.prototype.getMaxListeners=function(){return yR(this)},Ve.prototype.emit=function(t){var e,n,r,i,s,o,a,l=t==="error";if(o=this._events)l=l&&o.error==null;else if(!l)return!1;if(a=this.domain,l){if(e=arguments[1],!a){if(e instanceof Error)throw e;var c=new Error('Uncaught, unspecified "error" event. ('+e+")");throw c.context=e,c}return e||(e=new Error('Uncaught, unspecified "error" event')),e.domainEmitter=this,e.domain=a,e.domainThrown=!1,a.emit("error",e),!1}if(!(n=o[t]))return!1;var u=typeof n=="function";switch(r=arguments.length){case 1:(function(d,f,h){if(f)d.call(h);else for(var m=d.length,g=zu(d,m),w=0;w<m;++w)g[w].call(h)})(n,u,this);break;case 2:(function(d,f,h,m){if(f)d.call(h,m);else for(var g=d.length,w=zu(d,g),p=0;p<g;++p)w[p].call(h,m)})(n,u,this,arguments[1]);break;case 3:(function(d,f,h,m,g){if(f)d.call(h,m,g);else for(var w=d.length,p=zu(d,w),v=0;v<w;++v)p[v].call(h,m,g)})(n,u,this,arguments[1],arguments[2]);break;case 4:(function(d,f,h,m,g,w){if(f)d.call(h,m,g,w);else for(var p=d.length,v=zu(d,p),y=0;y<p;++y)v[y].call(h,m,g,w)})(n,u,this,arguments[1],arguments[2],arguments[3]);break;default:for(i=new Array(r-1),s=1;s<r;s++)i[s-1]=arguments[s];(function(d,f,h,m){if(f)d.apply(h,m);else for(var g=d.length,w=zu(d,g),p=0;p<g;++p)w[p].apply(h,m)})(n,u,this,i)}return!0},Ve.prototype.addListener=function(t,e){return US(this,t,e,!1)},Ve.prototype.on=Ve.prototype.addListener,Ve.prototype.prependListener=function(t,e){return US(this,t,e,!0)},Ve.prototype.once=function(t,e){if(typeof e!="function")throw new TypeError('"listener" argument must be a function');return this.on(t,FS(this,t,e)),this},Ve.prototype.prependOnceListener=function(t,e){if(typeof e!="function")throw new TypeError('"listener" argument must be a function');return this.prependListener(t,FS(this,t,e)),this},Ve.prototype.removeListener=function(t,e){var n,r,i,s,o;if(typeof e!="function")throw new TypeError('"listener" argument must be a function');if(!(r=this._events))return this;if(!(n=r[t]))return this;if(n===e||n.listener&&n.listener===e)--this._eventsCount==0?this._events=new zs:(delete r[t],r.removeListener&&this.emit("removeListener",t,n.listener||e));else if(typeof n!="function"){for(i=-1,s=n.length;s-- >0;)if(n[s]===e||n[s].listener&&n[s].listener===e){o=n[s].listener,i=s;break}if(i<0)return this;if(n.length===1){if(n[0]=void 0,--this._eventsCount==0)return this._events=new zs,this;delete r[t]}else(function(a,l){for(var c=l,u=c+1,d=a.length;u<d;c+=1,u+=1)a[c]=a[u];a.pop()})(n,i);r.removeListener&&this.emit("removeListener",t,o||e)}return this},Ve.prototype.off=function(t,e){return this.removeListener(t,e)},Ve.prototype.removeAllListeners=function(t){var e,n;if(!(n=this._events))return this;if(!n.removeListener)return arguments.length===0?(this._events=new zs,this._eventsCount=0):n[t]&&(--this._eventsCount==0?this._events=new zs:delete n[t]),this;if(arguments.length===0){for(var r,i=Object.keys(n),s=0;s<i.length;++s)(r=i[s])!=="removeListener"&&this.removeAllListeners(r);return this.removeAllListeners("removeListener"),this._events=new zs,this._eventsCount=0,this}if(typeof(e=n[t])=="function")this.removeListener(t,e);else if(e)do this.removeListener(t,e[e.length-1]);while(e[0]);return this},Ve.prototype.listeners=function(t){var e,n,r=this._events;return n=r&&(e=r[t])?typeof e=="function"?[e.listener||e]:function(i){for(var s=new Array(i.length),o=0;o<s.length;++o)s[o]=i[o].listener||i[o];return s}(e):[],n},Ve.listenerCount=function(t,e){return typeof t.listenerCount=="function"?t.listenerCount(e):jS.call(t,e)},Ve.prototype.listenerCount=jS,Ve.prototype.eventNames=function(){return this._eventsCount>0?Reflect.ownKeys(this._events):[]};var xb=Uf(Object.freeze({__proto__:null,EventEmitter:Ve,default:Ve}));Object.defineProperty(mR,"__esModule",{value:!0});const c9=xb;function HS(t,e,n){try{Reflect.apply(t,e,n)}catch(r){setTimeout(()=>{throw r})}}let u9=class extends c9.EventEmitter{emit(t,...e){let n=t==="error";const r=this._events;if(r!==void 0)n=n&&r.error===void 0;else if(!n)return!1;if(n){let s;if(e.length>0&&([s]=e),s instanceof Error)throw s;const o=new Error("Unhandled error."+(s?` (${s.message})`:""));throw o.context=s,o}const i=r[t];if(i===void 0)return!1;if(typeof i=="function")HS(i,this,e);else{const s=i.length,o=function(a){const l=a.length,c=new Array(l);for(let u=0;u<l;u+=1)c[u]=a[u];return c}(i);for(let a=0;a<s;a+=1)HS(o[a],this,e)}return!0}};var I0,Js,Ql,id,Ep,Ap,Rw,Sp,Iw,sy,KS,Cp,Ow,oy,zS,wd,O0,ay,VS,vR=mR.default=u9,Mr=class xp extends vR{constructor({notificationHandler:e}={}){super(),Qr(this,id),Qr(this,Ap),Qr(this,Sp),Qr(this,I0,!1),Qr(this,Js,void 0),Qr(this,Ql,void 0),Lh(this,Js,[]),Lh(this,Ql,e)}destroy(){io(this,Js).forEach(e=>{"destroy"in e&&typeof e.destroy=="function"&&e.destroy()}),Lh(this,Js,[]),Lh(this,I0,!0)}push(e){hn(this,id,Ep).call(this),io(this,Js).push(e)}handle(e,n){if(hn(this,id,Ep).call(this),n&&typeof n!="function")throw new Error('"callback" must be a function if provided.');return Array.isArray(e)?n?hn(this,Ap,Rw).call(this,e,n):hn(this,Ap,Rw).call(this,e):n?hn(this,Sp,Iw).call(this,e,n):this._promiseHandle(e)}asMiddleware(){return hn(this,id,Ep).call(this),async(e,n,r,i)=>{var s,o;try{const[a,l,c]=await hn(s=xp,Cp,Ow).call(s,e,n,io(this,Js));return l?(await hn(o=xp,wd,O0).call(o,c),i(a)):r(async u=>{var d;try{await hn(d=xp,wd,O0).call(d,c)}catch(f){return u(f)}return u()})}catch(a){return i(a)}}}async _promiseHandle(e){return new Promise((n,r)=>{hn(this,Sp,Iw).call(this,e,(i,s)=>{i&&s===void 0?r(i):n(s)}).catch(r)})}};I0=new WeakMap,Js=new WeakMap,Ql=new WeakMap,id=new WeakSet,Ep=function(){if(io(this,I0))throw new Error("This engine is destroyed and can no longer be used.")},Ap=new WeakSet,Rw=async function(t,e){try{if(t.length===0){const r=[{id:null,jsonrpc:"2.0",error:new Qi(Ys.invalidRequest,"Request batch must contain plain objects. Received an empty array")}];return e?e(null,r):r}const n=(await Promise.all(t.map(this._promiseHandle.bind(this)))).filter(r=>r!==void 0);return e?e(null,n):n}catch(n){if(e)return e(n);throw n}},Sp=new WeakSet,Iw=async function(t,e){var n;if(!t||Array.isArray(t)||typeof t!="object"){const o=new Qi(Ys.invalidRequest,"Requests must be plain objects. Received: "+typeof t,{request:t});return e(o,{id:null,jsonrpc:"2.0",error:o})}if(typeof t.method!="string"){const o=new Qi(Ys.invalidRequest,"Must specify a string method. Received: "+typeof t.method,{request:t});return io(this,Ql)&&!NS(t)?e(null):e(o,{id:t.id??null,jsonrpc:"2.0",error:o})}if(io(this,Ql)&&xu(t,t9)&&!NS(t)){try{await io(this,Ql).call(this,t)}catch(o){return e(o)}return e(null)}let r=null;const i={...t},s={id:i.id,jsonrpc:i.jsonrpc};try{await hn(n=Mr,sy,KS).call(n,i,s,io(this,Js))}catch(o){r=o}return r&&(delete s.result,s.error||(s.error=BS(r))),e(r,s)},sy=new WeakSet,KS=async function(t,e,n){var r,i,s;const[o,a,l]=await hn(r=Mr,Cp,Ow).call(r,t,e,n);if(hn(i=Mr,ay,VS).call(i,t,e,a),await hn(s=Mr,wd,O0).call(s,l),o)throw o},Cp=new WeakSet,Ow=async function(t,e,n){var r;const i=[];let s=null,o=!1;for(const a of n)if([s,o]=await hn(r=Mr,oy,zS).call(r,t,e,a,i),o)break;return[s,o,i.reverse()]},oy=new WeakSet,zS=async function(t,e,n,r){return new Promise(i=>{const s=a=>{const l=a||e.error;l&&(e.error=BS(l)),i([l,!0])},o=a=>{e.error?s(e.error):(a&&(typeof a!="function"&&s(new Qi(Ys.internal,`JsonRpcEngine: "next" return handlers must be functions. Received "${typeof a}" for request:
${ly(t)}`,{request:t})),r.push(a)),i([null,!1]))};try{n(t,e,o,s)}catch(a){s(a)}})},wd=new WeakSet,O0=async function(t){for(const e of t)await new Promise((n,r)=>{e(i=>i?r(i):n())})},ay=new WeakSet,VS=function(t,e,n){if(!_0(e,"result")&&!_0(e,"error"))throw new Qi(Ys.internal,`JsonRpcEngine: Response has no error or result for request:
${ly(t)}`,{request:t});if(!n)throw new Qi(Ys.internal,`JsonRpcEngine: Nothing ended request:
${ly(t)}`,{request:t})},Qr(Mr,sy),Qr(Mr,Cp),Qr(Mr,oy),Qr(Mr,wd),Qr(Mr,ay);var d9=Mr;function ly(t){return JSON.stringify(t,null,2)}var wR=Object.freeze(["eth_subscription"]),f9=(t=console)=>[$D(),h9(t),DD(t)];function h9(t){return(e,n,r)=>{typeof e.method=="string"&&e.method||(n.error=vd({message:"The request 'method' must be a non-empty string.",data:e})),r(i=>{const{error:s}=n;return s&&t.error(`MetaMask - RPC Error: ${s.message}`,s),i()})}}var kp=(t,e,n=!0)=>(r,i)=>{r||i.error?e(r||i.error):!n||Array.isArray(i)?t(i):t(i.result)},bR=t=>!!t&&typeof t=="string"&&t.startsWith("0x"),ER=()=>{};async function GS(t,e){try{const n=await async function(){return{name:p9(window),icon:await g9(window)}}();t.handle({jsonrpc:"2.0",id:1,method:"metamask_sendDomainMetadata",params:n},ER)}catch(n){e.error({message:gt.errors.sendSiteMetadata(),originalError:n})}}function p9(t){const{document:e}=t,n=e.querySelector('head > meta[property="og:site_name"]');if(n)return n.content;const r=e.querySelector('head > meta[name="title"]');return r?r.content:e.title&&e.title.length>0?e.title:window.location.hostname}async function g9(t){const{document:e}=t,n=e.querySelectorAll('head > link[rel~="icon"]');for(const r of Array.from(n))if(r&&await m9(r.href))return r.href;return null}async function m9(t){return new Promise((e,n)=>{try{const r=document.createElement("img");r.onload=()=>e(!0),r.onerror=()=>e(!1),r.src=t}catch(r){n(r)}})}var AR=(t,e,n)=>{if(!e.has(t))throw TypeError("Cannot "+n)},_i=(t,e,n)=>(AR(t,e,"read from private field"),n?n.call(t):e.get(t)),Nw=(t,e,n)=>{if(e.has(t))throw TypeError("Cannot add the same private member more than once");e instanceof WeakSet?e.add(t):e.set(t,n)},Yi=(t,e,n,r)=>(AR(t,e,"write to private field"),e.set(t,n),n);function WS(t,e,n){try{Reflect.apply(t,e,n)}catch(r){setTimeout(()=>{throw r})}}class y9 extends Ve{emit(e,...n){let r=e==="error";const i=this._events;if(i!==void 0)r=r&&i.error===void 0;else if(!r)return!1;if(r){let o;if(n.length>0&&([o]=n),o instanceof Error)throw o;const a=new Error("Unhandled error."+(o?` (${o.message})`:""));throw a.context=o,a}const s=i[e];if(s===void 0)return!1;if(typeof s=="function")WS(s,this,n);else{const o=s.length,a=function(l){const c=l.length,u=new Array(c);for(let d=0;d<c;d+=1)u[d]=l[d];return u}(s);for(let l=0;l<o;l+=1)WS(a[l],this,n)}return!0}}var Vs,oa,v9=function t(e,n){if(e===n)return!0;if(e&&n&&typeof e=="object"&&typeof n=="object"){if(e.constructor!==n.constructor)return!1;var r,i,s;if(Array.isArray(e)){if((r=e.length)!=n.length)return!1;for(i=r;i--!=0;)if(!t(e[i],n[i]))return!1;return!0}if(e.constructor===RegExp)return e.source===n.source&&e.flags===n.flags;if(e.valueOf!==Object.prototype.valueOf)return e.valueOf()===n.valueOf();if(e.toString!==Object.prototype.toString)return e.toString()===n.toString();if((r=(s=Object.keys(e)).length)!==Object.keys(n).length)return!1;for(i=r;i--!=0;)if(!Object.prototype.hasOwnProperty.call(n,s[i]))return!1;for(i=r;i--!=0;){var o=s[i];if(!t(e[o],n[o]))return!1}return!0}return e!=e&&n!=n},w9=Og(v9),SR=class CR extends y9{constructor({logger:e=console,maxEventListeners:n=100,rpcMiddleware:r=[]}={}){super(),Nw(this,Vs,void 0),Nw(this,oa,void 0),this._log=e,this.setMaxListeners(n),this._state={...CR._defaultState},Yi(this,oa,null),Yi(this,Vs,null),this._handleAccountsChanged=this._handleAccountsChanged.bind(this),this._handleConnect=this._handleConnect.bind(this),this._handleChainChanged=this._handleChainChanged.bind(this),this._handleDisconnect=this._handleDisconnect.bind(this),this._handleUnlockStateChanged=this._handleUnlockStateChanged.bind(this),this._rpcRequest=this._rpcRequest.bind(this),this.request=this.request.bind(this);const i=new d9;r.forEach(s=>i.push(s)),this._rpcEngine=i}get chainId(){return _i(this,Vs)}get selectedAddress(){return _i(this,oa)}isConnected(){return this._state.isConnected}async request(e){if(!e||typeof e!="object"||Array.isArray(e))throw vd({message:gt.errors.invalidRequestArgs(),data:e});const{method:n,params:r}=e;if(typeof n!="string"||n.length===0)throw vd({message:gt.errors.invalidRequestMethod(),data:e});if(r!==void 0&&!Array.isArray(r)&&(typeof r!="object"||r===null))throw vd({message:gt.errors.invalidRequestParams(),data:e});const i=r==null?{method:n}:{method:n,params:r};return new Promise((s,o)=>{this._rpcRequest(i,kp(s,o))})}_initializeState(e){if(this._state.initialized)throw new Error("Provider already initialized.");if(e){const{accounts:n,chainId:r,isUnlocked:i,networkVersion:s}=e;this._handleConnect(r),this._handleChainChanged({chainId:r,networkVersion:s}),this._handleUnlockStateChanged({accounts:n,isUnlocked:i}),this._handleAccountsChanged(n)}this._state.initialized=!0,this.emit("_initialized")}_rpcRequest(e,n){let r=n;return Array.isArray(e)||(e.jsonrpc||(e.jsonrpc="2.0"),e.method!=="eth_accounts"&&e.method!=="eth_requestAccounts"||(r=(i,s)=>{this._handleAccountsChanged(s.result??[],e.method==="eth_accounts"),n(i,s)})),this._rpcEngine.handle(e,r)}_handleConnect(e){this._state.isConnected||(this._state.isConnected=!0,this.emit("connect",{chainId:e}),this._log.debug(gt.info.connected(e)))}_handleDisconnect(e,n){if(this._state.isConnected||!this._state.isPermanentlyDisconnected&&!e){let r;this._state.isConnected=!1,e?(r=new Qi(1013,n??gt.errors.disconnected()),this._log.debug(r)):(r=new Qi(1011,n??gt.errors.permanentlyDisconnected()),this._log.error(r),Yi(this,Vs,null),this._state.accounts=null,Yi(this,oa,null),this._state.isUnlocked=!1,this._state.isPermanentlyDisconnected=!0),this.emit("disconnect",r)}}_handleChainChanged({chainId:e}={}){bR(e)?(this._handleConnect(e),e!==_i(this,Vs)&&(Yi(this,Vs,e),this._state.initialized&&this.emit("chainChanged",_i(this,Vs)))):this._log.error(gt.errors.invalidNetworkParams(),{chainId:e})}_handleAccountsChanged(e,n=!1){let r=e;Array.isArray(e)||(this._log.error("MetaMask: Received invalid accounts parameter. Please report this bug.",e),r=[]);for(const i of e)if(typeof i!="string"){this._log.error("MetaMask: Received non-string account. Please report this bug.",e),r=[];break}if(!w9(this._state.accounts,r)&&(n&&this._state.accounts!==null&&this._log.error("MetaMask: 'eth_accounts' unexpectedly updated accounts. Please report this bug.",r),this._state.accounts=r,_i(this,oa)!==r[0]&&Yi(this,oa,r[0]||null),this._state.initialized)){const i=[...r];this.emit("accountsChanged",i)}}_handleUnlockStateChanged({accounts:e,isUnlocked:n}={}){typeof n=="boolean"?n!==this._state.isUnlocked&&(this._state.isUnlocked=n,this._handleAccountsChanged(e??[])):this._log.error("MetaMask: Received invalid isUnlocked parameter. Please report this bug.")}};Vs=new WeakMap,oa=new WeakMap,SR._defaultState={accounts:null,isConnected:!1,isUnlocked:!1,initialized:!1,isPermanentlyDisconnected:!1};var qS,QS,b9=SR,Mw={exports:{}};function xR(){return QS?qS:(QS=1,qS=xb.EventEmitter)}var kb,_b=Uf(LB);kb=typeof Object.create=="function"?function(t,e){t.super_=e,t.prototype=Object.create(e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}})}:function(t,e){t.super_=e;var n=function(){};n.prototype=e.prototype,t.prototype=new n,t.prototype.constructor=t};var kR=Object.getOwnPropertyDescriptors||function(t){for(var e=Object.keys(t),n={},r=0;r<e.length;r++)n[e[r]]=Object.getOwnPropertyDescriptor(t,e[r]);return n},E9=/%[sdj%]/g;function Lg(t){if(!lf(t)){for(var e=[],n=0;n<arguments.length;n++)e.push(Li(arguments[n]));return e.join(" ")}n=1;for(var r=arguments,i=r.length,s=String(t).replace(E9,function(a){if(a==="%%")return"%";if(n>=i)return a;switch(a){case"%s":return String(r[n++]);case"%d":return Number(r[n++]);case"%j":try{return JSON.stringify(r[n++])}catch{return"[Circular]"}default:return a}}),o=r[n];n<i;o=r[++n])Hf(o)||!fl(o)?s+=" "+o:s+=" "+Li(o);return s}function Pb(t,e){if(Ri(Cn.process))return function(){return Pb(t,e).apply(this,arguments)};if(je.noDeprecation===!0)return t;var n=!1;return function(){if(!n){if(je.throwDeprecation)throw new Error(e);je.traceDeprecation?console.trace(e):console.error(e),n=!0}return t.apply(this,arguments)}}var cy,Dh={};function _R(t){return Ri(cy)&&(cy=je.env.NODE_DEBUG||""),t=t.toUpperCase(),!Dh[t]&&(new RegExp("\\b"+t+"\\b","i").test(cy)?Dh[t]=function(){var e=Lg.apply(null,arguments);console.error("%s %d: %s",t,0,e)}:Dh[t]=function(){}),Dh[t]}function Li(t,e){var n={seen:[],stylize:S9};return arguments.length>=3&&(n.depth=arguments[2]),arguments.length>=4&&(n.colors=arguments[3]),Bg(e)?n.showHidden=e:e&&Ob(n,e),Ri(n.showHidden)&&(n.showHidden=!1),Ri(n.depth)&&(n.depth=2),Ri(n.colors)&&(n.colors=!1),Ri(n.customInspect)&&(n.customInspect=!0),n.colors&&(n.stylize=A9),N0(n,t,n.depth)}function A9(t,e){var n=Li.styles[e];return n?"\x1B["+Li.colors[n][0]+"m"+t+"\x1B["+Li.colors[n][1]+"m":t}function S9(t,e){return t}function N0(t,e,n){if(t.customInspect&&e&&Ad(e.inspect)&&e.inspect!==Li&&(!e.constructor||e.constructor.prototype!==e)){var r=e.inspect(n,t);return lf(r)||(r=N0(t,r,n)),r}var i=function(f,h){if(Ri(h))return f.stylize("undefined","undefined");if(lf(h)){var m="'"+JSON.stringify(h).replace(/^"|"$/g,"").replace(/'/g,"\\'").replace(/\\"/g,'"')+"'";return f.stylize(m,"string")}if(Rb(h))return f.stylize(""+h,"number");if(Bg(h))return f.stylize(""+h,"boolean");if(Hf(h))return f.stylize("null","null")}(t,e);if(i)return i;var s=Object.keys(e),o=function(f){var h={};return f.forEach(function(m,g){h[m]=!0}),h}(s);if(t.showHidden&&(s=Object.getOwnPropertyNames(e)),Ed(e)&&(s.indexOf("message")>=0||s.indexOf("description")>=0))return uy(e);if(s.length===0){if(Ad(e)){var a=e.name?": "+e.name:"";return t.stylize("[Function"+a+"]","special")}if(bd(e))return t.stylize(RegExp.prototype.toString.call(e),"regexp");if(M0(e))return t.stylize(Date.prototype.toString.call(e),"date");if(Ed(e))return uy(e)}var l,c="",u=!1,d=["{","}"];return Tb(e)&&(u=!0,d=["[","]"]),Ad(e)&&(c=" [Function"+(e.name?": "+e.name:"")+"]"),bd(e)&&(c=" "+RegExp.prototype.toString.call(e)),M0(e)&&(c=" "+Date.prototype.toUTCString.call(e)),Ed(e)&&(c=" "+uy(e)),s.length!==0||u&&e.length!=0?n<0?bd(e)?t.stylize(RegExp.prototype.toString.call(e),"regexp"):t.stylize("[Object]","special"):(t.seen.push(e),l=u?function(f,h,m,g,w){for(var p=[],v=0,y=h.length;v<y;++v)NR(h,String(v))?p.push(dy(f,h,m,g,String(v),!0)):p.push("");return w.forEach(function(x){x.match(/^\d+$/)||p.push(dy(f,h,m,g,x,!0))}),p}(t,e,n,o,s):s.map(function(f){return dy(t,e,n,o,f,u)}),t.seen.pop(),function(f,h,m){var g=f.reduce(function(w,p){return p.indexOf(`
`),w+p.replace(/\u001b\[\d\d?m/g,"").length+1},0);return g>60?m[0]+(h===""?"":h+`
 `)+" "+f.join(`,
  `)+" "+m[1]:m[0]+h+" "+f.join(", ")+" "+m[1]}(l,c,d)):d[0]+c+d[1]}function uy(t){return"["+Error.prototype.toString.call(t)+"]"}function dy(t,e,n,r,i,s){var o,a,l;if((l=Object.getOwnPropertyDescriptor(e,i)||{value:e[i]}).get?a=l.set?t.stylize("[Getter/Setter]","special"):t.stylize("[Getter]","special"):l.set&&(a=t.stylize("[Setter]","special")),NR(r,i)||(o="["+i+"]"),a||(t.seen.indexOf(l.value)<0?(a=Hf(n)?N0(t,l.value,null):N0(t,l.value,n-1)).indexOf(`
`)>-1&&(a=s?a.split(`
`).map(function(c){return"  "+c}).join(`
`).substr(2):`
`+a.split(`
`).map(function(c){return"   "+c}).join(`
`)):a=t.stylize("[Circular]","special")),Ri(o)){if(s&&i.match(/^\d+$/))return a;(o=JSON.stringify(""+i)).match(/^"([a-zA-Z_][a-zA-Z_0-9]*)"$/)?(o=o.substr(1,o.length-2),o=t.stylize(o,"name")):(o=o.replace(/'/g,"\\'").replace(/\\"/g,'"').replace(/(^"|"$)/g,"'"),o=t.stylize(o,"string"))}return o+": "+a}function Tb(t){return Array.isArray(t)}function Bg(t){return typeof t=="boolean"}function Hf(t){return t===null}function PR(t){return t==null}function Rb(t){return typeof t=="number"}function lf(t){return typeof t=="string"}function TR(t){return typeof t=="symbol"}function Ri(t){return t===void 0}function bd(t){return fl(t)&&Ib(t)==="[object RegExp]"}function fl(t){return typeof t=="object"&&t!==null}function M0(t){return fl(t)&&Ib(t)==="[object Date]"}function Ed(t){return fl(t)&&(Ib(t)==="[object Error]"||t instanceof Error)}function Ad(t){return typeof t=="function"}function RR(t){return t===null||typeof t=="boolean"||typeof t=="number"||typeof t=="string"||typeof t=="symbol"||t===void 0}function IR(t){return re.isBuffer(t)}function Ib(t){return Object.prototype.toString.call(t)}function fy(t){return t<10?"0"+t.toString(10):t.toString(10)}Li.colors={bold:[1,22],italic:[3,23],underline:[4,24],inverse:[7,27],white:[37,39],grey:[90,39],black:[30,39],blue:[34,39],cyan:[36,39],green:[32,39],magenta:[35,39],red:[31,39],yellow:[33,39]},Li.styles={special:"cyan",number:"yellow",boolean:"yellow",undefined:"grey",null:"bold",string:"green",date:"magenta",regexp:"red"};var C9=["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"];function OR(){var t,e;console.log("%s - %s",(t=new Date,e=[fy(t.getHours()),fy(t.getMinutes()),fy(t.getSeconds())].join(":"),[t.getDate(),C9[t.getMonth()],e].join(" ")),Lg.apply(null,arguments))}function Ob(t,e){if(!e||!fl(e))return t;for(var n=Object.keys(e),r=n.length;r--;)t[n[r]]=e[n[r]];return t}function NR(t,e){return Object.prototype.hasOwnProperty.call(t,e)}var aa=typeof Symbol<"u"?Symbol("util.promisify.custom"):void 0;function Nb(t){if(typeof t!="function")throw new TypeError('The "original" argument must be of type Function');if(aa&&t[aa]){var e;if(typeof(e=t[aa])!="function")throw new TypeError('The "util.promisify.custom" argument must be of type Function');return Object.defineProperty(e,aa,{value:e,enumerable:!1,writable:!1,configurable:!0}),e}function e(){for(var n,r,i=new Promise(function(a,l){n=a,r=l}),s=[],o=0;o<arguments.length;o++)s.push(arguments[o]);s.push(function(a,l){a?r(a):n(l)});try{t.apply(this,s)}catch(a){r(a)}return i}return Object.setPrototypeOf(e,Object.getPrototypeOf(t)),aa&&Object.defineProperty(e,aa,{value:e,enumerable:!1,writable:!1,configurable:!0}),Object.defineProperties(e,kR(t))}function x9(t,e){if(!t){var n=new Error("Promise was rejected with a falsy value");n.reason=t,t=n}return e(t)}function MR(t){if(typeof t!="function")throw new TypeError('The "original" argument must be of type Function');function e(){for(var n=[],r=0;r<arguments.length;r++)n.push(arguments[r]);var i=n.pop();if(typeof i!="function")throw new TypeError("The last argument must be of type Function");var s=this,o=function(){return i.apply(s,arguments)};t.apply(this,n).then(function(a){je.nextTick(o.bind(null,null,a))},function(a){je.nextTick(x9.bind(null,a,o))})}return Object.setPrototypeOf(e,Object.getPrototypeOf(t)),Object.defineProperties(e,kR(t)),e}Nb.custom=aa;var hy,YS,py,JS,k9={inherits:kb,_extend:Ob,log:OR,isBuffer:IR,isPrimitive:RR,isFunction:Ad,isError:Ed,isDate:M0,isObject:fl,isRegExp:bd,isUndefined:Ri,isSymbol:TR,isString:lf,isNumber:Rb,isNullOrUndefined:PR,isNull:Hf,isBoolean:Bg,isArray:Tb,inspect:Li,deprecate:Pb,format:Lg,debuglog:_R,promisify:Nb,callbackify:MR},LR=Uf(Object.freeze({__proto__:null,_extend:Ob,callbackify:MR,debuglog:_R,default:k9,deprecate:Pb,format:Lg,inherits:kb,inspect:Li,isArray:Tb,isBoolean:Bg,isBuffer:IR,isDate:M0,isError:Ed,isFunction:Ad,isNull:Hf,isNullOrUndefined:PR,isNumber:Rb,isObject:fl,isPrimitive:RR,isRegExp:bd,isString:lf,isSymbol:TR,isUndefined:Ri,log:OR,promisify:Nb}));function _9(){if(YS)return hy;function t(l,c){var u=Object.keys(l);if(Object.getOwnPropertySymbols){var d=Object.getOwnPropertySymbols(l);c&&(d=d.filter(function(f){return Object.getOwnPropertyDescriptor(l,f).enumerable})),u.push.apply(u,d)}return u}function e(l){for(var c=1;c<arguments.length;c++){var u=arguments[c]!=null?arguments[c]:{};c%2?t(Object(u),!0).forEach(function(d){n(l,d,u[d])}):Object.getOwnPropertyDescriptors?Object.defineProperties(l,Object.getOwnPropertyDescriptors(u)):t(Object(u)).forEach(function(d){Object.defineProperty(l,d,Object.getOwnPropertyDescriptor(u,d))})}return l}function n(l,c,u){return(c=i(c))in l?Object.defineProperty(l,c,{value:u,enumerable:!0,configurable:!0,writable:!0}):l[c]=u,l}function r(l,c,u){return c&&function(d,f){for(var h=0;h<f.length;h++){var m=f[h];m.enumerable=m.enumerable||!1,m.configurable=!0,"value"in m&&(m.writable=!0),Object.defineProperty(d,i(m.key),m)}}(l.prototype,c),Object.defineProperty(l,"prototype",{writable:!1}),l}function i(l){var c=function(u,d){if(typeof u!="object"||u===null)return u;var f=u[Symbol.toPrimitive];if(f!==void 0){var h=f.call(u,d);if(typeof h!="object")return h;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(u)}(l,"string");return typeof c=="symbol"?c:String(c)}YS=1;var s=_b.Buffer,o=LR.inspect,a=o&&o.custom||"inspect";return hy=function(){function l(){(function(c,u){if(!(c instanceof u))throw new TypeError("Cannot call a class as a function")})(this,l),this.head=null,this.tail=null,this.length=0}return r(l,[{key:"push",value:function(c){var u={data:c,next:null};this.length>0?this.tail.next=u:this.head=u,this.tail=u,++this.length}},{key:"unshift",value:function(c){var u={data:c,next:this.head};this.length===0&&(this.tail=u),this.head=u,++this.length}},{key:"shift",value:function(){if(this.length!==0){var c=this.head.data;return this.length===1?this.head=this.tail=null:this.head=this.head.next,--this.length,c}}},{key:"clear",value:function(){this.head=this.tail=null,this.length=0}},{key:"join",value:function(c){if(this.length===0)return"";for(var u=this.head,d=""+u.data;u=u.next;)d+=c+u.data;return d}},{key:"concat",value:function(c){if(this.length===0)return s.alloc(0);for(var u,d,f,h=s.allocUnsafe(c>>>0),m=this.head,g=0;m;)u=m.data,d=h,f=g,s.prototype.copy.call(u,d,f),g+=m.data.length,m=m.next;return h}},{key:"consume",value:function(c,u){var d;return c<this.head.data.length?(d=this.head.data.slice(0,c),this.head.data=this.head.data.slice(c)):d=c===this.head.data.length?this.shift():u?this._getString(c):this._getBuffer(c),d}},{key:"first",value:function(){return this.head.data}},{key:"_getString",value:function(c){var u=this.head,d=1,f=u.data;for(c-=f.length;u=u.next;){var h=u.data,m=c>h.length?h.length:c;if(m===h.length?f+=h:f+=h.slice(0,c),(c-=m)===0){m===h.length?(++d,u.next?this.head=u.next:this.head=this.tail=null):(this.head=u,u.data=h.slice(m));break}++d}return this.length-=d,f}},{key:"_getBuffer",value:function(c){var u=s.allocUnsafe(c),d=this.head,f=1;for(d.data.copy(u),c-=d.data.length;d=d.next;){var h=d.data,m=c>h.length?h.length:c;if(h.copy(u,u.length-c,0,m),(c-=m)===0){m===h.length?(++f,d.next?this.head=d.next:this.head=this.tail=null):(this.head=d,d.data=h.slice(m));break}++f}return this.length-=f,u}},{key:a,value:function(c,u){return o(this,e(e({},u),{},{depth:0,customInspect:!1}))}}]),l}(),hy}function BR(){if(JS)return py;function t(r,i){n(r,i),e(r)}function e(r){r._writableState&&!r._writableState.emitClose||r._readableState&&!r._readableState.emitClose||r.emit("close")}function n(r,i){r.emit("error",i)}return JS=1,py={destroy:function(r,i){var s=this,o=this._readableState&&this._readableState.destroyed,a=this._writableState&&this._writableState.destroyed;return o||a?(i?i(r):r&&(this._writableState?this._writableState.errorEmitted||(this._writableState.errorEmitted=!0,je.nextTick(n,this,r)):je.nextTick(n,this,r)),this):(this._readableState&&(this._readableState.destroyed=!0),this._writableState&&(this._writableState.destroyed=!0),this._destroy(r||null,function(l){!i&&l?s._writableState?s._writableState.errorEmitted?je.nextTick(e,s):(s._writableState.errorEmitted=!0,je.nextTick(t,s,l)):je.nextTick(t,s,l):i?(je.nextTick(e,s),i(l)):je.nextTick(e,s)}),this)},undestroy:function(){this._readableState&&(this._readableState.destroyed=!1,this._readableState.reading=!1,this._readableState.ended=!1,this._readableState.endEmitted=!1),this._writableState&&(this._writableState.destroyed=!1,this._writableState.ended=!1,this._writableState.ending=!1,this._writableState.finalCalled=!1,this._writableState.prefinished=!1,this._writableState.finished=!1,this._writableState.errorEmitted=!1)},errorOrDestroy:function(r,i){var s=r._readableState,o=r._writableState;s&&s.autoDestroy||o&&o.autoDestroy?r.destroy(i):r.emit("error",i)}},py}var hl={},ZS,XS,DR={};function ur(t,e,n){n||(n=Error);var r=function(i){var s,o;function a(l,c,u){return i.call(this,function(d,f,h){return typeof e=="string"?e:e(d,f,h)}(l,c,u))||this}return o=i,(s=a).prototype=Object.create(o.prototype),s.prototype.constructor=s,s.__proto__=o,a}(n);r.prototype.name=n.name,r.prototype.code=t,DR[t]=r}function eC(t,e){if(Array.isArray(t)){var n=t.length;return t=t.map(function(r){return String(r)}),n>2?"one of ".concat(e," ").concat(t.slice(0,n-1).join(", "),", or ")+t[n-1]:n===2?"one of ".concat(e," ").concat(t[0]," or ").concat(t[1]):"of ".concat(e," ").concat(t[0])}return"of ".concat(e," ").concat(String(t))}function $R(){if(XS)return ZS;XS=1;var t=hl.codes.ERR_INVALID_OPT_VALUE;return ZS={getHighWaterMark:function(e,n,r,i){var s=function(o,a,l){return o.highWaterMark!=null?o.highWaterMark:a?o[l]:null}(n,i,r);if(s!=null){if(!isFinite(s)||Math.floor(s)!==s||s<0)throw new t(i?r:"highWaterMark",s);return Math.floor(s)}return e.objectMode?16:16384}}}ur("ERR_INVALID_OPT_VALUE",function(t,e){return'The value "'+e+'" is invalid for option "'+t+'"'},TypeError),ur("ERR_INVALID_ARG_TYPE",function(t,e,n){var r,i,s;if(typeof e=="string"&&(i="not ",e.substr(0,i.length)===i)?(r="must not be",e=e.replace(/^not /,"")):r="must be",function(a,l,c){return(c===void 0||c>a.length)&&(c=a.length),a.substring(c-l.length,c)===l}(t," argument"))s="The ".concat(t," ").concat(r," ").concat(eC(e,"type"));else{var o=function(a,l,c){return typeof c!="number"&&(c=0),!(c+l.length>a.length)&&a.indexOf(l,c)!==-1}(t,".")?"property":"argument";s='The "'.concat(t,'" ').concat(o," ").concat(r," ").concat(eC(e,"type"))}return s+=". Received type ".concat(typeof n)},TypeError),ur("ERR_STREAM_PUSH_AFTER_EOF","stream.push() after EOF"),ur("ERR_METHOD_NOT_IMPLEMENTED",function(t){return"The "+t+" method is not implemented"}),ur("ERR_STREAM_PREMATURE_CLOSE","Premature close"),ur("ERR_STREAM_DESTROYED",function(t){return"Cannot call "+t+" after a stream was destroyed"}),ur("ERR_MULTIPLE_CALLBACK","Callback called multiple times"),ur("ERR_STREAM_CANNOT_PIPE","Cannot pipe, not readable"),ur("ERR_STREAM_WRITE_AFTER_END","write after end"),ur("ERR_STREAM_NULL_VALUES","May not write null values to stream",TypeError),ur("ERR_UNKNOWN_ENCODING",function(t){return"Unknown encoding: "+t},TypeError),ur("ERR_STREAM_UNSHIFT_AFTER_END_EVENT","stream.unshift() after end event"),hl.codes=DR;var gy,tC,my,nC,yy,rC,P9=typeof Object.create=="function"?function(t,e){t.super_=e,t.prototype=Object.create(e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}})}:function(t,e){t.super_=e;var n=function(){};n.prototype=e.prototype,t.prototype=new n,t.prototype.constructor=t},Kf=Uf(Object.freeze({__proto__:null,default:P9}));function T9(){if(tC)return gy;function t(e){try{if(!Pr.localStorage)return!1}catch{return!1}var n=Pr.localStorage[e];return n!=null&&String(n).toLowerCase()==="true"}return tC=1,gy=function(e,n){if(t("noDeprecation"))return e;var r=!1;return function(){if(!r){if(t("throwDeprecation"))throw new Error(n);t("traceDeprecation")?console.trace(n):console.warn(n),r=!0}return e.apply(this,arguments)}},gy}function UR(){if(nC)return my;function t(z){var $=this;this.next=null,this.entry=null,this.finish=function(){(function(N,C,O){var D=N.entry;for(N.entry=null;D;){var b=D.callback;C.pendingcb--,b(O),D=D.next}C.corkedRequestsFree.next=N})($,z)}}var e;nC=1,my=T,T.WritableState=x;var n={deprecate:T9()},r=xR(),i=_b.Buffer,s=(Pr!==void 0?Pr:typeof window<"u"?window:typeof self<"u"?self:{}).Uint8Array||function(){},o,a=BR(),l=$R().getHighWaterMark,c=hl.codes,u=c.ERR_INVALID_ARG_TYPE,d=c.ERR_METHOD_NOT_IMPLEMENTED,f=c.ERR_MULTIPLE_CALLBACK,h=c.ERR_STREAM_CANNOT_PIPE,m=c.ERR_STREAM_DESTROYED,g=c.ERR_STREAM_NULL_VALUES,w=c.ERR_STREAM_WRITE_AFTER_END,p=c.ERR_UNKNOWN_ENCODING,v=a.errorOrDestroy;function y(){}function x(z,$,N){e=e||yu(),z=z||{},typeof N!="boolean"&&(N=$ instanceof e),this.objectMode=!!z.objectMode,N&&(this.objectMode=this.objectMode||!!z.writableObjectMode),this.highWaterMark=l(this,z,"writableHighWaterMark",N),this.finalCalled=!1,this.needDrain=!1,this.ending=!1,this.ended=!1,this.finished=!1,this.destroyed=!1;var C=z.decodeStrings===!1;this.decodeStrings=!C,this.defaultEncoding=z.defaultEncoding||"utf8",this.length=0,this.writing=!1,this.corked=0,this.sync=!0,this.bufferProcessing=!1,this.onwrite=function(O){(function(D,b){var E=D._writableState,_=E.sync,I=E.writecb;if(typeof I!="function")throw new f;if(function(S){S.writing=!1,S.writecb=null,S.length-=S.writelen,S.writelen=0}(E),b)(function(S,P,R,L,F){--P.pendingcb,R?(je.nextTick(F,L),je.nextTick(W,S,P),S._writableState.errorEmitted=!0,v(S,L)):(F(L),S._writableState.errorEmitted=!0,v(S,L),W(S,P))})(D,E,_,b,I);else{var A=K(E)||D.destroyed;A||E.corked||E.bufferProcessing||!E.bufferedRequest||M(D,E),_?je.nextTick(j,D,E,A,I):j(D,E,A,I)}})($,O)},this.writecb=null,this.writelen=0,this.bufferedRequest=null,this.lastBufferedRequest=null,this.pendingcb=0,this.prefinished=!1,this.errorEmitted=!1,this.emitClose=z.emitClose!==!1,this.autoDestroy=!!z.autoDestroy,this.bufferedRequestCount=0,this.corkedRequestsFree=new t(this)}function T(z){var $=this instanceof(e=e||yu());if(!$&&!o.call(T,this))return new T(z);this._writableState=new x(z,this,$),this.writable=!0,z&&(typeof z.write=="function"&&(this._write=z.write),typeof z.writev=="function"&&(this._writev=z.writev),typeof z.destroy=="function"&&(this._destroy=z.destroy),typeof z.final=="function"&&(this._final=z.final)),r.call(this)}function B(z,$,N,C,O,D,b){$.writelen=C,$.writecb=b,$.writing=!0,$.sync=!0,$.destroyed?$.onwrite(new m("write")):N?z._writev(O,$.onwrite):z._write(O,D,$.onwrite),$.sync=!1}function j(z,$,N,C){N||function(O,D){D.length===0&&D.needDrain&&(D.needDrain=!1,O.emit("drain"))}(z,$),$.pendingcb--,C(),W(z,$)}function M(z,$){$.bufferProcessing=!0;var N=$.bufferedRequest;if(z._writev&&N&&N.next){var C=$.bufferedRequestCount,O=new Array(C),D=$.corkedRequestsFree;D.entry=N;for(var b=0,E=!0;N;)O[b]=N,N.isBuf||(E=!1),N=N.next,b+=1;O.allBuffers=E,B(z,$,!0,$.length,O,"",D.finish),$.pendingcb++,$.lastBufferedRequest=null,D.next?($.corkedRequestsFree=D.next,D.next=null):$.corkedRequestsFree=new t($),$.bufferedRequestCount=0}else{for(;N;){var _=N.chunk,I=N.encoding,A=N.callback;if(B(z,$,!1,$.objectMode?1:_.length,_,I,A),N=N.next,$.bufferedRequestCount--,$.writing)break}N===null&&($.lastBufferedRequest=null)}$.bufferedRequest=N,$.bufferProcessing=!1}function K(z){return z.ending&&z.length===0&&z.bufferedRequest===null&&!z.finished&&!z.writing}function U(z,$){z._final(function(N){$.pendingcb--,N&&v(z,N),$.prefinished=!0,z.emit("prefinish"),W(z,$)})}function W(z,$){var N=K($);if(N&&(function(O,D){D.prefinished||D.finalCalled||(typeof O._final!="function"||D.destroyed?(D.prefinished=!0,O.emit("prefinish")):(D.pendingcb++,D.finalCalled=!0,je.nextTick(U,O,D)))}(z,$),$.pendingcb===0&&($.finished=!0,z.emit("finish"),$.autoDestroy))){var C=z._readableState;(!C||C.autoDestroy&&C.endEmitted)&&z.destroy()}return N}return Kf(T,r),x.prototype.getBuffer=function(){for(var z=this.bufferedRequest,$=[];z;)$.push(z),z=z.next;return $},function(){try{Object.defineProperty(x.prototype,"buffer",{get:n.deprecate(function(){return this.getBuffer()},"_writableState.buffer is deprecated. Use _writableState.getBuffer instead.","DEP0003")})}catch{}}(),typeof Symbol=="function"&&Symbol.hasInstance&&typeof Function.prototype[Symbol.hasInstance]=="function"?(o=Function.prototype[Symbol.hasInstance],Object.defineProperty(T,Symbol.hasInstance,{value:function(z){return!!o.call(this,z)||this===T&&z&&z._writableState instanceof x}})):o=function(z){return z instanceof this},T.prototype.pipe=function(){v(this,new h)},T.prototype.write=function(z,$,N){var C,O=this._writableState,D=!1,b=!O.objectMode&&(C=z,i.isBuffer(C)||C instanceof s);return b&&!i.isBuffer(z)&&(z=function(E){return i.from(E)}(z)),typeof $=="function"&&(N=$,$=null),b?$="buffer":$||($=O.defaultEncoding),typeof N!="function"&&(N=y),O.ending?function(E,_){var I=new w;v(E,I),je.nextTick(_,I)}(this,N):(b||function(E,_,I,A){var S;return I===null?S=new g:typeof I=="string"||_.objectMode||(S=new u("chunk",["string","Buffer"],I)),!S||(v(E,S),je.nextTick(A,S),!1)}(this,O,z,N))&&(O.pendingcb++,D=function(E,_,I,A,S,P){if(!I){var R=function(q,Y,te){return q.objectMode||q.decodeStrings===!1||typeof Y!="string"||(Y=i.from(Y,te)),Y}(_,A,S);A!==R&&(I=!0,S="buffer",A=R)}var L=_.objectMode?1:A.length;_.length+=L;var F=_.length<_.highWaterMark;if(F||(_.needDrain=!0),_.writing||_.corked){var V=_.lastBufferedRequest;_.lastBufferedRequest={chunk:A,encoding:S,isBuf:I,callback:P,next:null},V?V.next=_.lastBufferedRequest:_.bufferedRequest=_.lastBufferedRequest,_.bufferedRequestCount+=1}else B(E,_,!1,L,A,S,P);return F}(this,O,b,z,$,N)),D},T.prototype.cork=function(){this._writableState.corked++},T.prototype.uncork=function(){var z=this._writableState;z.corked&&(z.corked--,z.writing||z.corked||z.bufferProcessing||!z.bufferedRequest||M(this,z))},T.prototype.setDefaultEncoding=function(z){if(typeof z=="string"&&(z=z.toLowerCase()),!(["hex","utf8","utf-8","ascii","binary","base64","ucs2","ucs-2","utf16le","utf-16le","raw"].indexOf((z+"").toLowerCase())>-1))throw new p(z);return this._writableState.defaultEncoding=z,this},Object.defineProperty(T.prototype,"writableBuffer",{enumerable:!1,get:function(){return this._writableState&&this._writableState.getBuffer()}}),Object.defineProperty(T.prototype,"writableHighWaterMark",{enumerable:!1,get:function(){return this._writableState.highWaterMark}}),T.prototype._write=function(z,$,N){N(new d("_write()"))},T.prototype._writev=null,T.prototype.end=function(z,$,N){var C=this._writableState;return typeof z=="function"?(N=z,z=null,$=null):typeof $=="function"&&(N=$,$=null),z!=null&&this.write(z,$),C.corked&&(C.corked=1,this.uncork()),C.ending||function(O,D,b){D.ending=!0,W(O,D),b&&(D.finished?je.nextTick(b):O.once("finish",b)),D.ended=!0,O.writable=!1}(this,C,N),this},Object.defineProperty(T.prototype,"writableLength",{enumerable:!1,get:function(){return this._writableState.length}}),Object.defineProperty(T.prototype,"destroyed",{enumerable:!1,get:function(){return this._writableState!==void 0&&this._writableState.destroyed},set:function(z){this._writableState&&(this._writableState.destroyed=z)}}),T.prototype.destroy=a.destroy,T.prototype._undestroy=a.undestroy,T.prototype._destroy=function(z,$){$(z)},my}function yu(){if(rC)return yy;rC=1;var t=Object.keys||function(c){var u=[];for(var d in c)u.push(d);return u};yy=o;var e=FR(),n=UR();Kf(o,e);for(var r=t(n.prototype),i=0;i<r.length;i++){var s=r[i];o.prototype[s]||(o.prototype[s]=n.prototype[s])}function o(c){if(!(this instanceof o))return new o(c);e.call(this,c),n.call(this,c),this.allowHalfOpen=!0,c&&(c.readable===!1&&(this.readable=!1),c.writable===!1&&(this.writable=!1),c.allowHalfOpen===!1&&(this.allowHalfOpen=!1,this.once("end",a)))}function a(){this._writableState.ended||je.nextTick(l,this)}function l(c){c.end()}return Object.defineProperty(o.prototype,"writableHighWaterMark",{enumerable:!1,get:function(){return this._writableState.highWaterMark}}),Object.defineProperty(o.prototype,"writableBuffer",{enumerable:!1,get:function(){return this._writableState&&this._writableState.getBuffer()}}),Object.defineProperty(o.prototype,"writableLength",{enumerable:!1,get:function(){return this._writableState.length}}),Object.defineProperty(o.prototype,"destroyed",{enumerable:!1,get:function(){return this._readableState!==void 0&&this._writableState!==void 0&&this._readableState.destroyed&&this._writableState.destroyed},set:function(c){this._readableState!==void 0&&this._writableState!==void 0&&(this._readableState.destroyed=c,this._writableState.destroyed=c)}}),yy}var R9=re.isEncoding||function(t){switch(t&&t.toLowerCase()){case"hex":case"utf8":case"utf-8":case"ascii":case"binary":case"base64":case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":case"raw":return!0;default:return!1}};function _p(t){switch(this.encoding=(t||"utf8").toLowerCase().replace(/[-_]/,""),function(e){if(e&&!R9(e))throw new Error("Unknown encoding: "+e)}(t),this.encoding){case"utf8":this.surrogateSize=3;break;case"ucs2":case"utf16le":this.surrogateSize=2,this.detectIncompleteChar=O9;break;case"base64":this.surrogateSize=3,this.detectIncompleteChar=N9;break;default:return void(this.write=I9)}this.charBuffer=new re(6),this.charReceived=0,this.charLength=0}function I9(t){return t.toString(this.encoding)}function O9(t){this.charReceived=t.length%2,this.charLength=this.charReceived?2:0}function N9(t){this.charReceived=t.length%3,this.charLength=this.charReceived?3:0}_p.prototype.write=function(t){for(var e="";this.charLength;){var n=t.length>=this.charLength-this.charReceived?this.charLength-this.charReceived:t.length;if(t.copy(this.charBuffer,this.charReceived,0,n),this.charReceived+=n,this.charReceived<this.charLength)return"";if(t=t.slice(n,t.length),!((i=(e=this.charBuffer.slice(0,this.charLength).toString(this.encoding)).charCodeAt(e.length-1))>=55296&&i<=56319)){if(this.charReceived=this.charLength=0,t.length===0)return e;break}this.charLength+=this.surrogateSize,e=""}this.detectIncompleteChar(t);var r=t.length;this.charLength&&(t.copy(this.charBuffer,0,t.length-this.charReceived,r),r-=this.charReceived);var i;if(r=(e+=t.toString(this.encoding,0,r)).length-1,(i=e.charCodeAt(r))>=55296&&i<=56319){var s=this.surrogateSize;return this.charLength+=s,this.charReceived+=s,this.charBuffer.copy(this.charBuffer,s,0,s),t.copy(this.charBuffer,0,0,s),e.substring(0,r)}return e},_p.prototype.detectIncompleteChar=function(t){for(var e=t.length>=3?3:t.length;e>0;e--){var n=t[t.length-e];if(e==1&&n>>5==6){this.charLength=2;break}if(e<=2&&n>>4==14){this.charLength=3;break}if(e<=3&&n>>3==30){this.charLength=4;break}}this.charReceived=e},_p.prototype.end=function(t){var e="";if(t&&t.length&&(e=this.write(t)),this.charReceived){var n=this.charReceived,r=this.charBuffer,i=this.encoding;e+=r.slice(0,n).toString(i)}return e};var iC=Uf(Object.freeze({__proto__:null,StringDecoder:_p})),sC=hl.codes.ERR_STREAM_PREMATURE_CLOSE;function M9(){}var vy,oC,aC,lC,wy,cC,Mb=function t(e,n,r){if(typeof n=="function")return t(e,null,n);n||(n={}),r=function(m){var g=!1;return function(){if(!g){g=!0;for(var w=arguments.length,p=new Array(w),v=0;v<w;v++)p[v]=arguments[v];m.apply(this,p)}}}(r||M9);var i=n.readable||n.readable!==!1&&e.readable,s=n.writable||n.writable!==!1&&e.writable,o=function(){e.writable||l()},a=e._writableState&&e._writableState.finished,l=function(){s=!1,a=!0,i||r.call(e)},c=e._readableState&&e._readableState.endEmitted,u=function(){i=!1,c=!0,s||r.call(e)},d=function(m){r.call(e,m)},f=function(){var m;return i&&!c?(e._readableState&&e._readableState.ended||(m=new sC),r.call(e,m)):s&&!a?(e._writableState&&e._writableState.ended||(m=new sC),r.call(e,m)):void 0},h=function(){e.req.on("finish",l)};return function(m){return m.setHeader&&typeof m.abort=="function"}(e)?(e.on("complete",l),e.on("abort",f),e.req?h():e.on("request",h)):s&&!e._writableState&&(e.on("end",o),e.on("close",o)),e.on("end",u),e.on("finish",l),n.error!==!1&&e.on("error",d),e.on("close",f),function(){e.removeListener("complete",l),e.removeListener("abort",f),e.removeListener("request",h),e.req&&e.req.removeListener("finish",l),e.removeListener("end",o),e.removeListener("close",o),e.removeListener("finish",l),e.removeListener("end",u),e.removeListener("error",d),e.removeListener("close",f)}};function L9(){if(oC)return vy;var t;function e(g,w,p){return(w=function(v){var y=function(x,T){if(typeof x!="object"||x===null)return x;var B=x[Symbol.toPrimitive];if(B!==void 0){var j=B.call(x,T);if(typeof j!="object")return j;throw new TypeError("@@toPrimitive must return a primitive value.")}return(T==="string"?String:Number)(x)}(v,"string");return typeof y=="symbol"?y:String(y)}(w))in g?Object.defineProperty(g,w,{value:p,enumerable:!0,configurable:!0,writable:!0}):g[w]=p,g}oC=1;var n=Mb,r=Symbol("lastResolve"),i=Symbol("lastReject"),s=Symbol("error"),o=Symbol("ended"),a=Symbol("lastPromise"),l=Symbol("handlePromise"),c=Symbol("stream");function u(g,w){return{value:g,done:w}}function d(g){var w=g[r];if(w!==null){var p=g[c].read();p!==null&&(g[a]=null,g[r]=null,g[i]=null,w(u(p,!1)))}}function f(g){je.nextTick(d,g)}var h=Object.getPrototypeOf(function(){}),m=Object.setPrototypeOf((e(t={get stream(){return this[c]},next:function(){var g=this,w=this[s];if(w!==null)return Promise.reject(w);if(this[o])return Promise.resolve(u(void 0,!0));if(this[c].destroyed)return new Promise(function(x,T){je.nextTick(function(){g[s]?T(g[s]):x(u(void 0,!0))})});var p,v=this[a];if(v)p=new Promise(function(x,T){return function(B,j){x.then(function(){T[o]?B(u(void 0,!0)):T[l](B,j)},j)}}(v,this));else{var y=this[c].read();if(y!==null)return Promise.resolve(u(y,!1));p=new Promise(this[l])}return this[a]=p,p}},Symbol.asyncIterator,function(){return this}),e(t,"return",function(){var g=this;return new Promise(function(w,p){g[c].destroy(null,function(v){v?p(v):w(u(void 0,!0))})})}),t),h);return vy=function(g){var w,p=Object.create(m,(e(w={},c,{value:g,writable:!0}),e(w,r,{value:null,writable:!0}),e(w,i,{value:null,writable:!0}),e(w,s,{value:null,writable:!0}),e(w,o,{value:g._readableState.endEmitted,writable:!0}),e(w,l,{value:function(v,y){var x=p[c].read();x?(p[a]=null,p[r]=null,p[i]=null,v(u(x,!1))):(p[r]=v,p[i]=y)},writable:!0}),w));return p[a]=null,n(g,function(v){if(v&&v.code!=="ERR_STREAM_PREMATURE_CLOSE"){var y=p[i];return y!==null&&(p[a]=null,p[r]=null,p[i]=null,y(v)),void(p[s]=v)}var x=p[r];x!==null&&(p[a]=null,p[r]=null,p[i]=null,x(u(void 0,!0))),p[o]=!0}),g.on("readable",f.bind(null,p)),p},vy}function FR(){if(cC)return wy;var t;cC=1,wy=T,T.ReadableState=x,xb.EventEmitter;var e=function(A,S){return A.listeners(S).length},n=xR(),r=_b.Buffer,i=(Pr!==void 0?Pr:typeof window<"u"?window:typeof self<"u"?self:{}).Uint8Array||function(){},s,o=LR;s=o&&o.debuglog?o.debuglog("stream"):function(){};var a,l,c,u=_9(),d=BR(),f=$R().getHighWaterMark,h=hl.codes,m=h.ERR_INVALID_ARG_TYPE,g=h.ERR_STREAM_PUSH_AFTER_EOF,w=h.ERR_METHOD_NOT_IMPLEMENTED,p=h.ERR_STREAM_UNSHIFT_AFTER_END_EVENT;Kf(T,n);var v=d.errorOrDestroy,y=["error","close","destroy","pause","resume"];function x(A,S,P){t=t||yu(),A=A||{},typeof P!="boolean"&&(P=S instanceof t),this.objectMode=!!A.objectMode,P&&(this.objectMode=this.objectMode||!!A.readableObjectMode),this.highWaterMark=f(this,A,"readableHighWaterMark",P),this.buffer=new u,this.length=0,this.pipes=null,this.pipesCount=0,this.flowing=null,this.ended=!1,this.endEmitted=!1,this.reading=!1,this.sync=!0,this.needReadable=!1,this.emittedReadable=!1,this.readableListening=!1,this.resumeScheduled=!1,this.paused=!0,this.emitClose=A.emitClose!==!1,this.autoDestroy=!!A.autoDestroy,this.destroyed=!1,this.defaultEncoding=A.defaultEncoding||"utf8",this.awaitDrain=0,this.readingMore=!1,this.decoder=null,this.encoding=null,A.encoding&&(a||(a=iC.StringDecoder),this.decoder=new a(A.encoding),this.encoding=A.encoding)}function T(A){if(t=t||yu(),!(this instanceof T))return new T(A);var S=this instanceof t;this._readableState=new x(A,this,S),this.readable=!0,A&&(typeof A.read=="function"&&(this._read=A.read),typeof A.destroy=="function"&&(this._destroy=A.destroy)),n.call(this)}function B(A,S,P,R,L){s("readableAddChunk",S);var F,V=A._readableState;if(S===null)V.reading=!1,function(q,Y){if(s("onEofChunk"),!Y.ended){if(Y.decoder){var te=Y.decoder.end();te&&te.length&&(Y.buffer.push(te),Y.length+=Y.objectMode?1:te.length)}Y.ended=!0,Y.sync?U(q):(Y.needReadable=!1,Y.emittedReadable||(Y.emittedReadable=!0,W(q)))}}(A,V);else if(L||(F=function(q,Y){var te;ie=Y,r.isBuffer(ie)||ie instanceof i||typeof Y=="string"||Y===void 0||q.objectMode||(te=new m("chunk",["string","Buffer","Uint8Array"],Y));var ie;return te}(V,S)),F)v(A,F);else if(V.objectMode||S&&S.length>0)if(typeof S=="string"||V.objectMode||Object.getPrototypeOf(S)===r.prototype||(S=function(q){return r.from(q)}(S)),R)V.endEmitted?v(A,new p):j(A,V,S,!0);else if(V.ended)v(A,new g);else{if(V.destroyed)return!1;V.reading=!1,V.decoder&&!P?(S=V.decoder.write(S),V.objectMode||S.length!==0?j(A,V,S,!1):z(A,V)):j(A,V,S,!1)}else R||(V.reading=!1,z(A,V));return!V.ended&&(V.length<V.highWaterMark||V.length===0)}function j(A,S,P,R){S.flowing&&S.length===0&&!S.sync?(S.awaitDrain=0,A.emit("data",P)):(S.length+=S.objectMode?1:P.length,R?S.buffer.unshift(P):S.buffer.push(P),S.needReadable&&U(A)),z(A,S)}Object.defineProperty(T.prototype,"destroyed",{enumerable:!1,get:function(){return this._readableState!==void 0&&this._readableState.destroyed},set:function(A){this._readableState&&(this._readableState.destroyed=A)}}),T.prototype.destroy=d.destroy,T.prototype._undestroy=d.undestroy,T.prototype._destroy=function(A,S){S(A)},T.prototype.push=function(A,S){var P,R=this._readableState;return R.objectMode?P=!0:typeof A=="string"&&((S=S||R.defaultEncoding)!==R.encoding&&(A=r.from(A,S),S=""),P=!0),B(this,A,S,!1,P)},T.prototype.unshift=function(A){return B(this,A,null,!0,!1)},T.prototype.isPaused=function(){return this._readableState.flowing===!1},T.prototype.setEncoding=function(A){a||(a=iC.StringDecoder);var S=new a(A);this._readableState.decoder=S,this._readableState.encoding=this._readableState.decoder.encoding;for(var P=this._readableState.buffer.head,R="";P!==null;)R+=S.write(P.data),P=P.next;return this._readableState.buffer.clear(),R!==""&&this._readableState.buffer.push(R),this._readableState.length=R.length,this};var M=1073741824;function K(A,S){return A<=0||S.length===0&&S.ended?0:S.objectMode?1:A!=A?S.flowing&&S.length?S.buffer.head.data.length:S.length:(A>S.highWaterMark&&(S.highWaterMark=function(P){return P>=M?P=M:(P--,P|=P>>>1,P|=P>>>2,P|=P>>>4,P|=P>>>8,P|=P>>>16,P++),P}(A)),A<=S.length?A:S.ended?S.length:(S.needReadable=!0,0))}function U(A){var S=A._readableState;s("emitReadable",S.needReadable,S.emittedReadable),S.needReadable=!1,S.emittedReadable||(s("emitReadable",S.flowing),S.emittedReadable=!0,je.nextTick(W,A))}function W(A){var S=A._readableState;s("emitReadable_",S.destroyed,S.length,S.ended),S.destroyed||!S.length&&!S.ended||(A.emit("readable"),S.emittedReadable=!1),S.needReadable=!S.flowing&&!S.ended&&S.length<=S.highWaterMark,D(A)}function z(A,S){S.readingMore||(S.readingMore=!0,je.nextTick($,A,S))}function $(A,S){for(;!S.reading&&!S.ended&&(S.length<S.highWaterMark||S.flowing&&S.length===0);){var P=S.length;if(s("maybeReadMore read 0"),A.read(0),P===S.length)break}S.readingMore=!1}function N(A){var S=A._readableState;S.readableListening=A.listenerCount("readable")>0,S.resumeScheduled&&!S.paused?S.flowing=!0:A.listenerCount("data")>0&&A.resume()}function C(A){s("readable nexttick read 0"),A.read(0)}function O(A,S){s("resume",S.reading),S.reading||A.read(0),S.resumeScheduled=!1,A.emit("resume"),D(A),S.flowing&&!S.reading&&A.read(0)}function D(A){var S=A._readableState;for(s("flow",S.flowing);S.flowing&&A.read()!==null;);}function b(A,S){return S.length===0?null:(S.objectMode?P=S.buffer.shift():!A||A>=S.length?(P=S.decoder?S.buffer.join(""):S.buffer.length===1?S.buffer.first():S.buffer.concat(S.length),S.buffer.clear()):P=S.buffer.consume(A,S.decoder),P);var P}function E(A){var S=A._readableState;s("endReadable",S.endEmitted),S.endEmitted||(S.ended=!0,je.nextTick(_,S,A))}function _(A,S){if(s("endReadableNT",A.endEmitted,A.length),!A.endEmitted&&A.length===0&&(A.endEmitted=!0,S.readable=!1,S.emit("end"),A.autoDestroy)){var P=S._writableState;(!P||P.autoDestroy&&P.finished)&&S.destroy()}}function I(A,S){for(var P=0,R=A.length;P<R;P++)if(A[P]===S)return P;return-1}return T.prototype.read=function(A){s("read",A),A=parseInt(A,10);var S=this._readableState,P=A;if(A!==0&&(S.emittedReadable=!1),A===0&&S.needReadable&&((S.highWaterMark!==0?S.length>=S.highWaterMark:S.length>0)||S.ended))return s("read: emitReadable",S.length,S.ended),S.length===0&&S.ended?E(this):U(this),null;if((A=K(A,S))===0&&S.ended)return S.length===0&&E(this),null;var R,L=S.needReadable;return s("need readable",L),(S.length===0||S.length-A<S.highWaterMark)&&s("length less than watermark",L=!0),S.ended||S.reading?s("reading or ended",L=!1):L&&(s("do read"),S.reading=!0,S.sync=!0,S.length===0&&(S.needReadable=!0),this._read(S.highWaterMark),S.sync=!1,S.reading||(A=K(P,S))),(R=A>0?b(A,S):null)===null?(S.needReadable=S.length<=S.highWaterMark,A=0):(S.length-=A,S.awaitDrain=0),S.length===0&&(S.ended||(S.needReadable=!0),P!==A&&S.ended&&E(this)),R!==null&&this.emit("data",R),R},T.prototype._read=function(A){v(this,new w("_read()"))},T.prototype.pipe=function(A,S){var P=this,R=this._readableState;switch(R.pipesCount){case 0:R.pipes=A;break;case 1:R.pipes=[R.pipes,A];break;default:R.pipes.push(A)}R.pipesCount+=1,s("pipe count=%d opts=%j",R.pipesCount,S);var L=(!S||S.end!==!1)&&A!==je.stdout&&A!==je.stderr?V:Ee;function F(de,pe){s("onunpipe"),de===P&&pe&&pe.hasUnpiped===!1&&(pe.hasUnpiped=!0,s("cleanup"),A.removeListener("close",le),A.removeListener("finish",he),A.removeListener("drain",q),A.removeListener("error",ie),A.removeListener("unpipe",F),P.removeListener("end",V),P.removeListener("end",Ee),P.removeListener("data",te),Y=!0,!R.awaitDrain||A._writableState&&!A._writableState.needDrain||q())}function V(){s("onend"),A.end()}R.endEmitted?je.nextTick(L):P.once("end",L),A.on("unpipe",F);var q=function(de){return function(){var pe=de._readableState;s("pipeOnDrain",pe.awaitDrain),pe.awaitDrain&&pe.awaitDrain--,pe.awaitDrain===0&&e(de,"data")&&(pe.flowing=!0,D(de))}}(P);A.on("drain",q);var Y=!1;function te(de){s("ondata");var pe=A.write(de);s("dest.write",pe),pe===!1&&((R.pipesCount===1&&R.pipes===A||R.pipesCount>1&&I(R.pipes,A)!==-1)&&!Y&&(s("false write response, pause",R.awaitDrain),R.awaitDrain++),P.pause())}function ie(de){s("onerror",de),Ee(),A.removeListener("error",ie),e(A,"error")===0&&v(A,de)}function le(){A.removeListener("finish",he),Ee()}function he(){s("onfinish"),A.removeListener("close",le),Ee()}function Ee(){s("unpipe"),P.unpipe(A)}return P.on("data",te),function(de,pe,Ae){if(typeof de.prependListener=="function")return de.prependListener(pe,Ae);de._events&&de._events[pe]?Array.isArray(de._events[pe])?de._events[pe].unshift(Ae):de._events[pe]=[Ae,de._events[pe]]:de.on(pe,Ae)}(A,"error",ie),A.once("close",le),A.once("finish",he),A.emit("pipe",P),R.flowing||(s("pipe resume"),P.resume()),A},T.prototype.unpipe=function(A){var S=this._readableState,P={hasUnpiped:!1};if(S.pipesCount===0)return this;if(S.pipesCount===1)return A&&A!==S.pipes||(A||(A=S.pipes),S.pipes=null,S.pipesCount=0,S.flowing=!1,A&&A.emit("unpipe",this,P)),this;if(!A){var R=S.pipes,L=S.pipesCount;S.pipes=null,S.pipesCount=0,S.flowing=!1;for(var F=0;F<L;F++)R[F].emit("unpipe",this,{hasUnpiped:!1});return this}var V=I(S.pipes,A);return V===-1||(S.pipes.splice(V,1),S.pipesCount-=1,S.pipesCount===1&&(S.pipes=S.pipes[0]),A.emit("unpipe",this,P)),this},T.prototype.on=function(A,S){var P=n.prototype.on.call(this,A,S),R=this._readableState;return A==="data"?(R.readableListening=this.listenerCount("readable")>0,R.flowing!==!1&&this.resume()):A==="readable"&&(R.endEmitted||R.readableListening||(R.readableListening=R.needReadable=!0,R.flowing=!1,R.emittedReadable=!1,s("on readable",R.length,R.reading),R.length?U(this):R.reading||je.nextTick(C,this))),P},T.prototype.addListener=T.prototype.on,T.prototype.removeListener=function(A,S){var P=n.prototype.removeListener.call(this,A,S);return A==="readable"&&je.nextTick(N,this),P},T.prototype.removeAllListeners=function(A){var S=n.prototype.removeAllListeners.apply(this,arguments);return A!=="readable"&&A!==void 0||je.nextTick(N,this),S},T.prototype.resume=function(){var A=this._readableState;return A.flowing||(s("resume"),A.flowing=!A.readableListening,function(S,P){P.resumeScheduled||(P.resumeScheduled=!0,je.nextTick(O,S,P))}(this,A)),A.paused=!1,this},T.prototype.pause=function(){return s("call pause flowing=%j",this._readableState.flowing),this._readableState.flowing!==!1&&(s("pause"),this._readableState.flowing=!1,this.emit("pause")),this._readableState.paused=!0,this},T.prototype.wrap=function(A){var S=this,P=this._readableState,R=!1;for(var L in A.on("end",function(){if(s("wrapped end"),P.decoder&&!P.ended){var V=P.decoder.end();V&&V.length&&S.push(V)}S.push(null)}),A.on("data",function(V){s("wrapped data"),P.decoder&&(V=P.decoder.write(V)),P.objectMode&&V==null||(P.objectMode||V&&V.length)&&(S.push(V)||(R=!0,A.pause()))}),A)this[L]===void 0&&typeof A[L]=="function"&&(this[L]=function(V){return function(){return A[V].apply(A,arguments)}}(L));for(var F=0;F<y.length;F++)A.on(y[F],this.emit.bind(this,y[F]));return this._read=function(V){s("wrapped _read",V),R&&(R=!1,A.resume())},this},typeof Symbol=="function"&&(T.prototype[Symbol.asyncIterator]=function(){return l===void 0&&(l=L9()),l(this)}),Object.defineProperty(T.prototype,"readableHighWaterMark",{enumerable:!1,get:function(){return this._readableState.highWaterMark}}),Object.defineProperty(T.prototype,"readableBuffer",{enumerable:!1,get:function(){return this._readableState&&this._readableState.buffer}}),Object.defineProperty(T.prototype,"readableFlowing",{enumerable:!1,get:function(){return this._readableState.flowing},set:function(A){this._readableState&&(this._readableState.flowing=A)}}),T._fromList=b,Object.defineProperty(T.prototype,"readableLength",{enumerable:!1,get:function(){return this._readableState.length}}),typeof Symbol=="function"&&(T.from=function(A,S){return c===void 0&&(c=lC?aC:(lC=1,aC=function(){throw new Error("Readable.from is not available in the browser")})),c(T,A,S)}),wy}var jR=Ji,Dg=hl.codes,B9=Dg.ERR_METHOD_NOT_IMPLEMENTED,D9=Dg.ERR_MULTIPLE_CALLBACK,$9=Dg.ERR_TRANSFORM_ALREADY_TRANSFORMING,U9=Dg.ERR_TRANSFORM_WITH_LENGTH_0,Pp=yu();function F9(t,e){var n=this._transformState;n.transforming=!1;var r=n.writecb;if(r===null)return this.emit("error",new D9);n.writechunk=null,n.writecb=null,e!=null&&this.push(e),r(t);var i=this._readableState;i.reading=!1,(i.needReadable||i.length<i.highWaterMark)&&this._read(i.highWaterMark)}function Ji(t){if(!(this instanceof Ji))return new Ji(t);Pp.call(this,t),this._transformState={afterTransform:F9.bind(this),needTransform:!1,transforming:!1,writecb:null,writechunk:null,writeencoding:null},this._readableState.needReadable=!0,this._readableState.sync=!1,t&&(typeof t.transform=="function"&&(this._transform=t.transform),typeof t.flush=="function"&&(this._flush=t.flush)),this.on("prefinish",j9)}function j9(){var t=this;typeof this._flush!="function"||this._readableState.destroyed?uC(this,null,null):this._flush(function(e,n){uC(t,e,n)})}function uC(t,e,n){if(e)return t.emit("error",e);if(n!=null&&t.push(n),t._writableState.length)throw new U9;if(t._transformState.transforming)throw new $9;return t.push(null)}Kf(Ji,Pp),Ji.prototype.push=function(t,e){return this._transformState.needTransform=!1,Pp.prototype.push.call(this,t,e)},Ji.prototype._transform=function(t,e,n){n(new B9("_transform()"))},Ji.prototype._write=function(t,e,n){var r=this._transformState;if(r.writecb=n,r.writechunk=t,r.writeencoding=e,!r.transforming){var i=this._readableState;(r.needTransform||i.needReadable||i.length<i.highWaterMark)&&this._read(i.highWaterMark)}},Ji.prototype._read=function(t){var e=this._transformState;e.writechunk===null||e.transforming?e.needTransform=!0:(e.transforming=!0,this._transform(e.writechunk,e.writeencoding,e.afterTransform))},Ji.prototype._destroy=function(t,e){Pp.prototype._destroy.call(this,t,function(n){e(n)})};var by,H9=cf,HR=jR;function cf(t){if(!(this instanceof cf))return new cf(t);HR.call(this,t)}Kf(cf,HR),cf.prototype._transform=function(t,e,n){n(null,t)};var KR=hl.codes,K9=KR.ERR_MISSING_ARGS,z9=KR.ERR_STREAM_DESTROYED;function dC(t){if(t)throw t}function fC(t){t()}function V9(t,e){return t.pipe(e)}var G9=function(){for(var t=arguments.length,e=new Array(t),n=0;n<t;n++)e[n]=arguments[n];var r,i=function(o){return o.length?typeof o[o.length-1]!="function"?dC:o.pop():dC}(e);if(Array.isArray(e[0])&&(e=e[0]),e.length<2)throw new K9("streams");var s=e.map(function(o,a){var l=a<e.length-1;return function(c,u,d,f){f=function(g){var w=!1;return function(){w||(w=!0,g.apply(void 0,arguments))}}(f);var h=!1;c.on("close",function(){h=!0}),by===void 0&&(by=Mb),by(c,{readable:u,writable:d},function(g){if(g)return f(g);h=!0,f()});var m=!1;return function(g){if(!h&&!m)return m=!0,function(w){return w.setHeader&&typeof w.abort=="function"}(c)?c.abort():typeof c.destroy=="function"?c.destroy():void f(g||new z9("pipe"))}}(o,l,a>0,function(c){r||(r=c),c&&s.forEach(fC),l||(s.forEach(fC),i(r))})});return e.reduce(V9)};(function(t,e){(e=Mw.exports=FR()).Stream=e,e.Readable=e,e.Writable=UR(),e.Duplex=yu(),e.Transform=jR,e.PassThrough=H9,e.finished=Mb,e.pipeline=G9})(0,Mw.exports);var vu=Mw.exports;function W9(t={}){const e={},n=new vu.Duplex({objectMode:!0,read:()=>{},write:function(s,o,a){let l=null;try{s.id?function(c){const{id:u}=c;if(u===null)return;const d=e[u];if(!d)return void console.warn(`StreamMiddleware - Unknown response id "${u}"`);delete e[u],Object.assign(d.res,c),setTimeout(d.end)}(s):function(c){t!=null&&t.retryOnMessage&&c.method===t.retryOnMessage&&Object.values(e).forEach(({req:u,retryCount:d=0})=>{if(!u.id)return;if(d>=3)throw new Error(`StreamMiddleware - Retry limit exceeded for request id "${u.id}"`);const f=e[u.id];f&&(f.retryCount=d+1),i(u)}),r.emit("notification",c)}(s)}catch(c){l=c}a(l)}}),r=new vR;return{events:r,middleware:(s,o,a,l)=>{e[s.id]={req:s,res:o,next:a,end:l},i(s)},stream:n};function i(s){n.push(s)}}var L0={},Lw={exports:{}},q9=function t(e,n){if(e&&n)return t(e)(n);if(typeof e!="function")throw new TypeError("need wrapper function");return Object.keys(e).forEach(function(i){r[i]=e[i]}),r;function r(){for(var i=new Array(arguments.length),s=0;s<i.length;s++)i[s]=arguments[s];var o=e.apply(this,i),a=i[i.length-1];return typeof o=="function"&&o!==a&&Object.keys(a).forEach(function(l){o[l]=a[l]}),o}},hC=q9;function $h(t){var e=function(){return e.called?e.value:(e.called=!0,e.value=t.apply(this,arguments))};return e.called=!1,e}function pC(t){var e=function(){if(e.called)throw new Error(e.onceError);return e.called=!0,e.value=t.apply(this,arguments)},n=t.name||"Function wrapped with `once`";return e.onceError=n+" shouldn't be called more than once",e.called=!1,e}Lw.exports=hC($h),Lw.exports.strict=hC(pC),$h.proto=$h(function(){Object.defineProperty(Function.prototype,"once",{value:function(){return $h(this)},configurable:!0}),Object.defineProperty(Function.prototype,"onceStrict",{value:function(){return pC(this)},configurable:!0})});var Q9=Lw.exports,B0={};Object.defineProperty(B0,"__esModule",{value:!0}),B0.Substream=void 0;const Y9=vu;class J9 extends Y9.Duplex{constructor({parent:e,name:n}){super({objectMode:!0}),this._parent=e,this._name=n}_read(){}_write(e,n,r){this._parent.push({name:this._name,data:e}),r()}}B0.Substream=J9;var Z9=Pr&&Pr.__importDefault||function(t){return t&&t.__esModule?t:{default:t}};Object.defineProperty(L0,"__esModule",{value:!0}),L0.ObjectMultiplex=void 0;const Ey=vu,X9=Z9(Q9),e$=B0,gC=Symbol("IGNORE_SUBSTREAM");let t$=class extends Ey.Duplex{constructor(t={}){super(Object.assign(Object.assign({},t),{objectMode:!0})),this._substreams={}}createStream(t){if(this.destroyed)throw new Error(`ObjectMultiplex - parent stream for name "${t}" already destroyed`);if(this._readableState.ended||this._writableState.ended)throw new Error(`ObjectMultiplex - parent stream for name "${t}" already ended`);if(!t)throw new Error("ObjectMultiplex - name must not be empty");if(this._substreams[t])throw new Error(`ObjectMultiplex - Substream for name "${t}" already exists`);const e=new e$.Substream({parent:this,name:t});return this._substreams[t]=e,function(n,r){const i=(0,X9.default)(r);(0,Ey.finished)(n,{readable:!1},i),(0,Ey.finished)(n,{writable:!1},i)}(this,n=>e.destroy(n||void 0)),e}ignoreStream(t){if(!t)throw new Error("ObjectMultiplex - name must not be empty");if(this._substreams[t])throw new Error(`ObjectMultiplex - Substream for name "${t}" already exists`);this._substreams[t]=gC}_read(){}_write(t,e,n){const{name:r,data:i}=t;if(!r)return console.warn(`ObjectMultiplex - malformed chunk without name "${t}"`),n();const s=this._substreams[r];return s?(s!==gC&&s.push(i),n()):(console.warn(`ObjectMultiplex - orphaned data for stream "${r}"`),n())}};L0.ObjectMultiplex=t$;var n$=Og(L0.ObjectMultiplex);const li=t=>t!==null&&typeof t=="object"&&typeof t.pipe=="function";li.writable=t=>li(t)&&t.writable!==!1&&typeof t._write=="function"&&typeof t._writableState=="object",li.readable=t=>li(t)&&t.readable!==!1&&typeof t._read=="function"&&typeof t._readableState=="object",li.duplex=t=>li.writable(t)&&li.readable(t),li.transform=t=>li.duplex(t)&&typeof t._transform=="function";var ci,r$=li,i$=class extends b9{constructor(t,{jsonRpcStreamName:e,logger:n=console,maxEventListeners:r=100,rpcMiddleware:i=[]}){if(super({logger:n,maxEventListeners:r,rpcMiddleware:i}),!r$.duplex(t))throw new Error(gt.errors.invalidDuplexStream());this._handleStreamDisconnect=this._handleStreamDisconnect.bind(this);const s=new n$;vu.pipeline(t,s,t,this._handleStreamDisconnect.bind(this,"MetaMask")),this._jsonRpcConnection=W9({retryOnMessage:"METAMASK_EXTENSION_CONNECT_CAN_RETRY"}),vu.pipeline(this._jsonRpcConnection.stream,s.createStream(e),this._jsonRpcConnection.stream,this._handleStreamDisconnect.bind(this,"MetaMask RpcProvider")),this._rpcEngine.push(this._jsonRpcConnection.middleware),this._jsonRpcConnection.events.on("notification",o=>{const{method:a,params:l}=o;a==="metamask_accountsChanged"?this._handleAccountsChanged(l):a==="metamask_unlockStateChanged"?this._handleUnlockStateChanged(l):a==="metamask_chainChanged"?this._handleChainChanged(l):wR.includes(a)?this.emit("message",{type:a,data:l}):a==="METAMASK_STREAM_FAILURE"&&t.destroy(new Error(gt.errors.permanentlyDisconnected()))})}async _initializeStateAsync(){let t;try{t=await this.request({method:"metamask_getProviderState"})}catch(e){this._log.error("MetaMask: Failed to get initial state. Please report this bug.",e)}this._initializeState(t)}_handleStreamDisconnect(t,e){let n=`MetaMask: Lost connection to "${t}".`;e!=null&&e.stack&&(n+=`
${e.stack}`),this._log.warn(n),this.listenerCount("error")>0&&this.emit("error",n),this._handleDisconnect(!1,e?e.message:void 0)}_handleChainChanged({chainId:t,networkVersion:e}={}){bR(t)&&(n=>!!n&&typeof n=="string")(e)?e==="loading"?this._handleDisconnect(!0):super._handleChainChanged({chainId:t}):this._log.error(gt.errors.invalidNetworkParams(),{chainId:t,networkVersion:e})}},s$=class extends i${constructor(t,{jsonRpcStreamName:e="metamask-provider",logger:n=console,maxEventListeners:r=100,shouldSendMetadata:i}={}){if(super(t,{jsonRpcStreamName:e,logger:n,maxEventListeners:r,rpcMiddleware:f9(n)}),this._sentWarnings={chainId:!1,networkVersion:!1,selectedAddress:!1,enable:!1,experimentalMethods:!1,send:!1,events:{close:!1,data:!1,networkChanged:!1,notification:!1}},Nw(this,ci,void 0),this._initializeStateAsync(),Yi(this,ci,null),this.isMetaMask=!0,this._sendSync=this._sendSync.bind(this),this.enable=this.enable.bind(this),this.send=this.send.bind(this),this.sendAsync=this.sendAsync.bind(this),this._warnOfDeprecation=this._warnOfDeprecation.bind(this),this._metamask=this._getExperimentalApi(),this._jsonRpcConnection.events.on("notification",s=>{const{method:o}=s;wR.includes(o)&&(this.emit("data",s),this.emit("notification",s.params.result))}),i)if(document.readyState==="complete")GS(this._rpcEngine,this._log);else{const s=()=>{GS(this._rpcEngine,this._log),window.removeEventListener("DOMContentLoaded",s)};window.addEventListener("DOMContentLoaded",s)}}get chainId(){return this._sentWarnings.chainId||(this._log.warn(gt.warnings.chainIdDeprecation),this._sentWarnings.chainId=!0),super.chainId}get networkVersion(){return this._sentWarnings.networkVersion||(this._log.warn(gt.warnings.networkVersionDeprecation),this._sentWarnings.networkVersion=!0),_i(this,ci)}get selectedAddress(){return this._sentWarnings.selectedAddress||(this._log.warn(gt.warnings.selectedAddressDeprecation),this._sentWarnings.selectedAddress=!0),super.selectedAddress}sendAsync(t,e){this._rpcRequest(t,e)}addListener(t,e){return this._warnOfDeprecation(t),super.addListener(t,e)}on(t,e){return this._warnOfDeprecation(t),super.on(t,e)}once(t,e){return this._warnOfDeprecation(t),super.once(t,e)}prependListener(t,e){return this._warnOfDeprecation(t),super.prependListener(t,e)}prependOnceListener(t,e){return this._warnOfDeprecation(t),super.prependOnceListener(t,e)}_handleDisconnect(t,e){super._handleDisconnect(t,e),_i(this,ci)&&!t&&Yi(this,ci,null)}_warnOfDeprecation(t){var e;((e=this._sentWarnings)==null?void 0:e.events[t])===!1&&(this._log.warn(gt.warnings.events[t]),this._sentWarnings.events[t]=!0)}async enable(){return this._sentWarnings.enable||(this._log.warn(gt.warnings.enableDeprecation),this._sentWarnings.enable=!0),new Promise((t,e)=>{try{this._rpcRequest({method:"eth_requestAccounts",params:[]},kp(t,e))}catch(n){e(n)}})}send(t,e){return this._sentWarnings.send||(this._log.warn(gt.warnings.sendDeprecation),this._sentWarnings.send=!0),typeof t!="string"||e&&!Array.isArray(e)?t&&typeof t=="object"&&typeof e=="function"?this._rpcRequest(t,e):this._sendSync(t):new Promise((n,r)=>{try{this._rpcRequest({method:t,params:e},kp(n,r,!1))}catch(i){r(i)}})}_sendSync(t){let e;switch(t.method){case"eth_accounts":e=this.selectedAddress?[this.selectedAddress]:[];break;case"eth_coinbase":e=this.selectedAddress??null;break;case"eth_uninstallFilter":this._rpcRequest(t,ER),e=!0;break;case"net_version":e=_i(this,ci)??null;break;default:throw new Error(gt.errors.unsupportedSync(t.method))}return{id:t.id,jsonrpc:t.jsonrpc,result:e}}_getExperimentalApi(){return new Proxy({isUnlocked:async()=>(this._state.initialized||await new Promise(t=>{this.on("_initialized",()=>t())}),this._state.isUnlocked),requestBatch:async t=>{if(!Array.isArray(t))throw vd({message:"Batch requests must be made with an array of request objects.",data:t});return new Promise((e,n)=>{this._rpcRequest(t,kp(e,n))})}},{get:(t,e,...n)=>(this._sentWarnings.experimentalMethods||(this._log.warn(gt.warnings.experimentalMethods),this._sentWarnings.experimentalMethods=!0),Reflect.get(t,e,...n))})}_handleChainChanged({chainId:t,networkVersion:e}={}){super._handleChainChanged({chainId:t,networkVersion:e}),this._state.isConnected&&e!==_i(this,ci)&&(Yi(this,ci,e),this._state.initialized&&this.emit("networkChanged",_i(this,ci)))}};ci=new WeakMap;const X=An("MM_SDK");let mC;X.color="#FFAC1C";var zR={},Do={};Object.defineProperty(Do,"__esModule",{value:!0}),Do.EthereumProviderError=Do.EthereumRpcError=void 0;const o$=fR;class VR extends Error{constructor(e,n,r){if(!Number.isInteger(e))throw new Error('"code" must be an integer.');if(!n||typeof n!="string")throw new Error('"message" must be a nonempty string.');super(n),this.code=e,r!==void 0&&(this.data=r)}serialize(){const e={code:this.code,message:this.message};return this.data!==void 0&&(e.data=this.data),this.stack&&(e.stack=this.stack),e}toString(){return o$.default(this.serialize(),a$,2)}}Do.EthereumRpcError=VR;function a$(t,e){if(e!=="[Circular]")return e}Do.EthereumProviderError=class extends VR{constructor(t,e,n){if(!function(r){return Number.isInteger(r)&&r>=1e3&&r<=4999}(t))throw new Error('"code" must be an integer such that: 1000 <= code <= 4999');super(t,e,n)}};var Lb={},Zs={};Object.defineProperty(Zs,"__esModule",{value:!0}),Zs.errorValues=Zs.errorCodes=void 0,Zs.errorCodes={rpc:{invalidInput:-32e3,resourceNotFound:-32001,resourceUnavailable:-32002,transactionRejected:-32003,methodNotSupported:-32004,limitExceeded:-32005,parse:-32700,invalidRequest:-32600,methodNotFound:-32601,invalidParams:-32602,internal:-32603},provider:{userRejectedRequest:4001,unauthorized:4100,unsupportedMethod:4200,disconnected:4900,chainDisconnected:4901}},Zs.errorValues={"-32700":{standard:"JSON RPC 2.0",message:"Invalid JSON was received by the server. An error occurred on the server while parsing the JSON text."},"-32600":{standard:"JSON RPC 2.0",message:"The JSON sent is not a valid Request object."},"-32601":{standard:"JSON RPC 2.0",message:"The method does not exist / is not available."},"-32602":{standard:"JSON RPC 2.0",message:"Invalid method parameter(s)."},"-32603":{standard:"JSON RPC 2.0",message:"Internal JSON-RPC error."},"-32000":{standard:"EIP-1474",message:"Invalid input."},"-32001":{standard:"EIP-1474",message:"Resource not found."},"-32002":{standard:"EIP-1474",message:"Resource unavailable."},"-32003":{standard:"EIP-1474",message:"Transaction rejected."},"-32004":{standard:"EIP-1474",message:"Method not supported."},"-32005":{standard:"EIP-1474",message:"Request limit exceeded."},4001:{standard:"EIP-1193",message:"User rejected the request."},4100:{standard:"EIP-1193",message:"The requested account and/or method has not been authorized by the user."},4200:{standard:"EIP-1193",message:"The requested method is not supported by this Ethereum provider."},4900:{standard:"EIP-1193",message:"The provider is disconnected from all chains."},4901:{standard:"EIP-1193",message:"The provider is disconnected from the specified chain."}},function(t){Object.defineProperty(t,"__esModule",{value:!0}),t.serializeError=t.isValidCode=t.getMessageFromCode=t.JSON_RPC_SERVER_ERROR_MESSAGE=void 0;const e=Zs,n=Do,r=e.errorCodes.rpc.internal,i="Unspecified error message. This is a bug, please report it.",s={code:r,message:o(r)};function o(d,f=i){if(Number.isInteger(d)){const h=d.toString();if(u(e.errorValues,h))return e.errorValues[h].message;if(l(d))return t.JSON_RPC_SERVER_ERROR_MESSAGE}return f}function a(d){if(!Number.isInteger(d))return!1;const f=d.toString();return!!e.errorValues[f]||!!l(d)}function l(d){return d>=-32099&&d<=-32e3}function c(d){return d&&typeof d=="object"&&!Array.isArray(d)?Object.assign({},d):d}function u(d,f){return Object.prototype.hasOwnProperty.call(d,f)}t.JSON_RPC_SERVER_ERROR_MESSAGE="Unspecified server error.",t.getMessageFromCode=o,t.isValidCode=a,t.serializeError=function(d,{fallbackError:f=s,shouldIncludeStack:h=!1}={}){var m,g;if(!f||!Number.isInteger(f.code)||typeof f.message!="string")throw new Error("Must provide fallback error with integer number code and string message.");if(d instanceof n.EthereumRpcError)return d.serialize();const w={};if(d&&typeof d=="object"&&!Array.isArray(d)&&u(d,"code")&&a(d.code)){const v=d;w.code=v.code,v.message&&typeof v.message=="string"?(w.message=v.message,u(v,"data")&&(w.data=v.data)):(w.message=o(w.code),w.data={originalError:c(d)})}else{w.code=f.code;const v=(m=d)===null||m===void 0?void 0:m.message;w.message=v&&typeof v=="string"?v:f.message,w.data={originalError:c(d)}}const p=(g=d)===null||g===void 0?void 0:g.stack;return h&&d&&p&&typeof p=="string"&&(w.stack=p),w}}(Lb);var D0={};Object.defineProperty(D0,"__esModule",{value:!0}),D0.ethErrors=void 0;const Bb=Do,GR=Lb,Zt=Zs;function dr(t,e){const[n,r]=WR(e);return new Bb.EthereumRpcError(t,n||GR.getMessageFromCode(t),r)}function Vu(t,e){const[n,r]=WR(e);return new Bb.EthereumProviderError(t,n||GR.getMessageFromCode(t),r)}function WR(t){if(t){if(typeof t=="string")return[t];if(typeof t=="object"&&!Array.isArray(t)){const{message:e,data:n}=t;if(e&&typeof e!="string")throw new Error("Must specify string message.");return[e||void 0,n]}}return[]}D0.ethErrors={rpc:{parse:t=>dr(Zt.errorCodes.rpc.parse,t),invalidRequest:t=>dr(Zt.errorCodes.rpc.invalidRequest,t),invalidParams:t=>dr(Zt.errorCodes.rpc.invalidParams,t),methodNotFound:t=>dr(Zt.errorCodes.rpc.methodNotFound,t),internal:t=>dr(Zt.errorCodes.rpc.internal,t),server:t=>{if(!t||typeof t!="object"||Array.isArray(t))throw new Error("Ethereum RPC Server errors must provide single object argument.");const{code:e}=t;if(!Number.isInteger(e)||e>-32005||e<-32099)throw new Error('"code" must be an integer such that: -32099 <= code <= -32005');return dr(e,t)},invalidInput:t=>dr(Zt.errorCodes.rpc.invalidInput,t),resourceNotFound:t=>dr(Zt.errorCodes.rpc.resourceNotFound,t),resourceUnavailable:t=>dr(Zt.errorCodes.rpc.resourceUnavailable,t),transactionRejected:t=>dr(Zt.errorCodes.rpc.transactionRejected,t),methodNotSupported:t=>dr(Zt.errorCodes.rpc.methodNotSupported,t),limitExceeded:t=>dr(Zt.errorCodes.rpc.limitExceeded,t)},provider:{userRejectedRequest:t=>Vu(Zt.errorCodes.provider.userRejectedRequest,t),unauthorized:t=>Vu(Zt.errorCodes.provider.unauthorized,t),unsupportedMethod:t=>Vu(Zt.errorCodes.provider.unsupportedMethod,t),disconnected:t=>Vu(Zt.errorCodes.provider.disconnected,t),chainDisconnected:t=>Vu(Zt.errorCodes.provider.chainDisconnected,t),custom:t=>{if(!t||typeof t!="object"||Array.isArray(t))throw new Error("Ethereum Provider custom errors must provide single object argument.");const{code:e,message:n,data:r}=t;if(!n||typeof n!="string")throw new Error('"message" must be a nonempty string');return new Bb.EthereumProviderError(e,n,r)}}},function(t){Object.defineProperty(t,"__esModule",{value:!0}),t.getMessageFromCode=t.serializeError=t.EthereumProviderError=t.EthereumRpcError=t.ethErrors=t.errorCodes=void 0;const e=Do;Object.defineProperty(t,"EthereumRpcError",{enumerable:!0,get:function(){return e.EthereumRpcError}}),Object.defineProperty(t,"EthereumProviderError",{enumerable:!0,get:function(){return e.EthereumProviderError}});const n=Lb;Object.defineProperty(t,"serializeError",{enumerable:!0,get:function(){return n.serializeError}}),Object.defineProperty(t,"getMessageFromCode",{enumerable:!0,get:function(){return n.getMessageFromCode}});const r=D0;Object.defineProperty(t,"ethErrors",{enumerable:!0,get:function(){return r.ethErrors}});const i=Zs;Object.defineProperty(t,"errorCodes",{enumerable:!0,get:function(){return i.errorCodes}})}(zR);var qR={exports:{}};qR.exports=function(t){var e={};function n(r){if(e[r])return e[r].exports;var i=e[r]={i:r,l:!1,exports:{}};return t[r].call(i.exports,i,i.exports,n),i.l=!0,i.exports}return n.m=t,n.c=e,n.d=function(r,i,s){n.o(r,i)||Object.defineProperty(r,i,{enumerable:!0,get:s})},n.r=function(r){typeof Symbol<"u"&&Symbol.toStringTag&&Object.defineProperty(r,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(r,"__esModule",{value:!0})},n.t=function(r,i){if(1&i&&(r=n(r)),8&i||4&i&&typeof r=="object"&&r&&r.__esModule)return r;var s=Object.create(null);if(n.r(s),Object.defineProperty(s,"default",{enumerable:!0,value:r}),2&i&&typeof r!="string")for(var o in r)n.d(s,o,(function(a){return r[a]}).bind(null,o));return s},n.n=function(r){var i=r&&r.__esModule?function(){return r.default}:function(){return r};return n.d(i,"a",i),i},n.o=function(r,i){return Object.prototype.hasOwnProperty.call(r,i)},n.p="",n(n.s=90)}({17:function(t,e,n){e.__esModule=!0,e.default=void 0;var r=n(18),i=function(){function s(){}return s.getFirstMatch=function(o,a){var l=a.match(o);return l&&l.length>0&&l[1]||""},s.getSecondMatch=function(o,a){var l=a.match(o);return l&&l.length>1&&l[2]||""},s.matchAndReturnConst=function(o,a,l){if(o.test(a))return l},s.getWindowsVersionName=function(o){switch(o){case"NT":return"NT";case"XP":case"NT 5.1":return"XP";case"NT 5.0":return"2000";case"NT 5.2":return"2003";case"NT 6.0":return"Vista";case"NT 6.1":return"7";case"NT 6.2":return"8";case"NT 6.3":return"8.1";case"NT 10.0":return"10";default:return}},s.getMacOSVersionName=function(o){var a=o.split(".").splice(0,2).map(function(l){return parseInt(l,10)||0});if(a.push(0),a[0]===10)switch(a[1]){case 5:return"Leopard";case 6:return"Snow Leopard";case 7:return"Lion";case 8:return"Mountain Lion";case 9:return"Mavericks";case 10:return"Yosemite";case 11:return"El Capitan";case 12:return"Sierra";case 13:return"High Sierra";case 14:return"Mojave";case 15:return"Catalina";default:return}},s.getAndroidVersionName=function(o){var a=o.split(".").splice(0,2).map(function(l){return parseInt(l,10)||0});if(a.push(0),!(a[0]===1&&a[1]<5))return a[0]===1&&a[1]<6?"Cupcake":a[0]===1&&a[1]>=6?"Donut":a[0]===2&&a[1]<2?"Eclair":a[0]===2&&a[1]===2?"Froyo":a[0]===2&&a[1]>2?"Gingerbread":a[0]===3?"Honeycomb":a[0]===4&&a[1]<1?"Ice Cream Sandwich":a[0]===4&&a[1]<4?"Jelly Bean":a[0]===4&&a[1]>=4?"KitKat":a[0]===5?"Lollipop":a[0]===6?"Marshmallow":a[0]===7?"Nougat":a[0]===8?"Oreo":a[0]===9?"Pie":void 0},s.getVersionPrecision=function(o){return o.split(".").length},s.compareVersions=function(o,a,l){l===void 0&&(l=!1);var c=s.getVersionPrecision(o),u=s.getVersionPrecision(a),d=Math.max(c,u),f=0,h=s.map([o,a],function(m){var g=d-s.getVersionPrecision(m),w=m+new Array(g+1).join(".0");return s.map(w.split("."),function(p){return new Array(20-p.length).join("0")+p}).reverse()});for(l&&(f=d-Math.min(c,u)),d-=1;d>=f;){if(h[0][d]>h[1][d])return 1;if(h[0][d]===h[1][d]){if(d===f)return 0;d-=1}else if(h[0][d]<h[1][d])return-1}},s.map=function(o,a){var l,c=[];if(Array.prototype.map)return Array.prototype.map.call(o,a);for(l=0;l<o.length;l+=1)c.push(a(o[l]));return c},s.find=function(o,a){var l,c;if(Array.prototype.find)return Array.prototype.find.call(o,a);for(l=0,c=o.length;l<c;l+=1){var u=o[l];if(a(u,l))return u}},s.assign=function(o){for(var a,l,c=o,u=arguments.length,d=new Array(u>1?u-1:0),f=1;f<u;f++)d[f-1]=arguments[f];if(Object.assign)return Object.assign.apply(Object,[o].concat(d));var h=function(){var m=d[a];typeof m=="object"&&m!==null&&Object.keys(m).forEach(function(g){c[g]=m[g]})};for(a=0,l=d.length;a<l;a+=1)h();return o},s.getBrowserAlias=function(o){return r.BROWSER_ALIASES_MAP[o]},s.getBrowserTypeByAlias=function(o){return r.BROWSER_MAP[o]||""},s}();e.default=i,t.exports=e.default},18:function(t,e,n){e.__esModule=!0,e.ENGINE_MAP=e.OS_MAP=e.PLATFORMS_MAP=e.BROWSER_MAP=e.BROWSER_ALIASES_MAP=void 0,e.BROWSER_ALIASES_MAP={"Amazon Silk":"amazon_silk","Android Browser":"android",Bada:"bada",BlackBerry:"blackberry",Chrome:"chrome",Chromium:"chromium",Electron:"electron",Epiphany:"epiphany",Firefox:"firefox",Focus:"focus",Generic:"generic","Google Search":"google_search",Googlebot:"googlebot","Internet Explorer":"ie","K-Meleon":"k_meleon",Maxthon:"maxthon","Microsoft Edge":"edge","MZ Browser":"mz","NAVER Whale Browser":"naver",Opera:"opera","Opera Coast":"opera_coast",PhantomJS:"phantomjs",Puffin:"puffin",QupZilla:"qupzilla",QQ:"qq",QQLite:"qqlite",Safari:"safari",Sailfish:"sailfish","Samsung Internet for Android":"samsung_internet",SeaMonkey:"seamonkey",Sleipnir:"sleipnir",Swing:"swing",Tizen:"tizen","UC Browser":"uc",Vivaldi:"vivaldi","WebOS Browser":"webos",WeChat:"wechat","Yandex Browser":"yandex",Roku:"roku"},e.BROWSER_MAP={amazon_silk:"Amazon Silk",android:"Android Browser",bada:"Bada",blackberry:"BlackBerry",chrome:"Chrome",chromium:"Chromium",electron:"Electron",epiphany:"Epiphany",firefox:"Firefox",focus:"Focus",generic:"Generic",googlebot:"Googlebot",google_search:"Google Search",ie:"Internet Explorer",k_meleon:"K-Meleon",maxthon:"Maxthon",edge:"Microsoft Edge",mz:"MZ Browser",naver:"NAVER Whale Browser",opera:"Opera",opera_coast:"Opera Coast",phantomjs:"PhantomJS",puffin:"Puffin",qupzilla:"QupZilla",qq:"QQ Browser",qqlite:"QQ Browser Lite",safari:"Safari",sailfish:"Sailfish",samsung_internet:"Samsung Internet for Android",seamonkey:"SeaMonkey",sleipnir:"Sleipnir",swing:"Swing",tizen:"Tizen",uc:"UC Browser",vivaldi:"Vivaldi",webos:"WebOS Browser",wechat:"WeChat",yandex:"Yandex Browser"},e.PLATFORMS_MAP={tablet:"tablet",mobile:"mobile",desktop:"desktop",tv:"tv"},e.OS_MAP={WindowsPhone:"Windows Phone",Windows:"Windows",MacOS:"macOS",iOS:"iOS",Android:"Android",WebOS:"WebOS",BlackBerry:"BlackBerry",Bada:"Bada",Tizen:"Tizen",Linux:"Linux",ChromeOS:"Chrome OS",PlayStation4:"PlayStation 4",Roku:"Roku"},e.ENGINE_MAP={EdgeHTML:"EdgeHTML",Blink:"Blink",Trident:"Trident",Presto:"Presto",Gecko:"Gecko",WebKit:"WebKit"}},90:function(t,e,n){e.__esModule=!0,e.default=void 0;var r,i=(r=n(91))&&r.__esModule?r:{default:r},s=n(18);function o(l,c){for(var u=0;u<c.length;u++){var d=c[u];d.enumerable=d.enumerable||!1,d.configurable=!0,"value"in d&&(d.writable=!0),Object.defineProperty(l,d.key,d)}}var a=function(){function l(){}var c,u,d;return l.getParser=function(f,h){if(h===void 0&&(h=!1),typeof f!="string")throw new Error("UserAgent should be a string");return new i.default(f,h)},l.parse=function(f){return new i.default(f).getResult()},c=l,d=[{key:"BROWSER_MAP",get:function(){return s.BROWSER_MAP}},{key:"ENGINE_MAP",get:function(){return s.ENGINE_MAP}},{key:"OS_MAP",get:function(){return s.OS_MAP}},{key:"PLATFORMS_MAP",get:function(){return s.PLATFORMS_MAP}}],(u=null)&&o(c.prototype,u),d&&o(c,d),l}();e.default=a,t.exports=e.default},91:function(t,e,n){e.__esModule=!0,e.default=void 0;var r=l(n(92)),i=l(n(93)),s=l(n(94)),o=l(n(95)),a=l(n(17));function l(u){return u&&u.__esModule?u:{default:u}}var c=function(){function u(f,h){if(h===void 0&&(h=!1),f==null||f==="")throw new Error("UserAgent parameter can't be empty");this._ua=f,this.parsedResult={},h!==!0&&this.parse()}var d=u.prototype;return d.getUA=function(){return this._ua},d.test=function(f){return f.test(this._ua)},d.parseBrowser=function(){var f=this;this.parsedResult.browser={};var h=a.default.find(r.default,function(m){if(typeof m.test=="function")return m.test(f);if(m.test instanceof Array)return m.test.some(function(g){return f.test(g)});throw new Error("Browser's test function is not valid")});return h&&(this.parsedResult.browser=h.describe(this.getUA())),this.parsedResult.browser},d.getBrowser=function(){return this.parsedResult.browser?this.parsedResult.browser:this.parseBrowser()},d.getBrowserName=function(f){return f?String(this.getBrowser().name).toLowerCase()||"":this.getBrowser().name||""},d.getBrowserVersion=function(){return this.getBrowser().version},d.getOS=function(){return this.parsedResult.os?this.parsedResult.os:this.parseOS()},d.parseOS=function(){var f=this;this.parsedResult.os={};var h=a.default.find(i.default,function(m){if(typeof m.test=="function")return m.test(f);if(m.test instanceof Array)return m.test.some(function(g){return f.test(g)});throw new Error("Browser's test function is not valid")});return h&&(this.parsedResult.os=h.describe(this.getUA())),this.parsedResult.os},d.getOSName=function(f){var h=this.getOS().name;return f?String(h).toLowerCase()||"":h||""},d.getOSVersion=function(){return this.getOS().version},d.getPlatform=function(){return this.parsedResult.platform?this.parsedResult.platform:this.parsePlatform()},d.getPlatformType=function(f){f===void 0&&(f=!1);var h=this.getPlatform().type;return f?String(h).toLowerCase()||"":h||""},d.parsePlatform=function(){var f=this;this.parsedResult.platform={};var h=a.default.find(s.default,function(m){if(typeof m.test=="function")return m.test(f);if(m.test instanceof Array)return m.test.some(function(g){return f.test(g)});throw new Error("Browser's test function is not valid")});return h&&(this.parsedResult.platform=h.describe(this.getUA())),this.parsedResult.platform},d.getEngine=function(){return this.parsedResult.engine?this.parsedResult.engine:this.parseEngine()},d.getEngineName=function(f){return f?String(this.getEngine().name).toLowerCase()||"":this.getEngine().name||""},d.parseEngine=function(){var f=this;this.parsedResult.engine={};var h=a.default.find(o.default,function(m){if(typeof m.test=="function")return m.test(f);if(m.test instanceof Array)return m.test.some(function(g){return f.test(g)});throw new Error("Browser's test function is not valid")});return h&&(this.parsedResult.engine=h.describe(this.getUA())),this.parsedResult.engine},d.parse=function(){return this.parseBrowser(),this.parseOS(),this.parsePlatform(),this.parseEngine(),this},d.getResult=function(){return a.default.assign({},this.parsedResult)},d.satisfies=function(f){var h=this,m={},g=0,w={},p=0;if(Object.keys(f).forEach(function(K){var U=f[K];typeof U=="string"?(w[K]=U,p+=1):typeof U=="object"&&(m[K]=U,g+=1)}),g>0){var v=Object.keys(m),y=a.default.find(v,function(K){return h.isOS(K)});if(y){var x=this.satisfies(m[y]);if(x!==void 0)return x}var T=a.default.find(v,function(K){return h.isPlatform(K)});if(T){var B=this.satisfies(m[T]);if(B!==void 0)return B}}if(p>0){var j=Object.keys(w),M=a.default.find(j,function(K){return h.isBrowser(K,!0)});if(M!==void 0)return this.compareVersion(w[M])}},d.isBrowser=function(f,h){h===void 0&&(h=!1);var m=this.getBrowserName().toLowerCase(),g=f.toLowerCase(),w=a.default.getBrowserTypeByAlias(g);return h&&w&&(g=w.toLowerCase()),g===m},d.compareVersion=function(f){var h=[0],m=f,g=!1,w=this.getBrowserVersion();if(typeof w=="string")return f[0]===">"||f[0]==="<"?(m=f.substr(1),f[1]==="="?(g=!0,m=f.substr(2)):h=[],f[0]===">"?h.push(1):h.push(-1)):f[0]==="="?m=f.substr(1):f[0]==="~"&&(g=!0,m=f.substr(1)),h.indexOf(a.default.compareVersions(w,m,g))>-1},d.isOS=function(f){return this.getOSName(!0)===String(f).toLowerCase()},d.isPlatform=function(f){return this.getPlatformType(!0)===String(f).toLowerCase()},d.isEngine=function(f){return this.getEngineName(!0)===String(f).toLowerCase()},d.is=function(f,h){return h===void 0&&(h=!1),this.isBrowser(f,h)||this.isOS(f)||this.isPlatform(f)},d.some=function(f){var h=this;return f===void 0&&(f=[]),f.some(function(m){return h.is(m)})},u}();e.default=c,t.exports=e.default},92:function(t,e,n){e.__esModule=!0,e.default=void 0;var r,i=(r=n(17))&&r.__esModule?r:{default:r},s=/version\/(\d+(\.?_?\d+)+)/i,o=[{test:[/googlebot/i],describe:function(a){var l={name:"Googlebot"},c=i.default.getFirstMatch(/googlebot\/(\d+(\.\d+))/i,a)||i.default.getFirstMatch(s,a);return c&&(l.version=c),l}},{test:[/opera/i],describe:function(a){var l={name:"Opera"},c=i.default.getFirstMatch(s,a)||i.default.getFirstMatch(/(?:opera)[\s/](\d+(\.?_?\d+)+)/i,a);return c&&(l.version=c),l}},{test:[/opr\/|opios/i],describe:function(a){var l={name:"Opera"},c=i.default.getFirstMatch(/(?:opr|opios)[\s/](\S+)/i,a)||i.default.getFirstMatch(s,a);return c&&(l.version=c),l}},{test:[/SamsungBrowser/i],describe:function(a){var l={name:"Samsung Internet for Android"},c=i.default.getFirstMatch(s,a)||i.default.getFirstMatch(/(?:SamsungBrowser)[\s/](\d+(\.?_?\d+)+)/i,a);return c&&(l.version=c),l}},{test:[/Whale/i],describe:function(a){var l={name:"NAVER Whale Browser"},c=i.default.getFirstMatch(s,a)||i.default.getFirstMatch(/(?:whale)[\s/](\d+(?:\.\d+)+)/i,a);return c&&(l.version=c),l}},{test:[/MZBrowser/i],describe:function(a){var l={name:"MZ Browser"},c=i.default.getFirstMatch(/(?:MZBrowser)[\s/](\d+(?:\.\d+)+)/i,a)||i.default.getFirstMatch(s,a);return c&&(l.version=c),l}},{test:[/focus/i],describe:function(a){var l={name:"Focus"},c=i.default.getFirstMatch(/(?:focus)[\s/](\d+(?:\.\d+)+)/i,a)||i.default.getFirstMatch(s,a);return c&&(l.version=c),l}},{test:[/swing/i],describe:function(a){var l={name:"Swing"},c=i.default.getFirstMatch(/(?:swing)[\s/](\d+(?:\.\d+)+)/i,a)||i.default.getFirstMatch(s,a);return c&&(l.version=c),l}},{test:[/coast/i],describe:function(a){var l={name:"Opera Coast"},c=i.default.getFirstMatch(s,a)||i.default.getFirstMatch(/(?:coast)[\s/](\d+(\.?_?\d+)+)/i,a);return c&&(l.version=c),l}},{test:[/opt\/\d+(?:.?_?\d+)+/i],describe:function(a){var l={name:"Opera Touch"},c=i.default.getFirstMatch(/(?:opt)[\s/](\d+(\.?_?\d+)+)/i,a)||i.default.getFirstMatch(s,a);return c&&(l.version=c),l}},{test:[/yabrowser/i],describe:function(a){var l={name:"Yandex Browser"},c=i.default.getFirstMatch(/(?:yabrowser)[\s/](\d+(\.?_?\d+)+)/i,a)||i.default.getFirstMatch(s,a);return c&&(l.version=c),l}},{test:[/ucbrowser/i],describe:function(a){var l={name:"UC Browser"},c=i.default.getFirstMatch(s,a)||i.default.getFirstMatch(/(?:ucbrowser)[\s/](\d+(\.?_?\d+)+)/i,a);return c&&(l.version=c),l}},{test:[/Maxthon|mxios/i],describe:function(a){var l={name:"Maxthon"},c=i.default.getFirstMatch(s,a)||i.default.getFirstMatch(/(?:Maxthon|mxios)[\s/](\d+(\.?_?\d+)+)/i,a);return c&&(l.version=c),l}},{test:[/epiphany/i],describe:function(a){var l={name:"Epiphany"},c=i.default.getFirstMatch(s,a)||i.default.getFirstMatch(/(?:epiphany)[\s/](\d+(\.?_?\d+)+)/i,a);return c&&(l.version=c),l}},{test:[/puffin/i],describe:function(a){var l={name:"Puffin"},c=i.default.getFirstMatch(s,a)||i.default.getFirstMatch(/(?:puffin)[\s/](\d+(\.?_?\d+)+)/i,a);return c&&(l.version=c),l}},{test:[/sleipnir/i],describe:function(a){var l={name:"Sleipnir"},c=i.default.getFirstMatch(s,a)||i.default.getFirstMatch(/(?:sleipnir)[\s/](\d+(\.?_?\d+)+)/i,a);return c&&(l.version=c),l}},{test:[/k-meleon/i],describe:function(a){var l={name:"K-Meleon"},c=i.default.getFirstMatch(s,a)||i.default.getFirstMatch(/(?:k-meleon)[\s/](\d+(\.?_?\d+)+)/i,a);return c&&(l.version=c),l}},{test:[/micromessenger/i],describe:function(a){var l={name:"WeChat"},c=i.default.getFirstMatch(/(?:micromessenger)[\s/](\d+(\.?_?\d+)+)/i,a)||i.default.getFirstMatch(s,a);return c&&(l.version=c),l}},{test:[/qqbrowser/i],describe:function(a){var l={name:/qqbrowserlite/i.test(a)?"QQ Browser Lite":"QQ Browser"},c=i.default.getFirstMatch(/(?:qqbrowserlite|qqbrowser)[/](\d+(\.?_?\d+)+)/i,a)||i.default.getFirstMatch(s,a);return c&&(l.version=c),l}},{test:[/msie|trident/i],describe:function(a){var l={name:"Internet Explorer"},c=i.default.getFirstMatch(/(?:msie |rv:)(\d+(\.?_?\d+)+)/i,a);return c&&(l.version=c),l}},{test:[/\sedg\//i],describe:function(a){var l={name:"Microsoft Edge"},c=i.default.getFirstMatch(/\sedg\/(\d+(\.?_?\d+)+)/i,a);return c&&(l.version=c),l}},{test:[/edg([ea]|ios)/i],describe:function(a){var l={name:"Microsoft Edge"},c=i.default.getSecondMatch(/edg([ea]|ios)\/(\d+(\.?_?\d+)+)/i,a);return c&&(l.version=c),l}},{test:[/vivaldi/i],describe:function(a){var l={name:"Vivaldi"},c=i.default.getFirstMatch(/vivaldi\/(\d+(\.?_?\d+)+)/i,a);return c&&(l.version=c),l}},{test:[/seamonkey/i],describe:function(a){var l={name:"SeaMonkey"},c=i.default.getFirstMatch(/seamonkey\/(\d+(\.?_?\d+)+)/i,a);return c&&(l.version=c),l}},{test:[/sailfish/i],describe:function(a){var l={name:"Sailfish"},c=i.default.getFirstMatch(/sailfish\s?browser\/(\d+(\.\d+)?)/i,a);return c&&(l.version=c),l}},{test:[/silk/i],describe:function(a){var l={name:"Amazon Silk"},c=i.default.getFirstMatch(/silk\/(\d+(\.?_?\d+)+)/i,a);return c&&(l.version=c),l}},{test:[/phantom/i],describe:function(a){var l={name:"PhantomJS"},c=i.default.getFirstMatch(/phantomjs\/(\d+(\.?_?\d+)+)/i,a);return c&&(l.version=c),l}},{test:[/slimerjs/i],describe:function(a){var l={name:"SlimerJS"},c=i.default.getFirstMatch(/slimerjs\/(\d+(\.?_?\d+)+)/i,a);return c&&(l.version=c),l}},{test:[/blackberry|\bbb\d+/i,/rim\stablet/i],describe:function(a){var l={name:"BlackBerry"},c=i.default.getFirstMatch(s,a)||i.default.getFirstMatch(/blackberry[\d]+\/(\d+(\.?_?\d+)+)/i,a);return c&&(l.version=c),l}},{test:[/(web|hpw)[o0]s/i],describe:function(a){var l={name:"WebOS Browser"},c=i.default.getFirstMatch(s,a)||i.default.getFirstMatch(/w(?:eb)?[o0]sbrowser\/(\d+(\.?_?\d+)+)/i,a);return c&&(l.version=c),l}},{test:[/bada/i],describe:function(a){var l={name:"Bada"},c=i.default.getFirstMatch(/dolfin\/(\d+(\.?_?\d+)+)/i,a);return c&&(l.version=c),l}},{test:[/tizen/i],describe:function(a){var l={name:"Tizen"},c=i.default.getFirstMatch(/(?:tizen\s?)?browser\/(\d+(\.?_?\d+)+)/i,a)||i.default.getFirstMatch(s,a);return c&&(l.version=c),l}},{test:[/qupzilla/i],describe:function(a){var l={name:"QupZilla"},c=i.default.getFirstMatch(/(?:qupzilla)[\s/](\d+(\.?_?\d+)+)/i,a)||i.default.getFirstMatch(s,a);return c&&(l.version=c),l}},{test:[/firefox|iceweasel|fxios/i],describe:function(a){var l={name:"Firefox"},c=i.default.getFirstMatch(/(?:firefox|iceweasel|fxios)[\s/](\d+(\.?_?\d+)+)/i,a);return c&&(l.version=c),l}},{test:[/electron/i],describe:function(a){var l={name:"Electron"},c=i.default.getFirstMatch(/(?:electron)\/(\d+(\.?_?\d+)+)/i,a);return c&&(l.version=c),l}},{test:[/MiuiBrowser/i],describe:function(a){var l={name:"Miui"},c=i.default.getFirstMatch(/(?:MiuiBrowser)[\s/](\d+(\.?_?\d+)+)/i,a);return c&&(l.version=c),l}},{test:[/chromium/i],describe:function(a){var l={name:"Chromium"},c=i.default.getFirstMatch(/(?:chromium)[\s/](\d+(\.?_?\d+)+)/i,a)||i.default.getFirstMatch(s,a);return c&&(l.version=c),l}},{test:[/chrome|crios|crmo/i],describe:function(a){var l={name:"Chrome"},c=i.default.getFirstMatch(/(?:chrome|crios|crmo)\/(\d+(\.?_?\d+)+)/i,a);return c&&(l.version=c),l}},{test:[/GSA/i],describe:function(a){var l={name:"Google Search"},c=i.default.getFirstMatch(/(?:GSA)\/(\d+(\.?_?\d+)+)/i,a);return c&&(l.version=c),l}},{test:function(a){var l=!a.test(/like android/i),c=a.test(/android/i);return l&&c},describe:function(a){var l={name:"Android Browser"},c=i.default.getFirstMatch(s,a);return c&&(l.version=c),l}},{test:[/playstation 4/i],describe:function(a){var l={name:"PlayStation 4"},c=i.default.getFirstMatch(s,a);return c&&(l.version=c),l}},{test:[/safari|applewebkit/i],describe:function(a){var l={name:"Safari"},c=i.default.getFirstMatch(s,a);return c&&(l.version=c),l}},{test:[/.*/i],describe:function(a){var l=a.search("\\(")!==-1?/^(.*)\/(.*)[ \t]\((.*)/:/^(.*)\/(.*) /;return{name:i.default.getFirstMatch(l,a),version:i.default.getSecondMatch(l,a)}}}];e.default=o,t.exports=e.default},93:function(t,e,n){e.__esModule=!0,e.default=void 0;var r,i=(r=n(17))&&r.__esModule?r:{default:r},s=n(18),o=[{test:[/Roku\/DVP/],describe:function(a){var l=i.default.getFirstMatch(/Roku\/DVP-(\d+\.\d+)/i,a);return{name:s.OS_MAP.Roku,version:l}}},{test:[/windows phone/i],describe:function(a){var l=i.default.getFirstMatch(/windows phone (?:os)?\s?(\d+(\.\d+)*)/i,a);return{name:s.OS_MAP.WindowsPhone,version:l}}},{test:[/windows /i],describe:function(a){var l=i.default.getFirstMatch(/Windows ((NT|XP)( \d\d?.\d)?)/i,a),c=i.default.getWindowsVersionName(l);return{name:s.OS_MAP.Windows,version:l,versionName:c}}},{test:[/Macintosh(.*?) FxiOS(.*?)\//],describe:function(a){var l={name:s.OS_MAP.iOS},c=i.default.getSecondMatch(/(Version\/)(\d[\d.]+)/,a);return c&&(l.version=c),l}},{test:[/macintosh/i],describe:function(a){var l=i.default.getFirstMatch(/mac os x (\d+(\.?_?\d+)+)/i,a).replace(/[_\s]/g,"."),c=i.default.getMacOSVersionName(l),u={name:s.OS_MAP.MacOS,version:l};return c&&(u.versionName=c),u}},{test:[/(ipod|iphone|ipad)/i],describe:function(a){var l=i.default.getFirstMatch(/os (\d+([_\s]\d+)*) like mac os x/i,a).replace(/[_\s]/g,".");return{name:s.OS_MAP.iOS,version:l}}},{test:function(a){var l=!a.test(/like android/i),c=a.test(/android/i);return l&&c},describe:function(a){var l=i.default.getFirstMatch(/android[\s/-](\d+(\.\d+)*)/i,a),c=i.default.getAndroidVersionName(l),u={name:s.OS_MAP.Android,version:l};return c&&(u.versionName=c),u}},{test:[/(web|hpw)[o0]s/i],describe:function(a){var l=i.default.getFirstMatch(/(?:web|hpw)[o0]s\/(\d+(\.\d+)*)/i,a),c={name:s.OS_MAP.WebOS};return l&&l.length&&(c.version=l),c}},{test:[/blackberry|\bbb\d+/i,/rim\stablet/i],describe:function(a){var l=i.default.getFirstMatch(/rim\stablet\sos\s(\d+(\.\d+)*)/i,a)||i.default.getFirstMatch(/blackberry\d+\/(\d+([_\s]\d+)*)/i,a)||i.default.getFirstMatch(/\bbb(\d+)/i,a);return{name:s.OS_MAP.BlackBerry,version:l}}},{test:[/bada/i],describe:function(a){var l=i.default.getFirstMatch(/bada\/(\d+(\.\d+)*)/i,a);return{name:s.OS_MAP.Bada,version:l}}},{test:[/tizen/i],describe:function(a){var l=i.default.getFirstMatch(/tizen[/\s](\d+(\.\d+)*)/i,a);return{name:s.OS_MAP.Tizen,version:l}}},{test:[/linux/i],describe:function(){return{name:s.OS_MAP.Linux}}},{test:[/CrOS/],describe:function(){return{name:s.OS_MAP.ChromeOS}}},{test:[/PlayStation 4/],describe:function(a){var l=i.default.getFirstMatch(/PlayStation 4[/\s](\d+(\.\d+)*)/i,a);return{name:s.OS_MAP.PlayStation4,version:l}}}];e.default=o,t.exports=e.default},94:function(t,e,n){e.__esModule=!0,e.default=void 0;var r,i=(r=n(17))&&r.__esModule?r:{default:r},s=n(18),o=[{test:[/googlebot/i],describe:function(){return{type:"bot",vendor:"Google"}}},{test:[/huawei/i],describe:function(a){var l=i.default.getFirstMatch(/(can-l01)/i,a)&&"Nova",c={type:s.PLATFORMS_MAP.mobile,vendor:"Huawei"};return l&&(c.model=l),c}},{test:[/nexus\s*(?:7|8|9|10).*/i],describe:function(){return{type:s.PLATFORMS_MAP.tablet,vendor:"Nexus"}}},{test:[/ipad/i],describe:function(){return{type:s.PLATFORMS_MAP.tablet,vendor:"Apple",model:"iPad"}}},{test:[/Macintosh(.*?) FxiOS(.*?)\//],describe:function(){return{type:s.PLATFORMS_MAP.tablet,vendor:"Apple",model:"iPad"}}},{test:[/kftt build/i],describe:function(){return{type:s.PLATFORMS_MAP.tablet,vendor:"Amazon",model:"Kindle Fire HD 7"}}},{test:[/silk/i],describe:function(){return{type:s.PLATFORMS_MAP.tablet,vendor:"Amazon"}}},{test:[/tablet(?! pc)/i],describe:function(){return{type:s.PLATFORMS_MAP.tablet}}},{test:function(a){var l=a.test(/ipod|iphone/i),c=a.test(/like (ipod|iphone)/i);return l&&!c},describe:function(a){var l=i.default.getFirstMatch(/(ipod|iphone)/i,a);return{type:s.PLATFORMS_MAP.mobile,vendor:"Apple",model:l}}},{test:[/nexus\s*[0-6].*/i,/galaxy nexus/i],describe:function(){return{type:s.PLATFORMS_MAP.mobile,vendor:"Nexus"}}},{test:[/[^-]mobi/i],describe:function(){return{type:s.PLATFORMS_MAP.mobile}}},{test:function(a){return a.getBrowserName(!0)==="blackberry"},describe:function(){return{type:s.PLATFORMS_MAP.mobile,vendor:"BlackBerry"}}},{test:function(a){return a.getBrowserName(!0)==="bada"},describe:function(){return{type:s.PLATFORMS_MAP.mobile}}},{test:function(a){return a.getBrowserName()==="windows phone"},describe:function(){return{type:s.PLATFORMS_MAP.mobile,vendor:"Microsoft"}}},{test:function(a){var l=Number(String(a.getOSVersion()).split(".")[0]);return a.getOSName(!0)==="android"&&l>=3},describe:function(){return{type:s.PLATFORMS_MAP.tablet}}},{test:function(a){return a.getOSName(!0)==="android"},describe:function(){return{type:s.PLATFORMS_MAP.mobile}}},{test:function(a){return a.getOSName(!0)==="macos"},describe:function(){return{type:s.PLATFORMS_MAP.desktop,vendor:"Apple"}}},{test:function(a){return a.getOSName(!0)==="windows"},describe:function(){return{type:s.PLATFORMS_MAP.desktop}}},{test:function(a){return a.getOSName(!0)==="linux"},describe:function(){return{type:s.PLATFORMS_MAP.desktop}}},{test:function(a){return a.getOSName(!0)==="playstation 4"},describe:function(){return{type:s.PLATFORMS_MAP.tv}}},{test:function(a){return a.getOSName(!0)==="roku"},describe:function(){return{type:s.PLATFORMS_MAP.tv}}}];e.default=o,t.exports=e.default},95:function(t,e,n){e.__esModule=!0,e.default=void 0;var r,i=(r=n(17))&&r.__esModule?r:{default:r},s=n(18),o=[{test:function(a){return a.getBrowserName(!0)==="microsoft edge"},describe:function(a){if(/\sedg\//i.test(a))return{name:s.ENGINE_MAP.Blink};var l=i.default.getFirstMatch(/edge\/(\d+(\.?_?\d+)+)/i,a);return{name:s.ENGINE_MAP.EdgeHTML,version:l}}},{test:[/trident/i],describe:function(a){var l={name:s.ENGINE_MAP.Trident},c=i.default.getFirstMatch(/trident\/(\d+(\.?_?\d+)+)/i,a);return c&&(l.version=c),l}},{test:function(a){return a.test(/presto/i)},describe:function(a){var l={name:s.ENGINE_MAP.Presto},c=i.default.getFirstMatch(/presto\/(\d+(\.?_?\d+)+)/i,a);return c&&(l.version=c),l}},{test:function(a){var l=a.test(/gecko/i),c=a.test(/like gecko/i);return l&&!c},describe:function(a){var l={name:s.ENGINE_MAP.Gecko},c=i.default.getFirstMatch(/gecko\/(\d+(\.?_?\d+)+)/i,a);return c&&(l.version=c),l}},{test:[/(apple)?webkit\/537\.36/i],describe:function(){return{name:s.ENGINE_MAP.Blink}}},{test:[/(apple)?webkit/i],describe:function(a){var l={name:s.ENGINE_MAP.WebKit},c=i.default.getFirstMatch(/webkit\/(\d+(\.?_?\d+)+)/i,a);return c&&(l.version=c),l}}];e.default=o,t.exports=e.default}});var QR=Og(qR.exports);const Bn={Initialized:"initialized",DisplayURI:"display_uri",ProviderUpdate:"provider_update",ConnectWithResponse:"connectWithResponse",ConnectionStatus:"connection_status",ServiceStatus:"service_status"};class ei{constructor({shouldSetOnWindow:e,connectionStream:n,shouldSendMetadata:r=!1,shouldShimWeb3:i,sdkInstance:s}){const o=new l$({connectionStream:n,shouldSendMetadata:r,shouldSetOnWindow:e,shouldShimWeb3:i,autoRequestAccounts:!1}),a=new Proxy(o,{deleteProperty:()=>!0});if(this.provider=a,this.sdkInstance=s,e&&typeof window<"u")try{l=o,window.ethereum=l,window.dispatchEvent(new Event("ethereum#initialized"))}catch(c){X("[Ethereum] Unable to set global provider - window.ethereum may be read-only",c)}var l;if(i&&typeof window<"u")try{(function(c,u=console){let d=!1,f=!1;if(!window.web3){const h="__isMetaMaskShim__";let m={currentProvider:c};Object.defineProperty(m,h,{value:!0,enumerable:!0,configurable:!1,writable:!1}),m=new Proxy(m,{get:(g,w,...p)=>(w!=="currentProvider"||d?w==="currentProvider"||w===h||f||(f=!0,u.error("MetaMask no longer injects web3. For details, see: https://docs.metamask.io/guide/provider-migration.html#replacing-window-web3"),c.request({method:"metamask_logWeb3ShimUsage"}).catch(v=>{u.debug("MetaMask: Failed to log web3 shim usage.",v)})):(d=!0,u.warn("You are accessing the MetaMask window.web3.currentProvider shim. This property is deprecated; use window.ethereum instead. For details, see: https://docs.metamask.io/guide/provider-migration.html#replacing-window-web3")),Reflect.get(g,w,...p)),set:(...g)=>(u.warn("You are accessing the MetaMask window.web3 shim. This object is deprecated; use window.ethereum instead. For details, see: https://docs.metamask.io/guide/provider-migration.html#replacing-window-web3"),Reflect.set(...g))}),Object.defineProperty(window,"web3",{value:m,enumerable:!1,configurable:!0,writable:!0})}})(this.provider)}catch(c){X("[Ethereum] Unable to shim web3 - window.web3 may be read-only",c)}this.provider.on("display_uri",c=>{this.sdkInstance.emit(Bn.DisplayURI,c)}),this.provider.on("_initialized",()=>{const c={chainId:this.provider.getChainId(),isConnected:this.provider.isConnected(),isMetaMask:this.provider.isMetaMask,selectedAddress:this.provider.getSelectedAddress(),networkVersion:this.provider.getNetworkVersion()};this.sdkInstance.emit(Bn.Initialized,c),X("[Ethereum: constructor()] provider initialized",c)})}static init(e){var n;return X("[Ethereum: init()] Initializing Ethereum service"),this.instance=new ei(e),(n=this.instance)===null||n===void 0?void 0:n.provider}static destroy(){}static getInstance(){var e;if(!(!((e=this.instance)===null||e===void 0)&&e.provider))throw new Error("Ethereum instance not intiialized - call Ethereum.factory first.");return this.instance}static getProvider(){var e;if(!(!((e=this.instance)===null||e===void 0)&&e.provider))throw new Error("Ethereum instance not intiialized - call Ethereum.factory first.");return this.instance.provider}}class uf{constructor({useDeepLink:e,preferredOpenLink:n,debug:r=!1}){this.state={platformType:void 0,useDeeplink:!1,preferredOpenLink:void 0,debug:!1},this.state.platformType=this.getPlatformType(),this.state.useDeeplink=e,this.state.preferredOpenLink=n,this.state.debug=r}openDeeplink(e,n,r){return function(i,s,o,a){const{state:l}=i;X(`[PlatfformManager: openDeeplink()] universalLink --> ${s}`),X(`[PlatfformManager: openDeeplink()] deepLink --> ${o}`);try{if(l.preferredOpenLink)return void l.preferredOpenLink(l.useDeeplink?o:s,a);if(X(`[PlatfformManager: openDeeplink()] open link now useDeepLink=${l.useDeeplink} link=${l.useDeeplink?o:s}`),l.useDeeplink)typeof window<"u"&&(window.location.href=o);else if(typeof document<"u"){const c=document.createElement("a");c.href=s,c.target="_self",c.rel="noreferrer noopener",c.click()}}catch(c){console.log("[PlatfformManager: openDeeplink()] can't open link",c)}}(this,e,n,r)}isReactNative(){var e;return this.isNotBrowser()&&typeof window<"u"&&(window==null?void 0:window.navigator)&&((e=window.navigator)===null||e===void 0?void 0:e.product)==="ReactNative"}isMetaMaskInstalled(){return function(){const e=ei.getProvider()||(window==null?void 0:window.ethereum);return X(`[PlatfformManager: isMetaMaskInstalled()] isMetaMask=${e==null?void 0:e.isMetaMask} isConnected=${e==null?void 0:e.isConnected()}`),(e==null?void 0:e.isMetaMask)&&(e==null?void 0:e.isConnected())}()}isDesktopWeb(){return this.isBrowser()&&!this.isMobileWeb()}isMobile(){var e,n;const r=QR.parse(window.navigator.userAgent);return((e=r==null?void 0:r.platform)===null||e===void 0?void 0:e.type)==="mobile"||((n=r==null?void 0:r.platform)===null||n===void 0?void 0:n.type)==="tablet"}isSecure(){return this.isReactNative()||this.isMobileWeb()}isMetaMaskMobileWebView(){return typeof window<"u"&&!!window.ReactNativeWebView&&!!navigator.userAgent.endsWith("MetaMaskMobile")}isMobileWeb(){return this.state.platformType===an.MobileWeb}static isNotBrowser(){var e;return typeof window>"u"||!(window!=null&&window.navigator)||Cn!==void 0&&((e=Cn==null?void 0:Cn.navigator)===null||e===void 0?void 0:e.product)==="ReactNative"||(navigator==null?void 0:navigator.product)==="ReactNative"}isNotBrowser(){return uf.isNotBrowser()}static isBrowser(){return!this.isNotBrowser()}isBrowser(){return uf.isBrowser()}isNodeJS(){return this.isNotBrowser()&&!this.isReactNative()}isUseDeepLink(){return this.state.useDeeplink}getPlatformType(){return function(e){const{state:n}=e;return n.platformType?n.platformType:e.isReactNative()?an.ReactNative:e.isNotBrowser()?an.NonBrowser:e.isMetaMaskMobileWebView()?an.MetaMaskMobileWebview:e.isMobile()?an.MobileWeb:an.DesktopWeb}(this)}}const YR=t=>ne(void 0,void 0,void 0,function*(){if(uf.isBrowser()){const{StorageManagerWeb:n}=yield Promise.resolve().then(function(){return D$});return new n(t)}const e={persistChannelConfig:()=>ne(void 0,void 0,void 0,function*(){}),getPersistedChannelConfig:()=>ne(void 0,void 0,void 0,function*(){}),persistAccounts:()=>ne(void 0,void 0,void 0,function*(){}),getCachedAccounts:()=>ne(void 0,void 0,void 0,function*(){return[]}),persistChainId:()=>ne(void 0,void 0,void 0,function*(){}),getCachedChainId:()=>ne(void 0,void 0,void 0,function*(){}),terminate:()=>ne(void 0,void 0,void 0,function*(){})};return Promise.resolve(e)});class l$ extends s${constructor({connectionStream:e,shouldSendMetadata:n,autoRequestAccounts:r=!1}){super(e,{logger:console,maxEventListeners:100,shouldSendMetadata:n}),this.state={accounts:null,autoRequestAccounts:!1,providerStateRequested:!1,chainId:"",networkVersion:""},X(`[SDKProvider: constructor()] autoRequestAccounts=${r}`),this.state.autoRequestAccounts=r}forceInitializeState(){return ne(this,void 0,void 0,function*(){return X(`[SDKProvider: forceInitializeState()] autoRequestAccounts=${this.state.autoRequestAccounts}`),this._initializeStateAsync()})}_setConnected(){X("[SDKProvider: _setConnected()] Setting connected state"),this._state.isConnected=!0}getState(){return this._state}getSDKProviderState(){return this.state}getSelectedAddress(){var e;const{accounts:n}=this._state;return n&&n.length!==0?((e=n[0])===null||e===void 0?void 0:e.toLowerCase())||"":(X("[SDKProvider: getSelectedAddress] No accounts found"),null)}getChainId(){return this.state.chainId}getNetworkVersion(){return this.state.networkVersion}setSDKProviderState(e){this.state=Object.assign(Object.assign({},this.state),e)}handleAccountsChanged(e,n){return this._handleAccountsChanged(e,n)}handleDisconnect({terminate:e=!1}){(function({terminate:n=!1,instance:r}){const{state:i}=r;X(`[SDKProvider: handleDisconnect()] cleaning up provider state terminate=${n}`,r),n&&(r._state.accounts=null,r._state.isUnlocked=!1,r._state.isPermanentlyDisconnected=!0,r._state.initialized=!1),r._handleAccountsChanged([]),r._state.isConnected=!1,r.emit("disconnect",zR.ethErrors.provider.disconnected()),i.providerStateRequested=!1})({terminate:e,instance:this})}_initializeStateAsync(){return ne(this,void 0,void 0,function*(){return function(e){var n,r;return ne(this,void 0,void 0,function*(){e.state===void 0&&(e.state={accounts:null,autoRequestAccounts:!1,providerStateRequested:!1,chainId:""});const{state:i}=e;let s;if(i.providerStateRequested)X("[SDKProvider: initializeStateAsync()] initialization already in progress");else{let o;i.providerStateRequested=!0;let a=null,l=!1,c=!1;const u=yield YR({enabled:!0});if(u){const d=yield u.getPersistedChannelConfig({});l=(n=d==null?void 0:d.relayPersistence)!==null&&n!==void 0&&n,o=yield u.getCachedChainId();const f=yield u.getCachedAccounts();f.length>0&&(a=f[0])}if(X(`[SDKProvider: initializeStateAsync()] relayPersistence=${l}`,{relayPersistence:l,cachedChainId:o,cachedSelectedAddress:a}),l)if(o&&a)s={accounts:[a],chainId:o,isUnlocked:!1},c=!0;else try{s=yield e.request({method:"metamask_getProviderState"})}catch(d){return e._log.error("MetaMask: Failed to get initial state. Please report this bug.",d),void(i.providerStateRequested=!1)}if(((r=s==null?void 0:s.accounts)===null||r===void 0?void 0:r.length)===0)if(e.getSelectedAddress())s.accounts=[e.getSelectedAddress()];else{X("[SDKProvider: initializeStateAsync()] Fetch accounts remotely.");const d=yield e.request({method:"eth_requestAccounts",params:[]});s.accounts=d}e._initializeState(s),i.providerStateRequested=!1,c&&(e._state.isConnected=!0,e.emit("connect",{chainId:s==null?void 0:s.chainId}))}})}(this)})}_initializeState(e){return X("[SDKProvider: _initializeState()]",e),function(n,r,i){return X("[SDKProvider: initializeState()] set state._initialized to false"),n._state.initialized=!1,r(i)}(this,super._initializeState.bind(this),e)}_handleChainChanged({chainId:e,networkVersion:n}={}){this.state.chainId=e,this.state.networkVersion=n,function({instance:r,chainId:i,networkVersion:s,superHandleChainChanged:o}){X(`[SDKProvider: handleChainChanged()] chainId=${i} networkVersion=${s}`);let a=s;s||(X("[SDKProvider: handleChainChanged()] forced network version to prevent provider error"),a="1"),i!==mC&&(vt.analytics.track("sdk_used_chain",{caip_chain_id:`eip155:${parseInt(i??"0x1",16)}`}),mC=i),r._state.isConnected=!0,r.emit("connect",{chainId:i}),o({chainId:i,networkVersion:a})}({instance:this,chainId:e,networkVersion:n,superHandleChainChanged:super._handleChainChanged.bind(this)})}}var df,pl={name:"@metamask/sdk",version:"0.33.0",description:"",homepage:"https://github.com/MetaMask/metamask-sdk#readme",bugs:{url:"https://github.com/MetaMask/metamask-sdk/issues"},repository:{type:"git",url:"https://github.com/MetaMask/metamask-sdk",directory:"packages/sdk"},main:"dist/node/cjs/metamask-sdk.js",module:"dist/browser/es/metamask-sdk.js",browser:"dist/browser/es/metamask-sdk.js",unpkg:"dist/browser/umd/metamask-sdk.js","react-native":"dist/react-native/es/metamask-sdk.js",types:"dist/types/src/index.d.ts",sideEffects:!1,files:["/dist"],scripts:{"build:types":"tsc --project tsconfig.build.json --emitDeclarationOnly --outDir dist/types",build:"yarn build:types && rollup -c --bundleConfigAsCjs","build:clean":"yarn clean && yarn build","build:post-tsc":"echo 'N/A'","build:pre-tsc":"echo 'N/A'",typecheck:"tsc --noEmit",clean:"rimraf ./dist",size:"node bundle-size && size-limit",lint:"yarn lint:eslint && yarn lint:misc --check","lint:changelog":"../../scripts/validate-changelog.sh @metamask/sdk","lint:eslint":"eslint . --cache --ext js,ts","lint:fix":"yarn lint:eslint --fix && yarn lint:misc --write","lint:misc":"prettier '**/*.json' '**/*.md' '!CHANGELOG.md' --ignore-path ../../.gitignore",prepack:"../../scripts/prepack.sh","publish:preview":"yarn npm publish --tag preview",reset:"yarn clean && rimraf ./node_modules/",test:'jest --testPathIgnorePatterns "/e2e/"',"test:coverage":'jest --coverage --testPathIgnorePatterns "/e2e/"',"test:e2e":'jest --testPathPattern "/e2e/"',"test:ci":'jest --coverage --passWithNoTests --setupFilesAfterEnv ./jest-preload.js --testPathIgnorePatterns "/e2e/"',"test:dev":'jest -c ./jest.config.ts --detectOpenHandles  --testPathIgnorePatterns "/e2e/"',watch:"rollup -c -w",dev:'concurrently "tsc --watch" "rollup -c -w --bundleConfigAsCjs"',"build:dev":"yarn build:types && NODE_ENV=dev rollup -c --bundleConfigAsCjs"},dependencies:{"@babel/runtime":"^7.26.0","@metamask/onboarding":"^1.0.1","@metamask/providers":"16.1.0","@metamask/sdk-analytics":"workspace:*","@metamask/sdk-communication-layer":"workspace:*","@metamask/sdk-install-modal-web":"workspace:*","@paulmillr/qr":"^0.2.1",bowser:"^2.9.0","cross-fetch":"^4.0.0",debug:"^4.3.4",eciesjs:"^0.4.11","eth-rpc-errors":"^4.0.3",eventemitter2:"^6.4.9","obj-multiplex":"^1.0.0",pump:"^3.0.0","readable-stream":"^3.6.2","socket.io-client":"^4.5.1",tslib:"^2.6.0",util:"^0.12.4",uuid:"^8.3.2"},devDependencies:{"@jest/globals":"^29.3.1","@lavamoat/allow-scripts":"^2.3.1","@metamask/auto-changelog":"3.1.0","@metamask/eslint-config":"^6.0.0","@metamask/eslint-config-nodejs":"^6.0.0","@metamask/eslint-config-typescript":"^6.0.0","@react-native-async-storage/async-storage":"^1.19.6","@rollup/plugin-alias":"^5.1.1","@rollup/plugin-commonjs":"^25.0.7","@rollup/plugin-json":"^6.0.0","@rollup/plugin-node-resolve":"^15.0.2","@rollup/plugin-replace":"^6.0.1","@rollup/plugin-terser":"^0.4.1","@size-limit/preset-big-lib":"^11.0.2","@types/dom-screen-wake-lock":"^1.0.2","@types/node":"^20.1.3","@types/pump":"^1.1.1","@types/qrcode-terminal":"^0.12.0","@types/uuid":"^10.0.0","@typescript-eslint/eslint-plugin":"^4.26.0","@typescript-eslint/parser":"^4.26.0","browserify-zlib":"^0.2.0",buffer:"^6.0.3",concurrently:"^9.1.2","crypto-browserify":"^3.12.0",eslint:"^7.30.0","eslint-config-prettier":"^8.3.0","eslint-plugin-import":"^2.23.4","eslint-plugin-jest":"^24.4.0","eslint-plugin-jsdoc":"^36.1.0","eslint-plugin-node":"^11.1.0","eslint-plugin-prettier":"^3.4.0","https-browserify":"^1.0.0",jest:"^29.3.1","jest-environment-jsdom":"^29.3.1",prettier:"^2.3.0",process:"^0.11.10",rimraf:"^4.4.0",rollup:"^4.26.0","rollup-plugin-analyzer":"^4.0.0","rollup-plugin-jscc":"^2.0.0","rollup-plugin-natives":"^0.7.5","rollup-plugin-node-builtins":"^2.1.2","rollup-plugin-polyfill-node":"^0.13.0","rollup-plugin-sizes":"^1.0.6","rollup-plugin-typescript2":"^0.31.2","rollup-plugin-visualizer":"^5.12.0","size-limit":"^11.0.2","stream-browserify":"^3.0.0","stream-http":"^3.2.0","ts-jest":"^29.0.3","ts-node":"^10.9.1",typescript:"^4.3.2",url:"^0.11.0",webpack:"^5.0.0"},publishConfig:{access:"public",registry:"https://registry.npmjs.org/"},lavamoat:{allowScripts:{"eciesjs>secp256k1":!1,"socket.io-client>engine.io-client>ws>bufferutil":!1,"socket.io-client>engine.io-client>ws>utf-8-validate":!1,"@metamask/sdk-communication-layer>bufferutil":!1,"@metamask/sdk-communication-layer>eciesjs>secp256k1":!1,"@metamask/sdk-communication-layer>utf-8-validate":!1}}};(function(t){t.INPAGE="metamask-inpage",t.CONTENT_SCRIPT="metamask-contentscript",t.PROVIDER="metamask-provider"})(df||(df={}));const yC="direct",ff="https://metamask.app.link/connect",hf="metamask://connect",vC={NAME:"MetaMask",RDNS:["io.metamask","io.metamask.flask"]},c$=/(?:^[a-f0-9]{8}-[a-f0-9]{4}-4[a-f0-9]{3}-[a-f0-9]{4}-[a-f0-9]{12}$)|(?:^0{8}-0{4}-0{4}-0{4}-0{12}$)/u,Se={METAMASK_GETPROVIDERSTATE:"metamask_getProviderState",METAMASK_CONNECTSIGN:"metamask_connectSign",METAMASK_CONNECTWITH:"metamask_connectWith",METAMASK_OPEN:"metamask_open",METAMASK_BATCH:"metamask_batch",PERSONAL_SIGN:"personal_sign",WALLET_REQUESTPERMISSIONS:"wallet_requestPermissions",WALLET_REVOKEPERMISSIONS:"wallet_revokePermissions",WALLET_GETPERMISSIONS:"wallet_getPermissions",WALLET_WATCHASSET:"wallet_watchAsset",WALLET_ADDETHEREUMCHAIN:"wallet_addEthereumChain",WALLET_SWITCHETHETHEREUMCHAIN:"wallet_switchEthereumChain",ETH_REQUESTACCOUNTS:"eth_requestAccounts",ETH_ACCOUNTS:"eth_accounts",ETH_CHAINID:"eth_chainId",ETH_SENDTRANSACTION:"eth_sendTransaction",ETH_SIGNTYPEDDATA:"eth_signTypedData",ETH_SIGNTYPEDDATA_V3:"eth_signTypedData_v3",ETH_SIGNTYPEDDATA_V4:"eth_signTypedData_v4",ETH_SIGNTRANSACTION:"eth_signTransaction",ETH_SIGN:"eth_sign",PERSONAL_EC_RECOVER:"personal_ecRecover"},pf={[Se.ETH_REQUESTACCOUNTS]:!0,[Se.ETH_SENDTRANSACTION]:!0,[Se.ETH_SIGNTRANSACTION]:!0,[Se.ETH_SIGN]:!0,[Se.PERSONAL_SIGN]:!0,[Se.ETH_ACCOUNTS]:!1,[Se.ETH_CHAINID]:!1,[Se.PERSONAL_SIGN]:!0,[Se.ETH_SIGNTYPEDDATA]:!0,[Se.ETH_SIGNTYPEDDATA_V3]:!0,[Se.ETH_SIGNTYPEDDATA_V4]:!0,[Se.WALLET_REQUESTPERMISSIONS]:!0,[Se.WALLET_GETPERMISSIONS]:!0,[Se.WALLET_WATCHASSET]:!0,[Se.WALLET_ADDETHEREUMCHAIN]:!0,[Se.WALLET_SWITCHETHETHEREUMCHAIN]:!0,[Se.METAMASK_CONNECTSIGN]:!0,[Se.METAMASK_CONNECTWITH]:!0,[Se.PERSONAL_EC_RECOVER]:!0,[Se.METAMASK_BATCH]:!0,[Se.METAMASK_OPEN]:!0},u$=Object.keys(pf).filter(t=>pf[t]===!0).map(t=>t.toLowerCase()),JR=["eth_signTypedData","eth_signTypedData_v3","eth_signTypedData_v4","eth_sign"].map(t=>t.toLowerCase()),Ay=".sdk-comm",$0="providerType",Bw=".MMSDK_cached_address",Dw=".MMSDK_cached_chainId",ai={CHAIN_CHANGED:"chainChanged",ACCOUNTS_CHANGED:"accountsChanged",DISCONNECT:"disconnect",CONNECT:"connect",CONNECTED:"connected"},d$=1e6;var Bi;(function(t){t.TERMINATE="terminate",t.EXTENSION="extension",t.INITIALIZED="initialized"})(Bi||(Bi={}));const f$=typeof window<"u"&&window.localStorage;function h$({instance:t,msg:e}){return ne(this,void 0,void 0,function*(){if(t._initialized||(X("[MetaMaskSDK: connectAndSign()] provider not ready -- wait for init()"),yield t.init()),X(`[MetaMaskSDK: connectAndSign()] activeProvider=${t.activeProvider}`),!t.activeProvider)throw new Error("SDK state invalid -- undefined provider");const n=/^0x([0-9A-Fa-f]{2})*$/u.test(e)?e:function(r){let i;if(re!==void 0)i=re.from(r,"utf8").toString("hex");else if(typeof TextEncoder<"u"){const s=new TextEncoder().encode(r);i=Array.from(s).map(o=>o.toString(16).padStart(2,"0")).join("")}else{if(typeof Cn!="object"||!("Buffer"in Cn))throw new Error("Unable to convert string to hex: No available method.");i=Cn.Buffer.from(r,"utf8").toString("hex")}return`0x${i}`}(e);return t.activeProvider.request({method:Se.METAMASK_CONNECTWITH,params:[{method:Se.PERSONAL_SIGN,params:[n]}]})})}function wC(t){var e,n;return ne(this,void 0,void 0,function*(){X("[MetaMaskSDK: connectWithExtensionProvider()] ",t),t.sdkProvider=t.activeProvider,t.activeProvider=window.extension,window.ethereum=window.extension;try{const r=yield(e=window.extension)===null||e===void 0?void 0:e.request({method:"eth_requestAccounts"});X(`[MetaMaskSDK: connectWithExtensionProvider()] accounts=${r}`)}catch(r){return void console.warn("[MetaMaskSDK: connectWithExtensionProvider()] can't request accounts error",r)}localStorage.setItem($0,"extension"),t.extensionActive=!0,t.emit(Bn.ProviderUpdate,Bi.EXTENSION),t.options.enableAnalytics&&((n=t.analytics)===null||n===void 0||n.send({event:Et.SDK_USE_EXTENSION}))})}function U0(t){let e;if(re!==void 0)e=re.from(t,"utf8").toString("base64");else if(typeof btoa=="function")e=btoa(encodeURIComponent(t).replace(/%([0-9A-F]{2})/gu,(n,r)=>String.fromCharCode(parseInt(r,16))));else{if(typeof Cn!="object"||!("Buffer"in Cn))throw new Error("Unable to base64 encode: No available method.");e=Cn.Buffer.from(t,"utf8").toString("base64")}return e}function p$(t,e,n,r){var i,s,o,a,l,c,u,d,f,h,m,g,w,p,v,y,x,T,B,j;return ne(this,void 0,void 0,function*(){const M=(i=t.state.remote)===null||i===void 0?void 0:i.isReady(),K=(s=t.state.remote)===null||s===void 0?void 0:s.isConnected(),U=(o=t.state.remote)===null||o===void 0?void 0:o.isPaused(),W=ei.getProvider(),z=(a=t.state.remote)===null||a===void 0?void 0:a.getChannelId(),$=(l=t.state.remote)===null||l===void 0?void 0:l.isAuthorized(),{deeplinkProtocol:N}=t.state,{method:C,data:O,triggeredInstaller:D}=(I=>{var A,S,P,R;let L;re.isBuffer(I)?(L=I.toJSON(),L._isBuffer=!0):L=I;const F=(A=L==null?void 0:L.data)===null||A===void 0?void 0:A.method;let V=!1;return typeof((S=L==null?void 0:L.data)===null||S===void 0?void 0:S.params)=="object"&&((R=(P=L==null?void 0:L.data)===null||P===void 0?void 0:P.params)===null||R===void 0?void 0:R.__triggeredInstaller)===!0&&(V=!0,L.data.params=L.data.params.wrappedParams),{method:F,data:L,triggeredInstaller:V}})(e);if(X(`[RCPMS: write()] method='${C}' isRemoteReady=${M} channelId=${z} isSocketConnected=${K} isRemotePaused=${U} providerConnected=${W.isConnected()}`,e),!z)return C!==Se.METAMASK_GETPROVIDERSTATE&&X(`[RCPMS: write()] ${C} --> channelId is undefined`),r(new Error("disconnected"));X(`[RCPMS: write()] remote.isPaused()=${(c=t.state.remote)===null||c===void 0?void 0:c.isPaused()} authorized=${$} ready=${M} socketConnected=${K}`,e);const b=(u=t.state.platformManager)===null||u===void 0?void 0:u.isSecure(),E=(f=(d=t.state.platformManager)===null||d===void 0?void 0:d.isMobileWeb())!==null&&f!==void 0&&f,_=(m=(h=t.state.remote)===null||h===void 0?void 0:h.hasDeeplinkProtocol())!==null&&m!==void 0&&m&&E&&$;try{if(!D){const S=JSON.stringify(O==null?void 0:O.data);if(S.length>d$)return r(new Error(`Message size ${S.length} exceeds maximum allowed size of 1000000 bytes`));(g=t.state.remote)===null||g===void 0||g.sendMessage(O==null?void 0:O.data).then(()=>{X(`[RCPMS: _write()] ${C} sent successfully`)}).catch(P=>{X("[RCPMS: _write()] error sending message",P)})}if(!b)return X(`[RCPMS: _write()] unsecure platform for method ${C} -- return callback`),r();if(D)return X("[RCPMS: _write()] prevent deeplink -- installation completed separately."),r();const I=(v=(p=(w=t.state.remote)===null||w===void 0?void 0:w.getKeyInfo())===null||p===void 0?void 0:p.ecies.public)!==null&&v!==void 0?v:"";let A=encodeURI(`channelId=${z}&pubkey=${I}&comm=socket&t=d&v=2`);if(_){const S=JSON.stringify(O==null?void 0:O.data),P=(y=t.state.remote)===null||y===void 0?void 0:y.encrypt(S);if(!P)return X("[RCPMS: _write()] error encrypting message"),r(new Error("RemoteCommunicationPostMessageStream - disconnected"));A+=`&scheme=${N}&rpc=${U0(P)}`}if(!(!((x=t.state.platformManager)===null||x===void 0)&&x.isMetaMaskInstalled()))return X("[RCPMS: _write()] prevent deeplink until installation is completed."),r();pf[C]?(X(`[RCPMS: _write()] redirect link for '${C}' socketConnected=${K} connect?${A}`),(T=t.state.platformManager)===null||T===void 0||T.openDeeplink(`${ff}?${A}`,`${hf}?${A}`,"_self")):!((B=t.state.remote)===null||B===void 0)&&B.isPaused()?(X(`[RCPMS: _write()] MM is PAUSED! deeplink with connect! targetMethod=${C}`),(j=t.state.platformManager)===null||j===void 0||j.openDeeplink(`${ff}?redirect=true&${A}`,`${hf}?redirect=true&${A}`,"_self")):X(`[RCPMS: _write()] method ${C} doesn't need redirect.`)}catch(I){return X("[RCPMS: _write()] error sending message",I),r(new Error("RemoteCommunicationPostMessageStream - disconnected"))}return r()})}class g$ extends vu.Duplex{constructor({name:e,remote:n,deeplinkProtocol:r,platformManager:i}){super({objectMode:!0}),this.state={_name:null,remote:null,deeplinkProtocol:!1,platformManager:null},this.state._name=e,this.state.remote=n,this.state.deeplinkProtocol=r,this.state.platformManager=i,this._onMessage=this._onMessage.bind(this),this.state.remote.on(ae.MESSAGE,this._onMessage)}_write(e,n,r){return ne(this,void 0,void 0,function*(){return p$(this,e,0,r)})}_read(){}_onMessage(e){return function(n,r){try{if(X("[RCPMS: onMessage()] message",r),!r||typeof r!="object"||typeof(r==null?void 0:r.data)!="object")return;if(!(r!=null&&r.name))return void X("[RCPMS: onMessage()] ignore message without name",r);if((r==null?void 0:r.name)!==df.PROVIDER)return void X(`[RCPMS: onMessage()] ignore message with wrong name message=${r}`);if(re.isBuffer(r)){const i=re.from(r);n.push(i)}else n.push(r)}catch(i){X(`[RCPMS: onMessage()] ignore message error err=${i}`)}}(this,e)}start(){}}let bC=1;const ZR=t=>new Promise(e=>{setTimeout(()=>{e(!0)},t)}),m$=({checkInstallationOnAllCalls:t=!1,communicationLayerPreference:e,injectProvider:n,shouldShimWeb3:r,platformManager:i,installer:s,sdk:o,remoteConnection:a,debug:l})=>ne(void 0,void 0,void 0,function*(){var c,u;const d=(({name:U,remoteConnection:W})=>{if(!W||!(W!=null&&W.getConnector()))throw new Error("Missing remote connection parameter");return new g$({name:U,remote:W==null?void 0:W.getConnector(),deeplinkProtocol:W==null?void 0:W.state.deeplinkProtocol,platformManager:W==null?void 0:W.getPlatformManager()})})({name:df.INPAGE,target:df.CONTENT_SCRIPT,remoteConnection:a}),f=i.getPlatformType(),h=o.options.dappMetadata,m=`Sdk/Javascript SdkVersion/${pl.version} Platform/${f} dApp/${(c=h.url)!==null&&c!==void 0?c:h.name} dAppTitle/${h.name}`;let g=null,w=null;const p=(u=o.options.storage)===null||u===void 0?void 0:u.storageManager;if(p){try{const U=yield p.getCachedAccounts();U.length>0&&(g=U[0])}catch(U){console.error(`[initializeMobileProvider] failed to get cached addresses: ${U}`)}try{const U=yield p.getCachedChainId();U&&(w=U)}catch(U){console.error(`[initializeMobileProvider] failed to parse cached chainId: ${U}`)}}X(`[initializeMobileProvider] cachedAccountAddress: ${g}, cachedChainId: ${w}`);const v=!(!n||f===an.NonBrowser||f===an.ReactNative),y=ei.init({shouldSetOnWindow:v,connectionStream:d,shouldShimWeb3:r,sdkInstance:o});let x=!1;const T=U=>{x=U},B=()=>x,j=(U,W,z,$)=>ne(void 0,void 0,void 0,function*(){var N,C,O,D,b,E,_,I,A;const S=ei.getProvider();if(x){S.emit("display_uri",(a==null?void 0:a.state.qrcodeLink)||""),a==null||a.showActiveModal();let ie=B();for(;ie;){const le=B(),he=a==null?void 0:a.isAuthorized();ie=le&&!he,X(`[initializeMobileProvider: sendRequest()] waiting for initialization to complete - initializing: ${le} authorized: ${he}`),yield ZR(1e3)}return X("[initializeMobileProvider: sendRequest()] initial method completed -- prevent installation and call provider"),z(...W)}const P=i.isMetaMaskInstalled(),R=a==null?void 0:a.isConnected();let L=null,F=null,V=null;if(L=(N=S.getSelectedAddress())!==null&&N!==void 0?N:g,V=S.getChainId()||w,L&&p&&L!==g&&p.persistAccounts([L]).catch(ie=>{console.error(`[initializeMobileProvider] failed to persist account: ${ie}`)}),V&&(w=V,p&&p.persistChainId(V).catch(ie=>{console.error(`[initializeMobileProvider] failed to persist chainId: ${ie}`)})),X("[initializeMobileProvider: sendRequest()]",{selectedAddress:L,chainId:V}),$&&X(`[initializeMobileProvider: sendRequest()] method=${U} ongoing=${x} selectedAddress=${L} isInstalled=${P} checkInstallationOnAllCalls=${t} socketConnected=${R}`),L&&U.toLowerCase()===Se.ETH_ACCOUNTS.toLowerCase())return[L];if(V&&U.toLowerCase()===Se.ETH_CHAINID.toLowerCase())return V;const q=[Se.ETH_REQUESTACCOUNTS,Se.WALLET_REQUESTPERMISSIONS,Se.METAMASK_CONNECTSIGN,Se.METAMASK_CONNECTWITH],Y=!pf[U],te=(C=o.options.readonlyRPCMap)===null||C===void 0?void 0:C[V];if(te&&Y)try{const ie=(O=W==null?void 0:W[0])===null||O===void 0?void 0:O.params,le=yield(({rpcEndpoint:he,method:Ee,sdkInfo:de,params:pe})=>ne(void 0,void 0,void 0,function*(){const Ae=JSON.stringify({jsonrpc:"2.0",method:Ee,params:pe,id:(bC+=1,bC)}),be={Accept:"application/json","Content-Type":"application/json"};let Le;he.includes("infura")&&(be["Metamask-Sdk-Info"]=de);try{Le=yield rP(he,{method:"POST",headers:be,body:Ae})}catch(Ke){throw Ke instanceof Error?new Error(`Failed to fetch from RPC: ${Ke.message}`):new Error(`Failed to fetch from RPC: ${Ke}`)}if(!Le.ok)throw new Error(`Server responded with a status of ${Le.status}`);return(yield Le.json()).result}))({rpcEndpoint:te,sdkInfo:m,method:U,params:ie||[]});return $&&X(`initializeProvider::ReadOnlyRPCResponse ${le}`),le}catch(ie){console.warn(`[initializeMobileProvider: sendRequest()] method=${U} readOnlyRPCRequest failed:`,ie)}if((!P||P&&!R)&&U!==Se.METAMASK_GETPROVIDERSTATE){const ie=((D=W==null?void 0:W[0])===null||D===void 0?void 0:D.params)||[];if(q.indexOf(U)!==-1||t){T(!0);const le=U===Se.METAMASK_CONNECTWITH,he=`${Date.now()}`;try{yield s.start({wait:!1,connectWith:le?{method:U,id:he,params:ie}:void 0}),yield new Promise((Ee,de)=>{a!=null&&a.isAuthorized()&&(X("[initializeMobileProvider: sendRequest()] already authorized"),Ee(!0)),a==null||a.getConnector().once(ae.AUTHORIZED,()=>{Ee(!0)}),o.once(ae.PROVIDER_UPDATE,pe=>{X(`[initializeMobileProvider: sendRequest()] PROVIDER_UPDATE --- remote provider request interupted type=${pe}`),pe===Bi.EXTENSION?de(ae.PROVIDER_UPDATE):de(new Error("Connection Terminated"))})})}catch(Ee){if(Bi.EXTENSION===Ee){if(X(`[initializeMobileProvider: sendRequest()] extension provider detect: re-create ${U} on the active provider`),U.toLowerCase()===Se.METAMASK_CONNECTSIGN.toLowerCase()){const de=yield(b=o.getProvider())===null||b===void 0?void 0:b.request({method:Se.ETH_REQUESTACCOUNTS,params:[]});if(!de.length)throw new Error("SDK state invalid -- undefined accounts");const pe=yield(E=o.getProvider())===null||E===void 0?void 0:E.request({method:Se.PERSONAL_SIGN,params:[ie[0],de[0]]});return o.emit(Bn.ConnectWithResponse,pe),pe}if(U.toLowerCase()===Se.METAMASK_CONNECTWITH.toLowerCase()){const[de]=ie,pe=yield(({method:Ae,sdk:be,params:Le})=>ne(void 0,void 0,void 0,function*(){var Ke,xe,Oe,Ue;if(!be.isExtensionActive())throw new Error("SDK state invalid -- extension is not active");X("[MetaMaskProvider: extensionConnectWithOverwrite()] Overwriting request method",Ae,Le);const Tt=yield(Ke=be.getProvider())===null||Ke===void 0?void 0:Ke.request({method:Se.ETH_REQUESTACCOUNTS,params:[]});if(!Tt.length)throw new Error("SDK state invalid -- undefined accounts");if((Ae==null?void 0:Ae.toLowerCase())===Se.PERSONAL_SIGN.toLowerCase()){const lr={method:Ae,params:[Le[0],Tt[0]]};return yield(xe=be.getProvider())===null||xe===void 0?void 0:xe.request(lr)}if((Ae==null?void 0:Ae.toLowerCase())===Se.ETH_SENDTRANSACTION.toLowerCase()){const lr={method:Ae,params:[Object.assign(Object.assign({},Le[0]),{from:Tt[0]})]};return yield(Oe=be.getProvider())===null||Oe===void 0?void 0:Oe.request(lr)}return JR.includes(Ae.toLowerCase())?(console.warn(`MetaMaskSDK connectWith method=${Ae} -- not handled by the extension -- call separately`),Tt):yield(Ue=be.getProvider())===null||Ue===void 0?void 0:Ue.request({method:Ae,params:Le})}))({method:de.method,sdk:o,params:de.params});return o.emit(Bn.ConnectWithResponse,pe),pe}return X(`[initializeMobileProvider: sendRequest()] sending '${U}' on active provider`,ie),yield(_=o.getProvider())===null||_===void 0?void 0:_.request({method:U,params:ie})}throw Ee===ae.REJECTED?(a==null||a.closeModal(),(I=o.getProvider())===null||I===void 0||I.handleDisconnect({terminate:!1}),Object.assign(new Error("User rejected connection"),{code:4001})):(X(`[initializeMobileProvider: sendRequest()] failed to start installer: ${Ee}`),Ee)}finally{T(!1)}if(U===Se.ETH_REQUESTACCOUNTS)return F=yield new Promise(Ee=>{const de=setInterval(()=>{const{accounts:pe}=S.getState();pe&&(clearInterval(de),Ee(pe))},100)}),X(`[initializeMobileProvider: sendRequest()] selectedAddress: ${L} --- SKIP rpc call`),F;if(U===Se.METAMASK_CONNECTWITH)try{let Ee=0;const de=5,pe=({resolve:Ke,reject:xe})=>{Ee+=1;const Oe=a==null?void 0:a.getConnector().getRPCMethodTracker(),Ue=Oe==null?void 0:Oe[he];return X(`TRACKER: update method ${he}`,Ue),Ue!=null&&Ue.result?(X("[initializeMobileProvider: sendRequest()] found result",Ue.result),o.emit(Bn.ConnectWithResponse,Ue.result),void Ke(Ue.result)):Ue!=null&&Ue.error?(X("[initializeMobileProvider: sendRequest()] found error",Ue.error),void xe(Ue.error)):Ee>=de?(X("[initializeMobileProvider: sendRequest()] max message count reached without result"),void xe(new Error("Max message count reached without result"))):void X("[initializeMobileProvider: sendRequest()] not found yet, need to wait for next update")};let Ae,be;const Le=yield new Promise((Ke,xe)=>{const Oe=a==null?void 0:a.getConnector().getRPCMethodTracker();X(`TRACKER: method ${he}`,Oe),Oe!=null&&Oe[he].result?(X("[initializeMobileProvider: sendRequest()] found result",Oe==null?void 0:Oe[he].result),Ke(Oe==null?void 0:Oe[he].result)):Oe!=null&&Oe[he].error&&(X("[initializeMobileProvider: sendRequest()] found error",Oe==null?void 0:Oe[he].error),xe(Oe==null?void 0:Oe[he].error)),be=()=>pe({resolve:Ke,reject:xe}),Ae=a==null?void 0:a.getConnector().on(ae.RPC_UPDATE,be)});return be&&(Ae==null||Ae.off(ae.RPC_UPDATE,be)),X("TRACKER: result",Le),Le}catch(Ee){throw X("[initializeMobileProvider: sendRequest()] error:",Ee),Ee}return W[0]&&typeof W[0]=="object"&&(W[0].params={__triggeredInstaller:!0,wrappedParams:W[0].params}),z(...W)}if(i.isSecure()&&pf[U])return z(...W);if(o.isExtensionActive())return X(`[initializeMobileProvider: sendRequest()] EXTENSION active - redirect request '${U}' to it`,W,ie),yield(A=o.getProvider())===null||A===void 0?void 0:A.request({method:U,params:ie});throw X(`[initializeMobileProvider: sendRequest()] method=${U} --- skip --- not connected/installed`),new Error("MetaMask is not connected/installed, please call eth_requestAccounts to connect first.")}try{const ie=yield z(...W);if(X(`[initializeMobileProvider: sendRequest()] method=${U} rpcResponse`,ie),U===Se.WALLET_REQUESTPERMISSIONS){const le=ie.reduce((he,Ee)=>{var de;if(Ee.parentCapability==="eth_accounts"){const pe=(de=Ee.caveats.find(Ae=>Ae.type==="restrictReturnedAccounts"))===null||de===void 0?void 0:de.value;pe&&he.push(...pe)}return he},[]);X("[initializeMobileProvider: sendRequest()] accountsToPersist:",le),le.length>0&&(S.handleAccountsChanged(le,!1),p==null||p.persistAccounts(le))}return ie}catch(ie){throw console.error("[initializeMobileProvider: sendRequest()] error:",ie),ie}}),{request:M}=y;y.request=(...U)=>ne(void 0,void 0,void 0,function*(){return j(U==null?void 0:U[0].method,U,M,l)});const{send:K}=y;return y.send=(...U)=>ne(void 0,void 0,void 0,function*(){return j(U==null?void 0:U[0],U,K,l)}),X("[initializeMobileProvider: sendRequest()] metamaskStream.start()"),d.start(),y});function y$(t){var e,n,r,i;return ne(this,void 0,void 0,function*(){const{options:s}=t,o={communicationLayerPreference:(e=s.communicationLayerPreference)!==null&&e!==void 0?e:il.SOCKET,platformManager:t.platformManager,sdk:t,checkInstallationOnAllCalls:s.checkInstallationOnAllCalls,injectProvider:(n=s.injectProvider)===null||n===void 0||n,shouldShimWeb3:(r=s.shouldShimWeb3)===null||r===void 0||r,extensionOnly:(i=s.extensionOnly)===null||i===void 0||i,installer:t.installer,remoteConnection:t.remoteConnection,debug:t.debug},a=yield m$(o);t.activeProvider=a,function(l){var c,u,d,f;(u=(c=l.remoteConnection)===null||c===void 0?void 0:c.getConnector())===null||u===void 0||u.on(Bn.ConnectionStatus,h=>{l.emit(Bn.ConnectionStatus,h)}),(f=(d=l.remoteConnection)===null||d===void 0?void 0:d.getConnector())===null||f===void 0||f.on(Bn.ServiceStatus,h=>{l.emit(Bn.ServiceStatus,h)})}(t)})}const v$="sdk";class w${constructor({serverUrl:e,enabled:n,originatorInfo:r}){this.serverURL=gu,this.serverURL=e,this.originatorInfo=r,this.enabled=n==null||n}send({event:e,params:n}){if(!this.enabled)return;const r=Object.assign(Object.assign({id:v$,event:e,sdkVersion:pl.version},this.originatorInfo),{params:n});X(`[Analytics: send()] event: ${e}`,r),_s(r,this.serverURL).catch(i=>{X(`[Analytics: send()] error: ${i}`)})}}const b$=()=>{if(typeof document>"u")return;let t;const e=document.getElementsByTagName("link");for(let n=0;n<e.length;n++)e[n].getAttribute("rel")!=="icon"&&e[n].getAttribute("rel")!=="shortcut icon"||(t=e[n].getAttribute("href"));return t},E$=163400;function EC(t){var e,n,r;const{dappMetadata:i}=t,s=function({url:u,name:d}){var f;const h=u+d,m=U0(h);if(!localStorage)return"";let g=(f=localStorage.getItem(m))!==null&&f!==void 0?f:"";if(!g){g=no();try{localStorage.setItem(m,g)}catch{return""}}return g}({url:(e=i==null?void 0:i.url)!==null&&e!==void 0?e:"no_url",name:(n=i==null?void 0:i.name)!==null&&n!==void 0?n:"no_name"}),o=(r=t.platformManager)===null||r===void 0?void 0:r.getPlatformType(),a=o===an.DesktopWeb,l=o===an.MetaMaskMobileWebview;let c="N/A";return a?c="extension":l&&(c="mobile"),{id:s,from:c}}const Uh=(t,e,n)=>{if(jf(t))if(n||e&&typeof e=="object"&&e!==null&&"error"in e){const r=n||(e==null?void 0:e.error);r&&r.code===4001?vt.analytics.track("sdk_action_rejected",{action:t}):vt.analytics.track("sdk_action_failed",{action:t})}else vt.analytics.track("sdk_action_succeeded",{action:t})},XR=({provider:t,sdkInstance:e})=>{if("state"in t)throw new Error("INVALID EXTENSION PROVIDER");return new Proxy(t,{get:(n,r)=>r==="request"?function(i){var s,o;return ne(this,void 0,void 0,function*(){X("[wrapExtensionProvider()] Overwriting request method",i);const{method:a,params:l}=i,c=u$.includes(a.toLowerCase()),{id:u,from:d}=EC(e);if(c&&((s=e.analytics)===null||s===void 0||s.send({event:Et.SDK_RPC_REQUEST,params:{method:a,from:d,id:u}})),jf(a)&&vt.analytics.track("sdk_action_requested",{action:a}),a===Se.METAMASK_BATCH&&Array.isArray(l))return(({target:m,args:g,trackEvent:w,sdkInstance:p})=>ne(void 0,void 0,void 0,function*(){var v,y;if(g.method!=="metamask_batch")throw new Error("Invalid usage");const x=[],T=(v=g==null?void 0:g.params)!==null&&v!==void 0?v:[];for(const M of T){const K=yield m==null?void 0:m.request({method:M.method,params:M.params});x.push(K)}const{id:B,from:j}=EC(p);w&&((y=p.analytics)===null||y===void 0||y.send({event:Et.SDK_RPC_REQUEST_DONE,params:{method:g.method,from:j,id:B}}));for(const M of x)Uh(g.method,M,null);return x}))({target:n,args:i,trackEvent:c,sdkInstance:e});if(a.toLowerCase()===Se.METAMASK_CONNECTSIGN.toLowerCase()&&Array.isArray(l))return(({target:m,params:g})=>ne(void 0,void 0,void 0,function*(){let w,p=null;try{const v=yield m.request({method:Se.ETH_REQUESTACCOUNTS,params:[]});if(!v.length)throw new Error("SDK state invalid -- undefined accounts");return w=yield m.request({method:Se.PERSONAL_SIGN,params:[g[0],v[0]]}),w}catch(v){throw p=v,v}finally{Uh(Se.PERSONAL_SIGN,w,p)}}))({target:n,params:l});if(a.toLowerCase()===Se.METAMASK_CONNECTWITH.toLowerCase()&&Array.isArray(l))return(({target:m,params:g})=>ne(void 0,void 0,void 0,function*(){const[w]=g,p=w.method,v=w.params;let y,x=null;try{const T=yield m.request({method:Se.ETH_REQUESTACCOUNTS,params:[]});if(!Array.isArray(T)||!T.length)throw new Error("SDK state invalid -- undefined accounts");return(p==null?void 0:p.toLowerCase())===Se.PERSONAL_SIGN.toLowerCase()?(y=yield m.request({method:p,params:[v[0],T[0]]}),y):(p==null?void 0:p.toLowerCase())===Se.ETH_SENDTRANSACTION.toLowerCase()?(y=yield m.request({method:p,params:[Object.assign(Object.assign({},v[0]),{from:T[0]})]}),y):JR.includes(p.toLowerCase())?(console.warn(`MetaMaskSDK connectWith method=${p} -- not handled by the extension -- call separately`),y=T,y):(y=yield m.request({method:p,params:v}),y)}catch(T){throw x=T,T}finally{Uh(p,y,x)}}))({target:n,params:l});let f,h=null;try{return f=yield n.request(i),f}catch(m){throw h=m,m}finally{c&&((o=e.analytics)===null||o===void 0||o.send({event:Et.SDK_RPC_REQUEST_DONE,params:{method:a,from:d,id:u}})),Uh(a,f,h)}})}:r==="getChainId"?function(){return t.chainId}:r==="getNetworkVersion"?function(){return t.networkVersion}:r==="getSelectedAddress"?function(){return t.selectedAddress}:r==="isConnected"?function(){return t._state.isConnected}:n[r]})};var F0;function A$({mustBeMetaMask:t,sdkInstance:e}){return ne(this,void 0,void 0,function*(){if(typeof window>"u")throw new Error("window not available");try{const n=yield new Promise((r,i)=>{const s=setTimeout(()=>{i(new Error("eip6963RequestProvider timed out"))},500);window.addEventListener(F0.Announce,o=>{const a=o,{detail:{info:l,provider:c}={}}=a,{name:u,rdns:d,uuid:f}=l??{};c$.test(f)&&u.startsWith(vC.NAME)&&vC.RDNS.includes(d)&&(clearTimeout(s),r(c))}),window.dispatchEvent(new Event(F0.Request))});return XR({provider:n,sdkInstance:e})}catch{throw new Error("Provider not found")}})}(function(t){t.Announce="eip6963:announceProvider",t.Request="eip6963:requestProvider"})(F0||(F0={}));const S$=t=>ne(void 0,void 0,void 0,function*(){const{options:e}=t,{infuraAPIKey:n}=e;if(!n)return;const r={"0x1":`https://mainnet.infura.io/v3/${n}`,"0x5":`https://goerli.infura.io/v3/${n}`,"0xaa36a7":`https://sepolia.infura.io/v3/${n}`,"0xe708":`https://linea-mainnet.infura.io/v3/${n}`,"0xe704":`https://linea-goerli.infura.io/v3/${n}`,"0x89":`https://polygon-mainnet.infura.io/v3/${n}`,"0x13881":`https://polygon-mumbai.infura.io/v3/${n}`,"0x45":`https://optimism-mainnet.infura.io/v3/${n}`,"0x1a4":`https://optimism-goerli.infura.io/v3/${n}`,"0xa4b1":`https://arbitrum-mainnet.infura.io/v3/${n}`,"0x66eed":`https://arbitrum-goerli.infura.io/v3/${n}`,"0x2a15c308d":`https://palm-mainnet.infura.io/v3/${n}`,"0x2a15c3083":`https://palm-testnet.infura.io/v3/${n}`,"0xa86a":`https://avalanche-mainnet.infura.io/v3/${n}`,"0xa869":`https://avalanche-fuji.infura.io/v3/${n}`,"0x4e454152":`https://aurora-mainnet.infura.io/v3/${n}`,"0x4e454153":`https://aurora-testnet.infura.io/v3/${n}`,"0x534e5f4d41494e":`https://starknet-mainnet.infura.io/v3/${n}`,"0x534e5f474f45524c49":`https://starknet-goerli.infura.io/v3/${n}`,"0x534e5f474f45524c4932":`https://starknet-goerli2.infura.io/v3/${n}`,"0xa4ec":`https://celo-mainnet.infura.io/v3/${n}`,"0xaef3":`https://celo-alfajores.infura.io/v3/${n}`};t.options.readonlyRPCMap?t.options.readonlyRPCMap=Object.assign(Object.assign({},t.options.readonlyRPCMap),r):t.options.readonlyRPCMap=r}),C$=t=>ne(void 0,void 0,void 0,function*(){const{options:e}=t,{readonlyRPCMap:n}=e;if(n)try{X("[MetaMaskSDK: setupReadOnlyRPCProviders()] Setting up Readonly RPC Providers",n),t.setReadOnlyRPCCalls(!0)}catch{throw new Error("Invalid Infura Settings")}});function x$(t,e,n,r){return new(n||(n=Promise))(function(i,s){function o(c){try{l(r.next(c))}catch(u){s(u)}}function a(c){try{l(r.throw(c))}catch(u){s(u)}}function l(c){var u;c.done?i(c.value):(u=c.value,u instanceof n?u:new n(function(d){d(u)})).then(o,a)}l((r=r.apply(t,[])).next())})}function k$(t,e){var n,r,i,s,o={label:0,sent:function(){if(1&i[0])throw i[1];return i[1]},trys:[],ops:[]};return s={next:a(0),throw:a(1),return:a(2)},typeof Symbol=="function"&&(s[Symbol.iterator]=function(){return this}),s;function a(l){return function(c){return function(u){if(n)throw new TypeError("Generator is already executing.");for(;o;)try{if(n=1,r&&(i=2&u[0]?r.return:u[0]?r.throw||((i=r.return)&&i.call(r),0):r.next)&&!(i=i.call(r,u[1])).done)return i;switch(r=0,i&&(u=[2&u[0],i.value]),u[0]){case 0:case 1:i=u;break;case 4:return o.label++,{value:u[1],done:!1};case 5:o.label++,r=u[1],u=[0];continue;case 7:u=o.ops.pop(),o.trys.pop();continue;default:if(i=o.trys,!((i=i.length>0&&i[i.length-1])||u[0]!==6&&u[0]!==2)){o=0;continue}if(u[0]===3&&(!i||u[1]>i[0]&&u[1]<i[3])){o.label=u[1];break}if(u[0]===6&&o.label<i[1]){o.label=i[1],i=u;break}if(i&&o.label<i[2]){o.label=i[2],o.ops.push(u);break}i[2]&&o.ops.pop(),o.trys.pop();continue}u=e.call(t,o)}catch(d){u=[6,d],r=0}finally{n=i=0}if(5&u[0])throw u[1];return{value:u[0]?u[1]:void 0,done:!0}}([l,c])}}}var AC="INSTALLED",SC="NOT_INSTALLED",CC="REGISTERED",xC="REGISTERING",kC="RELOADING",_C={CHROME:"https://chrome.google.com/webstore/detail/metamask/nkbihfbeogaeaoehlefnkodbefgpgknn",FIREFOX:"https://addons.mozilla.org/firefox/addon/ether-metamask/",DEFAULT:"https://metamask.io"},Fh="REGISTRATION_IN_PROGRESS",PC="FORWARDER_ID",_$=function(){function t(e){var n=e===void 0?{}:e,r=n.forwarderOrigin,i=r===void 0?"https://fwd.metamask.io":r,s=n.forwarderMode,o=s===void 0?t.FORWARDER_MODE.INJECT:s;this.forwarderOrigin=i,this.forwarderMode=o,this.state=t.isMetaMaskInstalled()?AC:SC;var a=t._detectBrowser();this.downloadUrl=a?_C[a]:_C.DEFAULT,this._onMessage=this._onMessage.bind(this),this._onMessageFromForwarder=this._onMessageFromForwarder.bind(this),this._openForwarder=this._openForwarder.bind(this),this._openDownloadPage=this._openDownloadPage.bind(this),this.startOnboarding=this.startOnboarding.bind(this),this.stopOnboarding=this.stopOnboarding.bind(this),window.addEventListener("message",this._onMessage),o===t.FORWARDER_MODE.INJECT&&sessionStorage.getItem(Fh)==="true"&&t._injectForwarder(this.forwarderOrigin)}return t.prototype._onMessage=function(e){if(e.origin===this.forwarderOrigin)return e.data.type==="metamask:reload"?this._onMessageFromForwarder(e):void console.debug("Unknown message from '"+e.origin+"' with data "+JSON.stringify(e.data))},t.prototype._onMessageUnknownStateError=function(e){throw new Error("Unknown state: '"+e+"'")},t.prototype._onMessageFromForwarder=function(e){return x$(this,0,void 0,function(){return k$(this,function(n){switch(n.label){case 0:switch(this.state){case kC:return[3,1];case SC:return[3,2];case AC:return[3,3];case xC:return[3,5];case CC:return[3,6]}return[3,7];case 1:return console.debug("Ignoring message while reloading"),[3,8];case 2:return console.debug("Reloading now to register with MetaMask"),this.state=kC,location.reload(),[3,8];case 3:return console.debug("Registering with MetaMask"),this.state=xC,[4,t._register()];case 4:return n.sent(),this.state=CC,e.source.postMessage({type:"metamask:registrationCompleted"},e.origin),this.stopOnboarding(),[3,8];case 5:return console.debug("Already registering - ignoring reload message"),[3,8];case 6:return console.debug("Already registered - ignoring reload message"),[3,8];case 7:this._onMessageUnknownStateError(this.state),n.label=8;case 8:return[2]}})})},t.prototype.startOnboarding=function(){sessionStorage.setItem(Fh,"true"),this._openDownloadPage(),this._openForwarder()},t.prototype.stopOnboarding=function(){sessionStorage.getItem(Fh)==="true"&&(this.forwarderMode===t.FORWARDER_MODE.INJECT&&(console.debug("Removing forwarder"),t._removeForwarder()),sessionStorage.setItem(Fh,"false"))},t.prototype._openForwarder=function(){this.forwarderMode===t.FORWARDER_MODE.OPEN_TAB?window.open(this.forwarderOrigin,"_blank"):t._injectForwarder(this.forwarderOrigin)},t.prototype._openDownloadPage=function(){window.open(this.downloadUrl,"_blank")},t.isMetaMaskInstalled=function(){return!!(window.ethereum&&window.ethereum.isMetaMask)},t._register=function(){return window.ethereum.request({method:"wallet_registerOnboarding"})},t._injectForwarder=function(e){var n=document.body,r=document.createElement("iframe");r.setAttribute("height","0"),r.setAttribute("width","0"),r.setAttribute("style","display: none;"),r.setAttribute("src",e),r.setAttribute("id",PC),n.insertBefore(r,n.children[0])},t._removeForwarder=function(){var e;(e=document.getElementById(PC))===null||e===void 0||e.remove()},t._detectBrowser=function(){var e=QR.parse(window.navigator.userAgent);return e.browser.name==="Firefox"?"FIREFOX":["Chrome","Chromium"].includes(e.browser.name||"")?"CHROME":null},t.FORWARDER_MODE={INJECT:"INJECT",OPEN_TAB:"OPEN_TAB"},t}();function P$(t,{wait:e=!1}){return ne(this,void 0,void 0,function*(){return X(`[MetamaskInstaller: startInstaller()] wait=${e}`),e&&(yield ZR(1e3)),yield t.checkInstallation()})}class T${constructor({remote:e,preferDesktop:n,platformManager:r,debug:i=!1}){this.state={isInstalling:!1,hasInstalled:!1,resendRequest:null,preferDesktop:!1,platformManager:null,remote:null,debug:!1,connectWith:void 0},this.state.remote=e,this.state.preferDesktop=n,this.state.platformManager=r,this.state.debug=i}startDesktopOnboarding(){return function(){return ne(this,void 0,void 0,function*(){X("[MetamaskInstaller: startDesktopOnboarding() starting desktop onboarding"),window.ethereum&&(window.ethereum=void 0),new _$().startOnboarding()})}()}redirectToProperInstall(){return ne(this,void 0,void 0,function*(){return function(e){var n,r;return ne(this,void 0,void 0,function*(){const{state:i}=e,s=(n=i.platformManager)===null||n===void 0?void 0:n.getPlatformType();if(X(`[MetamaskInstaller: redirectToProperInstall()] platform=${s}`),s===an.MetaMaskMobileWebview)return!1;i.isInstalling=!0;try{yield(r=i.remote)===null||r===void 0?void 0:r.startConnection({connectWith:i.connectWith}),i.isInstalling=!1,i.hasInstalled=!0}catch(o){throw i.isInstalling=!1,o}return!0})}(this)})}checkInstallation(){return ne(this,void 0,void 0,function*(){return function(e){var n;return ne(this,void 0,void 0,function*(){const{state:r}=e,i=(n=r.platformManager)===null||n===void 0?void 0:n.isMetaMaskInstalled();return X(`[MetamaskInstaller: checkInstallation()] isInstalled=${i}`),!!i||(yield e.redirectToProperInstall())})}(this)})}start({wait:e=!1,connectWith:n}){return ne(this,void 0,void 0,function*(){this.state.connectWith=n,X(`[MetaMaskInstaller: start()] wait=${e}`,n),yield P$(this,{wait:e})})}}class eI{constructor({debug:e,sdkVersion:n}){this.containers={install:void 0,pending:void 0,select:void 0},this.defined={install:!1,pending:!1,select:!1},this.debug=e!=null&&e,this.sdkVersion=n}loadComponent(e){return ne(this,void 0,void 0,function*(){if(!this.defined[e]){this.defined[e]=!0;try{const n=yield Promise.resolve().then(function(){return c7});console.log("loader",n),n.defineCustomElements()}catch(n){console.error(`Failed to load ${e} modal:`,n)}}})}renderInstallModal(e){var n;return ne(this,void 0,void 0,function*(){this.debug&&console.debug("ModalLoader: renderInstallModal",e),this.containers.install=e.parentElement,yield this.loadComponent("install");const r=document.createElement("mm-install-modal");r.link=e.link,r.preferDesktop=e.preferDesktop,r.sdkVersion=(n=e.sdkVersion)!==null&&n!==void 0?n:this.sdkVersion,r.addEventListener("close",({detail:{shouldTerminate:i}})=>e.onClose(i)),r.addEventListener("startDesktopOnboarding",e.metaMaskInstaller.startDesktopOnboarding),r.addEventListener("trackAnalytics",i=>{var s;return(s=e.onAnalyticsEvent)===null||s===void 0?void 0:s.call(e,i.detail)}),e.parentElement.appendChild(r)})}renderSelectModal(e){var n;return ne(this,void 0,void 0,function*(){this.containers.select=e.parentElement,yield this.loadComponent("select");const r=document.createElement("mm-select-modal");r.link=e.link,r.sdkVersion=(n=e.sdkVersion)!==null&&n!==void 0?n:this.sdkVersion,r.preferDesktop=e.preferDesktop,r.addEventListener("close",({detail:{shouldTerminate:i}})=>e.onClose(i)),r.addEventListener("connectWithExtension",e.connectWithExtension),e.parentElement.appendChild(r),setTimeout(()=>this.updateQRCode(e.link),100)})}renderPendingModal(e){var n;return ne(this,void 0,void 0,function*(){this.containers.pending=e.parentElement,yield this.loadComponent("pending");const r=document.createElement("mm-pending-modal");r.sdkVersion=(n=e.sdkVersion)!==null&&n!==void 0?n:this.sdkVersion,r.displayOTP=e.displayOTP,r.addEventListener("close",e.onClose),r.addEventListener("updateOTPValue",({detail:{otpValue:i}})=>e.updateOTPValue(i)),e.onDisconnect&&r.addEventListener("disconnect",e.onDisconnect),e.parentElement.appendChild(r)})}updateOTPValue(e){const n=()=>{var r;const i=(r=this.containers.pending)===null||r===void 0?void 0:r.querySelector("mm-pending-modal");return!!i&&(i.otpCode=e,!0)};setTimeout(()=>{n()},800)}updateQRCode(e){var n,r;const i=(n=this.containers.install)===null||n===void 0?void 0:n.querySelector("mm-install-modal");if(i)i.link=e;else{const s=(r=this.containers.select)===null||r===void 0?void 0:r.querySelector("mm-select-modal");s&&(s.link=e)}}unmount(){Object.entries(this.containers).forEach(([e,n])=>{var r;(r=n==null?void 0:n.parentNode)===null||r===void 0||r.removeChild(n),this.containers[e]=void 0})}}const R$=({link:t,debug:e,installer:n,terminate:r,connectWithExtension:i,preferDesktop:s,onAnalyticsEvent:o})=>{let a=null,l=null;X("[UI: InstallModal-web: sdkWebInstallModal()] ################## Installing Modal #################"),X(`[UI: InstallModal-web: sdkWebInstallModal()] link=${t}`),X(`[UI: InstallModal-web: sdkWebInstallModal()] npx uri-scheme open "${t}" --ios`),X(`[UI: InstallModal-web: sdkWebInstallModal()] npx uri-scheme open "${t}" --android`),X(`[UI: InstallModal-web: sdkWebInstallModal()] adb shell am start -a android.intent.action.VIEW -d "${t}"`);const c=u=>{var d;X("[UI: InstallModal-web: sdkWebInstallModal()] installModal-web unmounting install modal -- shouldTerminate:",u,l),l!=null&&l.parentNode&&((d=l.parentNode)===null||d===void 0||d.removeChild(l)),l=null,a=null,u===!0&&(r==null||r())};return{mount:u=>{if(X("[UI: InstallModal-web: sdkWebInstallModal()] installModal-web mounting install modal",l),l)return l.style.display="block",void(a==null||a.updateQRCode(u));a=new eI({debug:e,sdkVersion:pl.version}),l=document.createElement("div"),document.body.appendChild(l),window.extension?a.renderSelectModal({parentElement:l,connectWithExtension:()=>{c(),i==null||i()},onClose:c,link:t,preferDesktop:s!=null&&s}).catch(d=>{console.error(d)}):a.renderInstallModal({parentElement:l,preferDesktop:s!=null&&s,link:t,metaMaskInstaller:n,onClose:c,onAnalyticsEvent:o}).catch(d=>{console.error("[UI: InstallModal-web: sdkWebInstallModal()]",d)})},unmount:c}},I$=({onDisconnect:t,debug:e})=>{let n=null,r=null;const i=()=>{X("[UI: pendingModal-web: sdkWebPendingModal()] pendingModal-web unmount",n),n!=null&&n.parentNode&&n.parentNode.removeChild(n),n=null,r=null},s=a=>{X("[UI: pendingModal-web: sdkWebPendingModal()] pendingModal-web updateOTPValue",a),r&&r.updateOTPValue(a)},o=({displayOTP:a}={displayOTP:!0})=>{X("[UI: pendingModal-web: sdkWebPendingModal()] pendingModal-web mount",n),n?n.style.display="block":(r=new eI({debug:e,sdkVersion:pl.version}),n=document.createElement("div"),document.body.appendChild(n),r.renderPendingModal({parentElement:n,onClose:i,onDisconnect:t,updateOTPValue:s,displayOTP:a}).catch(l=>{console.error("[UI: pendingModal-web: sdkWebPendingModal()]",l)}))};return o(),{mount:o,unmount:i,updateOTPValue:s}};function tI(t,e){var n,r,i,s;t.connector||(X("[RemoteConnection: initializeConnector()] initialize connector"),t.connector=new MD({anonId:e.anonId,platformType:e.platformManager.getPlatformType(),communicationLayerPreference:e.communicationLayerPreference,transports:e.transports,dappMetadata:Object.assign(Object.assign({},e.dappMetadata),{source:e._source}),analytics:e.enableAnalytics,communicationServerUrl:e.communicationServerUrl,sdkVersion:pl.version,context:"dapp",ecies:e.ecies,storage:e.storage,logging:e.logging}),e.timer&&(X("[RemoteConnection: initializeConnector()] reset background timer",e.timer),(r=(n=e.timer)===null||n===void 0?void 0:n.stopBackgroundTimer)===null||r===void 0||r.call(n),(s=(i=e.timer)===null||i===void 0?void 0:i.runBackgroundTimer)===null||s===void 0||s.call(i,()=>!1,1e4)))}function $w(t){t.listeners.forEach(({event:e,handler:n})=>{var r;(r=t.connector)===null||r===void 0||r.off(e,n)}),t.listeners=[]}function O$(t,e,n){return ne(this,void 0,void 0,function*(){const r=setTimeout(()=>{vt.analytics.track("sdk_connection_failed",{transport_type:"websocket"})},6e4);return new Promise((i,s)=>{if(!t.connector)return void s(new Error("No connector available"));X("[RemoteConnection: connectWithModalInstaller()]",{state:t,options:e,linkParams:n});const o=`${t.useDeeplink?hf:ff}?${n}`;(function(a,l,c){var u,d,f,h;a.installModal=(d=(u=l.modals).install)===null||d===void 0?void 0:d.call(u,{link:c,preferDesktop:a.preferDesktop,installer:l.getMetaMaskInstaller(),terminate:()=>{X("[RemoteConnection: showInstallModal() => terminate()] terminate connection"),l.sdk.terminate().catch(m=>{console.warn("[MMSDK] failed to terminate connection",m)})},debug:a.developerMode,connectWithExtension:()=>{var m;return(m=l.connectWithExtensionProvider)===null||m===void 0||m.call(l),!1},onAnalyticsEvent:({event:m,params:g})=>{var w,p,v;const y=Object.assign(Object.assign({},g),{sdkVersion:l.sdk.getVersion(),dappId:(w=l.dappMetadata)===null||w===void 0?void 0:w.name,source:l._source,url:(p=l.dappMetadata)===null||p===void 0?void 0:p.url});(v=a.analytics)===null||v===void 0||v.send({event:m,params:y})}}),(h=(f=a.installModal)===null||f===void 0?void 0:f.mount)===null||h===void 0||h.call(f,c)})(t,e,o),e.sdk.once(ae.PROVIDER_UPDATE,a=>ne(this,void 0,void 0,function*(){if(X("[RemoteConnection: connectWithModalInstaller()] once provider_update -- resolving startConnection promise"),a===Bi.TERMINATE){const l={code:4001,message:"User rejected the request."};return clearTimeout(r),void s(l)}s(a)})),t.connector.once(ae.AUTHORIZED,()=>{clearTimeout(r),i()}),t.connector.once(ae.REJECTED,()=>{clearTimeout(r),s(ae.REJECTED)}),t.connector.once(ae.CLIENTS_READY,()=>ne(this,void 0,void 0,function*(){X("[RemoteConnection: connectWithModalInstaller()] once clients_ready -- resolving startConnection promise"),clearTimeout(r),i()}))})})}function nI(t,e){function n(r,i){var s;(s=t.connector)===null||s===void 0||s.on(r,i),t.listeners.push({event:r,handler:i})}t.connector&&($w(t),n(ae.WALLET_INIT,({accounts:r,chainId:i})=>ne(this,void 0,void 0,function*(){X(`[RemoteConnection: setupListeners() => EventType.WALLET_INIT] 'wallet_init' accounts=${r} chainId=${i}`);const s=ei.getProvider();s._setConnected();const o={accounts:r,chainId:i,isUnlocked:!1};s._initializeState(o),s.emit("chainChanged",i),s.emit("accountsChanged",r)})),n(ae.AUTHORIZED,()=>ne(this,void 0,void 0,function*(){var r,i,s,o;try{X("[RemoteConnection: setupListeners() => EventType.AUTHORIZED] 'authorized' closing modals",t.pendingModal,t.installModal);const a=ei.getProvider();a._setConnected(),(i=(r=t.pendingModal)===null||r===void 0?void 0:r.unmount)===null||i===void 0||i.call(r),(o=(s=t.installModal)===null||s===void 0?void 0:s.unmount)===null||o===void 0||o.call(s,!1),t.otpAnswer=void 0,t.authorized=!0,X("[RemoteConnection: setupListeners() => EventType.AUTHORIZED] 'authorized' provider.state",a.getState()),yield a.forceInitializeState()}catch{}})),n(ae.TERMINATE,()=>{var r,i,s,o,a;(i=(r=t.pendingModal)===null||r===void 0?void 0:r.unmount)===null||i===void 0||i.call(r),(o=(s=t.installModal)===null||s===void 0?void 0:s.unmount)===null||o===void 0||o.call(s,!0),t.pendingModal=void 0,t.installModal=void 0,t.otpAnswer=void 0,(a=t.connector)===null||a===void 0||a.disconnect({terminate:!0}),t.authorized=!1,ei.getProvider().handleDisconnect({terminate:!0}),$w(t),X("[RemoteConnection: setupListeners()] All listeners cleaned up")}))}function N$(t,e,{initialCheck:n,connectWith:r}={}){var i,s,o,a,l,c,u,d,f,h,m,g,w,p,v,y,x,T,B;return ne(this,void 0,void 0,function*(){try{if(tI(t,e),!t.connector)throw new Error("no connector defined");nI(t);const j=ei.getProvider();t.authorized=!1,j.emit("connecting");const M=yield(i=t.connector)===null||i===void 0?void 0:i.originatorSessionConnect();X(`[RemoteConnection: startConnection()] after originatorSessionConnect initialCheck=${n}`,M);let K=(s=M==null?void 0:M.channelId)!==null&&s!==void 0?s:"",U=(a=(o=t.connector.getKeyInfo())===null||o===void 0?void 0:o.ecies.public)!==null&&a!==void 0?a:"",W=(c=(l=t.connector.getKeyInfo())===null||l===void 0?void 0:l.ecies.private)!==null&&c!==void 0?c:"";if(n&&!M)return Promise.resolve();if(!M&&!n){const R=yield t.connector.generateChannelIdConnect();K=(u=R.channelId)!==null&&u!==void 0?u:"",U=(d=R.pubKey)!==null&&d!==void 0?d:"",W=(f=R.privKey)!==null&&f!==void 0?f:"";const L=Date.now();(h=t.connector.state.storageManager)===null||h===void 0||h.persistChannelConfig({channelId:K,localKey:W,lastActive:L,validUntil:L+mu})}if(n&&(M!=null&&M.channelId))return!((m=t.connector)===null||m===void 0)&&m.isConnected()||(X(`[RemoteConnection: startConnection()] reconnecting to channel initialCheck=${n}`,M),yield(g=t.connector)===null||g===void 0?void 0:g.connectToChannel({channelId:K})),Promise.resolve();M&&!(!((w=t.connector)===null||w===void 0)&&w.isConnected())&&(X("[RemoteConnection: startConnection()] reconnecting to channel",M),yield(p=t.connector)===null||p===void 0?void 0:p.connectToChannel({channelId:K}));const z=!((v=t.platformManager)===null||v===void 0)&&v.isSecure()?"":"&t=q",$=pl.version,{iconUrl:N,name:C,url:O,scheme:D}=e.dappMetadata||{},b=(y=t.platformManager)===null||y===void 0?void 0:y.getPlatformType();let E="N/A";typeof window<"u"&&window.location&&window.location.hostname?E=window.location.hostname:C!==void 0?E=C:O!==void 0&&(E=O);const _={url:O??"",title:C??"",icon:N,scheme:D??"",apiVersion:$,dappId:E||O||"N/A",anonId:e.anonId,platform:b??"",source:(x=e._source)!==null&&x!==void 0?x:""},I=U0(JSON.stringify(_));let A=`channelId=${K}&v=2&comm=${(T=t.communicationLayerPreference)!==null&&T!==void 0?T:""}&pubkey=${U}${z}&originatorInfo=${I}`;if(r){A+=`&rpc=${U0(JSON.stringify(r))}`;const R=t.connector.getRPCMethodTracker();R&&(R[`${r.id}`]=Object.assign(Object.assign({},r),{id:`${r.id}`,timestamp:Date.now()}))}const S=encodeURI(A),P=`${t.useDeeplink?hf:ff}?${A}`;if(t.qrcodeLink=P,t.developerMode&&X(`[RemoteConnection: startConnection()] qrcodeLink=${S}`),j.emit("display_uri",P),vt.analytics.track("sdk_connection_initiated",{transport_type:"websocket"}),(B=t.platformManager)===null||B===void 0?void 0:B.isSecure()){const R=setTimeout(()=>{vt.analytics.track("sdk_connection_failed",{transport_type:"websocket"})},6e4);return yield function(L,F){var V,q;return ne(this,void 0,void 0,function*(){const Y=`${ff}?${F}`,te=`${hf}?${F}`;(q=(V=L.platformManager)===null||V===void 0?void 0:V.openDeeplink)===null||q===void 0||q.call(V,Y,te,"_self")})}(t,S),new Promise((L,F)=>{var V,q,Y;if(!((V=t.connector)===null||V===void 0)&&V.isAuthorized())return clearTimeout(R),void L();(q=t.connector)===null||q===void 0||q.once(ae.AUTHORIZED,()=>{clearTimeout(R),L()}),(Y=t.connector)===null||Y===void 0||Y.once(ae.REJECTED,()=>{clearTimeout(R),F(ae.REJECTED)})})}return O$(t,e,S)}catch(j){throw console.error("[startConnection] error",j),j}})}class M${constructor(e){var n,r,i;this.state={connector:void 0,qrcodeLink:void 0,analytics:void 0,developerMode:!1,authorized:!1,reconnection:!1,preferDesktop:!1,deeplinkProtocol:!1,listeners:[],communicationLayerPreference:void 0,platformManager:void 0,pendingModal:void 0,installModal:void 0,otpAnswer:void 0},this.options=e;const s=((n=e.logging)===null||n===void 0?void 0:n.developerMode)===!0||((r=e.logging)===null||r===void 0?void 0:r.sdk)===!0;this.state.developerMode=s,this.state.analytics=e.analytics,this.state.preferDesktop=(i=e.preferDesktop)!==null&&i!==void 0&&i,this.state.useDeeplink=e.sdk.options.useDeeplink,this.state.communicationLayerPreference=e.communicationLayerPreference,this.state.platformManager=e.platformManager,e.modals.install||(e.modals.install=R$),e.modals.otp||(e.modals.otp=I$)}startConnection(e){return ne(this,void 0,void 0,function*(){return N$(this.state,this.options,e)})}initRemoteCommunication({sdkInstance:e}){var n,r,i;return ne(this,void 0,void 0,function*(){const s=yield(r=(n=e.options.storage)===null||n===void 0?void 0:n.storageManager)===null||r===void 0?void 0:r.getPersistedChannelConfig();if(!this.options.ecies){const o={privateKey:s==null?void 0:s.localKey};this.options.ecies=o}tI(this.state,this.options),yield(i=this.getConnector())===null||i===void 0?void 0:i.initFromDappStorage(),nI(this.state,this.options)})}showActiveModal(){return function(e){var n,r,i,s;e.authorized?X("[RemoteConnection: showActiveModal()] already authorized"):e.pendingModal?(r=(n=e.pendingModal).mount)===null||r===void 0||r.call(n):e.installModal&&((s=(i=e.installModal).mount)===null||s===void 0||s.call(i,e.qrcodeLink||""))}(this.state)}closeModal(){var e,n,r,i;(n=(e=this.state.pendingModal)===null||e===void 0?void 0:e.unmount)===null||n===void 0||n.call(e),(i=(r=this.state.installModal)===null||r===void 0?void 0:r.unmount)===null||i===void 0||i.call(r,!1)}getUniversalLink(){if(!this.state.qrcodeLink)throw new Error("connection not started. run startConnection() first.");return this.state.qrcodeLink}getChannelConfig(){var e;return(e=this.state.connector)===null||e===void 0?void 0:e.getChannelConfig()}getKeyInfo(){var e;return(e=this.state.connector)===null||e===void 0?void 0:e.getKeyInfo()}getConnector(){if(!this.state.connector)throw new Error("invalid remote connector");return this.state.connector}getPlatformManager(){if(!this.state.platformManager)throw new Error("PlatformManager not available");return this.state.platformManager}isConnected(){var e;return((e=this.state.connector)===null||e===void 0?void 0:e.isReady())||!1}isAuthorized(){var e;return((e=this.state.connector)===null||e===void 0?void 0:e.isAuthorized())||!1}isPaused(){var e;return(e=this.state.connector)===null||e===void 0?void 0:e.isPaused()}disconnect(e){var n,r,i;X("[RemoteConnection: disconnect()]",e),e!=null&&e.terminate&&(ei.getProvider().handleDisconnect({terminate:!0}),(r=(n=this.state.pendingModal)===null||n===void 0?void 0:n.unmount)===null||r===void 0||r.call(n),this.state.otpAnswer=void 0),(i=this.state.connector)===null||i===void 0||i.disconnect(e),function(s){X("[RemoteConnection: cleanupConnector()] cleaning up connector"),s.connector&&($w(s),s.connector.disconnect({terminate:!0}).catch(o=>{X("[RemoteConnection: cleanupConnector()] error disconnecting connector",o)}))}(this.state)}}function L$(t){var e,n,r,i,s,o,a,l,c,u,d;return ne(this,void 0,void 0,function*(){const{options:f}=t;if(f.logging=(e=f.logging)!==null&&e!==void 0?e:{},f.communicationLayerPreference=(n=f.communicationLayerPreference)!==null&&n!==void 0?n:il.SOCKET,f.enableDebug!==void 0&&(An.enable("MM_SDK"),console.warn("enableDebug is removed. Please use enableAnalytics instead.")),f.enableAnalytics=(r=f.enableAnalytics)===null||r===void 0||r,f.injectProvider=(i=f.injectProvider)===null||i===void 0||i,f.shouldShimWeb3=(s=f.shouldShimWeb3)===null||s===void 0||s,f.extensionOnly=(o=f.extensionOnly)===null||o===void 0||o,f.useDeeplink=(a=f.useDeeplink)===null||a===void 0||a,f.storage=(l=f.storage)!==null&&l!==void 0?l:{enabled:!0},f.headless){An("[MetaMaskSDK: performSDKInitialization()] headless mode enabled");const v=()=>{},y={install:()=>({mount:v,unmount:v})},x={installer:v};f.modals=y,f.ui=x}const h=((c=f.logging)===null||c===void 0?void 0:c.developerMode)===!0;t.debug=((u=f.logging)===null||u===void 0?void 0:u.sdk)||h,X("[MetaMaskSDK: performSDKInitialization()] options",t.options);const m=Object.assign({},f.logging);h&&(m.sdk=!0,m.eciesLayer=!0,m.keyExchangeLayer=!0,m.remoteLayer=!0,m.serviceLayer=!0,m.plaintext=!0),yield function(v){var y;return ne(this,void 0,void 0,function*(){const{options:x}=v;v.platformManager=new uf({useDeepLink:(y=x.useDeeplink)!==null&&y!==void 0&&y,preferredOpenLink:x.openDeeplink,debug:v.debug})})}(t),yield function(v){var y,x,T,B,j;return ne(this,void 0,void 0,function*(){const{options:M}=v,K=(y=v.platformManager)===null||y===void 0?void 0:y.getPlatformType();v.analytics=new w$({serverUrl:(x=M.communicationServerUrl)!==null&&x!==void 0?x:gu,enabled:M.enableAnalytics,originatorInfo:{url:(T=M.dappMetadata.url)!==null&&T!==void 0?T:"",title:(B=M.dappMetadata.name)!==null&&B!==void 0?B:"",dappId:v.getDappId(),platform:K??"",source:(j=M._source)!==null&&j!==void 0?j:"",anonId:""}})})}(t),yield function(v){var y,x,T;return ne(this,void 0,void 0,function*(){if(!v.options.enableAnalytics||!(!((y=v.platformManager)===null||y===void 0)&&y.isBrowser())&&!(!((x=v.platformManager)===null||x===void 0)&&x.isReactNative()))return;const B=v.getVersion(),j=v.getDappId(),M=yield v.getAnonId(),K=(T=v.platformManager)===null||T===void 0?void 0:T.getPlatformType(),U=v.options._source;vt.analytics.setGlobalProperty("sdk_version",B),vt.analytics.setGlobalProperty("dapp_id",j),vt.analytics.setGlobalProperty("anon_id",M),vt.analytics.setGlobalProperty("platform",K),vt.analytics.setGlobalProperty("integration_type",U),vt.analytics.enable(),vt.analytics.track("sdk_initialized",{})})}(t),yield function(v){var y;return ne(this,void 0,void 0,function*(){const{options:x}=v;((y=x.storage)===null||y===void 0?void 0:y.enabled)!==!0||x.storage.storageManager||(x.storage.storageManager=yield YR(x.storage))})}(t),yield function(v){return ne(this,void 0,void 0,function*(){const{options:y}=v,x=/^(http|https):\/\/[^\s]*$/;if(y.dappMetadata){y.dappMetadata.iconUrl&&!x.test(y.dappMetadata.iconUrl)&&(console.warn("Invalid dappMetadata.iconUrl: URL must start with http:// or https://"),y.dappMetadata.iconUrl=void 0),y.dappMetadata.base64Icon&&y.dappMetadata.base64Icon.length>E$&&(console.warn("Invalid dappMetadata.base64Icon: Base64-encoded icon string length must be less than 163400 characters"),y.dappMetadata.base64Icon=void 0),y.dappMetadata.url&&!x.test(y.dappMetadata.url)&&console.warn("Invalid dappMetadata.url: URL must start with http:// or https://");const T=b$();if(T&&!y.dappMetadata.iconUrl&&!y.dappMetadata.base64Icon){const B=`${window.location.protocol}//${window.location.host}${T}`;y.dappMetadata.iconUrl=B}}v.dappMetadata=y.dappMetadata})}(t),yield S$(t),yield C$(t);const{metamaskBrowserExtension:g,preferExtension:w,shouldReturn:p}=yield function(v){var y,x,T,B;return ne(this,void 0,void 0,function*(){const{options:j}=v;let M,K=!1,U=!1;if(typeof window<"u"&&window.ethereum&&!(!((y=v.platformManager)===null||y===void 0)&&y.isMetaMaskMobileWebView())){K=localStorage.getItem($0)==="extension";try{M=yield A$({mustBeMetaMask:!0,sdkInstance:v}),window.extension=M,M.on(ai.CHAIN_CHANGED,W=>{X(`[MetaMaskSDK: setupExtensionPreferences()] PROPAGATE chainChanged chainId=${W}`),v.sdkProvider&&v.getMobileProvider().emit(ai.CHAIN_CHANGED,W)}),M.on(ai.ACCOUNTS_CHANGED,W=>ne(this,void 0,void 0,function*(){var z;X(`[MetaMaskSDK: setupExtensionPreferences()] PROPAGATE accountsChanged accounts=${W}`);const $=!!v.sdkProvider,N=!!v.extensionActive;if($&&v.getMobileProvider().emit(ai.ACCOUNTS_CHANGED,W),N&&(W==null?void 0:W.length)===0&&(yield(z=v.getProvider())===null||z===void 0?void 0:z.request({method:Se.WALLET_GETPERMISSIONS,params:[]})).length===0)try{yield v.terminate()}catch(C){X("[MetaMaskSDK: setupExtensionPreferences()] error terminating on permissions revoked",C)}})),M.on(ai.DISCONNECT,W=>{X(`[MetaMaskSDK: setupExtensionPreferences()] PROPAGATE disconnect error=${W}`),v.sdkProvider&&v.getMobileProvider().emit(ai.DISCONNECT,W)}),M.on(ai.CONNECT,W=>{X(`[MetaMaskSDK: setupExtensionPreferences()] PROPAGATE connect args=${W}`),v.sdkProvider&&v.getMobileProvider().emit(ai.CONNECT,W)}),M.on(ai.CONNECTED,W=>{X("[MetaMaskSDK: setupExtensionPreferences()] PROPAGATE connected",W),v.sdkProvider&&v.getMobileProvider().emit(ai.CONNECTED,W)})}catch{window.extension=void 0}}else!((x=v.platformManager)===null||x===void 0)&&x.isMetaMaskMobileWebView()&&((T=v.analytics)===null||T===void 0||T.send({event:Et.SDK_USE_INAPP_BROWSER}),v.activeProvider=XR({provider:window.ethereum,sdkInstance:v}),v._initialized=!0,U=!0);return M&&j.extensionOnly&&(X("[MetaMaskSDK: setupExtensionPreferences()] EXTENSION ONLY --- prevent sdk initialization"),(B=v.analytics)===null||B===void 0||B.send({event:Et.SDK_USE_EXTENSION}),v.activeProvider=M,v.extensionActive=!0,v.extension=M,v._initialized=!0,U=!0),{preferExtension:K,shouldReturn:U,metamaskBrowserExtension:M}})}(t);if(p)X("[MetaMaskSDK: performSDKInitialization()] shouldReturn=true --- prevent sdk initialization");else{yield function(v,y){var x,T,B,j,M;return ne(this,void 0,void 0,function*(){const{options:K}=v,U=Object.assign({},K.logging);v.remoteConnection=new M$({anonId:yield v.getAnonId(),preferDesktop:(x=K.preferDesktop)!==null&&x!==void 0&&x,communicationLayerPreference:(T=K.communicationLayerPreference)!==null&&T!==void 0?T:il.SOCKET,analytics:v.analytics,dappMetadata:K.dappMetadata,_source:K._source,enableAnalytics:(B=K.enableAnalytics)===null||B===void 0||B,timer:K.timer,sdk:v,platformManager:v.platformManager,transports:K.transports,communicationServerUrl:K.communicationServerUrl,storage:(j=K.storage)!==null&&j!==void 0?j:{enabled:!0},getMetaMaskInstaller:()=>{if(!v.installer)throw new Error("Invalid SDK status -- installer not initialized");return v.installer},logging:U,connectWithExtensionProvider:y===void 0?void 0:()=>wC(v),modals:Object.assign(Object.assign({},K.modals),{onPendingModalDisconnect:v.terminate.bind(v)})}),yield v.remoteConnection.initRemoteCommunication({sdkInstance:v}),v.installer=new T$({remote:v.remoteConnection,preferDesktop:(M=K.preferDesktop)!==null&&M!==void 0&&M,platformManager:v.platformManager,debug:v.debug})})}(t,g),yield y$(t),yield function(v,y){var x,T;return ne(this,void 0,void 0,function*(){const{options:B}=v;y?(X("[MetaMaskSDK: handleAutoAndExtensionConnections()] preferExtension is detected -- connect with it."),(x=v.analytics)===null||x===void 0||x.send({event:Et.SDK_EXTENSION_UTILIZED}),wC(v).catch(j=>{console.warn("Can't connect with MetaMask extension...",j),localStorage.removeItem($0)})):B.checkInstallationImmediately&&(!((T=v.platformManager)===null||T===void 0)&&T.isDesktopWeb()?(X("[MetaMaskSDK: handleAutoAndExtensionConnections()] checkInstallationImmediately"),v.connect().catch(j=>{X(`[MetaMaskSDK: handleAutoAndExtensionConnections()] checkInstallationImmediately --- IGNORED --- error on autoconnect _err=${j}`)})):console.warn("[handleAutoAndExtensionConnections()] checkInstallationImmediately --- IGNORED --- only for web desktop")),v._initialized=!0})}(t,w);try{yield(d=t.remoteConnection)===null||d===void 0?void 0:d.startConnection({initialCheck:!0})}catch(v){console.error("[MetaMaskSDK: setupRemoteConnectionAndInstaller()] Error while checking installation",v)}t.emit(Bn.ProviderUpdate,Bi.INITIALIZED)}})}class B$ extends bL{constructor(e={storage:{enabled:!0},injectProvider:!0,forceInjectProvider:!1,enableAnalytics:!0,shouldShimWeb3:!0,useDeeplink:!0,extensionOnly:!0,headless:!1,dappMetadata:{name:"",url:"",iconUrl:""},_source:yC,i18nOptions:{enabled:!1}}){var n,r,i;super(),this.extensionActive=!1,this._initialized=!1,this.sdkInitPromise=void 0,this.debug=!1,this.readonlyRPCCalls=!1,this.availableLanguages=["en"],this.ANON_ID_STORAGE_KEY="mm-sdk-anon-id",An.disable();const s=((n=e.logging)===null||n===void 0?void 0:n.developerMode)===!0;if((!((r=e.logging)===null||r===void 0)&&r.sdk||s)&&An.enable("MM_SDK"),X("[MetaMaskSDK: constructor()]: begin."),this.setMaxListeners(50),!(!((i=e.dappMetadata)===null||i===void 0)&&i.url)){if(typeof window>"u"||typeof document>"u")throw new Error("You must provide dAppMetadata url");e.dappMetadata=Object.assign(Object.assign({},e.dappMetadata),{url:`${window.location.protocol}//${window.location.host}`})}this.options=e,this.options._source||(e._source=yC),this.init().then(()=>{X("[MetaMaskSDK: constructor()]: initialized successfully."),typeof window<"u"&&(window.mmsdk=this)}).catch(o=>{console.error("[MetaMaskSDK: constructor()] error during initialization",o)})}init(){return ne(this,void 0,void 0,function*(){return function(e){var n;return ne(this,void 0,void 0,function*(){if(typeof window<"u"&&(!((n=window.mmsdk)===null||n===void 0)&&n.isInitialized()))return X("[MetaMaskSDK: initializeMetaMaskSDK()] already initialized"),Promise.resolve(window.mmsdk);if(e._initialized)return X("[MetaMaskSDK: initializeMetaMaskSDK()] already initialized"),e.sdkInitPromise;if(e.sdkInitPromise)return X("[MetaMaskSDK: initializeMetaMaskSDK()] already initializing"),e.sdkInitPromise;try{e.sdkInitPromise=L$(e),yield e.sdkInitPromise}catch(r){throw console.error(r),r}return e.sdkInitPromise})}(this)})}isExtensionActive(){return this.extensionActive}checkExtensionAvailability(){var e;return typeof window<"u"&&!!(!((e=window.ethereum)===null||e===void 0)&&e.isMetaMask)}connect(){return ne(this,void 0,void 0,function*(){return function(e){return ne(this,void 0,void 0,function*(){if(e._initialized||(X("[MetaMaskSDK: connect()] provider not ready -- wait for init()"),yield e.init()),X(`[MetaMaskSDK: connect()] isExtensionActive=${e.isExtensionActive()} activeProvider`,e.activeProvider),!e.activeProvider)throw new Error("SDK state invalid -- undefined provider");const n=e.activeProvider.getSelectedAddress();return n?[n]:e.activeProvider.request({method:Se.ETH_REQUESTACCOUNTS,params:[]})})}(this)})}connectAndSign({msg:e}){return ne(this,void 0,void 0,function*(){return h$({instance:this,msg:e})})}connectWith(e){return ne(this,void 0,void 0,function*(){return function({instance:n,rpc:r}){return ne(this,void 0,void 0,function*(){if(n._initialized||(X("[MetaMaskSDK: connectWith()] provider not ready -- wait for init()"),yield n.init()),X(`[MetaMaskSDK: connectWith()] method: ${r.method} rpc=${r}`),!n.activeProvider)throw new Error("SDK state invalid -- undefined provider");return n.activeProvider.request({method:Se.METAMASK_CONNECTWITH,params:[r]})})}({instance:this,rpc:e})})}resume(){return function(e){var n,r,i;return ne(this,void 0,void 0,function*(){if(!(!((r=(n=e.remoteConnection)===null||n===void 0?void 0:n.getConnector())===null||r===void 0)&&r.isReady()))return X("[MetaMaskSDK: resume()] channel is not ready -- starting connection"),void((i=e.remoteConnection)===null||i===void 0||i.startConnection());X("[MetaMaskSDK: resume()] channel is ready")})}(this)}disconnect(){return console.warn("MetaMaskSDK.disconnect() is deprecated, use terminate()"),this.terminate()}isAuthorized(){var e;(e=this.remoteConnection)===null||e===void 0||e.isAuthorized()}terminate(){return function(e){var n,r,i;return ne(this,void 0,void 0,function*(){if(!(!((n=e.platformManager)===null||n===void 0)&&n.isMetaMaskMobileWebView())){if(f$&&(window.localStorage.removeItem($0),window.localStorage.removeItem(Dw),window.localStorage.removeItem(Bw)),e.extensionActive){try{yield(r=e.activeProvider)===null||r===void 0?void 0:r.request({method:Se.WALLET_REVOKEPERMISSIONS,params:[{eth_accounts:{}}]})}catch(s){X("[MetaMaskSDK: terminate()] error revoking permissions",s)}return e.options.extensionOnly?(e.emit(Bn.ProviderUpdate,Bi.TERMINATE),void X("[MetaMaskSDK: terminate()] extensionOnly --- prevent switching providers")):(e.activeProvider=e.sdkProvider,window.ethereum=e.activeProvider,e.extensionActive=!1,void e.emit(Bn.ProviderUpdate,Bi.TERMINATE))}e.emit(Bn.ProviderUpdate,Bi.TERMINATE),X(`[MetaMaskSDK: terminate()] remoteConnection=${e.remoteConnection}`),(i=e.remoteConnection)===null||i===void 0||i.disconnect({terminate:!0,sendMessage:!0})}})}(this)}isInitialized(){return this._initialized}setReadOnlyRPCCalls(e){this.readonlyRPCCalls=e}hasReadOnlyRPCCalls(){return this.readonlyRPCCalls}getProvider(){if(this.activeProvider)return this.activeProvider;console.warn("MetaMaskSDK: No active provider found")}getMobileProvider(){if(!this.sdkProvider)throw new Error("SDK state invalid -- undefined mobile provider");return this.sdkProvider}getUniversalLink(){var e;const n=(e=this.remoteConnection)===null||e===void 0?void 0:e.getUniversalLink();if(!n)throw new Error("No Universal Link available, please call eth_requestAccounts first.");return n}getChannelId(){var e,n;return(n=(e=this.remoteConnection)===null||e===void 0?void 0:e.getChannelConfig())===null||n===void 0?void 0:n.channelId}getRPCHistory(){var e,n;return(n=(e=this.remoteConnection)===null||e===void 0?void 0:e.getConnector())===null||n===void 0?void 0:n.getRPCMethodTracker()}getVersion(){return pl.version}getDappId(){var e,n,r,i;return typeof window>"u"||window.location===void 0?(i=(n=(e=this.options.dappMetadata)===null||e===void 0?void 0:e.name)!==null&&n!==void 0?n:(r=this.options.dappMetadata)===null||r===void 0?void 0:r.url)!==null&&i!==void 0?i:"N/A":window.location.hostname}getAnonId(){var e,n;return ne(this,void 0,void 0,function*(){if(this._anonId)return this._anonId;let r;return r=!((e=this.platformManager)===null||e===void 0)&&e.isBrowser()?this.getBrowserAnonId():!((n=this.platformManager)===null||n===void 0)&&n.isReactNative()?yield this.getReactNativeAnonId():no(),this._anonId=r,r})}getBrowserAnonId(){const e=this.ANON_ID_STORAGE_KEY;try{const n=localStorage.getItem(e);if(n)return n;const r=no();return localStorage.setItem(e,r),r}catch(n){return console.error("[MetaMaskSDK: getBrowserAnonId()] LocalStorage access error:",n),no()}}getReactNativeAnonId(){return ne(this,void 0,void 0,function*(){const e=this.ANON_ID_STORAGE_KEY;try{const n=require("@react-native-async-storage/async-storage").default,r=yield n.getItem(e);if(r)return r;const i=no();return yield n.setItem(e,i),i}catch(n){return console.error("[MetaMaskSDK: getReactNativeAnonId()] Error accessing AsyncStorage:",n),no()}})}getWalletStatus(){var e,n;return(n=(e=this.remoteConnection)===null||e===void 0?void 0:e.getConnector())===null||n===void 0?void 0:n.getConnectionStatus()}_getChannelConfig(){var e;return(e=this.remoteConnection)===null||e===void 0?void 0:e.getChannelConfig()}_ping(){var e,n;(n=(e=this.remoteConnection)===null||e===void 0?void 0:e.getConnector())===null||n===void 0||n.ping()}_keyCheck(){var e,n;(n=(e=this.remoteConnection)===null||e===void 0?void 0:e.getConnector())===null||n===void 0||n.keyCheck()}_getServiceStatus(){var e,n;return(n=(e=this.remoteConnection)===null||e===void 0?void 0:e.getConnector())===null||n===void 0?void 0:n.getServiceStatus()}_getRemoteConnection(){return this.remoteConnection}_getDappMetadata(){return this.dappMetadata}_getKeyInfo(){var e;return(e=this.remoteConnection)===null||e===void 0?void 0:e.getKeyInfo()}_resetKeys(){var e,n;(n=(e=this.remoteConnection)===null||e===void 0?void 0:e.getConnector())===null||n===void 0||n.resetKeys()}_getConnection(){return this.remoteConnection}emit(e,n){return super.emit(e,n)}on(e,n){return super.on(e,n)}}var D$=Object.freeze({__proto__:null,StorageManagerWeb:class{constructor({enabled:t}={enabled:!1}){this.enabled=!1,this.enabled=t}persistChannelConfig(t){return ne(this,void 0,void 0,function*(){const e=JSON.stringify(t);X(`[StorageManagerWeb: persistChannelConfig()] enabled=${this.enabled}`,t),localStorage.setItem(Ay,e)})}getPersistedChannelConfig(){return ne(this,void 0,void 0,function*(){let t;try{if(X(`[StorageManagerWeb: getPersistedChannelConfig()] enabled=${this.enabled}`),t=localStorage.getItem(Ay),X("[StorageManagerWeb: getPersistedChannelConfig()]",t),!t)return;const e=JSON.parse(t);return X("[StorageManagerWeb: getPersistedChannelConfig()] channelConfig",e),e}catch(e){return void console.error("[StorageManagerWeb: getPersistedChannelConfig()] Can't find existing channel config",e)}})}persistAccounts(t){return ne(this,void 0,void 0,function*(){X(`[StorageManagerWeb: persistAccounts()] enabled=${this.enabled}`,t);const e=JSON.stringify(t);localStorage.setItem(Bw,e)})}getCachedAccounts(){return ne(this,void 0,void 0,function*(){try{const t=localStorage.getItem(Bw);return t?JSON.parse(t):[]}catch(t){throw console.error("[StorageManagerWeb: getCachedAccounts()] Error reading cached accounts",t),t}})}persistChainId(t){return ne(this,void 0,void 0,function*(){X(`[StorageManagerWeb: persistChainId()] enabled=${this.enabled}`,t),localStorage.setItem(Dw,t)})}getCachedChainId(){return ne(this,void 0,void 0,function*(){try{const t=localStorage.getItem(Dw);return t??void 0}catch(t){throw console.error("[StorageManagerWeb: getCachedChainId()] Error reading cached chainId",t),t}})}terminate(){return ne(this,void 0,void 0,function*(){X(`[StorageManagerWeb: terminate()] enabled=${this.enabled}`),localStorage.removeItem(Ay)})}}});const $$="hydrated",U$=!1,F$=!0;var j$=Object.defineProperty,Db=new WeakMap,ko=t=>Db.get(t),$b=(t,e)=>Db.set(e.$lazyInstance$=t,e),TC=(t,e)=>e in t,qa=(t,e)=>(0,console.error)(t,e),Sy=new Map,Tp=new Map,rI="slot-fb{display:contents}slot-fb[hidden]{display:none}",$g=typeof window<"u"?window:{},Ii=$g.document||{head:{}},Kt={$flags$:0,$resourcesUrl$:"",jmp:t=>t(),raf:t=>requestAnimationFrame(t),ael:(t,e,n,r)=>t.addEventListener(e,n,r),rel:(t,e,n,r)=>t.removeEventListener(e,n,r),ce:(t,e)=>new CustomEvent(t,e)},iI=(()=>{try{return new CSSStyleSheet,typeof new CSSStyleSheet().replaceSync=="function"}catch{}return!1})(),Uw=!1,RC=[],sI=[],H$=(t,e)=>n=>{t.push(n),Uw||(Uw=!0,4&Kt.$flags$?Ub(Fw):Kt.raf(Fw))},IC=t=>{for(let e=0;e<t.length;e++)try{t[e](performance.now())}catch(n){qa(n)}t.length=0},Fw=()=>{IC(RC),IC(sI),(Uw=RC.length>0)&&Kt.raf(Fw)},Ub=t=>(e=>Promise.resolve(e))().then(t),K$=H$(sI),OC={},Fb=t=>(t=typeof t)=="object"||t==="function";function oI(t){var e,n,r;return(r=(n=(e=t.head)==null?void 0:e.querySelector('meta[name="csp-nonce"]'))==null?void 0:n.getAttribute("content"))!=null?r:void 0}((t,e)=>{for(var n in e)j$(t,n,{get:e[n],enumerable:!0})})({},{err:()=>aI,map:()=>z$,ok:()=>jw,unwrap:()=>V$,unwrapErr:()=>G$});var jw=t=>({isOk:!0,isErr:!1,value:t}),aI=t=>({isOk:!1,isErr:!0,value:t});function z$(t,e){if(t.isOk){const n=e(t.value);return n instanceof Promise?n.then(r=>jw(r)):jw(n)}if(t.isErr){const n=t.value;return aI(n)}throw"should never get here"}var jb,V$=t=>{if(t.isOk)return t.value;throw t.value},G$=t=>{if(t.isErr)return t.value;throw t.value},ee=(t,e,...n)=>{let r=null,i=!1,s=!1;const o=[],a=c=>{for(let u=0;u<c.length;u++)r=c[u],Array.isArray(r)?a(r):r!=null&&typeof r!="boolean"&&((i=typeof t!="function"&&!Fb(r))&&(r=String(r)),i&&s?o[o.length-1].$text$+=r:o.push(i?j0(null,r):r),s=i)};if(a(n),e){const c=e.className||e.class;c&&(e.class=typeof c!="object"?c:Object.keys(c).filter(u=>c[u]).join(" "))}if(typeof t=="function")return t(e===null?{}:e,o,q$);const l=j0(t,null);return l.$attrs$=e,o.length>0&&(l.$children$=o),l},j0=(t,e)=>({$flags$:0,$tag$:t,$text$:e,$elm$:null,$children$:null,$attrs$:null}),W$={},q$={forEach:(t,e)=>t.map(NC).forEach(e),map:(t,e)=>t.map(NC).map(e).map(Q$)},NC=t=>({vattrs:t.$attrs$,vchildren:t.$children$,vkey:t.$key$,vname:t.$name$,vtag:t.$tag$,vtext:t.$text$}),Q$=t=>{if(typeof t.vtag=="function"){const n={...t.vattrs};return t.vkey&&(n.key=t.vkey),t.vname&&(n.name=t.vname),ee(t.vtag,n,...t.vchildren||[])}const e=j0(t.vtag,t.vtext);return e.$attrs$=t.vattrs,e.$children$=t.vchildren,e.$key$=t.vkey,e.$name$=t.vname,e},Ug=t=>ko(t).$hostElement$,$o=(t,e,n)=>{const r=Ug(t);return{emit:i=>lI(r,e,{bubbles:!0,composed:!0,cancelable:!0,detail:i})}},lI=(t,e,n)=>{const r=Kt.ce(e,n);return t.dispatchEvent(r),r},MC=new WeakMap,Y$=t=>{const e=t.$cmpMeta$,n=t.$hostElement$,r=e.$flags$;e.$tagName$;const i=((s,o,a)=>{var l;const c=cI(o),u=Tp.get(c);if(s=s.nodeType===11?s:Ii,u)if(typeof u=="string"){s=s.head||s;let d,f=MC.get(s);if(f||MC.set(s,f=new Set),!f.has(c)){{d=Ii.createElement("style"),d.innerHTML=u;const h=(l=Kt.$nonce$)!=null?l:oI(Ii);if(h!=null&&d.setAttribute("nonce",h),!(1&o.$flags$))if(s.nodeName==="HEAD"){const m=s.querySelectorAll("link[rel=preconnect]"),g=m.length>0?m[m.length-1].nextSibling:s.querySelector("style");s.insertBefore(d,g)}else if("host"in s)if(iI){const m=new CSSStyleSheet;m.replaceSync(u),s.adoptedStyleSheets=[m,...s.adoptedStyleSheets]}else{const m=s.querySelector("style");m?m.innerHTML=u+m.innerHTML:s.prepend(d)}else s.append(d);1&o.$flags$&&s.nodeName!=="HEAD"&&s.insertBefore(d,null)}4&o.$flags$&&(d.innerHTML+=rI),f&&f.add(c)}}else s.adoptedStyleSheets.includes(u)||(s.adoptedStyleSheets=[...s.adoptedStyleSheets,u]);return c})(n.shadowRoot?n.shadowRoot:n.getRootNode(),e);10&r&&2&r&&(n["s-sc"]=i,n.classList.add(i+"-h"))},cI=(t,e)=>"sc-"+t.$tagName$,LC=(t,e,n,r,i,s)=>{if(n!==r){let o=TC(t,e),a=e.toLowerCase();if(e==="class"){const l=t.classList,c=BC(n),u=BC(r);l.remove(...c.filter(d=>d&&!u.includes(d))),l.add(...u.filter(d=>d&&!c.includes(d)))}else if(e==="style"){for(const l in n)r&&r[l]!=null||(l.includes("-")?t.style.removeProperty(l):t.style[l]="");for(const l in r)n&&r[l]===n[l]||(l.includes("-")?t.style.setProperty(l,r[l]):t.style[l]=r[l])}else if(o||e[0]!=="o"||e[1]!=="n"){const l=Fb(r);if((o||l&&r!==null)&&!i)try{if(t.tagName.includes("-"))t[e]=r;else{const c=r??"";e==="list"?o=!1:n!=null&&t[e]==c||(typeof t.__lookupSetter__(e)=="function"?t[e]=c:t.setAttribute(e,c))}}catch{}r==null||r===!1?r===!1&&t.getAttribute(e)!==""||t.removeAttribute(e):(!o||4&s||i)&&!l&&(r=r===!0?"":r,t.setAttribute(e,r))}else if(e=e[2]==="-"?e.slice(3):TC($g,a)?a.slice(2):a[2]+e.slice(3),n||r){const l=e.endsWith(uI);e=e.replace(Z$,""),n&&Kt.rel(t,e,n,l),r&&Kt.ael(t,e,r,l)}}},J$=/\s/,BC=t=>t?t.split(J$):[],uI="Capture",Z$=new RegExp(uI+"$"),dI=(t,e,n)=>{const r=e.$elm$.nodeType===11&&e.$elm$.host?e.$elm$.host:e.$elm$,i=t&&t.$attrs$||OC,s=e.$attrs$||OC;for(const o of DC(Object.keys(i)))o in s||LC(r,o,i[o],void 0,n,e.$flags$);for(const o of DC(Object.keys(s)))LC(r,o,i[o],s[o],n,e.$flags$)};function DC(t){return t.includes("ref")?[...t.filter(e=>e!=="ref"),"ref"]:t}var Sr=!1,Hb=(t,e,n,r)=>{const i=e.$children$[n];let s,o,a=0;if(i.$text$!==null)s=i.$elm$=Ii.createTextNode(i.$text$);else{if(Sr||(Sr=i.$tag$==="svg"),s=i.$elm$=Ii.createElementNS(Sr?"http://www.w3.org/2000/svg":"http://www.w3.org/1999/xhtml",i.$tag$),Sr&&i.$tag$==="foreignObject"&&(Sr=!1),dI(null,i,Sr),s.getRootNode().querySelector("body"),i.$children$)for(a=0;a<i.$children$.length;++a)o=Hb(t,i,a),o&&s.appendChild(o);i.$tag$==="svg"?Sr=!1:s.tagName==="foreignObject"&&(Sr=!0)}return s["s-hn"]=jb,s},$C=(t,e,n,r,i,s)=>{let o,a=t;for(a.shadowRoot&&a.tagName===jb&&(a=a.shadowRoot);i<=s;++i)r[i]&&(o=Hb(null,n,i),o&&(r[i].$elm$=o,Rp(a,o,e)))},UC=(t,e,n)=>{for(let r=e;r<=n;++r){const i=t[r];if(i){const s=i.$elm$;s&&s.remove()}}},jh=(t,e,n=!1)=>t.$tag$===e.$tag$,sd=(t,e,n=!1)=>{const r=e.$elm$=t.$elm$,i=t.$children$,s=e.$children$,o=e.$tag$,a=e.$text$;a===null?(dI(t,e,Sr=o==="svg"||o!=="foreignObject"&&Sr),i!==null&&s!==null?((l,c,u,d,f=!1)=>{let h,m=0,g=0,w=c.length-1,p=c[0],v=c[w],y=d.length-1,x=d[0],T=d[y];for(;m<=w&&g<=y;)p==null?p=c[++m]:v==null?v=c[--w]:x==null?x=d[++g]:T==null?T=d[--y]:jh(p,x,f)?(sd(p,x,f),p=c[++m],x=d[++g]):jh(v,T,f)?(sd(v,T,f),v=c[--w],T=d[--y]):jh(p,T,f)?(sd(p,T,f),Rp(l,p.$elm$,v.$elm$.nextSibling),p=c[++m],T=d[--y]):jh(v,x,f)?(sd(v,x,f),Rp(l,v.$elm$,p.$elm$),v=c[--w],x=d[++g]):(h=Hb(c&&c[g],u,g),x=d[++g],h&&Rp(p.$elm$.parentNode,h,p.$elm$));m>w?$C(l,d[y+1]==null?null:d[y+1].$elm$,u,d,g,y):g>y&&UC(c,m,w)})(r,i,e,s,n):s!==null?(t.$text$!==null&&(r.textContent=""),$C(r,null,e,s,0,s.length-1)):!n&&F$&&i!==null&&UC(i,0,i.length-1),Sr&&o==="svg"&&(Sr=!1)):t.$text$!==a&&(r.data=a)},Rp=(t,e,n)=>t==null?void 0:t.insertBefore(e,n),X$=(t,e,n=!1)=>{const r=t.$hostElement$,i=t.$cmpMeta$,s=t.$vnode$||j0(null,null),o=(a=e)&&a.$tag$===W$?e:ee(null,null,e);var a;if(jb=r.tagName,n&&o.$attrs$)for(const l of Object.keys(o.$attrs$))r.hasAttribute(l)&&!["key","ref","style","class"].includes(l)&&(o.$attrs$[l]=r[l]);o.$tag$=null,o.$flags$|=4,t.$vnode$=o,o.$elm$=s.$elm$=r.shadowRoot||r,r["s-sc"],1&i.$flags$,sd(s,o,n)},fI=(t,e)=>{e&&!t.$onRenderResolve$&&e["s-p"]&&e["s-p"].push(new Promise(n=>t.$onRenderResolve$=n))},Kb=(t,e)=>(t.$flags$|=16,4&t.$flags$?void(t.$flags$|=512):(fI(t,t.$ancestorComponent$),K$(()=>e7(t,e)))),e7=(t,e)=>{const n=t.$hostElement$;t.$cmpMeta$.$tagName$;const r=t.$lazyInstance$;if(!r)throw new Error(`Can't render component <${n.tagName.toLowerCase()} /> with invalid Stencil runtime! Make sure this imported component is compiled with a \`externalRuntime: true\` flag. For more information, please refer to https://stenciljs.com/docs/custom-elements#externalruntime`);return t7(void 0,()=>r7(t,r,e))},t7=(t,e)=>n7(t)?t.then(e).catch(n=>{console.error(n),e()}):e(),n7=t=>t instanceof Promise||t&&t.then&&typeof t.then=="function",r7=async(t,e,n)=>{var r;const i=t.$hostElement$;t.$cmpMeta$.$tagName$;const s=i["s-rc"];n&&Y$(t),t.$cmpMeta$.$tagName$,i7(t,e,i,n),s&&(s.map(o=>o()),i["s-rc"]=void 0);{const o=(r=i["s-p"])!=null?r:[],a=()=>s7(t);o.length===0?a():(Promise.all(o).then(a),t.$flags$|=4,o.length=0)}},i7=(t,e,n,r)=>{try{e=e.render(),t.$flags$&=-17,t.$flags$|=2,X$(t,e,r)}catch(i){qa(i,t.$hostElement$)}return null},s7=t=>{t.$cmpMeta$.$tagName$;const e=t.$hostElement$,n=()=>{},r=t.$lazyInstance$,i=t.$ancestorComponent$;64&t.$flags$?n():(t.$flags$|=64,pI(e),zb(r,"componentDidLoad"),t.$onReadyResolve$(e),i||hI()),t.$onRenderResolve$&&(t.$onRenderResolve$(),t.$onRenderResolve$=void 0),512&t.$flags$&&Ub(()=>Kb(t,!1)),t.$flags$&=-517},hI=t=>{pI(Ii.documentElement),Ub(()=>lI($g,"appload",{detail:{namespace:"sdk-install-modal-web"}}))},zb=(t,e,n)=>{if(t&&t[e])try{return t[e](n)}catch(r){qa(r)}},pI=t=>{var e;return t.classList.add((e=$$)!=null?e:"hydrated")},o7=(t,e,n,r)=>{const i=ko(t);if(!i)throw new Error(`Couldn't find host element for "${r.$tagName$}" as it is unknown to this Stencil runtime. This usually happens when integrating a 3rd party Stencil component with another Stencil component or application. Please reach out to the maintainers of the 3rd party Stencil component or report this on the Stencil Discord server (https://chat.stenciljs.com) or comment on this similar [GitHub issue](https://github.com/ionic-team/stencil/issues/5457).`);const s=i.$hostElement$,o=i.$instanceValues$.get(e),a=i.$flags$,l=i.$lazyInstance$;var c,u;c=n,u=r.$members$[e][0],n=c==null||Fb(c)?c:4&u?c!=="false"&&(c===""||!!c):1&u?String(c):c;const d=Number.isNaN(o)&&Number.isNaN(n);if((!(8&a)||o===void 0)&&n!==o&&!d&&(i.$instanceValues$.set(e,n),l)){if(r.$watchers$&&128&a){const f=r.$watchers$[e];f&&f.map(h=>{try{l[h](n,o,e)}catch(m){qa(m,s)}})}(18&a)==2&&Kb(i,!1)}},gI=(t,e,n)=>{var r,i;const s=t.prototype;if(e.$members$||e.$watchers$||t.watchers){t.watchers&&!e.$watchers$&&(e.$watchers$=t.watchers);const o=Object.entries((r=e.$members$)!=null?r:{});if(o.map(([a,[l]])=>{(31&l||2&n&&32&l)&&Object.defineProperty(s,a,{get(){return c=a,ko(this).$instanceValues$.get(c);var c},set(c){o7(this,a,c,e)},configurable:!0,enumerable:!0})}),1&n){const a=new Map;s.attributeChangedCallback=function(l,c,u){Kt.jmp(()=>{var d;const f=a.get(l);if(this.hasOwnProperty(f))u=this[f],delete this[f];else{if(s.hasOwnProperty(f)&&typeof this[f]=="number"&&this[f]==u)return;if(f==null){const h=ko(this),m=h==null?void 0:h.$flags$;if(m&&!(8&m)&&128&m&&u!==c){const g=h.$lazyInstance$,w=(d=e.$watchers$)==null?void 0:d[l];w==null||w.forEach(p=>{g[p]!=null&&g[p].call(g,u,c,l)})}return}}this[f]=(u!==null||typeof this[f]!="boolean")&&u})},t.observedAttributes=Array.from(new Set([...Object.keys((i=e.$watchers$)!=null?i:{}),...o.filter(([l,c])=>15&c[0]).map(([l,c])=>{const u=c[1]||l;return a.set(u,l),u})]))}}return t},a7=async(t,e,n,r)=>{let i;if(!(32&e.$flags$)){if(e.$flags$|=32,n.$lazyBundleId$){const a=((l,c,u)=>{const d=l.$tagName$.replace(/-/g,"_"),f=l.$lazyBundleId$;if(!f)return;const h=Sy.get(f);if(h)return h[d];{const m=g=>(Sy.set(f,g),g[d]);if(f==="mm-install-modal_3")return Promise.resolve().then(function(){return A7}).then(m,qa)}return F6(()=>import(`./${f}.entry.js`),void 0,import.meta.url).then(m=>(Sy.set(f,m),m[d]),qa)})(n);if(a&&"then"in a?i=await a:i=a,!i)throw new Error(`Constructor for "${n.$tagName$}#${e.$modeName$}" was not found`);i.isProxied||(n.$watchers$=i.watchers,gI(i,n,2),i.isProxied=!0),n.$tagName$,e.$flags$|=8;try{new i(e)}catch(l){qa(l)}e.$flags$&=-9,e.$flags$|=128,Hw(e.$lazyInstance$)}else{i=t.constructor;const a=t.localName;customElements.whenDefined(a).then(()=>e.$flags$|=128)}if(i&&i.style){let a;typeof i.style=="string"&&(a=i.style);const l=cI(n);Tp.has(l)||(n.$tagName$,((c,u,d)=>{let f=Tp.get(c);iI&&d?(f=f||new CSSStyleSheet,typeof f=="string"?f=u:f.replaceSync(u)):f=u,Tp.set(c,f)})(l,a,!!(1&n.$flags$)))}}const s=e.$ancestorComponent$,o=()=>Kb(e,!0);s&&s["s-rc"]?s["s-rc"].push(o):o()},Hw=t=>{zb(t,"connectedCallback")},FC=t=>{zb(t,"disconnectedCallback")},l7=(t,e={})=>{var n;const r=[],i=e.exclude||[],s=$g.customElements,o=Ii.head,a=o.querySelector("meta[charset]"),l=Ii.createElement("style"),c=[];let u,d=!0;Object.assign(Kt,e),Kt.$resourcesUrl$=new URL(e.resourcesUrl||"./",Ii.baseURI).href;let f=!1;if(t.map(h=>{h[1].map(m=>{var g;const w={$flags$:m[0],$tagName$:m[1],$members$:m[2],$listeners$:m[3]};4&w.$flags$&&(f=!0),w.$members$=m[2],w.$watchers$=(g=m[4])!=null?g:{};const p=w.$tagName$,v=class extends HTMLElement{constructor(y){if(super(y),this.hasRegisteredEventListeners=!1,((x,T)=>{const B={$flags$:0,$hostElement$:x,$cmpMeta$:T,$instanceValues$:new Map};B.$onReadyPromise$=new Promise(j=>B.$onReadyResolve$=j),x["s-p"]=[],x["s-rc"]=[],Db.set(x,B)})(y=this,w),1&w.$flags$)if(y.shadowRoot){if(y.shadowRoot.mode!=="open")throw new Error(`Unable to re-use existing shadow root for ${w.$tagName$}! Mode is set to ${y.shadowRoot.mode} but Stencil only supports open shadow roots.`)}else y.attachShadow({mode:"open"})}connectedCallback(){ko(this),this.hasRegisteredEventListeners||(this.hasRegisteredEventListeners=!0),u&&(clearTimeout(u),u=null),d?c.push(this):Kt.jmp(()=>(y=>{if(!(1&Kt.$flags$)){const x=ko(y),T=x.$cmpMeta$;if(T.$tagName$,1&x.$flags$)x!=null&&x.$lazyInstance$?Hw(x.$lazyInstance$):x!=null&&x.$onReadyPromise$&&x.$onReadyPromise$.then(()=>Hw(x.$lazyInstance$));else{x.$flags$|=1;{let B=y;for(;B=B.parentNode||B.host;)if(B["s-p"]){fI(x,x.$ancestorComponent$=B);break}}T.$members$&&Object.entries(T.$members$).map(([B,[j]])=>{if(31&j&&y.hasOwnProperty(B)){const M=y[B];delete y[B],y[B]=M}}),a7(y,x,T)}}})(this))}disconnectedCallback(){Kt.jmp(()=>(async y=>{if(!(1&Kt.$flags$)){const x=ko(y);x!=null&&x.$lazyInstance$?FC(x.$lazyInstance$):x!=null&&x.$onReadyPromise$&&x.$onReadyPromise$.then(()=>FC(x.$lazyInstance$))}})(this))}componentOnReady(){return ko(this).$onReadyPromise$}};w.$lazyBundleId$=h[0],i.includes(p)||s.get(p)||(r.push(p),s.define(p,gI(v,w,1)))})}),r.length>0&&(f&&(l.textContent+=rI),l.textContent+=r.sort()+"{visibility:hidden}.hydrated{visibility:inherit}",l.innerHTML.length)){l.setAttribute("data-styles","");const h=(n=Kt.$nonce$)!=null?n:oI(Ii);h!=null&&l.setAttribute("nonce",h),o.insertBefore(l,a?a.nextSibling:o.firstChild)}d=!1,c.length?c.map(h=>h.connectedCallback()):Kt.jmp(()=>u=setTimeout(hI,30))};(function(){if(typeof window<"u"&&window.Reflect!==void 0&&window.customElements!==void 0){var t=HTMLElement;window.HTMLElement=function(){return Reflect.construct(t,[],this.constructor)},HTMLElement.prototype=t.prototype,HTMLElement.prototype.constructor=HTMLElement,Object.setPrototypeOf(HTMLElement,t)}})();var c7=Object.freeze({__proto__:null,defineCustomElements:async(t,e)=>{if(typeof window<"u")return await void 0,l7([["mm-install-modal_3",[[1,"mm-install-modal",{link:[1],sdkVersion:[1,"sdk-version"],preferDesktop:[4,"prefer-desktop"],tab:[32],isDefaultTab:[32],translationsLoaded:[32]},null,{preferDesktop:["updatePreferDesktop"]}],[1,"mm-pending-modal",{displayOTP:[4,"display-o-t-p"],sdkVersion:[1,"sdk-version"],otpCode:[1,"otp-code"],translationsLoaded:[32]}],[1,"mm-select-modal",{link:[1],sdkVersion:[1,"sdk-version"],preferDesktop:[4,"prefer-desktop"],tab:[32],isDefaultTab:[32],translationsLoaded:[32]},null,{preferDesktop:["updatePreferDesktop"]}]]]],e)},setNonce:t=>Kt.$nonce$=t});const u7={fontFamily:"Roboto, sans-serif"},Vb=({className:t},e)=>ee("div",{style:u7,class:t},e),Cy=({Icon:t,text:e})=>ee("div",{class:"flexContainer",style:{padding:"6",flexDirection:"row"}},ee("div",{class:"flexItem1"},ee(t,null)),ee("div",{class:"flexItem11"},ee("span",{style:{lineHeight:"2",color:"black"}},e))),d7=()=>ee("svg",{width:"20",height:"18",viewBox:"0 0 20 18",fill:"none",xmlns:"http://www.w3.org/2000/svg"},ee("path",{d:"M20.0002 7.9702V10.0302C20.0002 10.5802 19.5602 11.0302 19.0002 11.0502H17.0402C15.9602 11.0502 14.9702 10.2602 14.8802 9.1802C14.8202 8.5502 15.0602 7.9602 15.4802 7.5502C15.8502 7.1702 16.3602 6.9502 16.9202 6.9502H19.0002C19.5602 6.9702 20.0002 7.4202 20.0002 7.9702Z",fill:"#037DD6"}),ee("path",{d:"M18.47 12.55H17.04C15.14 12.55 13.54 11.12 13.38 9.3C13.29 8.26 13.67 7.22 14.43 6.48C15.07 5.82 15.96 5.45 16.92 5.45H18.47C18.76 5.45 19 5.21 18.97 4.92C18.75 2.49 17.14 0.83 14.75 0.55C14.51 0.51 14.26 0.5 14 0.5H5C4.72 0.5 4.45 0.52 4.19 0.56C1.64 0.88 0 2.78 0 5.5V12.5C0 15.26 2.24 17.5 5 17.5H14C16.8 17.5 18.73 15.75 18.97 13.08C19 12.79 18.76 12.55 18.47 12.55ZM11 6.75H5C4.59 6.75 4.25 6.41 4.25 6C4.25 5.59 4.59 5.25 5 5.25H11C11.41 5.25 11.75 5.59 11.75 6C11.75 6.41 11.41 6.75 11 6.75Z",fill:"#037DD6"})),f7=()=>ee("svg",{width:"20",height:"18",viewBox:"0 0 20 18",fill:"none",xmlns:"http://www.w3.org/2000/svg"},ee("path",{d:"M14.44 0.0999756C12.63 0.0999756 11.01 0.979976 10 2.32998C8.99 0.979976 7.37 0.0999756 5.56 0.0999756C2.49 0.0999756 0 2.59998 0 5.68998C0 6.87998 0.19 7.97998 0.52 8.99998C2.1 14 6.97 16.99 9.38 17.81C9.72 17.93 10.28 17.93 10.62 17.81C13.03 16.99 17.9 14 19.48 8.99998C19.81 7.97998 20 6.87998 20 5.68998C20 2.59998 17.51 0.0999756 14.44 0.0999756Z",fill:"#037DD6"})),h7=()=>ee("svg",{width:"20",height:"20",viewBox:"0 0 20 20",fill:"none",xmlns:"http://www.w3.org/2000/svg"},ee("path",{d:"M16.28 7.53V6.28C16.28 3.58 15.63 0 10 0C4.37 0 3.72 3.58 3.72 6.28V7.53C0.92 7.88 0 9.3 0 12.79V14.65C0 18.75 1.25 20 5.35 20H14.65C18.75 20 20 18.75 20 14.65V12.79C20 9.3 19.08 7.88 16.28 7.53ZM10 16.74C8.33 16.74 6.98 15.38 6.98 13.72C6.98 12.05 8.34 10.7 10 10.7C11.66 10.7 13.02 12.06 13.02 13.72C13.02 15.39 11.67 16.74 10 16.74ZM5.35 7.44C5.27 7.44 5.2 7.44 5.12 7.44V6.28C5.12 3.35 5.95 1.4 10 1.4C14.05 1.4 14.88 3.35 14.88 6.28V7.45C14.8 7.45 14.73 7.45 14.65 7.45H5.35V7.44Z",fill:"#037DD6"})),p7=()=>ee("svg",{width:"20",height:"20",viewBox:"0 0 24 24",fill:"none",xmlns:"http://www.w3.org/2000/svg"},ee("path",{d:"M16.4405 8.8999C20.0405 9.2099 21.5105 11.0599 21.5105 15.1099V15.2399C21.5105 19.7099 19.7205 21.4999 15.2505 21.4999H8.74047C4.27047 21.4999 2.48047 19.7099 2.48047 15.2399V15.1099C2.48047 11.0899 3.93047 9.2399 7.47047 8.9099",stroke:"white","stroke-width":"1.5","stroke-linecap":"round","stroke-linejoin":"round"}),ee("path",{d:"M12 2V14.88",stroke:"white","stroke-width":"1.5","stroke-linecap":"round","stroke-linejoin":"round"}),ee("path",{d:"M15.3504 12.6499L12.0004 15.9999L8.65039 12.6499",stroke:"white","stroke-width":"1.5","stroke-linecap":"round","stroke-linejoin":"round"}));function Gb({version:t}){return ee("div",{style:{textAlign:"center",color:"#BBC0C5",fontSize:"12"}},"SDK Version ",t?`v${t}`:"unknown")}const Wb=()=>ee("svg",{width:"14",height:"14",viewBox:"0 0 16 16",fill:"none",xmlns:"http://www.w3.org/2000/svg"},ee("rect",{width:"16",height:"16",fill:"white"}),ee("path",{"fill-rule":"evenodd","clip-rule":"evenodd",d:"M2.40554 2.40554C2.94627 1.86482 3.82296 1.86482 4.36369 2.40554L8 6.04186L11.6363 2.40554C12.177 1.86482 13.0537 1.86482 13.5945 2.40554C14.1352 2.94627 14.1352 3.82296 13.5945 4.36369L9.95814 8L13.5945 11.6363C14.1352 12.177 14.1352 13.0537 13.5945 13.5945C13.0537 14.1352 12.177 14.1352 11.6363 13.5945L8 9.95814L4.36369 13.5945C3.82296 14.1352 2.94627 14.1352 2.40554 13.5945C1.86482 13.0537 1.86482 12.177 2.40554 11.6363L6.04186 8L2.40554 4.36369C1.86482 3.82296 1.86482 2.94627 2.40554 2.40554Z",fill:"#BBC0C5"})),qb=()=>ee("svg",{width:"120",xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 127 63"},ee("path",{fill:"currentColor",d:"M71.554 48.607v13.81h-7.072v-9.568l-8.059.945c-1.77.205-2.548.79-2.548 1.864 0 1.575 1.478 2.239 4.648 2.239 1.932 0 4.073-.29 5.963-.79l-3.66 5.225c-1.479.332-2.92.496-4.44.496-6.414 0-10.074-2.57-10.074-7.132 0-4.023 2.877-6.136 9.416-6.884l8.638-1.012c-.467-2.532-2.362-3.633-6.13-3.633-3.537 0-7.443.912-10.937 2.613l1.111-6.18c3.248-1.369 6.95-2.074 10.69-2.074 8.226 0 12.461 3.444 12.461 10.075l-.008.005ZM7.938 31.315.208 62.416h7.73l3.836-15.628 6.65 8.039h8.06l6.65-8.039 3.836 15.628h7.73l-7.73-31.105-14.518 17.388L7.934 31.311l.004.004ZM36.97.21 22.452 17.598 7.938.21.208 31.315h7.73l3.836-15.628 6.65 8.039h8.06l6.65-8.039 3.836 15.628h7.73L36.97.21Zm53.17 48.107-6.25-.912c-1.562-.247-2.178-.747-2.178-1.617 0-1.41 1.52-2.032 4.647-2.032 3.62 0 6.868.747 10.283 2.364l-.862-6.094c-2.757-.995-5.922-1.491-9.212-1.491-7.688 0-11.886 2.696-11.886 7.547 0 3.776 2.303 5.889 7.196 6.636l6.335.954c1.603.248 2.261.87 2.261 1.865 0 1.41-1.478 2.074-4.481 2.074-3.948 0-8.225-.953-11.72-2.654l.7 6.094c3.003 1.122 6.91 1.785 10.57 1.785 7.896 0 12.007-2.78 12.007-7.715 0-3.94-2.303-6.057-7.4-6.8l-.01-.004ZM100.3 34.09v28.325h7.071V34.091H100.3Zm15.334 15.595 9.833-10.744h-8.8l-9.296 11.114 9.912 12.356h8.925l-10.574-12.73v.004Zm-16.321-25.09c0 4.56 3.66 7.13 10.074 7.13 1.52 0 2.961-.167 4.44-.495l3.66-5.225c-1.89.496-4.031.79-5.963.79-3.166 0-4.648-.664-4.648-2.239 0-1.079.783-1.659 2.549-1.864l8.058-.945v9.567h7.072v-13.81c0-6.635-4.236-10.075-12.461-10.075-3.744 0-7.442.705-10.691 2.075l-1.112 6.178c3.495-1.701 7.401-2.613 10.937-2.613 3.769 0 5.664 1.1 6.13 3.633l-8.637 1.013c-6.539.747-9.417 2.86-9.417 6.883l.009-.004Zm-19.779-1.492c0 5.725 3.29 8.627 9.787 8.627 2.59 0 4.732-.416 6.785-1.37l.903-6.261c-1.974 1.2-3.99 1.822-6.005 1.822-3.044 0-4.402-1.243-4.402-4.023v-8.295h10.732V7.84H86.601V2.948l-13.448 7.174v3.482h6.372V23.1l.008.004Zm-6.95-2.612v1.411H53.47c.862 2.873 3.423 4.187 7.97 4.187 3.62 0 6.993-.747 9.992-2.196l-.862 6.056c-2.757 1.16-6.251 1.785-9.829 1.785-9.5 0-14.68-4.23-14.68-12.066 0-7.838 5.264-12.235 13.406-12.235s13.119 4.771 13.119 13.062l-.005-.004ZM53.378 17.09h12.086c-.637-2.751-2.732-4.188-6.08-4.188-3.349 0-5.335 1.399-6.006 4.188Z"}));function ta(t,e){return t.toString(2).padStart(e,"0")}function jC(t,e){const n=t%e;return n>=0?n:e+n}function tr(t,e){return new Array(t).fill(e)}function HC(...t){let e=0;for(const r of t)e=Math.max(e,r.length);const n=[];for(let r=0;r<e;r++)for(const i of t)r>=i.length||n.push(i[r]);return new Uint8Array(n)}function KC(t,e,n){if(n<0||n+e.length>t.length)return!1;for(let r=0;r<e.length;r++)if(e[r]!==t[n+r])return!1;return!0}function zC(t){return{has:e=>t.includes(e),decode:e=>{if(!Array.isArray(e)||e.length&&typeof e[0]!="string")throw new Error("alphabet.decode input should be array of strings");return e.map(n=>{if(typeof n!="string")throw new Error(`alphabet.decode: not string element=${n}`);const r=t.indexOf(n);if(r===-1)throw new Error(`Unknown letter: "${n}". Allowed: ${t}`);return r})},encode:e=>{if(!Array.isArray(e)||e.length&&typeof e[0]!="number")throw new Error("alphabet.encode input should be an array of numbers");return e.map(n=>{if(function(r){if(!Number.isSafeInteger(r))throw new Error(`Wrong integer: ${r}`)}(n),n<0||n>=t.length)throw new Error(`Digit index outside alphabet: ${n} (alphabet: ${t.length})`);return t[n]})}}}class Zn{static size(e,n){if(typeof e=="number"&&(e={height:e,width:e}),!Number.isSafeInteger(e.height)&&e.height!==1/0)throw new Error(`Bitmap: wrong height=${e.height} (${typeof e.height})`);if(!Number.isSafeInteger(e.width)&&e.width!==1/0)throw new Error(`Bitmap: wrong width=${e.width} (${typeof e.width})`);return n!==void 0&&(e={width:Math.min(e.width,n.width),height:Math.min(e.height,n.height)}),e}static fromString(e){const n=(e=e.replace(/^\n+/g,"").replace(/\n+$/g,"")).split(`
`),r=n.length,i=new Array(r);let s;for(const o of n){const a=o.split("").map(l=>{if(l==="X")return!0;if(l===" ")return!1;if(l!=="?")throw new Error(`Bitmap.fromString: unknown symbol=${l}`)});if(s&&a.length!==s)throw new Error(`Bitmap.fromString different row sizes: width=${s} cur=${a.length}`);s=a.length,i.push(a)}return s||(s=0),new Zn({height:r,width:s},i)}constructor(e,n){const{height:r,width:i}=Zn.size(e);this.data=n||Array.from({length:r},()=>tr(i,void 0)),this.height=r,this.width=i}point(e){return this.data[e.y][e.x]}isInside(e){return 0<=e.x&&e.x<this.width&&0<=e.y&&e.y<this.height}size(e){if(!e)return{height:this.height,width:this.width};const{x:n,y:r}=this.xy(e);return{height:this.height-r,width:this.width-n}}xy(e){if(typeof e=="number"&&(e={x:e,y:e}),!Number.isSafeInteger(e.x))throw new Error(`Bitmap: wrong x=${e.x}`);if(!Number.isSafeInteger(e.y))throw new Error(`Bitmap: wrong y=${e.y}`);return e.x=jC(e.x,this.width),e.y=jC(e.y,this.height),e}rect(e,n,r){const{x:i,y:s}=this.xy(e),{height:o,width:a}=Zn.size(n,this.size({x:i,y:s}));for(let l=0;l<o;l++)for(let c=0;c<a;c++)this.data[s+l][i+c]=typeof r=="function"?r({x:c,y:l},this.data[s+l][i+c]):r;return this}rectRead(e,n,r){return this.rect(e,n,(i,s)=>(r(i,s),s))}hLine(e,n,r){return this.rect(e,{width:n,height:1},r)}vLine(e,n,r){return this.rect(e,{width:1,height:n},r)}border(e=2,n){const r=this.height+2*e,i=this.width+2*e,s=tr(e,n),o=Array.from({length:e},()=>tr(i,n));return new Zn({height:r,width:i},[...o,...this.data.map(a=>[...s,...a,...s]),...o])}embed(e,n){return this.rect(e,n.size(),({x:r,y:i})=>n.data[i][r])}rectSlice(e,n=this.size()){const r=new Zn(Zn.size(n,this.size(this.xy(e))));return this.rect(e,n,({x:i,y:s},o)=>r.data[s][i]=o),r}inverse(){const{height:e,width:n}=this;return new Zn({height:n,width:e}).rect({x:0,y:0},1/0,({x:r,y:i})=>this.data[r][i])}scale(e){if(!Number.isSafeInteger(e)||e>1024)throw new Error(`Wrong scale factor: ${e}`);const{height:n,width:r}=this;return new Zn({height:e*n,width:e*r}).rect({x:0,y:0},1/0,({x:i,y:s})=>this.data[Math.floor(s/e)][Math.floor(i/e)])}clone(){return new Zn(this.size()).rect({x:0,y:0},this.size(),({x:e,y:n})=>this.data[n][e])}assertDrawn(){this.rectRead(0,1/0,(e,n)=>{if(typeof n!="boolean")throw new Error("Invalid color type="+typeof n)})}toString(){return this.data.map(e=>e.map(n=>n===void 0?"?":n?"X":" ").join("")).join(`
`)}toASCII(){const{height:e,width:n,data:r}=this;let i="";for(let s=0;s<e;s+=2){for(let o=0;o<n;o++){const a=r[s][o],l=s+1>=e||r[s+1][o];a||l?!a&&l?i+="▀":a&&!l?i+="▄":a&&l&&(i+=" "):i+="█"}i+=`
`}return i}toTerm(){const e="\x1B[0m",n=`\x1B[1;47m  ${e}`,r=`\x1B[40m  ${e}`;return this.data.map(i=>i.map(s=>s?r:n).join("")).join(`
`)}toSVG(){let e=`<svg xmlns:svg="http://www.w3.org/2000/svg" viewBox="0 0 ${this.width} ${this.height}" version="1.1" xmlns="http://www.w3.org/2000/svg">`;return this.rectRead(0,1/0,({x:n,y:r},i)=>{i&&(e+=`<rect x="${n}" y="${r}" width="1" height="1" />`)}),e+="</svg>",e}toGIF(){const e=a=>[255&a,a>>>8&255],n=[...e(this.width),...e(this.height)],r=[];this.rectRead(0,1/0,(a,l)=>r.push(+(l===!0)));const i=126,s=[71,73,70,56,55,97,...n,246,0,0,255,255,255,...tr(381,0),44,0,0,0,0,...n,0,7],o=Math.floor(r.length/i);for(let a=0;a<o;a++)s.push(127,128,...r.slice(i*a,i*(a+1)).map(l=>+l));return s.push(r.length%i+1,128,...r.slice(o*i).map(a=>+a)),s.push(1,129,0,59),new Uint8Array(s)}toImage(e=!1){const{height:n,width:r}=this.size(),i=new Uint8Array(n*r*(e?3:4));let s=0;for(let o=0;o<n;o++)for(let a=0;a<r;a++){const l=this.data[o][a]?0:255;i[s++]=l,i[s++]=l,i[s++]=l,e||(i[s++]=255)}return{height:n,width:r,data:i}}}const VC=["low","medium","quartile","high"],GC=["numeric","alphanumeric","byte","kanji","eci"],g7=[26,44,70,100,134,172,196,242,292,346,404,466,532,581,655,733,815,901,991,1085,1156,1258,1364,1474,1588,1706,1828,1921,2051,2185,2323,2465,2611,2761,2876,3034,3196,3362,3532,3706],m7={low:[7,10,15,20,26,18,20,24,30,18,20,24,26,30,22,24,28,30,28,28,28,28,30,30,26,28,30,30,30,30,30,30,30,30,30,30,30,30,30,30],medium:[10,16,26,18,24,16,18,22,22,26,30,22,22,24,24,28,28,26,26,26,26,28,28,28,28,28,28,28,28,28,28,28,28,28,28,28,28,28,28,28],quartile:[13,22,18,26,18,24,18,22,20,24,28,26,24,20,30,24,28,28,26,30,28,30,30,30,30,28,30,30,30,30,30,30,30,30,30,30,30,30,30,30],high:[17,28,22,16,22,28,26,26,24,28,24,28,22,24,24,30,28,28,26,28,30,24,30,30,30,30,30,30,30,30,30,30,30,30,30,30,30,30,30,30]},y7={low:[1,1,1,1,1,2,2,2,2,4,4,4,4,4,6,6,6,6,7,8,8,9,9,10,12,12,12,13,14,15,16,17,18,19,19,20,21,22,24,25],medium:[1,1,1,2,2,4,4,4,5,5,5,8,9,9,10,10,11,13,14,16,17,17,18,20,21,23,25,26,28,29,31,33,35,37,38,40,43,45,47,49],quartile:[1,1,2,2,4,4,6,6,8,8,8,10,12,16,12,17,16,18,21,20,23,23,25,27,29,34,34,35,38,40,43,45,48,51,53,56,59,62,65,68],high:[1,1,2,4,4,4,5,6,8,8,11,11,16,16,18,16,19,21,25,25,25,34,30,32,35,37,40,42,45,48,51,54,57,60,63,66,70,74,77,81]},ln={size:{encode:t=>21+4*(t-1),decode:t=>(t-17)/4},sizeType:t=>Math.floor((t+7)/17),alignmentPatterns(t){if(t===1)return[];const e=ln.size.encode(t)-6-1,n=e-6,r=Math.ceil(n/28);let i=Math.floor(n/r);i%2?i+=1:n%r*2>=r&&(i+=2);const s=[6];for(let o=1;o<r;o++)s.push(e-(r-o)*i);return s.push(e),s},ECCode:{low:1,medium:0,quartile:3,high:2},formatMask:21522,formatBits(t,e){const n=ln.ECCode[t]<<3|e;let r=n;for(let i=0;i<10;i++)r=r<<1^1335*(r>>9);return(n<<10|r)^ln.formatMask},versionBits(t){let e=t;for(let n=0;n<12;n++)e=e<<1^7973*(e>>11);return t<<12|e},alphabet:{numeric:zC("0123456789"),alphanumerc:zC("0123456789ABCDEFGHIJKLMNOPQRSTUVWXYZ $%*+-./:")},lengthBits:(t,e)=>({numeric:[10,12,14],alphanumeric:[9,11,13],byte:[8,16,16],kanji:[8,10,12],eci:[0,0,0]})[e][ln.sizeType(t)],modeBits:{numeric:"0001",alphanumeric:"0010",byte:"0100",kanji:"1000",eci:"0111"},capacity(t,e){const n=g7[t-1],r=m7[e][t-1],i=y7[e][t-1],s=Math.floor(n/i)-r,o=i-n%i;return{words:r,numBlocks:i,shortBlocks:o,blockLen:s,capacity:8*(n-r*i),total:(r+s)*i+i-o}}},Kw=[(t,e)=>(t+e)%2==0,(t,e)=>e%2==0,(t,e)=>t%3==0,(t,e)=>(t+e)%3==0,(t,e)=>(Math.floor(e/2)+Math.floor(t/3))%2==0,(t,e)=>t*e%2+t*e%3==0,(t,e)=>(t*e%2+t*e%3)%2==0,(t,e)=>((t+e)%2+t*e%3)%2==0],ge={tables:(t=>{const e=tr(256,0),n=tr(256,0);for(let r=0,i=1;r<256;r++)e[r]=i,n[i]=r,i<<=1,256&i&&(i^=285);return{exp:e,log:n}})(),exp:t=>ge.tables.exp[t],log(t){if(t===0)throw new Error(`GF.log: wrong arg=${t}`);return ge.tables.log[t]%255},mul:(t,e)=>t===0||e===0?0:ge.tables.exp[(ge.tables.log[t]+ge.tables.log[e])%255],add:(t,e)=>t^e,pow:(t,e)=>ge.tables.exp[ge.tables.log[t]*e%255],inv(t){if(t===0)throw new Error(`GF.inverse: wrong arg=${t}`);return ge.tables.exp[255-ge.tables.log[t]]},polynomial(t){if(t.length==0)throw new Error("GF.polymomial: wrong length");if(t[0]!==0)return t;let e=0;for(;e<t.length-1&&t[e]==0;e++);return t.slice(e)},monomial(t,e){if(t<0)throw new Error(`GF.monomial: wrong degree=${t}`);if(e==0)return[0];let n=tr(t+1,0);return n[0]=e,ge.polynomial(n)},degree:t=>t.length-1,coefficient:(t,e)=>t[ge.degree(t)-e],mulPoly(t,e){if(t[0]===0||e[0]===0)return[0];const n=tr(t.length+e.length-1,0);for(let r=0;r<t.length;r++)for(let i=0;i<e.length;i++)n[r+i]=ge.add(n[r+i],ge.mul(t[r],e[i]));return ge.polynomial(n)},mulPolyScalar(t,e){if(e==0)return[0];if(e==1)return t;const n=tr(t.length,0);for(let r=0;r<t.length;r++)n[r]=ge.mul(t[r],e);return ge.polynomial(n)},mulPolyMonomial(t,e,n){if(e<0)throw new Error("GF.mulPolyMonomial: wrong degree");if(n==0)return[0];const r=tr(t.length+e,0);for(let i=0;i<t.length;i++)r[i]=ge.mul(t[i],n);return ge.polynomial(r)},addPoly(t,e){if(t[0]===0)return e;if(e[0]===0)return t;let n=t,r=e;n.length>r.length&&([n,r]=[r,n]);let i=tr(r.length,0),s=r.length-n.length,o=r.slice(0,s);for(let a=0;a<o.length;a++)i[a]=o[a];for(let a=s;a<r.length;a++)i[a]=ge.add(n[a-s],r[a]);return ge.polynomial(i)},remainderPoly(t,e){const n=Array.from(t);for(let r=0;r<t.length-e.length+1;r++){const i=n[r];if(i!==0)for(let s=1;s<e.length;s++)e[s]!==0&&(n[r+s]=ge.add(n[r+s],ge.mul(e[s],i)))}return n.slice(t.length-e.length+1,n.length)},divisorPoly(t){let e=[1];for(let n=0;n<t;n++)e=ge.mulPoly(e,[1,ge.pow(2,n)]);return e},evalPoly(t,e){if(e==0)return ge.coefficient(t,0);let n=t[0];for(let r=1;r<t.length;r++)n=ge.add(ge.mul(e,n),t[r]);return n},euclidian(t,e,n){ge.degree(t)<ge.degree(e)&&([t,e]=[e,t]);let r=t,i=e,s=[0],o=[1];for(;2*ge.degree(i)>=n;){let c=r,u=s;if(r=i,s=o,r[0]===0)throw new Error("rLast[0] === 0");i=c;let d=[0];const f=ge.inv(r[0]);for(;ge.degree(i)>=ge.degree(r)&&i[0]!==0;){const h=ge.degree(i)-ge.degree(r),m=ge.mul(i[0],f);d=ge.addPoly(d,ge.monomial(h,m)),i=ge.addPoly(i,ge.mulPolyMonomial(r,h,m))}if(d=ge.mulPoly(d,s),o=ge.addPoly(d,u),ge.degree(i)>=ge.degree(r))throw new Error(`Division failed r: ${i}, rLast: ${r}`)}const a=ge.coefficient(o,0);if(a==0)throw new Error("sigmaTilde(0) was zero");const l=ge.inv(a);return[ge.mulPolyScalar(o,l),ge.mulPolyScalar(i,l)]}};function v7(t,e){const{words:n,shortBlocks:r,numBlocks:i,blockLen:s,total:o}=ln.capacity(t,e),a=(l=n,{encode(c){const u=ge.divisorPoly(l),d=Array.from(c);return d.push(...u.slice(0,-1).fill(0)),Uint8Array.from(ge.remainderPoly(d,u))},decode(c){const u=c.slice(),d=ge.polynomial(Array.from(c));let f=tr(l,0),h=!1;for(let y=0;y<l;y++){const x=ge.evalPoly(d,ge.exp(y));f[f.length-1-y]=x,x!==0&&(h=!0)}if(!h)return u;f=ge.polynomial(f);const m=ge.monomial(l,1),[g,w]=ge.euclidian(m,f,l),p=tr(ge.degree(g),0);let v=0;for(let y=1;y<256&&v<p.length;y++)ge.evalPoly(g,y)===0&&(p[v++]=ge.inv(y));if(v!==p.length)throw new Error("RS.decode: wrong errors number");for(let y=0;y<p.length;y++){const x=u.length-1-ge.log(p[y]);if(x<0)throw new Error("RS.decode: wrong error location");const T=ge.inv(p[y]);let B=1;for(let j=0;j<p.length;j++)y!==j&&(B=ge.mul(B,ge.add(1,ge.mul(p[j],T))));u[x]=ge.add(u[x],ge.mul(ge.evalPoly(w,T),ge.inv(B)))}return u}});var l;return{encode(c){const u=[],d=[];for(let g=0;g<i;g++){const w=s+(g<r?0:1);u.push(c.subarray(0,w)),d.push(a.encode(c.subarray(0,w))),c=c.subarray(w)}const f=HC(...u),h=HC(...d),m=new Uint8Array(f.length+h.length);return m.set(f),m.set(h,f.length),m},decode(c){if(c.length!==o)throw new Error(`interleave.decode: len(data)=${c.length}, total=${o}`);const u=[];for(let h=0;h<i;h++){const m=h<r;u.push(new Uint8Array(n+s+(m?0:1)))}let d=0;for(let h=0;h<s;h++)for(let m=0;m<i;m++)u[m][h]=c[d++];for(let h=r;h<i;h++)u[h][s]=c[d++];for(let h=s;h<s+n;h++)for(let m=0;m<i;m++){const g=m<r;u[m][h+(g?0:1)]=c[d++]}const f=[];for(const h of u)f.push(...Array.from(a.decode(h)).slice(0,-n));return Uint8Array.from(f)}}}function WC(t,e,n,r){let i="",s=n.length;if(r==="numeric"){const d=ln.alphabet.numeric.decode(n.split("")),f=d.length;for(let h=0;h<f-2;h+=3)i+=ta(100*d[h]+10*d[h+1]+d[h+2],10);f%3==1?i+=ta(d[f-1],4):f%3==2&&(i+=ta(10*d[f-2]+d[f-1],7))}else if(r==="alphanumeric"){const d=ln.alphabet.alphanumerc.decode(n.split("")),f=d.length;for(let h=0;h<f-1;h+=2)i+=ta(45*d[h]+d[h+1],11);f%2==1&&(i+=ta(d[f-1],6))}else{if(r!=="byte")throw new Error("encode: unsupported type");{const d=function(f){if(typeof f!="string")throw new Error("utf8ToBytes expected string, got "+typeof f);return new Uint8Array(new TextEncoder().encode(f))}(n);s=d.length,i=Array.from(d).map(f=>ta(f,8)).join("")}}const{capacity:o}=ln.capacity(t,e),a=ta(s,ln.lengthBits(t,r));let l=ln.modeBits[r]+a+i;if(l.length>o)throw new Error("Capacity overflow");l+="0".repeat(Math.min(4,Math.max(0,o-l.length))),l.length%8&&(l+="0".repeat(8-l.length%8));const c="1110110000010001";for(let d=0;l.length!==o;d++)l+=c[d%16];const u=Uint8Array.from(l.match(/(.{8})/g).map(d=>+`0b${d}`));return v7(t,e).encode(u)}function qC(t,e,n,r,i=!1){const s=function(l,c,u,d=!1){const f=ln.size.encode(l);let h=new Zn(f+2);const m=new Zn(3).rect(0,3,!0).border(1,!1).border(1,!0).border(1,!1);h=h.embed(0,m).embed({x:-m.width,y:0},m).embed({x:0,y:-m.height},m),h=h.rectSlice(1,f);const g=new Zn(1).rect(0,1,!0).border(1,!1).border(1,!0),w=ln.alignmentPatterns(l);for(const p of w)for(const v of w)h.data[p][v]===void 0&&h.embed({x:v-2,y:p-2},g);h=h.hLine({x:0,y:6},1/0,({x:p},v)=>v===void 0?p%2==0:v).vLine({x:6,y:0},1/0,({y:p},v)=>v===void 0?p%2==0:v);{const p=ln.formatBits(c,u),v=y=>!d&&(p>>y&1)==1;for(let y=0;y<6;y++)h.data[y][8]=v(y);for(let y=6;y<8;y++)h.data[y+1][8]=v(y);for(let y=8;y<15;y++)h.data[f-15+y][8]=v(y);for(let y=0;y<8;y++)h.data[8][f-y-1]=v(y);for(let y=8;y<9;y++)h.data[8][15-y-1+1]=v(y);for(let y=9;y<15;y++)h.data[8][15-y-1]=v(y);h.data[f-8][8]=!d}if(l>=7){const p=ln.versionBits(l);for(let v=0;v<18;v+=1){const y=!d&&(p>>v&1)==1,x=Math.floor(v/3),T=v%3+f-8-3;h.data[x][T]=y,h.data[T][x]=y}}return h}(t,e,r,i);let o=0;const a=8*n.length;if(function(l,c,u){const d=l.height,f=Kw[c];let h=-1,m=d-1;for(let g=d-1;g>0;g-=2){for(g==6&&(g=5);;m+=h){for(let w=0;w<2;w+=1){const p=g-w;l.data[m][p]===void 0&&u(p,m,f(p,m))}if(m+h<0||m+h>=d)break}h=-h}}(s,r,(l,c,u)=>{let d=!1;o<a&&(d=(n[o>>>3]>>(7-o&7)&1)!=0,o++),s.data[c][l]=d!==u}),o!==a)throw new Error("QR: bytes left after draw");return s}function w7(t){const e=t.inverse(),n=h=>{let m=0;for(let g,w=0,p=1;w<h.length;w++)g===h[w]&&(p++,w!==h.length-1)||(p>=5&&(m+=p-5+3),g=h[w],p=1);return m};let r=0;t.data.forEach(h=>r+=n(h)),e.data.forEach(h=>r+=n(h));let i=0,s=t.data;const o=t.width-1,a=t.height-1;for(let h=0;h<o;h++)for(let m=0;m<a;m++){const g=h+1,w=m+1;s[h][m]===s[g][m]&&s[g][m]===s[h][w]&&s[g][m]===s[g][w]&&(i+=3)}const l=h=>{const m=[!0,!1,!0,!0,!0,!1,!0],g=[!1,!1,!1,!1],w=[...m,...g],p=[...g,...m];let v=0;for(let y=0;y<h.length;y++)KC(h,w,y)&&(v+=40),KC(h,p,y)&&(v+=40);return v};let c=0;for(const h of t.data)c+=l(h);for(const h of e.data)c+=l(h);let u=0;t.rectRead(0,1/0,(h,m)=>u+=m?1:0);const d=u/(t.height*t.width)*100,f=10*Math.floor(Math.abs(d-50)/5);return r+i+c+f}function mI(t,e="raw",n={}){const r=n.ecc!==void 0?n.ecc:"medium";(function(u){if(!VC.includes(u))throw new Error(`Invalid error correction mode=${u}. Expected: ${VC}`)})(r);const i=n.encoding!==void 0?n.encoding:function(u){let d="numeric";for(let f of u)if(!ln.alphabet.numeric.has(f)&&(d="alphanumeric",!ln.alphabet.alphanumerc.has(f)))return"byte";return d}(t);(function(u){if(!GC.includes(u))throw new Error(`Encoding: invalid mode=${u}. Expected: ${GC}`);if(u==="kanji"||u==="eci")throw new Error(`Encoding: ${u} is not supported (yet?).`)})(i),n.mask!==void 0&&function(u){if(![0,1,2,3,4,5,6,7].includes(u)||!Kw[u])throw new Error(`Invalid mask=${u}. Expected number [0..7]`)}(n.mask);let s,o=n.version,a=new Error("Unknown error");if(o!==void 0)(function(u){if(!Number.isSafeInteger(u)||u<1||u>40)throw new Error(`Invalid version=${u}. Expected number [1..40]`)})(o),s=WC(o,r,t,i);else for(let u=1;u<=40;u++)try{s=WC(u,r,t,i),o=u;break}catch(d){a=d}if(!o||!s)throw a;let l=function(u,d,f,h){if(h===void 0){const m=function(){let g,w=1/0;return{add(p,v){p>=w||(g=v,w=p)},get:()=>g,score:()=>w}}();for(let g=0;g<Kw.length;g++)m.add(w7(qC(u,d,f,g,!0)),g);h=m.get()}if(h===void 0)throw new Error("Cannot find mask");return qC(u,d,f,h)}(o,r,s,n.mask);l.assertDrawn();const c=n.border===void 0?2:n.border;if(!Number.isSafeInteger(c))throw new Error("Wrong border type="+typeof c);if(l=l.border(c,!1),n.scale!==void 0&&(l=l.scale(n.scale)),e==="raw")return l.data;if(e==="ascii")return l.toASCII();if(e==="svg")return l.toSVG();if(e==="gif")return l.toGIF();if(e==="term")return l.toTerm();throw new Error(`Unknown output: ${e}`)}const xy={DESKTOP:"Desktop",MOBILE:"Mobile",META_MASK_MOBILE_APP:"MetaMask mobile app",SCAN_TO_CONNECT:"Scan to connect and sign with",CONNECT_WITH_EXTENSION:"Connect With MetaMask Extension",INSTALL_MODAL:{TRUSTED_BY_USERS:"Trusted by over 30 million users to buy, store, send and swap crypto securely",LEADING_CRYPTO_WALLET:"The leading crypto wallet & gateway to blockchain apps built on Ethereum Mainnet, Polygon, Optimism, and many other networks",CONTROL_DIGITAL_INTERACTIONS:"Puts you in control of your digital interactions by making power of cryptography more accessible",INSTALL_META_MASK_EXTENSION:"Install MetaMask Extension"},PENDING_MODAL:{OPEN_META_MASK_SELECT_CODE:"Please open the MetaMask wallet app and select the code on the screen OR disconnect",OPEN_META_MASK_CONTINUE:"Open the MetaMask app to continue with your session.",NUMBER_AFTER_OPEN_NOTICE:"If a number doesn't appear after opening MetaMask, please click disconnect and re-scan the QRCode.",DISCONNECT:"Disconnect"},SELECT_MODAL:{CRYPTO_TAKE_CONTROL_TEXT:"Take control of your crypto and explore the blockchain with the wallet trusted by over 30 million people worldwide"},META_MASK_MODAL:{ADDRESS_COPIED:"Address copied to clipboard!",DISCONNECT:"Disconnect",ACTIVE_NETWORK:"Active Network"}};class Qb{constructor(e){var n;this.translations=xy,this.supportedLocales=["es","fr","he","it","pt","tr"],this.baseUrl=(n=e==null?void 0:e.baseUrl)!==null&&n!==void 0?n:"https://raw.githubusercontent.com/MetaMask/metamask-sdk/refs/heads/gh-pages/locales"}getBrowserLanguage(){if((navigator.languages||[navigator.language]).some(n=>n.toLowerCase().startsWith("en")))return"en";const e=navigator.language.toLowerCase().split("-")[0];return this.supportedLocales.includes(e)?e:"en"}async init(e){const n=this.getBrowserLanguage()||e.fallbackLng;await this.loadTranslations(n)}async loadTranslations(e){const n=e.split("-")[0];if(n!=="en"&&this.supportedLocales.includes(n))try{const r=`${this.baseUrl}/${n}.json`,i=await fetch(r);if(!i.ok)throw new Error(`HTTP error! status: ${i.status}`);this.translations=await i.json()}catch(r){console.warn(`❌ Failed to load ${n} translations, falling back to English:`,r),this.translations=xy}else this.translations=xy}t(e){return this.getNestedTranslation(e,this.translations)||e}getNestedTranslation(e,n){const r=e.split(".");let i=n;for(const s of r){if(typeof i!="object")return"";i=i[s]}return typeof i=="string"?i:""}}var Sd;(function(t){t.SDK_MODAL_VIEWED="sdk_modal_viewed",t.SDK_MODAL_BUTTON_CLICKED="sdk_modal_button_clicked",t.SDK_MODAL_TOGGLE_CHANGED="sdk_modal_toggle_changed"})(Sd||(Sd={}));const yI=class{constructor(t){$b(this,t),this.close=$o(this,"close"),this.startDesktopOnboarding=$o(this,"startDesktopOnboarding"),this.trackAnalytics=$o(this,"trackAnalytics"),this.link=void 0,this.sdkVersion=void 0,this.preferDesktop=void 0,this.tab=1,this.isDefaultTab=!0,this.translationsLoaded=!1,this.onClose=this.onClose.bind(this),this.onStartDesktopOnboardingHandler=this.onStartDesktopOnboardingHandler.bind(this),this.setTab=this.setTab.bind(this),this.render=this.render.bind(this),this.setTab(this.preferDesktop?1:2),this.i18nInstance=new Qb}componentDidLoad(){this.trackAnalytics.emit({event:Sd.SDK_MODAL_VIEWED,params:{extensionInstalled:!1,tab:this.tab===1?"desktop":"mobile"}})}async connectedCallback(){await this.i18nInstance.init({fallbackLng:"en"}),this.translationsLoaded=!0}updatePreferDesktop(t){t?this.setTab(1):this.setTab(2)}onClose(t=!1){this.close.emit({shouldTerminate:t})}onStartDesktopOnboardingHandler(){this.trackAnalytics.emit({event:Sd.SDK_MODAL_BUTTON_CLICKED,params:{button_type:"install_extension",tab:"desktop"}}),this.startDesktopOnboarding.emit()}setTab(t,e=!1){e&&this.trackAnalytics.emit({event:Sd.SDK_MODAL_TOGGLE_CHANGED,params:{toggle:this.tab===1?"desktop_to_mobile":"mobile_to_desktop"}}),this.tab=t,this.isDefaultTab=!1}render(){if(!this.translationsLoaded)return null;const t=r=>this.i18nInstance.t(r),e=this.isDefaultTab?this.preferDesktop?1:2:this.tab,n=mI(this.link,"svg",{ecc:"medium",scale:2});return ee(Vb,{className:"install-model"},ee("div",{class:"backdrop",onClick:()=>this.onClose(!0)}),ee("div",{class:"modal"},ee("div",{class:"closeButtonContainer"},ee("div",{class:"right"},ee("span",{class:"closeButton",onClick:()=>this.onClose(!0)},ee(Wb,null)))),ee("div",{class:"logoContainer"},ee(qb,null)),ee("div",null,ee("div",{class:"tabcontainer"},ee("div",{class:"flexContainer"},ee("div",{onClick:()=>this.setTab(1,!0),class:"tab flexItem "+(e===1?"tabactive":"")},t("DESKTOP")),ee("div",{onClick:()=>this.setTab(2,!0),class:"tab flexItem "+(e===2?"tabactive":"")},t("MOBILE")))),ee("div",{style:{display:e===1?"none":"block"}},ee("div",{class:"flexContainer"},ee("div",{class:"flexItem",style:{textAlign:"center",marginTop:"4"}},n&&ee("div",{id:"sdk-mm-qrcode",class:"center",innerHTML:n}),ee("div",{class:"connectMobileText"},t("SCAN_TO_CONNECT")," ",ee("br",null),ee("span",{class:"blue"},ee("b",null,t("META_MASK_MOBILE_APP"))))))),ee("div",{style:{display:e===2?"none":"block"}},ee("div",{class:"item"},ee(Cy,{Icon:f7,text:t("INSTALL_MODAL.TRUSTED_BY_USERS")})),ee("div",{class:"item"},ee(Cy,{Icon:d7,text:t("INSTALL_MODAL.LEADING_CRYPTO_WALLET")})),ee("div",{class:"item"},ee(Cy,{Icon:h7,text:t("INSTALL_MODAL.CONTROL_DIGITAL_INTERACTIONS")})),ee("button",{class:"button",onClick:()=>this.onStartDesktopOnboardingHandler()},ee(p7,null),ee("span",{class:"installExtensionText"},t("INSTALL_MODAL.INSTALL_META_MASK_EXTENSION"))))),ee(Gb,{version:this.sdkVersion})))}get el(){return Ug(this)}static get watchers(){return{preferDesktop:["updatePreferDesktop"]}}};yI.style=`.flexContainer {
    display: flex;
    justify-content: center;
    align-items: center;
    flex-direction: row;
}

.flexItem {
    flex: 1;
    justify-content: center;
    align-items: center;
}

.flexItem11 {
    flex: 11;
    justify-content: center;
    align-items: center;
}

.flexItem1 {
    flex: 1;
    justify-content: center;
    align-items: center;
}

.tab {
    padding: 8px;
    cursor: pointer;
    background-color: #F2F4F6;
    font-size: 12px;
    text-align: center;
    color: #24292E;
}

.tabcontainer {
    padding: 4px;
    background-color: #F2F4F6;
    border-radius: 8px;
    margin-bottom: 30px;
    margin-top: 30px;
}

.tabactive {
    background-color: white;
    -webkit-transition: background-color 300ms linear;
    -ms-transition: background-color 300ms linear;
    transition: background-color 300ms linear;
    border-radius: 8px;
}

.item {
    font-size: 12px;
    margin-bottom: 16px;
    border-radius: 8px;
    padding: 10px;
    border: 2px #F2F4F6 solid;
    color: #24292E;
}

.extensionLabel {
    font-style: normal;
    font-weight: bold;
    font-size: 14px;
    text-align: cetner;
    color: #24272A;
}

.notice {
    font-size: 12px;
    margin-left: 10px;
    margin-right: 10px;
    color: grey;
}

.button {
    margin-top: 41.5px;
    margin-bottom: 20px;
    width: 100%;
    display: flex;
    flex-direction: row;
    justify-content: center;
    align-items: center;
    padding: 12px 20px;
    background: #037DD6;
    border-radius: 32px;
    color: white;
    border: 0;
    font-size: 14px;
    cursor: pointer;
}

.backdrop {
    visibility: visible;
    position: fixed;
    top: 0;
    left: 0;
    right: 0;
    bottom: 0;
    width: 100%;
    z-index: 99998;
    background: rgba(0, 0, 0, 0.87);
    opacity: 0.3;
}

.modal {
    visibility: visible;
    position: fixed;
    left: 50%;
    transform: translate(-50%, -50%);
    z-index: 99999;
    background: white;
    padding: 20px;
    border-radius: 8px;
    top: 50%;
    max-width: 100%;
    width: 460px;
    min-width: 300px;
    box-shadow: rgba(0, 0, 0, 0.2) 0px 11px 15px -7px, rgba(0, 0, 0, 0.14) 0px 24px 38px 3px, rgba(0, 0, 0, 0.12) 0px 9px 46px 8px;
    -webkit-font-smoothing: antialiased;
}

.closeButton {
    color: #BBC0C5;
    cursor: pointer;
}

.logoContainer {
    margin-left: 24px;
    margin-right: 24px;
    margin-top: 24px;
    display: flex;
    align-items: center;
    justify-content: center;
}

.connectMobileText {
    font-size: 14px;
    color: black;
    margin-top: 28px;
    margin-bottom: 28px;
    line-height: 2;
}

.blue {
    color: #037DD6;
    font-weight: 700;
}

.installExtensionText {
    margin-left: 10px;
}

.center {
    display: flex;
    justify-content: center;
    align-items: center;
}

.right {
    display: flex;
    align-items: center;
    justify-content: right;
}

#sdk-mm-qrcode {
    svg {
        width: 50%;
    }
}`;const vI=class{constructor(t){$b(this,t),this.close=$o(this,"close"),this.disconnect=$o(this,"disconnect"),this.updateOTPValue=$o(this,"updateOTPValue"),this.displayOTP=void 0,this.sdkVersion=void 0,this.otpCode=void 0,this.translationsLoaded=!1,this.i18nInstance=new Qb}async connectedCallback(){await this.i18nInstance.init({fallbackLng:"en"}),this.translationsLoaded=!0}onClose(){this.close.emit()}onDisconnect(){this.disconnect.emit()}onUpdateOTPValueHandler(t){this.updateOTPValue.emit({otpValue:t})}disconnectedCallback(){this.onClose()}render(){var t;if(!this.translationsLoaded)return null;const e=(t=this.displayOTP)===null||t===void 0||t,n=this.sdkVersion,r=i=>this.i18nInstance.t(i);return ee(Vb,{className:"pending-modal"},ee("div",{class:"backdrop",onClick:()=>this.onClose()}),ee("div",{class:"modal"},ee("div",{class:"closeButtonContainer"},ee("div",{class:"right"},ee("span",{class:"closeButton",onClick:()=>this.onClose()},ee(Wb,null)))),ee("div",{class:"logoContainer"},ee(qb,null)),ee("div",null,ee("div",{class:"flexContainer",style:{flexDirection:"column",color:"black"}},ee("div",{class:"flexItem",style:{textAlign:"center",marginTop:"30px",marginBottom:"30px",fontSize:"16px"}},r(e?"PENDING_MODAL.OPEN_META_MASK_SELECT_CODE":"PENDING_MODAL.OPEN_META_MASK_CONTINUE")),ee("div",{id:"sdk-mm-otp-value",style:{padding:"10px",fontSize:"32px",display:this.otpCode?"block":"none"}},this.otpCode),e&&ee("div",{class:"notice"},"* ",r("PENDING_MODAL.NUMBER_AFTER_OPEN_NOTICE"))),ee("div",{style:{marginTop:"20px"}},ee("button",{class:"button blue",style:{marginTop:"5px",color:"#0376C9",borderColor:"#0376C9",borderWidth:"1px",borderStyle:"solid",backgroundColor:"white"},onClick:()=>this.onDisconnect()},r("PENDING_MODAL.DISCONNECT")))),ee(Gb,{version:n})))}get el(){return Ug(this)}};vI.style=`.flexContainer {
    display: flex;
    justify-content: center;
    align-items: center;
    flex-direction: row;
}

.flexItem {
    flex: 1;
    justify-content: center;
    align-items: center;
}

.flexItem11 {
    flex: 11;
    justify-content: center;
    align-items: center;
}

.flexItem1 {
    flex: 1;
    justify-content: center;
    align-items: center;
}

.tab {
    padding: 8px;
    cursor: pointer;
    background-color: #F2F4F6;
    font-size: 12px;
    text-align: center;
    color: #24292E;
}

.tabcontainer {
    padding: 4px;
    background-color: #F2F4F6;
    border-radius: 8px;
    margin-bottom: 30px;
    margin-top: 30px;
}

.tabactive {
    background-color: white;
    -webkit-transition: background-color 300ms linear;
    -ms-transition: background-color 300ms linear;
    transition: background-color 300ms linear;
    border-radius: 8px;
}

.item {
    font-size: 12px;
    margin-bottom: 16px;
    border-radius: 8px;
    padding: 10px;
    border: 2px #F2F4F6 solid;
    color: #24292E;
}

.extensionLabel {
    font-style: normal;
    font-weight: bold;
    font-size: 14px;
    text-align: cetner;
    color: #24272A;
}

.notice {
    font-size: 12px;
    margin-left: 10px;
    margin-right: 10px;
    color: grey;
}

.button {
    margin-top: 41.5px;
    margin-bottom: 20px;
    width: 100%;
    display: flex;
    flex-direction: row;
    justify-content: center;
    align-items: center;
    padding: 12px 20px;
    background: #037DD6;
    border-radius: 32px;
    color: white;
    border: 0;
    font-size: 14px;
    cursor: pointer;
}

.backdrop {
    visibility: visible;
    position: fixed;
    top: 0;
    left: 0;
    right: 0;
    bottom: 0;
    width: 100%;
    z-index: 99998;
    background: rgba(0, 0, 0, 0.87);
    opacity: 0.3;
}

.modal {
    visibility: visible;
    position: fixed;
    left: 50%;
    transform: translate(-50%, -50%);
    z-index: 99999;
    background: white;
    padding: 20px;
    border-radius: 8px;
    top: 50%;
    max-width: 100%;
    width: 460px;
    min-width: 300px;
    box-shadow: rgba(0, 0, 0, 0.2) 0px 11px 15px -7px, rgba(0, 0, 0, 0.14) 0px 24px 38px 3px, rgba(0, 0, 0, 0.12) 0px 9px 46px 8px;
    -webkit-font-smoothing: antialiased;
}

.closeButton {
    color: #BBC0C5;
    cursor: pointer;
}

.logoContainer {
    margin-left: 24px;
    margin-right: 24px;
    margin-top: 24px;
    display: flex;
    align-items: center;
    justify-content: center;
}

.connectMobileText {
    font-size: 14px;
    color: black;
    margin-top: 28px;
    margin-bottom: 28px;
    line-height: 2;
}

.blue {
    color: #037DD6;
    font-weight: 700;
}

.installExtensionText {
    margin-left: 10px;
}

.center {
    display: flex;
    justify-content: center;
    align-items: center;
}

.right {
    display: flex;
    align-items: center;
    justify-content: right;
}

#sdk-mm-qrcode {
    svg {
        width: 50%;
    }
}`;const b7=()=>ee("svg",{width:"21",height:"15",viewBox:"0 0 21 15",fill:"none",xmlns:"http://www.w3.org/2000/svg"},ee("path",{d:"M14.1364 14.9851C13.5909 14.9851 13.2273 14.5851 13.2273 13.9851C13.2273 13.3851 13.5909 12.9851 14.1364 12.9851C16.6818 12.9851 18.6818 10.7851 18.6818 7.98508C18.6818 5.18508 16.6818 2.98508 14.1364 2.98508C11.5909 2.98508 9.59091 5.18508 9.59091 7.98508C9.59091 8.58508 9.22727 8.98508 8.68182 8.98508C8.13636 8.98508 7.77273 8.58508 7.77273 7.98508C7.77273 4.08508 10.5909 0.985077 14.1364 0.985077C17.6818 0.985077 20.5 4.08508 20.5 7.98508C20.5 11.8851 17.6818 14.9851 14.1364 14.9851ZM6.68182 14.7851C3.22727 14.7851 0.5 11.6851 0.5 7.98508C0.5 4.28508 3.22727 1.18508 6.68182 1.18508C7.22727 1.18508 7.59091 1.58508 7.59091 2.18508C7.59091 2.78508 7.22727 3.18508 6.68182 3.18508C4.22727 3.18508 2.31818 5.38508 2.31818 7.98508C2.31818 10.5851 4.22727 12.7851 6.68182 12.7851C9.13636 12.7851 11.0455 10.6851 11.0455 7.98508C11.0455 7.38508 11.4091 6.98508 11.9545 6.98508C12.5 6.98508 12.8636 7.38508 12.8636 7.98508C12.7727 11.6851 10.0455 14.7851 6.68182 14.7851Z",fill:"white"})),E7=()=>ee("svg",{width:"400",height:"300",viewBox:"0 0 400 300",fill:"none",xmlns:"http://www.w3.org/2000/svg"},ee("rect",{width:"400",height:"300",fill:"white"}),ee("path",{d:"M300.116 242.46L250.485 227.681L213.057 250.055L186.944 250.045L149.493 227.681L99.8843 242.46L84.7939 191.518L99.8843 134.979L84.7939 87.1777L99.8843 27.9336L177.402 74.2466H222.598L300.116 27.9336L315.206 87.1777L300.116 134.979L315.206 191.518L300.116 242.46Z",fill:"#FF5C16"}),ee("path",{d:"M99.8955 27.9336L177.414 74.2792L174.331 106.085L99.8955 27.9336Z",fill:"#FF5C16"}),ee("path",{d:"M149.505 191.539L183.612 217.521L149.505 227.681V191.539Z",fill:"#FF5C16"}),ee("path",{d:"M180.886 148.585L174.33 106.107L132.369 134.991L132.348 134.98V135.001L132.477 164.732L149.493 148.585H149.504H180.886Z",fill:"#FF5C16"}),ee("path",{d:"M300.116 27.9336L222.598 74.2792L225.67 106.085L300.116 27.9336Z",fill:"#FF5C16"}),ee("path",{d:"M250.508 191.539L216.4 217.521L250.508 227.681V191.539Z",fill:"#FF5C16"}),ee("path",{d:"M267.652 135.001H267.663H267.652V134.98L267.641 134.991L225.68 106.107L219.125 148.585H250.507L267.533 164.732L267.652 135.001Z",fill:"#FF5C16"}),ee("path",{d:"M149.493 227.681L99.8843 242.46L84.7939 191.54H149.493V227.681Z",fill:"#E34807"}),ee("path",{d:"M180.875 148.574L190.351 209.98L177.219 175.838L132.456 164.732L149.483 148.574H180.864H180.875Z",fill:"#E34807"}),ee("path",{d:"M250.507 227.681L300.116 242.46L315.206 191.54H250.507V227.681Z",fill:"#E34807"}),ee("path",{d:"M219.126 148.574L209.649 209.98L222.782 175.838L267.545 164.732L250.507 148.574H219.126Z",fill:"#E34807"}),ee("path",{d:"M84.7939 191.517L99.8843 134.979H132.337L132.456 164.721L177.219 175.826L190.351 209.969L183.601 217.488L149.493 191.506H84.7939V191.517Z",fill:"#FF8D5D"}),ee("path",{d:"M315.206 191.517L300.116 134.979H267.664L267.545 164.721L222.782 175.826L209.649 209.969L216.4 217.488L250.507 191.506H315.206V191.517Z",fill:"#FF8D5D"}),ee("path",{d:"M222.598 74.2466H200H177.402L174.33 106.053L190.351 209.936H209.649L225.681 106.053L222.598 74.2466Z",fill:"#FF8D5D"}),ee("path",{d:"M99.8843 27.9336L84.7939 87.1777L99.8843 134.979H132.337L174.319 106.085L99.8843 27.9336Z",fill:"#661800"}),ee("path",{d:"M171.496 160.906H156.795L148.79 168.752L177.229 175.804L171.496 160.896V160.906Z",fill:"#661800"}),ee("path",{d:"M300.116 27.9336L315.206 87.1777L300.116 134.979H267.663L225.681 106.085L300.116 27.9336Z",fill:"#661800"}),ee("path",{d:"M228.525 160.906H243.248L251.253 168.763L222.781 175.826L228.525 160.896V160.906Z",fill:"#661800"}),ee("path",{d:"M213.046 229.789L216.399 217.51L209.649 209.991H190.34L183.59 217.51L186.943 229.789",fill:"#661800"}),ee("path",{d:"M213.047 229.789V250.066H186.944V229.789H213.047Z",fill:"#C0C4CD"}),ee("path",{d:"M149.504 227.66L186.965 250.056V229.779L183.611 217.5L149.504 227.66Z",fill:"#E7EBF6"}),ee("path",{d:"M250.506 227.66L213.045 250.056V229.779L216.398 217.5L250.506 227.66Z",fill:"#E7EBF6"})),wI=class{constructor(t){$b(this,t),this.close=$o(this,"close"),this.connectWithExtension=$o(this,"connectWithExtension"),this.link=void 0,this.sdkVersion=void 0,this.preferDesktop=void 0,this.tab=1,this.isDefaultTab=!0,this.translationsLoaded=!1,this.i18nInstance=new Qb,this.setTab(this.preferDesktop?1:2)}async connectedCallback(){await this.i18nInstance.init({fallbackLng:"en"}),this.translationsLoaded=!0}onClose(t=!1){this.close.emit({shouldTerminate:t})}connectWithExtensionHandler(){this.connectWithExtension.emit()}setTab(t){this.tab=t,this.isDefaultTab=!1}disconnectedCallback(){this.onClose()}updatePreferDesktop(t){t?this.setTab(1):this.setTab(2)}render(){if(!this.translationsLoaded)return null;const t=i=>this.i18nInstance.t(i),e=this.sdkVersion,n=this.isDefaultTab?this.preferDesktop?1:2:this.tab,r=mI(this.link,"svg",{ecc:"medium",scale:2});return ee(Vb,{className:"select-modal"},ee("div",{class:"backdrop",onClick:()=>this.onClose(!0)}),ee("div",{class:"modal"},ee("div",{class:"closeButtonContainer"},ee("div",{class:"right"},ee("span",{class:"closeButton",onClick:()=>this.onClose(!0)},ee(Wb,null)))),ee("div",{class:"logoContainer"},ee(qb,null)),ee("div",null,ee("div",{class:"tabcontainer"},ee("div",{class:"flexContainer"},ee("div",{onClick:()=>this.setTab(1),class:"tab flexItem "+(n===1?"tabactive":"")},t("DESKTOP")),ee("div",{onClick:()=>this.setTab(2),class:"tab flexItem "+(n===2?"tabactive":"")},t("MOBILE")))),ee("div",{style:{display:n===1?"none":"block"}},ee("div",{class:"flexContainer"},ee("div",{class:"flexItem",style:{textAlign:"center",marginTop:"4"}},ee("div",{class:"center",id:"sdk-mm-qrcode",innerHTML:r}),ee("div",{class:"connectMobileText"},t("SCAN_TO_CONNECT"),ee("br",null),ee("span",{class:"blue"},ee("b",null,t("META_MASK_MOBILE_APP"))))))),ee("div",{style:{display:n===2?"none":"block"}},ee("div",{style:{display:"flex",justifyContent:"center",height:"300",marginTop:"-20"}},ee(E7,null)),ee("div",{class:"extensionLabel"},t("SELECT_MODAL.CRYPTO_TAKE_CONTROL_TEXT")),ee("button",{class:"button",onClick:()=>this.connectWithExtensionHandler()},ee(b7,null),ee("span",{class:"installExtensionText"},t("CONNECT_WITH_EXTENSION"))))),ee(Gb,{version:e})))}get el(){return Ug(this)}static get watchers(){return{preferDesktop:["updatePreferDesktop"]}}};wI.style=`.flexContainer {
    display: flex;
    justify-content: center;
    align-items: center;
    flex-direction: row;
}

.flexItem {
    flex: 1;
    justify-content: center;
    align-items: center;
}

.flexItem11 {
    flex: 11;
    justify-content: center;
    align-items: center;
}

.flexItem1 {
    flex: 1;
    justify-content: center;
    align-items: center;
}

.tab {
    padding: 8px;
    cursor: pointer;
    background-color: #F2F4F6;
    font-size: 12px;
    text-align: center;
    color: #24292E;
}

.tabcontainer {
    padding: 4px;
    background-color: #F2F4F6;
    border-radius: 8px;
    margin-bottom: 30px;
    margin-top: 30px;
}

.tabactive {
    background-color: white;
    -webkit-transition: background-color 300ms linear;
    -ms-transition: background-color 300ms linear;
    transition: background-color 300ms linear;
    border-radius: 8px;
}

.item {
    font-size: 12px;
    margin-bottom: 16px;
    border-radius: 8px;
    padding: 10px;
    border: 2px #F2F4F6 solid;
    color: #24292E;
}

.extensionLabel {
    font-style: normal;
    font-weight: bold;
    font-size: 14px;
    text-align: cetner;
    color: #24272A;
}

.notice {
    font-size: 12px;
    margin-left: 10px;
    margin-right: 10px;
    color: grey;
}

.button {
    margin-top: 41.5px;
    margin-bottom: 20px;
    width: 100%;
    display: flex;
    flex-direction: row;
    justify-content: center;
    align-items: center;
    padding: 12px 20px;
    background: #037DD6;
    border-radius: 32px;
    color: white;
    border: 0;
    font-size: 14px;
    cursor: pointer;
}

.backdrop {
    visibility: visible;
    position: fixed;
    top: 0;
    left: 0;
    right: 0;
    bottom: 0;
    width: 100%;
    z-index: 99998;
    background: rgba(0, 0, 0, 0.87);
    opacity: 0.3;
}

.modal {
    visibility: visible;
    position: fixed;
    left: 50%;
    transform: translate(-50%, -50%);
    z-index: 99999;
    background: white;
    padding: 20px;
    border-radius: 8px;
    top: 50%;
    max-width: 100%;
    width: 460px;
    min-width: 300px;
    box-shadow: rgba(0, 0, 0, 0.2) 0px 11px 15px -7px, rgba(0, 0, 0, 0.14) 0px 24px 38px 3px, rgba(0, 0, 0, 0.12) 0px 9px 46px 8px;
    -webkit-font-smoothing: antialiased;
}

.closeButton {
    color: #BBC0C5;
    cursor: pointer;
}

.logoContainer {
    margin-left: 24px;
    margin-right: 24px;
    margin-top: 24px;
    display: flex;
    align-items: center;
    justify-content: center;
}

.connectMobileText {
    font-size: 14px;
    color: black;
    margin-top: 28px;
    margin-bottom: 28px;
    line-height: 2;
}

.blue {
    color: #037DD6;
    font-weight: 700;
}

.installExtensionText {
    margin-left: 10px;
}

.center {
    display: flex;
    justify-content: center;
    align-items: center;
}

.right {
    display: flex;
    align-items: center;
    justify-content: right;
}

#sdk-mm-qrcode {
    svg {
        width: 50%;
    }
}`;var A7=Object.freeze({__proto__:null,mm_install_modal:yI,mm_pending_modal:vI,mm_select_modal:wI});function S7({target:t}){const[e,n]=Xe.useState(Math.floor(Date.now()/1e3));Xe.useEffect(()=>{const l=setInterval(()=>n(Math.floor(Date.now()/1e3)),1e3);return()=>clearInterval(l)},[]);const r=Math.max(0,t-e),i=Math.floor(r/86400),s=Math.floor(r%86400/3600),o=Math.floor(r%3600/60),a=r%60;return r===0?me.jsx("span",{children:"Unlocked"}):me.jsxs("span",{children:[i,"d ",s,"h ",o,"m ",a,"s"]})}const C7=[{inputs:[{internalType:"address",name:"_owner",type:"address"},{internalType:"address",name:"_asset",type:"address"},{internalType:"address",name:"_pool",type:"address"},{internalType:"address",name:"_aToken",type:"address"},{internalType:"uint256",name:"_releaseTime",type:"uint256"}],stateMutability:"nonpayable",type:"constructor"},{anonymous:!1,inputs:[{indexed:!0,internalType:"address",name:"owner",type:"address"},{indexed:!1,internalType:"uint256",name:"amount",type:"uint256"}],name:"Deposited",type:"event"},{anonymous:!1,inputs:[{indexed:!0,internalType:"address",name:"owner",type:"address"},{indexed:!1,internalType:"uint256",name:"amount",type:"uint256"},{indexed:!1,internalType:"address",name:"to",type:"address"}],name:"Withdrawn",type:"event"},{anonymous:!1,inputs:[{indexed:!1,internalType:"uint256",name:"oldReleaseTime",type:"uint256"},{indexed:!1,internalType:"uint256",name:"newReleaseTime",type:"uint256"}],name:"LockExtended",type:"event"},{inputs:[],name:"aToken",outputs:[{internalType:"contract IERC20",name:"",type:"address"}],stateMutability:"view",type:"function"},{inputs:[],name:"asset",outputs:[{internalType:"contract IERC20",name:"",type:"address"}],stateMutability:"view",type:"function"},{inputs:[{internalType:"uint256",name:"amount",type:"uint256"}],name:"deposit",outputs:[],stateMutability:"nonpayable",type:"function"},{inputs:[{internalType:"uint256",name:"newReleaseTime",type:"uint256"}],name:"extendLock",outputs:[],stateMutability:"nonpayable",type:"function"},{inputs:[],name:"maxWithdrawable",outputs:[{internalType:"uint256",name:"",type:"uint256"}],stateMutability:"view",type:"function"},{inputs:[],name:"owner",outputs:[{internalType:"address",name:"",type:"address"}],stateMutability:"view",type:"function"},{inputs:[],name:"pool",outputs:[{internalType:"contract IPool",name:"",type:"address"}],stateMutability:"view",type:"function"},{inputs:[],name:"releaseTime",outputs:[{internalType:"uint256",name:"",type:"uint256"}],stateMutability:"view",type:"function"},{inputs:[{internalType:"address",name:"to",type:"address"}],name:"withdrawAll",outputs:[],stateMutability:"nonpayable",type:"function"},{inputs:[{internalType:"uint256",name:"amount",type:"uint256"},{internalType:"address",name:"to",type:"address"}],name:"withdraw",outputs:[],stateMutability:"nonpayable",type:"function"}],x7={abi:C7},k7=[{anonymous:!1,inputs:[{indexed:!0,internalType:"address",name:"owner",type:"address"},{indexed:!1,internalType:"address",name:"vault",type:"address"},{indexed:!1,internalType:"address",name:"asset",type:"address"},{indexed:!1,internalType:"address",name:"pool",type:"address"},{indexed:!1,internalType:"address",name:"aToken",type:"address"},{indexed:!1,internalType:"uint256",name:"releaseTime",type:"uint256"}],name:"VaultCreated",type:"event"},{inputs:[{internalType:"address",name:"asset",type:"address"},{internalType:"address",name:"pool",type:"address"},{internalType:"uint256",name:"releaseTime",type:"uint256"}],name:"createVault",outputs:[{internalType:"address",name:"vault",type:"address"}],stateMutability:"nonpayable",type:"function"},{inputs:[{internalType:"address",name:"owner",type:"address"}],name:"getVaultsByOwner",outputs:[{internalType:"address[]",name:"",type:"address[]"}],stateMutability:"view",type:"function"}],_7={abi:k7},Hh=x7.abi,P7=_7.abi,QC=["function getReserveData(address asset) external view returns (uint256, uint128, uint128, uint128, uint128, uint128, uint40, address, address, address, address, uint8)","function ADDRESSES_PROVIDER() view returns (address)"],YC=["function getPool() view returns (address)","function getPoolDataProvider() view returns (address)"],T7=["function getAllReservesTokens() view returns (tuple(string symbol, address tokenAddress)[])"],R7=["function getReserveData(address asset) view returns (uint256,uint256,uint256,uint256,uint256,uint256,uint256,uint256,uint40)"];function I7(t){const r=t/1000000000000000n,i=Number(r)/1e12;return!isFinite(i)||i<0?"":`${((Math.pow(1+i/31536e3,31536e3)-1)*100).toFixed(2)}%`}const O7={1:"0x2f39d218133AFaB8F2B819B1066c7E434Ad94E9e",137:"0xa97684ead0e402dC232d5A977953DF7ECBaB3CDb",42161:"0xa97684ead0e402dC232d5A977953DF7ECBaB3CDb",10:"0xa97684ead0e402dC232d5A977953DF7ECBaB3CDb",8453:"0xa97684ead0e402dC232d5A977953DF7ECBaB3CDb",11155111:"0x012bAC54348C0E635dCAc49D8EF0093B445d2E"};function N7(){const[t,e]=Xe.useState(null);return Xe.useEffect(()=>{if(window.ethereum){const n=new g0(window.ethereum);e(n)}},[]),t}async function M7(){const t=window.ethereum;try{if(t){const e=new Promise((r,i)=>setTimeout(()=>i(new Error("injected-timeout")),3e3));return await Promise.race([t.request({method:"eth_chainId"}),e]),(await t.request({method:"eth_requestAccounts"}))[0]||null}}catch{}try{const n=new B$({dappMetadata:{name:"Aave Timelock Vault",url:"https://dapp.local"},checkInstallationImmediately:!1,preferDesktop:!1,useDeeplink:!0,enableAnalytics:!1}).getProvider();if(!n)throw new Error("metamask provider unavailable");const r=await n.request({method:"eth_requestAccounts"});return window.ethereum=n,r&&r[0]||null}catch{}return alert("Could not connect via injected provider. Opening MetaMask via deeplink/QR failed or was cancelled. Please install MetaMask or open this file on a device with MetaMask app installed and try again."),null}function L7(t){return t.slice(0,6)+"..."+t.slice(-4)}function B7(){const t=N7(),[e,n]=Xe.useState(null),[r,i]=Xe.useState(null),[s,o]=Xe.useState(""),[a,l]=Xe.useState(""),[c,u]=Xe.useState([]),[d,f]=Xe.useState(""),[h,m]=Xe.useState(""),[g,w]=Xe.useState({asset:"",pool:"",releaseIso:""});Xe.useEffect(()=>{const M=window.ethereum;M&&(M.on("chainChanged",()=>window.location.reload()),M.on("accountsChanged",()=>window.location.reload()),(async()=>{try{const U=await new g0(M).getNetwork();i(Number(U.chainId));const W=O7[Number(U.chainId)];W&&m(W)}catch{i(null)}})())},[]),Xe.useEffect(()=>{t&&(async()=>{try{let M=null;if(h?M=h:g.pool&&(M=await new kt(g.pool,QC,t).ADDRESSES_PROVIDER()),!M)return;const U=await new kt(M,YC,t).getPoolDataProvider();l(U);const $=(await new kt(U,T7,t).getAllReservesTokens()).map(N=>({symbol:N.symbol??N[0],address:N.tokenAddress??N[1]}));u($),!g.asset&&$.length>0&&w(N=>({...N,asset:$[0].address}))}catch{u([]),l("")}})()},[t,g.pool,h]),Xe.useEffect(()=>{!t||!g.asset||(async()=>{try{let M=null;if(a&&(M=(await new kt(a,R7,t).getReserveData(g.asset))[5]),!M){const K=g.pool||(h?await new kt(h,YC,t).getPool():"");if(!K){f("");return}M=(await new kt(K,QC,t).getReserveData(g.asset))[3]}if(!M){f("");return}f(I7(M))}catch{f("")}})()},[t,g.pool,g.asset,h,a]);const[p,v]=Xe.useState([]),y=Xe.useMemo(()=>!t||!s?null:new kt(s,P7,t),[t,s]);async function x(){const M=await M7();n(M)}async function T(){const M=`<!DOCTYPE html>
`+document.documentElement.outerHTML,K=new Blob([M],{type:"text/html;charset=utf-8"}),U=URL.createObjectURL(K),W=document.createElement("a");W.href=U,W.download="aave-vault-app.html",W.click(),URL.revokeObjectURL(U)}async function B(){if(!y||!e)return;const M=await y.getVaultsByOwner(e);v(M)}async function j(M){if(M.preventDefault(),!(!y||!t))try{const K=await t.getSigner(),U=Math.floor(new Date(g.releaseIso).getTime()/1e3);if(!U||U<=Math.floor(Date.now()/1e3)){alert("Release time must be in the future");return}await(await y.connect(K).createVault(g.asset,g.pool,U)).wait(),await B(),w({asset:"",pool:"",releaseIso:""})}catch(K){alert(`Error creating vault: ${K.message}`)}}return me.jsxs("div",{style:{maxWidth:900,margin:"0 auto",padding:24,fontFamily:"Inter, system-ui, Arial"},children:[me.jsx("h1",{children:"Aave Timelock Vaults"}),me.jsxs("div",{style:{display:"flex",gap:12,alignItems:"center"},children:[me.jsx("button",{onClick:x,disabled:!!e,children:e?L7(e):"Connect Wallet"}),me.jsxs("span",{children:["Chain: ",r??"—"]}),me.jsx("button",{onClick:T,children:"Download this web-app"})]}),me.jsx("hr",{style:{margin:"24px 0"}}),me.jsxs("section",{children:[me.jsx("h2",{children:"Settings"}),me.jsxs("label",{children:["Factory Address: ",me.jsx("input",{style:{width:420},value:s,onChange:M=>o(M.target.value),placeholder:"0x..."})]}),me.jsxs("div",{style:{marginTop:8,display:"grid",gap:6},children:[me.jsxs("label",{children:["Addresses Provider (optional): ",me.jsx("input",{style:{width:420},value:h,onChange:M=>m(M.target.value),placeholder:"0x... (auto by chain)"})]}),me.jsxs("label",{children:["Pool Data Provider (auto from AddressesProvider): ",me.jsx("input",{style:{width:420},value:a,onChange:M=>l(M.target.value),placeholder:"0x... (auto)"})]})]}),me.jsx("button",{onClick:B,disabled:!y||!e,style:{marginLeft:8},children:"Load My Vaults"})]}),me.jsx("hr",{style:{margin:"24px 0"}}),me.jsxs("section",{children:[me.jsx("h2",{children:"Create Vault"}),me.jsxs("form",{onSubmit:j,style:{display:"grid",gap:8,maxWidth:640},children:[c.length>0?me.jsxs("div",{style:{display:"grid",gap:6},children:[me.jsx("select",{value:g.asset,onChange:M=>w(K=>({...K,asset:M.target.value})),children:c.map(M=>me.jsxs("option",{value:M.address,children:[M.symbol," (",M.address,")"]},M.address))}),d&&me.jsxs("div",{style:{fontSize:12,color:"#666"},children:["APY actual: ",d]})]}):me.jsxs(me.Fragment,{children:[me.jsx("input",{placeholder:"Underlying token (ERC20) address",value:g.asset,onChange:M=>w(K=>({...K,asset:M.target.value}))}),d&&me.jsxs("div",{style:{fontSize:12,color:"#666"},children:["APY actual: ",d]})]}),me.jsx("input",{placeholder:"Aave V3 Pool address (auto from AddressesProvider)",value:g.pool,onChange:M=>w(K=>({...K,pool:M.target.value}))}),me.jsx(D7,{value:g.releaseIso,onChange:M=>w(K=>({...K,releaseIso:M}))}),me.jsx("button",{type:"submit",disabled:!y||!e,children:"Create Vault"})]}),me.jsx("p",{style:{fontSize:"14px",color:"#666",marginTop:"8px"},children:"💡 The aToken address is automatically derived from the pool - no need to provide it!"})]}),me.jsx("hr",{style:{margin:"24px 0"}}),me.jsxs("section",{children:[me.jsx("h2",{children:"My Vaults"}),me.jsxs("div",{style:{display:"grid",gap:12},children:[p.length===0&&me.jsx("div",{children:"No vaults found."}),p.map(M=>me.jsx($7,{vaultAddress:M,provider:t},M))]})]})]})}function D7({value:t,onChange:e}){function n(s){const o=new Date;o.setDate(o.getDate()+s),e(new Date(o.getTime()-o.getTimezoneOffset()*6e4).toISOString().slice(0,16))}function r(s){const o=new Date;o.setFullYear(o.getFullYear()+s),e(new Date(o.getTime()-o.getTimezoneOffset()*6e4).toISOString().slice(0,16))}function i(s){if(!s)return"Select a release date.";const o=new Date(s),a=new Date,l=o.getTime()-a.getTime(),c=Math.abs(l),u=Math.floor(c/6e4),d=Math.floor(u/60),f=Math.floor(d/24),h=Math.floor(f/365),m=Math.floor(f%365/30);let g="";h>0&&(g+=`${h} year${h===1?"":"s"}`),m>0&&(g+=`${g?" ":""}${m} month${m===1?"":"s"}`),!g&&f>0&&(g=`${f} day${f===1?"":"s"}`),!g&&d>0&&(g=`${d} hour${d===1?"":"s"}`),g||(g=`${u} minute${u===1?"":"s"}`);const w=o.toLocaleString();return l>=0?`Releases on ${w} (in ${g})`:`Release time passed (${g} ago) • ${w}`}return Xe.useEffect(()=>{t||n(30)},[]),me.jsxs("div",{style:{display:"grid",gap:6},children:[me.jsx("input",{type:"datetime-local",value:t,onChange:s=>e(s.target.value)}),me.jsxs("div",{style:{display:"flex",gap:6,flexWrap:"wrap"},children:[me.jsx("button",{type:"button",onClick:()=>n(30),children:"+1 month"}),me.jsx("button",{type:"button",onClick:()=>n(7),children:"+7 days"}),me.jsx("button",{type:"button",onClick:()=>r(1),children:"+1 year"}),me.jsx("button",{type:"button",onClick:()=>r(5),children:"+5 years"})]}),me.jsx("div",{style:{fontSize:12,color:"#666"},children:i(t)})]})}function $7({vaultAddress:t,provider:e}){const[n,r]=Xe.useState(null),[i,s]=Xe.useState(""),[o,a]=Xe.useState("0"),[l,c]=Xe.useState(18);Xe.useEffect(()=>{if(!e)return;const m=new kt(t,Hh,e);(async()=>{const g=await m.asset(),w=await m.aToken(),p=await m.releaseTime(),v=await new kt(g,["function decimals() view returns (uint8)"],e).decimals();c(Number(v)),r({asset:g,aToken:w,releaseTime:Number(p)})})()},[e,t]);async function u(){if(!e||!n)return;const m=await new kt(n.aToken,["function balanceOf(address) view returns (uint256)"],e).balanceOf(t);a(xN(m,l))}Xe.useEffect(()=>{u()},[n]);async function d(m){if(m.preventDefault(),!e||!n)return;const g=await e.getSigner(),w=b2(i||"0",l);if(w===0n)return;const p=new kt(n.asset,["function approve(address spender, uint256 amount) returns (bool)","function allowance(address owner, address spender) view returns (uint256)","function balanceOf(address owner) view returns (uint256)"],e);await p.allowance(await g.getAddress(),t)<w&&await(await p.connect(g).approve(t,w)).wait(),await(await new kt(t,Hh,e).connect(g).deposit(w)).wait(),s(""),await u()}async function f(){if(!e||!n)return;const m=await e.getSigner(),g=new kt(t,Hh,e),w=Math.floor(Date.now()/1e3),p=n.releaseTime;if(w<p){alert("Vault is still locked");return}await(await g.connect(m).withdrawAll(await m.getAddress())).wait(),await u()}async function h(){if(!e||!n)return;const m=await e.getSigner(),g=new kt(t,Hh,e),w=Math.floor(Date.now()/1e3),p=n.releaseTime;if(w<p){alert("Vault is still locked");return}const v=b2(i||"0",l);if(v===0n)return;await(await g.connect(m).withdraw(v,await m.getAddress())).wait(),s(""),await u()}return me.jsxs("div",{style:{border:"1px solid #ddd",borderRadius:8,padding:12},children:[me.jsxs("div",{style:{display:"flex",justifyContent:"space-between",alignItems:"center"},children:[me.jsx("strong",{children:t}),n&&me.jsx(S7,{target:n.releaseTime})]}),me.jsxs("div",{style:{display:"grid",gap:6,marginTop:8,fontSize:14},children:[me.jsxs("div",{children:["aToken balance (est. withdrawable): ",o]}),n&&me.jsxs(me.Fragment,{children:[me.jsxs("div",{children:["Asset: ",n.asset]}),me.jsxs("div",{children:["aToken: ",n.aToken]}),me.jsxs("div",{children:["Release time: ",new Date(n.releaseTime*1e3).toLocaleString()]})]})]}),me.jsxs("form",{onSubmit:d,style:{display:"flex",gap:8,marginTop:8},children:[me.jsx("input",{placeholder:"Amount",value:i,onChange:m=>s(m.target.value)}),me.jsx("button",{type:"submit",children:"Approve + Deposit"})]}),me.jsxs("div",{style:{display:"flex",gap:8,marginTop:8},children:[me.jsx("button",{onClick:h,children:"Withdraw"}),me.jsx("button",{onClick:f,children:"Withdraw All"})]})]})}ky.createRoot(document.getElementById("root")).render(me.jsx(zI.StrictMode,{children:me.jsx(B7,{})}));</script>
  </head>
  <body>
    <div id="root"></div>
  </body>
</html>
