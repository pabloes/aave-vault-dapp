<!doctype html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>Aave Vault DApp</title>
    <script type="module" crossorigin>var RI=Object.defineProperty;var iE=t=>{throw TypeError(t)};var II=(t,e,n)=>e in t?RI(t,e,{enumerable:!0,configurable:!0,writable:!0,value:n}):t[e]=n;var Y=(t,e,n)=>II(t,typeof e!="symbol"?e+"":e,n),Vg=(t,e,n)=>e.has(t)||iE("Cannot "+n);var _=(t,e,n)=>(Vg(t,e,"read from private field"),n?n.call(t):e.get(t)),ee=(t,e,n)=>e.has(t)?iE("Cannot add the same private member more than once"):e instanceof WeakSet?e.add(t):e.set(t,n),H=(t,e,n,r)=>(Vg(t,e,"write to private field"),r?r.call(t,n):e.set(t,n),n),ge=(t,e,n)=>(Vg(t,e,"access private method"),n);var Pu=(t,e,n,r)=>({set _(i){H(t,e,i,n)},get _(){return _(t,e,r)}});(function(){const e=document.createElement("link").relList;if(e&&e.supports&&e.supports("modulepreload"))return;for(const i of document.querySelectorAll('link[rel="modulepreload"]'))r(i);new MutationObserver(i=>{for(const s of i)if(s.type==="childList")for(const o of s.addedNodes)o.tagName==="LINK"&&o.rel==="modulepreload"&&r(o)}).observe(document,{childList:!0,subtree:!0});function n(i){const s={};return i.integrity&&(s.integrity=i.integrity),i.referrerPolicy&&(s.referrerPolicy=i.referrerPolicy),i.crossOrigin==="use-credentials"?s.credentials="include":i.crossOrigin==="anonymous"?s.credentials="omit":s.credentials="same-origin",s}function r(i){if(i.ep)return;i.ep=!0;const s=n(i);fetch(i.href,s)}})();var qf=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};function X0(t){return t&&t.__esModule&&Object.prototype.hasOwnProperty.call(t,"default")?t.default:t}var nC={exports:{}},eg={},rC={exports:{}},$e={};/**
 * @license React
 * react.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var Tf=Symbol.for("react.element"),OI=Symbol.for("react.portal"),NI=Symbol.for("react.fragment"),MI=Symbol.for("react.strict_mode"),LI=Symbol.for("react.profiler"),BI=Symbol.for("react.provider"),DI=Symbol.for("react.context"),$I=Symbol.for("react.forward_ref"),UI=Symbol.for("react.suspense"),FI=Symbol.for("react.memo"),jI=Symbol.for("react.lazy"),sE=Symbol.iterator;function HI(t){return t===null||typeof t!="object"?null:(t=sE&&t[sE]||t["@@iterator"],typeof t=="function"?t:null)}var iC={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},sC=Object.assign,oC={};function bu(t,e,n){this.props=t,this.context=e,this.refs=oC,this.updater=n||iC}bu.prototype.isReactComponent={};bu.prototype.setState=function(t,e){if(typeof t!="object"&&typeof t!="function"&&t!=null)throw Error("setState(...): takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,t,e,"setState")};bu.prototype.forceUpdate=function(t){this.updater.enqueueForceUpdate(this,t,"forceUpdate")};function aC(){}aC.prototype=bu.prototype;function qw(t,e,n){this.props=t,this.context=e,this.refs=oC,this.updater=n||iC}var Qw=qw.prototype=new aC;Qw.constructor=qw;sC(Qw,bu.prototype);Qw.isPureReactComponent=!0;var oE=Array.isArray,lC=Object.prototype.hasOwnProperty,Yw={current:null},cC={key:!0,ref:!0,__self:!0,__source:!0};function uC(t,e,n){var r,i={},s=null,o=null;if(e!=null)for(r in e.ref!==void 0&&(o=e.ref),e.key!==void 0&&(s=""+e.key),e)lC.call(e,r)&&!cC.hasOwnProperty(r)&&(i[r]=e[r]);var a=arguments.length-2;if(a===1)i.children=n;else if(1<a){for(var l=Array(a),c=0;c<a;c++)l[c]=arguments[c+2];i.children=l}if(t&&t.defaultProps)for(r in a=t.defaultProps,a)i[r]===void 0&&(i[r]=a[r]);return{$$typeof:Tf,type:t,key:s,ref:o,props:i,_owner:Yw.current}}function KI(t,e){return{$$typeof:Tf,type:t.type,key:e,ref:t.ref,props:t.props,_owner:t._owner}}function Jw(t){return typeof t=="object"&&t!==null&&t.$$typeof===Tf}function zI(t){var e={"=":"=0",":":"=2"};return"$"+t.replace(/[=:]/g,function(n){return e[n]})}var aE=/\/+/g;function Gg(t,e){return typeof t=="object"&&t!==null&&t.key!=null?zI(""+t.key):e.toString(36)}function Gh(t,e,n,r,i){var s=typeof t;(s==="undefined"||s==="boolean")&&(t=null);var o=!1;if(t===null)o=!0;else switch(s){case"string":case"number":o=!0;break;case"object":switch(t.$$typeof){case Tf:case OI:o=!0}}if(o)return o=t,i=i(o),t=r===""?"."+Gg(o,0):r,oE(i)?(n="",t!=null&&(n=t.replace(aE,"$&/")+"/"),Gh(i,e,n,"",function(c){return c})):i!=null&&(Jw(i)&&(i=KI(i,n+(!i.key||o&&o.key===i.key?"":(""+i.key).replace(aE,"$&/")+"/")+t)),e.push(i)),1;if(o=0,r=r===""?".":r+":",oE(t))for(var a=0;a<t.length;a++){s=t[a];var l=r+Gg(s,a);o+=Gh(s,e,n,l,i)}else if(l=HI(t),typeof l=="function")for(t=l.call(t),a=0;!(s=t.next()).done;)s=s.value,l=r+Gg(s,a++),o+=Gh(s,e,n,l,i);else if(s==="object")throw e=String(t),Error("Objects are not valid as a React child (found: "+(e==="[object Object]"?"object with keys {"+Object.keys(t).join(", ")+"}":e)+"). If you meant to render a collection of children, use an array instead.");return o}function Qf(t,e,n){if(t==null)return t;var r=[],i=0;return Gh(t,r,"","",function(s){return e.call(n,s,i++)}),r}function VI(t){if(t._status===-1){var e=t._result;e=e(),e.then(function(n){(t._status===0||t._status===-1)&&(t._status=1,t._result=n)},function(n){(t._status===0||t._status===-1)&&(t._status=2,t._result=n)}),t._status===-1&&(t._status=0,t._result=e)}if(t._status===1)return t._result.default;throw t._result}var kn={current:null},Wh={transition:null},GI={ReactCurrentDispatcher:kn,ReactCurrentBatchConfig:Wh,ReactCurrentOwner:Yw};function dC(){throw Error("act(...) is not supported in production builds of React.")}$e.Children={map:Qf,forEach:function(t,e,n){Qf(t,function(){e.apply(this,arguments)},n)},count:function(t){var e=0;return Qf(t,function(){e++}),e},toArray:function(t){return Qf(t,function(e){return e})||[]},only:function(t){if(!Jw(t))throw Error("React.Children.only expected to receive a single React element child.");return t}};$e.Component=bu;$e.Fragment=NI;$e.Profiler=LI;$e.PureComponent=qw;$e.StrictMode=MI;$e.Suspense=UI;$e.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=GI;$e.act=dC;$e.cloneElement=function(t,e,n){if(t==null)throw Error("React.cloneElement(...): The argument must be a React element, but you passed "+t+".");var r=sC({},t.props),i=t.key,s=t.ref,o=t._owner;if(e!=null){if(e.ref!==void 0&&(s=e.ref,o=Yw.current),e.key!==void 0&&(i=""+e.key),t.type&&t.type.defaultProps)var a=t.type.defaultProps;for(l in e)lC.call(e,l)&&!cC.hasOwnProperty(l)&&(r[l]=e[l]===void 0&&a!==void 0?a[l]:e[l])}var l=arguments.length-2;if(l===1)r.children=n;else if(1<l){a=Array(l);for(var c=0;c<l;c++)a[c]=arguments[c+2];r.children=a}return{$$typeof:Tf,type:t.type,key:i,ref:s,props:r,_owner:o}};$e.createContext=function(t){return t={$$typeof:DI,_currentValue:t,_currentValue2:t,_threadCount:0,Provider:null,Consumer:null,_defaultValue:null,_globalName:null},t.Provider={$$typeof:BI,_context:t},t.Consumer=t};$e.createElement=uC;$e.createFactory=function(t){var e=uC.bind(null,t);return e.type=t,e};$e.createRef=function(){return{current:null}};$e.forwardRef=function(t){return{$$typeof:$I,render:t}};$e.isValidElement=Jw;$e.lazy=function(t){return{$$typeof:jI,_payload:{_status:-1,_result:t},_init:VI}};$e.memo=function(t,e){return{$$typeof:FI,type:t,compare:e===void 0?null:e}};$e.startTransition=function(t){var e=Wh.transition;Wh.transition={};try{t()}finally{Wh.transition=e}};$e.unstable_act=dC;$e.useCallback=function(t,e){return kn.current.useCallback(t,e)};$e.useContext=function(t){return kn.current.useContext(t)};$e.useDebugValue=function(){};$e.useDeferredValue=function(t){return kn.current.useDeferredValue(t)};$e.useEffect=function(t,e){return kn.current.useEffect(t,e)};$e.useId=function(){return kn.current.useId()};$e.useImperativeHandle=function(t,e,n){return kn.current.useImperativeHandle(t,e,n)};$e.useInsertionEffect=function(t,e){return kn.current.useInsertionEffect(t,e)};$e.useLayoutEffect=function(t,e){return kn.current.useLayoutEffect(t,e)};$e.useMemo=function(t,e){return kn.current.useMemo(t,e)};$e.useReducer=function(t,e,n){return kn.current.useReducer(t,e,n)};$e.useRef=function(t){return kn.current.useRef(t)};$e.useState=function(t){return kn.current.useState(t)};$e.useSyncExternalStore=function(t,e,n){return kn.current.useSyncExternalStore(t,e,n)};$e.useTransition=function(){return kn.current.useTransition()};$e.version="18.3.1";rC.exports=$e;var Se=rC.exports;const WI=X0(Se);/**
 * @license React
 * react-jsx-runtime.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var qI=Se,QI=Symbol.for("react.element"),YI=Symbol.for("react.fragment"),JI=Object.prototype.hasOwnProperty,ZI=qI.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED.ReactCurrentOwner,XI={key:!0,ref:!0,__self:!0,__source:!0};function fC(t,e,n){var r,i={},s=null,o=null;n!==void 0&&(s=""+n),e.key!==void 0&&(s=""+e.key),e.ref!==void 0&&(o=e.ref);for(r in e)JI.call(e,r)&&!XI.hasOwnProperty(r)&&(i[r]=e[r]);if(t&&t.defaultProps)for(r in e=t.defaultProps,e)i[r]===void 0&&(i[r]=e[r]);return{$$typeof:QI,type:t,key:s,ref:o,props:i,_owner:ZI.current}}eg.Fragment=YI;eg.jsx=fC;eg.jsxs=fC;nC.exports=eg;var ce=nC.exports,Ry={},hC={exports:{}},or={},pC={exports:{}},gC={};/**
 * @license React
 * scheduler.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */(function(t){function e(b,E){var k=b.length;b.push(E);e:for(;0<k;){var I=k-1>>>1,A=b[I];if(0<i(A,E))b[I]=E,b[k]=A,k=I;else break e}}function n(b){return b.length===0?null:b[0]}function r(b){if(b.length===0)return null;var E=b[0],k=b.pop();if(k!==E){b[0]=k;e:for(var I=0,A=b.length,S=A>>>1;I<S;){var T=2*(I+1)-1,R=b[T],N=T+1,U=b[N];if(0>i(R,k))N<A&&0>i(U,R)?(b[I]=U,b[N]=k,I=N):(b[I]=R,b[T]=k,I=T);else if(N<A&&0>i(U,k))b[I]=U,b[N]=k,I=N;else break e}}return E}function i(b,E){var k=b.sortIndex-E.sortIndex;return k!==0?k:b.id-E.id}if(typeof performance=="object"&&typeof performance.now=="function"){var s=performance;t.unstable_now=function(){return s.now()}}else{var o=Date,a=o.now();t.unstable_now=function(){return o.now()-a}}var l=[],c=[],u=1,d=null,f=3,h=!1,m=!1,g=!1,w=typeof setTimeout=="function"?setTimeout:null,p=typeof clearTimeout=="function"?clearTimeout:null,v=typeof setImmediate<"u"?setImmediate:null;typeof navigator<"u"&&navigator.scheduling!==void 0&&navigator.scheduling.isInputPending!==void 0&&navigator.scheduling.isInputPending.bind(navigator.scheduling);function y(b){for(var E=n(c);E!==null;){if(E.callback===null)r(c);else if(E.startTime<=b)r(c),E.sortIndex=E.expirationTime,e(l,E);else break;E=n(c)}}function C(b){if(g=!1,y(b),!m)if(n(l)!==null)m=!0,O(P);else{var E=n(c);E!==null&&B(C,E.startTime-b)}}function P(b,E){m=!1,g&&(g=!1,p(D),D=-1),h=!0;var k=f;try{for(y(E),d=n(l);d!==null&&(!(d.expirationTime>E)||b&&!W());){var I=d.callback;if(typeof I=="function"){d.callback=null,f=d.priorityLevel;var A=I(d.expirationTime<=E);E=t.unstable_now(),typeof A=="function"?d.callback=A:d===n(l)&&r(l),y(E)}else r(l);d=n(l)}if(d!==null)var S=!0;else{var T=n(c);T!==null&&B(C,T.startTime-E),S=!1}return S}finally{d=null,f=k,h=!1}}var L=!1,j=null,D=-1,V=5,F=-1;function W(){return!(t.unstable_now()-F<V)}function K(){if(j!==null){var b=t.unstable_now();F=b;var E=!0;try{E=j(!0,b)}finally{E?$():(L=!1,j=null)}}else L=!1}var $;if(typeof v=="function")$=function(){v(K)};else if(typeof MessageChannel<"u"){var M=new MessageChannel,x=M.port2;M.port1.onmessage=K,$=function(){x.postMessage(null)}}else $=function(){w(K,0)};function O(b){j=b,L||(L=!0,$())}function B(b,E){D=w(function(){b(t.unstable_now())},E)}t.unstable_IdlePriority=5,t.unstable_ImmediatePriority=1,t.unstable_LowPriority=4,t.unstable_NormalPriority=3,t.unstable_Profiling=null,t.unstable_UserBlockingPriority=2,t.unstable_cancelCallback=function(b){b.callback=null},t.unstable_continueExecution=function(){m||h||(m=!0,O(P))},t.unstable_forceFrameRate=function(b){0>b||125<b?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):V=0<b?Math.floor(1e3/b):5},t.unstable_getCurrentPriorityLevel=function(){return f},t.unstable_getFirstCallbackNode=function(){return n(l)},t.unstable_next=function(b){switch(f){case 1:case 2:case 3:var E=3;break;default:E=f}var k=f;f=E;try{return b()}finally{f=k}},t.unstable_pauseExecution=function(){},t.unstable_requestPaint=function(){},t.unstable_runWithPriority=function(b,E){switch(b){case 1:case 2:case 3:case 4:case 5:break;default:b=3}var k=f;f=b;try{return E()}finally{f=k}},t.unstable_scheduleCallback=function(b,E,k){var I=t.unstable_now();switch(typeof k=="object"&&k!==null?(k=k.delay,k=typeof k=="number"&&0<k?I+k:I):k=I,b){case 1:var A=-1;break;case 2:A=250;break;case 5:A=1073741823;break;case 4:A=1e4;break;default:A=5e3}return A=k+A,b={id:u++,callback:E,priorityLevel:b,startTime:k,expirationTime:A,sortIndex:-1},k>I?(b.sortIndex=k,e(c,b),n(l)===null&&b===n(c)&&(g?(p(D),D=-1):g=!0,B(C,k-I))):(b.sortIndex=A,e(l,b),m||h||(m=!0,O(P))),b},t.unstable_shouldYield=W,t.unstable_wrapCallback=function(b){var E=f;return function(){var k=f;f=E;try{return b.apply(this,arguments)}finally{f=k}}}})(gC);pC.exports=gC;var eO=pC.exports;/**
 * @license React
 * react-dom.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var tO=Se,sr=eO;function ye(t){for(var e="https://reactjs.org/docs/error-decoder.html?invariant="+t,n=1;n<arguments.length;n++)e+="&args[]="+encodeURIComponent(arguments[n]);return"Minified React error #"+t+"; visit "+e+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}var mC=new Set,kd={};function ll(t,e){tu(t,e),tu(t+"Capture",e)}function tu(t,e){for(kd[t]=e,t=0;t<e.length;t++)mC.add(e[t])}var As=!(typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"),Iy=Object.prototype.hasOwnProperty,nO=/^[:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD][:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD\-.0-9\u00B7\u0300-\u036F\u203F-\u2040]*$/,lE={},cE={};function rO(t){return Iy.call(cE,t)?!0:Iy.call(lE,t)?!1:nO.test(t)?cE[t]=!0:(lE[t]=!0,!1)}function iO(t,e,n,r){if(n!==null&&n.type===0)return!1;switch(typeof e){case"function":case"symbol":return!0;case"boolean":return r?!1:n!==null?!n.acceptsBooleans:(t=t.toLowerCase().slice(0,5),t!=="data-"&&t!=="aria-");default:return!1}}function sO(t,e,n,r){if(e===null||typeof e>"u"||iO(t,e,n,r))return!0;if(r)return!1;if(n!==null)switch(n.type){case 3:return!e;case 4:return e===!1;case 5:return isNaN(e);case 6:return isNaN(e)||1>e}return!1}function _n(t,e,n,r,i,s,o){this.acceptsBooleans=e===2||e===3||e===4,this.attributeName=r,this.attributeNamespace=i,this.mustUseProperty=n,this.propertyName=t,this.type=e,this.sanitizeURL=s,this.removeEmptyString=o}var Qt={};"children dangerouslySetInnerHTML defaultValue defaultChecked innerHTML suppressContentEditableWarning suppressHydrationWarning style".split(" ").forEach(function(t){Qt[t]=new _n(t,0,!1,t,null,!1,!1)});[["acceptCharset","accept-charset"],["className","class"],["htmlFor","for"],["httpEquiv","http-equiv"]].forEach(function(t){var e=t[0];Qt[e]=new _n(e,1,!1,t[1],null,!1,!1)});["contentEditable","draggable","spellCheck","value"].forEach(function(t){Qt[t]=new _n(t,2,!1,t.toLowerCase(),null,!1,!1)});["autoReverse","externalResourcesRequired","focusable","preserveAlpha"].forEach(function(t){Qt[t]=new _n(t,2,!1,t,null,!1,!1)});"allowFullScreen async autoFocus autoPlay controls default defer disabled disablePictureInPicture disableRemotePlayback formNoValidate hidden loop noModule noValidate open playsInline readOnly required reversed scoped seamless itemScope".split(" ").forEach(function(t){Qt[t]=new _n(t,3,!1,t.toLowerCase(),null,!1,!1)});["checked","multiple","muted","selected"].forEach(function(t){Qt[t]=new _n(t,3,!0,t,null,!1,!1)});["capture","download"].forEach(function(t){Qt[t]=new _n(t,4,!1,t,null,!1,!1)});["cols","rows","size","span"].forEach(function(t){Qt[t]=new _n(t,6,!1,t,null,!1,!1)});["rowSpan","start"].forEach(function(t){Qt[t]=new _n(t,5,!1,t.toLowerCase(),null,!1,!1)});var Zw=/[\-:]([a-z])/g;function Xw(t){return t[1].toUpperCase()}"accent-height alignment-baseline arabic-form baseline-shift cap-height clip-path clip-rule color-interpolation color-interpolation-filters color-profile color-rendering dominant-baseline enable-background fill-opacity fill-rule flood-color flood-opacity font-family font-size font-size-adjust font-stretch font-style font-variant font-weight glyph-name glyph-orientation-horizontal glyph-orientation-vertical horiz-adv-x horiz-origin-x image-rendering letter-spacing lighting-color marker-end marker-mid marker-start overline-position overline-thickness paint-order panose-1 pointer-events rendering-intent shape-rendering stop-color stop-opacity strikethrough-position strikethrough-thickness stroke-dasharray stroke-dashoffset stroke-linecap stroke-linejoin stroke-miterlimit stroke-opacity stroke-width text-anchor text-decoration text-rendering underline-position underline-thickness unicode-bidi unicode-range units-per-em v-alphabetic v-hanging v-ideographic v-mathematical vector-effect vert-adv-y vert-origin-x vert-origin-y word-spacing writing-mode xmlns:xlink x-height".split(" ").forEach(function(t){var e=t.replace(Zw,Xw);Qt[e]=new _n(e,1,!1,t,null,!1,!1)});"xlink:actuate xlink:arcrole xlink:role xlink:show xlink:title xlink:type".split(" ").forEach(function(t){var e=t.replace(Zw,Xw);Qt[e]=new _n(e,1,!1,t,"http://www.w3.org/1999/xlink",!1,!1)});["xml:base","xml:lang","xml:space"].forEach(function(t){var e=t.replace(Zw,Xw);Qt[e]=new _n(e,1,!1,t,"http://www.w3.org/XML/1998/namespace",!1,!1)});["tabIndex","crossOrigin"].forEach(function(t){Qt[t]=new _n(t,1,!1,t.toLowerCase(),null,!1,!1)});Qt.xlinkHref=new _n("xlinkHref",1,!1,"xlink:href","http://www.w3.org/1999/xlink",!0,!1);["src","href","action","formAction"].forEach(function(t){Qt[t]=new _n(t,1,!1,t.toLowerCase(),null,!0,!0)});function e1(t,e,n,r){var i=Qt.hasOwnProperty(e)?Qt[e]:null;(i!==null?i.type!==0:r||!(2<e.length)||e[0]!=="o"&&e[0]!=="O"||e[1]!=="n"&&e[1]!=="N")&&(sO(e,n,i,r)&&(n=null),r||i===null?rO(e)&&(n===null?t.removeAttribute(e):t.setAttribute(e,""+n)):i.mustUseProperty?t[i.propertyName]=n===null?i.type===3?!1:"":n:(e=i.attributeName,r=i.attributeNamespace,n===null?t.removeAttribute(e):(i=i.type,n=i===3||i===4&&n===!0?"":""+n,r?t.setAttributeNS(r,e,n):t.setAttribute(e,n))))}var Ps=tO.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED,Yf=Symbol.for("react.element"),Pl=Symbol.for("react.portal"),Rl=Symbol.for("react.fragment"),t1=Symbol.for("react.strict_mode"),Oy=Symbol.for("react.profiler"),yC=Symbol.for("react.provider"),vC=Symbol.for("react.context"),n1=Symbol.for("react.forward_ref"),Ny=Symbol.for("react.suspense"),My=Symbol.for("react.suspense_list"),r1=Symbol.for("react.memo"),Ws=Symbol.for("react.lazy"),wC=Symbol.for("react.offscreen"),uE=Symbol.iterator;function Ru(t){return t===null||typeof t!="object"?null:(t=uE&&t[uE]||t["@@iterator"],typeof t=="function"?t:null)}var ht=Object.assign,Wg;function Wu(t){if(Wg===void 0)try{throw Error()}catch(n){var e=n.stack.trim().match(/\n( *(at )?)/);Wg=e&&e[1]||""}return`
`+Wg+t}var qg=!1;function Qg(t,e){if(!t||qg)return"";qg=!0;var n=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{if(e)if(e=function(){throw Error()},Object.defineProperty(e.prototype,"props",{set:function(){throw Error()}}),typeof Reflect=="object"&&Reflect.construct){try{Reflect.construct(e,[])}catch(c){var r=c}Reflect.construct(t,[],e)}else{try{e.call()}catch(c){r=c}t.call(e.prototype)}else{try{throw Error()}catch(c){r=c}t()}}catch(c){if(c&&r&&typeof c.stack=="string"){for(var i=c.stack.split(`
`),s=r.stack.split(`
`),o=i.length-1,a=s.length-1;1<=o&&0<=a&&i[o]!==s[a];)a--;for(;1<=o&&0<=a;o--,a--)if(i[o]!==s[a]){if(o!==1||a!==1)do if(o--,a--,0>a||i[o]!==s[a]){var l=`
`+i[o].replace(" at new "," at ");return t.displayName&&l.includes("<anonymous>")&&(l=l.replace("<anonymous>",t.displayName)),l}while(1<=o&&0<=a);break}}}finally{qg=!1,Error.prepareStackTrace=n}return(t=t?t.displayName||t.name:"")?Wu(t):""}function oO(t){switch(t.tag){case 5:return Wu(t.type);case 16:return Wu("Lazy");case 13:return Wu("Suspense");case 19:return Wu("SuspenseList");case 0:case 2:case 15:return t=Qg(t.type,!1),t;case 11:return t=Qg(t.type.render,!1),t;case 1:return t=Qg(t.type,!0),t;default:return""}}function Ly(t){if(t==null)return null;if(typeof t=="function")return t.displayName||t.name||null;if(typeof t=="string")return t;switch(t){case Rl:return"Fragment";case Pl:return"Portal";case Oy:return"Profiler";case t1:return"StrictMode";case Ny:return"Suspense";case My:return"SuspenseList"}if(typeof t=="object")switch(t.$$typeof){case vC:return(t.displayName||"Context")+".Consumer";case yC:return(t._context.displayName||"Context")+".Provider";case n1:var e=t.render;return t=t.displayName,t||(t=e.displayName||e.name||"",t=t!==""?"ForwardRef("+t+")":"ForwardRef"),t;case r1:return e=t.displayName||null,e!==null?e:Ly(t.type)||"Memo";case Ws:e=t._payload,t=t._init;try{return Ly(t(e))}catch{}}return null}function aO(t){var e=t.type;switch(t.tag){case 24:return"Cache";case 9:return(e.displayName||"Context")+".Consumer";case 10:return(e._context.displayName||"Context")+".Provider";case 18:return"DehydratedFragment";case 11:return t=e.render,t=t.displayName||t.name||"",e.displayName||(t!==""?"ForwardRef("+t+")":"ForwardRef");case 7:return"Fragment";case 5:return e;case 4:return"Portal";case 3:return"Root";case 6:return"Text";case 16:return Ly(e);case 8:return e===t1?"StrictMode":"Mode";case 22:return"Offscreen";case 12:return"Profiler";case 21:return"Scope";case 13:return"Suspense";case 19:return"SuspenseList";case 25:return"TracingMarker";case 1:case 0:case 17:case 2:case 14:case 15:if(typeof e=="function")return e.displayName||e.name||null;if(typeof e=="string")return e}return null}function Fo(t){switch(typeof t){case"boolean":case"number":case"string":case"undefined":return t;case"object":return t;default:return""}}function bC(t){var e=t.type;return(t=t.nodeName)&&t.toLowerCase()==="input"&&(e==="checkbox"||e==="radio")}function lO(t){var e=bC(t)?"checked":"value",n=Object.getOwnPropertyDescriptor(t.constructor.prototype,e),r=""+t[e];if(!t.hasOwnProperty(e)&&typeof n<"u"&&typeof n.get=="function"&&typeof n.set=="function"){var i=n.get,s=n.set;return Object.defineProperty(t,e,{configurable:!0,get:function(){return i.call(this)},set:function(o){r=""+o,s.call(this,o)}}),Object.defineProperty(t,e,{enumerable:n.enumerable}),{getValue:function(){return r},setValue:function(o){r=""+o},stopTracking:function(){t._valueTracker=null,delete t[e]}}}}function Jf(t){t._valueTracker||(t._valueTracker=lO(t))}function EC(t){if(!t)return!1;var e=t._valueTracker;if(!e)return!0;var n=e.getValue(),r="";return t&&(r=bC(t)?t.checked?"true":"false":t.value),t=r,t!==n?(e.setValue(t),!0):!1}function Lp(t){if(t=t||(typeof document<"u"?document:void 0),typeof t>"u")return null;try{return t.activeElement||t.body}catch{return t.body}}function By(t,e){var n=e.checked;return ht({},e,{defaultChecked:void 0,defaultValue:void 0,value:void 0,checked:n??t._wrapperState.initialChecked})}function dE(t,e){var n=e.defaultValue==null?"":e.defaultValue,r=e.checked!=null?e.checked:e.defaultChecked;n=Fo(e.value!=null?e.value:n),t._wrapperState={initialChecked:r,initialValue:n,controlled:e.type==="checkbox"||e.type==="radio"?e.checked!=null:e.value!=null}}function AC(t,e){e=e.checked,e!=null&&e1(t,"checked",e,!1)}function Dy(t,e){AC(t,e);var n=Fo(e.value),r=e.type;if(n!=null)r==="number"?(n===0&&t.value===""||t.value!=n)&&(t.value=""+n):t.value!==""+n&&(t.value=""+n);else if(r==="submit"||r==="reset"){t.removeAttribute("value");return}e.hasOwnProperty("value")?$y(t,e.type,n):e.hasOwnProperty("defaultValue")&&$y(t,e.type,Fo(e.defaultValue)),e.checked==null&&e.defaultChecked!=null&&(t.defaultChecked=!!e.defaultChecked)}function fE(t,e,n){if(e.hasOwnProperty("value")||e.hasOwnProperty("defaultValue")){var r=e.type;if(!(r!=="submit"&&r!=="reset"||e.value!==void 0&&e.value!==null))return;e=""+t._wrapperState.initialValue,n||e===t.value||(t.value=e),t.defaultValue=e}n=t.name,n!==""&&(t.name=""),t.defaultChecked=!!t._wrapperState.initialChecked,n!==""&&(t.name=n)}function $y(t,e,n){(e!=="number"||Lp(t.ownerDocument)!==t)&&(n==null?t.defaultValue=""+t._wrapperState.initialValue:t.defaultValue!==""+n&&(t.defaultValue=""+n))}var qu=Array.isArray;function ec(t,e,n,r){if(t=t.options,e){e={};for(var i=0;i<n.length;i++)e["$"+n[i]]=!0;for(n=0;n<t.length;n++)i=e.hasOwnProperty("$"+t[n].value),t[n].selected!==i&&(t[n].selected=i),i&&r&&(t[n].defaultSelected=!0)}else{for(n=""+Fo(n),e=null,i=0;i<t.length;i++){if(t[i].value===n){t[i].selected=!0,r&&(t[i].defaultSelected=!0);return}e!==null||t[i].disabled||(e=t[i])}e!==null&&(e.selected=!0)}}function Uy(t,e){if(e.dangerouslySetInnerHTML!=null)throw Error(ye(91));return ht({},e,{value:void 0,defaultValue:void 0,children:""+t._wrapperState.initialValue})}function hE(t,e){var n=e.value;if(n==null){if(n=e.children,e=e.defaultValue,n!=null){if(e!=null)throw Error(ye(92));if(qu(n)){if(1<n.length)throw Error(ye(93));n=n[0]}e=n}e==null&&(e=""),n=e}t._wrapperState={initialValue:Fo(n)}}function SC(t,e){var n=Fo(e.value),r=Fo(e.defaultValue);n!=null&&(n=""+n,n!==t.value&&(t.value=n),e.defaultValue==null&&t.defaultValue!==n&&(t.defaultValue=n)),r!=null&&(t.defaultValue=""+r)}function pE(t){var e=t.textContent;e===t._wrapperState.initialValue&&e!==""&&e!==null&&(t.value=e)}function xC(t){switch(t){case"svg":return"http://www.w3.org/2000/svg";case"math":return"http://www.w3.org/1998/Math/MathML";default:return"http://www.w3.org/1999/xhtml"}}function Fy(t,e){return t==null||t==="http://www.w3.org/1999/xhtml"?xC(e):t==="http://www.w3.org/2000/svg"&&e==="foreignObject"?"http://www.w3.org/1999/xhtml":t}var Zf,CC=function(t){return typeof MSApp<"u"&&MSApp.execUnsafeLocalFunction?function(e,n,r,i){MSApp.execUnsafeLocalFunction(function(){return t(e,n,r,i)})}:t}(function(t,e){if(t.namespaceURI!=="http://www.w3.org/2000/svg"||"innerHTML"in t)t.innerHTML=e;else{for(Zf=Zf||document.createElement("div"),Zf.innerHTML="<svg>"+e.valueOf().toString()+"</svg>",e=Zf.firstChild;t.firstChild;)t.removeChild(t.firstChild);for(;e.firstChild;)t.appendChild(e.firstChild)}});function _d(t,e){if(e){var n=t.firstChild;if(n&&n===t.lastChild&&n.nodeType===3){n.nodeValue=e;return}}t.textContent=e}var ad={animationIterationCount:!0,aspectRatio:!0,borderImageOutset:!0,borderImageSlice:!0,borderImageWidth:!0,boxFlex:!0,boxFlexGroup:!0,boxOrdinalGroup:!0,columnCount:!0,columns:!0,flex:!0,flexGrow:!0,flexPositive:!0,flexShrink:!0,flexNegative:!0,flexOrder:!0,gridArea:!0,gridRow:!0,gridRowEnd:!0,gridRowSpan:!0,gridRowStart:!0,gridColumn:!0,gridColumnEnd:!0,gridColumnSpan:!0,gridColumnStart:!0,fontWeight:!0,lineClamp:!0,lineHeight:!0,opacity:!0,order:!0,orphans:!0,tabSize:!0,widows:!0,zIndex:!0,zoom:!0,fillOpacity:!0,floodOpacity:!0,stopOpacity:!0,strokeDasharray:!0,strokeDashoffset:!0,strokeMiterlimit:!0,strokeOpacity:!0,strokeWidth:!0},cO=["Webkit","ms","Moz","O"];Object.keys(ad).forEach(function(t){cO.forEach(function(e){e=e+t.charAt(0).toUpperCase()+t.substring(1),ad[e]=ad[t]})});function kC(t,e,n){return e==null||typeof e=="boolean"||e===""?"":n||typeof e!="number"||e===0||ad.hasOwnProperty(t)&&ad[t]?(""+e).trim():e+"px"}function _C(t,e){t=t.style;for(var n in e)if(e.hasOwnProperty(n)){var r=n.indexOf("--")===0,i=kC(n,e[n],r);n==="float"&&(n="cssFloat"),r?t.setProperty(n,i):t[n]=i}}var uO=ht({menuitem:!0},{area:!0,base:!0,br:!0,col:!0,embed:!0,hr:!0,img:!0,input:!0,keygen:!0,link:!0,meta:!0,param:!0,source:!0,track:!0,wbr:!0});function jy(t,e){if(e){if(uO[t]&&(e.children!=null||e.dangerouslySetInnerHTML!=null))throw Error(ye(137,t));if(e.dangerouslySetInnerHTML!=null){if(e.children!=null)throw Error(ye(60));if(typeof e.dangerouslySetInnerHTML!="object"||!("__html"in e.dangerouslySetInnerHTML))throw Error(ye(61))}if(e.style!=null&&typeof e.style!="object")throw Error(ye(62))}}function Hy(t,e){if(t.indexOf("-")===-1)return typeof e.is=="string";switch(t){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var Ky=null;function i1(t){return t=t.target||t.srcElement||window,t.correspondingUseElement&&(t=t.correspondingUseElement),t.nodeType===3?t.parentNode:t}var zy=null,tc=null,nc=null;function gE(t){if(t=If(t)){if(typeof zy!="function")throw Error(ye(280));var e=t.stateNode;e&&(e=sg(e),zy(t.stateNode,t.type,e))}}function TC(t){tc?nc?nc.push(t):nc=[t]:tc=t}function PC(){if(tc){var t=tc,e=nc;if(nc=tc=null,gE(t),e)for(t=0;t<e.length;t++)gE(e[t])}}function RC(t,e){return t(e)}function IC(){}var Yg=!1;function OC(t,e,n){if(Yg)return t(e,n);Yg=!0;try{return RC(t,e,n)}finally{Yg=!1,(tc!==null||nc!==null)&&(IC(),PC())}}function Td(t,e){var n=t.stateNode;if(n===null)return null;var r=sg(n);if(r===null)return null;n=r[e];e:switch(e){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(r=!r.disabled)||(t=t.type,r=!(t==="button"||t==="input"||t==="select"||t==="textarea")),t=!r;break e;default:t=!1}if(t)return null;if(n&&typeof n!="function")throw Error(ye(231,e,typeof n));return n}var Vy=!1;if(As)try{var Iu={};Object.defineProperty(Iu,"passive",{get:function(){Vy=!0}}),window.addEventListener("test",Iu,Iu),window.removeEventListener("test",Iu,Iu)}catch{Vy=!1}function dO(t,e,n,r,i,s,o,a,l){var c=Array.prototype.slice.call(arguments,3);try{e.apply(n,c)}catch(u){this.onError(u)}}var ld=!1,Bp=null,Dp=!1,Gy=null,fO={onError:function(t){ld=!0,Bp=t}};function hO(t,e,n,r,i,s,o,a,l){ld=!1,Bp=null,dO.apply(fO,arguments)}function pO(t,e,n,r,i,s,o,a,l){if(hO.apply(this,arguments),ld){if(ld){var c=Bp;ld=!1,Bp=null}else throw Error(ye(198));Dp||(Dp=!0,Gy=c)}}function cl(t){var e=t,n=t;if(t.alternate)for(;e.return;)e=e.return;else{t=e;do e=t,e.flags&4098&&(n=e.return),t=e.return;while(t)}return e.tag===3?n:null}function NC(t){if(t.tag===13){var e=t.memoizedState;if(e===null&&(t=t.alternate,t!==null&&(e=t.memoizedState)),e!==null)return e.dehydrated}return null}function mE(t){if(cl(t)!==t)throw Error(ye(188))}function gO(t){var e=t.alternate;if(!e){if(e=cl(t),e===null)throw Error(ye(188));return e!==t?null:t}for(var n=t,r=e;;){var i=n.return;if(i===null)break;var s=i.alternate;if(s===null){if(r=i.return,r!==null){n=r;continue}break}if(i.child===s.child){for(s=i.child;s;){if(s===n)return mE(i),t;if(s===r)return mE(i),e;s=s.sibling}throw Error(ye(188))}if(n.return!==r.return)n=i,r=s;else{for(var o=!1,a=i.child;a;){if(a===n){o=!0,n=i,r=s;break}if(a===r){o=!0,r=i,n=s;break}a=a.sibling}if(!o){for(a=s.child;a;){if(a===n){o=!0,n=s,r=i;break}if(a===r){o=!0,r=s,n=i;break}a=a.sibling}if(!o)throw Error(ye(189))}}if(n.alternate!==r)throw Error(ye(190))}if(n.tag!==3)throw Error(ye(188));return n.stateNode.current===n?t:e}function MC(t){return t=gO(t),t!==null?LC(t):null}function LC(t){if(t.tag===5||t.tag===6)return t;for(t=t.child;t!==null;){var e=LC(t);if(e!==null)return e;t=t.sibling}return null}var BC=sr.unstable_scheduleCallback,yE=sr.unstable_cancelCallback,mO=sr.unstable_shouldYield,yO=sr.unstable_requestPaint,Et=sr.unstable_now,vO=sr.unstable_getCurrentPriorityLevel,s1=sr.unstable_ImmediatePriority,DC=sr.unstable_UserBlockingPriority,$p=sr.unstable_NormalPriority,wO=sr.unstable_LowPriority,$C=sr.unstable_IdlePriority,tg=null,Ni=null;function bO(t){if(Ni&&typeof Ni.onCommitFiberRoot=="function")try{Ni.onCommitFiberRoot(tg,t,void 0,(t.current.flags&128)===128)}catch{}}var Xr=Math.clz32?Math.clz32:SO,EO=Math.log,AO=Math.LN2;function SO(t){return t>>>=0,t===0?32:31-(EO(t)/AO|0)|0}var Xf=64,eh=4194304;function Qu(t){switch(t&-t){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return t&4194240;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return t&130023424;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 1073741824;default:return t}}function Up(t,e){var n=t.pendingLanes;if(n===0)return 0;var r=0,i=t.suspendedLanes,s=t.pingedLanes,o=n&268435455;if(o!==0){var a=o&~i;a!==0?r=Qu(a):(s&=o,s!==0&&(r=Qu(s)))}else o=n&~i,o!==0?r=Qu(o):s!==0&&(r=Qu(s));if(r===0)return 0;if(e!==0&&e!==r&&!(e&i)&&(i=r&-r,s=e&-e,i>=s||i===16&&(s&4194240)!==0))return e;if(r&4&&(r|=n&16),e=t.entangledLanes,e!==0)for(t=t.entanglements,e&=r;0<e;)n=31-Xr(e),i=1<<n,r|=t[n],e&=~i;return r}function xO(t,e){switch(t){case 1:case 2:case 4:return e+250;case 8:case 16:case 32:case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return e+5e3;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return-1;case 134217728:case 268435456:case 536870912:case 1073741824:return-1;default:return-1}}function CO(t,e){for(var n=t.suspendedLanes,r=t.pingedLanes,i=t.expirationTimes,s=t.pendingLanes;0<s;){var o=31-Xr(s),a=1<<o,l=i[o];l===-1?(!(a&n)||a&r)&&(i[o]=xO(a,e)):l<=e&&(t.expiredLanes|=a),s&=~a}}function Wy(t){return t=t.pendingLanes&-1073741825,t!==0?t:t&1073741824?1073741824:0}function UC(){var t=Xf;return Xf<<=1,!(Xf&4194240)&&(Xf=64),t}function Jg(t){for(var e=[],n=0;31>n;n++)e.push(t);return e}function Pf(t,e,n){t.pendingLanes|=e,e!==536870912&&(t.suspendedLanes=0,t.pingedLanes=0),t=t.eventTimes,e=31-Xr(e),t[e]=n}function kO(t,e){var n=t.pendingLanes&~e;t.pendingLanes=e,t.suspendedLanes=0,t.pingedLanes=0,t.expiredLanes&=e,t.mutableReadLanes&=e,t.entangledLanes&=e,e=t.entanglements;var r=t.eventTimes;for(t=t.expirationTimes;0<n;){var i=31-Xr(n),s=1<<i;e[i]=0,r[i]=-1,t[i]=-1,n&=~s}}function o1(t,e){var n=t.entangledLanes|=e;for(t=t.entanglements;n;){var r=31-Xr(n),i=1<<r;i&e|t[r]&e&&(t[r]|=e),n&=~i}}var Xe=0;function FC(t){return t&=-t,1<t?4<t?t&268435455?16:536870912:4:1}var jC,a1,HC,KC,zC,qy=!1,th=[],To=null,Po=null,Ro=null,Pd=new Map,Rd=new Map,to=[],_O="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset submit".split(" ");function vE(t,e){switch(t){case"focusin":case"focusout":To=null;break;case"dragenter":case"dragleave":Po=null;break;case"mouseover":case"mouseout":Ro=null;break;case"pointerover":case"pointerout":Pd.delete(e.pointerId);break;case"gotpointercapture":case"lostpointercapture":Rd.delete(e.pointerId)}}function Ou(t,e,n,r,i,s){return t===null||t.nativeEvent!==s?(t={blockedOn:e,domEventName:n,eventSystemFlags:r,nativeEvent:s,targetContainers:[i]},e!==null&&(e=If(e),e!==null&&a1(e)),t):(t.eventSystemFlags|=r,e=t.targetContainers,i!==null&&e.indexOf(i)===-1&&e.push(i),t)}function TO(t,e,n,r,i){switch(e){case"focusin":return To=Ou(To,t,e,n,r,i),!0;case"dragenter":return Po=Ou(Po,t,e,n,r,i),!0;case"mouseover":return Ro=Ou(Ro,t,e,n,r,i),!0;case"pointerover":var s=i.pointerId;return Pd.set(s,Ou(Pd.get(s)||null,t,e,n,r,i)),!0;case"gotpointercapture":return s=i.pointerId,Rd.set(s,Ou(Rd.get(s)||null,t,e,n,r,i)),!0}return!1}function VC(t){var e=pa(t.target);if(e!==null){var n=cl(e);if(n!==null){if(e=n.tag,e===13){if(e=NC(n),e!==null){t.blockedOn=e,zC(t.priority,function(){HC(n)});return}}else if(e===3&&n.stateNode.current.memoizedState.isDehydrated){t.blockedOn=n.tag===3?n.stateNode.containerInfo:null;return}}}t.blockedOn=null}function qh(t){if(t.blockedOn!==null)return!1;for(var e=t.targetContainers;0<e.length;){var n=Qy(t.domEventName,t.eventSystemFlags,e[0],t.nativeEvent);if(n===null){n=t.nativeEvent;var r=new n.constructor(n.type,n);Ky=r,n.target.dispatchEvent(r),Ky=null}else return e=If(n),e!==null&&a1(e),t.blockedOn=n,!1;e.shift()}return!0}function wE(t,e,n){qh(t)&&n.delete(e)}function PO(){qy=!1,To!==null&&qh(To)&&(To=null),Po!==null&&qh(Po)&&(Po=null),Ro!==null&&qh(Ro)&&(Ro=null),Pd.forEach(wE),Rd.forEach(wE)}function Nu(t,e){t.blockedOn===e&&(t.blockedOn=null,qy||(qy=!0,sr.unstable_scheduleCallback(sr.unstable_NormalPriority,PO)))}function Id(t){function e(i){return Nu(i,t)}if(0<th.length){Nu(th[0],t);for(var n=1;n<th.length;n++){var r=th[n];r.blockedOn===t&&(r.blockedOn=null)}}for(To!==null&&Nu(To,t),Po!==null&&Nu(Po,t),Ro!==null&&Nu(Ro,t),Pd.forEach(e),Rd.forEach(e),n=0;n<to.length;n++)r=to[n],r.blockedOn===t&&(r.blockedOn=null);for(;0<to.length&&(n=to[0],n.blockedOn===null);)VC(n),n.blockedOn===null&&to.shift()}var rc=Ps.ReactCurrentBatchConfig,Fp=!0;function RO(t,e,n,r){var i=Xe,s=rc.transition;rc.transition=null;try{Xe=1,l1(t,e,n,r)}finally{Xe=i,rc.transition=s}}function IO(t,e,n,r){var i=Xe,s=rc.transition;rc.transition=null;try{Xe=4,l1(t,e,n,r)}finally{Xe=i,rc.transition=s}}function l1(t,e,n,r){if(Fp){var i=Qy(t,e,n,r);if(i===null)am(t,e,r,jp,n),vE(t,r);else if(TO(i,t,e,n,r))r.stopPropagation();else if(vE(t,r),e&4&&-1<_O.indexOf(t)){for(;i!==null;){var s=If(i);if(s!==null&&jC(s),s=Qy(t,e,n,r),s===null&&am(t,e,r,jp,n),s===i)break;i=s}i!==null&&r.stopPropagation()}else am(t,e,r,null,n)}}var jp=null;function Qy(t,e,n,r){if(jp=null,t=i1(r),t=pa(t),t!==null)if(e=cl(t),e===null)t=null;else if(n=e.tag,n===13){if(t=NC(e),t!==null)return t;t=null}else if(n===3){if(e.stateNode.current.memoizedState.isDehydrated)return e.tag===3?e.stateNode.containerInfo:null;t=null}else e!==t&&(t=null);return jp=t,null}function GC(t){switch(t){case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 1;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"toggle":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 4;case"message":switch(vO()){case s1:return 1;case DC:return 4;case $p:case wO:return 16;case $C:return 536870912;default:return 16}default:return 16}}var xo=null,c1=null,Qh=null;function WC(){if(Qh)return Qh;var t,e=c1,n=e.length,r,i="value"in xo?xo.value:xo.textContent,s=i.length;for(t=0;t<n&&e[t]===i[t];t++);var o=n-t;for(r=1;r<=o&&e[n-r]===i[s-r];r++);return Qh=i.slice(t,1<r?1-r:void 0)}function Yh(t){var e=t.keyCode;return"charCode"in t?(t=t.charCode,t===0&&e===13&&(t=13)):t=e,t===10&&(t=13),32<=t||t===13?t:0}function nh(){return!0}function bE(){return!1}function ar(t){function e(n,r,i,s,o){this._reactName=n,this._targetInst=i,this.type=r,this.nativeEvent=s,this.target=o,this.currentTarget=null;for(var a in t)t.hasOwnProperty(a)&&(n=t[a],this[a]=n?n(s):s[a]);return this.isDefaultPrevented=(s.defaultPrevented!=null?s.defaultPrevented:s.returnValue===!1)?nh:bE,this.isPropagationStopped=bE,this}return ht(e.prototype,{preventDefault:function(){this.defaultPrevented=!0;var n=this.nativeEvent;n&&(n.preventDefault?n.preventDefault():typeof n.returnValue!="unknown"&&(n.returnValue=!1),this.isDefaultPrevented=nh)},stopPropagation:function(){var n=this.nativeEvent;n&&(n.stopPropagation?n.stopPropagation():typeof n.cancelBubble!="unknown"&&(n.cancelBubble=!0),this.isPropagationStopped=nh)},persist:function(){},isPersistent:nh}),e}var Eu={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(t){return t.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},u1=ar(Eu),Rf=ht({},Eu,{view:0,detail:0}),OO=ar(Rf),Zg,Xg,Mu,ng=ht({},Rf,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:d1,button:0,buttons:0,relatedTarget:function(t){return t.relatedTarget===void 0?t.fromElement===t.srcElement?t.toElement:t.fromElement:t.relatedTarget},movementX:function(t){return"movementX"in t?t.movementX:(t!==Mu&&(Mu&&t.type==="mousemove"?(Zg=t.screenX-Mu.screenX,Xg=t.screenY-Mu.screenY):Xg=Zg=0,Mu=t),Zg)},movementY:function(t){return"movementY"in t?t.movementY:Xg}}),EE=ar(ng),NO=ht({},ng,{dataTransfer:0}),MO=ar(NO),LO=ht({},Rf,{relatedTarget:0}),em=ar(LO),BO=ht({},Eu,{animationName:0,elapsedTime:0,pseudoElement:0}),DO=ar(BO),$O=ht({},Eu,{clipboardData:function(t){return"clipboardData"in t?t.clipboardData:window.clipboardData}}),UO=ar($O),FO=ht({},Eu,{data:0}),AE=ar(FO),jO={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},HO={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},KO={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function zO(t){var e=this.nativeEvent;return e.getModifierState?e.getModifierState(t):(t=KO[t])?!!e[t]:!1}function d1(){return zO}var VO=ht({},Rf,{key:function(t){if(t.key){var e=jO[t.key]||t.key;if(e!=="Unidentified")return e}return t.type==="keypress"?(t=Yh(t),t===13?"Enter":String.fromCharCode(t)):t.type==="keydown"||t.type==="keyup"?HO[t.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:d1,charCode:function(t){return t.type==="keypress"?Yh(t):0},keyCode:function(t){return t.type==="keydown"||t.type==="keyup"?t.keyCode:0},which:function(t){return t.type==="keypress"?Yh(t):t.type==="keydown"||t.type==="keyup"?t.keyCode:0}}),GO=ar(VO),WO=ht({},ng,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0}),SE=ar(WO),qO=ht({},Rf,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:d1}),QO=ar(qO),YO=ht({},Eu,{propertyName:0,elapsedTime:0,pseudoElement:0}),JO=ar(YO),ZO=ht({},ng,{deltaX:function(t){return"deltaX"in t?t.deltaX:"wheelDeltaX"in t?-t.wheelDeltaX:0},deltaY:function(t){return"deltaY"in t?t.deltaY:"wheelDeltaY"in t?-t.wheelDeltaY:"wheelDelta"in t?-t.wheelDelta:0},deltaZ:0,deltaMode:0}),XO=ar(ZO),e8=[9,13,27,32],f1=As&&"CompositionEvent"in window,cd=null;As&&"documentMode"in document&&(cd=document.documentMode);var t8=As&&"TextEvent"in window&&!cd,qC=As&&(!f1||cd&&8<cd&&11>=cd),xE=" ",CE=!1;function QC(t,e){switch(t){case"keyup":return e8.indexOf(e.keyCode)!==-1;case"keydown":return e.keyCode!==229;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function YC(t){return t=t.detail,typeof t=="object"&&"data"in t?t.data:null}var Il=!1;function n8(t,e){switch(t){case"compositionend":return YC(e);case"keypress":return e.which!==32?null:(CE=!0,xE);case"textInput":return t=e.data,t===xE&&CE?null:t;default:return null}}function r8(t,e){if(Il)return t==="compositionend"||!f1&&QC(t,e)?(t=WC(),Qh=c1=xo=null,Il=!1,t):null;switch(t){case"paste":return null;case"keypress":if(!(e.ctrlKey||e.altKey||e.metaKey)||e.ctrlKey&&e.altKey){if(e.char&&1<e.char.length)return e.char;if(e.which)return String.fromCharCode(e.which)}return null;case"compositionend":return qC&&e.locale!=="ko"?null:e.data;default:return null}}var i8={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function kE(t){var e=t&&t.nodeName&&t.nodeName.toLowerCase();return e==="input"?!!i8[t.type]:e==="textarea"}function JC(t,e,n,r){TC(r),e=Hp(e,"onChange"),0<e.length&&(n=new u1("onChange","change",null,n,r),t.push({event:n,listeners:e}))}var ud=null,Od=null;function s8(t){lk(t,0)}function rg(t){var e=Ml(t);if(EC(e))return t}function o8(t,e){if(t==="change")return e}var ZC=!1;if(As){var tm;if(As){var nm="oninput"in document;if(!nm){var _E=document.createElement("div");_E.setAttribute("oninput","return;"),nm=typeof _E.oninput=="function"}tm=nm}else tm=!1;ZC=tm&&(!document.documentMode||9<document.documentMode)}function TE(){ud&&(ud.detachEvent("onpropertychange",XC),Od=ud=null)}function XC(t){if(t.propertyName==="value"&&rg(Od)){var e=[];JC(e,Od,t,i1(t)),OC(s8,e)}}function a8(t,e,n){t==="focusin"?(TE(),ud=e,Od=n,ud.attachEvent("onpropertychange",XC)):t==="focusout"&&TE()}function l8(t){if(t==="selectionchange"||t==="keyup"||t==="keydown")return rg(Od)}function c8(t,e){if(t==="click")return rg(e)}function u8(t,e){if(t==="input"||t==="change")return rg(e)}function d8(t,e){return t===e&&(t!==0||1/t===1/e)||t!==t&&e!==e}var ni=typeof Object.is=="function"?Object.is:d8;function Nd(t,e){if(ni(t,e))return!0;if(typeof t!="object"||t===null||typeof e!="object"||e===null)return!1;var n=Object.keys(t),r=Object.keys(e);if(n.length!==r.length)return!1;for(r=0;r<n.length;r++){var i=n[r];if(!Iy.call(e,i)||!ni(t[i],e[i]))return!1}return!0}function PE(t){for(;t&&t.firstChild;)t=t.firstChild;return t}function RE(t,e){var n=PE(t);t=0;for(var r;n;){if(n.nodeType===3){if(r=t+n.textContent.length,t<=e&&r>=e)return{node:n,offset:e-t};t=r}e:{for(;n;){if(n.nextSibling){n=n.nextSibling;break e}n=n.parentNode}n=void 0}n=PE(n)}}function ek(t,e){return t&&e?t===e?!0:t&&t.nodeType===3?!1:e&&e.nodeType===3?ek(t,e.parentNode):"contains"in t?t.contains(e):t.compareDocumentPosition?!!(t.compareDocumentPosition(e)&16):!1:!1}function tk(){for(var t=window,e=Lp();e instanceof t.HTMLIFrameElement;){try{var n=typeof e.contentWindow.location.href=="string"}catch{n=!1}if(n)t=e.contentWindow;else break;e=Lp(t.document)}return e}function h1(t){var e=t&&t.nodeName&&t.nodeName.toLowerCase();return e&&(e==="input"&&(t.type==="text"||t.type==="search"||t.type==="tel"||t.type==="url"||t.type==="password")||e==="textarea"||t.contentEditable==="true")}function f8(t){var e=tk(),n=t.focusedElem,r=t.selectionRange;if(e!==n&&n&&n.ownerDocument&&ek(n.ownerDocument.documentElement,n)){if(r!==null&&h1(n)){if(e=r.start,t=r.end,t===void 0&&(t=e),"selectionStart"in n)n.selectionStart=e,n.selectionEnd=Math.min(t,n.value.length);else if(t=(e=n.ownerDocument||document)&&e.defaultView||window,t.getSelection){t=t.getSelection();var i=n.textContent.length,s=Math.min(r.start,i);r=r.end===void 0?s:Math.min(r.end,i),!t.extend&&s>r&&(i=r,r=s,s=i),i=RE(n,s);var o=RE(n,r);i&&o&&(t.rangeCount!==1||t.anchorNode!==i.node||t.anchorOffset!==i.offset||t.focusNode!==o.node||t.focusOffset!==o.offset)&&(e=e.createRange(),e.setStart(i.node,i.offset),t.removeAllRanges(),s>r?(t.addRange(e),t.extend(o.node,o.offset)):(e.setEnd(o.node,o.offset),t.addRange(e)))}}for(e=[],t=n;t=t.parentNode;)t.nodeType===1&&e.push({element:t,left:t.scrollLeft,top:t.scrollTop});for(typeof n.focus=="function"&&n.focus(),n=0;n<e.length;n++)t=e[n],t.element.scrollLeft=t.left,t.element.scrollTop=t.top}}var h8=As&&"documentMode"in document&&11>=document.documentMode,Ol=null,Yy=null,dd=null,Jy=!1;function IE(t,e,n){var r=n.window===n?n.document:n.nodeType===9?n:n.ownerDocument;Jy||Ol==null||Ol!==Lp(r)||(r=Ol,"selectionStart"in r&&h1(r)?r={start:r.selectionStart,end:r.selectionEnd}:(r=(r.ownerDocument&&r.ownerDocument.defaultView||window).getSelection(),r={anchorNode:r.anchorNode,anchorOffset:r.anchorOffset,focusNode:r.focusNode,focusOffset:r.focusOffset}),dd&&Nd(dd,r)||(dd=r,r=Hp(Yy,"onSelect"),0<r.length&&(e=new u1("onSelect","select",null,e,n),t.push({event:e,listeners:r}),e.target=Ol)))}function rh(t,e){var n={};return n[t.toLowerCase()]=e.toLowerCase(),n["Webkit"+t]="webkit"+e,n["Moz"+t]="moz"+e,n}var Nl={animationend:rh("Animation","AnimationEnd"),animationiteration:rh("Animation","AnimationIteration"),animationstart:rh("Animation","AnimationStart"),transitionend:rh("Transition","TransitionEnd")},rm={},nk={};As&&(nk=document.createElement("div").style,"AnimationEvent"in window||(delete Nl.animationend.animation,delete Nl.animationiteration.animation,delete Nl.animationstart.animation),"TransitionEvent"in window||delete Nl.transitionend.transition);function ig(t){if(rm[t])return rm[t];if(!Nl[t])return t;var e=Nl[t],n;for(n in e)if(e.hasOwnProperty(n)&&n in nk)return rm[t]=e[n];return t}var rk=ig("animationend"),ik=ig("animationiteration"),sk=ig("animationstart"),ok=ig("transitionend"),ak=new Map,OE="abort auxClick cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll toggle touchMove waiting wheel".split(" ");function Qo(t,e){ak.set(t,e),ll(e,[t])}for(var im=0;im<OE.length;im++){var sm=OE[im],p8=sm.toLowerCase(),g8=sm[0].toUpperCase()+sm.slice(1);Qo(p8,"on"+g8)}Qo(rk,"onAnimationEnd");Qo(ik,"onAnimationIteration");Qo(sk,"onAnimationStart");Qo("dblclick","onDoubleClick");Qo("focusin","onFocus");Qo("focusout","onBlur");Qo(ok,"onTransitionEnd");tu("onMouseEnter",["mouseout","mouseover"]);tu("onMouseLeave",["mouseout","mouseover"]);tu("onPointerEnter",["pointerout","pointerover"]);tu("onPointerLeave",["pointerout","pointerover"]);ll("onChange","change click focusin focusout input keydown keyup selectionchange".split(" "));ll("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" "));ll("onBeforeInput",["compositionend","keypress","textInput","paste"]);ll("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" "));ll("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" "));ll("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var Yu="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),m8=new Set("cancel close invalid load scroll toggle".split(" ").concat(Yu));function NE(t,e,n){var r=t.type||"unknown-event";t.currentTarget=n,pO(r,e,void 0,t),t.currentTarget=null}function lk(t,e){e=(e&4)!==0;for(var n=0;n<t.length;n++){var r=t[n],i=r.event;r=r.listeners;e:{var s=void 0;if(e)for(var o=r.length-1;0<=o;o--){var a=r[o],l=a.instance,c=a.currentTarget;if(a=a.listener,l!==s&&i.isPropagationStopped())break e;NE(i,a,c),s=l}else for(o=0;o<r.length;o++){if(a=r[o],l=a.instance,c=a.currentTarget,a=a.listener,l!==s&&i.isPropagationStopped())break e;NE(i,a,c),s=l}}}if(Dp)throw t=Gy,Dp=!1,Gy=null,t}function st(t,e){var n=e[nv];n===void 0&&(n=e[nv]=new Set);var r=t+"__bubble";n.has(r)||(ck(e,t,2,!1),n.add(r))}function om(t,e,n){var r=0;e&&(r|=4),ck(n,t,r,e)}var ih="_reactListening"+Math.random().toString(36).slice(2);function Md(t){if(!t[ih]){t[ih]=!0,mC.forEach(function(n){n!=="selectionchange"&&(m8.has(n)||om(n,!1,t),om(n,!0,t))});var e=t.nodeType===9?t:t.ownerDocument;e===null||e[ih]||(e[ih]=!0,om("selectionchange",!1,e))}}function ck(t,e,n,r){switch(GC(e)){case 1:var i=RO;break;case 4:i=IO;break;default:i=l1}n=i.bind(null,e,n,t),i=void 0,!Vy||e!=="touchstart"&&e!=="touchmove"&&e!=="wheel"||(i=!0),r?i!==void 0?t.addEventListener(e,n,{capture:!0,passive:i}):t.addEventListener(e,n,!0):i!==void 0?t.addEventListener(e,n,{passive:i}):t.addEventListener(e,n,!1)}function am(t,e,n,r,i){var s=r;if(!(e&1)&&!(e&2)&&r!==null)e:for(;;){if(r===null)return;var o=r.tag;if(o===3||o===4){var a=r.stateNode.containerInfo;if(a===i||a.nodeType===8&&a.parentNode===i)break;if(o===4)for(o=r.return;o!==null;){var l=o.tag;if((l===3||l===4)&&(l=o.stateNode.containerInfo,l===i||l.nodeType===8&&l.parentNode===i))return;o=o.return}for(;a!==null;){if(o=pa(a),o===null)return;if(l=o.tag,l===5||l===6){r=s=o;continue e}a=a.parentNode}}r=r.return}OC(function(){var c=s,u=i1(n),d=[];e:{var f=ak.get(t);if(f!==void 0){var h=u1,m=t;switch(t){case"keypress":if(Yh(n)===0)break e;case"keydown":case"keyup":h=GO;break;case"focusin":m="focus",h=em;break;case"focusout":m="blur",h=em;break;case"beforeblur":case"afterblur":h=em;break;case"click":if(n.button===2)break e;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":h=EE;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":h=MO;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":h=QO;break;case rk:case ik:case sk:h=DO;break;case ok:h=JO;break;case"scroll":h=OO;break;case"wheel":h=XO;break;case"copy":case"cut":case"paste":h=UO;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":h=SE}var g=(e&4)!==0,w=!g&&t==="scroll",p=g?f!==null?f+"Capture":null:f;g=[];for(var v=c,y;v!==null;){y=v;var C=y.stateNode;if(y.tag===5&&C!==null&&(y=C,p!==null&&(C=Td(v,p),C!=null&&g.push(Ld(v,C,y)))),w)break;v=v.return}0<g.length&&(f=new h(f,m,null,n,u),d.push({event:f,listeners:g}))}}if(!(e&7)){e:{if(f=t==="mouseover"||t==="pointerover",h=t==="mouseout"||t==="pointerout",f&&n!==Ky&&(m=n.relatedTarget||n.fromElement)&&(pa(m)||m[Ss]))break e;if((h||f)&&(f=u.window===u?u:(f=u.ownerDocument)?f.defaultView||f.parentWindow:window,h?(m=n.relatedTarget||n.toElement,h=c,m=m?pa(m):null,m!==null&&(w=cl(m),m!==w||m.tag!==5&&m.tag!==6)&&(m=null)):(h=null,m=c),h!==m)){if(g=EE,C="onMouseLeave",p="onMouseEnter",v="mouse",(t==="pointerout"||t==="pointerover")&&(g=SE,C="onPointerLeave",p="onPointerEnter",v="pointer"),w=h==null?f:Ml(h),y=m==null?f:Ml(m),f=new g(C,v+"leave",h,n,u),f.target=w,f.relatedTarget=y,C=null,pa(u)===c&&(g=new g(p,v+"enter",m,n,u),g.target=y,g.relatedTarget=w,C=g),w=C,h&&m)t:{for(g=h,p=m,v=0,y=g;y;y=ml(y))v++;for(y=0,C=p;C;C=ml(C))y++;for(;0<v-y;)g=ml(g),v--;for(;0<y-v;)p=ml(p),y--;for(;v--;){if(g===p||p!==null&&g===p.alternate)break t;g=ml(g),p=ml(p)}g=null}else g=null;h!==null&&ME(d,f,h,g,!1),m!==null&&w!==null&&ME(d,w,m,g,!0)}}e:{if(f=c?Ml(c):window,h=f.nodeName&&f.nodeName.toLowerCase(),h==="select"||h==="input"&&f.type==="file")var P=o8;else if(kE(f))if(ZC)P=u8;else{P=l8;var L=a8}else(h=f.nodeName)&&h.toLowerCase()==="input"&&(f.type==="checkbox"||f.type==="radio")&&(P=c8);if(P&&(P=P(t,c))){JC(d,P,n,u);break e}L&&L(t,f,c),t==="focusout"&&(L=f._wrapperState)&&L.controlled&&f.type==="number"&&$y(f,"number",f.value)}switch(L=c?Ml(c):window,t){case"focusin":(kE(L)||L.contentEditable==="true")&&(Ol=L,Yy=c,dd=null);break;case"focusout":dd=Yy=Ol=null;break;case"mousedown":Jy=!0;break;case"contextmenu":case"mouseup":case"dragend":Jy=!1,IE(d,n,u);break;case"selectionchange":if(h8)break;case"keydown":case"keyup":IE(d,n,u)}var j;if(f1)e:{switch(t){case"compositionstart":var D="onCompositionStart";break e;case"compositionend":D="onCompositionEnd";break e;case"compositionupdate":D="onCompositionUpdate";break e}D=void 0}else Il?QC(t,n)&&(D="onCompositionEnd"):t==="keydown"&&n.keyCode===229&&(D="onCompositionStart");D&&(qC&&n.locale!=="ko"&&(Il||D!=="onCompositionStart"?D==="onCompositionEnd"&&Il&&(j=WC()):(xo=u,c1="value"in xo?xo.value:xo.textContent,Il=!0)),L=Hp(c,D),0<L.length&&(D=new AE(D,t,null,n,u),d.push({event:D,listeners:L}),j?D.data=j:(j=YC(n),j!==null&&(D.data=j)))),(j=t8?n8(t,n):r8(t,n))&&(c=Hp(c,"onBeforeInput"),0<c.length&&(u=new AE("onBeforeInput","beforeinput",null,n,u),d.push({event:u,listeners:c}),u.data=j))}lk(d,e)})}function Ld(t,e,n){return{instance:t,listener:e,currentTarget:n}}function Hp(t,e){for(var n=e+"Capture",r=[];t!==null;){var i=t,s=i.stateNode;i.tag===5&&s!==null&&(i=s,s=Td(t,n),s!=null&&r.unshift(Ld(t,s,i)),s=Td(t,e),s!=null&&r.push(Ld(t,s,i))),t=t.return}return r}function ml(t){if(t===null)return null;do t=t.return;while(t&&t.tag!==5);return t||null}function ME(t,e,n,r,i){for(var s=e._reactName,o=[];n!==null&&n!==r;){var a=n,l=a.alternate,c=a.stateNode;if(l!==null&&l===r)break;a.tag===5&&c!==null&&(a=c,i?(l=Td(n,s),l!=null&&o.unshift(Ld(n,l,a))):i||(l=Td(n,s),l!=null&&o.push(Ld(n,l,a)))),n=n.return}o.length!==0&&t.push({event:e,listeners:o})}var y8=/\r\n?/g,v8=/\u0000|\uFFFD/g;function LE(t){return(typeof t=="string"?t:""+t).replace(y8,`
`).replace(v8,"")}function sh(t,e,n){if(e=LE(e),LE(t)!==e&&n)throw Error(ye(425))}function Kp(){}var Zy=null,Xy=null;function ev(t,e){return t==="textarea"||t==="noscript"||typeof e.children=="string"||typeof e.children=="number"||typeof e.dangerouslySetInnerHTML=="object"&&e.dangerouslySetInnerHTML!==null&&e.dangerouslySetInnerHTML.__html!=null}var tv=typeof setTimeout=="function"?setTimeout:void 0,w8=typeof clearTimeout=="function"?clearTimeout:void 0,BE=typeof Promise=="function"?Promise:void 0,b8=typeof queueMicrotask=="function"?queueMicrotask:typeof BE<"u"?function(t){return BE.resolve(null).then(t).catch(E8)}:tv;function E8(t){setTimeout(function(){throw t})}function lm(t,e){var n=e,r=0;do{var i=n.nextSibling;if(t.removeChild(n),i&&i.nodeType===8)if(n=i.data,n==="/$"){if(r===0){t.removeChild(i),Id(e);return}r--}else n!=="$"&&n!=="$?"&&n!=="$!"||r++;n=i}while(n);Id(e)}function Io(t){for(;t!=null;t=t.nextSibling){var e=t.nodeType;if(e===1||e===3)break;if(e===8){if(e=t.data,e==="$"||e==="$!"||e==="$?")break;if(e==="/$")return null}}return t}function DE(t){t=t.previousSibling;for(var e=0;t;){if(t.nodeType===8){var n=t.data;if(n==="$"||n==="$!"||n==="$?"){if(e===0)return t;e--}else n==="/$"&&e++}t=t.previousSibling}return null}var Au=Math.random().toString(36).slice(2),Ai="__reactFiber$"+Au,Bd="__reactProps$"+Au,Ss="__reactContainer$"+Au,nv="__reactEvents$"+Au,A8="__reactListeners$"+Au,S8="__reactHandles$"+Au;function pa(t){var e=t[Ai];if(e)return e;for(var n=t.parentNode;n;){if(e=n[Ss]||n[Ai]){if(n=e.alternate,e.child!==null||n!==null&&n.child!==null)for(t=DE(t);t!==null;){if(n=t[Ai])return n;t=DE(t)}return e}t=n,n=t.parentNode}return null}function If(t){return t=t[Ai]||t[Ss],!t||t.tag!==5&&t.tag!==6&&t.tag!==13&&t.tag!==3?null:t}function Ml(t){if(t.tag===5||t.tag===6)return t.stateNode;throw Error(ye(33))}function sg(t){return t[Bd]||null}var rv=[],Ll=-1;function Yo(t){return{current:t}}function ot(t){0>Ll||(t.current=rv[Ll],rv[Ll]=null,Ll--)}function rt(t,e){Ll++,rv[Ll]=t.current,t.current=e}var jo={},dn=Yo(jo),$n=Yo(!1),Ya=jo;function nu(t,e){var n=t.type.contextTypes;if(!n)return jo;var r=t.stateNode;if(r&&r.__reactInternalMemoizedUnmaskedChildContext===e)return r.__reactInternalMemoizedMaskedChildContext;var i={},s;for(s in n)i[s]=e[s];return r&&(t=t.stateNode,t.__reactInternalMemoizedUnmaskedChildContext=e,t.__reactInternalMemoizedMaskedChildContext=i),i}function Un(t){return t=t.childContextTypes,t!=null}function zp(){ot($n),ot(dn)}function $E(t,e,n){if(dn.current!==jo)throw Error(ye(168));rt(dn,e),rt($n,n)}function uk(t,e,n){var r=t.stateNode;if(e=e.childContextTypes,typeof r.getChildContext!="function")return n;r=r.getChildContext();for(var i in r)if(!(i in e))throw Error(ye(108,aO(t)||"Unknown",i));return ht({},n,r)}function Vp(t){return t=(t=t.stateNode)&&t.__reactInternalMemoizedMergedChildContext||jo,Ya=dn.current,rt(dn,t),rt($n,$n.current),!0}function UE(t,e,n){var r=t.stateNode;if(!r)throw Error(ye(169));n?(t=uk(t,e,Ya),r.__reactInternalMemoizedMergedChildContext=t,ot($n),ot(dn),rt(dn,t)):ot($n),rt($n,n)}var Wi=null,og=!1,cm=!1;function dk(t){Wi===null?Wi=[t]:Wi.push(t)}function x8(t){og=!0,dk(t)}function Jo(){if(!cm&&Wi!==null){cm=!0;var t=0,e=Xe;try{var n=Wi;for(Xe=1;t<n.length;t++){var r=n[t];do r=r(!0);while(r!==null)}Wi=null,og=!1}catch(i){throw Wi!==null&&(Wi=Wi.slice(t+1)),BC(s1,Jo),i}finally{Xe=e,cm=!1}}return null}var Bl=[],Dl=0,Gp=null,Wp=0,Cr=[],kr=0,Ja=null,ds=1,fs="";function ra(t,e){Bl[Dl++]=Wp,Bl[Dl++]=Gp,Gp=t,Wp=e}function fk(t,e,n){Cr[kr++]=ds,Cr[kr++]=fs,Cr[kr++]=Ja,Ja=t;var r=ds;t=fs;var i=32-Xr(r)-1;r&=~(1<<i),n+=1;var s=32-Xr(e)+i;if(30<s){var o=i-i%5;s=(r&(1<<o)-1).toString(32),r>>=o,i-=o,ds=1<<32-Xr(e)+i|n<<i|r,fs=s+t}else ds=1<<s|n<<i|r,fs=t}function p1(t){t.return!==null&&(ra(t,1),fk(t,1,0))}function g1(t){for(;t===Gp;)Gp=Bl[--Dl],Bl[Dl]=null,Wp=Bl[--Dl],Bl[Dl]=null;for(;t===Ja;)Ja=Cr[--kr],Cr[kr]=null,fs=Cr[--kr],Cr[kr]=null,ds=Cr[--kr],Cr[kr]=null}var ir=null,rr=null,lt=!1,qr=null;function hk(t,e){var n=Tr(5,null,null,0);n.elementType="DELETED",n.stateNode=e,n.return=t,e=t.deletions,e===null?(t.deletions=[n],t.flags|=16):e.push(n)}function FE(t,e){switch(t.tag){case 5:var n=t.type;return e=e.nodeType!==1||n.toLowerCase()!==e.nodeName.toLowerCase()?null:e,e!==null?(t.stateNode=e,ir=t,rr=Io(e.firstChild),!0):!1;case 6:return e=t.pendingProps===""||e.nodeType!==3?null:e,e!==null?(t.stateNode=e,ir=t,rr=null,!0):!1;case 13:return e=e.nodeType!==8?null:e,e!==null?(n=Ja!==null?{id:ds,overflow:fs}:null,t.memoizedState={dehydrated:e,treeContext:n,retryLane:1073741824},n=Tr(18,null,null,0),n.stateNode=e,n.return=t,t.child=n,ir=t,rr=null,!0):!1;default:return!1}}function iv(t){return(t.mode&1)!==0&&(t.flags&128)===0}function sv(t){if(lt){var e=rr;if(e){var n=e;if(!FE(t,e)){if(iv(t))throw Error(ye(418));e=Io(n.nextSibling);var r=ir;e&&FE(t,e)?hk(r,n):(t.flags=t.flags&-4097|2,lt=!1,ir=t)}}else{if(iv(t))throw Error(ye(418));t.flags=t.flags&-4097|2,lt=!1,ir=t}}}function jE(t){for(t=t.return;t!==null&&t.tag!==5&&t.tag!==3&&t.tag!==13;)t=t.return;ir=t}function oh(t){if(t!==ir)return!1;if(!lt)return jE(t),lt=!0,!1;var e;if((e=t.tag!==3)&&!(e=t.tag!==5)&&(e=t.type,e=e!=="head"&&e!=="body"&&!ev(t.type,t.memoizedProps)),e&&(e=rr)){if(iv(t))throw pk(),Error(ye(418));for(;e;)hk(t,e),e=Io(e.nextSibling)}if(jE(t),t.tag===13){if(t=t.memoizedState,t=t!==null?t.dehydrated:null,!t)throw Error(ye(317));e:{for(t=t.nextSibling,e=0;t;){if(t.nodeType===8){var n=t.data;if(n==="/$"){if(e===0){rr=Io(t.nextSibling);break e}e--}else n!=="$"&&n!=="$!"&&n!=="$?"||e++}t=t.nextSibling}rr=null}}else rr=ir?Io(t.stateNode.nextSibling):null;return!0}function pk(){for(var t=rr;t;)t=Io(t.nextSibling)}function ru(){rr=ir=null,lt=!1}function m1(t){qr===null?qr=[t]:qr.push(t)}var C8=Ps.ReactCurrentBatchConfig;function Lu(t,e,n){if(t=n.ref,t!==null&&typeof t!="function"&&typeof t!="object"){if(n._owner){if(n=n._owner,n){if(n.tag!==1)throw Error(ye(309));var r=n.stateNode}if(!r)throw Error(ye(147,t));var i=r,s=""+t;return e!==null&&e.ref!==null&&typeof e.ref=="function"&&e.ref._stringRef===s?e.ref:(e=function(o){var a=i.refs;o===null?delete a[s]:a[s]=o},e._stringRef=s,e)}if(typeof t!="string")throw Error(ye(284));if(!n._owner)throw Error(ye(290,t))}return t}function ah(t,e){throw t=Object.prototype.toString.call(e),Error(ye(31,t==="[object Object]"?"object with keys {"+Object.keys(e).join(", ")+"}":t))}function HE(t){var e=t._init;return e(t._payload)}function gk(t){function e(p,v){if(t){var y=p.deletions;y===null?(p.deletions=[v],p.flags|=16):y.push(v)}}function n(p,v){if(!t)return null;for(;v!==null;)e(p,v),v=v.sibling;return null}function r(p,v){for(p=new Map;v!==null;)v.key!==null?p.set(v.key,v):p.set(v.index,v),v=v.sibling;return p}function i(p,v){return p=Lo(p,v),p.index=0,p.sibling=null,p}function s(p,v,y){return p.index=y,t?(y=p.alternate,y!==null?(y=y.index,y<v?(p.flags|=2,v):y):(p.flags|=2,v)):(p.flags|=1048576,v)}function o(p){return t&&p.alternate===null&&(p.flags|=2),p}function a(p,v,y,C){return v===null||v.tag!==6?(v=mm(y,p.mode,C),v.return=p,v):(v=i(v,y),v.return=p,v)}function l(p,v,y,C){var P=y.type;return P===Rl?u(p,v,y.props.children,C,y.key):v!==null&&(v.elementType===P||typeof P=="object"&&P!==null&&P.$$typeof===Ws&&HE(P)===v.type)?(C=i(v,y.props),C.ref=Lu(p,v,y),C.return=p,C):(C=rp(y.type,y.key,y.props,null,p.mode,C),C.ref=Lu(p,v,y),C.return=p,C)}function c(p,v,y,C){return v===null||v.tag!==4||v.stateNode.containerInfo!==y.containerInfo||v.stateNode.implementation!==y.implementation?(v=ym(y,p.mode,C),v.return=p,v):(v=i(v,y.children||[]),v.return=p,v)}function u(p,v,y,C,P){return v===null||v.tag!==7?(v=Ga(y,p.mode,C,P),v.return=p,v):(v=i(v,y),v.return=p,v)}function d(p,v,y){if(typeof v=="string"&&v!==""||typeof v=="number")return v=mm(""+v,p.mode,y),v.return=p,v;if(typeof v=="object"&&v!==null){switch(v.$$typeof){case Yf:return y=rp(v.type,v.key,v.props,null,p.mode,y),y.ref=Lu(p,null,v),y.return=p,y;case Pl:return v=ym(v,p.mode,y),v.return=p,v;case Ws:var C=v._init;return d(p,C(v._payload),y)}if(qu(v)||Ru(v))return v=Ga(v,p.mode,y,null),v.return=p,v;ah(p,v)}return null}function f(p,v,y,C){var P=v!==null?v.key:null;if(typeof y=="string"&&y!==""||typeof y=="number")return P!==null?null:a(p,v,""+y,C);if(typeof y=="object"&&y!==null){switch(y.$$typeof){case Yf:return y.key===P?l(p,v,y,C):null;case Pl:return y.key===P?c(p,v,y,C):null;case Ws:return P=y._init,f(p,v,P(y._payload),C)}if(qu(y)||Ru(y))return P!==null?null:u(p,v,y,C,null);ah(p,y)}return null}function h(p,v,y,C,P){if(typeof C=="string"&&C!==""||typeof C=="number")return p=p.get(y)||null,a(v,p,""+C,P);if(typeof C=="object"&&C!==null){switch(C.$$typeof){case Yf:return p=p.get(C.key===null?y:C.key)||null,l(v,p,C,P);case Pl:return p=p.get(C.key===null?y:C.key)||null,c(v,p,C,P);case Ws:var L=C._init;return h(p,v,y,L(C._payload),P)}if(qu(C)||Ru(C))return p=p.get(y)||null,u(v,p,C,P,null);ah(v,C)}return null}function m(p,v,y,C){for(var P=null,L=null,j=v,D=v=0,V=null;j!==null&&D<y.length;D++){j.index>D?(V=j,j=null):V=j.sibling;var F=f(p,j,y[D],C);if(F===null){j===null&&(j=V);break}t&&j&&F.alternate===null&&e(p,j),v=s(F,v,D),L===null?P=F:L.sibling=F,L=F,j=V}if(D===y.length)return n(p,j),lt&&ra(p,D),P;if(j===null){for(;D<y.length;D++)j=d(p,y[D],C),j!==null&&(v=s(j,v,D),L===null?P=j:L.sibling=j,L=j);return lt&&ra(p,D),P}for(j=r(p,j);D<y.length;D++)V=h(j,p,D,y[D],C),V!==null&&(t&&V.alternate!==null&&j.delete(V.key===null?D:V.key),v=s(V,v,D),L===null?P=V:L.sibling=V,L=V);return t&&j.forEach(function(W){return e(p,W)}),lt&&ra(p,D),P}function g(p,v,y,C){var P=Ru(y);if(typeof P!="function")throw Error(ye(150));if(y=P.call(y),y==null)throw Error(ye(151));for(var L=P=null,j=v,D=v=0,V=null,F=y.next();j!==null&&!F.done;D++,F=y.next()){j.index>D?(V=j,j=null):V=j.sibling;var W=f(p,j,F.value,C);if(W===null){j===null&&(j=V);break}t&&j&&W.alternate===null&&e(p,j),v=s(W,v,D),L===null?P=W:L.sibling=W,L=W,j=V}if(F.done)return n(p,j),lt&&ra(p,D),P;if(j===null){for(;!F.done;D++,F=y.next())F=d(p,F.value,C),F!==null&&(v=s(F,v,D),L===null?P=F:L.sibling=F,L=F);return lt&&ra(p,D),P}for(j=r(p,j);!F.done;D++,F=y.next())F=h(j,p,D,F.value,C),F!==null&&(t&&F.alternate!==null&&j.delete(F.key===null?D:F.key),v=s(F,v,D),L===null?P=F:L.sibling=F,L=F);return t&&j.forEach(function(K){return e(p,K)}),lt&&ra(p,D),P}function w(p,v,y,C){if(typeof y=="object"&&y!==null&&y.type===Rl&&y.key===null&&(y=y.props.children),typeof y=="object"&&y!==null){switch(y.$$typeof){case Yf:e:{for(var P=y.key,L=v;L!==null;){if(L.key===P){if(P=y.type,P===Rl){if(L.tag===7){n(p,L.sibling),v=i(L,y.props.children),v.return=p,p=v;break e}}else if(L.elementType===P||typeof P=="object"&&P!==null&&P.$$typeof===Ws&&HE(P)===L.type){n(p,L.sibling),v=i(L,y.props),v.ref=Lu(p,L,y),v.return=p,p=v;break e}n(p,L);break}else e(p,L);L=L.sibling}y.type===Rl?(v=Ga(y.props.children,p.mode,C,y.key),v.return=p,p=v):(C=rp(y.type,y.key,y.props,null,p.mode,C),C.ref=Lu(p,v,y),C.return=p,p=C)}return o(p);case Pl:e:{for(L=y.key;v!==null;){if(v.key===L)if(v.tag===4&&v.stateNode.containerInfo===y.containerInfo&&v.stateNode.implementation===y.implementation){n(p,v.sibling),v=i(v,y.children||[]),v.return=p,p=v;break e}else{n(p,v);break}else e(p,v);v=v.sibling}v=ym(y,p.mode,C),v.return=p,p=v}return o(p);case Ws:return L=y._init,w(p,v,L(y._payload),C)}if(qu(y))return m(p,v,y,C);if(Ru(y))return g(p,v,y,C);ah(p,y)}return typeof y=="string"&&y!==""||typeof y=="number"?(y=""+y,v!==null&&v.tag===6?(n(p,v.sibling),v=i(v,y),v.return=p,p=v):(n(p,v),v=mm(y,p.mode,C),v.return=p,p=v),o(p)):n(p,v)}return w}var iu=gk(!0),mk=gk(!1),qp=Yo(null),Qp=null,$l=null,y1=null;function v1(){y1=$l=Qp=null}function w1(t){var e=qp.current;ot(qp),t._currentValue=e}function ov(t,e,n){for(;t!==null;){var r=t.alternate;if((t.childLanes&e)!==e?(t.childLanes|=e,r!==null&&(r.childLanes|=e)):r!==null&&(r.childLanes&e)!==e&&(r.childLanes|=e),t===n)break;t=t.return}}function ic(t,e){Qp=t,y1=$l=null,t=t.dependencies,t!==null&&t.firstContext!==null&&(t.lanes&e&&(Bn=!0),t.firstContext=null)}function Ir(t){var e=t._currentValue;if(y1!==t)if(t={context:t,memoizedValue:e,next:null},$l===null){if(Qp===null)throw Error(ye(308));$l=t,Qp.dependencies={lanes:0,firstContext:t}}else $l=$l.next=t;return e}var ga=null;function b1(t){ga===null?ga=[t]:ga.push(t)}function yk(t,e,n,r){var i=e.interleaved;return i===null?(n.next=n,b1(e)):(n.next=i.next,i.next=n),e.interleaved=n,xs(t,r)}function xs(t,e){t.lanes|=e;var n=t.alternate;for(n!==null&&(n.lanes|=e),n=t,t=t.return;t!==null;)t.childLanes|=e,n=t.alternate,n!==null&&(n.childLanes|=e),n=t,t=t.return;return n.tag===3?n.stateNode:null}var qs=!1;function E1(t){t.updateQueue={baseState:t.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,interleaved:null,lanes:0},effects:null}}function vk(t,e){t=t.updateQueue,e.updateQueue===t&&(e.updateQueue={baseState:t.baseState,firstBaseUpdate:t.firstBaseUpdate,lastBaseUpdate:t.lastBaseUpdate,shared:t.shared,effects:t.effects})}function vs(t,e){return{eventTime:t,lane:e,tag:0,payload:null,callback:null,next:null}}function Oo(t,e,n){var r=t.updateQueue;if(r===null)return null;if(r=r.shared,ze&2){var i=r.pending;return i===null?e.next=e:(e.next=i.next,i.next=e),r.pending=e,xs(t,n)}return i=r.interleaved,i===null?(e.next=e,b1(r)):(e.next=i.next,i.next=e),r.interleaved=e,xs(t,n)}function Jh(t,e,n){if(e=e.updateQueue,e!==null&&(e=e.shared,(n&4194240)!==0)){var r=e.lanes;r&=t.pendingLanes,n|=r,e.lanes=n,o1(t,n)}}function KE(t,e){var n=t.updateQueue,r=t.alternate;if(r!==null&&(r=r.updateQueue,n===r)){var i=null,s=null;if(n=n.firstBaseUpdate,n!==null){do{var o={eventTime:n.eventTime,lane:n.lane,tag:n.tag,payload:n.payload,callback:n.callback,next:null};s===null?i=s=o:s=s.next=o,n=n.next}while(n!==null);s===null?i=s=e:s=s.next=e}else i=s=e;n={baseState:r.baseState,firstBaseUpdate:i,lastBaseUpdate:s,shared:r.shared,effects:r.effects},t.updateQueue=n;return}t=n.lastBaseUpdate,t===null?n.firstBaseUpdate=e:t.next=e,n.lastBaseUpdate=e}function Yp(t,e,n,r){var i=t.updateQueue;qs=!1;var s=i.firstBaseUpdate,o=i.lastBaseUpdate,a=i.shared.pending;if(a!==null){i.shared.pending=null;var l=a,c=l.next;l.next=null,o===null?s=c:o.next=c,o=l;var u=t.alternate;u!==null&&(u=u.updateQueue,a=u.lastBaseUpdate,a!==o&&(a===null?u.firstBaseUpdate=c:a.next=c,u.lastBaseUpdate=l))}if(s!==null){var d=i.baseState;o=0,u=c=l=null,a=s;do{var f=a.lane,h=a.eventTime;if((r&f)===f){u!==null&&(u=u.next={eventTime:h,lane:0,tag:a.tag,payload:a.payload,callback:a.callback,next:null});e:{var m=t,g=a;switch(f=e,h=n,g.tag){case 1:if(m=g.payload,typeof m=="function"){d=m.call(h,d,f);break e}d=m;break e;case 3:m.flags=m.flags&-65537|128;case 0:if(m=g.payload,f=typeof m=="function"?m.call(h,d,f):m,f==null)break e;d=ht({},d,f);break e;case 2:qs=!0}}a.callback!==null&&a.lane!==0&&(t.flags|=64,f=i.effects,f===null?i.effects=[a]:f.push(a))}else h={eventTime:h,lane:f,tag:a.tag,payload:a.payload,callback:a.callback,next:null},u===null?(c=u=h,l=d):u=u.next=h,o|=f;if(a=a.next,a===null){if(a=i.shared.pending,a===null)break;f=a,a=f.next,f.next=null,i.lastBaseUpdate=f,i.shared.pending=null}}while(!0);if(u===null&&(l=d),i.baseState=l,i.firstBaseUpdate=c,i.lastBaseUpdate=u,e=i.shared.interleaved,e!==null){i=e;do o|=i.lane,i=i.next;while(i!==e)}else s===null&&(i.shared.lanes=0);Xa|=o,t.lanes=o,t.memoizedState=d}}function zE(t,e,n){if(t=e.effects,e.effects=null,t!==null)for(e=0;e<t.length;e++){var r=t[e],i=r.callback;if(i!==null){if(r.callback=null,r=n,typeof i!="function")throw Error(ye(191,i));i.call(r)}}}var Of={},Mi=Yo(Of),Dd=Yo(Of),$d=Yo(Of);function ma(t){if(t===Of)throw Error(ye(174));return t}function A1(t,e){switch(rt($d,e),rt(Dd,t),rt(Mi,Of),t=e.nodeType,t){case 9:case 11:e=(e=e.documentElement)?e.namespaceURI:Fy(null,"");break;default:t=t===8?e.parentNode:e,e=t.namespaceURI||null,t=t.tagName,e=Fy(e,t)}ot(Mi),rt(Mi,e)}function su(){ot(Mi),ot(Dd),ot($d)}function wk(t){ma($d.current);var e=ma(Mi.current),n=Fy(e,t.type);e!==n&&(rt(Dd,t),rt(Mi,n))}function S1(t){Dd.current===t&&(ot(Mi),ot(Dd))}var ut=Yo(0);function Jp(t){for(var e=t;e!==null;){if(e.tag===13){var n=e.memoizedState;if(n!==null&&(n=n.dehydrated,n===null||n.data==="$?"||n.data==="$!"))return e}else if(e.tag===19&&e.memoizedProps.revealOrder!==void 0){if(e.flags&128)return e}else if(e.child!==null){e.child.return=e,e=e.child;continue}if(e===t)break;for(;e.sibling===null;){if(e.return===null||e.return===t)return null;e=e.return}e.sibling.return=e.return,e=e.sibling}return null}var um=[];function x1(){for(var t=0;t<um.length;t++)um[t]._workInProgressVersionPrimary=null;um.length=0}var Zh=Ps.ReactCurrentDispatcher,dm=Ps.ReactCurrentBatchConfig,Za=0,ft=null,_t=null,Mt=null,Zp=!1,fd=!1,Ud=0,k8=0;function Jt(){throw Error(ye(321))}function C1(t,e){if(e===null)return!1;for(var n=0;n<e.length&&n<t.length;n++)if(!ni(t[n],e[n]))return!1;return!0}function k1(t,e,n,r,i,s){if(Za=s,ft=e,e.memoizedState=null,e.updateQueue=null,e.lanes=0,Zh.current=t===null||t.memoizedState===null?R8:I8,t=n(r,i),fd){s=0;do{if(fd=!1,Ud=0,25<=s)throw Error(ye(301));s+=1,Mt=_t=null,e.updateQueue=null,Zh.current=O8,t=n(r,i)}while(fd)}if(Zh.current=Xp,e=_t!==null&&_t.next!==null,Za=0,Mt=_t=ft=null,Zp=!1,e)throw Error(ye(300));return t}function _1(){var t=Ud!==0;return Ud=0,t}function di(){var t={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return Mt===null?ft.memoizedState=Mt=t:Mt=Mt.next=t,Mt}function Or(){if(_t===null){var t=ft.alternate;t=t!==null?t.memoizedState:null}else t=_t.next;var e=Mt===null?ft.memoizedState:Mt.next;if(e!==null)Mt=e,_t=t;else{if(t===null)throw Error(ye(310));_t=t,t={memoizedState:_t.memoizedState,baseState:_t.baseState,baseQueue:_t.baseQueue,queue:_t.queue,next:null},Mt===null?ft.memoizedState=Mt=t:Mt=Mt.next=t}return Mt}function Fd(t,e){return typeof e=="function"?e(t):e}function fm(t){var e=Or(),n=e.queue;if(n===null)throw Error(ye(311));n.lastRenderedReducer=t;var r=_t,i=r.baseQueue,s=n.pending;if(s!==null){if(i!==null){var o=i.next;i.next=s.next,s.next=o}r.baseQueue=i=s,n.pending=null}if(i!==null){s=i.next,r=r.baseState;var a=o=null,l=null,c=s;do{var u=c.lane;if((Za&u)===u)l!==null&&(l=l.next={lane:0,action:c.action,hasEagerState:c.hasEagerState,eagerState:c.eagerState,next:null}),r=c.hasEagerState?c.eagerState:t(r,c.action);else{var d={lane:u,action:c.action,hasEagerState:c.hasEagerState,eagerState:c.eagerState,next:null};l===null?(a=l=d,o=r):l=l.next=d,ft.lanes|=u,Xa|=u}c=c.next}while(c!==null&&c!==s);l===null?o=r:l.next=a,ni(r,e.memoizedState)||(Bn=!0),e.memoizedState=r,e.baseState=o,e.baseQueue=l,n.lastRenderedState=r}if(t=n.interleaved,t!==null){i=t;do s=i.lane,ft.lanes|=s,Xa|=s,i=i.next;while(i!==t)}else i===null&&(n.lanes=0);return[e.memoizedState,n.dispatch]}function hm(t){var e=Or(),n=e.queue;if(n===null)throw Error(ye(311));n.lastRenderedReducer=t;var r=n.dispatch,i=n.pending,s=e.memoizedState;if(i!==null){n.pending=null;var o=i=i.next;do s=t(s,o.action),o=o.next;while(o!==i);ni(s,e.memoizedState)||(Bn=!0),e.memoizedState=s,e.baseQueue===null&&(e.baseState=s),n.lastRenderedState=s}return[s,r]}function bk(){}function Ek(t,e){var n=ft,r=Or(),i=e(),s=!ni(r.memoizedState,i);if(s&&(r.memoizedState=i,Bn=!0),r=r.queue,T1(xk.bind(null,n,r,t),[t]),r.getSnapshot!==e||s||Mt!==null&&Mt.memoizedState.tag&1){if(n.flags|=2048,jd(9,Sk.bind(null,n,r,i,e),void 0,null),$t===null)throw Error(ye(349));Za&30||Ak(n,e,i)}return i}function Ak(t,e,n){t.flags|=16384,t={getSnapshot:e,value:n},e=ft.updateQueue,e===null?(e={lastEffect:null,stores:null},ft.updateQueue=e,e.stores=[t]):(n=e.stores,n===null?e.stores=[t]:n.push(t))}function Sk(t,e,n,r){e.value=n,e.getSnapshot=r,Ck(e)&&kk(t)}function xk(t,e,n){return n(function(){Ck(e)&&kk(t)})}function Ck(t){var e=t.getSnapshot;t=t.value;try{var n=e();return!ni(t,n)}catch{return!0}}function kk(t){var e=xs(t,1);e!==null&&ei(e,t,1,-1)}function VE(t){var e=di();return typeof t=="function"&&(t=t()),e.memoizedState=e.baseState=t,t={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:Fd,lastRenderedState:t},e.queue=t,t=t.dispatch=P8.bind(null,ft,t),[e.memoizedState,t]}function jd(t,e,n,r){return t={tag:t,create:e,destroy:n,deps:r,next:null},e=ft.updateQueue,e===null?(e={lastEffect:null,stores:null},ft.updateQueue=e,e.lastEffect=t.next=t):(n=e.lastEffect,n===null?e.lastEffect=t.next=t:(r=n.next,n.next=t,t.next=r,e.lastEffect=t)),t}function _k(){return Or().memoizedState}function Xh(t,e,n,r){var i=di();ft.flags|=t,i.memoizedState=jd(1|e,n,void 0,r===void 0?null:r)}function ag(t,e,n,r){var i=Or();r=r===void 0?null:r;var s=void 0;if(_t!==null){var o=_t.memoizedState;if(s=o.destroy,r!==null&&C1(r,o.deps)){i.memoizedState=jd(e,n,s,r);return}}ft.flags|=t,i.memoizedState=jd(1|e,n,s,r)}function GE(t,e){return Xh(8390656,8,t,e)}function T1(t,e){return ag(2048,8,t,e)}function Tk(t,e){return ag(4,2,t,e)}function Pk(t,e){return ag(4,4,t,e)}function Rk(t,e){if(typeof e=="function")return t=t(),e(t),function(){e(null)};if(e!=null)return t=t(),e.current=t,function(){e.current=null}}function Ik(t,e,n){return n=n!=null?n.concat([t]):null,ag(4,4,Rk.bind(null,e,t),n)}function P1(){}function Ok(t,e){var n=Or();e=e===void 0?null:e;var r=n.memoizedState;return r!==null&&e!==null&&C1(e,r[1])?r[0]:(n.memoizedState=[t,e],t)}function Nk(t,e){var n=Or();e=e===void 0?null:e;var r=n.memoizedState;return r!==null&&e!==null&&C1(e,r[1])?r[0]:(t=t(),n.memoizedState=[t,e],t)}function Mk(t,e,n){return Za&21?(ni(n,e)||(n=UC(),ft.lanes|=n,Xa|=n,t.baseState=!0),e):(t.baseState&&(t.baseState=!1,Bn=!0),t.memoizedState=n)}function _8(t,e){var n=Xe;Xe=n!==0&&4>n?n:4,t(!0);var r=dm.transition;dm.transition={};try{t(!1),e()}finally{Xe=n,dm.transition=r}}function Lk(){return Or().memoizedState}function T8(t,e,n){var r=Mo(t);if(n={lane:r,action:n,hasEagerState:!1,eagerState:null,next:null},Bk(t))Dk(e,n);else if(n=yk(t,e,n,r),n!==null){var i=xn();ei(n,t,r,i),$k(n,e,r)}}function P8(t,e,n){var r=Mo(t),i={lane:r,action:n,hasEagerState:!1,eagerState:null,next:null};if(Bk(t))Dk(e,i);else{var s=t.alternate;if(t.lanes===0&&(s===null||s.lanes===0)&&(s=e.lastRenderedReducer,s!==null))try{var o=e.lastRenderedState,a=s(o,n);if(i.hasEagerState=!0,i.eagerState=a,ni(a,o)){var l=e.interleaved;l===null?(i.next=i,b1(e)):(i.next=l.next,l.next=i),e.interleaved=i;return}}catch{}finally{}n=yk(t,e,i,r),n!==null&&(i=xn(),ei(n,t,r,i),$k(n,e,r))}}function Bk(t){var e=t.alternate;return t===ft||e!==null&&e===ft}function Dk(t,e){fd=Zp=!0;var n=t.pending;n===null?e.next=e:(e.next=n.next,n.next=e),t.pending=e}function $k(t,e,n){if(n&4194240){var r=e.lanes;r&=t.pendingLanes,n|=r,e.lanes=n,o1(t,n)}}var Xp={readContext:Ir,useCallback:Jt,useContext:Jt,useEffect:Jt,useImperativeHandle:Jt,useInsertionEffect:Jt,useLayoutEffect:Jt,useMemo:Jt,useReducer:Jt,useRef:Jt,useState:Jt,useDebugValue:Jt,useDeferredValue:Jt,useTransition:Jt,useMutableSource:Jt,useSyncExternalStore:Jt,useId:Jt,unstable_isNewReconciler:!1},R8={readContext:Ir,useCallback:function(t,e){return di().memoizedState=[t,e===void 0?null:e],t},useContext:Ir,useEffect:GE,useImperativeHandle:function(t,e,n){return n=n!=null?n.concat([t]):null,Xh(4194308,4,Rk.bind(null,e,t),n)},useLayoutEffect:function(t,e){return Xh(4194308,4,t,e)},useInsertionEffect:function(t,e){return Xh(4,2,t,e)},useMemo:function(t,e){var n=di();return e=e===void 0?null:e,t=t(),n.memoizedState=[t,e],t},useReducer:function(t,e,n){var r=di();return e=n!==void 0?n(e):e,r.memoizedState=r.baseState=e,t={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:t,lastRenderedState:e},r.queue=t,t=t.dispatch=T8.bind(null,ft,t),[r.memoizedState,t]},useRef:function(t){var e=di();return t={current:t},e.memoizedState=t},useState:VE,useDebugValue:P1,useDeferredValue:function(t){return di().memoizedState=t},useTransition:function(){var t=VE(!1),e=t[0];return t=_8.bind(null,t[1]),di().memoizedState=t,[e,t]},useMutableSource:function(){},useSyncExternalStore:function(t,e,n){var r=ft,i=di();if(lt){if(n===void 0)throw Error(ye(407));n=n()}else{if(n=e(),$t===null)throw Error(ye(349));Za&30||Ak(r,e,n)}i.memoizedState=n;var s={value:n,getSnapshot:e};return i.queue=s,GE(xk.bind(null,r,s,t),[t]),r.flags|=2048,jd(9,Sk.bind(null,r,s,n,e),void 0,null),n},useId:function(){var t=di(),e=$t.identifierPrefix;if(lt){var n=fs,r=ds;n=(r&~(1<<32-Xr(r)-1)).toString(32)+n,e=":"+e+"R"+n,n=Ud++,0<n&&(e+="H"+n.toString(32)),e+=":"}else n=k8++,e=":"+e+"r"+n.toString(32)+":";return t.memoizedState=e},unstable_isNewReconciler:!1},I8={readContext:Ir,useCallback:Ok,useContext:Ir,useEffect:T1,useImperativeHandle:Ik,useInsertionEffect:Tk,useLayoutEffect:Pk,useMemo:Nk,useReducer:fm,useRef:_k,useState:function(){return fm(Fd)},useDebugValue:P1,useDeferredValue:function(t){var e=Or();return Mk(e,_t.memoizedState,t)},useTransition:function(){var t=fm(Fd)[0],e=Or().memoizedState;return[t,e]},useMutableSource:bk,useSyncExternalStore:Ek,useId:Lk,unstable_isNewReconciler:!1},O8={readContext:Ir,useCallback:Ok,useContext:Ir,useEffect:T1,useImperativeHandle:Ik,useInsertionEffect:Tk,useLayoutEffect:Pk,useMemo:Nk,useReducer:hm,useRef:_k,useState:function(){return hm(Fd)},useDebugValue:P1,useDeferredValue:function(t){var e=Or();return _t===null?e.memoizedState=t:Mk(e,_t.memoizedState,t)},useTransition:function(){var t=hm(Fd)[0],e=Or().memoizedState;return[t,e]},useMutableSource:bk,useSyncExternalStore:Ek,useId:Lk,unstable_isNewReconciler:!1};function $r(t,e){if(t&&t.defaultProps){e=ht({},e),t=t.defaultProps;for(var n in t)e[n]===void 0&&(e[n]=t[n]);return e}return e}function av(t,e,n,r){e=t.memoizedState,n=n(r,e),n=n==null?e:ht({},e,n),t.memoizedState=n,t.lanes===0&&(t.updateQueue.baseState=n)}var lg={isMounted:function(t){return(t=t._reactInternals)?cl(t)===t:!1},enqueueSetState:function(t,e,n){t=t._reactInternals;var r=xn(),i=Mo(t),s=vs(r,i);s.payload=e,n!=null&&(s.callback=n),e=Oo(t,s,i),e!==null&&(ei(e,t,i,r),Jh(e,t,i))},enqueueReplaceState:function(t,e,n){t=t._reactInternals;var r=xn(),i=Mo(t),s=vs(r,i);s.tag=1,s.payload=e,n!=null&&(s.callback=n),e=Oo(t,s,i),e!==null&&(ei(e,t,i,r),Jh(e,t,i))},enqueueForceUpdate:function(t,e){t=t._reactInternals;var n=xn(),r=Mo(t),i=vs(n,r);i.tag=2,e!=null&&(i.callback=e),e=Oo(t,i,r),e!==null&&(ei(e,t,r,n),Jh(e,t,r))}};function WE(t,e,n,r,i,s,o){return t=t.stateNode,typeof t.shouldComponentUpdate=="function"?t.shouldComponentUpdate(r,s,o):e.prototype&&e.prototype.isPureReactComponent?!Nd(n,r)||!Nd(i,s):!0}function Uk(t,e,n){var r=!1,i=jo,s=e.contextType;return typeof s=="object"&&s!==null?s=Ir(s):(i=Un(e)?Ya:dn.current,r=e.contextTypes,s=(r=r!=null)?nu(t,i):jo),e=new e(n,s),t.memoizedState=e.state!==null&&e.state!==void 0?e.state:null,e.updater=lg,t.stateNode=e,e._reactInternals=t,r&&(t=t.stateNode,t.__reactInternalMemoizedUnmaskedChildContext=i,t.__reactInternalMemoizedMaskedChildContext=s),e}function qE(t,e,n,r){t=e.state,typeof e.componentWillReceiveProps=="function"&&e.componentWillReceiveProps(n,r),typeof e.UNSAFE_componentWillReceiveProps=="function"&&e.UNSAFE_componentWillReceiveProps(n,r),e.state!==t&&lg.enqueueReplaceState(e,e.state,null)}function lv(t,e,n,r){var i=t.stateNode;i.props=n,i.state=t.memoizedState,i.refs={},E1(t);var s=e.contextType;typeof s=="object"&&s!==null?i.context=Ir(s):(s=Un(e)?Ya:dn.current,i.context=nu(t,s)),i.state=t.memoizedState,s=e.getDerivedStateFromProps,typeof s=="function"&&(av(t,e,s,n),i.state=t.memoizedState),typeof e.getDerivedStateFromProps=="function"||typeof i.getSnapshotBeforeUpdate=="function"||typeof i.UNSAFE_componentWillMount!="function"&&typeof i.componentWillMount!="function"||(e=i.state,typeof i.componentWillMount=="function"&&i.componentWillMount(),typeof i.UNSAFE_componentWillMount=="function"&&i.UNSAFE_componentWillMount(),e!==i.state&&lg.enqueueReplaceState(i,i.state,null),Yp(t,n,i,r),i.state=t.memoizedState),typeof i.componentDidMount=="function"&&(t.flags|=4194308)}function ou(t,e){try{var n="",r=e;do n+=oO(r),r=r.return;while(r);var i=n}catch(s){i=`
Error generating stack: `+s.message+`
`+s.stack}return{value:t,source:e,stack:i,digest:null}}function pm(t,e,n){return{value:t,source:null,stack:n??null,digest:e??null}}function cv(t,e){try{console.error(e.value)}catch(n){setTimeout(function(){throw n})}}var N8=typeof WeakMap=="function"?WeakMap:Map;function Fk(t,e,n){n=vs(-1,n),n.tag=3,n.payload={element:null};var r=e.value;return n.callback=function(){t0||(t0=!0,wv=r),cv(t,e)},n}function jk(t,e,n){n=vs(-1,n),n.tag=3;var r=t.type.getDerivedStateFromError;if(typeof r=="function"){var i=e.value;n.payload=function(){return r(i)},n.callback=function(){cv(t,e)}}var s=t.stateNode;return s!==null&&typeof s.componentDidCatch=="function"&&(n.callback=function(){cv(t,e),typeof r!="function"&&(No===null?No=new Set([this]):No.add(this));var o=e.stack;this.componentDidCatch(e.value,{componentStack:o!==null?o:""})}),n}function QE(t,e,n){var r=t.pingCache;if(r===null){r=t.pingCache=new N8;var i=new Set;r.set(e,i)}else i=r.get(e),i===void 0&&(i=new Set,r.set(e,i));i.has(n)||(i.add(n),t=W8.bind(null,t,e,n),e.then(t,t))}function YE(t){do{var e;if((e=t.tag===13)&&(e=t.memoizedState,e=e!==null?e.dehydrated!==null:!0),e)return t;t=t.return}while(t!==null);return null}function JE(t,e,n,r,i){return t.mode&1?(t.flags|=65536,t.lanes=i,t):(t===e?t.flags|=65536:(t.flags|=128,n.flags|=131072,n.flags&=-52805,n.tag===1&&(n.alternate===null?n.tag=17:(e=vs(-1,1),e.tag=2,Oo(n,e,1))),n.lanes|=1),t)}var M8=Ps.ReactCurrentOwner,Bn=!1;function gn(t,e,n,r){e.child=t===null?mk(e,null,n,r):iu(e,t.child,n,r)}function ZE(t,e,n,r,i){n=n.render;var s=e.ref;return ic(e,i),r=k1(t,e,n,r,s,i),n=_1(),t!==null&&!Bn?(e.updateQueue=t.updateQueue,e.flags&=-2053,t.lanes&=~i,Cs(t,e,i)):(lt&&n&&p1(e),e.flags|=1,gn(t,e,r,i),e.child)}function XE(t,e,n,r,i){if(t===null){var s=n.type;return typeof s=="function"&&!D1(s)&&s.defaultProps===void 0&&n.compare===null&&n.defaultProps===void 0?(e.tag=15,e.type=s,Hk(t,e,s,r,i)):(t=rp(n.type,null,r,e,e.mode,i),t.ref=e.ref,t.return=e,e.child=t)}if(s=t.child,!(t.lanes&i)){var o=s.memoizedProps;if(n=n.compare,n=n!==null?n:Nd,n(o,r)&&t.ref===e.ref)return Cs(t,e,i)}return e.flags|=1,t=Lo(s,r),t.ref=e.ref,t.return=e,e.child=t}function Hk(t,e,n,r,i){if(t!==null){var s=t.memoizedProps;if(Nd(s,r)&&t.ref===e.ref)if(Bn=!1,e.pendingProps=r=s,(t.lanes&i)!==0)t.flags&131072&&(Bn=!0);else return e.lanes=t.lanes,Cs(t,e,i)}return uv(t,e,n,r,i)}function Kk(t,e,n){var r=e.pendingProps,i=r.children,s=t!==null?t.memoizedState:null;if(r.mode==="hidden")if(!(e.mode&1))e.memoizedState={baseLanes:0,cachePool:null,transitions:null},rt(Fl,er),er|=n;else{if(!(n&1073741824))return t=s!==null?s.baseLanes|n:n,e.lanes=e.childLanes=1073741824,e.memoizedState={baseLanes:t,cachePool:null,transitions:null},e.updateQueue=null,rt(Fl,er),er|=t,null;e.memoizedState={baseLanes:0,cachePool:null,transitions:null},r=s!==null?s.baseLanes:n,rt(Fl,er),er|=r}else s!==null?(r=s.baseLanes|n,e.memoizedState=null):r=n,rt(Fl,er),er|=r;return gn(t,e,i,n),e.child}function zk(t,e){var n=e.ref;(t===null&&n!==null||t!==null&&t.ref!==n)&&(e.flags|=512,e.flags|=2097152)}function uv(t,e,n,r,i){var s=Un(n)?Ya:dn.current;return s=nu(e,s),ic(e,i),n=k1(t,e,n,r,s,i),r=_1(),t!==null&&!Bn?(e.updateQueue=t.updateQueue,e.flags&=-2053,t.lanes&=~i,Cs(t,e,i)):(lt&&r&&p1(e),e.flags|=1,gn(t,e,n,i),e.child)}function e2(t,e,n,r,i){if(Un(n)){var s=!0;Vp(e)}else s=!1;if(ic(e,i),e.stateNode===null)ep(t,e),Uk(e,n,r),lv(e,n,r,i),r=!0;else if(t===null){var o=e.stateNode,a=e.memoizedProps;o.props=a;var l=o.context,c=n.contextType;typeof c=="object"&&c!==null?c=Ir(c):(c=Un(n)?Ya:dn.current,c=nu(e,c));var u=n.getDerivedStateFromProps,d=typeof u=="function"||typeof o.getSnapshotBeforeUpdate=="function";d||typeof o.UNSAFE_componentWillReceiveProps!="function"&&typeof o.componentWillReceiveProps!="function"||(a!==r||l!==c)&&qE(e,o,r,c),qs=!1;var f=e.memoizedState;o.state=f,Yp(e,r,o,i),l=e.memoizedState,a!==r||f!==l||$n.current||qs?(typeof u=="function"&&(av(e,n,u,r),l=e.memoizedState),(a=qs||WE(e,n,a,r,f,l,c))?(d||typeof o.UNSAFE_componentWillMount!="function"&&typeof o.componentWillMount!="function"||(typeof o.componentWillMount=="function"&&o.componentWillMount(),typeof o.UNSAFE_componentWillMount=="function"&&o.UNSAFE_componentWillMount()),typeof o.componentDidMount=="function"&&(e.flags|=4194308)):(typeof o.componentDidMount=="function"&&(e.flags|=4194308),e.memoizedProps=r,e.memoizedState=l),o.props=r,o.state=l,o.context=c,r=a):(typeof o.componentDidMount=="function"&&(e.flags|=4194308),r=!1)}else{o=e.stateNode,vk(t,e),a=e.memoizedProps,c=e.type===e.elementType?a:$r(e.type,a),o.props=c,d=e.pendingProps,f=o.context,l=n.contextType,typeof l=="object"&&l!==null?l=Ir(l):(l=Un(n)?Ya:dn.current,l=nu(e,l));var h=n.getDerivedStateFromProps;(u=typeof h=="function"||typeof o.getSnapshotBeforeUpdate=="function")||typeof o.UNSAFE_componentWillReceiveProps!="function"&&typeof o.componentWillReceiveProps!="function"||(a!==d||f!==l)&&qE(e,o,r,l),qs=!1,f=e.memoizedState,o.state=f,Yp(e,r,o,i);var m=e.memoizedState;a!==d||f!==m||$n.current||qs?(typeof h=="function"&&(av(e,n,h,r),m=e.memoizedState),(c=qs||WE(e,n,c,r,f,m,l)||!1)?(u||typeof o.UNSAFE_componentWillUpdate!="function"&&typeof o.componentWillUpdate!="function"||(typeof o.componentWillUpdate=="function"&&o.componentWillUpdate(r,m,l),typeof o.UNSAFE_componentWillUpdate=="function"&&o.UNSAFE_componentWillUpdate(r,m,l)),typeof o.componentDidUpdate=="function"&&(e.flags|=4),typeof o.getSnapshotBeforeUpdate=="function"&&(e.flags|=1024)):(typeof o.componentDidUpdate!="function"||a===t.memoizedProps&&f===t.memoizedState||(e.flags|=4),typeof o.getSnapshotBeforeUpdate!="function"||a===t.memoizedProps&&f===t.memoizedState||(e.flags|=1024),e.memoizedProps=r,e.memoizedState=m),o.props=r,o.state=m,o.context=l,r=c):(typeof o.componentDidUpdate!="function"||a===t.memoizedProps&&f===t.memoizedState||(e.flags|=4),typeof o.getSnapshotBeforeUpdate!="function"||a===t.memoizedProps&&f===t.memoizedState||(e.flags|=1024),r=!1)}return dv(t,e,n,r,s,i)}function dv(t,e,n,r,i,s){zk(t,e);var o=(e.flags&128)!==0;if(!r&&!o)return i&&UE(e,n,!1),Cs(t,e,s);r=e.stateNode,M8.current=e;var a=o&&typeof n.getDerivedStateFromError!="function"?null:r.render();return e.flags|=1,t!==null&&o?(e.child=iu(e,t.child,null,s),e.child=iu(e,null,a,s)):gn(t,e,a,s),e.memoizedState=r.state,i&&UE(e,n,!0),e.child}function Vk(t){var e=t.stateNode;e.pendingContext?$E(t,e.pendingContext,e.pendingContext!==e.context):e.context&&$E(t,e.context,!1),A1(t,e.containerInfo)}function t2(t,e,n,r,i){return ru(),m1(i),e.flags|=256,gn(t,e,n,r),e.child}var fv={dehydrated:null,treeContext:null,retryLane:0};function hv(t){return{baseLanes:t,cachePool:null,transitions:null}}function Gk(t,e,n){var r=e.pendingProps,i=ut.current,s=!1,o=(e.flags&128)!==0,a;if((a=o)||(a=t!==null&&t.memoizedState===null?!1:(i&2)!==0),a?(s=!0,e.flags&=-129):(t===null||t.memoizedState!==null)&&(i|=1),rt(ut,i&1),t===null)return sv(e),t=e.memoizedState,t!==null&&(t=t.dehydrated,t!==null)?(e.mode&1?t.data==="$!"?e.lanes=8:e.lanes=1073741824:e.lanes=1,null):(o=r.children,t=r.fallback,s?(r=e.mode,s=e.child,o={mode:"hidden",children:o},!(r&1)&&s!==null?(s.childLanes=0,s.pendingProps=o):s=dg(o,r,0,null),t=Ga(t,r,n,null),s.return=e,t.return=e,s.sibling=t,e.child=s,e.child.memoizedState=hv(n),e.memoizedState=fv,t):R1(e,o));if(i=t.memoizedState,i!==null&&(a=i.dehydrated,a!==null))return L8(t,e,o,r,a,i,n);if(s){s=r.fallback,o=e.mode,i=t.child,a=i.sibling;var l={mode:"hidden",children:r.children};return!(o&1)&&e.child!==i?(r=e.child,r.childLanes=0,r.pendingProps=l,e.deletions=null):(r=Lo(i,l),r.subtreeFlags=i.subtreeFlags&14680064),a!==null?s=Lo(a,s):(s=Ga(s,o,n,null),s.flags|=2),s.return=e,r.return=e,r.sibling=s,e.child=r,r=s,s=e.child,o=t.child.memoizedState,o=o===null?hv(n):{baseLanes:o.baseLanes|n,cachePool:null,transitions:o.transitions},s.memoizedState=o,s.childLanes=t.childLanes&~n,e.memoizedState=fv,r}return s=t.child,t=s.sibling,r=Lo(s,{mode:"visible",children:r.children}),!(e.mode&1)&&(r.lanes=n),r.return=e,r.sibling=null,t!==null&&(n=e.deletions,n===null?(e.deletions=[t],e.flags|=16):n.push(t)),e.child=r,e.memoizedState=null,r}function R1(t,e){return e=dg({mode:"visible",children:e},t.mode,0,null),e.return=t,t.child=e}function lh(t,e,n,r){return r!==null&&m1(r),iu(e,t.child,null,n),t=R1(e,e.pendingProps.children),t.flags|=2,e.memoizedState=null,t}function L8(t,e,n,r,i,s,o){if(n)return e.flags&256?(e.flags&=-257,r=pm(Error(ye(422))),lh(t,e,o,r)):e.memoizedState!==null?(e.child=t.child,e.flags|=128,null):(s=r.fallback,i=e.mode,r=dg({mode:"visible",children:r.children},i,0,null),s=Ga(s,i,o,null),s.flags|=2,r.return=e,s.return=e,r.sibling=s,e.child=r,e.mode&1&&iu(e,t.child,null,o),e.child.memoizedState=hv(o),e.memoizedState=fv,s);if(!(e.mode&1))return lh(t,e,o,null);if(i.data==="$!"){if(r=i.nextSibling&&i.nextSibling.dataset,r)var a=r.dgst;return r=a,s=Error(ye(419)),r=pm(s,r,void 0),lh(t,e,o,r)}if(a=(o&t.childLanes)!==0,Bn||a){if(r=$t,r!==null){switch(o&-o){case 4:i=2;break;case 16:i=8;break;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:i=32;break;case 536870912:i=268435456;break;default:i=0}i=i&(r.suspendedLanes|o)?0:i,i!==0&&i!==s.retryLane&&(s.retryLane=i,xs(t,i),ei(r,t,i,-1))}return B1(),r=pm(Error(ye(421))),lh(t,e,o,r)}return i.data==="$?"?(e.flags|=128,e.child=t.child,e=q8.bind(null,t),i._reactRetry=e,null):(t=s.treeContext,rr=Io(i.nextSibling),ir=e,lt=!0,qr=null,t!==null&&(Cr[kr++]=ds,Cr[kr++]=fs,Cr[kr++]=Ja,ds=t.id,fs=t.overflow,Ja=e),e=R1(e,r.children),e.flags|=4096,e)}function n2(t,e,n){t.lanes|=e;var r=t.alternate;r!==null&&(r.lanes|=e),ov(t.return,e,n)}function gm(t,e,n,r,i){var s=t.memoizedState;s===null?t.memoizedState={isBackwards:e,rendering:null,renderingStartTime:0,last:r,tail:n,tailMode:i}:(s.isBackwards=e,s.rendering=null,s.renderingStartTime=0,s.last=r,s.tail=n,s.tailMode=i)}function Wk(t,e,n){var r=e.pendingProps,i=r.revealOrder,s=r.tail;if(gn(t,e,r.children,n),r=ut.current,r&2)r=r&1|2,e.flags|=128;else{if(t!==null&&t.flags&128)e:for(t=e.child;t!==null;){if(t.tag===13)t.memoizedState!==null&&n2(t,n,e);else if(t.tag===19)n2(t,n,e);else if(t.child!==null){t.child.return=t,t=t.child;continue}if(t===e)break e;for(;t.sibling===null;){if(t.return===null||t.return===e)break e;t=t.return}t.sibling.return=t.return,t=t.sibling}r&=1}if(rt(ut,r),!(e.mode&1))e.memoizedState=null;else switch(i){case"forwards":for(n=e.child,i=null;n!==null;)t=n.alternate,t!==null&&Jp(t)===null&&(i=n),n=n.sibling;n=i,n===null?(i=e.child,e.child=null):(i=n.sibling,n.sibling=null),gm(e,!1,i,n,s);break;case"backwards":for(n=null,i=e.child,e.child=null;i!==null;){if(t=i.alternate,t!==null&&Jp(t)===null){e.child=i;break}t=i.sibling,i.sibling=n,n=i,i=t}gm(e,!0,n,null,s);break;case"together":gm(e,!1,null,null,void 0);break;default:e.memoizedState=null}return e.child}function ep(t,e){!(e.mode&1)&&t!==null&&(t.alternate=null,e.alternate=null,e.flags|=2)}function Cs(t,e,n){if(t!==null&&(e.dependencies=t.dependencies),Xa|=e.lanes,!(n&e.childLanes))return null;if(t!==null&&e.child!==t.child)throw Error(ye(153));if(e.child!==null){for(t=e.child,n=Lo(t,t.pendingProps),e.child=n,n.return=e;t.sibling!==null;)t=t.sibling,n=n.sibling=Lo(t,t.pendingProps),n.return=e;n.sibling=null}return e.child}function B8(t,e,n){switch(e.tag){case 3:Vk(e),ru();break;case 5:wk(e);break;case 1:Un(e.type)&&Vp(e);break;case 4:A1(e,e.stateNode.containerInfo);break;case 10:var r=e.type._context,i=e.memoizedProps.value;rt(qp,r._currentValue),r._currentValue=i;break;case 13:if(r=e.memoizedState,r!==null)return r.dehydrated!==null?(rt(ut,ut.current&1),e.flags|=128,null):n&e.child.childLanes?Gk(t,e,n):(rt(ut,ut.current&1),t=Cs(t,e,n),t!==null?t.sibling:null);rt(ut,ut.current&1);break;case 19:if(r=(n&e.childLanes)!==0,t.flags&128){if(r)return Wk(t,e,n);e.flags|=128}if(i=e.memoizedState,i!==null&&(i.rendering=null,i.tail=null,i.lastEffect=null),rt(ut,ut.current),r)break;return null;case 22:case 23:return e.lanes=0,Kk(t,e,n)}return Cs(t,e,n)}var qk,pv,Qk,Yk;qk=function(t,e){for(var n=e.child;n!==null;){if(n.tag===5||n.tag===6)t.appendChild(n.stateNode);else if(n.tag!==4&&n.child!==null){n.child.return=n,n=n.child;continue}if(n===e)break;for(;n.sibling===null;){if(n.return===null||n.return===e)return;n=n.return}n.sibling.return=n.return,n=n.sibling}};pv=function(){};Qk=function(t,e,n,r){var i=t.memoizedProps;if(i!==r){t=e.stateNode,ma(Mi.current);var s=null;switch(n){case"input":i=By(t,i),r=By(t,r),s=[];break;case"select":i=ht({},i,{value:void 0}),r=ht({},r,{value:void 0}),s=[];break;case"textarea":i=Uy(t,i),r=Uy(t,r),s=[];break;default:typeof i.onClick!="function"&&typeof r.onClick=="function"&&(t.onclick=Kp)}jy(n,r);var o;n=null;for(c in i)if(!r.hasOwnProperty(c)&&i.hasOwnProperty(c)&&i[c]!=null)if(c==="style"){var a=i[c];for(o in a)a.hasOwnProperty(o)&&(n||(n={}),n[o]="")}else c!=="dangerouslySetInnerHTML"&&c!=="children"&&c!=="suppressContentEditableWarning"&&c!=="suppressHydrationWarning"&&c!=="autoFocus"&&(kd.hasOwnProperty(c)?s||(s=[]):(s=s||[]).push(c,null));for(c in r){var l=r[c];if(a=i!=null?i[c]:void 0,r.hasOwnProperty(c)&&l!==a&&(l!=null||a!=null))if(c==="style")if(a){for(o in a)!a.hasOwnProperty(o)||l&&l.hasOwnProperty(o)||(n||(n={}),n[o]="");for(o in l)l.hasOwnProperty(o)&&a[o]!==l[o]&&(n||(n={}),n[o]=l[o])}else n||(s||(s=[]),s.push(c,n)),n=l;else c==="dangerouslySetInnerHTML"?(l=l?l.__html:void 0,a=a?a.__html:void 0,l!=null&&a!==l&&(s=s||[]).push(c,l)):c==="children"?typeof l!="string"&&typeof l!="number"||(s=s||[]).push(c,""+l):c!=="suppressContentEditableWarning"&&c!=="suppressHydrationWarning"&&(kd.hasOwnProperty(c)?(l!=null&&c==="onScroll"&&st("scroll",t),s||a===l||(s=[])):(s=s||[]).push(c,l))}n&&(s=s||[]).push("style",n);var c=s;(e.updateQueue=c)&&(e.flags|=4)}};Yk=function(t,e,n,r){n!==r&&(e.flags|=4)};function Bu(t,e){if(!lt)switch(t.tailMode){case"hidden":e=t.tail;for(var n=null;e!==null;)e.alternate!==null&&(n=e),e=e.sibling;n===null?t.tail=null:n.sibling=null;break;case"collapsed":n=t.tail;for(var r=null;n!==null;)n.alternate!==null&&(r=n),n=n.sibling;r===null?e||t.tail===null?t.tail=null:t.tail.sibling=null:r.sibling=null}}function Zt(t){var e=t.alternate!==null&&t.alternate.child===t.child,n=0,r=0;if(e)for(var i=t.child;i!==null;)n|=i.lanes|i.childLanes,r|=i.subtreeFlags&14680064,r|=i.flags&14680064,i.return=t,i=i.sibling;else for(i=t.child;i!==null;)n|=i.lanes|i.childLanes,r|=i.subtreeFlags,r|=i.flags,i.return=t,i=i.sibling;return t.subtreeFlags|=r,t.childLanes=n,e}function D8(t,e,n){var r=e.pendingProps;switch(g1(e),e.tag){case 2:case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return Zt(e),null;case 1:return Un(e.type)&&zp(),Zt(e),null;case 3:return r=e.stateNode,su(),ot($n),ot(dn),x1(),r.pendingContext&&(r.context=r.pendingContext,r.pendingContext=null),(t===null||t.child===null)&&(oh(e)?e.flags|=4:t===null||t.memoizedState.isDehydrated&&!(e.flags&256)||(e.flags|=1024,qr!==null&&(Av(qr),qr=null))),pv(t,e),Zt(e),null;case 5:S1(e);var i=ma($d.current);if(n=e.type,t!==null&&e.stateNode!=null)Qk(t,e,n,r,i),t.ref!==e.ref&&(e.flags|=512,e.flags|=2097152);else{if(!r){if(e.stateNode===null)throw Error(ye(166));return Zt(e),null}if(t=ma(Mi.current),oh(e)){r=e.stateNode,n=e.type;var s=e.memoizedProps;switch(r[Ai]=e,r[Bd]=s,t=(e.mode&1)!==0,n){case"dialog":st("cancel",r),st("close",r);break;case"iframe":case"object":case"embed":st("load",r);break;case"video":case"audio":for(i=0;i<Yu.length;i++)st(Yu[i],r);break;case"source":st("error",r);break;case"img":case"image":case"link":st("error",r),st("load",r);break;case"details":st("toggle",r);break;case"input":dE(r,s),st("invalid",r);break;case"select":r._wrapperState={wasMultiple:!!s.multiple},st("invalid",r);break;case"textarea":hE(r,s),st("invalid",r)}jy(n,s),i=null;for(var o in s)if(s.hasOwnProperty(o)){var a=s[o];o==="children"?typeof a=="string"?r.textContent!==a&&(s.suppressHydrationWarning!==!0&&sh(r.textContent,a,t),i=["children",a]):typeof a=="number"&&r.textContent!==""+a&&(s.suppressHydrationWarning!==!0&&sh(r.textContent,a,t),i=["children",""+a]):kd.hasOwnProperty(o)&&a!=null&&o==="onScroll"&&st("scroll",r)}switch(n){case"input":Jf(r),fE(r,s,!0);break;case"textarea":Jf(r),pE(r);break;case"select":case"option":break;default:typeof s.onClick=="function"&&(r.onclick=Kp)}r=i,e.updateQueue=r,r!==null&&(e.flags|=4)}else{o=i.nodeType===9?i:i.ownerDocument,t==="http://www.w3.org/1999/xhtml"&&(t=xC(n)),t==="http://www.w3.org/1999/xhtml"?n==="script"?(t=o.createElement("div"),t.innerHTML="<script><\/script>",t=t.removeChild(t.firstChild)):typeof r.is=="string"?t=o.createElement(n,{is:r.is}):(t=o.createElement(n),n==="select"&&(o=t,r.multiple?o.multiple=!0:r.size&&(o.size=r.size))):t=o.createElementNS(t,n),t[Ai]=e,t[Bd]=r,qk(t,e,!1,!1),e.stateNode=t;e:{switch(o=Hy(n,r),n){case"dialog":st("cancel",t),st("close",t),i=r;break;case"iframe":case"object":case"embed":st("load",t),i=r;break;case"video":case"audio":for(i=0;i<Yu.length;i++)st(Yu[i],t);i=r;break;case"source":st("error",t),i=r;break;case"img":case"image":case"link":st("error",t),st("load",t),i=r;break;case"details":st("toggle",t),i=r;break;case"input":dE(t,r),i=By(t,r),st("invalid",t);break;case"option":i=r;break;case"select":t._wrapperState={wasMultiple:!!r.multiple},i=ht({},r,{value:void 0}),st("invalid",t);break;case"textarea":hE(t,r),i=Uy(t,r),st("invalid",t);break;default:i=r}jy(n,i),a=i;for(s in a)if(a.hasOwnProperty(s)){var l=a[s];s==="style"?_C(t,l):s==="dangerouslySetInnerHTML"?(l=l?l.__html:void 0,l!=null&&CC(t,l)):s==="children"?typeof l=="string"?(n!=="textarea"||l!=="")&&_d(t,l):typeof l=="number"&&_d(t,""+l):s!=="suppressContentEditableWarning"&&s!=="suppressHydrationWarning"&&s!=="autoFocus"&&(kd.hasOwnProperty(s)?l!=null&&s==="onScroll"&&st("scroll",t):l!=null&&e1(t,s,l,o))}switch(n){case"input":Jf(t),fE(t,r,!1);break;case"textarea":Jf(t),pE(t);break;case"option":r.value!=null&&t.setAttribute("value",""+Fo(r.value));break;case"select":t.multiple=!!r.multiple,s=r.value,s!=null?ec(t,!!r.multiple,s,!1):r.defaultValue!=null&&ec(t,!!r.multiple,r.defaultValue,!0);break;default:typeof i.onClick=="function"&&(t.onclick=Kp)}switch(n){case"button":case"input":case"select":case"textarea":r=!!r.autoFocus;break e;case"img":r=!0;break e;default:r=!1}}r&&(e.flags|=4)}e.ref!==null&&(e.flags|=512,e.flags|=2097152)}return Zt(e),null;case 6:if(t&&e.stateNode!=null)Yk(t,e,t.memoizedProps,r);else{if(typeof r!="string"&&e.stateNode===null)throw Error(ye(166));if(n=ma($d.current),ma(Mi.current),oh(e)){if(r=e.stateNode,n=e.memoizedProps,r[Ai]=e,(s=r.nodeValue!==n)&&(t=ir,t!==null))switch(t.tag){case 3:sh(r.nodeValue,n,(t.mode&1)!==0);break;case 5:t.memoizedProps.suppressHydrationWarning!==!0&&sh(r.nodeValue,n,(t.mode&1)!==0)}s&&(e.flags|=4)}else r=(n.nodeType===9?n:n.ownerDocument).createTextNode(r),r[Ai]=e,e.stateNode=r}return Zt(e),null;case 13:if(ot(ut),r=e.memoizedState,t===null||t.memoizedState!==null&&t.memoizedState.dehydrated!==null){if(lt&&rr!==null&&e.mode&1&&!(e.flags&128))pk(),ru(),e.flags|=98560,s=!1;else if(s=oh(e),r!==null&&r.dehydrated!==null){if(t===null){if(!s)throw Error(ye(318));if(s=e.memoizedState,s=s!==null?s.dehydrated:null,!s)throw Error(ye(317));s[Ai]=e}else ru(),!(e.flags&128)&&(e.memoizedState=null),e.flags|=4;Zt(e),s=!1}else qr!==null&&(Av(qr),qr=null),s=!0;if(!s)return e.flags&65536?e:null}return e.flags&128?(e.lanes=n,e):(r=r!==null,r!==(t!==null&&t.memoizedState!==null)&&r&&(e.child.flags|=8192,e.mode&1&&(t===null||ut.current&1?Tt===0&&(Tt=3):B1())),e.updateQueue!==null&&(e.flags|=4),Zt(e),null);case 4:return su(),pv(t,e),t===null&&Md(e.stateNode.containerInfo),Zt(e),null;case 10:return w1(e.type._context),Zt(e),null;case 17:return Un(e.type)&&zp(),Zt(e),null;case 19:if(ot(ut),s=e.memoizedState,s===null)return Zt(e),null;if(r=(e.flags&128)!==0,o=s.rendering,o===null)if(r)Bu(s,!1);else{if(Tt!==0||t!==null&&t.flags&128)for(t=e.child;t!==null;){if(o=Jp(t),o!==null){for(e.flags|=128,Bu(s,!1),r=o.updateQueue,r!==null&&(e.updateQueue=r,e.flags|=4),e.subtreeFlags=0,r=n,n=e.child;n!==null;)s=n,t=r,s.flags&=14680066,o=s.alternate,o===null?(s.childLanes=0,s.lanes=t,s.child=null,s.subtreeFlags=0,s.memoizedProps=null,s.memoizedState=null,s.updateQueue=null,s.dependencies=null,s.stateNode=null):(s.childLanes=o.childLanes,s.lanes=o.lanes,s.child=o.child,s.subtreeFlags=0,s.deletions=null,s.memoizedProps=o.memoizedProps,s.memoizedState=o.memoizedState,s.updateQueue=o.updateQueue,s.type=o.type,t=o.dependencies,s.dependencies=t===null?null:{lanes:t.lanes,firstContext:t.firstContext}),n=n.sibling;return rt(ut,ut.current&1|2),e.child}t=t.sibling}s.tail!==null&&Et()>au&&(e.flags|=128,r=!0,Bu(s,!1),e.lanes=4194304)}else{if(!r)if(t=Jp(o),t!==null){if(e.flags|=128,r=!0,n=t.updateQueue,n!==null&&(e.updateQueue=n,e.flags|=4),Bu(s,!0),s.tail===null&&s.tailMode==="hidden"&&!o.alternate&&!lt)return Zt(e),null}else 2*Et()-s.renderingStartTime>au&&n!==1073741824&&(e.flags|=128,r=!0,Bu(s,!1),e.lanes=4194304);s.isBackwards?(o.sibling=e.child,e.child=o):(n=s.last,n!==null?n.sibling=o:e.child=o,s.last=o)}return s.tail!==null?(e=s.tail,s.rendering=e,s.tail=e.sibling,s.renderingStartTime=Et(),e.sibling=null,n=ut.current,rt(ut,r?n&1|2:n&1),e):(Zt(e),null);case 22:case 23:return L1(),r=e.memoizedState!==null,t!==null&&t.memoizedState!==null!==r&&(e.flags|=8192),r&&e.mode&1?er&1073741824&&(Zt(e),e.subtreeFlags&6&&(e.flags|=8192)):Zt(e),null;case 24:return null;case 25:return null}throw Error(ye(156,e.tag))}function $8(t,e){switch(g1(e),e.tag){case 1:return Un(e.type)&&zp(),t=e.flags,t&65536?(e.flags=t&-65537|128,e):null;case 3:return su(),ot($n),ot(dn),x1(),t=e.flags,t&65536&&!(t&128)?(e.flags=t&-65537|128,e):null;case 5:return S1(e),null;case 13:if(ot(ut),t=e.memoizedState,t!==null&&t.dehydrated!==null){if(e.alternate===null)throw Error(ye(340));ru()}return t=e.flags,t&65536?(e.flags=t&-65537|128,e):null;case 19:return ot(ut),null;case 4:return su(),null;case 10:return w1(e.type._context),null;case 22:case 23:return L1(),null;case 24:return null;default:return null}}var ch=!1,an=!1,U8=typeof WeakSet=="function"?WeakSet:Set,Ee=null;function Ul(t,e){var n=t.ref;if(n!==null)if(typeof n=="function")try{n(null)}catch(r){mt(t,e,r)}else n.current=null}function gv(t,e,n){try{n()}catch(r){mt(t,e,r)}}var r2=!1;function F8(t,e){if(Zy=Fp,t=tk(),h1(t)){if("selectionStart"in t)var n={start:t.selectionStart,end:t.selectionEnd};else e:{n=(n=t.ownerDocument)&&n.defaultView||window;var r=n.getSelection&&n.getSelection();if(r&&r.rangeCount!==0){n=r.anchorNode;var i=r.anchorOffset,s=r.focusNode;r=r.focusOffset;try{n.nodeType,s.nodeType}catch{n=null;break e}var o=0,a=-1,l=-1,c=0,u=0,d=t,f=null;t:for(;;){for(var h;d!==n||i!==0&&d.nodeType!==3||(a=o+i),d!==s||r!==0&&d.nodeType!==3||(l=o+r),d.nodeType===3&&(o+=d.nodeValue.length),(h=d.firstChild)!==null;)f=d,d=h;for(;;){if(d===t)break t;if(f===n&&++c===i&&(a=o),f===s&&++u===r&&(l=o),(h=d.nextSibling)!==null)break;d=f,f=d.parentNode}d=h}n=a===-1||l===-1?null:{start:a,end:l}}else n=null}n=n||{start:0,end:0}}else n=null;for(Xy={focusedElem:t,selectionRange:n},Fp=!1,Ee=e;Ee!==null;)if(e=Ee,t=e.child,(e.subtreeFlags&1028)!==0&&t!==null)t.return=e,Ee=t;else for(;Ee!==null;){e=Ee;try{var m=e.alternate;if(e.flags&1024)switch(e.tag){case 0:case 11:case 15:break;case 1:if(m!==null){var g=m.memoizedProps,w=m.memoizedState,p=e.stateNode,v=p.getSnapshotBeforeUpdate(e.elementType===e.type?g:$r(e.type,g),w);p.__reactInternalSnapshotBeforeUpdate=v}break;case 3:var y=e.stateNode.containerInfo;y.nodeType===1?y.textContent="":y.nodeType===9&&y.documentElement&&y.removeChild(y.documentElement);break;case 5:case 6:case 4:case 17:break;default:throw Error(ye(163))}}catch(C){mt(e,e.return,C)}if(t=e.sibling,t!==null){t.return=e.return,Ee=t;break}Ee=e.return}return m=r2,r2=!1,m}function hd(t,e,n){var r=e.updateQueue;if(r=r!==null?r.lastEffect:null,r!==null){var i=r=r.next;do{if((i.tag&t)===t){var s=i.destroy;i.destroy=void 0,s!==void 0&&gv(e,n,s)}i=i.next}while(i!==r)}}function cg(t,e){if(e=e.updateQueue,e=e!==null?e.lastEffect:null,e!==null){var n=e=e.next;do{if((n.tag&t)===t){var r=n.create;n.destroy=r()}n=n.next}while(n!==e)}}function mv(t){var e=t.ref;if(e!==null){var n=t.stateNode;switch(t.tag){case 5:t=n;break;default:t=n}typeof e=="function"?e(t):e.current=t}}function Jk(t){var e=t.alternate;e!==null&&(t.alternate=null,Jk(e)),t.child=null,t.deletions=null,t.sibling=null,t.tag===5&&(e=t.stateNode,e!==null&&(delete e[Ai],delete e[Bd],delete e[nv],delete e[A8],delete e[S8])),t.stateNode=null,t.return=null,t.dependencies=null,t.memoizedProps=null,t.memoizedState=null,t.pendingProps=null,t.stateNode=null,t.updateQueue=null}function Zk(t){return t.tag===5||t.tag===3||t.tag===4}function i2(t){e:for(;;){for(;t.sibling===null;){if(t.return===null||Zk(t.return))return null;t=t.return}for(t.sibling.return=t.return,t=t.sibling;t.tag!==5&&t.tag!==6&&t.tag!==18;){if(t.flags&2||t.child===null||t.tag===4)continue e;t.child.return=t,t=t.child}if(!(t.flags&2))return t.stateNode}}function yv(t,e,n){var r=t.tag;if(r===5||r===6)t=t.stateNode,e?n.nodeType===8?n.parentNode.insertBefore(t,e):n.insertBefore(t,e):(n.nodeType===8?(e=n.parentNode,e.insertBefore(t,n)):(e=n,e.appendChild(t)),n=n._reactRootContainer,n!=null||e.onclick!==null||(e.onclick=Kp));else if(r!==4&&(t=t.child,t!==null))for(yv(t,e,n),t=t.sibling;t!==null;)yv(t,e,n),t=t.sibling}function vv(t,e,n){var r=t.tag;if(r===5||r===6)t=t.stateNode,e?n.insertBefore(t,e):n.appendChild(t);else if(r!==4&&(t=t.child,t!==null))for(vv(t,e,n),t=t.sibling;t!==null;)vv(t,e,n),t=t.sibling}var Ht=null,Gr=!1;function Os(t,e,n){for(n=n.child;n!==null;)Xk(t,e,n),n=n.sibling}function Xk(t,e,n){if(Ni&&typeof Ni.onCommitFiberUnmount=="function")try{Ni.onCommitFiberUnmount(tg,n)}catch{}switch(n.tag){case 5:an||Ul(n,e);case 6:var r=Ht,i=Gr;Ht=null,Os(t,e,n),Ht=r,Gr=i,Ht!==null&&(Gr?(t=Ht,n=n.stateNode,t.nodeType===8?t.parentNode.removeChild(n):t.removeChild(n)):Ht.removeChild(n.stateNode));break;case 18:Ht!==null&&(Gr?(t=Ht,n=n.stateNode,t.nodeType===8?lm(t.parentNode,n):t.nodeType===1&&lm(t,n),Id(t)):lm(Ht,n.stateNode));break;case 4:r=Ht,i=Gr,Ht=n.stateNode.containerInfo,Gr=!0,Os(t,e,n),Ht=r,Gr=i;break;case 0:case 11:case 14:case 15:if(!an&&(r=n.updateQueue,r!==null&&(r=r.lastEffect,r!==null))){i=r=r.next;do{var s=i,o=s.destroy;s=s.tag,o!==void 0&&(s&2||s&4)&&gv(n,e,o),i=i.next}while(i!==r)}Os(t,e,n);break;case 1:if(!an&&(Ul(n,e),r=n.stateNode,typeof r.componentWillUnmount=="function"))try{r.props=n.memoizedProps,r.state=n.memoizedState,r.componentWillUnmount()}catch(a){mt(n,e,a)}Os(t,e,n);break;case 21:Os(t,e,n);break;case 22:n.mode&1?(an=(r=an)||n.memoizedState!==null,Os(t,e,n),an=r):Os(t,e,n);break;default:Os(t,e,n)}}function s2(t){var e=t.updateQueue;if(e!==null){t.updateQueue=null;var n=t.stateNode;n===null&&(n=t.stateNode=new U8),e.forEach(function(r){var i=Q8.bind(null,t,r);n.has(r)||(n.add(r),r.then(i,i))})}}function Nr(t,e){var n=e.deletions;if(n!==null)for(var r=0;r<n.length;r++){var i=n[r];try{var s=t,o=e,a=o;e:for(;a!==null;){switch(a.tag){case 5:Ht=a.stateNode,Gr=!1;break e;case 3:Ht=a.stateNode.containerInfo,Gr=!0;break e;case 4:Ht=a.stateNode.containerInfo,Gr=!0;break e}a=a.return}if(Ht===null)throw Error(ye(160));Xk(s,o,i),Ht=null,Gr=!1;var l=i.alternate;l!==null&&(l.return=null),i.return=null}catch(c){mt(i,e,c)}}if(e.subtreeFlags&12854)for(e=e.child;e!==null;)e_(e,t),e=e.sibling}function e_(t,e){var n=t.alternate,r=t.flags;switch(t.tag){case 0:case 11:case 14:case 15:if(Nr(e,t),oi(t),r&4){try{hd(3,t,t.return),cg(3,t)}catch(g){mt(t,t.return,g)}try{hd(5,t,t.return)}catch(g){mt(t,t.return,g)}}break;case 1:Nr(e,t),oi(t),r&512&&n!==null&&Ul(n,n.return);break;case 5:if(Nr(e,t),oi(t),r&512&&n!==null&&Ul(n,n.return),t.flags&32){var i=t.stateNode;try{_d(i,"")}catch(g){mt(t,t.return,g)}}if(r&4&&(i=t.stateNode,i!=null)){var s=t.memoizedProps,o=n!==null?n.memoizedProps:s,a=t.type,l=t.updateQueue;if(t.updateQueue=null,l!==null)try{a==="input"&&s.type==="radio"&&s.name!=null&&AC(i,s),Hy(a,o);var c=Hy(a,s);for(o=0;o<l.length;o+=2){var u=l[o],d=l[o+1];u==="style"?_C(i,d):u==="dangerouslySetInnerHTML"?CC(i,d):u==="children"?_d(i,d):e1(i,u,d,c)}switch(a){case"input":Dy(i,s);break;case"textarea":SC(i,s);break;case"select":var f=i._wrapperState.wasMultiple;i._wrapperState.wasMultiple=!!s.multiple;var h=s.value;h!=null?ec(i,!!s.multiple,h,!1):f!==!!s.multiple&&(s.defaultValue!=null?ec(i,!!s.multiple,s.defaultValue,!0):ec(i,!!s.multiple,s.multiple?[]:"",!1))}i[Bd]=s}catch(g){mt(t,t.return,g)}}break;case 6:if(Nr(e,t),oi(t),r&4){if(t.stateNode===null)throw Error(ye(162));i=t.stateNode,s=t.memoizedProps;try{i.nodeValue=s}catch(g){mt(t,t.return,g)}}break;case 3:if(Nr(e,t),oi(t),r&4&&n!==null&&n.memoizedState.isDehydrated)try{Id(e.containerInfo)}catch(g){mt(t,t.return,g)}break;case 4:Nr(e,t),oi(t);break;case 13:Nr(e,t),oi(t),i=t.child,i.flags&8192&&(s=i.memoizedState!==null,i.stateNode.isHidden=s,!s||i.alternate!==null&&i.alternate.memoizedState!==null||(N1=Et())),r&4&&s2(t);break;case 22:if(u=n!==null&&n.memoizedState!==null,t.mode&1?(an=(c=an)||u,Nr(e,t),an=c):Nr(e,t),oi(t),r&8192){if(c=t.memoizedState!==null,(t.stateNode.isHidden=c)&&!u&&t.mode&1)for(Ee=t,u=t.child;u!==null;){for(d=Ee=u;Ee!==null;){switch(f=Ee,h=f.child,f.tag){case 0:case 11:case 14:case 15:hd(4,f,f.return);break;case 1:Ul(f,f.return);var m=f.stateNode;if(typeof m.componentWillUnmount=="function"){r=f,n=f.return;try{e=r,m.props=e.memoizedProps,m.state=e.memoizedState,m.componentWillUnmount()}catch(g){mt(r,n,g)}}break;case 5:Ul(f,f.return);break;case 22:if(f.memoizedState!==null){a2(d);continue}}h!==null?(h.return=f,Ee=h):a2(d)}u=u.sibling}e:for(u=null,d=t;;){if(d.tag===5){if(u===null){u=d;try{i=d.stateNode,c?(s=i.style,typeof s.setProperty=="function"?s.setProperty("display","none","important"):s.display="none"):(a=d.stateNode,l=d.memoizedProps.style,o=l!=null&&l.hasOwnProperty("display")?l.display:null,a.style.display=kC("display",o))}catch(g){mt(t,t.return,g)}}}else if(d.tag===6){if(u===null)try{d.stateNode.nodeValue=c?"":d.memoizedProps}catch(g){mt(t,t.return,g)}}else if((d.tag!==22&&d.tag!==23||d.memoizedState===null||d===t)&&d.child!==null){d.child.return=d,d=d.child;continue}if(d===t)break e;for(;d.sibling===null;){if(d.return===null||d.return===t)break e;u===d&&(u=null),d=d.return}u===d&&(u=null),d.sibling.return=d.return,d=d.sibling}}break;case 19:Nr(e,t),oi(t),r&4&&s2(t);break;case 21:break;default:Nr(e,t),oi(t)}}function oi(t){var e=t.flags;if(e&2){try{e:{for(var n=t.return;n!==null;){if(Zk(n)){var r=n;break e}n=n.return}throw Error(ye(160))}switch(r.tag){case 5:var i=r.stateNode;r.flags&32&&(_d(i,""),r.flags&=-33);var s=i2(t);vv(t,s,i);break;case 3:case 4:var o=r.stateNode.containerInfo,a=i2(t);yv(t,a,o);break;default:throw Error(ye(161))}}catch(l){mt(t,t.return,l)}t.flags&=-3}e&4096&&(t.flags&=-4097)}function j8(t,e,n){Ee=t,t_(t)}function t_(t,e,n){for(var r=(t.mode&1)!==0;Ee!==null;){var i=Ee,s=i.child;if(i.tag===22&&r){var o=i.memoizedState!==null||ch;if(!o){var a=i.alternate,l=a!==null&&a.memoizedState!==null||an;a=ch;var c=an;if(ch=o,(an=l)&&!c)for(Ee=i;Ee!==null;)o=Ee,l=o.child,o.tag===22&&o.memoizedState!==null?l2(i):l!==null?(l.return=o,Ee=l):l2(i);for(;s!==null;)Ee=s,t_(s),s=s.sibling;Ee=i,ch=a,an=c}o2(t)}else i.subtreeFlags&8772&&s!==null?(s.return=i,Ee=s):o2(t)}}function o2(t){for(;Ee!==null;){var e=Ee;if(e.flags&8772){var n=e.alternate;try{if(e.flags&8772)switch(e.tag){case 0:case 11:case 15:an||cg(5,e);break;case 1:var r=e.stateNode;if(e.flags&4&&!an)if(n===null)r.componentDidMount();else{var i=e.elementType===e.type?n.memoizedProps:$r(e.type,n.memoizedProps);r.componentDidUpdate(i,n.memoizedState,r.__reactInternalSnapshotBeforeUpdate)}var s=e.updateQueue;s!==null&&zE(e,s,r);break;case 3:var o=e.updateQueue;if(o!==null){if(n=null,e.child!==null)switch(e.child.tag){case 5:n=e.child.stateNode;break;case 1:n=e.child.stateNode}zE(e,o,n)}break;case 5:var a=e.stateNode;if(n===null&&e.flags&4){n=a;var l=e.memoizedProps;switch(e.type){case"button":case"input":case"select":case"textarea":l.autoFocus&&n.focus();break;case"img":l.src&&(n.src=l.src)}}break;case 6:break;case 4:break;case 12:break;case 13:if(e.memoizedState===null){var c=e.alternate;if(c!==null){var u=c.memoizedState;if(u!==null){var d=u.dehydrated;d!==null&&Id(d)}}}break;case 19:case 17:case 21:case 22:case 23:case 25:break;default:throw Error(ye(163))}an||e.flags&512&&mv(e)}catch(f){mt(e,e.return,f)}}if(e===t){Ee=null;break}if(n=e.sibling,n!==null){n.return=e.return,Ee=n;break}Ee=e.return}}function a2(t){for(;Ee!==null;){var e=Ee;if(e===t){Ee=null;break}var n=e.sibling;if(n!==null){n.return=e.return,Ee=n;break}Ee=e.return}}function l2(t){for(;Ee!==null;){var e=Ee;try{switch(e.tag){case 0:case 11:case 15:var n=e.return;try{cg(4,e)}catch(l){mt(e,n,l)}break;case 1:var r=e.stateNode;if(typeof r.componentDidMount=="function"){var i=e.return;try{r.componentDidMount()}catch(l){mt(e,i,l)}}var s=e.return;try{mv(e)}catch(l){mt(e,s,l)}break;case 5:var o=e.return;try{mv(e)}catch(l){mt(e,o,l)}}}catch(l){mt(e,e.return,l)}if(e===t){Ee=null;break}var a=e.sibling;if(a!==null){a.return=e.return,Ee=a;break}Ee=e.return}}var H8=Math.ceil,e0=Ps.ReactCurrentDispatcher,I1=Ps.ReactCurrentOwner,Rr=Ps.ReactCurrentBatchConfig,ze=0,$t=null,xt=null,Wt=0,er=0,Fl=Yo(0),Tt=0,Hd=null,Xa=0,ug=0,O1=0,pd=null,Mn=null,N1=0,au=1/0,zi=null,t0=!1,wv=null,No=null,uh=!1,Co=null,n0=0,gd=0,bv=null,tp=-1,np=0;function xn(){return ze&6?Et():tp!==-1?tp:tp=Et()}function Mo(t){return t.mode&1?ze&2&&Wt!==0?Wt&-Wt:C8.transition!==null?(np===0&&(np=UC()),np):(t=Xe,t!==0||(t=window.event,t=t===void 0?16:GC(t.type)),t):1}function ei(t,e,n,r){if(50<gd)throw gd=0,bv=null,Error(ye(185));Pf(t,n,r),(!(ze&2)||t!==$t)&&(t===$t&&(!(ze&2)&&(ug|=n),Tt===4&&no(t,Wt)),Fn(t,r),n===1&&ze===0&&!(e.mode&1)&&(au=Et()+500,og&&Jo()))}function Fn(t,e){var n=t.callbackNode;CO(t,e);var r=Up(t,t===$t?Wt:0);if(r===0)n!==null&&yE(n),t.callbackNode=null,t.callbackPriority=0;else if(e=r&-r,t.callbackPriority!==e){if(n!=null&&yE(n),e===1)t.tag===0?x8(c2.bind(null,t)):dk(c2.bind(null,t)),b8(function(){!(ze&6)&&Jo()}),n=null;else{switch(FC(r)){case 1:n=s1;break;case 4:n=DC;break;case 16:n=$p;break;case 536870912:n=$C;break;default:n=$p}n=c_(n,n_.bind(null,t))}t.callbackPriority=e,t.callbackNode=n}}function n_(t,e){if(tp=-1,np=0,ze&6)throw Error(ye(327));var n=t.callbackNode;if(sc()&&t.callbackNode!==n)return null;var r=Up(t,t===$t?Wt:0);if(r===0)return null;if(r&30||r&t.expiredLanes||e)e=r0(t,r);else{e=r;var i=ze;ze|=2;var s=i_();($t!==t||Wt!==e)&&(zi=null,au=Et()+500,Va(t,e));do try{V8();break}catch(a){r_(t,a)}while(!0);v1(),e0.current=s,ze=i,xt!==null?e=0:($t=null,Wt=0,e=Tt)}if(e!==0){if(e===2&&(i=Wy(t),i!==0&&(r=i,e=Ev(t,i))),e===1)throw n=Hd,Va(t,0),no(t,r),Fn(t,Et()),n;if(e===6)no(t,r);else{if(i=t.current.alternate,!(r&30)&&!K8(i)&&(e=r0(t,r),e===2&&(s=Wy(t),s!==0&&(r=s,e=Ev(t,s))),e===1))throw n=Hd,Va(t,0),no(t,r),Fn(t,Et()),n;switch(t.finishedWork=i,t.finishedLanes=r,e){case 0:case 1:throw Error(ye(345));case 2:ia(t,Mn,zi);break;case 3:if(no(t,r),(r&130023424)===r&&(e=N1+500-Et(),10<e)){if(Up(t,0)!==0)break;if(i=t.suspendedLanes,(i&r)!==r){xn(),t.pingedLanes|=t.suspendedLanes&i;break}t.timeoutHandle=tv(ia.bind(null,t,Mn,zi),e);break}ia(t,Mn,zi);break;case 4:if(no(t,r),(r&4194240)===r)break;for(e=t.eventTimes,i=-1;0<r;){var o=31-Xr(r);s=1<<o,o=e[o],o>i&&(i=o),r&=~s}if(r=i,r=Et()-r,r=(120>r?120:480>r?480:1080>r?1080:1920>r?1920:3e3>r?3e3:4320>r?4320:1960*H8(r/1960))-r,10<r){t.timeoutHandle=tv(ia.bind(null,t,Mn,zi),r);break}ia(t,Mn,zi);break;case 5:ia(t,Mn,zi);break;default:throw Error(ye(329))}}}return Fn(t,Et()),t.callbackNode===n?n_.bind(null,t):null}function Ev(t,e){var n=pd;return t.current.memoizedState.isDehydrated&&(Va(t,e).flags|=256),t=r0(t,e),t!==2&&(e=Mn,Mn=n,e!==null&&Av(e)),t}function Av(t){Mn===null?Mn=t:Mn.push.apply(Mn,t)}function K8(t){for(var e=t;;){if(e.flags&16384){var n=e.updateQueue;if(n!==null&&(n=n.stores,n!==null))for(var r=0;r<n.length;r++){var i=n[r],s=i.getSnapshot;i=i.value;try{if(!ni(s(),i))return!1}catch{return!1}}}if(n=e.child,e.subtreeFlags&16384&&n!==null)n.return=e,e=n;else{if(e===t)break;for(;e.sibling===null;){if(e.return===null||e.return===t)return!0;e=e.return}e.sibling.return=e.return,e=e.sibling}}return!0}function no(t,e){for(e&=~O1,e&=~ug,t.suspendedLanes|=e,t.pingedLanes&=~e,t=t.expirationTimes;0<e;){var n=31-Xr(e),r=1<<n;t[n]=-1,e&=~r}}function c2(t){if(ze&6)throw Error(ye(327));sc();var e=Up(t,0);if(!(e&1))return Fn(t,Et()),null;var n=r0(t,e);if(t.tag!==0&&n===2){var r=Wy(t);r!==0&&(e=r,n=Ev(t,r))}if(n===1)throw n=Hd,Va(t,0),no(t,e),Fn(t,Et()),n;if(n===6)throw Error(ye(345));return t.finishedWork=t.current.alternate,t.finishedLanes=e,ia(t,Mn,zi),Fn(t,Et()),null}function M1(t,e){var n=ze;ze|=1;try{return t(e)}finally{ze=n,ze===0&&(au=Et()+500,og&&Jo())}}function el(t){Co!==null&&Co.tag===0&&!(ze&6)&&sc();var e=ze;ze|=1;var n=Rr.transition,r=Xe;try{if(Rr.transition=null,Xe=1,t)return t()}finally{Xe=r,Rr.transition=n,ze=e,!(ze&6)&&Jo()}}function L1(){er=Fl.current,ot(Fl)}function Va(t,e){t.finishedWork=null,t.finishedLanes=0;var n=t.timeoutHandle;if(n!==-1&&(t.timeoutHandle=-1,w8(n)),xt!==null)for(n=xt.return;n!==null;){var r=n;switch(g1(r),r.tag){case 1:r=r.type.childContextTypes,r!=null&&zp();break;case 3:su(),ot($n),ot(dn),x1();break;case 5:S1(r);break;case 4:su();break;case 13:ot(ut);break;case 19:ot(ut);break;case 10:w1(r.type._context);break;case 22:case 23:L1()}n=n.return}if($t=t,xt=t=Lo(t.current,null),Wt=er=e,Tt=0,Hd=null,O1=ug=Xa=0,Mn=pd=null,ga!==null){for(e=0;e<ga.length;e++)if(n=ga[e],r=n.interleaved,r!==null){n.interleaved=null;var i=r.next,s=n.pending;if(s!==null){var o=s.next;s.next=i,r.next=o}n.pending=r}ga=null}return t}function r_(t,e){do{var n=xt;try{if(v1(),Zh.current=Xp,Zp){for(var r=ft.memoizedState;r!==null;){var i=r.queue;i!==null&&(i.pending=null),r=r.next}Zp=!1}if(Za=0,Mt=_t=ft=null,fd=!1,Ud=0,I1.current=null,n===null||n.return===null){Tt=1,Hd=e,xt=null;break}e:{var s=t,o=n.return,a=n,l=e;if(e=Wt,a.flags|=32768,l!==null&&typeof l=="object"&&typeof l.then=="function"){var c=l,u=a,d=u.tag;if(!(u.mode&1)&&(d===0||d===11||d===15)){var f=u.alternate;f?(u.updateQueue=f.updateQueue,u.memoizedState=f.memoizedState,u.lanes=f.lanes):(u.updateQueue=null,u.memoizedState=null)}var h=YE(o);if(h!==null){h.flags&=-257,JE(h,o,a,s,e),h.mode&1&&QE(s,c,e),e=h,l=c;var m=e.updateQueue;if(m===null){var g=new Set;g.add(l),e.updateQueue=g}else m.add(l);break e}else{if(!(e&1)){QE(s,c,e),B1();break e}l=Error(ye(426))}}else if(lt&&a.mode&1){var w=YE(o);if(w!==null){!(w.flags&65536)&&(w.flags|=256),JE(w,o,a,s,e),m1(ou(l,a));break e}}s=l=ou(l,a),Tt!==4&&(Tt=2),pd===null?pd=[s]:pd.push(s),s=o;do{switch(s.tag){case 3:s.flags|=65536,e&=-e,s.lanes|=e;var p=Fk(s,l,e);KE(s,p);break e;case 1:a=l;var v=s.type,y=s.stateNode;if(!(s.flags&128)&&(typeof v.getDerivedStateFromError=="function"||y!==null&&typeof y.componentDidCatch=="function"&&(No===null||!No.has(y)))){s.flags|=65536,e&=-e,s.lanes|=e;var C=jk(s,a,e);KE(s,C);break e}}s=s.return}while(s!==null)}o_(n)}catch(P){e=P,xt===n&&n!==null&&(xt=n=n.return);continue}break}while(!0)}function i_(){var t=e0.current;return e0.current=Xp,t===null?Xp:t}function B1(){(Tt===0||Tt===3||Tt===2)&&(Tt=4),$t===null||!(Xa&268435455)&&!(ug&268435455)||no($t,Wt)}function r0(t,e){var n=ze;ze|=2;var r=i_();($t!==t||Wt!==e)&&(zi=null,Va(t,e));do try{z8();break}catch(i){r_(t,i)}while(!0);if(v1(),ze=n,e0.current=r,xt!==null)throw Error(ye(261));return $t=null,Wt=0,Tt}function z8(){for(;xt!==null;)s_(xt)}function V8(){for(;xt!==null&&!mO();)s_(xt)}function s_(t){var e=l_(t.alternate,t,er);t.memoizedProps=t.pendingProps,e===null?o_(t):xt=e,I1.current=null}function o_(t){var e=t;do{var n=e.alternate;if(t=e.return,e.flags&32768){if(n=$8(n,e),n!==null){n.flags&=32767,xt=n;return}if(t!==null)t.flags|=32768,t.subtreeFlags=0,t.deletions=null;else{Tt=6,xt=null;return}}else if(n=D8(n,e,er),n!==null){xt=n;return}if(e=e.sibling,e!==null){xt=e;return}xt=e=t}while(e!==null);Tt===0&&(Tt=5)}function ia(t,e,n){var r=Xe,i=Rr.transition;try{Rr.transition=null,Xe=1,G8(t,e,n,r)}finally{Rr.transition=i,Xe=r}return null}function G8(t,e,n,r){do sc();while(Co!==null);if(ze&6)throw Error(ye(327));n=t.finishedWork;var i=t.finishedLanes;if(n===null)return null;if(t.finishedWork=null,t.finishedLanes=0,n===t.current)throw Error(ye(177));t.callbackNode=null,t.callbackPriority=0;var s=n.lanes|n.childLanes;if(kO(t,s),t===$t&&(xt=$t=null,Wt=0),!(n.subtreeFlags&2064)&&!(n.flags&2064)||uh||(uh=!0,c_($p,function(){return sc(),null})),s=(n.flags&15990)!==0,n.subtreeFlags&15990||s){s=Rr.transition,Rr.transition=null;var o=Xe;Xe=1;var a=ze;ze|=4,I1.current=null,F8(t,n),e_(n,t),f8(Xy),Fp=!!Zy,Xy=Zy=null,t.current=n,j8(n),yO(),ze=a,Xe=o,Rr.transition=s}else t.current=n;if(uh&&(uh=!1,Co=t,n0=i),s=t.pendingLanes,s===0&&(No=null),bO(n.stateNode),Fn(t,Et()),e!==null)for(r=t.onRecoverableError,n=0;n<e.length;n++)i=e[n],r(i.value,{componentStack:i.stack,digest:i.digest});if(t0)throw t0=!1,t=wv,wv=null,t;return n0&1&&t.tag!==0&&sc(),s=t.pendingLanes,s&1?t===bv?gd++:(gd=0,bv=t):gd=0,Jo(),null}function sc(){if(Co!==null){var t=FC(n0),e=Rr.transition,n=Xe;try{if(Rr.transition=null,Xe=16>t?16:t,Co===null)var r=!1;else{if(t=Co,Co=null,n0=0,ze&6)throw Error(ye(331));var i=ze;for(ze|=4,Ee=t.current;Ee!==null;){var s=Ee,o=s.child;if(Ee.flags&16){var a=s.deletions;if(a!==null){for(var l=0;l<a.length;l++){var c=a[l];for(Ee=c;Ee!==null;){var u=Ee;switch(u.tag){case 0:case 11:case 15:hd(8,u,s)}var d=u.child;if(d!==null)d.return=u,Ee=d;else for(;Ee!==null;){u=Ee;var f=u.sibling,h=u.return;if(Jk(u),u===c){Ee=null;break}if(f!==null){f.return=h,Ee=f;break}Ee=h}}}var m=s.alternate;if(m!==null){var g=m.child;if(g!==null){m.child=null;do{var w=g.sibling;g.sibling=null,g=w}while(g!==null)}}Ee=s}}if(s.subtreeFlags&2064&&o!==null)o.return=s,Ee=o;else e:for(;Ee!==null;){if(s=Ee,s.flags&2048)switch(s.tag){case 0:case 11:case 15:hd(9,s,s.return)}var p=s.sibling;if(p!==null){p.return=s.return,Ee=p;break e}Ee=s.return}}var v=t.current;for(Ee=v;Ee!==null;){o=Ee;var y=o.child;if(o.subtreeFlags&2064&&y!==null)y.return=o,Ee=y;else e:for(o=v;Ee!==null;){if(a=Ee,a.flags&2048)try{switch(a.tag){case 0:case 11:case 15:cg(9,a)}}catch(P){mt(a,a.return,P)}if(a===o){Ee=null;break e}var C=a.sibling;if(C!==null){C.return=a.return,Ee=C;break e}Ee=a.return}}if(ze=i,Jo(),Ni&&typeof Ni.onPostCommitFiberRoot=="function")try{Ni.onPostCommitFiberRoot(tg,t)}catch{}r=!0}return r}finally{Xe=n,Rr.transition=e}}return!1}function u2(t,e,n){e=ou(n,e),e=Fk(t,e,1),t=Oo(t,e,1),e=xn(),t!==null&&(Pf(t,1,e),Fn(t,e))}function mt(t,e,n){if(t.tag===3)u2(t,t,n);else for(;e!==null;){if(e.tag===3){u2(e,t,n);break}else if(e.tag===1){var r=e.stateNode;if(typeof e.type.getDerivedStateFromError=="function"||typeof r.componentDidCatch=="function"&&(No===null||!No.has(r))){t=ou(n,t),t=jk(e,t,1),e=Oo(e,t,1),t=xn(),e!==null&&(Pf(e,1,t),Fn(e,t));break}}e=e.return}}function W8(t,e,n){var r=t.pingCache;r!==null&&r.delete(e),e=xn(),t.pingedLanes|=t.suspendedLanes&n,$t===t&&(Wt&n)===n&&(Tt===4||Tt===3&&(Wt&130023424)===Wt&&500>Et()-N1?Va(t,0):O1|=n),Fn(t,e)}function a_(t,e){e===0&&(t.mode&1?(e=eh,eh<<=1,!(eh&130023424)&&(eh=4194304)):e=1);var n=xn();t=xs(t,e),t!==null&&(Pf(t,e,n),Fn(t,n))}function q8(t){var e=t.memoizedState,n=0;e!==null&&(n=e.retryLane),a_(t,n)}function Q8(t,e){var n=0;switch(t.tag){case 13:var r=t.stateNode,i=t.memoizedState;i!==null&&(n=i.retryLane);break;case 19:r=t.stateNode;break;default:throw Error(ye(314))}r!==null&&r.delete(e),a_(t,n)}var l_;l_=function(t,e,n){if(t!==null)if(t.memoizedProps!==e.pendingProps||$n.current)Bn=!0;else{if(!(t.lanes&n)&&!(e.flags&128))return Bn=!1,B8(t,e,n);Bn=!!(t.flags&131072)}else Bn=!1,lt&&e.flags&1048576&&fk(e,Wp,e.index);switch(e.lanes=0,e.tag){case 2:var r=e.type;ep(t,e),t=e.pendingProps;var i=nu(e,dn.current);ic(e,n),i=k1(null,e,r,t,i,n);var s=_1();return e.flags|=1,typeof i=="object"&&i!==null&&typeof i.render=="function"&&i.$$typeof===void 0?(e.tag=1,e.memoizedState=null,e.updateQueue=null,Un(r)?(s=!0,Vp(e)):s=!1,e.memoizedState=i.state!==null&&i.state!==void 0?i.state:null,E1(e),i.updater=lg,e.stateNode=i,i._reactInternals=e,lv(e,r,t,n),e=dv(null,e,r,!0,s,n)):(e.tag=0,lt&&s&&p1(e),gn(null,e,i,n),e=e.child),e;case 16:r=e.elementType;e:{switch(ep(t,e),t=e.pendingProps,i=r._init,r=i(r._payload),e.type=r,i=e.tag=J8(r),t=$r(r,t),i){case 0:e=uv(null,e,r,t,n);break e;case 1:e=e2(null,e,r,t,n);break e;case 11:e=ZE(null,e,r,t,n);break e;case 14:e=XE(null,e,r,$r(r.type,t),n);break e}throw Error(ye(306,r,""))}return e;case 0:return r=e.type,i=e.pendingProps,i=e.elementType===r?i:$r(r,i),uv(t,e,r,i,n);case 1:return r=e.type,i=e.pendingProps,i=e.elementType===r?i:$r(r,i),e2(t,e,r,i,n);case 3:e:{if(Vk(e),t===null)throw Error(ye(387));r=e.pendingProps,s=e.memoizedState,i=s.element,vk(t,e),Yp(e,r,null,n);var o=e.memoizedState;if(r=o.element,s.isDehydrated)if(s={element:r,isDehydrated:!1,cache:o.cache,pendingSuspenseBoundaries:o.pendingSuspenseBoundaries,transitions:o.transitions},e.updateQueue.baseState=s,e.memoizedState=s,e.flags&256){i=ou(Error(ye(423)),e),e=t2(t,e,r,n,i);break e}else if(r!==i){i=ou(Error(ye(424)),e),e=t2(t,e,r,n,i);break e}else for(rr=Io(e.stateNode.containerInfo.firstChild),ir=e,lt=!0,qr=null,n=mk(e,null,r,n),e.child=n;n;)n.flags=n.flags&-3|4096,n=n.sibling;else{if(ru(),r===i){e=Cs(t,e,n);break e}gn(t,e,r,n)}e=e.child}return e;case 5:return wk(e),t===null&&sv(e),r=e.type,i=e.pendingProps,s=t!==null?t.memoizedProps:null,o=i.children,ev(r,i)?o=null:s!==null&&ev(r,s)&&(e.flags|=32),zk(t,e),gn(t,e,o,n),e.child;case 6:return t===null&&sv(e),null;case 13:return Gk(t,e,n);case 4:return A1(e,e.stateNode.containerInfo),r=e.pendingProps,t===null?e.child=iu(e,null,r,n):gn(t,e,r,n),e.child;case 11:return r=e.type,i=e.pendingProps,i=e.elementType===r?i:$r(r,i),ZE(t,e,r,i,n);case 7:return gn(t,e,e.pendingProps,n),e.child;case 8:return gn(t,e,e.pendingProps.children,n),e.child;case 12:return gn(t,e,e.pendingProps.children,n),e.child;case 10:e:{if(r=e.type._context,i=e.pendingProps,s=e.memoizedProps,o=i.value,rt(qp,r._currentValue),r._currentValue=o,s!==null)if(ni(s.value,o)){if(s.children===i.children&&!$n.current){e=Cs(t,e,n);break e}}else for(s=e.child,s!==null&&(s.return=e);s!==null;){var a=s.dependencies;if(a!==null){o=s.child;for(var l=a.firstContext;l!==null;){if(l.context===r){if(s.tag===1){l=vs(-1,n&-n),l.tag=2;var c=s.updateQueue;if(c!==null){c=c.shared;var u=c.pending;u===null?l.next=l:(l.next=u.next,u.next=l),c.pending=l}}s.lanes|=n,l=s.alternate,l!==null&&(l.lanes|=n),ov(s.return,n,e),a.lanes|=n;break}l=l.next}}else if(s.tag===10)o=s.type===e.type?null:s.child;else if(s.tag===18){if(o=s.return,o===null)throw Error(ye(341));o.lanes|=n,a=o.alternate,a!==null&&(a.lanes|=n),ov(o,n,e),o=s.sibling}else o=s.child;if(o!==null)o.return=s;else for(o=s;o!==null;){if(o===e){o=null;break}if(s=o.sibling,s!==null){s.return=o.return,o=s;break}o=o.return}s=o}gn(t,e,i.children,n),e=e.child}return e;case 9:return i=e.type,r=e.pendingProps.children,ic(e,n),i=Ir(i),r=r(i),e.flags|=1,gn(t,e,r,n),e.child;case 14:return r=e.type,i=$r(r,e.pendingProps),i=$r(r.type,i),XE(t,e,r,i,n);case 15:return Hk(t,e,e.type,e.pendingProps,n);case 17:return r=e.type,i=e.pendingProps,i=e.elementType===r?i:$r(r,i),ep(t,e),e.tag=1,Un(r)?(t=!0,Vp(e)):t=!1,ic(e,n),Uk(e,r,i),lv(e,r,i,n),dv(null,e,r,!0,t,n);case 19:return Wk(t,e,n);case 22:return Kk(t,e,n)}throw Error(ye(156,e.tag))};function c_(t,e){return BC(t,e)}function Y8(t,e,n,r){this.tag=t,this.key=n,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.ref=null,this.pendingProps=e,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=r,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function Tr(t,e,n,r){return new Y8(t,e,n,r)}function D1(t){return t=t.prototype,!(!t||!t.isReactComponent)}function J8(t){if(typeof t=="function")return D1(t)?1:0;if(t!=null){if(t=t.$$typeof,t===n1)return 11;if(t===r1)return 14}return 2}function Lo(t,e){var n=t.alternate;return n===null?(n=Tr(t.tag,e,t.key,t.mode),n.elementType=t.elementType,n.type=t.type,n.stateNode=t.stateNode,n.alternate=t,t.alternate=n):(n.pendingProps=e,n.type=t.type,n.flags=0,n.subtreeFlags=0,n.deletions=null),n.flags=t.flags&14680064,n.childLanes=t.childLanes,n.lanes=t.lanes,n.child=t.child,n.memoizedProps=t.memoizedProps,n.memoizedState=t.memoizedState,n.updateQueue=t.updateQueue,e=t.dependencies,n.dependencies=e===null?null:{lanes:e.lanes,firstContext:e.firstContext},n.sibling=t.sibling,n.index=t.index,n.ref=t.ref,n}function rp(t,e,n,r,i,s){var o=2;if(r=t,typeof t=="function")D1(t)&&(o=1);else if(typeof t=="string")o=5;else e:switch(t){case Rl:return Ga(n.children,i,s,e);case t1:o=8,i|=8;break;case Oy:return t=Tr(12,n,e,i|2),t.elementType=Oy,t.lanes=s,t;case Ny:return t=Tr(13,n,e,i),t.elementType=Ny,t.lanes=s,t;case My:return t=Tr(19,n,e,i),t.elementType=My,t.lanes=s,t;case wC:return dg(n,i,s,e);default:if(typeof t=="object"&&t!==null)switch(t.$$typeof){case yC:o=10;break e;case vC:o=9;break e;case n1:o=11;break e;case r1:o=14;break e;case Ws:o=16,r=null;break e}throw Error(ye(130,t==null?t:typeof t,""))}return e=Tr(o,n,e,i),e.elementType=t,e.type=r,e.lanes=s,e}function Ga(t,e,n,r){return t=Tr(7,t,r,e),t.lanes=n,t}function dg(t,e,n,r){return t=Tr(22,t,r,e),t.elementType=wC,t.lanes=n,t.stateNode={isHidden:!1},t}function mm(t,e,n){return t=Tr(6,t,null,e),t.lanes=n,t}function ym(t,e,n){return e=Tr(4,t.children!==null?t.children:[],t.key,e),e.lanes=n,e.stateNode={containerInfo:t.containerInfo,pendingChildren:null,implementation:t.implementation},e}function Z8(t,e,n,r,i){this.tag=e,this.containerInfo=t,this.finishedWork=this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.pendingContext=this.context=null,this.callbackPriority=0,this.eventTimes=Jg(0),this.expirationTimes=Jg(-1),this.entangledLanes=this.finishedLanes=this.mutableReadLanes=this.expiredLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=Jg(0),this.identifierPrefix=r,this.onRecoverableError=i,this.mutableSourceEagerHydrationData=null}function $1(t,e,n,r,i,s,o,a,l){return t=new Z8(t,e,n,a,l),e===1?(e=1,s===!0&&(e|=8)):e=0,s=Tr(3,null,null,e),t.current=s,s.stateNode=t,s.memoizedState={element:r,isDehydrated:n,cache:null,transitions:null,pendingSuspenseBoundaries:null},E1(s),t}function X8(t,e,n){var r=3<arguments.length&&arguments[3]!==void 0?arguments[3]:null;return{$$typeof:Pl,key:r==null?null:""+r,children:t,containerInfo:e,implementation:n}}function u_(t){if(!t)return jo;t=t._reactInternals;e:{if(cl(t)!==t||t.tag!==1)throw Error(ye(170));var e=t;do{switch(e.tag){case 3:e=e.stateNode.context;break e;case 1:if(Un(e.type)){e=e.stateNode.__reactInternalMemoizedMergedChildContext;break e}}e=e.return}while(e!==null);throw Error(ye(171))}if(t.tag===1){var n=t.type;if(Un(n))return uk(t,n,e)}return e}function d_(t,e,n,r,i,s,o,a,l){return t=$1(n,r,!0,t,i,s,o,a,l),t.context=u_(null),n=t.current,r=xn(),i=Mo(n),s=vs(r,i),s.callback=e??null,Oo(n,s,i),t.current.lanes=i,Pf(t,i,r),Fn(t,r),t}function fg(t,e,n,r){var i=e.current,s=xn(),o=Mo(i);return n=u_(n),e.context===null?e.context=n:e.pendingContext=n,e=vs(s,o),e.payload={element:t},r=r===void 0?null:r,r!==null&&(e.callback=r),t=Oo(i,e,o),t!==null&&(ei(t,i,o,s),Jh(t,i,o)),o}function i0(t){if(t=t.current,!t.child)return null;switch(t.child.tag){case 5:return t.child.stateNode;default:return t.child.stateNode}}function d2(t,e){if(t=t.memoizedState,t!==null&&t.dehydrated!==null){var n=t.retryLane;t.retryLane=n!==0&&n<e?n:e}}function U1(t,e){d2(t,e),(t=t.alternate)&&d2(t,e)}function eN(){return null}var f_=typeof reportError=="function"?reportError:function(t){console.error(t)};function F1(t){this._internalRoot=t}hg.prototype.render=F1.prototype.render=function(t){var e=this._internalRoot;if(e===null)throw Error(ye(409));fg(t,e,null,null)};hg.prototype.unmount=F1.prototype.unmount=function(){var t=this._internalRoot;if(t!==null){this._internalRoot=null;var e=t.containerInfo;el(function(){fg(null,t,null,null)}),e[Ss]=null}};function hg(t){this._internalRoot=t}hg.prototype.unstable_scheduleHydration=function(t){if(t){var e=KC();t={blockedOn:null,target:t,priority:e};for(var n=0;n<to.length&&e!==0&&e<to[n].priority;n++);to.splice(n,0,t),n===0&&VC(t)}};function j1(t){return!(!t||t.nodeType!==1&&t.nodeType!==9&&t.nodeType!==11)}function pg(t){return!(!t||t.nodeType!==1&&t.nodeType!==9&&t.nodeType!==11&&(t.nodeType!==8||t.nodeValue!==" react-mount-point-unstable "))}function f2(){}function tN(t,e,n,r,i){if(i){if(typeof r=="function"){var s=r;r=function(){var c=i0(o);s.call(c)}}var o=d_(e,r,t,0,null,!1,!1,"",f2);return t._reactRootContainer=o,t[Ss]=o.current,Md(t.nodeType===8?t.parentNode:t),el(),o}for(;i=t.lastChild;)t.removeChild(i);if(typeof r=="function"){var a=r;r=function(){var c=i0(l);a.call(c)}}var l=$1(t,0,!1,null,null,!1,!1,"",f2);return t._reactRootContainer=l,t[Ss]=l.current,Md(t.nodeType===8?t.parentNode:t),el(function(){fg(e,l,n,r)}),l}function gg(t,e,n,r,i){var s=n._reactRootContainer;if(s){var o=s;if(typeof i=="function"){var a=i;i=function(){var l=i0(o);a.call(l)}}fg(e,o,t,i)}else o=tN(n,e,t,i,r);return i0(o)}jC=function(t){switch(t.tag){case 3:var e=t.stateNode;if(e.current.memoizedState.isDehydrated){var n=Qu(e.pendingLanes);n!==0&&(o1(e,n|1),Fn(e,Et()),!(ze&6)&&(au=Et()+500,Jo()))}break;case 13:el(function(){var r=xs(t,1);if(r!==null){var i=xn();ei(r,t,1,i)}}),U1(t,1)}};a1=function(t){if(t.tag===13){var e=xs(t,134217728);if(e!==null){var n=xn();ei(e,t,134217728,n)}U1(t,134217728)}};HC=function(t){if(t.tag===13){var e=Mo(t),n=xs(t,e);if(n!==null){var r=xn();ei(n,t,e,r)}U1(t,e)}};KC=function(){return Xe};zC=function(t,e){var n=Xe;try{return Xe=t,e()}finally{Xe=n}};zy=function(t,e,n){switch(e){case"input":if(Dy(t,n),e=n.name,n.type==="radio"&&e!=null){for(n=t;n.parentNode;)n=n.parentNode;for(n=n.querySelectorAll("input[name="+JSON.stringify(""+e)+'][type="radio"]'),e=0;e<n.length;e++){var r=n[e];if(r!==t&&r.form===t.form){var i=sg(r);if(!i)throw Error(ye(90));EC(r),Dy(r,i)}}}break;case"textarea":SC(t,n);break;case"select":e=n.value,e!=null&&ec(t,!!n.multiple,e,!1)}};RC=M1;IC=el;var nN={usingClientEntryPoint:!1,Events:[If,Ml,sg,TC,PC,M1]},Du={findFiberByHostInstance:pa,bundleType:0,version:"18.3.1",rendererPackageName:"react-dom"},rN={bundleType:Du.bundleType,version:Du.version,rendererPackageName:Du.rendererPackageName,rendererConfig:Du.rendererConfig,overrideHookState:null,overrideHookStateDeletePath:null,overrideHookStateRenamePath:null,overrideProps:null,overridePropsDeletePath:null,overridePropsRenamePath:null,setErrorHandler:null,setSuspenseHandler:null,scheduleUpdate:null,currentDispatcherRef:Ps.ReactCurrentDispatcher,findHostInstanceByFiber:function(t){return t=MC(t),t===null?null:t.stateNode},findFiberByHostInstance:Du.findFiberByHostInstance||eN,findHostInstancesForRefresh:null,scheduleRefresh:null,scheduleRoot:null,setRefreshHandler:null,getCurrentFiber:null,reconcilerVersion:"18.3.1-next-f1338f8080-20240426"};if(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__<"u"){var dh=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!dh.isDisabled&&dh.supportsFiber)try{tg=dh.inject(rN),Ni=dh}catch{}}or.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=nN;or.createPortal=function(t,e){var n=2<arguments.length&&arguments[2]!==void 0?arguments[2]:null;if(!j1(e))throw Error(ye(200));return X8(t,e,null,n)};or.createRoot=function(t,e){if(!j1(t))throw Error(ye(299));var n=!1,r="",i=f_;return e!=null&&(e.unstable_strictMode===!0&&(n=!0),e.identifierPrefix!==void 0&&(r=e.identifierPrefix),e.onRecoverableError!==void 0&&(i=e.onRecoverableError)),e=$1(t,1,!1,null,null,n,!1,r,i),t[Ss]=e.current,Md(t.nodeType===8?t.parentNode:t),new F1(e)};or.findDOMNode=function(t){if(t==null)return null;if(t.nodeType===1)return t;var e=t._reactInternals;if(e===void 0)throw typeof t.render=="function"?Error(ye(188)):(t=Object.keys(t).join(","),Error(ye(268,t)));return t=MC(e),t=t===null?null:t.stateNode,t};or.flushSync=function(t){return el(t)};or.hydrate=function(t,e,n){if(!pg(e))throw Error(ye(200));return gg(null,t,e,!0,n)};or.hydrateRoot=function(t,e,n){if(!j1(t))throw Error(ye(405));var r=n!=null&&n.hydratedSources||null,i=!1,s="",o=f_;if(n!=null&&(n.unstable_strictMode===!0&&(i=!0),n.identifierPrefix!==void 0&&(s=n.identifierPrefix),n.onRecoverableError!==void 0&&(o=n.onRecoverableError)),e=d_(e,null,t,1,n??null,i,!1,s,o),t[Ss]=e.current,Md(t),r)for(t=0;t<r.length;t++)n=r[t],i=n._getVersion,i=i(n._source),e.mutableSourceEagerHydrationData==null?e.mutableSourceEagerHydrationData=[n,i]:e.mutableSourceEagerHydrationData.push(n,i);return new hg(e)};or.render=function(t,e,n){if(!pg(e))throw Error(ye(200));return gg(null,t,e,!1,n)};or.unmountComponentAtNode=function(t){if(!pg(t))throw Error(ye(40));return t._reactRootContainer?(el(function(){gg(null,null,t,!1,function(){t._reactRootContainer=null,t[Ss]=null})}),!0):!1};or.unstable_batchedUpdates=M1;or.unstable_renderSubtreeIntoContainer=function(t,e,n,r){if(!pg(n))throw Error(ye(200));if(t==null||t._reactInternals===void 0)throw Error(ye(38));return gg(t,e,n,!1,r)};or.version="18.3.1-next-f1338f8080-20240426";function h_(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(h_)}catch(t){console.error(t)}}h_(),hC.exports=or;var iN=hC.exports,h2=iN;Ry.createRoot=h2.createRoot,Ry.hydrateRoot=h2.hydrateRoot;const sN="6.15.0";function oN(t,e,n){const r=e.split("|").map(s=>s.trim());for(let s=0;s<r.length;s++)switch(e){case"any":return;case"bigint":case"boolean":case"number":case"string":if(typeof t===e)return}const i=new Error(`invalid value for type ${e}`);throw i.code="INVALID_ARGUMENT",i.argument=`value.${n}`,i.value=t,i}async function mn(t){const e=Object.keys(t);return(await Promise.all(e.map(r=>Promise.resolve(t[r])))).reduce((r,i,s)=>(r[e[s]]=i,r),{})}function _e(t,e,n){for(let r in e){let i=e[r];const s=n?n[r]:null;s&&oN(i,s,r),Object.defineProperty(t,r,{enumerable:!0,value:i,writable:!1})}}function jl(t,e){if(t==null)return"null";if(e==null&&(e=new Set),typeof t=="object"){if(e.has(t))return"[Circular]";e.add(t)}if(Array.isArray(t))return"[ "+t.map(n=>jl(n,e)).join(", ")+" ]";if(t instanceof Uint8Array){const n="0123456789abcdef";let r="0x";for(let i=0;i<t.length;i++)r+=n[t[i]>>4],r+=n[t[i]&15];return r}if(typeof t=="object"&&typeof t.toJSON=="function")return jl(t.toJSON(),e);switch(typeof t){case"boolean":case"number":case"symbol":return t.toString();case"bigint":return BigInt(t).toString();case"string":return JSON.stringify(t);case"object":{const n=Object.keys(t);return n.sort(),"{ "+n.map(r=>`${jl(r,e)}: ${jl(t[r],e)}`).join(", ")+" }"}}return"[ COULD NOT SERIALIZE ]"}function Vt(t,e){return t&&t.code===e}function H1(t){return Vt(t,"CALL_EXCEPTION")}function at(t,e,n){let r=t;{const s=[];if(n){if("message"in n||"code"in n||"name"in n)throw new Error(`value will overwrite populated values: ${jl(n)}`);for(const o in n){if(o==="shortMessage")continue;const a=n[o];s.push(o+"="+jl(a))}}s.push(`code=${e}`),s.push(`version=${sN}`),s.length&&(t+=" ("+s.join(", ")+")")}let i;switch(e){case"INVALID_ARGUMENT":i=new TypeError(t);break;case"NUMERIC_FAULT":case"BUFFER_OVERRUN":i=new RangeError(t);break;default:i=new Error(t)}return _e(i,{code:e}),n&&Object.assign(i,n),i.shortMessage==null&&_e(i,{shortMessage:r}),i}function de(t,e,n,r){if(!t)throw at(e,n,r)}function G(t,e,n,r){de(t,e,"INVALID_ARGUMENT",{argument:n,value:r})}function p_(t,e,n){n==null&&(n=""),n&&(n=": "+n),de(t>=e,"missing argument"+n,"MISSING_ARGUMENT",{count:t,expectedCount:e}),de(t<=e,"too many arguments"+n,"UNEXPECTED_ARGUMENT",{count:t,expectedCount:e})}["NFD","NFC","NFKD","NFKC"].reduce((t,e)=>{try{if("test".normalize(e)!=="test")throw new Error("bad");if(e==="NFD"&&"".normalize("NFD")!=="e")throw new Error("broken");t.push(e)}catch{}return t},[]);function Nf(t,e,n){if(n==null&&(n=""),t!==e){let r=n,i="new";n&&(r+=".",i+=" "+n),de(!1,`private constructor; use ${r}from* methods`,"UNSUPPORTED_OPERATION",{operation:i})}}function g_(t,e,n){if(t instanceof Uint8Array)return n?new Uint8Array(t):t;if(typeof t=="string"&&t.match(/^0x(?:[0-9a-f][0-9a-f])*$/i)){const r=new Uint8Array((t.length-2)/2);let i=2;for(let s=0;s<r.length;s++)r[s]=parseInt(t.substring(i,i+2),16),i+=2;return r}G(!1,"invalid BytesLike value",e||"value",t)}function Be(t,e){return g_(t,e,!1)}function wn(t,e){return g_(t,e,!0)}function it(t,e){return!(typeof t!="string"||!t.match(/^0x[0-9A-Fa-f]*$/)||typeof e=="number"&&t.length!==2+2*e||e===!0&&t.length%2!==0)}function K1(t){return it(t,!0)||t instanceof Uint8Array}const p2="0123456789abcdef";function ve(t){const e=Be(t);let n="0x";for(let r=0;r<e.length;r++){const i=e[r];n+=p2[(i&240)>>4]+p2[i&15]}return n}function vt(t){return"0x"+t.map(e=>ve(e).substring(2)).join("")}function oc(t){return it(t,!0)?(t.length-2)/2:Be(t).length}function gt(t,e,n){const r=Be(t);return n!=null&&n>r.length&&de(!1,"cannot slice beyond data bounds","BUFFER_OVERRUN",{buffer:r,length:r.length,offset:n}),ve(r.slice(e??0,n??r.length))}function m_(t,e,n){const r=Be(t);de(e>=r.length,"padding exceeds data length","BUFFER_OVERRUN",{buffer:new Uint8Array(r),length:e,offset:e+1});const i=new Uint8Array(e);return i.fill(0),n?i.set(r,e-r.length):i.set(r,0),ve(i)}function ks(t,e){return m_(t,e,!0)}function aN(t,e){return m_(t,e,!1)}const mg=BigInt(0),Jr=BigInt(1),Hl=9007199254740991;function s0(t,e){const n=yg(t,"value"),r=BigInt(Oe(e,"width"));if(de(n>>r===mg,"overflow","NUMERIC_FAULT",{operation:"fromTwos",fault:"overflow",value:t}),n>>r-Jr){const i=(Jr<<r)-Jr;return-((~n&i)+Jr)}return n}function y_(t,e){let n=Ae(t,"value");const r=BigInt(Oe(e,"width")),i=Jr<<r-Jr;if(n<mg){n=-n,de(n<=i,"too low","NUMERIC_FAULT",{operation:"toTwos",fault:"overflow",value:t});const s=(Jr<<r)-Jr;return(~n&s)+Jr}else de(n<i,"too high","NUMERIC_FAULT",{operation:"toTwos",fault:"overflow",value:t});return n}function ya(t,e){const n=yg(t,"value"),r=BigInt(Oe(e,"bits"));return n&(Jr<<r)-Jr}function Ae(t,e){switch(typeof t){case"bigint":return t;case"number":return G(Number.isInteger(t),"underflow",e||"value",t),G(t>=-Hl&&t<=Hl,"overflow",e||"value",t),BigInt(t);case"string":try{if(t==="")throw new Error("empty string");return t[0]==="-"&&t[1]!=="-"?-BigInt(t.substring(1)):BigInt(t)}catch(n){G(!1,`invalid BigNumberish string: ${n.message}`,e||"value",t)}}G(!1,"invalid BigNumberish value",e||"value",t)}function yg(t,e){const n=Ae(t,e);return de(n>=mg,"unsigned value cannot be negative","NUMERIC_FAULT",{fault:"overflow",operation:"getUint",value:t}),n}const g2="0123456789abcdef";function vg(t){if(t instanceof Uint8Array){let e="0x0";for(const n of t)e+=g2[n>>4],e+=g2[n&15];return BigInt(e)}return Ae(t)}function Oe(t,e){switch(typeof t){case"bigint":return G(t>=-Hl&&t<=Hl,"overflow",e||"value",t),Number(t);case"number":return G(Number.isInteger(t),"underflow",e||"value",t),G(t>=-Hl&&t<=Hl,"overflow",e||"value",t),t;case"string":try{if(t==="")throw new Error("empty string");return Oe(BigInt(t),e)}catch(n){G(!1,`invalid numeric string: ${n.message}`,e||"value",t)}}G(!1,"invalid numeric value",e||"value",t)}function lN(t){return Oe(vg(t))}function Ho(t,e){let r=yg(t,"value").toString(16);if(e==null)r.length%2&&(r="0"+r);else{const i=Oe(e,"width");for(de(i*2>=r.length,`value exceeds width (${i} bytes)`,"NUMERIC_FAULT",{operation:"toBeHex",fault:"overflow",value:t});r.length<i*2;)r="0"+r}return"0x"+r}function Pt(t){const e=yg(t,"value");if(e===mg)return new Uint8Array([]);let n=e.toString(16);n.length%2&&(n="0"+n);const r=new Uint8Array(n.length/2);for(let i=0;i<r.length;i++){const s=i*2;r[i]=parseInt(n.substring(s,s+2),16)}return r}function Qr(t){let e=ve(K1(t)?t:Pt(t)).substring(2);for(;e.startsWith("0");)e=e.substring(1);return e===""&&(e="0"),"0x"+e}const m2="123456789ABCDEFGHJKLMNPQRSTUVWXYZabcdefghijkmnopqrstuvwxyz";BigInt(0);const y2=BigInt(58);function cN(t){const e=Be(t);let n=vg(e),r="";for(;n;)r=m2[Number(n%y2)]+r,n/=y2;for(let i=0;i<e.length&&!e[i];i++)r=m2[0]+r;return r}function uN(t){t=atob(t);const e=new Uint8Array(t.length);for(let n=0;n<t.length;n++)e[n]=t.charCodeAt(n);return Be(e)}function dN(t){const e=Be(t);let n="";for(let r=0;r<e.length;r++)n+=String.fromCharCode(e[r]);return btoa(n)}var gc;class v_{constructor(e,n,r){Y(this,"filter");Y(this,"emitter");ee(this,gc);H(this,gc,n),_e(this,{emitter:e,filter:r})}async removeListener(){_(this,gc)!=null&&await this.emitter.off(this.filter,_(this,gc))}}gc=new WeakMap;function fN(t,e,n,r,i){G(!1,`invalid codepoint at offset ${e}; ${t}`,"bytes",n)}function w_(t,e,n,r,i){if(t==="BAD_PREFIX"||t==="UNEXPECTED_CONTINUE"){let s=0;for(let o=e+1;o<n.length&&n[o]>>6===2;o++)s++;return s}return t==="OVERRUN"?n.length-e-1:0}function hN(t,e,n,r,i){return t==="OVERLONG"?(G(typeof i=="number","invalid bad code point for replacement","badCodepoint",i),r.push(i),0):(r.push(65533),w_(t,e,n))}const pN=Object.freeze({error:fN,ignore:w_,replace:hN});function gN(t,e){e==null&&(e=pN.error);const n=Be(t,"bytes"),r=[];let i=0;for(;i<n.length;){const s=n[i++];if(!(s>>7)){r.push(s);continue}let o=null,a=null;if((s&224)===192)o=1,a=127;else if((s&240)===224)o=2,a=2047;else if((s&248)===240)o=3,a=65535;else{(s&192)===128?i+=e("UNEXPECTED_CONTINUE",i-1,n,r):i+=e("BAD_PREFIX",i-1,n,r);continue}if(i-1+o>=n.length){i+=e("OVERRUN",i-1,n,r);continue}let l=s&(1<<8-o-1)-1;for(let c=0;c<o;c++){let u=n[i];if((u&192)!=128){i+=e("MISSING_CONTINUE",i,n,r),l=null;break}l=l<<6|u&63,i++}if(l!==null){if(l>1114111){i+=e("OUT_OF_RANGE",i-1-o,n,r,l);continue}if(l>=55296&&l<=57343){i+=e("UTF16_SURROGATE",i-1-o,n,r,l);continue}if(l<=a){i+=e("OVERLONG",i-1-o,n,r,l);continue}r.push(l)}}return r}function ws(t,e){G(typeof t=="string","invalid string value","str",t);let n=[];for(let r=0;r<t.length;r++){const i=t.charCodeAt(r);if(i<128)n.push(i);else if(i<2048)n.push(i>>6|192),n.push(i&63|128);else if((i&64512)==55296){r++;const s=t.charCodeAt(r);G(r<t.length&&(s&64512)===56320,"invalid surrogate pair","str",t);const o=65536+((i&1023)<<10)+(s&1023);n.push(o>>18|240),n.push(o>>12&63|128),n.push(o>>6&63|128),n.push(o&63|128)}else n.push(i>>12|224),n.push(i>>6&63|128),n.push(i&63|128)}return new Uint8Array(n)}function mN(t){return t.map(e=>e<=65535?String.fromCharCode(e):(e-=65536,String.fromCharCode((e>>10&1023)+55296,(e&1023)+56320))).join("")}function o0(t,e){return mN(gN(t,e))}function b_(t){async function e(n,r){de(r==null||!r.cancelled,"request cancelled before sending","CANCELLED");const i=n.url.split(":")[0].toLowerCase();de(i==="http"||i==="https",`unsupported protocol ${i}`,"UNSUPPORTED_OPERATION",{info:{protocol:i},operation:"request"}),de(i==="https"||!n.credentials||n.allowInsecureAuthentication,"insecure authorized connections unsupported","UNSUPPORTED_OPERATION",{operation:"request"});let s=null;const o=new AbortController,a=setTimeout(()=>{s=at("request timeout","TIMEOUT"),o.abort()},n.timeout);r&&r.addListener(()=>{s=at("request cancelled","CANCELLED"),o.abort()});const l=Object.assign({},t,{method:n.method,headers:new Headers(Array.from(n)),body:n.body||void 0,signal:o.signal});let c;try{c=await fetch(n.url,l)}catch(h){throw clearTimeout(a),s||h}clearTimeout(a);const u={};c.headers.forEach((h,m)=>{u[m.toLowerCase()]=h});const d=await c.arrayBuffer(),f=d==null?null:new Uint8Array(d);return{statusCode:c.status,statusMessage:c.statusText,headers:u,body:f}}return e}const yN=12,vN=250;let v2=b_();const wN=new RegExp("^data:([^;:]*)?(;base64)?,(.*)$","i"),bN=new RegExp("^ipfs://(ipfs/)?(.*)$","i");let vm=!1;async function E_(t,e){try{const n=t.match(wN);if(!n)throw new Error("invalid data");return new Bo(200,"OK",{"content-type":n[1]||"text/plain"},n[2]?uN(n[3]):AN(n[3]))}catch{return new Bo(599,"BAD REQUEST (invalid data: URI)",{},null,new Ko(t))}}function A_(t){async function e(n,r){try{const i=n.match(bN);if(!i)throw new Error("invalid link");return new Ko(`${t}${i[2]}`)}catch{return new Bo(599,"BAD REQUEST (invalid IPFS URI)",{},null,new Ko(n))}}return e}const fh={data:E_,ipfs:A_("https://gateway.ipfs.io/ipfs/")},S_=new WeakMap;var Ca,oo;class EN{constructor(e){ee(this,Ca);ee(this,oo);H(this,Ca,[]),H(this,oo,!1),S_.set(e,()=>{if(!_(this,oo)){H(this,oo,!0);for(const n of _(this,Ca))setTimeout(()=>{n()},0);H(this,Ca,[])}})}addListener(e){de(!_(this,oo),"singal already cancelled","UNSUPPORTED_OPERATION",{operation:"fetchCancelSignal.addCancelListener"}),_(this,Ca).push(e)}get cancelled(){return _(this,oo)}checkSignal(){de(!this.cancelled,"cancelled","CANCELLED",{})}}Ca=new WeakMap,oo=new WeakMap;function hh(t){if(t==null)throw new Error("missing signal; should not happen");return t.checkSignal(),t}var mc,yc,Fr,Xi,vc,wc,Ot,Qn,es,ka,_a,Ta,hi,jr,ao,Pa,Ju;const G0=class G0{constructor(e){ee(this,Pa);ee(this,mc);ee(this,yc);ee(this,Fr);ee(this,Xi);ee(this,vc);ee(this,wc);ee(this,Ot);ee(this,Qn);ee(this,es);ee(this,ka);ee(this,_a);ee(this,Ta);ee(this,hi);ee(this,jr);ee(this,ao);H(this,wc,String(e)),H(this,mc,!1),H(this,yc,!0),H(this,Fr,{}),H(this,Xi,""),H(this,vc,3e5),H(this,jr,{slotInterval:vN,maxAttempts:yN}),H(this,ao,null)}get url(){return _(this,wc)}set url(e){H(this,wc,String(e))}get body(){return _(this,Ot)==null?null:new Uint8Array(_(this,Ot))}set body(e){if(e==null)H(this,Ot,void 0),H(this,Qn,void 0);else if(typeof e=="string")H(this,Ot,ws(e)),H(this,Qn,"text/plain");else if(e instanceof Uint8Array)H(this,Ot,e),H(this,Qn,"application/octet-stream");else if(typeof e=="object")H(this,Ot,ws(JSON.stringify(e))),H(this,Qn,"application/json");else throw new Error("invalid body")}hasBody(){return _(this,Ot)!=null}get method(){return _(this,Xi)?_(this,Xi):this.hasBody()?"POST":"GET"}set method(e){e==null&&(e=""),H(this,Xi,String(e).toUpperCase())}get headers(){const e=Object.assign({},_(this,Fr));return _(this,es)&&(e.authorization=`Basic ${dN(ws(_(this,es)))}`),this.allowGzip&&(e["accept-encoding"]="gzip"),e["content-type"]==null&&_(this,Qn)&&(e["content-type"]=_(this,Qn)),this.body&&(e["content-length"]=String(this.body.length)),e}getHeader(e){return this.headers[e.toLowerCase()]}setHeader(e,n){_(this,Fr)[String(e).toLowerCase()]=String(n)}clearHeaders(){H(this,Fr,{})}[Symbol.iterator](){const e=this.headers,n=Object.keys(e);let r=0;return{next:()=>{if(r<n.length){const i=n[r++];return{value:[i,e[i]],done:!1}}return{value:void 0,done:!0}}}}get credentials(){return _(this,es)||null}setCredentials(e,n){G(!e.match(/:/),"invalid basic authentication username","username","[REDACTED]"),H(this,es,`${e}:${n}`)}get allowGzip(){return _(this,yc)}set allowGzip(e){H(this,yc,!!e)}get allowInsecureAuthentication(){return!!_(this,mc)}set allowInsecureAuthentication(e){H(this,mc,!!e)}get timeout(){return _(this,vc)}set timeout(e){G(e>=0,"timeout must be non-zero","timeout",e),H(this,vc,e)}get preflightFunc(){return _(this,ka)||null}set preflightFunc(e){H(this,ka,e)}get processFunc(){return _(this,_a)||null}set processFunc(e){H(this,_a,e)}get retryFunc(){return _(this,Ta)||null}set retryFunc(e){H(this,Ta,e)}get getUrlFunc(){return _(this,ao)||v2}set getUrlFunc(e){H(this,ao,e)}toString(){return`<FetchRequest method=${JSON.stringify(this.method)} url=${JSON.stringify(this.url)} headers=${JSON.stringify(this.headers)} body=${_(this,Ot)?ve(_(this,Ot)):"null"}>`}setThrottleParams(e){e.slotInterval!=null&&(_(this,jr).slotInterval=e.slotInterval),e.maxAttempts!=null&&(_(this,jr).maxAttempts=e.maxAttempts)}send(){return de(_(this,hi)==null,"request already sent","UNSUPPORTED_OPERATION",{operation:"fetchRequest.send"}),H(this,hi,new EN(this)),ge(this,Pa,Ju).call(this,0,w2()+this.timeout,0,this,new Bo(0,"",{},null,this))}cancel(){de(_(this,hi)!=null,"request has not been sent","UNSUPPORTED_OPERATION",{operation:"fetchRequest.cancel"});const e=S_.get(this);if(!e)throw new Error("missing signal; should not happen");e()}redirect(e){const n=this.url.split(":")[0].toLowerCase(),r=e.split(":")[0].toLowerCase();de(this.method==="GET"&&(n!=="https"||r!=="http")&&e.match(/^https?:/),"unsupported redirect","UNSUPPORTED_OPERATION",{operation:`redirect(${this.method} ${JSON.stringify(this.url)} => ${JSON.stringify(e)})`});const i=new G0(e);return i.method="GET",i.allowGzip=this.allowGzip,i.timeout=this.timeout,H(i,Fr,Object.assign({},_(this,Fr))),_(this,Ot)&&H(i,Ot,new Uint8Array(_(this,Ot))),H(i,Qn,_(this,Qn)),i}clone(){const e=new G0(this.url);return H(e,Xi,_(this,Xi)),_(this,Ot)&&H(e,Ot,_(this,Ot)),H(e,Qn,_(this,Qn)),H(e,Fr,Object.assign({},_(this,Fr))),H(e,es,_(this,es)),this.allowGzip&&(e.allowGzip=!0),e.timeout=this.timeout,this.allowInsecureAuthentication&&(e.allowInsecureAuthentication=!0),H(e,ka,_(this,ka)),H(e,_a,_(this,_a)),H(e,Ta,_(this,Ta)),H(e,jr,Object.assign({},_(this,jr))),H(e,ao,_(this,ao)),e}static lockConfig(){vm=!0}static getGateway(e){return fh[e.toLowerCase()]||null}static registerGateway(e,n){if(e=e.toLowerCase(),e==="http"||e==="https")throw new Error(`cannot intercept ${e}; use registerGetUrl`);if(vm)throw new Error("gateways locked");fh[e]=n}static registerGetUrl(e){if(vm)throw new Error("gateways locked");v2=e}static createGetUrlFunc(e){return b_(e)}static createDataGateway(){return E_}static createIpfsGatewayFunc(e){return A_(e)}};mc=new WeakMap,yc=new WeakMap,Fr=new WeakMap,Xi=new WeakMap,vc=new WeakMap,wc=new WeakMap,Ot=new WeakMap,Qn=new WeakMap,es=new WeakMap,ka=new WeakMap,_a=new WeakMap,Ta=new WeakMap,hi=new WeakMap,jr=new WeakMap,ao=new WeakMap,Pa=new WeakSet,Ju=async function(e,n,r,i,s){var u,d,f;if(e>=_(this,jr).maxAttempts)return s.makeServerError("exceeded maximum retry limit");de(w2()<=n,"timeout","TIMEOUT",{operation:"request.send",reason:"timeout",request:i}),r>0&&await SN(r);let o=this.clone();const a=(o.url.split(":")[0]||"").toLowerCase();if(a in fh){const h=await fh[a](o.url,hh(_(i,hi)));if(h instanceof Bo){let m=h;if(this.processFunc){hh(_(i,hi));try{m=await this.processFunc(o,m)}catch(g){(g.throttle==null||typeof g.stall!="number")&&m.makeServerError("error in post-processing function",g).assertOk()}}return m}o=h}this.preflightFunc&&(o=await this.preflightFunc(o));const l=await this.getUrlFunc(o,hh(_(i,hi)));let c=new Bo(l.statusCode,l.statusMessage,l.headers,l.body,i);if(c.statusCode===301||c.statusCode===302){try{const h=c.headers.location||"";return ge(u=o.redirect(h),Pa,Ju).call(u,e+1,n,0,i,c)}catch{}return c}else if(c.statusCode===429&&(this.retryFunc==null||await this.retryFunc(o,c,e))){const h=c.headers["retry-after"];let m=_(this,jr).slotInterval*Math.trunc(Math.random()*Math.pow(2,e));return typeof h=="string"&&h.match(/^[1-9][0-9]*$/)&&(m=parseInt(h)),ge(d=o.clone(),Pa,Ju).call(d,e+1,n,m,i,c)}if(this.processFunc){hh(_(i,hi));try{c=await this.processFunc(o,c)}catch(h){(h.throttle==null||typeof h.stall!="number")&&c.makeServerError("error in post-processing function",h).assertOk();let m=_(this,jr).slotInterval*Math.trunc(Math.random()*Math.pow(2,e));return h.stall>=0&&(m=h.stall),ge(f=o.clone(),Pa,Ju).call(f,e+1,n,m,i,c)}}return c};let Ko=G0;var mf,yf,vf,Yn,bc,Ra;const eE=class eE{constructor(e,n,r,i,s){ee(this,mf);ee(this,yf);ee(this,vf);ee(this,Yn);ee(this,bc);ee(this,Ra);H(this,mf,e),H(this,yf,n),H(this,vf,Object.keys(r).reduce((o,a)=>(o[a.toLowerCase()]=String(r[a]),o),{})),H(this,Yn,i==null?null:new Uint8Array(i)),H(this,bc,s||null),H(this,Ra,{message:""})}toString(){return`<FetchResponse status=${this.statusCode} body=${_(this,Yn)?ve(_(this,Yn)):"null"}>`}get statusCode(){return _(this,mf)}get statusMessage(){return _(this,yf)}get headers(){return Object.assign({},_(this,vf))}get body(){return _(this,Yn)==null?null:new Uint8Array(_(this,Yn))}get bodyText(){try{return _(this,Yn)==null?"":o0(_(this,Yn))}catch{de(!1,"response body is not valid UTF-8 data","UNSUPPORTED_OPERATION",{operation:"bodyText",info:{response:this}})}}get bodyJson(){try{return JSON.parse(this.bodyText)}catch{de(!1,"response body is not valid JSON","UNSUPPORTED_OPERATION",{operation:"bodyJson",info:{response:this}})}}[Symbol.iterator](){const e=this.headers,n=Object.keys(e);let r=0;return{next:()=>{if(r<n.length){const i=n[r++];return{value:[i,e[i]],done:!1}}return{value:void 0,done:!0}}}}makeServerError(e,n){let r;e?r=`CLIENT ESCALATED SERVER ERROR (${this.statusCode} ${this.statusMessage}; ${e})`:(e=`${this.statusCode} ${this.statusMessage}`,r=`CLIENT ESCALATED SERVER ERROR (${e})`);const i=new eE(599,r,this.headers,this.body,_(this,bc)||void 0);return H(i,Ra,{message:e,error:n}),i}throwThrottleError(e,n){n==null?n=-1:G(Number.isInteger(n)&&n>=0,"invalid stall timeout","stall",n);const r=new Error(e||"throttling requests");throw _e(r,{stall:n,throttle:!0}),r}getHeader(e){return this.headers[e.toLowerCase()]}hasBody(){return _(this,Yn)!=null}get request(){return _(this,bc)}ok(){return _(this,Ra).message===""&&this.statusCode>=200&&this.statusCode<300}assertOk(){if(this.ok())return;let{message:e,error:n}=_(this,Ra);e===""&&(e=`server response ${this.statusCode} ${this.statusMessage}`);let r=null;this.request&&(r=this.request.url);let i=null;try{_(this,Yn)&&(i=o0(_(this,Yn)))}catch{}de(!1,e,"SERVER_ERROR",{request:this.request||"unknown request",response:this,error:n,info:{requestUrl:r,responseBody:i,responseStatus:`${this.statusCode} ${this.statusMessage}`}})}};mf=new WeakMap,yf=new WeakMap,vf=new WeakMap,Yn=new WeakMap,bc=new WeakMap,Ra=new WeakMap;let Bo=eE;function w2(){return new Date().getTime()}function AN(t){return ws(t.replace(/%([0-9a-f][0-9a-f])/gi,(e,n)=>String.fromCharCode(parseInt(n,16))))}function SN(t){return new Promise(e=>setTimeout(e,t))}const xN=BigInt(-1),Br=BigInt(0),Kl=BigInt(1),CN=BigInt(5),yl={};let ac="0000";for(;ac.length<80;)ac+=ac;function Xo(t){let e=ac;for(;e.length<t;)e+=e;return BigInt("1"+e.substring(0,t))}function $u(t,e,n){const r=BigInt(e.width);if(e.signed){const i=Kl<<r-Kl;de(n==null||t>=-i&&t<i,"overflow","NUMERIC_FAULT",{operation:n,fault:"overflow",value:t}),t>Br?t=s0(ya(t,r),r):t=-s0(ya(-t,r),r)}else{const i=Kl<<r;de(n==null||t>=0&&t<i,"overflow","NUMERIC_FAULT",{operation:n,fault:"overflow",value:t}),t=(t%i+i)%i&i-Kl}return t}function wm(t){typeof t=="number"&&(t=`fixed128x${t}`);let e=!0,n=128,r=18;if(typeof t=="string"){if(t!=="fixed")if(t==="ufixed")e=!1;else{const s=t.match(/^(u?)fixed([0-9]+)x([0-9]+)$/);G(s,"invalid fixed format","format",t),e=s[1]!=="u",n=parseInt(s[2]),r=parseInt(s[3])}}else if(t){const s=t,o=(a,l,c)=>s[a]==null?c:(G(typeof s[a]===l,"invalid fixed format ("+a+" not "+l+")","format."+a,s[a]),s[a]);e=o("signed","boolean",e),n=o("width","number",n),r=o("decimals","number",r)}G(n%8===0,"invalid FixedNumber width (not byte aligned)","format.width",n),G(r<=80,"invalid FixedNumber decimals (too large)","format.decimals",r);const i=(e?"":"u")+"fixed"+String(n)+"x"+String(r);return{signed:e,width:n,decimals:r,name:i}}function kN(t,e){let n="";t<Br&&(n="-",t*=xN);let r=t.toString();if(e===0)return n+r;for(;r.length<=e;)r=ac+r;const i=r.length-e;for(r=r.substring(0,i)+"."+r.substring(i);r[0]==="0"&&r[1]!==".";)r=r.substring(1);for(;r[r.length-1]==="0"&&r[r.length-2]!==".";)r=r.substring(0,r.length-1);return n+r}var Hr,et,fn,Je,sa,Ki,Sv,xv,Cv,kv;const eo=class eo{constructor(e,n,r){ee(this,Je);Y(this,"format");ee(this,Hr);ee(this,et);ee(this,fn);Y(this,"_value");Nf(e,yl,"FixedNumber"),H(this,et,n),H(this,Hr,r);const i=kN(n,r.decimals);_e(this,{format:r.name,_value:i}),H(this,fn,Xo(r.decimals))}get signed(){return _(this,Hr).signed}get width(){return _(this,Hr).width}get decimals(){return _(this,Hr).decimals}get value(){return _(this,et)}addUnsafe(e){return ge(this,Je,Sv).call(this,e)}add(e){return ge(this,Je,Sv).call(this,e,"add")}subUnsafe(e){return ge(this,Je,xv).call(this,e)}sub(e){return ge(this,Je,xv).call(this,e,"sub")}mulUnsafe(e){return ge(this,Je,Cv).call(this,e)}mul(e){return ge(this,Je,Cv).call(this,e,"mul")}mulSignal(e){ge(this,Je,sa).call(this,e);const n=_(this,et)*_(e,et);return de(n%_(this,fn)===Br,"precision lost during signalling mul","NUMERIC_FAULT",{operation:"mulSignal",fault:"underflow",value:this}),ge(this,Je,Ki).call(this,n/_(this,fn),"mulSignal")}divUnsafe(e){return ge(this,Je,kv).call(this,e)}div(e){return ge(this,Je,kv).call(this,e,"div")}divSignal(e){de(_(e,et)!==Br,"division by zero","NUMERIC_FAULT",{operation:"div",fault:"divide-by-zero",value:this}),ge(this,Je,sa).call(this,e);const n=_(this,et)*_(this,fn);return de(n%_(e,et)===Br,"precision lost during signalling div","NUMERIC_FAULT",{operation:"divSignal",fault:"underflow",value:this}),ge(this,Je,Ki).call(this,n/_(e,et),"divSignal")}cmp(e){let n=this.value,r=e.value;const i=this.decimals-e.decimals;return i>0?r*=Xo(i):i<0&&(n*=Xo(-i)),n<r?-1:n>r?1:0}eq(e){return this.cmp(e)===0}lt(e){return this.cmp(e)<0}lte(e){return this.cmp(e)<=0}gt(e){return this.cmp(e)>0}gte(e){return this.cmp(e)>=0}floor(){let e=_(this,et);return _(this,et)<Br&&(e-=_(this,fn)-Kl),e=_(this,et)/_(this,fn)*_(this,fn),ge(this,Je,Ki).call(this,e,"floor")}ceiling(){let e=_(this,et);return _(this,et)>Br&&(e+=_(this,fn)-Kl),e=_(this,et)/_(this,fn)*_(this,fn),ge(this,Je,Ki).call(this,e,"ceiling")}round(e){if(e==null&&(e=0),e>=this.decimals)return this;const n=this.decimals-e,r=CN*Xo(n-1);let i=this.value+r;const s=Xo(n);return i=i/s*s,$u(i,_(this,Hr),"round"),new eo(yl,i,_(this,Hr))}isZero(){return _(this,et)===Br}isNegative(){return _(this,et)<Br}toString(){return this._value}toUnsafeFloat(){return parseFloat(this.toString())}toFormat(e){return eo.fromString(this.toString(),e)}static fromValue(e,n,r){const i=n==null?0:Oe(n),s=wm(r);let o=Ae(e,"value");const a=i-s.decimals;if(a>0){const l=Xo(a);de(o%l===Br,"value loses precision for format","NUMERIC_FAULT",{operation:"fromValue",fault:"underflow",value:e}),o/=l}else a<0&&(o*=Xo(-a));return $u(o,s,"fromValue"),new eo(yl,o,s)}static fromString(e,n){const r=e.match(/^(-?)([0-9]*)\.?([0-9]*)$/);G(r&&r[2].length+r[3].length>0,"invalid FixedNumber string value","value",e);const i=wm(n);let s=r[2]||"0",o=r[3]||"";for(;o.length<i.decimals;)o+=ac;de(o.substring(i.decimals).match(/^0*$/),"too many decimals for format","NUMERIC_FAULT",{operation:"fromString",fault:"underflow",value:e}),o=o.substring(0,i.decimals);const a=BigInt(r[1]+s+o);return $u(a,i,"fromString"),new eo(yl,a,i)}static fromBytes(e,n){let r=vg(Be(e,"value"));const i=wm(n);return i.signed&&(r=s0(r,i.width)),$u(r,i,"fromBytes"),new eo(yl,r,i)}};Hr=new WeakMap,et=new WeakMap,fn=new WeakMap,Je=new WeakSet,sa=function(e){G(this.format===e.format,"incompatible format; use fixedNumber.toFormat","other",e)},Ki=function(e,n){return e=$u(e,_(this,Hr),n),new eo(yl,e,_(this,Hr))},Sv=function(e,n){return ge(this,Je,sa).call(this,e),ge(this,Je,Ki).call(this,_(this,et)+_(e,et),n)},xv=function(e,n){return ge(this,Je,sa).call(this,e),ge(this,Je,Ki).call(this,_(this,et)-_(e,et),n)},Cv=function(e,n){return ge(this,Je,sa).call(this,e),ge(this,Je,Ki).call(this,_(this,et)*_(e,et)/_(this,fn),n)},kv=function(e,n){return de(_(e,et)!==Br,"division by zero","NUMERIC_FAULT",{operation:"div",fault:"divide-by-zero",value:this}),ge(this,Je,sa).call(this,e),ge(this,Je,Ki).call(this,_(this,et)*_(this,fn)/_(e,et),n)};let a0=eo;function _N(t){let e=t.toString(16);for(;e.length<2;)e="0"+e;return"0x"+e}function b2(t,e,n){let r=0;for(let i=0;i<n;i++)r=r*256+t[e+i];return r}function E2(t,e,n,r){const i=[];for(;n<e+1+r;){const s=x_(t,n);i.push(s.result),n+=s.consumed,de(n<=e+1+r,"child data too short","BUFFER_OVERRUN",{buffer:t,length:r,offset:e})}return{consumed:1+r,result:i}}function x_(t,e){de(t.length!==0,"data too short","BUFFER_OVERRUN",{buffer:t,length:0,offset:1});const n=r=>{de(r<=t.length,"data short segment too short","BUFFER_OVERRUN",{buffer:t,length:t.length,offset:r})};if(t[e]>=248){const r=t[e]-247;n(e+1+r);const i=b2(t,e+1,r);return n(e+1+r+i),E2(t,e,e+1+r,r+i)}else if(t[e]>=192){const r=t[e]-192;return n(e+1+r),E2(t,e,e+1,r)}else if(t[e]>=184){const r=t[e]-183;n(e+1+r);const i=b2(t,e+1,r);n(e+1+r+i);const s=ve(t.slice(e+1+r,e+1+r+i));return{consumed:1+r+i,result:s}}else if(t[e]>=128){const r=t[e]-128;n(e+1+r);const i=ve(t.slice(e+1,e+1+r));return{consumed:1+r,result:i}}return{consumed:1,result:_N(t[e])}}function Mf(t){const e=Be(t,"data"),n=x_(e,0);return G(n.consumed===e.length,"unexpected junk after rlp payload","data",t),n.result}function A2(t){const e=[];for(;t;)e.unshift(t&255),t>>=8;return e}function C_(t){if(Array.isArray(t)){let r=[];if(t.forEach(function(s){r=r.concat(C_(s))}),r.length<=55)return r.unshift(192+r.length),r;const i=A2(r.length);return i.unshift(247+i.length),i.concat(r)}const e=Array.prototype.slice.call(Be(t,"object"));if(e.length===1&&e[0]<=127)return e;if(e.length<=55)return e.unshift(128+e.length),e;const n=A2(e.length);return n.unshift(183+n.length),n.concat(e)}const S2="0123456789abcdef";function zo(t){let e="0x";for(const n of C_(t))e+=S2[n>>4],e+=S2[n&15];return e}const k_=["wei","kwei","mwei","gwei","szabo","finney","ether"];function ip(t,e){let n=18;if(typeof e=="string"){const r=k_.indexOf(e);G(r>=0,"invalid unit","unit",e),n=3*r}else e!=null&&(n=Oe(e,"unit"));return a0.fromValue(t,n,{decimals:n,width:512}).toString()}function x2(t,e){G(typeof t=="string","value must be a string","value",t);let n=18;if(typeof e=="string"){const r=k_.indexOf(e);G(r>=0,"invalid unit","unit",e),n=3*r}else e!=null&&(n=Oe(e,"unit"));return a0.fromString(t,{decimals:n,width:512}).value}const bn=32,_v=new Uint8Array(bn),TN=["then"],ph={},__=new WeakMap;function ca(t){return __.get(t)}function C2(t,e){__.set(t,e)}function Uu(t,e){const n=new Error(`deferred error during ABI decoding triggered accessing ${t}`);throw n.error=e,n}function Tv(t,e,n){return t.indexOf(null)>=0?e.map((r,i)=>r instanceof lu?Tv(ca(r),r,n):r):t.reduce((r,i,s)=>{let o=e.getValue(i);return i in r||(n&&o instanceof lu&&(o=Tv(ca(o),o,n)),r[i]=o),r},{})}var Ec;const Jl=class Jl extends Array{constructor(...n){const r=n[0];let i=n[1],s=(n[2]||[]).slice(),o=!0;r!==ph&&(i=n,s=[],o=!1);super(i.length);ee(this,Ec);i.forEach((c,u)=>{this[u]=c});const a=s.reduce((c,u)=>(typeof u=="string"&&c.set(u,(c.get(u)||0)+1),c),new Map);if(C2(this,Object.freeze(i.map((c,u)=>{const d=s[u];return d!=null&&a.get(d)===1?d:null}))),H(this,Ec,[]),_(this,Ec)==null&&_(this,Ec),!o)return;Object.freeze(this);const l=new Proxy(this,{get:(c,u,d)=>{if(typeof u=="string"){if(u.match(/^[0-9]+$/)){const h=Oe(u,"%index");if(h<0||h>=this.length)throw new RangeError("out of result range");const m=c[h];return m instanceof Error&&Uu(`index ${h}`,m),m}if(TN.indexOf(u)>=0)return Reflect.get(c,u,d);const f=c[u];if(f instanceof Function)return function(...h){return f.apply(this===d?c:this,h)};if(!(u in c))return c.getValue.apply(this===d?c:this,[u])}return Reflect.get(c,u,d)}});return C2(l,ca(this)),l}toArray(n){const r=[];return this.forEach((i,s)=>{i instanceof Error&&Uu(`index ${s}`,i),n&&i instanceof Jl&&(i=i.toArray(n)),r.push(i)}),r}toObject(n){const r=ca(this);return r.reduce((i,s,o)=>(de(s!=null,`value at index ${o} unnamed`,"UNSUPPORTED_OPERATION",{operation:"toObject()"}),Tv(r,this,n)),{})}slice(n,r){n==null&&(n=0),n<0&&(n+=this.length,n<0&&(n=0)),r==null&&(r=this.length),r<0&&(r+=this.length,r<0&&(r=0)),r>this.length&&(r=this.length);const i=ca(this),s=[],o=[];for(let a=n;a<r;a++)s.push(this[a]),o.push(i[a]);return new Jl(ph,s,o)}filter(n,r){const i=ca(this),s=[],o=[];for(let a=0;a<this.length;a++){const l=this[a];l instanceof Error&&Uu(`index ${a}`,l),n.call(r,l,a,this)&&(s.push(l),o.push(i[a]))}return new Jl(ph,s,o)}map(n,r){const i=[];for(let s=0;s<this.length;s++){const o=this[s];o instanceof Error&&Uu(`index ${s}`,o),i.push(n.call(r,o,s,this))}return i}getValue(n){const r=ca(this).indexOf(n);if(r===-1)return;const i=this[r];return i instanceof Error&&Uu(`property ${JSON.stringify(n)}`,i.error),i}static fromItems(n,r){return new Jl(ph,n,r)}};Ec=new WeakMap;let lu=Jl;function k2(t){let e=Pt(t);return de(e.length<=bn,"value out-of-bounds","BUFFER_OVERRUN",{buffer:e,length:bn,offset:e.length}),e.length!==bn&&(e=wn(vt([_v.slice(e.length%bn),e]))),e}class Rs{constructor(e,n,r,i){Y(this,"name");Y(this,"type");Y(this,"localName");Y(this,"dynamic");_e(this,{name:e,type:n,localName:r,dynamic:i},{name:"string",type:"string",localName:"string",dynamic:"boolean"})}_throwError(e,n){G(!1,e,this.localName,n)}}var ts,Ia,Ac,sp;class Pv{constructor(){ee(this,Ac);ee(this,ts);ee(this,Ia);H(this,ts,[]),H(this,Ia,0)}get data(){return vt(_(this,ts))}get length(){return _(this,Ia)}appendWriter(e){return ge(this,Ac,sp).call(this,wn(e.data))}writeBytes(e){let n=wn(e);const r=n.length%bn;return r&&(n=wn(vt([n,_v.slice(r)]))),ge(this,Ac,sp).call(this,n)}writeValue(e){return ge(this,Ac,sp).call(this,k2(e))}writeUpdatableValue(){const e=_(this,ts).length;return _(this,ts).push(_v),H(this,Ia,_(this,Ia)+bn),n=>{_(this,ts)[e]=k2(n)}}}ts=new WeakMap,Ia=new WeakMap,Ac=new WeakSet,sp=function(e){return _(this,ts).push(e),H(this,Ia,_(this,Ia)+e.length),e.length};var In,Jn,Oa,Na,lo,al,Iv,T_;const tE=class tE{constructor(e,n,r){ee(this,al);Y(this,"allowLoose");ee(this,In);ee(this,Jn);ee(this,Oa);ee(this,Na);ee(this,lo);_e(this,{allowLoose:!!n}),H(this,In,wn(e)),H(this,Oa,0),H(this,Na,null),H(this,lo,r??1024),H(this,Jn,0)}get data(){return ve(_(this,In))}get dataLength(){return _(this,In).length}get consumed(){return _(this,Jn)}get bytes(){return new Uint8Array(_(this,In))}subReader(e){const n=new tE(_(this,In).slice(_(this,Jn)+e),this.allowLoose,_(this,lo));return H(n,Na,this),n}readBytes(e,n){let r=ge(this,al,T_).call(this,0,e,!!n);return ge(this,al,Iv).call(this,e),H(this,Jn,_(this,Jn)+r.length),r.slice(0,e)}readValue(){return vg(this.readBytes(bn))}readIndex(){return lN(this.readBytes(bn))}};In=new WeakMap,Jn=new WeakMap,Oa=new WeakMap,Na=new WeakMap,lo=new WeakMap,al=new WeakSet,Iv=function(e){var n;if(_(this,Na))return ge(n=_(this,Na),al,Iv).call(n,e);H(this,Oa,_(this,Oa)+e),de(_(this,lo)<1||_(this,Oa)<=_(this,lo)*this.dataLength,`compressed ABI data exceeds inflation ratio of ${_(this,lo)} ( see: https://github.com/ethers-io/ethers.js/issues/4537 )`,"BUFFER_OVERRUN",{buffer:wn(_(this,In)),offset:_(this,Jn),length:e,info:{bytesRead:_(this,Oa),dataLength:this.dataLength}})},T_=function(e,n,r){let i=Math.ceil(n/bn)*bn;return _(this,Jn)+i>_(this,In).length&&(this.allowLoose&&r&&_(this,Jn)+n<=_(this,In).length?i=n:de(!1,"data out-of-bounds","BUFFER_OVERRUN",{buffer:wn(_(this,In)),length:_(this,In).length,offset:_(this,Jn)+i})),_(this,In).slice(_(this,Jn),_(this,Jn)+i)};let Rv=tE;function l0(t){if(!Number.isSafeInteger(t)||t<0)throw new Error(`Wrong positive integer: ${t}`)}function z1(t,...e){if(!(t instanceof Uint8Array))throw new Error("Expected Uint8Array");if(e.length>0&&!e.includes(t.length))throw new Error(`Expected Uint8Array of length ${e}, not of length=${t.length}`)}function PN(t){if(typeof t!="function"||typeof t.create!="function")throw new Error("Hash should be wrapped by utils.wrapConstructor");l0(t.outputLen),l0(t.blockLen)}function cu(t,e=!0){if(t.destroyed)throw new Error("Hash instance has been destroyed");if(e&&t.finished)throw new Error("Hash#digest() has already been called")}function P_(t,e){z1(t);const n=e.outputLen;if(t.length<n)throw new Error(`digestInto() expects output buffer of length at least ${n}`)}const bm=typeof globalThis=="object"&&"crypto"in globalThis?globalThis.crypto:void 0;/*! noble-hashes - MIT License (c) 2022 Paul Miller (paulmillr.com) */const R_=t=>t instanceof Uint8Array,RN=t=>new Uint32Array(t.buffer,t.byteOffset,Math.floor(t.byteLength/4)),Em=t=>new DataView(t.buffer,t.byteOffset,t.byteLength),ai=(t,e)=>t<<32-e|t>>>e,IN=new Uint8Array(new Uint32Array([287454020]).buffer)[0]===68;if(!IN)throw new Error("Non little-endian hardware is not supported");function ON(t){if(typeof t!="string")throw new Error(`utf8ToBytes expected string, got ${typeof t}`);return new Uint8Array(new TextEncoder().encode(t))}function wg(t){if(typeof t=="string"&&(t=ON(t)),!R_(t))throw new Error(`expected Uint8Array, got ${typeof t}`);return t}function NN(...t){const e=new Uint8Array(t.reduce((r,i)=>r+i.length,0));let n=0;return t.forEach(r=>{if(!R_(r))throw new Error("Uint8Array expected");e.set(r,n),n+=r.length}),e}class V1{clone(){return this._cloneInto()}}function G1(t){const e=r=>t().update(wg(r)).digest(),n=t();return e.outputLen=n.outputLen,e.blockLen=n.blockLen,e.create=()=>t(),e}function MN(t=32){if(bm&&typeof bm.getRandomValues=="function")return bm.getRandomValues(new Uint8Array(t));throw new Error("crypto.getRandomValues must be defined")}class I_ extends V1{constructor(e,n){super(),this.finished=!1,this.destroyed=!1,PN(e);const r=wg(n);if(this.iHash=e.create(),typeof this.iHash.update!="function")throw new Error("Expected instance of class which extends utils.Hash");this.blockLen=this.iHash.blockLen,this.outputLen=this.iHash.outputLen;const i=this.blockLen,s=new Uint8Array(i);s.set(r.length>i?e.create().update(r).digest():r);for(let o=0;o<s.length;o++)s[o]^=54;this.iHash.update(s),this.oHash=e.create();for(let o=0;o<s.length;o++)s[o]^=106;this.oHash.update(s),s.fill(0)}update(e){return cu(this),this.iHash.update(e),this}digestInto(e){cu(this),z1(e,this.outputLen),this.finished=!0,this.iHash.digestInto(e),this.oHash.update(e),this.oHash.digestInto(e),this.destroy()}digest(){const e=new Uint8Array(this.oHash.outputLen);return this.digestInto(e),e}_cloneInto(e){e||(e=Object.create(Object.getPrototypeOf(this),{}));const{oHash:n,iHash:r,finished:i,destroyed:s,blockLen:o,outputLen:a}=this;return e=e,e.finished=i,e.destroyed=s,e.blockLen=o,e.outputLen=a,e.oHash=n._cloneInto(e.oHash),e.iHash=r._cloneInto(e.iHash),e}destroy(){this.destroyed=!0,this.oHash.destroy(),this.iHash.destroy()}}const O_=(t,e,n)=>new I_(t,e).update(n).digest();O_.create=(t,e)=>new I_(t,e);function LN(t,e,n,r){if(typeof t.setBigUint64=="function")return t.setBigUint64(e,n,r);const i=BigInt(32),s=BigInt(4294967295),o=Number(n>>i&s),a=Number(n&s),l=r?4:0,c=r?0:4;t.setUint32(e+l,o,r),t.setUint32(e+c,a,r)}class N_ extends V1{constructor(e,n,r,i){super(),this.blockLen=e,this.outputLen=n,this.padOffset=r,this.isLE=i,this.finished=!1,this.length=0,this.pos=0,this.destroyed=!1,this.buffer=new Uint8Array(e),this.view=Em(this.buffer)}update(e){cu(this);const{view:n,buffer:r,blockLen:i}=this;e=wg(e);const s=e.length;for(let o=0;o<s;){const a=Math.min(i-this.pos,s-o);if(a===i){const l=Em(e);for(;i<=s-o;o+=i)this.process(l,o);continue}r.set(e.subarray(o,o+a),this.pos),this.pos+=a,o+=a,this.pos===i&&(this.process(n,0),this.pos=0)}return this.length+=e.length,this.roundClean(),this}digestInto(e){cu(this),P_(e,this),this.finished=!0;const{buffer:n,view:r,blockLen:i,isLE:s}=this;let{pos:o}=this;n[o++]=128,this.buffer.subarray(o).fill(0),this.padOffset>i-o&&(this.process(r,0),o=0);for(let d=o;d<i;d++)n[d]=0;LN(r,i-8,BigInt(this.length*8),s),this.process(r,0);const a=Em(e),l=this.outputLen;if(l%4)throw new Error("_sha2: outputLen should be aligned to 32bit");const c=l/4,u=this.get();if(c>u.length)throw new Error("_sha2: outputLen bigger than state");for(let d=0;d<c;d++)a.setUint32(4*d,u[d],s)}digest(){const{buffer:e,outputLen:n}=this;this.digestInto(e);const r=e.slice(0,n);return this.destroy(),r}_cloneInto(e){e||(e=new this.constructor),e.set(...this.get());const{blockLen:n,buffer:r,length:i,finished:s,destroyed:o,pos:a}=this;return e.length=i,e.pos=a,e.finished=s,e.destroyed=o,i%n&&e.buffer.set(r),e}}const BN=(t,e,n)=>t&e^~t&n,DN=(t,e,n)=>t&e^t&n^e&n,$N=new Uint32Array([1116352408,1899447441,3049323471,3921009573,961987163,1508970993,2453635748,2870763221,3624381080,310598401,607225278,1426881987,1925078388,2162078206,2614888103,3248222580,3835390401,4022224774,264347078,604807628,770255983,1249150122,1555081692,1996064986,2554220882,2821834349,2952996808,3210313671,3336571891,3584528711,113926993,338241895,666307205,773529912,1294757372,1396182291,1695183700,1986661051,2177026350,2456956037,2730485921,2820302411,3259730800,3345764771,3516065817,3600352804,4094571909,275423344,430227734,506948616,659060556,883997877,958139571,1322822218,1537002063,1747873779,1955562222,2024104815,2227730452,2361852424,2428436474,2756734187,3204031479,3329325298]),Ns=new Uint32Array([1779033703,3144134277,1013904242,2773480762,1359893119,2600822924,528734635,1541459225]),Ms=new Uint32Array(64);class UN extends N_{constructor(){super(64,32,8,!1),this.A=Ns[0]|0,this.B=Ns[1]|0,this.C=Ns[2]|0,this.D=Ns[3]|0,this.E=Ns[4]|0,this.F=Ns[5]|0,this.G=Ns[6]|0,this.H=Ns[7]|0}get(){const{A:e,B:n,C:r,D:i,E:s,F:o,G:a,H:l}=this;return[e,n,r,i,s,o,a,l]}set(e,n,r,i,s,o,a,l){this.A=e|0,this.B=n|0,this.C=r|0,this.D=i|0,this.E=s|0,this.F=o|0,this.G=a|0,this.H=l|0}process(e,n){for(let d=0;d<16;d++,n+=4)Ms[d]=e.getUint32(n,!1);for(let d=16;d<64;d++){const f=Ms[d-15],h=Ms[d-2],m=ai(f,7)^ai(f,18)^f>>>3,g=ai(h,17)^ai(h,19)^h>>>10;Ms[d]=g+Ms[d-7]+m+Ms[d-16]|0}let{A:r,B:i,C:s,D:o,E:a,F:l,G:c,H:u}=this;for(let d=0;d<64;d++){const f=ai(a,6)^ai(a,11)^ai(a,25),h=u+f+BN(a,l,c)+$N[d]+Ms[d]|0,g=(ai(r,2)^ai(r,13)^ai(r,22))+DN(r,i,s)|0;u=c,c=l,l=a,a=o+h|0,o=s,s=i,i=r,r=h+g|0}r=r+this.A|0,i=i+this.B|0,s=s+this.C|0,o=o+this.D|0,a=a+this.E|0,l=l+this.F|0,c=c+this.G|0,u=u+this.H|0,this.set(r,i,s,o,a,l,c,u)}roundClean(){Ms.fill(0)}destroy(){this.set(0,0,0,0,0,0,0,0),this.buffer.fill(0)}}const M_=G1(()=>new UN),gh=BigInt(2**32-1),Ov=BigInt(32);function L_(t,e=!1){return e?{h:Number(t&gh),l:Number(t>>Ov&gh)}:{h:Number(t>>Ov&gh)|0,l:Number(t&gh)|0}}function B_(t,e=!1){let n=new Uint32Array(t.length),r=new Uint32Array(t.length);for(let i=0;i<t.length;i++){const{h:s,l:o}=L_(t[i],e);[n[i],r[i]]=[s,o]}return[n,r]}const FN=(t,e)=>BigInt(t>>>0)<<Ov|BigInt(e>>>0),jN=(t,e,n)=>t>>>n,HN=(t,e,n)=>t<<32-n|e>>>n,KN=(t,e,n)=>t>>>n|e<<32-n,zN=(t,e,n)=>t<<32-n|e>>>n,VN=(t,e,n)=>t<<64-n|e>>>n-32,GN=(t,e,n)=>t>>>n-32|e<<64-n,WN=(t,e)=>e,qN=(t,e)=>t,D_=(t,e,n)=>t<<n|e>>>32-n,$_=(t,e,n)=>e<<n|t>>>32-n,U_=(t,e,n)=>e<<n-32|t>>>64-n,F_=(t,e,n)=>t<<n-32|e>>>64-n;function QN(t,e,n,r){const i=(e>>>0)+(r>>>0);return{h:t+n+(i/2**32|0)|0,l:i|0}}const YN=(t,e,n)=>(t>>>0)+(e>>>0)+(n>>>0),JN=(t,e,n,r)=>e+n+r+(t/2**32|0)|0,ZN=(t,e,n,r)=>(t>>>0)+(e>>>0)+(n>>>0)+(r>>>0),XN=(t,e,n,r,i)=>e+n+r+i+(t/2**32|0)|0,e4=(t,e,n,r,i)=>(t>>>0)+(e>>>0)+(n>>>0)+(r>>>0)+(i>>>0),t4=(t,e,n,r,i,s)=>e+n+r+i+s+(t/2**32|0)|0,Ne={fromBig:L_,split:B_,toBig:FN,shrSH:jN,shrSL:HN,rotrSH:KN,rotrSL:zN,rotrBH:VN,rotrBL:GN,rotr32H:WN,rotr32L:qN,rotlSH:D_,rotlSL:$_,rotlBH:U_,rotlBL:F_,add:QN,add3L:YN,add3H:JN,add4L:ZN,add4H:XN,add5H:t4,add5L:e4},[n4,r4]=Ne.split(["0x428a2f98d728ae22","0x7137449123ef65cd","0xb5c0fbcfec4d3b2f","0xe9b5dba58189dbbc","0x3956c25bf348b538","0x59f111f1b605d019","0x923f82a4af194f9b","0xab1c5ed5da6d8118","0xd807aa98a3030242","0x12835b0145706fbe","0x243185be4ee4b28c","0x550c7dc3d5ffb4e2","0x72be5d74f27b896f","0x80deb1fe3b1696b1","0x9bdc06a725c71235","0xc19bf174cf692694","0xe49b69c19ef14ad2","0xefbe4786384f25e3","0x0fc19dc68b8cd5b5","0x240ca1cc77ac9c65","0x2de92c6f592b0275","0x4a7484aa6ea6e483","0x5cb0a9dcbd41fbd4","0x76f988da831153b5","0x983e5152ee66dfab","0xa831c66d2db43210","0xb00327c898fb213f","0xbf597fc7beef0ee4","0xc6e00bf33da88fc2","0xd5a79147930aa725","0x06ca6351e003826f","0x142929670a0e6e70","0x27b70a8546d22ffc","0x2e1b21385c26c926","0x4d2c6dfc5ac42aed","0x53380d139d95b3df","0x650a73548baf63de","0x766a0abb3c77b2a8","0x81c2c92e47edaee6","0x92722c851482353b","0xa2bfe8a14cf10364","0xa81a664bbc423001","0xc24b8b70d0f89791","0xc76c51a30654be30","0xd192e819d6ef5218","0xd69906245565a910","0xf40e35855771202a","0x106aa07032bbd1b8","0x19a4c116b8d2d0c8","0x1e376c085141ab53","0x2748774cdf8eeb99","0x34b0bcb5e19b48a8","0x391c0cb3c5c95a63","0x4ed8aa4ae3418acb","0x5b9cca4f7763e373","0x682e6ff3d6b2b8a3","0x748f82ee5defb2fc","0x78a5636f43172f60","0x84c87814a1f0ab72","0x8cc702081a6439ec","0x90befffa23631e28","0xa4506cebde82bde9","0xbef9a3f7b2c67915","0xc67178f2e372532b","0xca273eceea26619c","0xd186b8c721c0c207","0xeada7dd6cde0eb1e","0xf57d4f7fee6ed178","0x06f067aa72176fba","0x0a637dc5a2c898a6","0x113f9804bef90dae","0x1b710b35131c471b","0x28db77f523047d84","0x32caab7b40c72493","0x3c9ebe0a15c9bebc","0x431d67c49c100d4c","0x4cc5d4becb3e42b6","0x597f299cfc657e2a","0x5fcb6fab3ad6faec","0x6c44198c4a475817"].map(t=>BigInt(t))),Ls=new Uint32Array(80),Bs=new Uint32Array(80);class i4 extends N_{constructor(){super(128,64,16,!1),this.Ah=1779033703,this.Al=-205731576,this.Bh=-1150833019,this.Bl=-2067093701,this.Ch=1013904242,this.Cl=-23791573,this.Dh=-1521486534,this.Dl=1595750129,this.Eh=1359893119,this.El=-1377402159,this.Fh=-1694144372,this.Fl=725511199,this.Gh=528734635,this.Gl=-79577749,this.Hh=1541459225,this.Hl=327033209}get(){const{Ah:e,Al:n,Bh:r,Bl:i,Ch:s,Cl:o,Dh:a,Dl:l,Eh:c,El:u,Fh:d,Fl:f,Gh:h,Gl:m,Hh:g,Hl:w}=this;return[e,n,r,i,s,o,a,l,c,u,d,f,h,m,g,w]}set(e,n,r,i,s,o,a,l,c,u,d,f,h,m,g,w){this.Ah=e|0,this.Al=n|0,this.Bh=r|0,this.Bl=i|0,this.Ch=s|0,this.Cl=o|0,this.Dh=a|0,this.Dl=l|0,this.Eh=c|0,this.El=u|0,this.Fh=d|0,this.Fl=f|0,this.Gh=h|0,this.Gl=m|0,this.Hh=g|0,this.Hl=w|0}process(e,n){for(let y=0;y<16;y++,n+=4)Ls[y]=e.getUint32(n),Bs[y]=e.getUint32(n+=4);for(let y=16;y<80;y++){const C=Ls[y-15]|0,P=Bs[y-15]|0,L=Ne.rotrSH(C,P,1)^Ne.rotrSH(C,P,8)^Ne.shrSH(C,P,7),j=Ne.rotrSL(C,P,1)^Ne.rotrSL(C,P,8)^Ne.shrSL(C,P,7),D=Ls[y-2]|0,V=Bs[y-2]|0,F=Ne.rotrSH(D,V,19)^Ne.rotrBH(D,V,61)^Ne.shrSH(D,V,6),W=Ne.rotrSL(D,V,19)^Ne.rotrBL(D,V,61)^Ne.shrSL(D,V,6),K=Ne.add4L(j,W,Bs[y-7],Bs[y-16]),$=Ne.add4H(K,L,F,Ls[y-7],Ls[y-16]);Ls[y]=$|0,Bs[y]=K|0}let{Ah:r,Al:i,Bh:s,Bl:o,Ch:a,Cl:l,Dh:c,Dl:u,Eh:d,El:f,Fh:h,Fl:m,Gh:g,Gl:w,Hh:p,Hl:v}=this;for(let y=0;y<80;y++){const C=Ne.rotrSH(d,f,14)^Ne.rotrSH(d,f,18)^Ne.rotrBH(d,f,41),P=Ne.rotrSL(d,f,14)^Ne.rotrSL(d,f,18)^Ne.rotrBL(d,f,41),L=d&h^~d&g,j=f&m^~f&w,D=Ne.add5L(v,P,j,r4[y],Bs[y]),V=Ne.add5H(D,p,C,L,n4[y],Ls[y]),F=D|0,W=Ne.rotrSH(r,i,28)^Ne.rotrBH(r,i,34)^Ne.rotrBH(r,i,39),K=Ne.rotrSL(r,i,28)^Ne.rotrBL(r,i,34)^Ne.rotrBL(r,i,39),$=r&s^r&a^s&a,M=i&o^i&l^o&l;p=g|0,v=w|0,g=h|0,w=m|0,h=d|0,m=f|0,{h:d,l:f}=Ne.add(c|0,u|0,V|0,F|0),c=a|0,u=l|0,a=s|0,l=o|0,s=r|0,o=i|0;const x=Ne.add3L(F,K,M);r=Ne.add3H(x,V,W,$),i=x|0}({h:r,l:i}=Ne.add(this.Ah|0,this.Al|0,r|0,i|0)),{h:s,l:o}=Ne.add(this.Bh|0,this.Bl|0,s|0,o|0),{h:a,l}=Ne.add(this.Ch|0,this.Cl|0,a|0,l|0),{h:c,l:u}=Ne.add(this.Dh|0,this.Dl|0,c|0,u|0),{h:d,l:f}=Ne.add(this.Eh|0,this.El|0,d|0,f|0),{h,l:m}=Ne.add(this.Fh|0,this.Fl|0,h|0,m|0),{h:g,l:w}=Ne.add(this.Gh|0,this.Gl|0,g|0,w|0),{h:p,l:v}=Ne.add(this.Hh|0,this.Hl|0,p|0,v|0),this.set(r,i,s,o,a,l,c,u,d,f,h,m,g,w,p,v)}roundClean(){Ls.fill(0),Bs.fill(0)}destroy(){this.buffer.fill(0),this.set(0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0)}}const s4=G1(()=>new i4);function o4(){if(typeof self<"u")return self;if(typeof window<"u")return window;if(typeof global<"u")return global;throw new Error("unable to locate global object")}const _2=o4();_2.crypto||_2.msCrypto;function a4(t){switch(t){case"sha256":return M_.create();case"sha512":return s4.create()}G(!1,"invalid hashing algorithm name","algorithm",t)}const[j_,H_,K_]=[[],[],[]],l4=BigInt(0),Fu=BigInt(1),c4=BigInt(2),u4=BigInt(7),d4=BigInt(256),f4=BigInt(113);for(let t=0,e=Fu,n=1,r=0;t<24;t++){[n,r]=[r,(2*n+3*r)%5],j_.push(2*(5*r+n)),H_.push((t+1)*(t+2)/2%64);let i=l4;for(let s=0;s<7;s++)e=(e<<Fu^(e>>u4)*f4)%d4,e&c4&&(i^=Fu<<(Fu<<BigInt(s))-Fu);K_.push(i)}const[h4,p4]=B_(K_,!0),T2=(t,e,n)=>n>32?U_(t,e,n):D_(t,e,n),P2=(t,e,n)=>n>32?F_(t,e,n):$_(t,e,n);function g4(t,e=24){const n=new Uint32Array(10);for(let r=24-e;r<24;r++){for(let o=0;o<10;o++)n[o]=t[o]^t[o+10]^t[o+20]^t[o+30]^t[o+40];for(let o=0;o<10;o+=2){const a=(o+8)%10,l=(o+2)%10,c=n[l],u=n[l+1],d=T2(c,u,1)^n[a],f=P2(c,u,1)^n[a+1];for(let h=0;h<50;h+=10)t[o+h]^=d,t[o+h+1]^=f}let i=t[2],s=t[3];for(let o=0;o<24;o++){const a=H_[o],l=T2(i,s,a),c=P2(i,s,a),u=j_[o];i=t[u],s=t[u+1],t[u]=l,t[u+1]=c}for(let o=0;o<50;o+=10){for(let a=0;a<10;a++)n[a]=t[o+a];for(let a=0;a<10;a++)t[o+a]^=~n[(a+2)%10]&n[(a+4)%10]}t[0]^=h4[r],t[1]^=p4[r]}n.fill(0)}class W1 extends V1{constructor(e,n,r,i=!1,s=24){if(super(),this.blockLen=e,this.suffix=n,this.outputLen=r,this.enableXOF=i,this.rounds=s,this.pos=0,this.posOut=0,this.finished=!1,this.destroyed=!1,l0(r),0>=this.blockLen||this.blockLen>=200)throw new Error("Sha3 supports only keccak-f1600 function");this.state=new Uint8Array(200),this.state32=RN(this.state)}keccak(){g4(this.state32,this.rounds),this.posOut=0,this.pos=0}update(e){cu(this);const{blockLen:n,state:r}=this;e=wg(e);const i=e.length;for(let s=0;s<i;){const o=Math.min(n-this.pos,i-s);for(let a=0;a<o;a++)r[this.pos++]^=e[s++];this.pos===n&&this.keccak()}return this}finish(){if(this.finished)return;this.finished=!0;const{state:e,suffix:n,pos:r,blockLen:i}=this;e[r]^=n,n&128&&r===i-1&&this.keccak(),e[i-1]^=128,this.keccak()}writeInto(e){cu(this,!1),z1(e),this.finish();const n=this.state,{blockLen:r}=this;for(let i=0,s=e.length;i<s;){this.posOut>=r&&this.keccak();const o=Math.min(r-this.posOut,s-i);e.set(n.subarray(this.posOut,this.posOut+o),i),this.posOut+=o,i+=o}return e}xofInto(e){if(!this.enableXOF)throw new Error("XOF is not possible for this instance");return this.writeInto(e)}xof(e){return l0(e),this.xofInto(new Uint8Array(e))}digestInto(e){if(P_(e,this),this.finished)throw new Error("digest() was already called");return this.writeInto(e),this.destroy(),e}digest(){return this.digestInto(new Uint8Array(this.outputLen))}destroy(){this.destroyed=!0,this.state.fill(0)}_cloneInto(e){const{blockLen:n,suffix:r,outputLen:i,rounds:s,enableXOF:o}=this;return e||(e=new W1(n,r,i,o,s)),e.state32.set(this.state32),e.pos=this.pos,e.posOut=this.posOut,e.finished=this.finished,e.rounds=s,e.suffix=r,e.outputLen=i,e.enableXOF=o,e.destroyed=this.destroyed,e}}const m4=(t,e,n)=>G1(()=>new W1(e,t,n)),y4=m4(1,136,256/8);let z_=!1;const V_=function(t){return y4(t)};let G_=V_;function Ct(t){const e=Be(t,"data");return ve(G_(e))}Ct._=V_;Ct.lock=function(){z_=!0};Ct.register=function(t){if(z_)throw new TypeError("keccak256 is locked");G_=t};Object.freeze(Ct);const W_=function(t){return a4("sha256").update(t).digest()};let q_=W_,Q_=!1;function Su(t){const e=Be(t,"data");return ve(q_(e))}Su._=W_;Su.lock=function(){Q_=!0};Su.register=function(t){if(Q_)throw new Error("sha256 is locked");q_=t};Object.freeze(Su);Object.freeze(Su);/*! noble-curves - MIT License (c) 2022 Paul Miller (paulmillr.com) */const Y_=BigInt(0),bg=BigInt(1),v4=BigInt(2),Eg=t=>t instanceof Uint8Array,w4=Array.from({length:256},(t,e)=>e.toString(16).padStart(2,"0"));function uu(t){if(!Eg(t))throw new Error("Uint8Array expected");let e="";for(let n=0;n<t.length;n++)e+=w4[t[n]];return e}function J_(t){const e=t.toString(16);return e.length&1?`0${e}`:e}function q1(t){if(typeof t!="string")throw new Error("hex string expected, got "+typeof t);return BigInt(t===""?"0":`0x${t}`)}function du(t){if(typeof t!="string")throw new Error("hex string expected, got "+typeof t);const e=t.length;if(e%2)throw new Error("padded hex string expected, got unpadded hex of length "+e);const n=new Uint8Array(e/2);for(let r=0;r<n.length;r++){const i=r*2,s=t.slice(i,i+2),o=Number.parseInt(s,16);if(Number.isNaN(o)||o<0)throw new Error("Invalid byte sequence");n[r]=o}return n}function Wa(t){return q1(uu(t))}function Q1(t){if(!Eg(t))throw new Error("Uint8Array expected");return q1(uu(Uint8Array.from(t).reverse()))}function fu(t,e){return du(t.toString(16).padStart(e*2,"0"))}function Y1(t,e){return fu(t,e).reverse()}function b4(t){return du(J_(t))}function Ur(t,e,n){let r;if(typeof e=="string")try{r=du(e)}catch(s){throw new Error(`${t} must be valid hex string, got "${e}". Cause: ${s}`)}else if(Eg(e))r=Uint8Array.from(e);else throw new Error(`${t} must be hex string or Uint8Array`);const i=r.length;if(typeof n=="number"&&i!==n)throw new Error(`${t} expected ${n} bytes, got ${i}`);return r}function Kd(...t){const e=new Uint8Array(t.reduce((r,i)=>r+i.length,0));let n=0;return t.forEach(r=>{if(!Eg(r))throw new Error("Uint8Array expected");e.set(r,n),n+=r.length}),e}function E4(t,e){if(t.length!==e.length)return!1;for(let n=0;n<t.length;n++)if(t[n]!==e[n])return!1;return!0}function A4(t){if(typeof t!="string")throw new Error(`utf8ToBytes expected string, got ${typeof t}`);return new Uint8Array(new TextEncoder().encode(t))}function S4(t){let e;for(e=0;t>Y_;t>>=bg,e+=1);return e}function x4(t,e){return t>>BigInt(e)&bg}const C4=(t,e,n)=>t|(n?bg:Y_)<<BigInt(e),J1=t=>(v4<<BigInt(t-1))-bg,Am=t=>new Uint8Array(t),R2=t=>Uint8Array.from(t);function Z_(t,e,n){if(typeof t!="number"||t<2)throw new Error("hashLen must be a number");if(typeof e!="number"||e<2)throw new Error("qByteLen must be a number");if(typeof n!="function")throw new Error("hmacFn must be a function");let r=Am(t),i=Am(t),s=0;const o=()=>{r.fill(1),i.fill(0),s=0},a=(...d)=>n(i,r,...d),l=(d=Am())=>{i=a(R2([0]),d),r=a(),d.length!==0&&(i=a(R2([1]),d),r=a())},c=()=>{if(s++>=1e3)throw new Error("drbg: tried 1000 values");let d=0;const f=[];for(;d<e;){r=a();const h=r.slice();f.push(h),d+=r.length}return Kd(...f)};return(d,f)=>{o(),l(d);let h;for(;!(h=f(c()));)l();return o(),h}}const k4={bigint:t=>typeof t=="bigint",function:t=>typeof t=="function",boolean:t=>typeof t=="boolean",string:t=>typeof t=="string",stringOrUint8Array:t=>typeof t=="string"||t instanceof Uint8Array,isSafeInteger:t=>Number.isSafeInteger(t),array:t=>Array.isArray(t),field:(t,e)=>e.Fp.isValid(t),hash:t=>typeof t=="function"&&Number.isSafeInteger(t.outputLen)};function Lf(t,e,n={}){const r=(i,s,o)=>{const a=k4[s];if(typeof a!="function")throw new Error(`Invalid validator "${s}", expected function`);const l=t[i];if(!(o&&l===void 0)&&!a(l,t))throw new Error(`Invalid param ${String(i)}=${l} (${typeof l}), expected ${s}`)};for(const[i,s]of Object.entries(e))r(i,s,!1);for(const[i,s]of Object.entries(n))r(i,s,!0);return t}const _4=Object.freeze(Object.defineProperty({__proto__:null,bitGet:x4,bitLen:S4,bitMask:J1,bitSet:C4,bytesToHex:uu,bytesToNumberBE:Wa,bytesToNumberLE:Q1,concatBytes:Kd,createHmacDrbg:Z_,ensureBytes:Ur,equalBytes:E4,hexToBytes:du,hexToNumber:q1,numberToBytesBE:fu,numberToBytesLE:Y1,numberToHexUnpadded:J_,numberToVarBytesBE:b4,utf8ToBytes:A4,validateObject:Lf},Symbol.toStringTag,{value:"Module"}));/*! noble-curves - MIT License (c) 2022 Paul Miller (paulmillr.com) */const Dt=BigInt(0),At=BigInt(1),ua=BigInt(2),T4=BigInt(3),Nv=BigInt(4),I2=BigInt(5),O2=BigInt(8);BigInt(9);BigInt(16);function Nn(t,e){const n=t%e;return n>=Dt?n:e+n}function P4(t,e,n){if(n<=Dt||e<Dt)throw new Error("Expected power/modulo > 0");if(n===At)return Dt;let r=At;for(;e>Dt;)e&At&&(r=r*t%n),t=t*t%n,e>>=At;return r}function cr(t,e,n){let r=t;for(;e-- >Dt;)r*=r,r%=n;return r}function Mv(t,e){if(t===Dt||e<=Dt)throw new Error(`invert: expected positive integers, got n=${t} mod=${e}`);let n=Nn(t,e),r=e,i=Dt,s=At;for(;n!==Dt;){const a=r/n,l=r%n,c=i-s*a;r=n,n=l,i=s,s=c}if(r!==At)throw new Error("invert: does not exist");return Nn(i,e)}function R4(t){const e=(t-At)/ua;let n,r,i;for(n=t-At,r=0;n%ua===Dt;n/=ua,r++);for(i=ua;i<t&&P4(i,e,t)!==t-At;i++);if(r===1){const o=(t+At)/Nv;return function(l,c){const u=l.pow(c,o);if(!l.eql(l.sqr(u),c))throw new Error("Cannot find square root");return u}}const s=(n+At)/ua;return function(a,l){if(a.pow(l,e)===a.neg(a.ONE))throw new Error("Cannot find square root");let c=r,u=a.pow(a.mul(a.ONE,i),n),d=a.pow(l,s),f=a.pow(l,n);for(;!a.eql(f,a.ONE);){if(a.eql(f,a.ZERO))return a.ZERO;let h=1;for(let g=a.sqr(f);h<c&&!a.eql(g,a.ONE);h++)g=a.sqr(g);const m=a.pow(u,At<<BigInt(c-h-1));u=a.sqr(m),d=a.mul(d,m),f=a.mul(f,u),c=h}return d}}function I4(t){if(t%Nv===T4){const e=(t+At)/Nv;return function(r,i){const s=r.pow(i,e);if(!r.eql(r.sqr(s),i))throw new Error("Cannot find square root");return s}}if(t%O2===I2){const e=(t-I2)/O2;return function(r,i){const s=r.mul(i,ua),o=r.pow(s,e),a=r.mul(i,o),l=r.mul(r.mul(a,ua),o),c=r.mul(a,r.sub(l,r.ONE));if(!r.eql(r.sqr(c),i))throw new Error("Cannot find square root");return c}}return R4(t)}const O4=["create","isValid","is0","neg","inv","sqrt","sqr","eql","add","sub","mul","pow","div","addN","subN","mulN","sqrN"];function N4(t){const e={ORDER:"bigint",MASK:"bigint",BYTES:"isSafeInteger",BITS:"isSafeInteger"},n=O4.reduce((r,i)=>(r[i]="function",r),e);return Lf(t,n)}function M4(t,e,n){if(n<Dt)throw new Error("Expected power > 0");if(n===Dt)return t.ONE;if(n===At)return e;let r=t.ONE,i=e;for(;n>Dt;)n&At&&(r=t.mul(r,i)),i=t.sqr(i),n>>=At;return r}function L4(t,e){const n=new Array(e.length),r=e.reduce((s,o,a)=>t.is0(o)?s:(n[a]=s,t.mul(s,o)),t.ONE),i=t.inv(r);return e.reduceRight((s,o,a)=>t.is0(o)?s:(n[a]=t.mul(s,n[a]),t.mul(s,o)),i),n}function X_(t,e){const n=e!==void 0?e:t.toString(2).length,r=Math.ceil(n/8);return{nBitLength:n,nByteLength:r}}function B4(t,e,n=!1,r={}){if(t<=Dt)throw new Error(`Expected Field ORDER > 0, got ${t}`);const{nBitLength:i,nByteLength:s}=X_(t,e);if(s>2048)throw new Error("Field lengths over 2048 bytes are not supported");const o=I4(t),a=Object.freeze({ORDER:t,BITS:i,BYTES:s,MASK:J1(i),ZERO:Dt,ONE:At,create:l=>Nn(l,t),isValid:l=>{if(typeof l!="bigint")throw new Error(`Invalid field element: expected bigint, got ${typeof l}`);return Dt<=l&&l<t},is0:l=>l===Dt,isOdd:l=>(l&At)===At,neg:l=>Nn(-l,t),eql:(l,c)=>l===c,sqr:l=>Nn(l*l,t),add:(l,c)=>Nn(l+c,t),sub:(l,c)=>Nn(l-c,t),mul:(l,c)=>Nn(l*c,t),pow:(l,c)=>M4(a,l,c),div:(l,c)=>Nn(l*Mv(c,t),t),sqrN:l=>l*l,addN:(l,c)=>l+c,subN:(l,c)=>l-c,mulN:(l,c)=>l*c,inv:l=>Mv(l,t),sqrt:r.sqrt||(l=>o(a,l)),invertBatch:l=>L4(a,l),cmov:(l,c,u)=>u?c:l,toBytes:l=>n?Y1(l,s):fu(l,s),fromBytes:l=>{if(l.length!==s)throw new Error(`Fp.fromBytes: expected ${s}, got ${l.length}`);return n?Q1(l):Wa(l)}});return Object.freeze(a)}function e3(t){if(typeof t!="bigint")throw new Error("field order must be bigint");const e=t.toString(2).length;return Math.ceil(e/8)}function t3(t){const e=e3(t);return e+Math.ceil(e/2)}function D4(t,e,n=!1){const r=t.length,i=e3(e),s=t3(e);if(r<16||r<s||r>1024)throw new Error(`expected ${s}-1024 bytes of input, got ${r}`);const o=n?Wa(t):Q1(t),a=Nn(o,e-At)+At;return n?Y1(a,i):fu(a,i)}/*! noble-curves - MIT License (c) 2022 Paul Miller (paulmillr.com) */const $4=BigInt(0),Sm=BigInt(1);function U4(t,e){const n=(i,s)=>{const o=s.negate();return i?o:s},r=i=>{const s=Math.ceil(e/i)+1,o=2**(i-1);return{windows:s,windowSize:o}};return{constTimeNegate:n,unsafeLadder(i,s){let o=t.ZERO,a=i;for(;s>$4;)s&Sm&&(o=o.add(a)),a=a.double(),s>>=Sm;return o},precomputeWindow(i,s){const{windows:o,windowSize:a}=r(s),l=[];let c=i,u=c;for(let d=0;d<o;d++){u=c,l.push(u);for(let f=1;f<a;f++)u=u.add(c),l.push(u);c=u.double()}return l},wNAF(i,s,o){const{windows:a,windowSize:l}=r(i);let c=t.ZERO,u=t.BASE;const d=BigInt(2**i-1),f=2**i,h=BigInt(i);for(let m=0;m<a;m++){const g=m*l;let w=Number(o&d);o>>=h,w>l&&(w-=f,o+=Sm);const p=g,v=g+Math.abs(w)-1,y=m%2!==0,C=w<0;w===0?u=u.add(n(y,s[p])):c=c.add(n(C,s[v]))}return{p:c,f:u}},wNAFCached(i,s,o,a){const l=i._WINDOW_SIZE||1;let c=s.get(i);return c||(c=this.precomputeWindow(i,l),l!==1&&s.set(i,a(c))),this.wNAF(l,c,o)}}}function n3(t){return N4(t.Fp),Lf(t,{n:"bigint",h:"bigint",Gx:"field",Gy:"field"},{nBitLength:"isSafeInteger",nByteLength:"isSafeInteger"}),Object.freeze({...X_(t.n,t.nBitLength),...t,p:t.Fp.ORDER})}/*! noble-curves - MIT License (c) 2022 Paul Miller (paulmillr.com) */function F4(t){const e=n3(t);Lf(e,{a:"field",b:"field"},{allowedPrivateKeyLengths:"array",wrapPrivateKey:"boolean",isTorsionFree:"function",clearCofactor:"function",allowInfinityPoint:"boolean",fromBytes:"function",toBytes:"function"});const{endo:n,Fp:r,a:i}=e;if(n){if(!r.eql(i,r.ZERO))throw new Error("Endomorphism can only be defined for Koblitz curves that have a=0");if(typeof n!="object"||typeof n.beta!="bigint"||typeof n.splitScalar!="function")throw new Error("Expected endomorphism with beta: bigint and splitScalar: function")}return Object.freeze({...e})}const{bytesToNumberBE:j4,hexToBytes:H4}=_4,va={Err:class extends Error{constructor(e=""){super(e)}},_parseInt(t){const{Err:e}=va;if(t.length<2||t[0]!==2)throw new e("Invalid signature integer tag");const n=t[1],r=t.subarray(2,n+2);if(!n||r.length!==n)throw new e("Invalid signature integer: wrong length");if(r[0]&128)throw new e("Invalid signature integer: negative");if(r[0]===0&&!(r[1]&128))throw new e("Invalid signature integer: unnecessary leading zero");return{d:j4(r),l:t.subarray(n+2)}},toSig(t){const{Err:e}=va,n=typeof t=="string"?H4(t):t;if(!(n instanceof Uint8Array))throw new Error("ui8a expected");let r=n.length;if(r<2||n[0]!=48)throw new e("Invalid signature tag");if(n[1]!==r-2)throw new e("Invalid signature: incorrect length");const{d:i,l:s}=va._parseInt(n.subarray(2)),{d:o,l:a}=va._parseInt(s);if(a.length)throw new e("Invalid signature: left bytes after parsing");return{r:i,s:o}},hexFromSig(t){const e=c=>Number.parseInt(c[0],16)&8?"00"+c:c,n=c=>{const u=c.toString(16);return u.length&1?`0${u}`:u},r=e(n(t.s)),i=e(n(t.r)),s=r.length/2,o=i.length/2,a=n(s),l=n(o);return`30${n(o+s+4)}02${l}${i}02${a}${r}`}},us=BigInt(0),Ar=BigInt(1);BigInt(2);const N2=BigInt(3);BigInt(4);function K4(t){const e=F4(t),{Fp:n}=e,r=e.toBytes||((m,g,w)=>{const p=g.toAffine();return Kd(Uint8Array.from([4]),n.toBytes(p.x),n.toBytes(p.y))}),i=e.fromBytes||(m=>{const g=m.subarray(1),w=n.fromBytes(g.subarray(0,n.BYTES)),p=n.fromBytes(g.subarray(n.BYTES,2*n.BYTES));return{x:w,y:p}});function s(m){const{a:g,b:w}=e,p=n.sqr(m),v=n.mul(p,m);return n.add(n.add(v,n.mul(m,g)),w)}if(!n.eql(n.sqr(e.Gy),s(e.Gx)))throw new Error("bad generator point: equation left != right");function o(m){return typeof m=="bigint"&&us<m&&m<e.n}function a(m){if(!o(m))throw new Error("Expected valid bigint: 0 < bigint < curve.n")}function l(m){const{allowedPrivateKeyLengths:g,nByteLength:w,wrapPrivateKey:p,n:v}=e;if(g&&typeof m!="bigint"){if(m instanceof Uint8Array&&(m=uu(m)),typeof m!="string"||!g.includes(m.length))throw new Error("Invalid key");m=m.padStart(w*2,"0")}let y;try{y=typeof m=="bigint"?m:Wa(Ur("private key",m,w))}catch{throw new Error(`private key must be ${w} bytes, hex or bigint, not ${typeof m}`)}return p&&(y=Nn(y,v)),a(y),y}const c=new Map;function u(m){if(!(m instanceof d))throw new Error("ProjectivePoint expected")}class d{constructor(g,w,p){if(this.px=g,this.py=w,this.pz=p,g==null||!n.isValid(g))throw new Error("x required");if(w==null||!n.isValid(w))throw new Error("y required");if(p==null||!n.isValid(p))throw new Error("z required")}static fromAffine(g){const{x:w,y:p}=g||{};if(!g||!n.isValid(w)||!n.isValid(p))throw new Error("invalid affine point");if(g instanceof d)throw new Error("projective point not allowed");const v=y=>n.eql(y,n.ZERO);return v(w)&&v(p)?d.ZERO:new d(w,p,n.ONE)}get x(){return this.toAffine().x}get y(){return this.toAffine().y}static normalizeZ(g){const w=n.invertBatch(g.map(p=>p.pz));return g.map((p,v)=>p.toAffine(w[v])).map(d.fromAffine)}static fromHex(g){const w=d.fromAffine(i(Ur("pointHex",g)));return w.assertValidity(),w}static fromPrivateKey(g){return d.BASE.multiply(l(g))}_setWindowSize(g){this._WINDOW_SIZE=g,c.delete(this)}assertValidity(){if(this.is0()){if(e.allowInfinityPoint&&!n.is0(this.py))return;throw new Error("bad point: ZERO")}const{x:g,y:w}=this.toAffine();if(!n.isValid(g)||!n.isValid(w))throw new Error("bad point: x or y not FE");const p=n.sqr(w),v=s(g);if(!n.eql(p,v))throw new Error("bad point: equation left != right");if(!this.isTorsionFree())throw new Error("bad point: not in prime-order subgroup")}hasEvenY(){const{y:g}=this.toAffine();if(n.isOdd)return!n.isOdd(g);throw new Error("Field doesn't support isOdd")}equals(g){u(g);const{px:w,py:p,pz:v}=this,{px:y,py:C,pz:P}=g,L=n.eql(n.mul(w,P),n.mul(y,v)),j=n.eql(n.mul(p,P),n.mul(C,v));return L&&j}negate(){return new d(this.px,n.neg(this.py),this.pz)}double(){const{a:g,b:w}=e,p=n.mul(w,N2),{px:v,py:y,pz:C}=this;let P=n.ZERO,L=n.ZERO,j=n.ZERO,D=n.mul(v,v),V=n.mul(y,y),F=n.mul(C,C),W=n.mul(v,y);return W=n.add(W,W),j=n.mul(v,C),j=n.add(j,j),P=n.mul(g,j),L=n.mul(p,F),L=n.add(P,L),P=n.sub(V,L),L=n.add(V,L),L=n.mul(P,L),P=n.mul(W,P),j=n.mul(p,j),F=n.mul(g,F),W=n.sub(D,F),W=n.mul(g,W),W=n.add(W,j),j=n.add(D,D),D=n.add(j,D),D=n.add(D,F),D=n.mul(D,W),L=n.add(L,D),F=n.mul(y,C),F=n.add(F,F),D=n.mul(F,W),P=n.sub(P,D),j=n.mul(F,V),j=n.add(j,j),j=n.add(j,j),new d(P,L,j)}add(g){u(g);const{px:w,py:p,pz:v}=this,{px:y,py:C,pz:P}=g;let L=n.ZERO,j=n.ZERO,D=n.ZERO;const V=e.a,F=n.mul(e.b,N2);let W=n.mul(w,y),K=n.mul(p,C),$=n.mul(v,P),M=n.add(w,p),x=n.add(y,C);M=n.mul(M,x),x=n.add(W,K),M=n.sub(M,x),x=n.add(w,v);let O=n.add(y,P);return x=n.mul(x,O),O=n.add(W,$),x=n.sub(x,O),O=n.add(p,v),L=n.add(C,P),O=n.mul(O,L),L=n.add(K,$),O=n.sub(O,L),D=n.mul(V,x),L=n.mul(F,$),D=n.add(L,D),L=n.sub(K,D),D=n.add(K,D),j=n.mul(L,D),K=n.add(W,W),K=n.add(K,W),$=n.mul(V,$),x=n.mul(F,x),K=n.add(K,$),$=n.sub(W,$),$=n.mul(V,$),x=n.add(x,$),W=n.mul(K,x),j=n.add(j,W),W=n.mul(O,x),L=n.mul(M,L),L=n.sub(L,W),W=n.mul(M,K),D=n.mul(O,D),D=n.add(D,W),new d(L,j,D)}subtract(g){return this.add(g.negate())}is0(){return this.equals(d.ZERO)}wNAF(g){return h.wNAFCached(this,c,g,w=>{const p=n.invertBatch(w.map(v=>v.pz));return w.map((v,y)=>v.toAffine(p[y])).map(d.fromAffine)})}multiplyUnsafe(g){const w=d.ZERO;if(g===us)return w;if(a(g),g===Ar)return this;const{endo:p}=e;if(!p)return h.unsafeLadder(this,g);let{k1neg:v,k1:y,k2neg:C,k2:P}=p.splitScalar(g),L=w,j=w,D=this;for(;y>us||P>us;)y&Ar&&(L=L.add(D)),P&Ar&&(j=j.add(D)),D=D.double(),y>>=Ar,P>>=Ar;return v&&(L=L.negate()),C&&(j=j.negate()),j=new d(n.mul(j.px,p.beta),j.py,j.pz),L.add(j)}multiply(g){a(g);let w=g,p,v;const{endo:y}=e;if(y){const{k1neg:C,k1:P,k2neg:L,k2:j}=y.splitScalar(w);let{p:D,f:V}=this.wNAF(P),{p:F,f:W}=this.wNAF(j);D=h.constTimeNegate(C,D),F=h.constTimeNegate(L,F),F=new d(n.mul(F.px,y.beta),F.py,F.pz),p=D.add(F),v=V.add(W)}else{const{p:C,f:P}=this.wNAF(w);p=C,v=P}return d.normalizeZ([p,v])[0]}multiplyAndAddUnsafe(g,w,p){const v=d.BASE,y=(P,L)=>L===us||L===Ar||!P.equals(v)?P.multiplyUnsafe(L):P.multiply(L),C=y(this,w).add(y(g,p));return C.is0()?void 0:C}toAffine(g){const{px:w,py:p,pz:v}=this,y=this.is0();g==null&&(g=y?n.ONE:n.inv(v));const C=n.mul(w,g),P=n.mul(p,g),L=n.mul(v,g);if(y)return{x:n.ZERO,y:n.ZERO};if(!n.eql(L,n.ONE))throw new Error("invZ was invalid");return{x:C,y:P}}isTorsionFree(){const{h:g,isTorsionFree:w}=e;if(g===Ar)return!0;if(w)return w(d,this);throw new Error("isTorsionFree() has not been declared for the elliptic curve")}clearCofactor(){const{h:g,clearCofactor:w}=e;return g===Ar?this:w?w(d,this):this.multiplyUnsafe(e.h)}toRawBytes(g=!0){return this.assertValidity(),r(d,this,g)}toHex(g=!0){return uu(this.toRawBytes(g))}}d.BASE=new d(e.Gx,e.Gy,n.ONE),d.ZERO=new d(n.ZERO,n.ONE,n.ZERO);const f=e.nBitLength,h=U4(d,e.endo?Math.ceil(f/2):f);return{CURVE:e,ProjectivePoint:d,normPrivateKeyToScalar:l,weierstrassEquation:s,isWithinCurveOrder:o}}function z4(t){const e=n3(t);return Lf(e,{hash:"hash",hmac:"function",randomBytes:"function"},{bits2int:"function",bits2int_modN:"function",lowS:"boolean"}),Object.freeze({lowS:!0,...e})}function V4(t){const e=z4(t),{Fp:n,n:r}=e,i=n.BYTES+1,s=2*n.BYTES+1;function o(x){return us<x&&x<n.ORDER}function a(x){return Nn(x,r)}function l(x){return Mv(x,r)}const{ProjectivePoint:c,normPrivateKeyToScalar:u,weierstrassEquation:d,isWithinCurveOrder:f}=K4({...e,toBytes(x,O,B){const b=O.toAffine(),E=n.toBytes(b.x),k=Kd;return B?k(Uint8Array.from([O.hasEvenY()?2:3]),E):k(Uint8Array.from([4]),E,n.toBytes(b.y))},fromBytes(x){const O=x.length,B=x[0],b=x.subarray(1);if(O===i&&(B===2||B===3)){const E=Wa(b);if(!o(E))throw new Error("Point is not on curve");const k=d(E);let I=n.sqrt(k);const A=(I&Ar)===Ar;return(B&1)===1!==A&&(I=n.neg(I)),{x:E,y:I}}else if(O===s&&B===4){const E=n.fromBytes(b.subarray(0,n.BYTES)),k=n.fromBytes(b.subarray(n.BYTES,2*n.BYTES));return{x:E,y:k}}else throw new Error(`Point of length ${O} was invalid. Expected ${i} compressed bytes or ${s} uncompressed bytes`)}}),h=x=>uu(fu(x,e.nByteLength));function m(x){const O=r>>Ar;return x>O}function g(x){return m(x)?a(-x):x}const w=(x,O,B)=>Wa(x.slice(O,B));class p{constructor(O,B,b){this.r=O,this.s=B,this.recovery=b,this.assertValidity()}static fromCompact(O){const B=e.nByteLength;return O=Ur("compactSignature",O,B*2),new p(w(O,0,B),w(O,B,2*B))}static fromDER(O){const{r:B,s:b}=va.toSig(Ur("DER",O));return new p(B,b)}assertValidity(){if(!f(this.r))throw new Error("r must be 0 < r < CURVE.n");if(!f(this.s))throw new Error("s must be 0 < s < CURVE.n")}addRecoveryBit(O){return new p(this.r,this.s,O)}recoverPublicKey(O){const{r:B,s:b,recovery:E}=this,k=j(Ur("msgHash",O));if(E==null||![0,1,2,3].includes(E))throw new Error("recovery id invalid");const I=E===2||E===3?B+e.n:B;if(I>=n.ORDER)throw new Error("recovery id 2 or 3 invalid");const A=E&1?"03":"02",S=c.fromHex(A+h(I)),T=l(I),R=a(-k*T),N=a(b*T),U=c.BASE.multiplyAndAddUnsafe(S,R,N);if(!U)throw new Error("point at infinify");return U.assertValidity(),U}hasHighS(){return m(this.s)}normalizeS(){return this.hasHighS()?new p(this.r,a(-this.s),this.recovery):this}toDERRawBytes(){return du(this.toDERHex())}toDERHex(){return va.hexFromSig({r:this.r,s:this.s})}toCompactRawBytes(){return du(this.toCompactHex())}toCompactHex(){return h(this.r)+h(this.s)}}const v={isValidPrivateKey(x){try{return u(x),!0}catch{return!1}},normPrivateKeyToScalar:u,randomPrivateKey:()=>{const x=t3(e.n);return D4(e.randomBytes(x),e.n)},precompute(x=8,O=c.BASE){return O._setWindowSize(x),O.multiply(BigInt(3)),O}};function y(x,O=!0){return c.fromPrivateKey(x).toRawBytes(O)}function C(x){const O=x instanceof Uint8Array,B=typeof x=="string",b=(O||B)&&x.length;return O?b===i||b===s:B?b===2*i||b===2*s:x instanceof c}function P(x,O,B=!0){if(C(x))throw new Error("first arg must be private key");if(!C(O))throw new Error("second arg must be public key");return c.fromHex(O).multiply(u(x)).toRawBytes(B)}const L=e.bits2int||function(x){const O=Wa(x),B=x.length*8-e.nBitLength;return B>0?O>>BigInt(B):O},j=e.bits2int_modN||function(x){return a(L(x))},D=J1(e.nBitLength);function V(x){if(typeof x!="bigint")throw new Error("bigint expected");if(!(us<=x&&x<D))throw new Error(`bigint expected < 2^${e.nBitLength}`);return fu(x,e.nByteLength)}function F(x,O,B=W){if(["recovered","canonical"].some(q=>q in B))throw new Error("sign() legacy options not supported");const{hash:b,randomBytes:E}=e;let{lowS:k,prehash:I,extraEntropy:A}=B;k==null&&(k=!0),x=Ur("msgHash",x),I&&(x=Ur("prehashed msgHash",b(x)));const S=j(x),T=u(O),R=[V(T),V(S)];if(A!=null){const q=A===!0?E(n.BYTES):A;R.push(Ur("extraEntropy",q))}const N=Kd(...R),U=S;function z(q){const Q=L(q);if(!f(Q))return;const ie=l(Q),oe=c.BASE.multiply(Q).toAffine(),J=a(oe.x);if(J===us)return;const le=a(ie*a(U+J*T));if(le===us)return;let Z=(oe.x===J?0:2)|Number(oe.y&Ar),te=le;return k&&m(le)&&(te=g(le),Z^=1),new p(J,te,Z)}return{seed:N,k2sig:z}}const W={lowS:e.lowS,prehash:!1},K={lowS:e.lowS,prehash:!1};function $(x,O,B=W){const{seed:b,k2sig:E}=F(x,O,B),k=e;return Z_(k.hash.outputLen,k.nByteLength,k.hmac)(b,E)}c.BASE._setWindowSize(8);function M(x,O,B,b=K){var oe;const E=x;if(O=Ur("msgHash",O),B=Ur("publicKey",B),"strict"in b)throw new Error("options.strict was renamed to lowS");const{lowS:k,prehash:I}=b;let A,S;try{if(typeof E=="string"||E instanceof Uint8Array)try{A=p.fromDER(E)}catch(J){if(!(J instanceof va.Err))throw J;A=p.fromCompact(E)}else if(typeof E=="object"&&typeof E.r=="bigint"&&typeof E.s=="bigint"){const{r:J,s:le}=E;A=new p(J,le)}else throw new Error("PARSE");S=c.fromHex(B)}catch(J){if(J.message==="PARSE")throw new Error("signature must be Signature instance, Uint8Array or hex string");return!1}if(k&&A.hasHighS())return!1;I&&(O=e.hash(O));const{r:T,s:R}=A,N=j(O),U=l(R),z=a(N*U),q=a(T*U),Q=(oe=c.BASE.multiplyAndAddUnsafe(S,z,q))==null?void 0:oe.toAffine();return Q?a(Q.x)===T:!1}return{CURVE:e,getPublicKey:y,getSharedSecret:P,sign:$,verify:M,ProjectivePoint:c,Signature:p,utils:v}}/*! noble-curves - MIT License (c) 2022 Paul Miller (paulmillr.com) */function G4(t){return{hash:t,hmac:(e,...n)=>O_(t,e,NN(...n)),randomBytes:MN}}function W4(t,e){const n=r=>V4({...t,...G4(r)});return Object.freeze({...n(e),create:n})}/*! noble-curves - MIT License (c) 2022 Paul Miller (paulmillr.com) */const r3=BigInt("0xfffffffffffffffffffffffffffffffffffffffffffffffffffffffefffffc2f"),M2=BigInt("0xfffffffffffffffffffffffffffffffebaaedce6af48a03bbfd25e8cd0364141"),q4=BigInt(1),Lv=BigInt(2),L2=(t,e)=>(t+e/Lv)/e;function Q4(t){const e=r3,n=BigInt(3),r=BigInt(6),i=BigInt(11),s=BigInt(22),o=BigInt(23),a=BigInt(44),l=BigInt(88),c=t*t*t%e,u=c*c*t%e,d=cr(u,n,e)*u%e,f=cr(d,n,e)*u%e,h=cr(f,Lv,e)*c%e,m=cr(h,i,e)*h%e,g=cr(m,s,e)*m%e,w=cr(g,a,e)*g%e,p=cr(w,l,e)*w%e,v=cr(p,a,e)*g%e,y=cr(v,n,e)*u%e,C=cr(y,o,e)*m%e,P=cr(C,r,e)*c%e,L=cr(P,Lv,e);if(!Bv.eql(Bv.sqr(L),t))throw new Error("Cannot find square root");return L}const Bv=B4(r3,void 0,void 0,{sqrt:Q4}),Hs=W4({a:BigInt(0),b:BigInt(7),Fp:Bv,n:M2,Gx:BigInt("55066263022277343669578718895168534326250603453777594175500187360389116729240"),Gy:BigInt("32670510020758816978083085130507043184471273380659243275938904335757337482424"),h:BigInt(1),lowS:!0,endo:{beta:BigInt("0x7ae96a2b657c07106e64479eac3434e99cf0497512f58995c1396c28719501ee"),splitScalar:t=>{const e=M2,n=BigInt("0x3086d221a7d46bcde86c90e49284eb15"),r=-q4*BigInt("0xe4437ed6010e88286f547fa90abfe4c3"),i=BigInt("0x114ca50f7a8e2f3f657c1108d9d44cfd8"),s=n,o=BigInt("0x100000000000000000000000000000000"),a=L2(s*t,e),l=L2(-r*t,e);let c=Nn(t-a*n-l*i,e),u=Nn(-a*r-l*s,e);const d=c>o,f=u>o;if(d&&(c=e-c),f&&(u=e-u),c>o||u>o)throw new Error("splitScalar: Endomorphism failed, k="+t);return{k1neg:d,k1:c,k2neg:f,k2:u}}}},M_);BigInt(0);Hs.ProjectivePoint;const zd="0x0000000000000000000000000000000000000000",B2="0x0000000000000000000000000000000000000000000000000000000000000000",D2=BigInt(0),$2=BigInt(1),U2=BigInt(2),F2=BigInt(27),j2=BigInt(28),mh=BigInt(35),vl={};function H2(t){return ks(Pt(t),32)}var Sc,pi,xc,Ma;const Dr=class Dr{constructor(e,n,r,i){ee(this,Sc);ee(this,pi);ee(this,xc);ee(this,Ma);Nf(e,vl,"Signature"),H(this,Sc,n),H(this,pi,r),H(this,xc,i),H(this,Ma,null)}get r(){return _(this,Sc)}set r(e){G(oc(e)===32,"invalid r","value",e),H(this,Sc,ve(e))}get s(){return G(parseInt(_(this,pi).substring(0,3))<8,"non-canonical s; use ._s","s",_(this,pi)),_(this,pi)}set s(e){G(oc(e)===32,"invalid s","value",e),H(this,pi,ve(e))}get _s(){return _(this,pi)}isValid(){return parseInt(_(this,pi).substring(0,3))<8}get v(){return _(this,xc)}set v(e){const n=Oe(e,"value");G(n===27||n===28,"invalid v","v",e),H(this,xc,n)}get networkV(){return _(this,Ma)}get legacyChainId(){const e=this.networkV;return e==null?null:Dr.getChainId(e)}get yParity(){return this.v===27?0:1}get yParityAndS(){const e=Be(this.s);return this.yParity&&(e[0]|=128),ve(e)}get compactSerialized(){return vt([this.r,this.yParityAndS])}get serialized(){return vt([this.r,this.s,this.yParity?"0x1c":"0x1b"])}[Symbol.for("nodejs.util.inspect.custom")](){return`Signature { r: "${this.r}", s: "${this._s}"${this.isValid()?"":', valid: "false"'}, yParity: ${this.yParity}, networkV: ${this.networkV} }`}clone(){const e=new Dr(vl,this.r,this._s,this.v);return this.networkV&&H(e,Ma,this.networkV),e}toJSON(){const e=this.networkV;return{_type:"signature",networkV:e!=null?e.toString():null,r:this.r,s:this._s,v:this.v}}static getChainId(e){const n=Ae(e,"v");return n==F2||n==j2?D2:(G(n>=mh,"invalid EIP-155 v","v",e),(n-mh)/U2)}static getChainIdV(e,n){return Ae(e)*U2+BigInt(35+n-27)}static getNormalizedV(e){const n=Ae(e);return n===D2||n===F2?27:n===$2||n===j2?28:(G(n>=mh,"invalid v","v",e),n&$2?27:28)}static from(e){function n(c,u){G(c,u,"signature",e)}if(e==null)return new Dr(vl,B2,B2,27);if(typeof e=="string"){const c=Be(e,"signature");if(c.length===64){const u=ve(c.slice(0,32)),d=c.slice(32,64),f=d[0]&128?28:27;return d[0]&=127,new Dr(vl,u,ve(d),f)}if(c.length===65){const u=ve(c.slice(0,32)),d=ve(c.slice(32,64)),f=Dr.getNormalizedV(c[64]);return new Dr(vl,u,d,f)}n(!1,"invalid raw signature length")}if(e instanceof Dr)return e.clone();const r=e.r;n(r!=null,"missing r");const i=H2(r),s=function(c,u){if(c!=null)return H2(c);if(u!=null){n(it(u,32),"invalid yParityAndS");const d=Be(u);return d[0]&=127,ve(d)}n(!1,"missing s")}(e.s,e.yParityAndS),{networkV:o,v:a}=function(c,u,d){if(c!=null){const f=Ae(c);return{networkV:f>=mh?f:void 0,v:Dr.getNormalizedV(f)}}if(u!=null)return n(it(u,32),"invalid yParityAndS"),{v:Be(u)[0]&128?28:27};if(d!=null){switch(Oe(d,"sig.yParity")){case 0:return{v:27};case 1:return{v:28}}n(!1,"invalid yParity")}n(!1,"missing v")}(e.v,e.yParityAndS,e.yParity),l=new Dr(vl,i,s,a);return o&&H(l,Ma,o),n(e.yParity==null||Oe(e.yParity,"sig.yParity")===l.yParity,"yParity mismatch"),n(e.yParityAndS==null||e.yParityAndS===l.yParityAndS,"yParityAndS mismatch"),l}};Sc=new WeakMap,pi=new WeakMap,xc=new WeakMap,Ma=new WeakMap;let jn=Dr;var ns;const da=class da{constructor(e){ee(this,ns);G(oc(e)===32,"invalid private key","privateKey","[REDACTED]"),H(this,ns,ve(e))}get privateKey(){return _(this,ns)}get publicKey(){return da.computePublicKey(_(this,ns))}get compressedPublicKey(){return da.computePublicKey(_(this,ns),!0)}sign(e){G(oc(e)===32,"invalid digest length","digest",e);const n=Hs.sign(wn(e),wn(_(this,ns)),{lowS:!0});return jn.from({r:Ho(n.r,32),s:Ho(n.s,32),v:n.recovery?28:27})}computeSharedSecret(e){const n=da.computePublicKey(e);return ve(Hs.getSharedSecret(wn(_(this,ns)),Be(n),!1))}static computePublicKey(e,n){let r=Be(e,"key");if(r.length===32){const s=Hs.getPublicKey(r,!!n);return ve(s)}if(r.length===64){const s=new Uint8Array(65);s[0]=4,s.set(r,1),r=s}const i=Hs.ProjectivePoint.fromHex(r);return ve(i.toRawBytes(n))}static recoverPublicKey(e,n){G(oc(e)===32,"invalid digest length","digest",e);const r=jn.from(n);let i=Hs.Signature.fromCompact(wn(vt([r.r,r.s])));i=i.addRecoveryBit(r.yParity);const s=i.recoverPublicKey(wn(e));return G(s!=null,"invalid signature for digest","signature",n),"0x"+s.toHex(!1)}static addPoints(e,n,r){const i=Hs.ProjectivePoint.fromHex(da.computePublicKey(e).substring(2)),s=Hs.ProjectivePoint.fromHex(da.computePublicKey(n).substring(2));return"0x"+i.add(s).toHex(!!r)}};ns=new WeakMap;let Vd=da;const Y4=BigInt(0),J4=BigInt(36);function K2(t){t=t.toLowerCase();const e=t.substring(2).split(""),n=new Uint8Array(40);for(let i=0;i<40;i++)n[i]=e[i].charCodeAt(0);const r=Be(Ct(n));for(let i=0;i<40;i+=2)r[i>>1]>>4>=8&&(e[i]=e[i].toUpperCase()),(r[i>>1]&15)>=8&&(e[i+1]=e[i+1].toUpperCase());return"0x"+e.join("")}const Z1={};for(let t=0;t<10;t++)Z1[String(t)]=String(t);for(let t=0;t<26;t++)Z1[String.fromCharCode(65+t)]=String(10+t);const z2=15;function Z4(t){t=t.toUpperCase(),t=t.substring(4)+t.substring(0,2)+"00";let e=t.split("").map(r=>Z1[r]).join("");for(;e.length>=z2;){let r=e.substring(0,z2);e=parseInt(r,10)%97+e.substring(r.length)}let n=String(98-parseInt(e,10)%97);for(;n.length<2;)n="0"+n;return n}const X4=function(){const t={};for(let e=0;e<36;e++){const n="0123456789abcdefghijklmnopqrstuvwxyz"[e];t[n]=BigInt(e)}return t}();function eM(t){t=t.toLowerCase();let e=Y4;for(let n=0;n<t.length;n++)e=e*J4+X4[t[n]];return e}function Ze(t){if(G(typeof t=="string","invalid address","address",t),t.match(/^(0x)?[0-9a-fA-F]{40}$/)){t.startsWith("0x")||(t="0x"+t);const e=K2(t);return G(!t.match(/([A-F].*[a-f])|([a-f].*[A-F])/)||e===t,"bad address checksum","address",t),e}if(t.match(/^XE[0-9]{2}[0-9A-Za-z]{30,31}$/)){G(t.substring(2,4)===Z4(t),"bad icap checksum","address",t);let e=eM(t.substring(4)).toString(16);for(;e.length<40;)e="0"+e;return K2("0x"+e)}G(!1,"invalid address","address",t)}function tM(t){const e=Ze(t.from);let r=Ae(t.nonce,"tx.nonce").toString(16);return r==="0"?r="0x":r.length%2?r="0x0"+r:r="0x"+r,Ze(gt(Ct(zo([e,r])),12))}function i3(t){return t&&typeof t.getAddress=="function"}async function xm(t,e){const n=await e;return(n==null||n==="0x0000000000000000000000000000000000000000")&&(de(typeof t!="string","unconfigured name","UNCONFIGURED_NAME",{value:t}),G(!1,"invalid AddressLike value; did not resolve to a value address","target",t)),Ze(n)}function En(t,e){if(typeof t=="string")return t.match(/^0x[0-9a-f]{40}$/i)?Ze(t):(de(e!=null,"ENS resolution requires a provider","UNSUPPORTED_OPERATION",{operation:"resolveName"}),xm(t,e.resolveName(t)));if(i3(t))return xm(t,t.getAddress());if(t&&typeof t.then=="function")return xm(t,t);G(!1,"unsupported addressable value","target",t)}const Vi={};function be(t,e){let n=!1;return e<0&&(n=!0,e*=-1),new un(Vi,`${n?"":"u"}int${e}`,t,{signed:n,width:e})}function Ve(t,e){return new un(Vi,`bytes${e||""}`,t,{size:e})}const V2=Symbol.for("_ethers_typed");var La;const Gi=class Gi{constructor(e,n,r,i){Y(this,"type");Y(this,"value");ee(this,La);Y(this,"_typedSymbol");i==null&&(i=null),Nf(Vi,e,"Typed"),_e(this,{_typedSymbol:V2,type:n,value:r}),H(this,La,i),this.format()}format(){if(this.type==="array")throw new Error("");if(this.type==="dynamicArray")throw new Error("");return this.type==="tuple"?`tuple(${this.value.map(e=>e.format()).join(",")})`:this.type}defaultValue(){return 0}minValue(){return 0}maxValue(){return 0}isBigInt(){return!!this.type.match(/^u?int[0-9]+$/)}isData(){return this.type.startsWith("bytes")}isString(){return this.type==="string"}get tupleName(){if(this.type!=="tuple")throw TypeError("not a tuple");return _(this,La)}get arrayLength(){if(this.type!=="array")throw TypeError("not an array");return _(this,La)===!0?-1:_(this,La)===!1?this.value.length:null}static from(e,n){return new Gi(Vi,e,n)}static uint8(e){return be(e,8)}static uint16(e){return be(e,16)}static uint24(e){return be(e,24)}static uint32(e){return be(e,32)}static uint40(e){return be(e,40)}static uint48(e){return be(e,48)}static uint56(e){return be(e,56)}static uint64(e){return be(e,64)}static uint72(e){return be(e,72)}static uint80(e){return be(e,80)}static uint88(e){return be(e,88)}static uint96(e){return be(e,96)}static uint104(e){return be(e,104)}static uint112(e){return be(e,112)}static uint120(e){return be(e,120)}static uint128(e){return be(e,128)}static uint136(e){return be(e,136)}static uint144(e){return be(e,144)}static uint152(e){return be(e,152)}static uint160(e){return be(e,160)}static uint168(e){return be(e,168)}static uint176(e){return be(e,176)}static uint184(e){return be(e,184)}static uint192(e){return be(e,192)}static uint200(e){return be(e,200)}static uint208(e){return be(e,208)}static uint216(e){return be(e,216)}static uint224(e){return be(e,224)}static uint232(e){return be(e,232)}static uint240(e){return be(e,240)}static uint248(e){return be(e,248)}static uint256(e){return be(e,256)}static uint(e){return be(e,256)}static int8(e){return be(e,-8)}static int16(e){return be(e,-16)}static int24(e){return be(e,-24)}static int32(e){return be(e,-32)}static int40(e){return be(e,-40)}static int48(e){return be(e,-48)}static int56(e){return be(e,-56)}static int64(e){return be(e,-64)}static int72(e){return be(e,-72)}static int80(e){return be(e,-80)}static int88(e){return be(e,-88)}static int96(e){return be(e,-96)}static int104(e){return be(e,-104)}static int112(e){return be(e,-112)}static int120(e){return be(e,-120)}static int128(e){return be(e,-128)}static int136(e){return be(e,-136)}static int144(e){return be(e,-144)}static int152(e){return be(e,-152)}static int160(e){return be(e,-160)}static int168(e){return be(e,-168)}static int176(e){return be(e,-176)}static int184(e){return be(e,-184)}static int192(e){return be(e,-192)}static int200(e){return be(e,-200)}static int208(e){return be(e,-208)}static int216(e){return be(e,-216)}static int224(e){return be(e,-224)}static int232(e){return be(e,-232)}static int240(e){return be(e,-240)}static int248(e){return be(e,-248)}static int256(e){return be(e,-256)}static int(e){return be(e,-256)}static bytes1(e){return Ve(e,1)}static bytes2(e){return Ve(e,2)}static bytes3(e){return Ve(e,3)}static bytes4(e){return Ve(e,4)}static bytes5(e){return Ve(e,5)}static bytes6(e){return Ve(e,6)}static bytes7(e){return Ve(e,7)}static bytes8(e){return Ve(e,8)}static bytes9(e){return Ve(e,9)}static bytes10(e){return Ve(e,10)}static bytes11(e){return Ve(e,11)}static bytes12(e){return Ve(e,12)}static bytes13(e){return Ve(e,13)}static bytes14(e){return Ve(e,14)}static bytes15(e){return Ve(e,15)}static bytes16(e){return Ve(e,16)}static bytes17(e){return Ve(e,17)}static bytes18(e){return Ve(e,18)}static bytes19(e){return Ve(e,19)}static bytes20(e){return Ve(e,20)}static bytes21(e){return Ve(e,21)}static bytes22(e){return Ve(e,22)}static bytes23(e){return Ve(e,23)}static bytes24(e){return Ve(e,24)}static bytes25(e){return Ve(e,25)}static bytes26(e){return Ve(e,26)}static bytes27(e){return Ve(e,27)}static bytes28(e){return Ve(e,28)}static bytes29(e){return Ve(e,29)}static bytes30(e){return Ve(e,30)}static bytes31(e){return Ve(e,31)}static bytes32(e){return Ve(e,32)}static address(e){return new Gi(Vi,"address",e)}static bool(e){return new Gi(Vi,"bool",!!e)}static bytes(e){return new Gi(Vi,"bytes",e)}static string(e){return new Gi(Vi,"string",e)}static array(e,n){throw new Error("not implemented yet")}static tuple(e,n){throw new Error("not implemented yet")}static overrides(e){return new Gi(Vi,"overrides",Object.assign({},e))}static isTyped(e){return e&&typeof e=="object"&&"_typedSymbol"in e&&e._typedSymbol===V2}static dereference(e,n){if(Gi.isTyped(e)){if(e.type!==n)throw new Error(`invalid type: expecetd ${n}, got ${e.type}`);return e.value}return e}};La=new WeakMap;let un=Gi;class nM extends Rs{constructor(e){super("address","address",e,!1)}defaultValue(){return"0x0000000000000000000000000000000000000000"}encode(e,n){let r=un.dereference(n,"string");try{r=Ze(r)}catch(i){return this._throwError(i.message,n)}return e.writeValue(r)}decode(e){return Ze(Ho(e.readValue(),20))}}class rM extends Rs{constructor(n){super(n.name,n.type,"_",n.dynamic);Y(this,"coder");this.coder=n}defaultValue(){return this.coder.defaultValue()}encode(n,r){return this.coder.encode(n,r)}decode(n){return this.coder.decode(n)}}function s3(t,e,n){let r=[];if(Array.isArray(n))r=n;else if(n&&typeof n=="object"){let l={};r=e.map(c=>{const u=c.localName;return de(u,"cannot encode object for signature with missing names","INVALID_ARGUMENT",{argument:"values",info:{coder:c},value:n}),de(!l[u],"cannot encode object for signature with duplicate names","INVALID_ARGUMENT",{argument:"values",info:{coder:c},value:n}),l[u]=!0,n[u]})}else G(!1,"invalid tuple value","tuple",n);G(e.length===r.length,"types/value length mismatch","tuple",n);let i=new Pv,s=new Pv,o=[];e.forEach((l,c)=>{let u=r[c];if(l.dynamic){let d=s.length;l.encode(s,u);let f=i.writeUpdatableValue();o.push(h=>{f(h+d)})}else l.encode(i,u)}),o.forEach(l=>{l(i.length)});let a=t.appendWriter(i);return a+=t.appendWriter(s),a}function o3(t,e){let n=[],r=[],i=t.subReader(0);return e.forEach(s=>{let o=null;if(s.dynamic){let a=t.readIndex(),l=i.subReader(a);try{o=s.decode(l)}catch(c){if(Vt(c,"BUFFER_OVERRUN"))throw c;o=c,o.baseType=s.name,o.name=s.localName,o.type=s.type}}else try{o=s.decode(t)}catch(a){if(Vt(a,"BUFFER_OVERRUN"))throw a;o=a,o.baseType=s.name,o.name=s.localName,o.type=s.type}if(o==null)throw new Error("investigate");n.push(o),r.push(s.localName||null)}),lu.fromItems(n,r)}class iM extends Rs{constructor(n,r,i){const s=n.type+"["+(r>=0?r:"")+"]",o=r===-1||n.dynamic;super("array",s,i,o);Y(this,"coder");Y(this,"length");_e(this,{coder:n,length:r})}defaultValue(){const n=this.coder.defaultValue(),r=[];for(let i=0;i<this.length;i++)r.push(n);return r}encode(n,r){const i=un.dereference(r,"array");Array.isArray(i)||this._throwError("expected array value",i);let s=this.length;s===-1&&(s=i.length,n.writeValue(i.length)),p_(i.length,s,"coder array"+(this.localName?" "+this.localName:""));let o=[];for(let a=0;a<i.length;a++)o.push(this.coder);return s3(n,o,i)}decode(n){let r=this.length;r===-1&&(r=n.readIndex(),de(r*bn<=n.dataLength,"insufficient data length","BUFFER_OVERRUN",{buffer:n.bytes,offset:r*bn,length:n.dataLength}));let i=[];for(let s=0;s<r;s++)i.push(new rM(this.coder));return o3(n,i)}}class sM extends Rs{constructor(e){super("bool","bool",e,!1)}defaultValue(){return!1}encode(e,n){const r=un.dereference(n,"bool");return e.writeValue(r?1:0)}decode(e){return!!e.readValue()}}class a3 extends Rs{constructor(e,n){super(e,e,n,!0)}defaultValue(){return"0x"}encode(e,n){n=wn(n);let r=e.writeValue(n.length);return r+=e.writeBytes(n),r}decode(e){return e.readBytes(e.readIndex(),!0)}}class oM extends a3{constructor(e){super("bytes",e)}decode(e){return ve(super.decode(e))}}class aM extends Rs{constructor(n,r){let i="bytes"+String(n);super(i,i,r,!1);Y(this,"size");_e(this,{size:n},{size:"number"})}defaultValue(){return"0x0000000000000000000000000000000000000000000000000000000000000000".substring(0,2+this.size*2)}encode(n,r){let i=wn(un.dereference(r,this.type));return i.length!==this.size&&this._throwError("incorrect data length",r),n.writeBytes(i)}decode(n){return ve(n.readBytes(this.size))}}const lM=new Uint8Array([]);class cM extends Rs{constructor(e){super("null","",e,!1)}defaultValue(){return null}encode(e,n){return n!=null&&this._throwError("not null",n),e.writeBytes(lM)}decode(e){return e.readBytes(0),null}}const uM=BigInt(0),dM=BigInt(1),fM=BigInt("0xffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffff");class hM extends Rs{constructor(n,r,i){const s=(r?"int":"uint")+n*8;super(s,s,i,!1);Y(this,"size");Y(this,"signed");_e(this,{size:n,signed:r},{size:"number",signed:"boolean"})}defaultValue(){return 0}encode(n,r){let i=Ae(un.dereference(r,this.type)),s=ya(fM,bn*8);if(this.signed){let o=ya(s,this.size*8-1);(i>o||i<-(o+dM))&&this._throwError("value out-of-bounds",r),i=y_(i,8*bn)}else(i<uM||i>ya(s,this.size*8))&&this._throwError("value out-of-bounds",r);return n.writeValue(i)}decode(n){let r=ya(n.readValue(),this.size*8);return this.signed&&(r=s0(r,this.size*8)),r}}class pM extends a3{constructor(e){super("string",e)}defaultValue(){return""}encode(e,n){return super.encode(e,ws(un.dereference(n,"string")))}decode(e){return o0(super.decode(e))}}class yh extends Rs{constructor(n,r){let i=!1;const s=[];n.forEach(a=>{a.dynamic&&(i=!0),s.push(a.type)});const o="tuple("+s.join(",")+")";super("tuple",o,r,i);Y(this,"coders");_e(this,{coders:Object.freeze(n.slice())})}defaultValue(){const n=[];this.coders.forEach(i=>{n.push(i.defaultValue())});const r=this.coders.reduce((i,s)=>{const o=s.localName;return o&&(i[o]||(i[o]=0),i[o]++),i},{});return this.coders.forEach((i,s)=>{let o=i.localName;!o||r[o]!==1||(o==="length"&&(o="_length"),n[o]==null&&(n[o]=n[s]))}),Object.freeze(n)}encode(n,r){const i=un.dereference(r,"tuple");return s3(n,this.coders,i)}decode(n){return o3(n,this.coders)}}function Cm(t,e){return{address:Ze(t),storageKeys:e.map((n,r)=>(G(it(n,32),"invalid slot",`storageKeys[${r}]`,n),n.toLowerCase()))}}function ul(t){if(Array.isArray(t))return t.map((n,r)=>Array.isArray(n)?(G(n.length===2,"invalid slot set",`value[${r}]`,n),Cm(n[0],n[1])):(G(n!=null&&typeof n=="object","invalid address-slot set","value",t),Cm(n.address,n.storageKeys)));G(t!=null&&typeof t=="object","invalid access list","value",t);const e=Object.keys(t).map(n=>{const r=t[n].reduce((i,s)=>(i[s]=!0,i),{});return Cm(n,Object.keys(r).sort())});return e.sort((n,r)=>n.address.localeCompare(r.address)),e}function l3(t){return{address:Ze(t.address),nonce:Ae(t.nonce!=null?t.nonce:0),chainId:Ae(t.chainId!=null?t.chainId:0),signature:jn.from(t.signature)}}function gM(t){let e;return typeof t=="string"?e=Vd.computePublicKey(t,!1):e=t.publicKey,Ze(Ct("0x"+e.substring(4)).substring(26))}function mM(t,e){return gM(Vd.recoverPublicKey(t,e))}const Lt=BigInt(0),yM=BigInt(2),vM=BigInt(27),wM=BigInt(28),bM=BigInt(35),EM=BigInt("0xffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffff"),km=4096*32;function AM(t){return{blobToKzgCommitment:r=>{if("computeBlobProof"in t){if("blobToKzgCommitment"in t&&typeof t.blobToKzgCommitment=="function")return Be(t.blobToKzgCommitment(ve(r)))}else if("blobToKzgCommitment"in t&&typeof t.blobToKzgCommitment=="function")return Be(t.blobToKzgCommitment(r));if("blobToKZGCommitment"in t&&typeof t.blobToKZGCommitment=="function")return Be(t.blobToKZGCommitment(ve(r)));G(!1,"unsupported KZG library","kzg",t)},computeBlobKzgProof:(r,i)=>{if("computeBlobProof"in t&&typeof t.computeBlobProof=="function")return Be(t.computeBlobProof(ve(r),ve(i)));if("computeBlobKzgProof"in t&&typeof t.computeBlobKzgProof=="function")return t.computeBlobKzgProof(r,i);if("computeBlobKZGProof"in t&&typeof t.computeBlobKZGProof=="function")return Be(t.computeBlobKZGProof(ve(r),ve(i)));G(!1,"unsupported KZG library","kzg",t)}}}function G2(t,e){let n=t.toString(16);for(;n.length<2;)n="0"+n;return n+=Su(e).substring(4),"0x"+n}function xu(t){return t==="0x"?null:Ze(t)}function Ag(t,e){try{return ul(t)}catch(n){G(!1,n.message,e,t)}}function SM(t,e){try{if(!Array.isArray(t))throw new Error("authorizationList: invalid array");const n=[];for(let r=0;r<t.length;r++){const i=t[r];if(!Array.isArray(i))throw new Error(`authorization[${r}]: invalid array`);if(i.length!==6)throw new Error(`authorization[${r}]: wrong length`);if(!i[1])throw new Error(`authorization[${r}]: null address`);n.push({address:xu(i[1]),nonce:tt(i[2],"nonce"),chainId:tt(i[0],"chainId"),signature:jn.from({yParity:dl(i[3],"yParity"),r:ks(i[4],32),s:ks(i[5],32)})})}return n}catch(n){G(!1,n.message,e,t)}}function dl(t,e){return t==="0x"?0:Oe(t,e)}function tt(t,e){if(t==="0x")return Lt;const n=Ae(t,e);return G(n<=EM,"value exceeds uint size",e,n),n}function je(t,e){const n=Ae(t,"value"),r=Pt(n);return G(r.length<=32,"value too large",`tx.${e}`,n),r}function Sg(t){return ul(t).map(e=>[e.address,e.storageKeys])}function xM(t){return t.map(e=>[je(e.chainId,"chainId"),e.address,je(e.nonce,"nonce"),je(e.signature.yParity,"yParity"),Pt(e.signature.r),Pt(e.signature.s)])}function CM(t,e){G(Array.isArray(t),`invalid ${e}`,"value",t);for(let n=0;n<t.length;n++)G(it(t[n],32),"invalid ${ param } hash",`value[${n}]`,t[n]);return t}function kM(t){const e=Mf(t);G(Array.isArray(e)&&(e.length===9||e.length===6),"invalid field count for legacy transaction","data",t);const n={type:0,nonce:dl(e[0],"nonce"),gasPrice:tt(e[1],"gasPrice"),gasLimit:tt(e[2],"gasLimit"),to:xu(e[3]),value:tt(e[4],"value"),data:ve(e[5]),chainId:Lt};if(e.length===6)return n;const r=tt(e[6],"v"),i=tt(e[7],"r"),s=tt(e[8],"s");if(i===Lt&&s===Lt)n.chainId=r;else{let o=(r-bM)/yM;o<Lt&&(o=Lt),n.chainId=o,G(o!==Lt||r===vM||r===wM,"non-canonical legacy v","v",e[6]),n.signature=jn.from({r:ks(e[7],32),s:ks(e[8],32),v:r})}return n}function _M(t,e){const n=[je(t.nonce,"nonce"),je(t.gasPrice||0,"gasPrice"),je(t.gasLimit,"gasLimit"),t.to||"0x",je(t.value,"value"),t.data];let r=Lt;if(t.chainId!=Lt)r=Ae(t.chainId,"tx.chainId"),G(!e||e.networkV==null||e.legacyChainId===r,"tx.chainId/sig.v mismatch","sig",e);else if(t.signature){const s=t.signature.legacyChainId;s!=null&&(r=s)}if(!e)return r!==Lt&&(n.push(Pt(r)),n.push("0x"),n.push("0x")),zo(n);let i=BigInt(27+e.yParity);return r!==Lt?i=jn.getChainIdV(r,e.v):BigInt(e.v)!==i&&G(!1,"tx.chainId/sig.v mismatch","sig",e),n.push(Pt(i)),n.push(Pt(e.r)),n.push(Pt(e.s)),zo(n)}function xg(t,e){let n;try{if(n=dl(e[0],"yParity"),n!==0&&n!==1)throw new Error("bad yParity")}catch{G(!1,"invalid yParity","yParity",e[0])}const r=ks(e[1],32),i=ks(e[2],32),s=jn.from({r,s:i,yParity:n});t.signature=s}function TM(t){const e=Mf(Be(t).slice(1));G(Array.isArray(e)&&(e.length===9||e.length===12),"invalid field count for transaction type: 2","data",ve(t));const n={type:2,chainId:tt(e[0],"chainId"),nonce:dl(e[1],"nonce"),maxPriorityFeePerGas:tt(e[2],"maxPriorityFeePerGas"),maxFeePerGas:tt(e[3],"maxFeePerGas"),gasPrice:null,gasLimit:tt(e[4],"gasLimit"),to:xu(e[5]),value:tt(e[6],"value"),data:ve(e[7]),accessList:Ag(e[8],"accessList")};return e.length===9||xg(n,e.slice(9)),n}function PM(t,e){const n=[je(t.chainId,"chainId"),je(t.nonce,"nonce"),je(t.maxPriorityFeePerGas||0,"maxPriorityFeePerGas"),je(t.maxFeePerGas||0,"maxFeePerGas"),je(t.gasLimit,"gasLimit"),t.to||"0x",je(t.value,"value"),t.data,Sg(t.accessList||[])];return e&&(n.push(je(e.yParity,"yParity")),n.push(Pt(e.r)),n.push(Pt(e.s))),vt(["0x02",zo(n)])}function RM(t){const e=Mf(Be(t).slice(1));G(Array.isArray(e)&&(e.length===8||e.length===11),"invalid field count for transaction type: 1","data",ve(t));const n={type:1,chainId:tt(e[0],"chainId"),nonce:dl(e[1],"nonce"),gasPrice:tt(e[2],"gasPrice"),gasLimit:tt(e[3],"gasLimit"),to:xu(e[4]),value:tt(e[5],"value"),data:ve(e[6]),accessList:Ag(e[7],"accessList")};return e.length===8||xg(n,e.slice(8)),n}function IM(t,e){const n=[je(t.chainId,"chainId"),je(t.nonce,"nonce"),je(t.gasPrice||0,"gasPrice"),je(t.gasLimit,"gasLimit"),t.to||"0x",je(t.value,"value"),t.data,Sg(t.accessList||[])];return e&&(n.push(je(e.yParity,"recoveryParam")),n.push(Pt(e.r)),n.push(Pt(e.s))),vt(["0x01",zo(n)])}function OM(t){let e=Mf(Be(t).slice(1)),n="3",r=null;if(e.length===4&&Array.isArray(e[0])){n="3 (network format)";const s=e[1],o=e[2],a=e[3];G(Array.isArray(s),"invalid network format: blobs not an array","fields[1]",s),G(Array.isArray(o),"invalid network format: commitments not an array","fields[2]",o),G(Array.isArray(a),"invalid network format: proofs not an array","fields[3]",a),G(s.length===o.length,"invalid network format: blobs/commitments length mismatch","fields",e),G(s.length===a.length,"invalid network format: blobs/proofs length mismatch","fields",e),r=[];for(let l=0;l<e[1].length;l++)r.push({data:s[l],commitment:o[l],proof:a[l]});e=e[0]}G(Array.isArray(e)&&(e.length===11||e.length===14),`invalid field count for transaction type: ${n}`,"data",ve(t));const i={type:3,chainId:tt(e[0],"chainId"),nonce:dl(e[1],"nonce"),maxPriorityFeePerGas:tt(e[2],"maxPriorityFeePerGas"),maxFeePerGas:tt(e[3],"maxFeePerGas"),gasPrice:null,gasLimit:tt(e[4],"gasLimit"),to:xu(e[5]),value:tt(e[6],"value"),data:ve(e[7]),accessList:Ag(e[8],"accessList"),maxFeePerBlobGas:tt(e[9],"maxFeePerBlobGas"),blobVersionedHashes:e[10]};r&&(i.blobs=r),G(i.to!=null,`invalid address for transaction type: ${n}`,"data",t),G(Array.isArray(i.blobVersionedHashes),"invalid blobVersionedHashes: must be an array","data",t);for(let s=0;s<i.blobVersionedHashes.length;s++)G(it(i.blobVersionedHashes[s],32),`invalid blobVersionedHash at index ${s}: must be length 32`,"data",t);return e.length===11||xg(i,e.slice(11)),i}function NM(t,e,n){const r=[je(t.chainId,"chainId"),je(t.nonce,"nonce"),je(t.maxPriorityFeePerGas||0,"maxPriorityFeePerGas"),je(t.maxFeePerGas||0,"maxFeePerGas"),je(t.gasLimit,"gasLimit"),t.to||zd,je(t.value,"value"),t.data,Sg(t.accessList||[]),je(t.maxFeePerBlobGas||0,"maxFeePerBlobGas"),CM(t.blobVersionedHashes||[],"blobVersionedHashes")];return e&&(r.push(je(e.yParity,"yParity")),r.push(Pt(e.r)),r.push(Pt(e.s)),n)?vt(["0x03",zo([r,n.map(i=>i.data),n.map(i=>i.commitment),n.map(i=>i.proof)])]):vt(["0x03",zo(r)])}function MM(t){const e=Mf(Be(t).slice(1));G(Array.isArray(e)&&(e.length===10||e.length===13),"invalid field count for transaction type: 4","data",ve(t));const n={type:4,chainId:tt(e[0],"chainId"),nonce:dl(e[1],"nonce"),maxPriorityFeePerGas:tt(e[2],"maxPriorityFeePerGas"),maxFeePerGas:tt(e[3],"maxFeePerGas"),gasPrice:null,gasLimit:tt(e[4],"gasLimit"),to:xu(e[5]),value:tt(e[6],"value"),data:ve(e[7]),accessList:Ag(e[8],"accessList"),authorizationList:SM(e[9],"authorizationList")};return e.length===10||xg(n,e.slice(10)),n}function LM(t,e){const n=[je(t.chainId,"chainId"),je(t.nonce,"nonce"),je(t.maxPriorityFeePerGas||0,"maxPriorityFeePerGas"),je(t.maxFeePerGas||0,"maxFeePerGas"),je(t.gasLimit,"gasLimit"),t.to||"0x",je(t.value,"value"),t.data,Sg(t.accessList||[]),xM(t.authorizationList||[])];return e&&(n.push(je(e.yParity,"yParity")),n.push(Pt(e.r)),n.push(Pt(e.s))),vt(["0x04",zo(n)])}var Kr,Cc,kc,_c,Tc,Pc,Rc,Ic,Oc,Nc,Mc,Lc,Ba,co,gi,uo,Bc,Dc,op;const fi=class fi{constructor(){ee(this,Dc);ee(this,Kr);ee(this,Cc);ee(this,kc);ee(this,_c);ee(this,Tc);ee(this,Pc);ee(this,Rc);ee(this,Ic);ee(this,Oc);ee(this,Nc);ee(this,Mc);ee(this,Lc);ee(this,Ba);ee(this,co);ee(this,gi);ee(this,uo);ee(this,Bc);H(this,Kr,null),H(this,Cc,null),H(this,_c,0),H(this,Tc,Lt),H(this,Pc,null),H(this,Rc,null),H(this,Ic,null),H(this,kc,"0x"),H(this,Oc,Lt),H(this,Nc,Lt),H(this,Mc,null),H(this,Lc,null),H(this,Ba,null),H(this,co,null),H(this,gi,null),H(this,uo,null),H(this,Bc,null)}get type(){return _(this,Kr)}set type(e){switch(e){case null:H(this,Kr,null);break;case 0:case"legacy":H(this,Kr,0);break;case 1:case"berlin":case"eip-2930":H(this,Kr,1);break;case 2:case"london":case"eip-1559":H(this,Kr,2);break;case 3:case"cancun":case"eip-4844":H(this,Kr,3);break;case 4:case"pectra":case"eip-7702":H(this,Kr,4);break;default:G(!1,"unsupported transaction type","type",e)}}get typeName(){switch(this.type){case 0:return"legacy";case 1:return"eip-2930";case 2:return"eip-1559";case 3:return"eip-4844";case 4:return"eip-7702"}return null}get to(){const e=_(this,Cc);return e==null&&this.type===3?zd:e}set to(e){H(this,Cc,e==null?null:Ze(e))}get nonce(){return _(this,_c)}set nonce(e){H(this,_c,Oe(e,"value"))}get gasLimit(){return _(this,Tc)}set gasLimit(e){H(this,Tc,Ae(e))}get gasPrice(){const e=_(this,Pc);return e==null&&(this.type===0||this.type===1)?Lt:e}set gasPrice(e){H(this,Pc,e==null?null:Ae(e,"gasPrice"))}get maxPriorityFeePerGas(){const e=_(this,Rc);return e??(this.type===2||this.type===3?Lt:null)}set maxPriorityFeePerGas(e){H(this,Rc,e==null?null:Ae(e,"maxPriorityFeePerGas"))}get maxFeePerGas(){const e=_(this,Ic);return e??(this.type===2||this.type===3?Lt:null)}set maxFeePerGas(e){H(this,Ic,e==null?null:Ae(e,"maxFeePerGas"))}get data(){return _(this,kc)}set data(e){H(this,kc,ve(e))}get value(){return _(this,Oc)}set value(e){H(this,Oc,Ae(e,"value"))}get chainId(){return _(this,Nc)}set chainId(e){H(this,Nc,Ae(e))}get signature(){return _(this,Mc)||null}set signature(e){H(this,Mc,e==null?null:jn.from(e))}get accessList(){const e=_(this,Lc)||null;return e??(this.type===1||this.type===2||this.type===3?[]:null)}set accessList(e){H(this,Lc,e==null?null:ul(e))}get authorizationList(){const e=_(this,Bc)||null;return e==null&&this.type===4?[]:e}set authorizationList(e){H(this,Bc,e==null?null:e.map(n=>l3(n)))}get maxFeePerBlobGas(){const e=_(this,Ba);return e==null&&this.type===3?Lt:e}set maxFeePerBlobGas(e){H(this,Ba,e==null?null:Ae(e,"maxFeePerBlobGas"))}get blobVersionedHashes(){let e=_(this,co);return e==null&&this.type===3?[]:e}set blobVersionedHashes(e){if(e!=null){G(Array.isArray(e),"blobVersionedHashes must be an Array","value",e),e=e.slice();for(let n=0;n<e.length;n++)G(it(e[n],32),"invalid blobVersionedHash",`value[${n}]`,e[n])}H(this,co,e)}get blobs(){return _(this,uo)==null?null:_(this,uo).map(e=>Object.assign({},e))}set blobs(e){if(e==null){H(this,uo,null);return}const n=[],r=[];for(let i=0;i<e.length;i++){const s=e[i];if(K1(s)){de(_(this,gi),"adding a raw blob requires a KZG library","UNSUPPORTED_OPERATION",{operation:"set blobs()"});let o=Be(s);if(G(o.length<=km,"blob is too large",`blobs[${i}]`,s),o.length!==km){const c=new Uint8Array(km);c.set(o),o=c}const a=_(this,gi).blobToKzgCommitment(o),l=ve(_(this,gi).computeBlobKzgProof(o,a));n.push({data:ve(o),commitment:ve(a),proof:l}),r.push(G2(1,a))}else{const o=ve(s.commitment);n.push({data:ve(s.data),commitment:o,proof:ve(s.proof)}),r.push(G2(1,o))}}H(this,uo,n),H(this,co,r)}get kzg(){return _(this,gi)}set kzg(e){e==null?H(this,gi,null):H(this,gi,AM(e))}get hash(){return this.signature==null?null:Ct(ge(this,Dc,op).call(this,!0,!1))}get unsignedHash(){return Ct(this.unsignedSerialized)}get from(){return this.signature==null?null:mM(this.unsignedHash,this.signature)}get fromPublicKey(){return this.signature==null?null:Vd.recoverPublicKey(this.unsignedHash,this.signature)}isSigned(){return this.signature!=null}get serialized(){return ge(this,Dc,op).call(this,!0,!0)}get unsignedSerialized(){return ge(this,Dc,op).call(this,!1,!1)}inferType(){const e=this.inferTypes();return e.indexOf(2)>=0?2:e.pop()}inferTypes(){const e=this.gasPrice!=null,n=this.maxFeePerGas!=null||this.maxPriorityFeePerGas!=null,r=this.accessList!=null,i=_(this,Ba)!=null||_(this,co);this.maxFeePerGas!=null&&this.maxPriorityFeePerGas!=null&&de(this.maxFeePerGas>=this.maxPriorityFeePerGas,"priorityFee cannot be more than maxFee","BAD_DATA",{value:this}),de(!n||this.type!==0&&this.type!==1,"transaction type cannot have maxFeePerGas or maxPriorityFeePerGas","BAD_DATA",{value:this}),de(this.type!==0||!r,"legacy transaction cannot have accessList","BAD_DATA",{value:this});const s=[];return this.type!=null?s.push(this.type):this.authorizationList&&this.authorizationList.length?s.push(4):n?s.push(2):e?(s.push(1),r||s.push(0)):r?(s.push(1),s.push(2)):(i&&this.to||(s.push(0),s.push(1),s.push(2)),s.push(3)),s.sort(),s}isLegacy(){return this.type===0}isBerlin(){return this.type===1}isLondon(){return this.type===2}isCancun(){return this.type===3}clone(){return fi.from(this)}toJSON(){const e=n=>n==null?null:n.toString();return{type:this.type,to:this.to,data:this.data,nonce:this.nonce,gasLimit:e(this.gasLimit),gasPrice:e(this.gasPrice),maxPriorityFeePerGas:e(this.maxPriorityFeePerGas),maxFeePerGas:e(this.maxFeePerGas),value:e(this.value),chainId:e(this.chainId),sig:this.signature?this.signature.toJSON():null,accessList:this.accessList}}static from(e){if(e==null)return new fi;if(typeof e=="string"){const r=Be(e);if(r[0]>=127)return fi.from(kM(r));switch(r[0]){case 1:return fi.from(RM(r));case 2:return fi.from(TM(r));case 3:return fi.from(OM(r));case 4:return fi.from(MM(r))}de(!1,"unsupported transaction type","UNSUPPORTED_OPERATION",{operation:"from"})}const n=new fi;return e.type!=null&&(n.type=e.type),e.to!=null&&(n.to=e.to),e.nonce!=null&&(n.nonce=e.nonce),e.gasLimit!=null&&(n.gasLimit=e.gasLimit),e.gasPrice!=null&&(n.gasPrice=e.gasPrice),e.maxPriorityFeePerGas!=null&&(n.maxPriorityFeePerGas=e.maxPriorityFeePerGas),e.maxFeePerGas!=null&&(n.maxFeePerGas=e.maxFeePerGas),e.maxFeePerBlobGas!=null&&(n.maxFeePerBlobGas=e.maxFeePerBlobGas),e.data!=null&&(n.data=e.data),e.value!=null&&(n.value=e.value),e.chainId!=null&&(n.chainId=e.chainId),e.signature!=null&&(n.signature=jn.from(e.signature)),e.accessList!=null&&(n.accessList=e.accessList),e.authorizationList!=null&&(n.authorizationList=e.authorizationList),e.blobVersionedHashes!=null&&(n.blobVersionedHashes=e.blobVersionedHashes),e.kzg!=null&&(n.kzg=e.kzg),e.blobs!=null&&(n.blobs=e.blobs),e.hash!=null&&(G(n.isSigned(),"unsigned transaction cannot define '.hash'","tx",e),G(n.hash===e.hash,"hash mismatch","tx",e)),e.from!=null&&(G(n.isSigned(),"unsigned transaction cannot define '.from'","tx",e),G(n.from.toLowerCase()===(e.from||"").toLowerCase(),"from mismatch","tx",e)),n}};Kr=new WeakMap,Cc=new WeakMap,kc=new WeakMap,_c=new WeakMap,Tc=new WeakMap,Pc=new WeakMap,Rc=new WeakMap,Ic=new WeakMap,Oc=new WeakMap,Nc=new WeakMap,Mc=new WeakMap,Lc=new WeakMap,Ba=new WeakMap,co=new WeakMap,gi=new WeakMap,uo=new WeakMap,Bc=new WeakMap,Dc=new WeakSet,op=function(e,n){de(!e||this.signature!=null,"cannot serialize unsigned transaction; maybe you meant .unsignedSerialized","UNSUPPORTED_OPERATION",{operation:".serialized"});const r=e?this.signature:null;switch(this.inferType()){case 0:return _M(this,r);case 1:return IM(this,r);case 2:return PM(this,r);case 3:return NM(this,r,n?this.blobs:null);case 4:return LM(this,r)}de(!1,"unsupported transaction type","UNSUPPORTED_OPERATION",{operation:".serialized"})};let c0=fi;function tl(t){return Ct(ws(t))}var BM="AEEUdwmgDS8BxQKKAP4BOgDjATAAngDUAIMAoABoAOAAagCOAEQAhABMAHIAOwA9ACsANgAmAGIAHgAuACgAJwAXAC0AGgAjAB8ALwAUACkAEgAeAAkAGwARABkAFgA5ACgALQArADcAFQApABAAHgAiABAAGgAeABMAGAUhBe8BFxREN8sF2wC5AK5HAW8ArQkDzQCuhzc3NzcBP68NEfMABQdHBuw5BV8FYAA9MzkI9r4ZBg7QyQAWA9CeOwLNCjcCjqkChuA/lm+RAsXTAoP6ASfnEQDytQFJAjWVCkeXAOsA6godAB/cwdAUE0WlBCN/AQUCQRjFD/MRBjHxDQSJbw0jBzUAswBxme+tnIcAYwabAysG8QAjAEMMmxcDqgPKQyDXCMMxA7kUQwD3NXOrAKmFIAAfBC0D3x4BJQDBGdUFAhEgVD8JnwmQJiNWYUzrg0oAGwAUAB0AFnNcACkAFgBP9h3gPfsDOWDKneY2ChglX1UDYD30ABsAFAAdABZzIGRAnwDD8wAjAEEMzRbDqgMB2sAFYwXqAtCnAsS4AwpUJKRtFHsadUz9AMMVbwLpABM1NJEX0ZkCgYMBEyMAxRVvAukAEzUBUFAtmUwSAy4DBTER33EftQHfSwB5MxJ/AjkWKQLzL8E/cwBB6QH9LQDPDtO9ASNriQC5DQANAwCK21EFI91zHwCoL9kBqQcHBwcHKzUDowBvAQohPvU3fAQgHwCyAc8CKQMA5zMSezr7ULgFmDp/LzVQBgEGAi8FYQVgt8AFcTtlQhpCWEmfe5tmZ6IAExsDzQ8t+X8rBKtTAltbAn0jsy8Bl6utPWMDTR8Ei2kRANkDBrNHNysDBzECQWUAcwFpJ3kAiyUhAJ0BUb8AL3EfAbfNAz81KUsFWwF3YQZtAm0A+VEfAzEJDQBRSQCzAQBlAHsAM70GD/v3IZWHBwARKQAxALsjTwHZAeMPEzmXgIHwABIAGQA8AEUAQDt3gdvIEGcQZAkGTRFMdEIVEwK0D64L7REdDNkq09PgADSxB/MDWwfzA1sDWwfzB/MDWwfzA1sDWwNbA1scEvAi28gQZw9QBHUFlgWTBN4IiyZREYkHMAjaVBV0JhxPA00BBCMtSSQ7mzMTJUpMFE0LCAQ2SmyvfUADTzGzVP2QqgPTMlc5dAkGHnkSqAAyD3skNb1OhnpPcagKU0+2tYdJak5vAsY6sEAACikJm2/Dd1YGRRAfJ6kQ+ww3AbkBPw3xS9wE9QY/BM0fgRkdD9GVoAipLeEM8SbnLqWAXiP5KocF8Uv4POELUVFsD10LaQnnOmeBUgMlAREijwrhDT0IcRD3Cs1vDekRSQc9A9lJngCpBwULFR05FbkmFGKwCw05ewb/GvoLkyazEy17AAXXGiUGUQEtGwMA0y7rhbRaNVwgT2MGBwspI8sUrFAkDSlAu3hMGh8HGSWtApVDdEqLUToelyH6PEENai4XUYAH+TwJGVMLhTyiRq9FEhHWPpE9TCJNTDAEOYMsMyePCdMPiQy9fHYBXQklCbUMdRM1ERs3yQg9Bx0xlygnGQglRplgngT7owP3E9UDDwVDCUUHFwO5HDETMhUtBRGBKNsC9zbZLrcCk1aEARsFzw8pH+MQVEfkDu0InwJpA4cl7wAxFSUAGyKfCEdnAGOP3FMJLs8Iy2pwI3gDaxTrZRF3B5UOWwerHDcVwxzlcMxeD4YMKKezCV8BeQmdAWME5wgNNV+MpCBFZ1eLXBifIGVBQ14AAjUMaRWjRMGHfAKPD28SHwE5AXcHPQ0FAnsR8RFvEJkI74YINbkz/DopBFMhhyAVCisDU2zSCysm/Qz8bQGnEmYDEDRBd/Jnr2C6KBgBBx0yyUFkIfULlk/RDKAaxRhGVDIZ6AfDA/ca9yfuQVsGAwOnBxc6UTPyBMELbQiPCUMATQ6nGwfbGG4KdYzUATWPAbudA1uVhwJzkwY7Bw8Aaw+LBX3pACECqwinAAkA0wNbAD0CsQehAB0AiUUBQQMrMwEl6QKTA5cINc8BmTMB9y0EH8cMGQD7O25OAsO1AoBuZqYF4VwCkgJNOQFRKQQJUktVA7N15QDfAE8GF+NLARmvTs8e50cB43MvAMsA/wAJOQcJRQHRAfdxALsBYws1Caa3uQFR7S0AhwAZbwHbAo0A4QA5AIP1AVcAUQVd/QXXAlNNARU1HC9bZQG/AyMBNwERAH0Gz5GpzQsjBHEH1wIQHxXlAu8yB7kFAyLjE9FCyQK94lkAMhoKPAqrCqpgX2Q3CjV2PVQAEh+sPss/UgVVO1c7XDtXO1w7VztcO1c7XDtXO1wDm8Pmw+YKcF9JYe8Mqg3YRMw6TRPfYFVgNhPMLbsUxRXSJVoZQRrAJwkl6FUNDwgt12Y0CDA0eRfAAEMpbINFY4oeNApPHOtTlVT8LR8AtUumM7MNsBsZREQFS3XxYi4WEgomAmSFAmJGX1GzAV83JAKh+wJonAJmDQKfiDgfDwJmPwJmKgRyBIMDfxcDfpY5Cjl7GzmGOicnAmwhAjI6OA4CbcsCbbLzjgM3a0kvAWsA4gDlAE4JB5wMkQECD8YAEbkCdzMCdqZDAnlPRwJ4viFg30WyRvcCfEMCeswCfQ0CfPRIBEiBZygALxlJXEpfGRtK0ALRBQLQ0EsrA4hTA4fqRMmRNgLypV0HAwOyS9JMMSkH001QTbMCi0MCitzFHwshR2sJuwKOOwKOYESbhQKO3QKOYHxRuFM5AQ5S2FSJApP/ApMQAO0AIFUiVbNV1AosHymZijLleGpFPz0Cl6MC77ZYJawAXSkClpMCloCgAK1ZsFoNhVEAPwKWuQKWUlxIXNUCmc8CmWhczl0LHQKcnznGOqECnBoCn58CnryOACETNS4TAp31Ap6WALlBYThh8wKe1wKgcgGtAp6jIwKeUqljzGQrKS8CJ7MCJoICoP8CoFDbAqYzAqXSAqgDAIECp/ZogGi1AAdNaiBq1QKs5wKssgKtawKtBgJXIQJV4AKx5dsDH1JsmwKywRECsuwbbORtZ21MYwMl0QK2YD9DbpQDKUkCuGICuUsZArkue3A6cOUCvR0DLbYDMhUCvoxyBgMzdQK+HnMmc1MCw88CwwhzhnRPOUl05AM8qwEDPJ4DPcMCxYACxksCxhSNAshtVQLISALJUwLJMgJkoQLd1nh9ZXiyeSlL1AMYp2cGAmH4GfeVKHsPXpZevxUCz28Cz3AzT1fW9xejAMqxAs93AS3uA04Wfk8JAtwrAtuOAtJTA1JgA1NjAQUDVZCAjUMEzxrxZEl5A4LSg5EC2ssC2eKEFIRNp0ADhqkAMwNkEoZ1Xf0AWQLfaQLevHd7AuIz7RgB8zQrAfSfAfLWiwLr9wLpdH0DAur9AuroAP1LAb0C7o0C66CWrpcHAu5DA4XkmH1w5HGlAvMHAG0DjhqZlwL3FwORcgOSiwL3nAL53QL4apogmq+/O5siA52HAv7+AR8APZ8gAZ+3AwWRA6ZuA6bdANXJAwZuoYyiCQ0DDE0BEwEjB3EGZb1rCQC/BG/DFY8etxEAG3k9ACcDNxJRA42DAWcrJQCM8wAlAOanC6OVCLsGI6fJBgCvBRnDBvElRUYFFoAFcD9GSDNCKUK8X3kZX8QAls0FOgCQVCGbwTsuYDoZutcONxjOGJHJ/gVfBWAFXwVgBWsFYAVfBWAFXwVgBV8FYAVfBWBOHQjfjW8KCgoKbF7xMwTRA7kGN8PDAMMEr8MA70gxFroFTj5xPnhCR0K+X30/X/AAWBkzswCNBsxzzASm70aCRS4rDDMeLz49fnXfcsH5GcoscQFz13Y4HwVnBXLJycnACNdRYwgICAqEXoWTxgA7P4kACxbZBu21Kw0AjMsTAwkVAOVtJUUsJ1JCuULESUArXy9gPi9AKwnJRQYKTD9LPoA+iT54PnkCkULEUUpDX9NWV3JVEjQAc1w3A3IBE3YnX+g7QiMJb6MKaiszRCUuQrNCxDPMCcwEX9EWJzYREBEEBwIHKn6l33JCNVIfybPJtAltydPUCmhBZw/tEKsZAJOVJU1CLRuxbUHOQAo7P0s+eEJHHA8SJVRPdGM0NVrpvBoKhfUlM0JHHGUQUhEWO1xLSj8MO0ucNAqJIzVCRxv9EFsqKyA4OQgNj2nwZgp5ZNFgE2A1K3YHS2AhQQojJmC7DgpzGG1WYFUZCQYHZO9gHWCdYIVgu2BTYJlwFh8GvRbcXbG8YgtDHrMBwzPVyQonHQgkCyYBgQJ0Ajc4nVqIAwGSCsBPIgDsK3SWEtIVBa5N8gGjAo+kVwVIZwD/AEUSCDweX4ITrRQsJ8K3TwBXFDwEAB0TvzVcAtoTS20RIwDgVgZ9BBImYgA5AL4Coi8LFnezOkCnIQFjAY4KBAPh9RcGsgZSBsEAJctdsWIRu2kTkQstRw7DAcMBKgpPBGIGMDAwKCYnKTQaLg4AKRSVAFwCdl+YUZ0JdicFD3lPAdt1F9ZZKCGxuE3yBxkFVGcA/wBFEgiCBwAOLHQSjxOtQDg1z7deFRMAZ8QTAGtKb1ApIiPHADkAvgKiLy1DFtYCmBiDAlDDWNB0eo7fpaMO/aEVRRv0ATEQZBIODyMEAc8JQhCbDRgzFD4TAEMAu9YBCgCsAOkAm5I3ABwAYxvONnR+MhXJAxgKQyxL2+kkJhMbhQKDBMkSsvF0AD9BNQ6uQC7WqSQHwxEAEEIu1hkhAH2z4iQPwyJPHNWpdyYBRSpnJALzoBAEVPPsH20MxA0CCEQKRgAFyAtFAlMNwwjEDUQJRArELtapMg7DDZgJIw+TGukEIwvDFkMAqAtDEMMMBhioe+QAO3MMRAACrgnEBSPY9Q0FDnbSBoMAB8MSYxkSxAEJAPIJAAB8FWMOFtMc/HcXwxhDAC7DAvOowwAewwJdKDKHAAHDAALrFUQVwwAbwyvzpWMWv8wA/ABpAy++bcYDUKPD0KhDCwKmJ1MAAmMA5+UZwxAagwipBRL/eADfw6fDGOMCGsOjk3l6BwOpo4sAEsMOGxMAA5sAbcMOAAvDp0MJGkMDwgipnNIPAwfIqUMGAOGDAAPzABXDAAcDAAnDAGmTABrDAA7DChjDjnEWAwABYwAOcwAuUyYABsMAF8MIKQANUgC6wy4AA8MADqMq8wCyYgAcIwAB8wqpAAXOCx0V4wAHowBCwwEKAGnDAAuDAB3DAAjDCakABdIAbqcZ3QCZCCkABdIAAAFDAAfjAB2jCCkABqIACYMAGzMAbSMA5sOIAAhjAAhDABTDBAkpAAbSAOOTAAlDC6kOzPtnAAdDAG6kQFAATwAKwwwAA0MACbUDPwAHIwAZgwACE6cDAAojAApDAAoDp/MGwwAJIwADEwAQQwgAFEMAEXMAD5MADfMADcMAGRMOFiMAFUMAbqMWuwHDAMIAE0MLAGkzEgDhUwACQwAEWgAXgwUjAAbYABjDBSYBgzBaAEFNALcQBxUMegAwMngBrA0IZgJ0KxQHBREPd1N0ZzKRJwaIHAZqNT4DqQq8BwngAB4DAwt2AX56T1ocKQNXAh1GATQGC3tOxYNagkgAMQA5CQADAQEAWxLjAIOYNAEzAH7tFRk6TglSAF8NAAlYAQ+S1ACAQwQorQBiAN4dAJ1wPyeTANVzuQDX3AIeEMp9eyMgXiUAEdkBkJizKltbVVAaRMqRAAEAhyQ/SDEz6BmfVwB6ATEsOClKIRcDOF0E/832AFNt5AByAnkCRxGCOs94NjXdAwINGBonDBwPALW2AwICAgAAAAAAAAYDBQMDARrUAwAtAAAAAgEGBgYGBgYFBQUFBQUEBQYHCAkEBQUFBQQAAAICAAAAIgCNAJAAlT0A6gC7ANwApEQAwgCyAK0AqADuAKYA2gCjAOcBCAEDAMcAgQBiANIA1AEDAN4A8gCQAKkBMQDqAN8A3AsBCQ8yO9ra2tq8xuLT1tRJOB0BUgFcNU0BWgFpAWgBWwFMUUlLbhMBUxsNEAs6PhMOACcUKy0vMj5AQENDQ0RFFEYGJFdXV1dZWVhZL1pbXVxcI2NnZ2ZoZypsbnZ1eHh4eHh4enp6enp6enp6enp8fH18e2IARPIASQCaAHgAMgBm+ACOAFcAVwA3AnbvAIsABfj4AGQAk/IAnwBPAGIAZP//sACFAIUAaQBWALEAJAC2AIMCQAJDAPwA5wD+AP4A6AD/AOkA6QDoAOYALwJ7AVEBQAE+AVQBPgE+AT4BOQE4ATgBOAEcAVgXADEQCAEAUx8SHgsdHhYAjgCWAKYAUQBqIAIxAHYAbwCXAxUDJzIDIUlGTzEAkQJPAMcCVwKkAMAClgKWApYClgKWApYCiwKWApYClgKWApYClgKVApUCmAKgApcClgKWApQClAKUApQCkgKVAnUB1AKXAp8ClgKWApUeAIETBQD+DQOfAmECOh8BVBg9AuIZEjMbAU4/G1WZAXusRAFpYQEFA0FPAQYAmTEeIJdyADFoAHEANgCRA5zMk/C2jGINwjMWygIZCaXdfDILBCs5dAE7YnQBugDlhoiHhoiGiYqKhouOjIaNkI6Ij4qQipGGkoaThpSSlYaWhpeKmIaZhpqGm4aci52QnoqfhuIC4XTpAt90AIp0LHSoAIsAdHQEQwRABEIERQRDBEkERgRBBEcESQRIBEQERgRJAJ5udACrA490ALxuAQ10ANFZdHQA13QCFHQA/mJ0AP4BIQD+APwA/AD9APwDhGZ03ASMK23HAP4A/AD8AP0A/CR0dACRYnQA/gCRASEA/gCRAvQA/gCRA4RmdNwEjCttxyR0AP9idAEhAP4A/gD8APwA/QD8AP8A/AD8AP0A/AOEZnTcBIwrbcckdHQAkWJ0ASEA/gCRAP4AkQL0AP4AkQOEZnTcBIwrbcckdAJLAT50AlIBQXQCU8l0dAJfdHQDpgL0A6YDpgOnA6cDpwOnA4RmdNwEjCttxyR0dACRYnQBIQOmAJEDpgCRAvQDpgCRA4RmdNwEjCttxyR0BDh0AJEEOQCRDpU5dSgCADR03gV2CwArdAEFAM5iCnR0AF1iAAYcOgp0dACRCnQAXAEIwWZ0CnRmdHQAkWZ0CnRmdEXgAFF03gp0dEY0tlT2u3SOAQTwscwhjZZKrhYcBSfFp9XNbKiVDOD2b+cpe4/Z17mQnbtzzhaeQtE2GGj0IDNTjRUSyTxxw/RPHW/+vS7d1NfRt9z9QPZg4X7QFfhCnkvgNPIItOsC2eV6hPannZNHlZ9xrwZXIMOlu3jSoQSq78WEjwLjw1ELSlF1aBvfzwk5ZX7AUvQzjPQKbDuQ+sm4wNOp4A6AdVuRS0t1y/DZpg4R6m7FNjM9HgvW7Bi88zaMjOo6lM8wtBBdj8LP4ylv3zCXPhebMKJc066o9sF71oFW/8JXu86HJbwDID5lzw5GWLR/LhT0Qqnp2JQxNZNfcbLIzPy+YypqRm/lBmGmex+82+PisxUumSeJkALIT6rJezxMH+CTJmQtt5uwTVbL3ptmjDUQzlSIvWi8Tl7ng1NpuRn1Ng4n14Qc+3Iil7OwkvNWogLSPkn3pihIFytyIGmMhOe3n1tWsuMy9BdKyqF4Z3v2SgggTL9KVvMXPnCbRe+oOuFFP3HejBG/w9gvmfNYvg6JuWia2lcSSN1uIjBktzoIazOHPJZ7kKHPz8mRWVdW3lA8WGF9dQF6Bm673boov3BUWDU2JNcahR23GtfHKLOz/viZ+rYnZFaIznXO67CYEJ1fXuTRpZhYZkKe54xeoagkNGLs+NTZHE0rX45/XvQ2RGADX6vcAvdxIUBV27wxGm2zjZo4X3ILgAlrOFheuZ6wtsvaIj4yLY7qqawlliaIcrz2G+c3vscAnCkCuMzMmZvMfu9lLwTvfX+3cVSyPdN9ZwgDZhfjRgNJcLiJ67b9xx8JHswprbiE3v9UphotAPIgnXVIN5KmMc0piXhc6cChPnN+MRhG9adtdttQTTwSIpl8I4/j//d3sz1326qTBTpPRM/Hgh3kzqEXs8ZAk4ErQhNO8hzrQ0DLkWMA/N+91tn2MdOJnWC2FCZehkQrwzwbKOjhvZsbM95QoeL9skYyMf4srVPVJSgg7pOLUtr/n9eT99oe9nLtFRpjA9okV2Kj8h9k5HaC0oivRD8VyXkJ81tcd4fHNXPCfloIQasxsuO18/46dR2jgul/UIet2G0kRvnyONMKhHs6J26FEoqSqd+rfYjeEGwHWVDpX1fh1jBBcKGMqRepju9Y00mDVHC+Xdij/j44rKfvfjGinNs1jO/0F3jB83XCDINN/HB84axlP+3E/klktRo+vl3U/aiyMJbIodE1XSsDn6UAzIoMtUObY2+k/4gY/l+AkZJ5Sj2vQrkyLm3FoxjhDX+31UXBFf9XrAH31fFqoBmDEZvhvvpnZ87N+oZEu7U9O/nnk+QWj3x8uyoRbEnf+O5UMr9i0nHP38IF5AvzrBW8YWBUR0mIAzIvndQq9N3v/Jto3aPjPXUPl8ASdPPyAp7jENf8bk7VMM9ol9XGmlBmeDMuGqt+WzuL6CXAxXjIhCPM5vACchgMJ/8XBGLO/D1isVvGhwwHHr1DLaI5mn2Jr/b1pUD90uciDaS8cXNDzCWvNmT/PhQe5e8nTnnnkt8Ds/SIjibcum/fqDhKopxAY8AkSrPn+IGDEKOO+U3XOP6djFs2H5N9+orhOahiQk5KnEUWa+CzkVzhp8bMHRbg81qhjjXuIKbHjSLSIBKWqockGtKinY+z4/RdBUF6pcc3JmnlxVcNgrI4SEzKUZSwcD2QCyxzKve+gAmg6ZuSRkpPFa6mfThu7LJNu3H5K42uCpNvPAsoedolKV/LHe/eJ+BbaG5MG0NaSGVPRUmNFMFFSSpXEcXwbVh7UETOZZtoVNRGOIbbkig3McEtR68cG0RZAoJevWYo7Dg/lZ1CQzblWeUvVHmr8fY4Nqd9JJiH/zEX24mJviH60fAyFr0A3c4bC1j3yZU60VgJxXn8JgJXLUIsiBnmKmMYz+7yBQFBvqb2eYnuW59joZBf56/wXvWIR4R8wTmV80i1mZy+S4+BUES+hzjk0uXpC///z/IlqHZ1monzlXp8aCfhGKMti73FI1KbL1q6IKO4fuBuZ59gagjn5xU79muMpHXg6S+e+gDM/U9BKLHbl9l6o8czQKl4RUkJJiqftQG2i3BMg/TQlUYFkJDYBOOvAugYuzYSDnZbDDd/aSd9x0Oe6F+bJcHfl9+gp6L5/TgA+BdFFovbfCrQ40s5vMPw8866pNX8zyFGeFWdxIpPVp9Rg1UPOVFbFZrvaFq/YAzHQgqMWpahMYfqHpmwXfHL1/kpYmGuHFwT55mQu0dylfNuq2Oq0hTMCPwqfxnuBIPLXfci4Y1ANy+1CUipQxld/izVh16WyG2Q0CQQ9NqtAnx1HCHwDj7sYxOSB0wopZSnOzxQOcExmxrVTF2BkOthVpGfuhaGECfCJpJKpjnihY+xOT2QJxN61+9K6QSqtv2Shr82I3jgJrqBg0wELFZPjvHpvzTtaJnLK6Vb97Yn933koO/saN7fsjwNKzp4l2lJVx2orjCGzC/4ZL4zCver6aQYtC5sdoychuFE6ufOiog+VWi5UDkbmvmtah/3aArEBIi39s5ILUnlFLgilcGuz9CQshEY7fw2ouoILAYPVT/gyAIq3TFAIwVsl+ktkRz/qGfnCDGrm5gsl/l9QdvCWGsjPz3dU7XuqKfdUrr/6XIgjp4rey6AJBmCmUJMjITHVdFb5m1p+dLMCL8t55zD42cmftmLEJC0Da04YiRCVUBLLa8D071/N5UBNBXDh0LFsmhV/5B5ExOB4j3WVG/S3lfK5o+V6ELHvy6RR9n4ac+VsK4VE4yphPvV+kG9FegTBH4ZRXL2HytUHCduJazB/KykjfetYxOXTLws267aGOd+I+JhKP//+VnXmS90OD/jvLcVu0asyqcuYN1mSb6XTlCkqv1vigZPIYwNF/zpWcT1GR/6aEIRjkh0yhg4LXJfaGobYJTY4JI58KiAKgmmgAKWdl5nYCeLqavRJGQNuYuZtZFGx+IkI4w4NS2xwbetNMunOjBu/hmKCI/w7tfiiyUd//4rbTeWt4izBY8YvGIN6vyKYmP/8X8wHKCeN+WRcKM70+tXKNGyevU9H2Dg5BsljnTf8YbsJ1TmMs74Ce2XlHisleguhyeg44rQOHZuw/6HTkhnnurK2d62q6yS7210SsAIaR+jXMQA+svkrLpsUY+F30Uw89uOdGAR6vo4FIME0EfVVeHTu6eKicfhSqOeXJhbftcd08sWEnNUL1C9fnprTgd83IMut8onVUF0hvqzZfHduPjbjwEXIcoYmy+P6tcJZHmeOv6VrvEdkHDJecjHuHeWANe79VG662qTjA/HCvumVv3qL+LrOcpqGps2ZGwQdFJ7PU4iuyRlBrwfO+xnPyr47s2cXVbWzAyznDiBGjCM3ksxjjqM62GE9C8f5U38kB3VjtabKp/nRdvMESPGDG90bWRLAt1Qk5DyLuazRR1YzdC1c+hZXvAWV8xA72S4A8B67vjVhbba3MMop293FeEXpe7zItMWrJG/LOH9ByOXmYnNJfjmfuX9KbrpgLOba4nZ+fl8Gbdv/ihv+6wFGKHCYrVwmhFC0J3V2bn2tIB1wCc1CST3d3X2OyxhguXcs4sm679UngzofuSeBewMFJboIQHbUh/m2JhW2hG9DIvG2t7yZIzKBTz9wBtnNC+2pCRYhSIuQ1j8xsz5VvqnyUIthvuoyyu7fNIrg/KQUVmGQaqkqZk/Vx5b33/gsEs8yX7SC1J+NV4icz6bvIE7C5G6McBaI8rVg56q5QBJWxn/87Q1sPK4+sQa8fLU5gXo4paaq4cOcQ4wR0VBHPGjKh+UlPCbA1nLXyEUX45qZ8J7/Ln4FPJE2TdzD0Z8MLSNQiykMMmSyOCiFfy84Rq60emYB2vD09KjYwsoIpeDcBDTElBbXxND72yhd9pC/1CMid/5HUMvAL27OtcIJDzNKpRPNqPOpyt2aPGz9QWIs9hQ9LiX5s8m9hjTUu/f7MyIatjjd+tSfQ3ufZxPpmJhTaBtZtKLUcfOCUqADuO+QoH8B9v6U+P0HV1GLQmtoNFTb3s74ivZgjES0qfK+8RdGgBbcCMSy8eBvh98+et1KIFqSe1KQPyXULBMTsIYnysIwiZBJYdI20vseV+wuJkcqGemehKjaAb9L57xZm3g2zX0bZ2xk/fU+bCo7TlnbW7JuF1YdURo/2Gw7VclDG1W7LOtas2LX4upifZ/23rzpsnY/ALfRgrcWP5hYmV9VxVOQA1fZvp9F2UNU+7d7xRyVm5wiLp3/0dlV7vdw1PMiZrbDAYzIVqEjRY2YU03sJhPnlwIPcZUG5ltL6S8XCxU1eYS5cjr34veBmXAvy7yN4ZjArIG0dfD/5UpBNlX1ZPoxJOwyqRi3wQWtOzd4oNKh0LkoTm8cwqgIfKhqqGOhwo71I+zXnMemTv2B2AUzABWyFztGgGULjDDzWYwJUVBTjKCn5K2QGMK1CQT7SzziOjo+BhAmqBjzuc3xYym2eedGeOIRJVyTwDw37iCMe4g5Vbnsb5ZBdxOAnMT7HU4DHpxWGuQ7GeiY30Cpbvzss55+5Km1YsbD5ea3NI9QNYIXol5apgSu9dZ8f8xS5dtHpido5BclDuLWY4lhik0tbJa07yJhH0BOyEut/GRbYTS6RfiTYWGMCkNpfSHi7HvdiTglEVHKZXaVhezH4kkXiIvKopYAlPusftpE4a5IZwvw1x/eLvoDIh/zpo9FiQInsTb2SAkKHV42XYBjpJDg4374XiVb3ws4qM0s9eSQ5HzsMU4OZJKuopFjBM+dAZEl8RUMx5uU2N486Kr141tVsGQfGjORYMCJAMsxELeNT4RmWjRcpdTGBwcx6XN9drWqPmJzcrGrH4+DRc7+n1w3kPZwu0BkNr6hQrqgo7JTB9A5kdJ/H7P4cWBMwsmuixAzJB3yrQpnGIq90lxAXLzDCdn1LPibsRt7rHNjgQBklRgPZ8vTbjXdgXrTWQsK5MdrXXQVPp0Rinq3frzZKJ0qD6Qhc40VzAraUXlob1gvkhK3vpmHgI6FRlQZNx6eRqkp0zy4AQlX813fAPtL3jMRaitGFFjo0zmErloC+h+YYdVQ6k4F/epxAoF0BmqEoKNTt6j4vQZNQ2BoqF9Vj53TOIoNmDiu9Xp15RkIgQIGcoLpfoIbenzpGUAtqFJp5W+LLnx38jHeECTJ/navKY1NWfN0sY1T8/pB8kIH3DU3DX+u6W3YwpypBMYOhbSxGjq84RZ84fWJow8pyHqn4S/9J15EcCMsXqrfwyd9mhiu3+rEo9pPpoJkdZqHjra4NvzFwuThNKy6hao/SlLw3ZADUcUp3w3SRVfW2rhl80zOgTYnKE0Hs2qp1J6H3xqPqIkvUDRMFDYyRbsFI3M9MEyovPk8rlw7/0a81cDVLmBsR2ze2pBuKb23fbeZC0uXoIvDppfTwIDxk1Oq2dGesGc+oJXWJLGkOha3CX+DUnzgAp9HGH9RsPZN63Hn4RMA5eSVhPHO+9RcRb/IOgtW31V1Q5IPGtoxPjC+MEJbVlIMYADd9aHYWUIQKopuPOHmoqSkubnAKnzgKHqgIOfW5RdAgotN6BN+O2ZYHkuemLnvQ8U9THVrS1RtLmKbcC7PeeDsYznvqzeg6VCNwmr0Yyx1wnLjyT84BZz3EJyCptD3yeueAyDWIs0L2qs/VQ3HUyqfrja0V1LdDzqAikeWuV4sc7RLIB69jEIBjCkyZedoUHqCrOvShVzyd73OdrJW0hPOuQv2qOoHDc9xVb6Yu6uq3Xqp2ZaH46A7lzevbxQEmfrzvAYSJuZ4WDk1Hz3QX1LVdiUK0EvlAGAYlG3Md30r7dcPN63yqBCIj25prpvZP0nI4+EgWoFG95V596CurXpKRBGRjQlHCvy5Ib/iW8nZJWwrET3mgd6mEhfP4KCuaLjopWs7h+MdXFdIv8dHQJgg1xi1eYqB0uDYjxwVmri0Sv5XKut/onqapC+FQiC2C1lvYJ9MVco6yDYsS3AANUfMtvtbYI2hfwZatiSsnoUeMZd34GVjkMMKA+XnjJpXgRW2SHTZplVowPmJsvXy6w3cfO1AK2dvtZEKTkC/TY9LFiKHCG0DnrMQdGm2lzlBHM9iEYynH2UcVMhUEjsc0oDBTgo2ZSQ1gzkAHeWeBXYFjYLuuf8yzTCy7/RFR81WDjXMbq2BOH5dURnxo6oivmxL3cKzKInlZkD31nvpHB9Kk7GfcfE1t+1V64b9LtgeJGlpRFxQCAqWJ5DoY77ski8gsOEOr2uywZaoO/NGa0X0y1pNQHBi3b2SUGNpcZxDT7rLbBf1FSnQ8guxGW3W+36BW0gBje4DOz6Ba6SVk0xiKgt+q2JOFyr4SYfnu+Ic1QZYIuwHBrgzr6UvOcSCzPTOo7D6IC4ISeS7zkl4h+2VoeHpnG/uWR3+ysNgPcOIXQbv0n4mr3BwQcdKJxgPSeyuP/z1Jjg4e9nUvoXegqQVIE30EHx5GHv+FAVUNTowYDJgyFhf5IvlYmEqRif6+WN1MkEJmDcQITx9FX23a4mxy1AQRsOHO/+eImX9l8EMJI3oPWzVXxSOeHU1dUWYr2uAA7AMb+vAEZSbU3qob9ibCyXeypEMpZ6863o6QPqlqGHZkuWABSTVNd4cOh9hv3qEpSx2Zy/DJMP6cItEmiBJ5PFqQnDEIt3NrA3COlOSgz43D7gpNFNJ5MBh4oFzhDPiglC2ypsNU4ISywY2erkyb1NC3Qh/IfWj0eDgZI4/ln8WPfBsT3meTjq1Uqt1E7Zl/qftqkx6aM9KueMCekSnMrcHj1CqTWWzEzPsZGcDe3Ue4Ws+XFYVxNbOFF8ezkvQGR6ZOtOLU2lQEnMBStx47vE6Pb7AYMBRj2OOfZXfisjJnpTfSNjo6sZ6qSvNxZNmDeS7Gk3yYyCk1HtKN2UnhMIjOXUzAqDv90lx9O/q/AT1ZMnit5XQe9wmQxnE/WSH0CqZ9/2Hy+Sfmpeg8RwsHI5Z8kC8H293m/LHVVM/BA7HaTJYg5Enk7M/xWpq0192ACfBai2LA/qrCjCr6Dh1BIMzMXINBmX96MJ5Hn2nxln/RXPFhwHxUmSV0EV2V0jm86/dxxuYSU1W7sVkEbN9EzkG0QFwPhyHKyb3t+Fj5WoUUTErcazE/N6EW6Lvp0d//SDPj7EV9UdJN+Amnf3Wwk3A0SlJ9Z00yvXZ7n3z70G47Hfsow8Wq1JXcfwnA+Yxa5mFsgV464KKP4T31wqIgzFPd3eCe3j5ory5fBF2hgCFyVFrLzI9eetNXvM7oQqyFgDo4CTp/hDV9NMX9JDHQ/nyHTLvZLNLF6ftn2OxjGm8+PqOwhxnPHWipkE/8wbtyri80Sr7pMNkQGMfo4ZYK9OcCC4ESVFFbLMIvlxSoRqWie0wxqnLfcLSXMSpMMQEJYDVObYsXIQNv4TGNwjq1kvT1UOkicTrG3IaBZ3XdScS3u8sgeZPVpOLkbiF940FjbCeNRINNvDbd01EPBrTCPpm12m43ze1bBB59Ia6Ovhnur/Nvx3IxwSWol+3H2qfCJR8df6aQf4v6WiONxkK+IqT4pKQrZK/LplgDI/PJZbOep8dtbV7oCr6CgfpWa8NczOkPx81iSHbsNhVSJBOtrLIMrL31LK9TqHqAbAHe0RLmmV806kRLDLNEhUEJfm9u0sxpkL93Zgd6rw+tqBfTMi59xqXHLXSHwSbSBl0EK0+loECOPtrl+/nsaFe197di4yUgoe4jKoAJDXc6DGDjrQOoFDWZJ9HXwt8xDrQP+7aRwWKWI1GF8s8O4KzxWBBcwnl3vnl1Oez3oh6Ea1vjR7/z7DDTrFtqU2W/KAEzAuXDNZ7MY73MF216dzdSbWmUp4lcm7keJfWaMHgut9x5C9mj66Z0lJ+yhsjVvyiWrfk1lzPOTdhG15Y7gQlXtacvI7qv/XNSscDwqkgwHT/gUsD5yB7LdRRvJxQGYINn9hTpodKFVSTPrtGvyQw+HlRFXIkodErAGu9Iy1YpfSPc3jkFh5CX3lPxv7aqjE/JAfTIpEjGb/H7MO0e2vsViSW1qa/Lmi4/n4DEI3g7lYrcanspDfEpKkdV1OjSLOy0BCUqVoECaB55vs06rXl4jqmLsPsFM/7vYJ0vrBhDCm/00A/H81l1uekJ/6Lml3Hb9+NKiLqATJmDpyzfYZFHumEjC662L0Bwkxi7E9U4cQA0XMVDuMYAIeLMPgQaMVOd8fmt5SflFIfuBoszeAw7ow5gXPE2Y/yBc/7jExARUf/BxIHQBF5Sn3i61w4z5xJdCyO1F1X3+3ax+JSvMeZ7S6QSKp1Fp/sjYz6Z+VgCZzibGeEoujryfMulH7Rai5kAft9ebcW50DyJr2uo2z97mTWIu45YsSnNSMrrNUuG1XsYBtD9TDYzQffKB87vWbkM4EbPAFgoBV4GQS+vtFDUqOFAoi1nTtmIOvg38N4hT2Sn8r8clmBCXspBlMBYTnrqFJGBT3wZOzAyJDre9dHH7+x7qaaKDOB4UQALD5ecS0DE4obubQEiuJZ0EpBVpLuYcce8Aa4PYd/V4DLDAJBYKQPCWTcrEaZ5HYbJi11Gd6hjGom1ii18VHYnG28NKpkz2UKVPxlhYSp8uZr367iOmoy7zsxehW9wzcy2zG0a80PBMCRQMb32hnaHeOR8fnNDzZhaNYhkOdDsBUZ3loDMa1YP0uS0cjUP3b/6DBlqmZOeNABDsLl5BI5QJups8uxAuWJdkUB/pO6Zax6tsg7fN5mjjDgMGngO+DPcKqiHIDbFIGudxtPTIyDi9SFMKBDcfdGQRv41q1AqmxgkVfJMnP8w/Bc7N9/TR6C7mGObFqFkIEom8sKi2xYqJLTCHK7cxzaZvqODo22c3wisBCP4HeAgcRbNPAsBkNRhSmD48dHupdBRw4mIvtS5oeF6zeT1KMCyhMnmhpkFAGWnGscoNkwvQ8ZM5lE/vgTHFYL99OuNxdFBxTEDd5v2qLR8y9WkXsWgG6kZNndFG+pO/UAkOCipqIhL3hq7cRSdrCq7YhUsTocEcnaFa6nVkhnSeRYUA1YO0z5itF9Sly3VlxYDw239TJJH6f3EUfYO5lb7bcFcz8Bp7Oo8QmnsUHOz/fagVUBtKEw1iT88j+aKkv8cscKNkMxjYr8344D1kFoZ7/td1W6LCNYN594301tUGRmFjAzeRg5vyoM1F6+bJZ/Q54jN/k8SFd3DxPTYaAUsivsBfgTn7Mx8H2SpPt4GOdYRnEJOH6jHM2p6SgB0gzIRq6fHxGMmSmqaPCmlfwxiuloaVIitLGN8wie2CDWhkzLoCJcODh7KIOAqbHEvXdUxaS4TTTs07Clzj/6GmVs9kiZDerMxEnhUB6QQPlcfqkG9882RqHoLiHGBoHfQuXIsAG8GTAtao2KVwRnvvam8jo1e312GQAKWEa4sUVEAMG4G6ckcONDwRcg1e2D3+ohXgY4UAWF8wHKQMrSnzCgfFpsxh+aHXMGtPQroQasRY4U6UdG0rz1Vjbka0MekOGRZQEvqQFlxseFor8zWFgHek3v29+WqN6gaK5gZOTOMZzpQIC1201LkMCXild3vWXSc5UX9xcFYfbRPzGFa1FDcPfPB/jUEq/FeGt419CI3YmBlVoHsa4KdcwQP5ZSwHHhFJ7/Ph/Rap/4vmG91eDwPP0lDfCDRCLszTqfzM71xpmiKi2HwS4WlqvGNwtvwF5Dqpn6KTq8ax00UMPkxDcZrEEEsIvHiUXXEphdb4GB4FymlPwBz4Gperqq5pW7TQ6/yNRhW8VT5NhuP0udlxo4gILq5ZxAZk8ZGh3g4CqxJlPKY7AQxupfUcVpWT5VItp1+30UqoyP4wWsRo3olRRgkWZZ2ZN6VC3OZFeXB8NbnUrSdikNptD1QiGuKkr8EmSR/AK9Rw+FF3s5uwuPbvHGiPeFOViltMK7AUaOsq9+x9cndk3iJEE5LKZRlWJbKOZweROzmPNVPkjE3K/TyA57Rs68TkZ3MR8akKpm7cFjnjPd/DdkWjgYoKHSr5Wu5ssoBYU4acRs5g2DHxUmdq8VXOXRbunD8QN0LhgkssgahcdoYsNvuXGUK/KXD/7oFb+VGdhqIn02veuM5bLudJOc2Ky0GMaG4W/xWBxIJcL7yliJOXOpx0AkBqUgzlDczmLT4iILXDxxtRR1oZa2JWFgiAb43obrJnG/TZC2KSK2wqOzRZTXavZZFMb1f3bXvVaNaK828w9TO610gk8JNf3gMfETzXXsbcvRGCG9JWQZ6+cDPqc4466Yo2RcKH+PILeKOqtnlbInR3MmBeGG3FH10yzkybuqEC2HSQwpA0An7d9+73BkDUTm30bZmoP/RGbgFN+GrCOfADgqr0WbI1a1okpFms8iHYw9hm0zUvlEMivBRxModrbJJ+9/p3jUdQQ9BCtQdxnOGrT5dzRUmw0593/mbRSdBg0nRvRZM5/E16m7ZHmDEtWhwvfdZCZ8J8M12W0yRMszXamWfQTwIZ4ayYktrnscQuWr8idp3PjT2eF/jmtdhIfcpMnb+IfZY2FebW6UY/AK3jP4u3Tu4zE4qlnQgLFbM19EBIsNf7KhjdbqQ/D6yiDb+NlEi2SKD+ivXVUK8ib0oBo366gXkR8ZxGjpJIDcEgZPa9TcYe0TIbiPl/rPUQDu3XBJ9X/GNq3FAUsKsll57DzaGMrjcT+gctp+9MLYXCq+sqP81eVQ0r9lt+gcQfZbACRbEjvlMskztZG8gbC8Qn9tt26Q7y7nDrbZq/LEz7kR6Jc6pg3N9rVX8Y5MJrGlML9p9lU4jbTkKqCveeZUJjHB03m2KRKR2TytoFkTXOLg7keU1s1lrPMQJpoOKLuAAC+y1HlJucU6ysB5hsXhvSPPLq5J7JtnqHKZ4vYjC4Vy8153QY+6780xDuGARsGbOs1WqzH0QS765rnSKEbbKlkO8oI/VDwUd0is13tKpqILu1mDJFNy/iJAWcvDgjxvusIT+PGz3ST/J9r9Mtfd0jpaGeiLYIqXc7DiHSS8TcjFVksi66PEkxW1z6ujbLLUGNNYnzOWpH8BZGK4bCK7iR+MbIv8ncDAz1u4StN3vTTzewr9IQjk9wxFxn+6N1ddKs0vffJiS08N3a4G1SVrlZ97Q/M+8G9fe5AP6d9/Qq4WRnORVhofPIKEdCr3llspUfE0oKIIYoByBRPh+bX1HLS3JWGJRhIvE1aW4NTd8ePi4Z+kXb+Z8snYfSNcqijhAgVsx4RCM54cXUiYkjeBmmC4ajOHrChoELscJJC7+9jjMjw5BagZKlgRMiSNYz7h7vvZIoQqbtQmspc0cUk1G/73iXtSpROl5wtLgQi0mW2Ex8i3WULhcggx6E1LMVHUsdc9GHI1PH3U2Ko0PyGdn9KdVOLm7FPBui0i9a0HpA60MsewVE4z8CAt5d401Gv6zXlIT5Ybit1VIA0FCs7wtvYreru1fUyW3oLAZ/+aTnZrOcYRNVA8spoRtlRoWflsRClFcgzkqiHOrf0/SVw+EpVaFlJ0g4Kxq1MMOmiQdpMNpte8lMMQqm6cIFXlnGbfJllysKDi+0JJMotkqgIxOSQgU9dn/lWkeVf8nUm3iwX2Nl3WDw9i6AUK3vBAbZZrcJpDQ/N64AVwjT07Jef30GSSmtNu2WlW7YoyW2FlWfZFQUwk867EdLYKk9VG6JgEnBiBxkY7LMo4YLQJJlAo9l/oTvJkSARDF/XtyAzM8O2t3eT/iXa6wDN3WewNmQHdPfsxChU/KtLG2Mn8i4ZqKdSlIaBZadxJmRzVS/o4yA65RTSViq60oa395Lqw0pzY4SipwE0SXXsKV+GZraGSkr/RW08wPRvqvSUkYBMA9lPx4m24az+IHmCbXA+0faxTRE9wuGeO06DIXa6QlKJ3puIyiuAVfPr736vzo2pBirS+Vxel3TMm3JKhz9o2ZoRvaFVpIkykb0Hcm4oHFBMcNSNj7/4GJt43ogonY2Vg4nsDQIWxAcorpXACzgBqQPjYsE/VUpXpwNManEru4NwMCFPkXvMoqvoeLN3qyu/N1eWEHttMD65v19l/0kH2mR35iv/FI+yjoHJ9gPMz67af3Mq/BoWXqu3rphiWMXVkmnPSEkpGpUI2h1MThideGFEOK6YZHPwYzMBvpNC7+ZHxPb7epfefGyIB4JzO9DTNEYnDLVVHdQyvOEVefrk6Uv5kTQYVYWWdqrdcIl7yljwwIWdfQ/y+2QB3eR/qxYObuYyB4gTbo2in4PzarU1sO9nETkmj9/AoxDA+JM3GMqQtJR4jtduHtnoCLxd1gQUscHRB/MoRYIEsP2pDZ9KvHgtlk1iTbWWbHhohwFEYX7y51fUV2nuUmnoUcqnWIQAAgl9LTVX+Bc0QGNEhChxHR4YjfE51PUdGfsSFE6ck7BL3/hTf9jLq4G1IafINxOLKeAtO7quulYvH5YOBc+zX7CrMgWnW47/jfRsWnJjYYoE7xMfWV2HN2iyIqLI";const W2=new Map([[8217,"apostrophe"],[8260,"fraction slash"],[12539,"middle dot"]]),q2=4;function DM(t){let e=0;function n(){return t[e++]<<8|t[e++]}let r=n(),i=1,s=[0,1];for(let P=1;P<r;P++)s.push(i+=n());let o=n(),a=e;e+=o;let l=0,c=0;function u(){return l==0&&(c=c<<8|t[e++],l=8),c>>--l&1}const d=31,f=2**d,h=f>>>1,m=h>>1,g=f-1;let w=0;for(let P=0;P<d;P++)w=w<<1|u();let p=[],v=0,y=f;for(;;){let P=Math.floor(((w-v+1)*i-1)/y),L=0,j=r;for(;j-L>1;){let F=L+j>>>1;P<s[F]?j=F:L=F}if(L==0)break;p.push(L);let D=v+Math.floor(y*s[L]/i),V=v+Math.floor(y*s[L+1]/i)-1;for(;!((D^V)&h);)w=w<<1&g|u(),D=D<<1&g,V=V<<1&g|1;for(;D&~V&m;)w=w&h|w<<1&g>>>1|u(),D=D<<1^h,V=(V^h)<<1|h|1;v=D,y=1+V-D}let C=r-4;return p.map(P=>{switch(P-C){case 3:return C+65792+(t[a++]<<16|t[a++]<<8|t[a++]);case 2:return C+256+(t[a++]<<8|t[a++]);case 1:return C+t[a++];default:return P-1}})}function $M(t){let e=0;return()=>t[e++]}function c3(t){return $M(DM(UM(t)))}function UM(t){let e=[];[..."ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/"].forEach((i,s)=>e[i.charCodeAt(0)]=s);let n=t.length,r=new Uint8Array(6*n>>3);for(let i=0,s=0,o=0,a=0;i<n;i++)a=a<<6|e[t.charCodeAt(i)],o+=6,o>=8&&(r[s++]=a>>(o-=8));return r}function FM(t){return t&1?~t>>1:t>>1}function jM(t,e){let n=Array(t);for(let r=0,i=0;r<t;r++)n[r]=i+=FM(e());return n}function Gd(t,e=0){let n=[];for(;;){let r=t(),i=t();if(!i)break;e+=r;for(let s=0;s<i;s++)n.push(e+s);e+=i+1}return n}function u3(t){return Wd(()=>{let e=Gd(t);if(e.length)return e})}function d3(t){let e=[];for(;;){let n=t();if(n==0)break;e.push(HM(n,t))}for(;;){let n=t()-1;if(n<0)break;e.push(KM(n,t))}return e.flat()}function Wd(t){let e=[];for(;;){let n=t(e.length);if(!n)break;e.push(n)}return e}function f3(t,e,n){let r=Array(t).fill().map(()=>[]);for(let i=0;i<e;i++)jM(t,n).forEach((s,o)=>r[o].push(s));return r}function HM(t,e){let n=1+e(),r=e(),i=Wd(e);return f3(i.length,1+t,e).flatMap((o,a)=>{let[l,...c]=o;return Array(i[a]).fill().map((u,d)=>{let f=d*r;return[l+d*n,c.map(h=>h+f)]})})}function KM(t,e){let n=1+e();return f3(n,1+t,e).map(i=>[i[0],i.slice(1)])}function zM(t){let e=[],n=Gd(t);return i(r([]),[]),e;function r(s){let o=t(),a=Wd(()=>{let l=Gd(t).map(c=>n[c]);if(l.length)return r(l)});return{S:o,B:a,Q:s}}function i({S:s,B:o},a,l){if(!(s&4&&l===a[a.length-1])){s&2&&(l=a[a.length-1]),s&1&&e.push(a);for(let c of o)for(let u of c.Q)i(c,[...a,u],l)}}}function VM(t){return t.toString(16).toUpperCase().padStart(2,"0")}function h3(t){return`{${VM(t)}}`}function GM(t){let e=[];for(let n=0,r=t.length;n<r;){let i=t.codePointAt(n);n+=i<65536?1:2,e.push(i)}return e}function hu(t){let n=t.length;if(n<4096)return String.fromCodePoint(...t);let r=[];for(let i=0;i<n;)r.push(String.fromCodePoint(...t.slice(i,i+=4096)));return r.join("")}function WM(t,e){let n=t.length,r=n-e.length;for(let i=0;r==0&&i<n;i++)r=t[i]-e[i];return r}var qM="AEUDTAHBCFQATQDRADAAcgAgADQAFAAsABQAHwAOACQADQARAAoAFwAHABIACAAPAAUACwAFAAwABAAQAAMABwAEAAoABQAIAAIACgABAAQAFAALAAIACwABAAIAAQAHAAMAAwAEAAsADAAMAAwACgANAA0AAwAKAAkABAAdAAYAZwDSAdsDJgC0CkMB8xhZAqfoC190UGcThgBurwf7PT09Pb09AjgJum8OjDllxHYUKXAPxzq6tABAxgK8ysUvWAgMPT09PT09PSs6LT2HcgWXWwFLoSMEEEl5RFVMKvO0XQ8ExDdJMnIgsj26PTQyy8FfEQ8AY8IPAGcEbwRwBHEEcgRzBHQEdQR2BHcEeAR6BHsEfAR+BIAEgfndBQoBYgULAWIFDAFiBNcE2ATZBRAFEQUvBdALFAsVDPcNBw13DYcOMA4xDjMB4BllHI0B2grbAMDpHLkQ7QHVAPRNQQFnGRUEg0yEB2uaJF8AJpIBpob5AERSMAKNoAXqaQLUBMCzEiACnwRZEkkVsS7tANAsBG0RuAQLEPABv9HICTUBXigPZwRBApMDOwAamhtaABqEAY8KvKx3LQ4ArAB8UhwEBAVSagD8AEFZADkBIadVj2UMUgx5Il4ANQC9AxIB1BlbEPMAs30CGxlXAhwZKQIECBc6EbsCoxngzv7UzRQA8M0BawL6ZwkN7wABAD33OQRcsgLJCjMCjqUChtw/km+NAsXPAoP2BT84PwURAK0RAvptb6cApQS/OMMey5HJS84UdxpxTPkCogVFITaTOwERAK5pAvkNBOVyA7q3BKlOJSALAgUIBRcEdASpBXqzABXFSWZOawLCOqw//AolCZdvv3dSBkEQGyelEPcMMwG1ATsN7UvYBPEGOwTJH30ZGQ/NlZwIpS3dDO0m4y6hgFoj9SqDBe1L9DzdC01RaA9ZC2UJ4zpjgU4DIQENIosK3Q05CG0Q8wrJaw3lEUUHOQPVSZoApQcBCxEdNRW1JhBirAsJOXcG+xr2C48mrxMpevwF0xohBk0BKRr/AM8u54WwWjFcHE9fBgMLJSPHFKhQIA0lQLd4SBobBxUlqQKRQ3BKh1E2HpMh9jw9DWYuE1F8B/U8BRlPC4E8nkarRQ4R0j6NPUgiSUwsBDV/LC8niwnPD4UMuXxyAVkJIQmxDHETMREXN8UIOQcZLZckJxUIIUaVYJoE958D8xPRAwsFPwlBBxMDtRwtEy4VKQUNgSTXAvM21S6zAo9WgAEXBcsPJR/fEFBH4A7pCJsCZQODJesALRUhABcimwhDYwBfj9hTBS7LCMdqbCN0A2cU52ERcweRDlcHpxwzFb8c4XDIXguGCCijrwlbAXUJmQFfBOMICTVbjKAgQWdTi1gYmyBhQT9d/AIxDGUVn0S9h3gCiw9rEhsBNQFzBzkNAQJ3Ee0RaxCVCOuGBDW1M/g6JQRPIYMgEQonA09szgsnJvkM+GkBoxJiAww0PXfuZ6tgtiQX/QcZMsVBYCHxC5JPzQycGsEYQlQuGeQHvwPzGvMn6kFXBf8DowMTOk0z7gS9C2kIiwk/AEkOoxcH1xhqCnGM0AExiwG3mQNXkYMCb48GNwcLAGcLhwV55QAdAqcIowAFAM8DVwA5Aq0HnQAZAIVBAT0DJy8BIeUCjwOTCDHLAZUvAfMpBBvDDBUA9zduSgLDsQKAamaiBd1YAo4CSTUBTSUEBU5HUQOvceEA2wBLBhPfRwEVq0rLGuNDAd9vKwDHAPsABTUHBUEBzQHzbQC3AV8LMQmis7UBTekpAIMAFWsB1wKJAN0ANQB/8QFTAE0FWfkF0wJPSQERMRgrV2EBuwMfATMBDQB5BsuNpckHHwRtB9MCEBsV4QLvLge1AQMi3xPNQsUCvd5VoWACZIECYkJbTa9bNyACofcCaJgCZgkCn4Q4GwsCZjsCZiYEbgR/A38TA36SOQY5dxc5gjojIwJsHQIyNjgKAm3HAm2u74ozZ0UrAWcA3gDhAEoFB5gMjQD+C8IADbUCdy8CdqI/AnlLQwJ4uh1c20WuRtcCfD8CesgCfQkCfPAFWQUgSABIfWMkAoFtAoAAAoAFAn+uSVhKWxUXSswC0QEC0MxLJwOITwOH5kTFkTIC8qFdAwMDrkvOTC0lA89NTE2vAos/AorYwRsHHUNnBbcCjjcCjlxAl4ECjtkCjlx4UbRTNQpS1FSFApP7ApMMAOkAHFUeVa9V0AYsGymVhjLheGZFOzkCl58C77JYIagAWSUClo8ClnycAKlZrFoJgU0AOwKWtQKWTlxEXNECmcsCmWRcyl0HGQKcmznCOp0CnBYCn5sCnriKAB0PMSoPAp3xAp6SALU9YTRh7wKe0wKgbgGpAp6fHwKeTqVjyGQnJSsCJ68CJn4CoPsCoEwCot0CocQCpi8Cpc4Cp/8AfQKn8mh8aLEAA0lqHGrRAqzjAqyuAq1nAq0CAlcdAlXcArHh1wMfTmyXArK9DQKy6Bds4G1jbUhfAyXNArZcOz9ukAMpRQK4XgK5RxUCuSp3cDZw4QK9GQK72nCWAzIRAr6IcgIDM3ECvhpzInNPAsPLAsMEc4J0SzVFdOADPKcDPJoDPb8CxXwCxkcCxhCJAshpUQLIRALJTwLJLgJknQLd0nh5YXiueSVL0AMYo2cCAmH0GfOVJHsLXpJeuxECz2sCz2wvS1PS8xOfAMatAs9zASnqA04SfksFAtwnAtuKAtJPA1JcA1NfAQEDVYyAiT8AyxbtYEWCHILTgs6DjQLaxwLZ3oQQhEmnPAOGpQAvA2QOhnFZ+QBVAt9lAt64c3cC4i/tFAHzMCcB9JsB8tKHAuvzAulweQLq+QLq5AD5RwG5Au6JAuuclqqXAwLuPwOF4Jh5cOBxoQLzAwBpA44WmZMC9xMDkW4DkocC95gC+dkC+GaaHJqruzebHgOdgwL++gEbADmfHJ+zAwWNA6ZqA6bZANHFAwZqoYiiBQkDDEkCwAA/AwDhQRdTARHzA2sHl2cFAJMtK7evvdsBiZkUfxEEOQH7KQUhDp0JnwCS/SlXxQL3AZ0AtwW5AG8LbUEuFCaNLgFDAYD8AbUmAHUDDgRtACwCFgyhAAAKAj0CagPdA34EkQEgRQUhfAoABQBEABMANhICdwEABdUDa+8KxQIA9wqfJ7+xt+UBkSFBQgHpFH8RNMCJAAQAGwBaAkUChIsABjpTOpSNbQC4Oo860ACNOME63AClAOgAywE6gTo7Ofw5+Tt2iTpbO56JOm85GAFWATMBbAUvNV01njWtNWY1dTW2NcU1gjWRNdI14TWeNa017jX9NbI1wTYCNhE1xjXVNhY2JzXeNe02LjY9Ni41LSE2OjY9Njw2yTcIBJA8VzY4Nt03IDcPNsogN4k3MAoEsDxnNiQ3GTdsOo03IULUQwdC4EMLHA8PCZsobShRVQYA6X8A6bABFCnXAukBowC9BbcAbwNzBL8MDAMMAQgDAAkKCwsLCQoGBAVVBI/DvwDz9b29kaUCb0QtsRTNLt4eGBcSHAMZFhYZEhYEARAEBUEcQRxBHEEcQRxBHEEaQRxBHEFCSTxBPElISUhBNkM2QTYbNklISVmBVIgBFLWZAu0BhQCjBcEAbykBvwGJAaQcEZ0ePCklMAAhMvAIMAL54gC7Bm8EescjzQMpARQpKgDUABavAj626xQAJP0A3etzuf4NNRA7efy2Z9NQrCnC0OSyANz5BBIbJ5IFDR6miIavYS6tprjjmuKebxm5C74Q225X1pkaYYPb6f1DK4k3xMEBb9S2WMjEibTNWhsRJIA+vwNVEiXTE5iXs/wezV66oFLfp9NZGYW+Gk19J2+bCT6Ye2w6LDYdgzKMUabk595eLBCXANz9HUpWbATq9vqXVx9XDg+Pc9Xp4+bsS005SVM/BJBM4687WUuf+Uj9dEi8aDNaPxtpbDxcG1THTImUMZq4UCaaNYpsVqraNyKLJXDYsFZ/5jl7bLRtO88t7P3xZaAxhb5OdPMXqsSkp1WCieG8jXm1U99+blvLlXzPCS+M93VnJCiK+09LfaSaBAVBomyDgJua8dfUzR7ga34IvR2Nvj+A9heJ6lsl1KG4NkI1032Cnff1m1wof2B9oHJK4bi6JkEdSqeNeiuo6QoZZincoc73/TH9SXF8sCE7XyuYyW8WSgbGFCjPV0ihLKhdPs08Tx82fYAkLLc4I2wdl4apY7GU5lHRFzRWJep7Ww3wbeA3qmd59/86P4xuNaqDpygXt6M85glSBHOCGgJDnt+pN9bK7HApMguX6+06RZNjzVmcZJ+wcUrJ9//bpRNxNuKpNl9uFds+S9tdx7LaM5ZkIrPj6nIU9mnbFtVbs9s/uLgl8MVczAwet+iOEzzBlYW7RCMgE6gyNLeq6+1tIx4dpgZnd0DksJS5f+JNDpwwcPNXaaVspq1fbQajOrJgK0ofKtJ1Ne90L6VO4MOl5S886p7u6xo7OLjG8TGL+HU1JXGJgppg4nNbNJ5nlzSpuPYy21JUEcUA94PoFiZfjZue+QnyQ80ekOuZVkxx4g+cvhJfHgNl4hy1/a6+RKcKlar/J29y//EztlbVPHVUeQ1zX86eQVAjR/M3dA9w4W8LfaXp4EgM85wOWasli837PzVMOnsLzR+k3o75/lRPAJSE1xAKQzEi5v10ke+VBvRt1cwQRMd+U5mLCTGVd6XiZtgBG5cDi0w22GKcVNvHiu5LQbZEDVtz0onn7k5+heuKXVsZtSzilkLRAUmjMXEMB3J9YC50XBxPiz53SC+EhnPl9WsKCv92SM/OFFIMJZYfl0WW8tIO3UxYcwdMAj7FSmgrsZ2aAZO03BOhP1bNNZItyXYQFTpC3SG1VuPDqH9GkiCDmE+JwxyIVSO5siDErAOpEXFgjy6PQtOVDj+s6e1r8heWVvmZnTciuf4EiNZzCAd7SOMhXERIOlsHIMG399i9aLTy3m2hRLZjJVDNLS53iGIK11dPqQt0zBDyg6qc7YqkDm2M5Ve6dCWCaCbTXX2rToaIgz6+zh4lYUi/+6nqcFMAkQJKHYLK0wYk5N9szV6xihDbDDFr45lN1K4aCXBq/FitPSud9gLt5ZVn+ZqGX7cwm2z5EGMgfFpIFyhGGuDPmso6TItTMwny+7uPnLCf4W6goFQFV0oQSsc9VfMmVLcLr6ZetDZbaSFTLqnSO/bIPjA3/zAUoqgGFAEQS4IhuMzEp2I3jJzbzkk/IEmyax+rhZTwd6f+CGtwPixu8IvzACquPWPREu9ZvGkUzpRwvRRuaNN6cr0W1wWits9ICdYJ7ltbgMiSL3sTPeufgNcVqMVWFkCPDH4jG2jA0XcVgQj62Cb29v9f/z/+2KbYvIv/zzjpQAPkliaVDzNrW57TZ/ZOyZD0nlfMmAIBIAGAI0D3k/mdN4xr9v85ZbZbbqfH2jGd5hUqNZWwl5SPfoGmfElmazUIeNL1j/mkF7VNAzTq4jNt8JoQ11NQOcmhprXoxSxfRGJ9LDEOAQ+dmxAQH90iti9e2u/MoeuaGcDTHoC+xsmEeWmxEKefQuIzHbpw5Tc5cEocboAD09oipWQhtTO1wivf/O+DRe2rpl/E9wlrzBorjJsOeG1B/XPW4EaJEFdNlECEZga5ZoGRHXgYouGRuVkm8tDESiEyFNo+3s5M5puSdTyUL2llnINVHEt91XUNW4ewdMgJ4boJfEyt/iY5WXqbA+A2Fkt5Z0lutiWhe9nZIyIUjyXDC3UsaG1t+eNx6z4W/OYoTB7A6x+dNSTOi9AInctbESqm5gvOLww7OWXPrmHwVZasrl4eD113pm+JtT7JVOvnCXqdzzdTRHgJ0PiGTFYW5Gvt9R9LD6Lzfs0v/TZZHSmyVNq7viIHE6DBK7Qp07Iz55EM8SYtQvZf/obBniTWi5C2/ovHfw4VndkE5XYdjOhCMRjDeOEfXeN/CwfGduiUIfsoFeUxXeQXba7c7972XNv8w+dTjjUM0QeNAReW+J014dKAD/McQYXT7c0GQPIkn3Ll6R7gGjuiQoZD0TEeEqQpKoZ15g/0OPQI17QiSv9AUROa/V/TQN3dvLArec3RrsYlvBm1b8LWzltdugsC50lNKYLEp2a+ZZYqPejULRlOJh5zj/LVMyTDvwKhMxxwuDkxJ1QpoNI0OTWLom4Z71SNzI9TV1iXJrIu9Wcnd+MCaAw8o1jSXd94YU/1gnkrC9BUEOtQvEIQ7g0i6h+KL2JKk8Ydl7HruvgWMSAmNe+LshGhV4qnWHhO9/RIPQzY1tHRj2VqOyNsDpK0cww+56AdDC4gsWwY0XxoucIWIqs/GcwnWqlaT0KPr8mbK5U94/301i1WLt4YINTVvCFBrFZbIbY8eycOdeJ2teD5IfPLCRg7jjcFTwlMFNl9zdh/o3E/hHPwj7BWg0MU09pPrBLbrCgm54A6H+I6v27+jL5gkjWg/iYdks9jbfVP5y/n0dlgWEMlKasl7JvFZd56LfybW1eeaVO0gxTfXZwD8G4SI116yx7UKVRgui6Ya1YpixqXeNLc8IxtAwCU5IhwQgn+NqHnRaDv61CxKhOq4pOX7M6pkA+Pmpd4j1vn6ACUALoLLc4vpXci8VidLxzm7qFBe7s+quuJs6ETYmnpgS3LwSZxPIltgBDXz8M1k/W2ySNv2f9/NPhxLGK2D21dkHeSGmenRT3Yqcdl0m/h3OYr8V+lXNYGf8aCCpd4bWjE4QIPj7vUKN4Nrfs7ML6Y2OyS830JCnofg/k7lpFpt4SqZc5HGg1HCOrHvOdC8bP6FGDbE/VV0mX4IakzbdS/op+Kt3G24/8QbBV7y86sGSQ/vZzU8FXs7u6jIvwchsEP2BpIhW3G8uWNwa3HmjfH/ZjhhCWvluAcF+nMf14ClKg5hGgtPLJ98ueNAkc5Hs2WZlk2QHvfreCK1CCGO6nMZVSb99VM/ajr8WHTte9JSmkXq/i/U943HEbdzW6Re/S88dKgg8pGOLlAeNiqrcLkUR3/aClFpMXcOUP3rmETcWSfMXZE3TUOi8i+fqRnTYLflVx/Vb/6GJ7eIRZUA6k3RYR3iFSK9c4iDdNwJuZL2FKz/IK5VimcNWEqdXjSoxSgmF0UPlDoUlNrPcM7ftmA8Y9gKiqKEHuWN+AZRIwtVSxye2Kf8rM3lhJ5XcBXU9n4v0Oy1RU2M+4qM8AQPVwse8ErNSob5oFPWxuqZnVzo1qB/IBxkM3EVUKFUUlO3e51259GgNcJbCmlvrdjtoTW7rChm1wyCKzpCTwozUUEOIcWLneRLgMXh+SjGSFkAllzbGS5HK7LlfCMRNRDSvbQPjcXaenNYxCvu2Qyznz6StuxVj66SgI0T8B6/sfHAJYZaZ78thjOSIFumNWLQbeZixDCCC+v0YBtkxiBB3jefHqZ/dFHU+crbj6OvS1x/JDD7vlm7zOVPwpUC01nhxZuY/63E7g";const qd=44032,u0=4352,d0=4449,f0=4519,p3=19,g3=21,pu=28,h0=g3*pu,QM=p3*h0,YM=qd+QM,JM=u0+p3,ZM=d0+g3,XM=f0+pu;function Zu(t){return t>>24&255}function m3(t){return t&16777215}let Dv,Q2,$v,ap;function e5(){let t=c3(qM);Dv=new Map(u3(t).flatMap((e,n)=>e.map(r=>[r,n+1<<24]))),Q2=new Set(Gd(t)),$v=new Map,ap=new Map;for(let[e,n]of d3(t)){if(!Q2.has(e)&&n.length==2){let[r,i]=n,s=ap.get(r);s||(s=new Map,ap.set(r,s)),s.set(i,e)}$v.set(e,n.reverse())}}function y3(t){return t>=qd&&t<YM}function t5(t,e){if(t>=u0&&t<JM&&e>=d0&&e<ZM)return qd+(t-u0)*h0+(e-d0)*pu;if(y3(t)&&e>f0&&e<XM&&(t-qd)%pu==0)return t+(e-f0);{let n=ap.get(t);return n&&(n=n.get(e),n)?n:-1}}function v3(t){Dv||e5();let e=[],n=[],r=!1;function i(s){let o=Dv.get(s);o&&(r=!0,s|=o),e.push(s)}for(let s of t)for(;;){if(s<128)e.push(s);else if(y3(s)){let o=s-qd,a=o/h0|0,l=o%h0/pu|0,c=o%pu;i(u0+a),i(d0+l),c>0&&i(f0+c)}else{let o=$v.get(s);o?n.push(...o):i(s)}if(!n.length)break;s=n.pop()}if(r&&e.length>1){let s=Zu(e[0]);for(let o=1;o<e.length;o++){let a=Zu(e[o]);if(a==0||s<=a){s=a;continue}let l=o-1;for(;;){let c=e[l+1];if(e[l+1]=e[l],e[l]=c,!l||(s=Zu(e[--l]),s<=a))break}s=Zu(e[o])}}return e}function n5(t){let e=[],n=[],r=-1,i=0;for(let s of t){let o=Zu(s),a=m3(s);if(r==-1)o==0?r=a:e.push(a);else if(i>0&&i>=o)o==0?(e.push(r,...n),n.length=0,r=a):n.push(a),i=o;else{let l=t5(r,a);l>=0?r=l:i==0&&o==0?(e.push(r),r=a):(n.push(a),i=o)}}return r>=0&&e.push(r,...n),e}function w3(t){return v3(t).map(m3)}function r5(t){return n5(v3(t))}const Y2=45,b3=".",E3=65039,A3=1,p0=t=>Array.from(t);function Qd(t,e){return t.P.has(e)||t.Q.has(e)}class i5 extends Array{get is_emoji(){return!0}}let Uv,S3,wa,Fv,x3,lc,_m,xl,oa,J2,jv;function X1(){if(Uv)return;let t=c3(BM);const e=()=>Gd(t),n=()=>new Set(e()),r=(u,d)=>d.forEach(f=>u.add(f));Uv=new Map(d3(t)),S3=n(),wa=e(),Fv=new Set(e().map(u=>wa[u])),wa=new Set(wa),x3=n(),n();let i=u3(t),s=t();const o=()=>{let u=new Set;return e().forEach(d=>r(u,i[d])),r(u,e()),u};lc=Wd(u=>{let d=Wd(t).map(f=>f+96);if(d.length){let f=u>=s;d[0]-=32,d=hu(d),f&&(d=`Restricted[${d}]`);let h=o(),m=o(),g=!t();return{N:d,P:h,Q:m,M:g,R:f}}}),_m=n(),xl=new Map;let a=e().concat(p0(_m)).sort((u,d)=>u-d);a.forEach((u,d)=>{let f=t(),h=a[d]=f?a[d-f]:{V:[],M:new Map};h.V.push(u),_m.has(u)||xl.set(u,h)});for(let{V:u,M:d}of new Set(xl.values())){let f=[];for(let m of u){let g=lc.filter(p=>Qd(p,m)),w=f.find(({G:p})=>g.some(v=>p.has(v)));w||(w={G:new Set,V:[]},f.push(w)),w.V.push(m),r(w.G,g)}let h=f.flatMap(m=>p0(m.G));for(let{G:m,V:g}of f){let w=new Set(h.filter(p=>!m.has(p)));for(let p of g)d.set(p,w)}}oa=new Set;let l=new Set;const c=u=>oa.has(u)?l.add(u):oa.add(u);for(let u of lc){for(let d of u.P)c(d);for(let d of u.Q)c(d)}for(let u of oa)!xl.has(u)&&!l.has(u)&&xl.set(u,A3);r(oa,w3(oa)),J2=zM(t).map(u=>i5.from(u)).sort(WM),jv=new Map;for(let u of J2){let d=[jv];for(let f of u){let h=d.map(m=>{let g=m.get(f);return g||(g=new Map,m.set(f,g)),g});f===E3?d.push(...h):d=h}for(let f of d)f.V=u}}function eb(t){return(C3(t)?"":`${tb(Cg([t]))} `)+h3(t)}function tb(t){return`"${t}"`}function s5(t){if(t.length>=4&&t[2]==Y2&&t[3]==Y2)throw new Error(`invalid label extension: "${hu(t.slice(0,4))}"`)}function o5(t){for(let n=t.lastIndexOf(95);n>0;)if(t[--n]!==95)throw new Error("underscore allowed only at start")}function a5(t){let e=t[0],n=W2.get(e);if(n)throw md(`leading ${n}`);let r=t.length,i=-1;for(let s=1;s<r;s++){e=t[s];let o=W2.get(e);if(o){if(i==s)throw md(`${n} + ${o}`);i=s+1,n=o}}if(i==r)throw md(`trailing ${n}`)}function Cg(t,e=1/0,n=h3){let r=[];l5(t[0])&&r.push(""),t.length>e&&(e>>=1,t=[...t.slice(0,e),8230,...t.slice(-e)]);let i=0,s=t.length;for(let o=0;o<s;o++){let a=t[o];C3(a)&&(r.push(hu(t.slice(i,o))),r.push(n(a)),i=o+1)}return r.push(hu(t.slice(i,s))),r.join("")}function l5(t){return X1(),wa.has(t)}function C3(t){return X1(),x3.has(t)}function c5(t){return h5(u5(t,r5,m5))}function u5(t,e,n){if(!t)return[];X1();let r=0;return t.split(b3).map(i=>{let s=GM(i),o={input:s,offset:r};r+=s.length+1;try{let a=o.tokens=g5(s,e,n),l=a.length,c;if(!l)throw new Error("empty label");let u=o.output=a.flat();if(o5(u),!(o.emoji=l>1||a[0].is_emoji)&&u.every(f=>f<128))s5(u),c="ASCII";else{let f=a.flatMap(h=>h.is_emoji?[]:h);if(!f.length)c="Emoji";else{if(wa.has(u[0]))throw md("leading combining mark");for(let g=1;g<l;g++){let w=a[g];if(!w.is_emoji&&wa.has(w[0]))throw md(`emoji + combining mark: "${hu(a[g-1])} + ${Cg([w[0]])}"`)}a5(u);let h=p0(new Set(f)),[m]=f5(h);p5(m,f),d5(m,h),c=m.N}}o.type=c}catch(a){o.error=a}return o})}function d5(t,e){let n,r=[];for(let i of e){let s=xl.get(i);if(s===A3)return;if(s){let o=s.M.get(i);if(n=n?n.filter(a=>o.has(a)):p0(o),!n.length)return}else r.push(i)}if(n){for(let i of n)if(r.every(s=>Qd(i,s)))throw new Error(`whole-script confusable: ${t.N}/${i.N}`)}}function f5(t){let e=lc;for(let n of t){let r=e.filter(i=>Qd(i,n));if(!r.length)throw lc.some(i=>Qd(i,n))?_3(e[0],n):k3(n);if(e=r,r.length==1)break}return e}function h5(t){return t.map(({input:e,error:n,output:r})=>{if(n){let i=n.message;throw new Error(t.length==1?i:`Invalid label ${tb(Cg(e,63))}: ${i}`)}return hu(r)}).join(b3)}function k3(t){return new Error(`disallowed character: ${eb(t)}`)}function _3(t,e){let n=eb(e),r=lc.find(i=>i.P.has(e));return r&&(n=`${r.N} ${n}`),new Error(`illegal mixture: ${t.N} + ${n}`)}function md(t){return new Error(`illegal placement: ${t}`)}function p5(t,e){for(let n of e)if(!Qd(t,n))throw _3(t,n);if(t.M){let n=w3(e);for(let r=1,i=n.length;r<i;r++)if(Fv.has(n[r])){let s=r+1;for(let o;s<i&&Fv.has(o=n[s]);s++)for(let a=r;a<s;a++)if(n[a]==o)throw new Error(`duplicate non-spacing marks: ${eb(o)}`);if(s-r>q2)throw new Error(`excessive non-spacing marks: ${tb(Cg(n.slice(r-1,s)))} (${s-r}/${q2})`);r=s}}}function g5(t,e,n){let r=[],i=[];for(t=t.slice().reverse();t.length;){let s=y5(t);if(s)i.length&&(r.push(e(i)),i=[]),r.push(n(s));else{let o=t.pop();if(oa.has(o))i.push(o);else{let a=Uv.get(o);if(a)i.push(...a);else if(!S3.has(o))throw k3(o)}}}return i.length&&r.push(e(i)),r}function m5(t){return t.filter(e=>e!=E3)}function y5(t,e){let n=jv,r,i=t.length;for(;i&&(n=n.get(t[--i]),!!n);){let{V:s}=n;s&&(r=s,t.length=i)}return r}const T3=new Uint8Array(32);T3.fill(0);function Z2(t){return G(t.length!==0,"invalid ENS name; empty component","comp",t),t}function P3(t){const e=ws(v5(t)),n=[];if(t.length===0)return n;let r=0;for(let i=0;i<e.length;i++)e[i]===46&&(n.push(Z2(e.slice(r,i))),r=i+1);return G(r<e.length,"invalid ENS name; empty component","name",t),n.push(Z2(e.slice(r))),n}function v5(t){try{if(t.length===0)throw new Error("empty label");return c5(t)}catch(e){G(!1,`invalid ENS name (${e.message})`,"name",t)}}function Hv(t){G(typeof t=="string","invalid ENS name; not a string","name",t),G(t.length,"invalid ENS name (empty label)","name",t);let e=T3;const n=P3(t);for(;n.length;)e=Ct(vt([e,Ct(n.pop())]));return ve(e)}function w5(t,e){const n=e;return G(n<=255,"DNS encoded label cannot exceed 255","length",n),ve(vt(P3(t).map(r=>{G(r.length<=n,`label ${JSON.stringify(t)} exceeds ${n} bytes`,"name",t);const i=new Uint8Array(r.length+1);return i.set(r,1),i[0]=i.length-1,i})))+"00"}const R3=new Uint8Array(32);R3.fill(0);const b5=BigInt(-1),I3=BigInt(0),O3=BigInt(1),E5=BigInt("0xffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffff");function A5(t){const e=Be(t),n=e.length%32;return n?vt([e,R3.slice(n)]):ve(e)}const S5=Ho(O3,32),x5=Ho(I3,32),X2={name:"string",version:"string",chainId:"uint256",verifyingContract:"address",salt:"bytes32"},Tm=["name","version","chainId","verifyingContract","salt"];function eA(t){return function(e){return G(typeof e=="string",`invalid domain value for ${JSON.stringify(t)}`,`domain.${t}`,e),e}}const C5={name:eA("name"),version:eA("version"),chainId:function(t){const e=Ae(t,"domain.chainId");return G(e>=0,"invalid chain ID","domain.chainId",t),Number.isSafeInteger(e)?Number(e):Qr(e)},verifyingContract:function(t){try{return Ze(t).toLowerCase()}catch{}G(!1,'invalid domain value "verifyingContract"',"domain.verifyingContract",t)},salt:function(t){const e=Be(t,"domain.salt");return G(e.length===32,'invalid domain value "salt"',"domain.salt",t),ve(e)}};function Pm(t){{const e=t.match(/^(u?)int(\d+)$/);if(e){const n=e[1]==="",r=parseInt(e[2]);G(r%8===0&&r!==0&&r<=256&&e[2]===String(r),"invalid numeric width","type",t);const i=ya(E5,n?r-1:r),s=n?(i+O3)*b5:I3;return function(o){const a=Ae(o,"value");return G(a>=s&&a<=i,`value out-of-bounds for ${t}`,"value",a),Ho(n?y_(a,256):a,32)}}}{const e=t.match(/^bytes(\d+)$/);if(e){const n=parseInt(e[1]);return G(n!==0&&n<=32&&e[1]===String(n),"invalid bytes width","type",t),function(r){const i=Be(r);return G(i.length===n,`invalid length for ${t}`,"value",r),A5(r)}}}switch(t){case"address":return function(e){return ks(Ze(e),32)};case"bool":return function(e){return e?S5:x5};case"bytes":return function(e){return Ct(e)};case"string":return function(e){return tl(e)}}return null}function tA(t,e){return`${t}(${e.map(({name:n,type:r})=>r+" "+n).join(",")})`}function vh(t){const e=t.match(/^([^\x5b]*)((\x5b\d*\x5d)*)(\x5b(\d*)\x5d)$/);return e?{base:e[1],index:e[2]+e[4],array:{base:e[1],prefix:e[1]+e[2],count:e[5]?parseInt(e[5]):-1}}:{base:t}}var wf,rs,$c,W0,N3;const gr=class gr{constructor(e){ee(this,W0);Y(this,"primaryType");ee(this,wf);ee(this,rs);ee(this,$c);H(this,rs,new Map),H(this,$c,new Map);const n=new Map,r=new Map,i=new Map,s={};Object.keys(e).forEach(l=>{s[l]=e[l].map(({name:c,type:u})=>{let{base:d,index:f}=vh(u);return d==="int"&&!e.int&&(d="int256"),d==="uint"&&!e.uint&&(d="uint256"),{name:c,type:d+(f||"")}}),n.set(l,new Set),r.set(l,[]),i.set(l,new Set)}),H(this,wf,JSON.stringify(s));for(const l in s){const c=new Set;for(const u of s[l]){G(!c.has(u.name),`duplicate variable name ${JSON.stringify(u.name)} in ${JSON.stringify(l)}`,"types",e),c.add(u.name);const d=vh(u.type).base;G(d!==l,`circular type reference to ${JSON.stringify(d)}`,"types",e),!Pm(d)&&(G(r.has(d),`unknown type ${JSON.stringify(d)}`,"types",e),r.get(d).push(l),n.get(l).add(d))}}const o=Array.from(r.keys()).filter(l=>r.get(l).length===0);G(o.length!==0,"missing primary type","types",e),G(o.length===1,`ambiguous primary types or unused types: ${o.map(l=>JSON.stringify(l)).join(", ")}`,"types",e),_e(this,{primaryType:o[0]});function a(l,c){G(!c.has(l),`circular type reference to ${JSON.stringify(l)}`,"types",e),c.add(l);for(const u of n.get(l))if(r.has(u)){a(u,c);for(const d of c)i.get(d).add(u)}c.delete(l)}a(this.primaryType,new Set);for(const[l,c]of i){const u=Array.from(c);u.sort(),_(this,rs).set(l,tA(l,s[l])+u.map(d=>tA(d,s[d])).join(""))}}get types(){return JSON.parse(_(this,wf))}getEncoder(e){let n=_(this,$c).get(e);return n||(n=ge(this,W0,N3).call(this,e),_(this,$c).set(e,n)),n}encodeType(e){const n=_(this,rs).get(e);return G(n,`unknown type: ${JSON.stringify(e)}`,"name",e),n}encodeData(e,n){return this.getEncoder(e)(n)}hashStruct(e,n){return Ct(this.encodeData(e,n))}encode(e){return this.encodeData(this.primaryType,e)}hash(e){return this.hashStruct(this.primaryType,e)}_visit(e,n,r){if(Pm(e))return r(e,n);const i=vh(e).array;if(i)return G(i.count===-1||i.count===n.length,`array length mismatch; expected length ${i.count}`,"value",n),n.map(o=>this._visit(i.prefix,o,r));const s=this.types[e];if(s)return s.reduce((o,{name:a,type:l})=>(o[a]=this._visit(l,n[a],r),o),{});G(!1,`unknown type: ${e}`,"type",e)}visit(e,n){return this._visit(this.primaryType,e,n)}static from(e){return new gr(e)}static getPrimaryType(e){return gr.from(e).primaryType}static hashStruct(e,n,r){return gr.from(n).hashStruct(e,r)}static hashDomain(e){const n=[];for(const r in e){if(e[r]==null)continue;const i=X2[r];G(i,`invalid typed-data domain key: ${JSON.stringify(r)}`,"domain",e),n.push({name:r,type:i})}return n.sort((r,i)=>Tm.indexOf(r.name)-Tm.indexOf(i.name)),gr.hashStruct("EIP712Domain",{EIP712Domain:n},e)}static encode(e,n,r){return vt(["0x1901",gr.hashDomain(e),gr.from(n).hash(r)])}static hash(e,n,r){return Ct(gr.encode(e,n,r))}static async resolveNames(e,n,r,i){e=Object.assign({},e);for(const a in e)e[a]==null&&delete e[a];const s={};e.verifyingContract&&!it(e.verifyingContract,20)&&(s[e.verifyingContract]="0x");const o=gr.from(n);o.visit(r,(a,l)=>(a==="address"&&!it(l,20)&&(s[l]="0x"),l));for(const a in s)s[a]=await i(a);return e.verifyingContract&&s[e.verifyingContract]&&(e.verifyingContract=s[e.verifyingContract]),r=o.visit(r,(a,l)=>a==="address"&&s[l]?s[l]:l),{domain:e,value:r}}static getPayload(e,n,r){gr.hashDomain(e);const i={},s=[];Tm.forEach(l=>{const c=e[l];c!=null&&(i[l]=C5[l](c),s.push({name:l,type:X2[l]}))});const o=gr.from(n);n=o.types;const a=Object.assign({},n);return G(a.EIP712Domain==null,"types must not contain EIP712Domain type","types.EIP712Domain",n),a.EIP712Domain=s,o.encode(r),{types:a,domain:i,primaryType:o.primaryType,message:o.visit(r,(l,c)=>{if(l.match(/^bytes(\d*)/))return ve(Be(c));if(l.match(/^u?int/))return Ae(c).toString();switch(l){case"address":return c.toLowerCase();case"bool":return!!c;case"string":return G(typeof c=="string","invalid string","value",c),c}G(!1,"unsupported type","type",l)})}}};wf=new WeakMap,rs=new WeakMap,$c=new WeakMap,W0=new WeakSet,N3=function(e){{const i=Pm(e);if(i)return i}const n=vh(e).array;if(n){const i=n.prefix,s=this.getEncoder(i);return o=>{G(n.count===-1||n.count===o.length,`array length mismatch; expected length ${n.count}`,"value",o);let a=o.map(s);return _(this,rs).has(i)&&(a=a.map(Ct)),Ct(vt(a))}}const r=this.types[e];if(r){const i=tl(_(this,rs).get(e));return s=>{const o=r.map(({name:a,type:l})=>{const c=this.getEncoder(l)(s[a]);return _(this,rs).has(l)?Ct(c):c});return o.unshift(i),vt(o)}}G(!1,`unknown type: ${e}`,"type",e)};let g0=gr;function An(t){const e=new Set;return t.forEach(n=>e.add(n)),Object.freeze(e)}const k5="external public payable override",_5=An(k5.split(" ")),M3="constant external internal payable private public pure view override",T5=An(M3.split(" ")),L3="constructor error event fallback function receive struct",B3=An(L3.split(" ")),D3="calldata memory storage payable indexed",P5=An(D3.split(" ")),R5="tuple returns",I5=[L3,D3,R5,M3].join(" "),O5=An(I5.split(" ")),N5={"(":"OPEN_PAREN",")":"CLOSE_PAREN","[":"OPEN_BRACKET","]":"CLOSE_BRACKET",",":"COMMA","@":"AT"},M5=new RegExp("^(\\s*)"),L5=new RegExp("^([0-9]+)"),B5=new RegExp("^([a-zA-Z$_][a-zA-Z0-9$_]*)"),$3=new RegExp("^([a-zA-Z$_][a-zA-Z0-9$_]*)$"),U3=new RegExp("^(address|bool|bytes([0-9]*)|string|u?int([0-9]*))$");var jt,zr,bf,Kv;const q0=class q0{constructor(e){ee(this,bf);ee(this,jt);ee(this,zr);H(this,jt,0),H(this,zr,e.slice())}get offset(){return _(this,jt)}get length(){return _(this,zr).length-_(this,jt)}clone(){return new q0(_(this,zr))}reset(){H(this,jt,0)}popKeyword(e){const n=this.peek();if(n.type!=="KEYWORD"||!e.has(n.text))throw new Error(`expected keyword ${n.text}`);return this.pop().text}popType(e){if(this.peek().type!==e){const n=this.peek();throw new Error(`expected ${e}; got ${n.type} ${JSON.stringify(n.text)}`)}return this.pop().text}popParen(){const e=this.peek();if(e.type!=="OPEN_PAREN")throw new Error("bad start");const n=ge(this,bf,Kv).call(this,_(this,jt)+1,e.match+1);return H(this,jt,e.match+1),n}popParams(){const e=this.peek();if(e.type!=="OPEN_PAREN")throw new Error("bad start");const n=[];for(;_(this,jt)<e.match-1;){const r=this.peek().linkNext;n.push(ge(this,bf,Kv).call(this,_(this,jt)+1,r)),H(this,jt,r)}return H(this,jt,e.match+1),n}peek(){if(_(this,jt)>=_(this,zr).length)throw new Error("out-of-bounds");return _(this,zr)[_(this,jt)]}peekKeyword(e){const n=this.peekType("KEYWORD");return n!=null&&e.has(n)?n:null}peekType(e){if(this.length===0)return null;const n=this.peek();return n.type===e?n.text:null}pop(){const e=this.peek();return Pu(this,jt)._++,e}toString(){const e=[];for(let n=_(this,jt);n<_(this,zr).length;n++){const r=_(this,zr)[n];e.push(`${r.type}:${r.text}`)}return`<TokenString ${e.join(" ")}>`}};jt=new WeakMap,zr=new WeakMap,bf=new WeakSet,Kv=function(e=0,n=0){return new q0(_(this,zr).slice(e,n).map(r=>Object.freeze(Object.assign({},r,{match:r.match-e,linkBack:r.linkBack-e,linkNext:r.linkNext-e}))))};let ri=q0;function Zo(t){const e=[],n=o=>{const a=s<t.length?JSON.stringify(t[s]):"$EOI";throw new Error(`invalid token ${a} at ${s}: ${o}`)};let r=[],i=[],s=0;for(;s<t.length;){let o=t.substring(s),a=o.match(M5);a&&(s+=a[1].length,o=t.substring(s));const l={depth:r.length,linkBack:-1,linkNext:-1,match:-1,type:"",text:"",offset:s,value:-1};e.push(l);let c=N5[o[0]]||"";if(c){if(l.type=c,l.text=o[0],s++,c==="OPEN_PAREN")r.push(e.length-1),i.push(e.length-1);else if(c=="CLOSE_PAREN")r.length===0&&n("no matching open bracket"),l.match=r.pop(),e[l.match].match=e.length-1,l.depth--,l.linkBack=i.pop(),e[l.linkBack].linkNext=e.length-1;else if(c==="COMMA")l.linkBack=i.pop(),e[l.linkBack].linkNext=e.length-1,i.push(e.length-1);else if(c==="OPEN_BRACKET")l.type="BRACKET";else if(c==="CLOSE_BRACKET"){let u=e.pop().text;if(e.length>0&&e[e.length-1].type==="NUMBER"){const d=e.pop().text;u=d+u,e[e.length-1].value=Oe(d)}if(e.length===0||e[e.length-1].type!=="BRACKET")throw new Error("missing opening bracket");e[e.length-1].text+=u}continue}if(a=o.match(B5),a){if(l.text=a[1],s+=l.text.length,O5.has(l.text)){l.type="KEYWORD";continue}if(l.text.match(U3)){l.type="TYPE";continue}l.type="ID";continue}if(a=o.match(L5),a){l.text=a[1],l.type="NUMBER",s+=l.text.length;continue}throw new Error(`unexpected token ${JSON.stringify(o[0])} at position ${s}`)}return new ri(e.map(o=>Object.freeze(o)))}function nA(t,e){let n=[];for(const r in e.keys())t.has(r)&&n.push(r);if(n.length>1)throw new Error(`conflicting types: ${n.join(", ")}`)}function kg(t,e){if(e.peekKeyword(B3)){const n=e.pop().text;if(n!==t)throw new Error(`expected ${t}, got ${n}`)}return e.popType("ID")}function _s(t,e){const n=new Set;for(;;){const r=t.peekType("KEYWORD");if(r==null||e&&!e.has(r))break;if(t.pop(),n.has(r))throw new Error(`duplicate keywords: ${JSON.stringify(r)}`);n.add(r)}return Object.freeze(n)}function F3(t){let e=_s(t,T5);return nA(e,An("constant payable nonpayable".split(" "))),nA(e,An("pure view payable nonpayable".split(" "))),e.has("view")?"view":e.has("pure")?"pure":e.has("payable")?"payable":e.has("nonpayable")?"nonpayable":e.has("constant")?"view":"nonpayable"}function bs(t,e){return t.popParams().map(n=>qt.from(n,e))}function j3(t){if(t.peekType("AT")){if(t.pop(),t.peekType("NUMBER"))return Ae(t.pop().text);throw new Error("invalid gas")}return null}function nl(t){if(t.length)throw new Error(`unexpected tokens at offset ${t.offset}: ${t.toString()}`)}const D5=new RegExp(/^(.*)\[([0-9]*)\]$/);function rA(t){const e=t.match(U3);if(G(e,"invalid type","type",t),t==="uint")return"uint256";if(t==="int")return"int256";if(e[2]){const n=parseInt(e[2]);G(n!==0&&n<=32,"invalid bytes length","type",t)}else if(e[3]){const n=parseInt(e[3]);G(n!==0&&n<=256&&n%8===0,"invalid numeric width","type",t)}return t}const dt={},Kn=Symbol.for("_ethers_internal"),iA="_ParamTypeInternal",sA="_ErrorInternal",oA="_EventInternal",aA="_ConstructorInternal",lA="_FallbackInternal",cA="_FunctionInternal",uA="_StructInternal";var Uc,lp;const mr=class mr{constructor(e,n,r,i,s,o,a,l){ee(this,Uc);Y(this,"name");Y(this,"type");Y(this,"baseType");Y(this,"indexed");Y(this,"components");Y(this,"arrayLength");Y(this,"arrayChildren");if(Nf(e,dt,"ParamType"),Object.defineProperty(this,Kn,{value:iA}),o&&(o=Object.freeze(o.slice())),i==="array"){if(a==null||l==null)throw new Error("")}else if(a!=null||l!=null)throw new Error("");if(i==="tuple"){if(o==null)throw new Error("")}else if(o!=null)throw new Error("");_e(this,{name:n,type:r,baseType:i,indexed:s,components:o,arrayLength:a,arrayChildren:l})}format(e){if(e==null&&(e="sighash"),e==="json"){const r=this.name||"";if(this.isArray()){const s=JSON.parse(this.arrayChildren.format("json"));return s.name=r,s.type+=`[${this.arrayLength<0?"":String(this.arrayLength)}]`,JSON.stringify(s)}const i={type:this.baseType==="tuple"?"tuple":this.type,name:r};return typeof this.indexed=="boolean"&&(i.indexed=this.indexed),this.isTuple()&&(i.components=this.components.map(s=>JSON.parse(s.format(e)))),JSON.stringify(i)}let n="";return this.isArray()?(n+=this.arrayChildren.format(e),n+=`[${this.arrayLength<0?"":String(this.arrayLength)}]`):this.isTuple()?n+="("+this.components.map(r=>r.format(e)).join(e==="full"?", ":",")+")":n+=this.type,e!=="sighash"&&(this.indexed===!0&&(n+=" indexed"),e==="full"&&this.name&&(n+=" "+this.name)),n}isArray(){return this.baseType==="array"}isTuple(){return this.baseType==="tuple"}isIndexable(){return this.indexed!=null}walk(e,n){if(this.isArray()){if(!Array.isArray(e))throw new Error("invalid array value");if(this.arrayLength!==-1&&e.length!==this.arrayLength)throw new Error("array is wrong length");const r=this;return e.map(i=>r.arrayChildren.walk(i,n))}if(this.isTuple()){if(!Array.isArray(e))throw new Error("invalid tuple value");if(e.length!==this.components.length)throw new Error("array is wrong length");const r=this;return e.map((i,s)=>r.components[s].walk(i,n))}return n(this.type,e)}async walkAsync(e,n){const r=[],i=[e];return ge(this,Uc,lp).call(this,r,e,n,s=>{i[0]=s}),r.length&&await Promise.all(r),i[0]}static from(e,n){if(mr.isParamType(e))return e;if(typeof e=="string")try{return mr.from(Zo(e),n)}catch{G(!1,"invalid param type","obj",e)}else if(e instanceof ri){let a="",l="",c=null;_s(e,An(["tuple"])).has("tuple")||e.peekType("OPEN_PAREN")?(l="tuple",c=e.popParams().map(g=>mr.from(g)),a=`tuple(${c.map(g=>g.format()).join(",")})`):(a=rA(e.popType("TYPE")),l=a);let u=null,d=null;for(;e.length&&e.peekType("BRACKET");){const g=e.pop();u=new mr(dt,"",a,l,null,c,d,u),d=g.value,a+=g.text,l="array",c=null}let f=null;if(_s(e,P5).has("indexed")){if(!n)throw new Error("");f=!0}const m=e.peekType("ID")?e.pop().text:"";if(e.length)throw new Error("leftover tokens");return new mr(dt,m,a,l,f,c,d,u)}const r=e.name;G(!r||typeof r=="string"&&r.match($3),"invalid name","obj.name",r);let i=e.indexed;i!=null&&(G(n,"parameter cannot be indexed","obj.indexed",e.indexed),i=!!i);let s=e.type,o=s.match(D5);if(o){const a=parseInt(o[2]||"-1"),l=mr.from({type:o[1],components:e.components});return new mr(dt,r||"",s,"array",i,null,a,l)}if(s==="tuple"||s.startsWith("tuple(")||s.startsWith("(")){const a=e.components!=null?e.components.map(c=>mr.from(c)):null;return new mr(dt,r||"",s,"tuple",i,a,null,null)}return s=rA(e.type),new mr(dt,r||"",s,s,i,null,null,null)}static isParamType(e){return e&&e[Kn]===iA}};Uc=new WeakSet,lp=function(e,n,r,i){if(this.isArray()){if(!Array.isArray(n))throw new Error("invalid array value");if(this.arrayLength!==-1&&n.length!==this.arrayLength)throw new Error("array is wrong length");const o=this.arrayChildren,a=n.slice();a.forEach((l,c)=>{var u;ge(u=o,Uc,lp).call(u,e,l,r,d=>{a[c]=d})}),i(a);return}if(this.isTuple()){const o=this.components;let a;if(Array.isArray(n))a=n.slice();else{if(n==null||typeof n!="object")throw new Error("invalid tuple value");a=o.map(l=>{if(!l.name)throw new Error("cannot use object value with unnamed components");if(!(l.name in n))throw new Error(`missing value for component ${l.name}`);return n[l.name]})}if(a.length!==this.components.length)throw new Error("array is wrong length");a.forEach((l,c)=>{var u;ge(u=o[c],Uc,lp).call(u,e,l,r,d=>{a[c]=d})}),i(a);return}const s=r(this.type,n);s.then?e.push(async function(){i(await s)}()):i(s)};let qt=mr;class rl{constructor(e,n,r){Y(this,"type");Y(this,"inputs");Nf(e,dt,"Fragment"),r=Object.freeze(r.slice()),_e(this,{type:n,inputs:r})}static from(e){if(typeof e=="string"){try{rl.from(JSON.parse(e))}catch{}return rl.from(Zo(e))}if(e instanceof ri)switch(e.peekKeyword(B3)){case"constructor":return hs.from(e);case"error":return Ln.from(e);case"event":return Si.from(e);case"fallback":case"receive":return qi.from(e);case"function":return xi.from(e);case"struct":return qa.from(e)}else if(typeof e=="object"){switch(e.type){case"constructor":return hs.from(e);case"error":return Ln.from(e);case"event":return Si.from(e);case"fallback":case"receive":return qi.from(e);case"function":return xi.from(e);case"struct":return qa.from(e)}de(!1,`unsupported type: ${e.type}`,"UNSUPPORTED_OPERATION",{operation:"Fragment.from"})}G(!1,"unsupported frgament object","obj",e)}static isConstructor(e){return hs.isFragment(e)}static isError(e){return Ln.isFragment(e)}static isEvent(e){return Si.isFragment(e)}static isFunction(e){return xi.isFragment(e)}static isStruct(e){return qa.isFragment(e)}}class _g extends rl{constructor(n,r,i,s){super(n,r,s);Y(this,"name");G(typeof i=="string"&&i.match($3),"invalid identifier","name",i),s=Object.freeze(s.slice()),_e(this,{name:i})}}function Yd(t,e){return"("+e.map(n=>n.format(t)).join(t==="full"?", ":",")+")"}class Ln extends _g{constructor(e,n,r){super(e,"error",n,r),Object.defineProperty(this,Kn,{value:sA})}get selector(){return tl(this.format("sighash")).substring(0,10)}format(e){if(e==null&&(e="sighash"),e==="json")return JSON.stringify({type:"error",name:this.name,inputs:this.inputs.map(r=>JSON.parse(r.format(e)))});const n=[];return e!=="sighash"&&n.push("error"),n.push(this.name+Yd(e,this.inputs)),n.join(" ")}static from(e){if(Ln.isFragment(e))return e;if(typeof e=="string")return Ln.from(Zo(e));if(e instanceof ri){const n=kg("error",e),r=bs(e);return nl(e),new Ln(dt,n,r)}return new Ln(dt,e.name,e.inputs?e.inputs.map(qt.from):[])}static isFragment(e){return e&&e[Kn]===sA}}class Si extends _g{constructor(n,r,i,s){super(n,"event",r,i);Y(this,"anonymous");Object.defineProperty(this,Kn,{value:oA}),_e(this,{anonymous:s})}get topicHash(){return tl(this.format("sighash"))}format(n){if(n==null&&(n="sighash"),n==="json")return JSON.stringify({type:"event",anonymous:this.anonymous,name:this.name,inputs:this.inputs.map(i=>JSON.parse(i.format(n)))});const r=[];return n!=="sighash"&&r.push("event"),r.push(this.name+Yd(n,this.inputs)),n!=="sighash"&&this.anonymous&&r.push("anonymous"),r.join(" ")}static getTopicHash(n,r){return r=(r||[]).map(s=>qt.from(s)),new Si(dt,n,r,!1).topicHash}static from(n){if(Si.isFragment(n))return n;if(typeof n=="string")try{return Si.from(Zo(n))}catch{G(!1,"invalid event fragment","obj",n)}else if(n instanceof ri){const r=kg("event",n),i=bs(n,!0),s=!!_s(n,An(["anonymous"])).has("anonymous");return nl(n),new Si(dt,r,i,s)}return new Si(dt,n.name,n.inputs?n.inputs.map(r=>qt.from(r,!0)):[],!!n.anonymous)}static isFragment(n){return n&&n[Kn]===oA}}class hs extends rl{constructor(n,r,i,s,o){super(n,r,i);Y(this,"payable");Y(this,"gas");Object.defineProperty(this,Kn,{value:aA}),_e(this,{payable:s,gas:o})}format(n){if(de(n!=null&&n!=="sighash","cannot format a constructor for sighash","UNSUPPORTED_OPERATION",{operation:"format(sighash)"}),n==="json")return JSON.stringify({type:"constructor",stateMutability:this.payable?"payable":"undefined",payable:this.payable,gas:this.gas!=null?this.gas:void 0,inputs:this.inputs.map(i=>JSON.parse(i.format(n)))});const r=[`constructor${Yd(n,this.inputs)}`];return this.payable&&r.push("payable"),this.gas!=null&&r.push(`@${this.gas.toString()}`),r.join(" ")}static from(n){if(hs.isFragment(n))return n;if(typeof n=="string")try{return hs.from(Zo(n))}catch{G(!1,"invalid constuctor fragment","obj",n)}else if(n instanceof ri){_s(n,An(["constructor"]));const r=bs(n),i=!!_s(n,_5).has("payable"),s=j3(n);return nl(n),new hs(dt,"constructor",r,i,s)}return new hs(dt,"constructor",n.inputs?n.inputs.map(qt.from):[],!!n.payable,n.gas!=null?n.gas:null)}static isFragment(n){return n&&n[Kn]===aA}}class qi extends rl{constructor(n,r,i){super(n,"fallback",r);Y(this,"payable");Object.defineProperty(this,Kn,{value:lA}),_e(this,{payable:i})}format(n){const r=this.inputs.length===0?"receive":"fallback";if(n==="json"){const i=this.payable?"payable":"nonpayable";return JSON.stringify({type:r,stateMutability:i})}return`${r}()${this.payable?" payable":""}`}static from(n){if(qi.isFragment(n))return n;if(typeof n=="string")try{return qi.from(Zo(n))}catch{G(!1,"invalid fallback fragment","obj",n)}else if(n instanceof ri){const r=n.toString(),i=n.peekKeyword(An(["fallback","receive"]));if(G(i,"type must be fallback or receive","obj",r),n.popKeyword(An(["fallback","receive"]))==="receive"){const l=bs(n);return G(l.length===0,"receive cannot have arguments","obj.inputs",l),_s(n,An(["payable"])),nl(n),new qi(dt,[],!0)}let o=bs(n);o.length?G(o.length===1&&o[0].type==="bytes","invalid fallback inputs","obj.inputs",o.map(l=>l.format("minimal")).join(", ")):o=[qt.from("bytes")];const a=F3(n);if(G(a==="nonpayable"||a==="payable","fallback cannot be constants","obj.stateMutability",a),_s(n,An(["returns"])).has("returns")){const l=bs(n);G(l.length===1&&l[0].type==="bytes","invalid fallback outputs","obj.outputs",l.map(c=>c.format("minimal")).join(", "))}return nl(n),new qi(dt,o,a==="payable")}if(n.type==="receive")return new qi(dt,[],!0);if(n.type==="fallback"){const r=[qt.from("bytes")],i=n.stateMutability==="payable";return new qi(dt,r,i)}G(!1,"invalid fallback description","obj",n)}static isFragment(n){return n&&n[Kn]===lA}}class xi extends _g{constructor(n,r,i,s,o,a){super(n,"function",r,s);Y(this,"constant");Y(this,"outputs");Y(this,"stateMutability");Y(this,"payable");Y(this,"gas");Object.defineProperty(this,Kn,{value:cA}),o=Object.freeze(o.slice()),_e(this,{constant:i==="view"||i==="pure",gas:a,outputs:o,payable:i==="payable",stateMutability:i})}get selector(){return tl(this.format("sighash")).substring(0,10)}format(n){if(n==null&&(n="sighash"),n==="json")return JSON.stringify({type:"function",name:this.name,constant:this.constant,stateMutability:this.stateMutability!=="nonpayable"?this.stateMutability:void 0,payable:this.payable,gas:this.gas!=null?this.gas:void 0,inputs:this.inputs.map(i=>JSON.parse(i.format(n))),outputs:this.outputs.map(i=>JSON.parse(i.format(n)))});const r=[];return n!=="sighash"&&r.push("function"),r.push(this.name+Yd(n,this.inputs)),n!=="sighash"&&(this.stateMutability!=="nonpayable"&&r.push(this.stateMutability),this.outputs&&this.outputs.length&&(r.push("returns"),r.push(Yd(n,this.outputs))),this.gas!=null&&r.push(`@${this.gas.toString()}`)),r.join(" ")}static getSelector(n,r){return r=(r||[]).map(s=>qt.from(s)),new xi(dt,n,"view",r,[],null).selector}static from(n){if(xi.isFragment(n))return n;if(typeof n=="string")try{return xi.from(Zo(n))}catch{G(!1,"invalid function fragment","obj",n)}else if(n instanceof ri){const i=kg("function",n),s=bs(n),o=F3(n);let a=[];_s(n,An(["returns"])).has("returns")&&(a=bs(n));const l=j3(n);return nl(n),new xi(dt,i,o,s,a,l)}let r=n.stateMutability;return r==null&&(r="payable",typeof n.constant=="boolean"?(r="view",n.constant||(r="payable",typeof n.payable=="boolean"&&!n.payable&&(r="nonpayable"))):typeof n.payable=="boolean"&&!n.payable&&(r="nonpayable")),new xi(dt,n.name,r,n.inputs?n.inputs.map(qt.from):[],n.outputs?n.outputs.map(qt.from):[],n.gas!=null?n.gas:null)}static isFragment(n){return n&&n[Kn]===cA}}class qa extends _g{constructor(e,n,r){super(e,"struct",n,r),Object.defineProperty(this,Kn,{value:uA})}format(){throw new Error("@TODO")}static from(e){if(typeof e=="string")try{return qa.from(Zo(e))}catch{G(!1,"invalid struct fragment","obj",e)}else if(e instanceof ri){const n=kg("struct",e),r=bs(e);return nl(e),new qa(dt,n,r)}return new qa(dt,e.name,e.inputs?e.inputs.map(qt.from):[])}static isFragment(e){return e&&e[Kn]===uA}}const ii=new Map;ii.set(0,"GENERIC_PANIC");ii.set(1,"ASSERT_FALSE");ii.set(17,"OVERFLOW");ii.set(18,"DIVIDE_BY_ZERO");ii.set(33,"ENUM_RANGE_ERROR");ii.set(34,"BAD_STORAGE_DATA");ii.set(49,"STACK_UNDERFLOW");ii.set(50,"ARRAY_RANGE_ERROR");ii.set(65,"OUT_OF_MEMORY");ii.set(81,"UNINITIALIZED_FUNCTION_CALL");const $5=new RegExp(/^bytes([0-9]*)$/),U5=new RegExp(/^(u?int)([0-9]*)$/);let Rm=null,dA=1024;function F5(t,e,n,r){let i="missing revert data",s=null;const o=null;let a=null;if(n){i="execution reverted";const c=Be(n);if(n=ve(n),c.length===0)i+=" (no data present; likely require(false) occurred",s="require(false)";else if(c.length%32!==4)i+=" (could not decode reason; invalid data length)";else if(ve(c.slice(0,4))==="0x08c379a0")try{s=r.decode(["string"],c.slice(4))[0],a={signature:"Error(string)",name:"Error",args:[s]},i+=`: ${JSON.stringify(s)}`}catch{i+=" (could not decode reason; invalid string data)"}else if(ve(c.slice(0,4))==="0x4e487b71")try{const u=Number(r.decode(["uint256"],c.slice(4))[0]);a={signature:"Panic(uint256)",name:"Panic",args:[u]},s=`Panic due to ${ii.get(u)||"UNKNOWN"}(${u})`,i+=`: ${s}`}catch{i+=" (could not decode panic code)"}else i+=" (unknown custom error)"}const l={to:e.to?Ze(e.to):null,data:e.data||"0x"};return e.from&&(l.from=Ze(e.from)),at(i,"CALL_EXCEPTION",{action:t,data:n,reason:s,transaction:l,invocation:o,revert:a})}var fo,Cl;const Q0=class Q0{constructor(){ee(this,fo)}getDefaultValue(e){const n=e.map(i=>ge(this,fo,Cl).call(this,qt.from(i)));return new yh(n,"_").defaultValue()}encode(e,n){p_(n.length,e.length,"types/values length mismatch");const r=e.map(o=>ge(this,fo,Cl).call(this,qt.from(o))),i=new yh(r,"_"),s=new Pv;return i.encode(s,n),s.data}decode(e,n,r){const i=e.map(o=>ge(this,fo,Cl).call(this,qt.from(o)));return new yh(i,"_").decode(new Rv(n,r,dA))}static _setDefaultMaxInflation(e){G(typeof e=="number"&&Number.isInteger(e),"invalid defaultMaxInflation factor","value",e),dA=e}static defaultAbiCoder(){return Rm==null&&(Rm=new Q0),Rm}static getBuiltinCallException(e,n,r){return F5(e,n,r,Q0.defaultAbiCoder())}};fo=new WeakSet,Cl=function(e){if(e.isArray())return new iM(ge(this,fo,Cl).call(this,e.arrayChildren),e.arrayLength,e.name);if(e.isTuple())return new yh(e.components.map(r=>ge(this,fo,Cl).call(this,r)),e.name);switch(e.baseType){case"address":return new nM(e.name);case"bool":return new sM(e.name);case"string":return new pM(e.name);case"bytes":return new oM(e.name);case"":return new cM(e.name)}let n=e.type.match(U5);if(n){let r=parseInt(n[2]||"256");return G(r!==0&&r<=256&&r%8===0,"invalid "+n[1]+" bit length","param",e),new hM(r/8,n[1]==="int",e.name)}if(n=e.type.match($5),n){let r=parseInt(n[1]);return G(r!==0&&r<=32,"invalid bytes length","param",e),new aM(r,e.name)}G(!1,"invalid type","type",e.type)};let Jd=Q0;class j5{constructor(e,n,r){Y(this,"fragment");Y(this,"name");Y(this,"signature");Y(this,"topic");Y(this,"args");const i=e.name,s=e.format();_e(this,{fragment:e,name:i,signature:s,topic:n,args:r})}}class H5{constructor(e,n,r,i){Y(this,"fragment");Y(this,"name");Y(this,"args");Y(this,"signature");Y(this,"selector");Y(this,"value");const s=e.name,o=e.format();_e(this,{fragment:e,name:s,args:r,signature:o,selector:n,value:i})}}class K5{constructor(e,n,r){Y(this,"fragment");Y(this,"name");Y(this,"args");Y(this,"signature");Y(this,"selector");const i=e.name,s=e.format();_e(this,{fragment:e,name:i,args:r,signature:s,selector:n})}}class fA{constructor(e){Y(this,"hash");Y(this,"_isIndexed");_e(this,{hash:e,_isIndexed:!0})}static isIndexed(e){return!!(e&&e._isIndexed)}}const hA={0:"generic panic",1:"assert(false)",17:"arithmetic overflow",18:"division or modulo by zero",33:"enum overflow",34:"invalid encoded storage byte array accessed",49:"out-of-bounds array access; popping on an empty array",50:"out-of-bounds access of an array or bytesN",65:"out of memory",81:"uninitialized function"},pA={"0x08c379a0":{signature:"Error(string)",name:"Error",inputs:["string"],reason:t=>`reverted with reason string ${JSON.stringify(t)}`},"0x4e487b71":{signature:"Panic(uint256)",name:"Panic",inputs:["uint256"],reason:t=>{let e="unknown panic code";return t>=0&&t<=255&&hA[t.toString()]&&(e=hA[t.toString()]),`reverted with panic code 0x${t.toString(16)} (${e})`}}};var mi,yi,vi,tn,$i,cp,up;const fa=class fa{constructor(e){ee(this,$i);Y(this,"fragments");Y(this,"deploy");Y(this,"fallback");Y(this,"receive");ee(this,mi);ee(this,yi);ee(this,vi);ee(this,tn);let n=[];typeof e=="string"?n=JSON.parse(e):n=e,H(this,vi,new Map),H(this,mi,new Map),H(this,yi,new Map);const r=[];for(const o of n)try{r.push(rl.from(o))}catch(a){console.log(`[Warning] Invalid Fragment ${JSON.stringify(o)}:`,a.message)}_e(this,{fragments:Object.freeze(r)});let i=null,s=!1;H(this,tn,this.getAbiCoder()),this.fragments.forEach((o,a)=>{let l;switch(o.type){case"constructor":if(this.deploy){console.log("duplicate definition - constructor");return}_e(this,{deploy:o});return;case"fallback":o.inputs.length===0?s=!0:(G(!i||o.payable!==i.payable,"conflicting fallback fragments",`fragments[${a}]`,o),i=o,s=i.payable);return;case"function":l=_(this,vi);break;case"event":l=_(this,yi);break;case"error":l=_(this,mi);break;default:return}const c=o.format();l.has(c)||l.set(c,o)}),this.deploy||_e(this,{deploy:hs.from("constructor()")}),_e(this,{fallback:i,receive:s})}format(e){const n=e?"minimal":"full";return this.fragments.map(i=>i.format(n))}formatJson(){const e=this.fragments.map(n=>n.format("json"));return JSON.stringify(e.map(n=>JSON.parse(n)))}getAbiCoder(){return Jd.defaultAbiCoder()}getFunctionName(e){const n=ge(this,$i,cp).call(this,e,null,!1);return G(n,"no matching function","key",e),n.name}hasFunction(e){return!!ge(this,$i,cp).call(this,e,null,!1)}getFunction(e,n){return ge(this,$i,cp).call(this,e,n||null,!0)}forEachFunction(e){const n=Array.from(_(this,vi).keys());n.sort((r,i)=>r.localeCompare(i));for(let r=0;r<n.length;r++){const i=n[r];e(_(this,vi).get(i),r)}}getEventName(e){const n=ge(this,$i,up).call(this,e,null,!1);return G(n,"no matching event","key",e),n.name}hasEvent(e){return!!ge(this,$i,up).call(this,e,null,!1)}getEvent(e,n){return ge(this,$i,up).call(this,e,n||null,!0)}forEachEvent(e){const n=Array.from(_(this,yi).keys());n.sort((r,i)=>r.localeCompare(i));for(let r=0;r<n.length;r++){const i=n[r];e(_(this,yi).get(i),r)}}getError(e,n){if(it(e)){const i=e.toLowerCase();if(pA[i])return Ln.from(pA[i].signature);for(const s of _(this,mi).values())if(i===s.selector)return s;return null}if(e.indexOf("(")===-1){const i=[];for(const[s,o]of _(this,mi))s.split("(")[0]===e&&i.push(o);if(i.length===0)return e==="Error"?Ln.from("error Error(string)"):e==="Panic"?Ln.from("error Panic(uint256)"):null;if(i.length>1){const s=i.map(o=>JSON.stringify(o.format())).join(", ");G(!1,`ambiguous error description (i.e. ${s})`,"name",e)}return i[0]}if(e=Ln.from(e).format(),e==="Error(string)")return Ln.from("error Error(string)");if(e==="Panic(uint256)")return Ln.from("error Panic(uint256)");const r=_(this,mi).get(e);return r||null}forEachError(e){const n=Array.from(_(this,mi).keys());n.sort((r,i)=>r.localeCompare(i));for(let r=0;r<n.length;r++){const i=n[r];e(_(this,mi).get(i),r)}}_decodeParams(e,n){return _(this,tn).decode(e,n)}_encodeParams(e,n){return _(this,tn).encode(e,n)}encodeDeploy(e){return this._encodeParams(this.deploy.inputs,e||[])}decodeErrorResult(e,n){if(typeof e=="string"){const r=this.getError(e);G(r,"unknown error","fragment",e),e=r}return G(gt(n,0,4)===e.selector,`data signature does not match error ${e.name}.`,"data",n),this._decodeParams(e.inputs,gt(n,4))}encodeErrorResult(e,n){if(typeof e=="string"){const r=this.getError(e);G(r,"unknown error","fragment",e),e=r}return vt([e.selector,this._encodeParams(e.inputs,n||[])])}decodeFunctionData(e,n){if(typeof e=="string"){const r=this.getFunction(e);G(r,"unknown function","fragment",e),e=r}return G(gt(n,0,4)===e.selector,`data signature does not match function ${e.name}.`,"data",n),this._decodeParams(e.inputs,gt(n,4))}encodeFunctionData(e,n){if(typeof e=="string"){const r=this.getFunction(e);G(r,"unknown function","fragment",e),e=r}return vt([e.selector,this._encodeParams(e.inputs,n||[])])}decodeFunctionResult(e,n){if(typeof e=="string"){const s=this.getFunction(e);G(s,"unknown function","fragment",e),e=s}let r="invalid length for result data";const i=wn(n);if(i.length%32===0)try{return _(this,tn).decode(e.outputs,i)}catch{r="could not decode result data"}de(!1,r,"BAD_DATA",{value:ve(i),info:{method:e.name,signature:e.format()}})}makeError(e,n){const r=Be(e,"data"),i=Jd.getBuiltinCallException("call",n,r);if(i.message.startsWith("execution reverted (unknown custom error)")){const a=ve(r.slice(0,4)),l=this.getError(a);if(l)try{const c=_(this,tn).decode(l.inputs,r.slice(4));i.revert={name:l.name,signature:l.format(),args:c},i.reason=i.revert.signature,i.message=`execution reverted: ${i.reason}`}catch{i.message="execution reverted (coult not decode custom error)"}}const o=this.parseTransaction(n);return o&&(i.invocation={method:o.name,signature:o.signature,args:o.args}),i}encodeFunctionResult(e,n){if(typeof e=="string"){const r=this.getFunction(e);G(r,"unknown function","fragment",e),e=r}return ve(_(this,tn).encode(e.outputs,n||[]))}encodeFilterTopics(e,n){if(typeof e=="string"){const s=this.getEvent(e);G(s,"unknown event","eventFragment",e),e=s}de(n.length<=e.inputs.length,`too many arguments for ${e.format()}`,"UNEXPECTED_ARGUMENT",{count:n.length,expectedCount:e.inputs.length});const r=[];e.anonymous||r.push(e.topicHash);const i=(s,o)=>s.type==="string"?tl(o):s.type==="bytes"?Ct(ve(o)):(s.type==="bool"&&typeof o=="boolean"?o=o?"0x01":"0x00":s.type.match(/^u?int/)?o=Ho(o):s.type.match(/^bytes/)?o=aN(o,32):s.type==="address"&&_(this,tn).encode(["address"],[o]),ks(ve(o),32));for(n.forEach((s,o)=>{const a=e.inputs[o];if(!a.indexed){G(s==null,"cannot filter non-indexed parameters; must be null","contract."+a.name,s);return}s==null?r.push(null):a.baseType==="array"||a.baseType==="tuple"?G(!1,"filtering with tuples or arrays not supported","contract."+a.name,s):Array.isArray(s)?r.push(s.map(l=>i(a,l))):r.push(i(a,s))});r.length&&r[r.length-1]===null;)r.pop();return r}encodeEventLog(e,n){if(typeof e=="string"){const o=this.getEvent(e);G(o,"unknown event","eventFragment",e),e=o}const r=[],i=[],s=[];return e.anonymous||r.push(e.topicHash),G(n.length===e.inputs.length,"event arguments/values mismatch","values",n),e.inputs.forEach((o,a)=>{const l=n[a];if(o.indexed)if(o.type==="string")r.push(tl(l));else if(o.type==="bytes")r.push(Ct(l));else{if(o.baseType==="tuple"||o.baseType==="array")throw new Error("not implemented");r.push(_(this,tn).encode([o.type],[l]))}else i.push(o),s.push(l)}),{data:_(this,tn).encode(i,s),topics:r}}decodeEventLog(e,n,r){if(typeof e=="string"){const h=this.getEvent(e);G(h,"unknown event","eventFragment",e),e=h}if(r!=null&&!e.anonymous){const h=e.topicHash;G(it(r[0],32)&&r[0].toLowerCase()===h,"fragment/topic mismatch","topics[0]",r[0]),r=r.slice(1)}const i=[],s=[],o=[];e.inputs.forEach((h,m)=>{h.indexed?h.type==="string"||h.type==="bytes"||h.baseType==="tuple"||h.baseType==="array"?(i.push(qt.from({type:"bytes32",name:h.name})),o.push(!0)):(i.push(h),o.push(!1)):(s.push(h),o.push(!1))});const a=r!=null?_(this,tn).decode(i,vt(r)):null,l=_(this,tn).decode(s,n,!0),c=[],u=[];let d=0,f=0;return e.inputs.forEach((h,m)=>{let g=null;if(h.indexed)if(a==null)g=new fA(null);else if(o[m])g=new fA(a[f++]);else try{g=a[f++]}catch(w){g=w}else try{g=l[d++]}catch(w){g=w}c.push(g),u.push(h.name||null)}),lu.fromItems(c,u)}parseTransaction(e){const n=Be(e.data,"tx.data"),r=Ae(e.value!=null?e.value:0,"tx.value"),i=this.getFunction(ve(n.slice(0,4)));if(!i)return null;const s=_(this,tn).decode(i.inputs,n.slice(4));return new H5(i,i.selector,s,r)}parseCallResult(e){throw new Error("@TODO")}parseLog(e){const n=this.getEvent(e.topics[0]);return!n||n.anonymous?null:new j5(n,n.topicHash,this.decodeEventLog(n,e.data,e.topics))}parseError(e){const n=ve(e),r=this.getError(gt(n,0,4));if(!r)return null;const i=_(this,tn).decode(r.inputs,gt(n,4));return new K5(r,r.selector,i)}static from(e){return e instanceof fa?e:typeof e=="string"?new fa(JSON.parse(e)):typeof e.formatJson=="function"?new fa(e.formatJson()):typeof e.format=="function"?new fa(e.format("json")):new fa(e)}};mi=new WeakMap,yi=new WeakMap,vi=new WeakMap,tn=new WeakMap,$i=new WeakSet,cp=function(e,n,r){if(it(e)){const s=e.toLowerCase();for(const o of _(this,vi).values())if(s===o.selector)return o;return null}if(e.indexOf("(")===-1){const s=[];for(const[o,a]of _(this,vi))o.split("(")[0]===e&&s.push(a);if(n){const o=n.length>0?n[n.length-1]:null;let a=n.length,l=!0;un.isTyped(o)&&o.type==="overrides"&&(l=!1,a--);for(let c=s.length-1;c>=0;c--){const u=s[c].inputs.length;u!==a&&(!l||u!==a-1)&&s.splice(c,1)}for(let c=s.length-1;c>=0;c--){const u=s[c].inputs;for(let d=0;d<n.length;d++)if(un.isTyped(n[d])){if(d>=u.length){if(n[d].type==="overrides")continue;s.splice(c,1);break}if(n[d].type!==u[d].baseType){s.splice(c,1);break}}}}if(s.length===1&&n&&n.length!==s[0].inputs.length){const o=n[n.length-1];(o==null||Array.isArray(o)||typeof o!="object")&&s.splice(0,1)}if(s.length===0)return null;if(s.length>1&&r){const o=s.map(a=>JSON.stringify(a.format())).join(", ");G(!1,`ambiguous function description (i.e. matches ${o})`,"key",e)}return s[0]}const i=_(this,vi).get(xi.from(e).format());return i||null},up=function(e,n,r){if(it(e)){const s=e.toLowerCase();for(const o of _(this,yi).values())if(s===o.topicHash)return o;return null}if(e.indexOf("(")===-1){const s=[];for(const[o,a]of _(this,yi))o.split("(")[0]===e&&s.push(a);if(n){for(let o=s.length-1;o>=0;o--)s[o].inputs.length<n.length&&s.splice(o,1);for(let o=s.length-1;o>=0;o--){const a=s[o].inputs;for(let l=0;l<n.length;l++)if(un.isTyped(n[l])&&n[l].type!==a[l].baseType){s.splice(o,1);break}}}if(s.length===0)return null;if(s.length>1&&r){const o=s.map(a=>JSON.stringify(a.format())).join(", ");G(!1,`ambiguous event description (i.e. matches ${o})`,"key",e)}return s[0]}const i=_(this,yi).get(Si.from(e).format());return i||null};let zv=fa;const H3=BigInt(0);function cc(t){return t??null}function wt(t){return t==null?null:t.toString()}class gA{constructor(e,n,r){Y(this,"gasPrice");Y(this,"maxFeePerGas");Y(this,"maxPriorityFeePerGas");_e(this,{gasPrice:cc(e),maxFeePerGas:cc(n),maxPriorityFeePerGas:cc(r)})}toJSON(){const{gasPrice:e,maxFeePerGas:n,maxPriorityFeePerGas:r}=this;return{_type:"FeeData",gasPrice:wt(e),maxFeePerGas:wt(n),maxPriorityFeePerGas:wt(r)}}}function m0(t){const e={};t.to&&(e.to=t.to),t.from&&(e.from=t.from),t.data&&(e.data=ve(t.data));const n="chainId,gasLimit,gasPrice,maxFeePerBlobGas,maxFeePerGas,maxPriorityFeePerGas,value".split(/,/);for(const i of n)!(i in t)||t[i]==null||(e[i]=Ae(t[i],`request.${i}`));const r="type,nonce".split(/,/);for(const i of r)!(i in t)||t[i]==null||(e[i]=Oe(t[i],`request.${i}`));return t.accessList&&(e.accessList=ul(t.accessList)),t.authorizationList&&(e.authorizationList=t.authorizationList.slice()),"blockTag"in t&&(e.blockTag=t.blockTag),"enableCcipRead"in t&&(e.enableCcipRead=!!t.enableCcipRead),"customData"in t&&(e.customData=t.customData),"blobVersionedHashes"in t&&t.blobVersionedHashes&&(e.blobVersionedHashes=t.blobVersionedHashes.slice()),"kzg"in t&&(e.kzg=t.kzg),"blobs"in t&&t.blobs&&(e.blobs=t.blobs.map(i=>K1(i)?ve(i):Object.assign({},i))),e}var is;class z5{constructor(e,n){Y(this,"provider");Y(this,"number");Y(this,"hash");Y(this,"timestamp");Y(this,"parentHash");Y(this,"parentBeaconBlockRoot");Y(this,"nonce");Y(this,"difficulty");Y(this,"gasLimit");Y(this,"gasUsed");Y(this,"stateRoot");Y(this,"receiptsRoot");Y(this,"blobGasUsed");Y(this,"excessBlobGas");Y(this,"miner");Y(this,"prevRandao");Y(this,"extraData");Y(this,"baseFeePerGas");ee(this,is);H(this,is,e.transactions.map(r=>typeof r!="string"?new Zd(r,n):r)),_e(this,{provider:n,hash:cc(e.hash),number:e.number,timestamp:e.timestamp,parentHash:e.parentHash,parentBeaconBlockRoot:e.parentBeaconBlockRoot,nonce:e.nonce,difficulty:e.difficulty,gasLimit:e.gasLimit,gasUsed:e.gasUsed,blobGasUsed:e.blobGasUsed,excessBlobGas:e.excessBlobGas,miner:e.miner,prevRandao:cc(e.prevRandao),extraData:e.extraData,baseFeePerGas:cc(e.baseFeePerGas),stateRoot:e.stateRoot,receiptsRoot:e.receiptsRoot})}get transactions(){return _(this,is).map(e=>typeof e=="string"?e:e.hash)}get prefetchedTransactions(){const e=_(this,is).slice();return e.length===0?[]:(de(typeof e[0]=="object","transactions were not prefetched with block request","UNSUPPORTED_OPERATION",{operation:"transactionResponses()"}),e)}toJSON(){const{baseFeePerGas:e,difficulty:n,extraData:r,gasLimit:i,gasUsed:s,hash:o,miner:a,prevRandao:l,nonce:c,number:u,parentHash:d,parentBeaconBlockRoot:f,stateRoot:h,receiptsRoot:m,timestamp:g,transactions:w}=this;return{_type:"Block",baseFeePerGas:wt(e),difficulty:wt(n),extraData:r,gasLimit:wt(i),gasUsed:wt(s),blobGasUsed:wt(this.blobGasUsed),excessBlobGas:wt(this.excessBlobGas),hash:o,miner:a,prevRandao:l,nonce:c,number:u,parentHash:d,timestamp:g,parentBeaconBlockRoot:f,stateRoot:h,receiptsRoot:m,transactions:w}}[Symbol.iterator](){let e=0;const n=this.transactions;return{next:()=>e<this.length?{value:n[e++],done:!1}:{value:void 0,done:!0}}}get length(){return _(this,is).length}get date(){return this.timestamp==null?null:new Date(this.timestamp*1e3)}async getTransaction(e){let n;if(typeof e=="number")n=_(this,is)[e];else{const r=e.toLowerCase();for(const i of _(this,is))if(typeof i=="string"){if(i!==r)continue;n=i;break}else{if(i.hash!==r)continue;n=i;break}}if(n==null)throw new Error("no such tx");return typeof n=="string"?await this.provider.getTransaction(n):n}getPrefetchedTransaction(e){const n=this.prefetchedTransactions;if(typeof e=="number")return n[e];e=e.toLowerCase();for(const r of n)if(r.hash===e)return r;G(!1,"no matching transaction","indexOrHash",e)}isMined(){return!!this.hash}isLondon(){return!!this.baseFeePerGas}orphanedEvent(){if(!this.isMined())throw new Error("");return V5(this)}}is=new WeakMap;class Bf{constructor(e,n){Y(this,"provider");Y(this,"transactionHash");Y(this,"blockHash");Y(this,"blockNumber");Y(this,"removed");Y(this,"address");Y(this,"data");Y(this,"topics");Y(this,"index");Y(this,"transactionIndex");this.provider=n;const r=Object.freeze(e.topics.slice());_e(this,{transactionHash:e.transactionHash,blockHash:e.blockHash,blockNumber:e.blockNumber,removed:e.removed,address:e.address,data:e.data,topics:r,index:e.index,transactionIndex:e.transactionIndex})}toJSON(){const{address:e,blockHash:n,blockNumber:r,data:i,index:s,removed:o,topics:a,transactionHash:l,transactionIndex:c}=this;return{_type:"log",address:e,blockHash:n,blockNumber:r,data:i,index:s,removed:o,topics:a,transactionHash:l,transactionIndex:c}}async getBlock(){const e=await this.provider.getBlock(this.blockHash);return de(!!e,"failed to find transaction","UNKNOWN_ERROR",{}),e}async getTransaction(){const e=await this.provider.getTransaction(this.transactionHash);return de(!!e,"failed to find transaction","UNKNOWN_ERROR",{}),e}async getTransactionReceipt(){const e=await this.provider.getTransactionReceipt(this.transactionHash);return de(!!e,"failed to find transaction receipt","UNKNOWN_ERROR",{}),e}removedEvent(){return G5(this)}}var Ef;class K3{constructor(e,n){Y(this,"provider");Y(this,"to");Y(this,"from");Y(this,"contractAddress");Y(this,"hash");Y(this,"index");Y(this,"blockHash");Y(this,"blockNumber");Y(this,"logsBloom");Y(this,"gasUsed");Y(this,"blobGasUsed");Y(this,"cumulativeGasUsed");Y(this,"gasPrice");Y(this,"blobGasPrice");Y(this,"type");Y(this,"status");Y(this,"root");ee(this,Ef);H(this,Ef,Object.freeze(e.logs.map(i=>new Bf(i,n))));let r=H3;e.effectiveGasPrice!=null?r=e.effectiveGasPrice:e.gasPrice!=null&&(r=e.gasPrice),_e(this,{provider:n,to:e.to,from:e.from,contractAddress:e.contractAddress,hash:e.hash,index:e.index,blockHash:e.blockHash,blockNumber:e.blockNumber,logsBloom:e.logsBloom,gasUsed:e.gasUsed,cumulativeGasUsed:e.cumulativeGasUsed,blobGasUsed:e.blobGasUsed,gasPrice:r,blobGasPrice:e.blobGasPrice,type:e.type,status:e.status,root:e.root})}get logs(){return _(this,Ef)}toJSON(){const{to:e,from:n,contractAddress:r,hash:i,index:s,blockHash:o,blockNumber:a,logsBloom:l,logs:c,status:u,root:d}=this;return{_type:"TransactionReceipt",blockHash:o,blockNumber:a,contractAddress:r,cumulativeGasUsed:wt(this.cumulativeGasUsed),from:n,gasPrice:wt(this.gasPrice),blobGasUsed:wt(this.blobGasUsed),blobGasPrice:wt(this.blobGasPrice),gasUsed:wt(this.gasUsed),hash:i,index:s,logs:c,logsBloom:l,root:d,status:u,to:e}}get length(){return this.logs.length}[Symbol.iterator](){let e=0;return{next:()=>e<this.length?{value:this.logs[e++],done:!1}:{value:void 0,done:!0}}}get fee(){return this.gasUsed*this.gasPrice}async getBlock(){const e=await this.provider.getBlock(this.blockHash);if(e==null)throw new Error("TODO");return e}async getTransaction(){const e=await this.provider.getTransaction(this.hash);if(e==null)throw new Error("TODO");return e}async getResult(){return await this.provider.getTransactionResult(this.hash)}async confirmations(){return await this.provider.getBlockNumber()-this.blockNumber+1}removedEvent(){return V3(this)}reorderedEvent(e){return de(!e||e.isMined(),"unmined 'other' transction cannot be orphaned","UNSUPPORTED_OPERATION",{operation:"reorderedEvent(other)"}),z3(this,e)}}Ef=new WeakMap;var ho;const nE=class nE{constructor(e,n){Y(this,"provider");Y(this,"blockNumber");Y(this,"blockHash");Y(this,"index");Y(this,"hash");Y(this,"type");Y(this,"to");Y(this,"from");Y(this,"nonce");Y(this,"gasLimit");Y(this,"gasPrice");Y(this,"maxPriorityFeePerGas");Y(this,"maxFeePerGas");Y(this,"maxFeePerBlobGas");Y(this,"data");Y(this,"value");Y(this,"chainId");Y(this,"signature");Y(this,"accessList");Y(this,"blobVersionedHashes");Y(this,"authorizationList");ee(this,ho);this.provider=n,this.blockNumber=e.blockNumber!=null?e.blockNumber:null,this.blockHash=e.blockHash!=null?e.blockHash:null,this.hash=e.hash,this.index=e.index,this.type=e.type,this.from=e.from,this.to=e.to||null,this.gasLimit=e.gasLimit,this.nonce=e.nonce,this.data=e.data,this.value=e.value,this.gasPrice=e.gasPrice,this.maxPriorityFeePerGas=e.maxPriorityFeePerGas!=null?e.maxPriorityFeePerGas:null,this.maxFeePerGas=e.maxFeePerGas!=null?e.maxFeePerGas:null,this.maxFeePerBlobGas=e.maxFeePerBlobGas!=null?e.maxFeePerBlobGas:null,this.chainId=e.chainId,this.signature=e.signature,this.accessList=e.accessList!=null?e.accessList:null,this.blobVersionedHashes=e.blobVersionedHashes!=null?e.blobVersionedHashes:null,this.authorizationList=e.authorizationList!=null?e.authorizationList:null,H(this,ho,-1)}toJSON(){const{blockNumber:e,blockHash:n,index:r,hash:i,type:s,to:o,from:a,nonce:l,data:c,signature:u,accessList:d,blobVersionedHashes:f}=this;return{_type:"TransactionResponse",accessList:d,blockNumber:e,blockHash:n,blobVersionedHashes:f,chainId:wt(this.chainId),data:c,from:a,gasLimit:wt(this.gasLimit),gasPrice:wt(this.gasPrice),hash:i,maxFeePerGas:wt(this.maxFeePerGas),maxPriorityFeePerGas:wt(this.maxPriorityFeePerGas),maxFeePerBlobGas:wt(this.maxFeePerBlobGas),nonce:l,signature:u,to:o,index:r,type:s,value:wt(this.value)}}async getBlock(){let e=this.blockNumber;if(e==null){const r=await this.getTransaction();r&&(e=r.blockNumber)}if(e==null)return null;const n=this.provider.getBlock(e);if(n==null)throw new Error("TODO");return n}async getTransaction(){return this.provider.getTransaction(this.hash)}async confirmations(){if(this.blockNumber==null){const{tx:n,blockNumber:r}=await mn({tx:this.getTransaction(),blockNumber:this.provider.getBlockNumber()});return n==null||n.blockNumber==null?0:r-n.blockNumber+1}return await this.provider.getBlockNumber()-this.blockNumber+1}async wait(e,n){const r=e??1,i=n??0;let s=_(this,ho),o=-1,a=s===-1;const l=async()=>{if(a)return null;const{blockNumber:f,nonce:h}=await mn({blockNumber:this.provider.getBlockNumber(),nonce:this.provider.getTransactionCount(this.from)});if(h<this.nonce){s=f;return}if(a)return null;const m=await this.getTransaction();if(!(m&&m.blockNumber!=null))for(o===-1&&(o=s-3,o<_(this,ho)&&(o=_(this,ho)));o<=f;){if(a)return null;const g=await this.provider.getBlock(o,!0);if(g==null)return;for(const w of g)if(w===this.hash)return;for(let w=0;w<g.length;w++){const p=await g.getTransaction(w);if(p.from===this.from&&p.nonce===this.nonce){if(a)return null;const v=await this.provider.getTransactionReceipt(p.hash);if(v==null||f-v.blockNumber+1<r)return;let y="replaced";p.data===this.data&&p.to===this.to&&p.value===this.value?y="repriced":p.data==="0x"&&p.from===p.to&&p.value===H3&&(y="cancelled"),de(!1,"transaction was replaced","TRANSACTION_REPLACED",{cancelled:y==="replaced"||y==="cancelled",reason:y,replacement:p.replaceableTransaction(s),hash:p.hash,receipt:v})}}o++}},c=f=>{if(f==null||f.status!==0)return f;de(!1,"transaction execution reverted","CALL_EXCEPTION",{action:"sendTransaction",data:null,reason:null,invocation:null,revert:null,transaction:{to:f.to,from:f.from,data:""},receipt:f})},u=await this.provider.getTransactionReceipt(this.hash);if(r===0)return c(u);if(u){if(r===1||await u.confirmations()>=r)return c(u)}else if(await l(),r===0)return null;return await new Promise((f,h)=>{const m=[],g=()=>{m.forEach(p=>p())};if(m.push(()=>{a=!0}),i>0){const p=setTimeout(()=>{g(),h(at("wait for transaction timeout","TIMEOUT"))},i);m.push(()=>{clearTimeout(p)})}const w=async p=>{if(await p.confirmations()>=r){g();try{f(c(p))}catch(v){h(v)}}};if(m.push(()=>{this.provider.off(this.hash,w)}),this.provider.on(this.hash,w),s>=0){const p=async()=>{try{await l()}catch(v){if(Vt(v,"TRANSACTION_REPLACED")){g(),h(v);return}}a||this.provider.once("block",p)};m.push(()=>{this.provider.off("block",p)}),this.provider.once("block",p)}})}isMined(){return this.blockHash!=null}isLegacy(){return this.type===0}isBerlin(){return this.type===1}isLondon(){return this.type===2}isCancun(){return this.type===3}removedEvent(){return de(this.isMined(),"unmined transaction canot be orphaned","UNSUPPORTED_OPERATION",{operation:"removeEvent()"}),V3(this)}reorderedEvent(e){return de(this.isMined(),"unmined transaction canot be orphaned","UNSUPPORTED_OPERATION",{operation:"removeEvent()"}),de(!e||e.isMined(),"unmined 'other' transaction canot be orphaned","UNSUPPORTED_OPERATION",{operation:"removeEvent()"}),z3(this,e)}replaceableTransaction(e){G(Number.isInteger(e)&&e>=0,"invalid startBlock","startBlock",e);const n=new nE(this,this.provider);return H(n,ho,e),n}};ho=new WeakMap;let Zd=nE;function V5(t){return{orphan:"drop-block",hash:t.hash,number:t.number}}function z3(t,e){return{orphan:"reorder-transaction",tx:t,other:e}}function V3(t){return{orphan:"drop-transaction",tx:t}}function G5(t){return{orphan:"drop-log",log:{transactionHash:t.transactionHash,blockHash:t.blockHash,blockNumber:t.blockNumber,address:t.address,data:t.data,topics:Object.freeze(t.topics.slice()),index:t.index}}}class nb extends Bf{constructor(n,r,i){super(n,n.provider);Y(this,"interface");Y(this,"fragment");Y(this,"args");const s=r.decodeEventLog(i,n.data,n.topics);_e(this,{args:s,fragment:i,interface:r})}get eventName(){return this.fragment.name}get eventSignature(){return this.fragment.format()}}class G3 extends Bf{constructor(n,r){super(n,n.provider);Y(this,"error");_e(this,{error:r})}}var Fc;class W5 extends K3{constructor(n,r,i){super(i,r);ee(this,Fc);H(this,Fc,n)}get logs(){return super.logs.map(n=>{const r=n.topics.length?_(this,Fc).getEvent(n.topics[0]):null;if(r)try{return new nb(n,_(this,Fc),r)}catch(i){return new G3(n,i)}return n})}}Fc=new WeakMap;var Af;class rb extends Zd{constructor(n,r,i){super(i,r);ee(this,Af);H(this,Af,n)}async wait(n,r){const i=await super.wait(n,r);return i==null?null:new W5(_(this,Af),this.provider,i)}}Af=new WeakMap;class W3 extends v_{constructor(n,r,i,s){super(n,r,i);Y(this,"log");_e(this,{log:s})}async getBlock(){return await this.log.getBlock()}async getTransaction(){return await this.log.getTransaction()}async getTransactionReceipt(){return await this.log.getTransactionReceipt()}}class q5 extends W3{constructor(e,n,r,i,s){super(e,n,r,new nb(s,e.interface,i));const o=e.interface.decodeEventLog(i,this.log.data,this.log.topics);_e(this,{args:o,fragment:i})}get eventName(){return this.fragment.name}get eventSignature(){return this.fragment.format()}}const mA=BigInt(0);function q3(t){return t&&typeof t.call=="function"}function Q3(t){return t&&typeof t.estimateGas=="function"}function Tg(t){return t&&typeof t.resolveName=="function"}function Y3(t){return t&&typeof t.sendTransaction=="function"}function J3(t){if(t!=null){if(Tg(t))return t;if(t.provider)return t.provider}}var Sf;class Q5{constructor(e,n,r){ee(this,Sf);Y(this,"fragment");if(_e(this,{fragment:n}),n.inputs.length<r.length)throw new Error("too many arguments");const i=il(e.runner,"resolveName"),s=Tg(i)?i:null;H(this,Sf,async function(){const o=await Promise.all(n.inputs.map((a,l)=>r[l]==null?null:a.walkAsync(r[l],(u,d)=>u==="address"?Array.isArray(d)?Promise.all(d.map(f=>En(f,s))):En(d,s):d)));return e.interface.encodeFilterTopics(n,o)}())}getTopicFilter(){return _(this,Sf)}}Sf=new WeakMap;function il(t,e){return t==null?null:typeof t[e]=="function"?t:t.provider&&typeof t.provider[e]=="function"?t.provider:null}function ba(t){return t==null?null:t.provider||null}async function Z3(t,e){const n=un.dereference(t,"overrides");G(typeof n=="object","invalid overrides parameter","overrides",t);const r=m0(n);return G(r.to==null||(e||[]).indexOf("to")>=0,"cannot override to","overrides.to",r.to),G(r.data==null||(e||[]).indexOf("data")>=0,"cannot override data","overrides.data",r.data),r.from&&(r.from=r.from),r}async function Y5(t,e,n){const r=il(t,"resolveName"),i=Tg(r)?r:null;return await Promise.all(e.map((s,o)=>s.walkAsync(n[o],(a,l)=>(l=un.dereference(l,a),a==="address"?En(l,i):l))))}function J5(t){const e=async function(o){const a=await Z3(o,["data"]);a.to=await t.getAddress(),a.from&&(a.from=await En(a.from,J3(t.runner)));const l=t.interface,c=Ae(a.value||mA,"overrides.value")===mA,u=(a.data||"0x")==="0x";l.fallback&&!l.fallback.payable&&l.receive&&!u&&!c&&G(!1,"cannot send data to receive or send value to non-payable fallback","overrides",o),G(l.fallback||u,"cannot send data to receive-only contract","overrides.data",a.data);const d=l.receive||l.fallback&&l.fallback.payable;return G(d||c,"cannot send value to non-payable fallback","overrides.value",a.value),G(l.fallback||u,"cannot send data to receive-only contract","overrides.data",a.data),a},n=async function(o){const a=il(t.runner,"call");de(q3(a),"contract runner does not support calling","UNSUPPORTED_OPERATION",{operation:"call"});const l=await e(o);try{return await a.call(l)}catch(c){throw H1(c)&&c.data?t.interface.makeError(c.data,l):c}},r=async function(o){const a=t.runner;de(Y3(a),"contract runner does not support sending transactions","UNSUPPORTED_OPERATION",{operation:"sendTransaction"});const l=await a.sendTransaction(await e(o)),c=ba(t.runner);return new rb(t.interface,c,l)},i=async function(o){const a=il(t.runner,"estimateGas");return de(Q3(a),"contract runner does not support gas estimation","UNSUPPORTED_OPERATION",{operation:"estimateGas"}),await a.estimateGas(await e(o))},s=async o=>await r(o);return _e(s,{_contract:t,estimateGas:i,populateTransaction:e,send:r,staticCall:n}),s}function Z5(t,e){const n=function(...c){const u=t.interface.getFunction(e,c);return de(u,"no matching fragment","UNSUPPORTED_OPERATION",{operation:"fragment",info:{key:e,args:c}}),u},r=async function(...c){const u=n(...c);let d={};if(u.inputs.length+1===c.length&&(d=await Z3(c.pop()),d.from&&(d.from=await En(d.from,J3(t.runner)))),u.inputs.length!==c.length)throw new Error("internal error: fragment inputs doesn't match arguments; should not happen");const f=await Y5(t.runner,u.inputs,c);return Object.assign({},d,await mn({to:t.getAddress(),data:t.interface.encodeFunctionData(u,f)}))},i=async function(...c){const u=await a(...c);return u.length===1?u[0]:u},s=async function(...c){const u=t.runner;de(Y3(u),"contract runner does not support sending transactions","UNSUPPORTED_OPERATION",{operation:"sendTransaction"});const d=await u.sendTransaction(await r(...c)),f=ba(t.runner);return new rb(t.interface,f,d)},o=async function(...c){const u=il(t.runner,"estimateGas");return de(Q3(u),"contract runner does not support gas estimation","UNSUPPORTED_OPERATION",{operation:"estimateGas"}),await u.estimateGas(await r(...c))},a=async function(...c){const u=il(t.runner,"call");de(q3(u),"contract runner does not support calling","UNSUPPORTED_OPERATION",{operation:"call"});const d=await r(...c);let f="0x";try{f=await u.call(d)}catch(m){throw H1(m)&&m.data?t.interface.makeError(m.data,d):m}const h=n(...c);return t.interface.decodeFunctionResult(h,f)},l=async(...c)=>n(...c).constant?await i(...c):await s(...c);return _e(l,{name:t.interface.getFunctionName(e),_contract:t,_key:e,getFragment:n,estimateGas:o,populateTransaction:r,send:s,staticCall:i,staticCallResult:a}),Object.defineProperty(l,"fragment",{configurable:!1,enumerable:!0,get:()=>{const c=t.interface.getFunction(e);return de(c,"no matching fragment","UNSUPPORTED_OPERATION",{operation:"fragment",info:{key:e}}),c}}),l}function X5(t,e){const n=function(...i){const s=t.interface.getEvent(e,i);return de(s,"no matching fragment","UNSUPPORTED_OPERATION",{operation:"fragment",info:{key:e,args:i}}),s},r=function(...i){return new Q5(t,n(...i),i)};return _e(r,{name:t.interface.getEventName(e),_contract:t,_key:e,getFragment:n}),Object.defineProperty(r,"fragment",{configurable:!1,enumerable:!0,get:()=>{const i=t.interface.getEvent(e);return de(i,"no matching fragment","UNSUPPORTED_OPERATION",{operation:"fragment",info:{key:e}}),i}}),r}const y0=Symbol.for("_ethersInternal_contract"),X3=new WeakMap;function e6(t,e){X3.set(t[y0],e)}function Wn(t){return X3.get(t[y0])}function t6(t){return t&&typeof t=="object"&&"getTopicFilter"in t&&typeof t.getTopicFilter=="function"&&t.fragment}async function ib(t,e){let n,r=null;if(Array.isArray(e)){const s=function(o){if(it(o,32))return o;const a=t.interface.getEvent(o);return G(a,"unknown fragment","name",o),a.topicHash};n=e.map(o=>o==null?null:Array.isArray(o)?o.map(s):s(o))}else e==="*"?n=[null]:typeof e=="string"?it(e,32)?n=[e]:(r=t.interface.getEvent(e),G(r,"unknown fragment","event",e),n=[r.topicHash]):t6(e)?n=await e.getTopicFilter():"fragment"in e?(r=e.fragment,n=[r.topicHash]):G(!1,"unknown event name","event",e);n=n.map(s=>{if(s==null)return null;if(Array.isArray(s)){const o=Array.from(new Set(s.map(a=>a.toLowerCase())).values());return o.length===1?o[0]:(o.sort(),o)}return s.toLowerCase()});const i=n.map(s=>s==null?"null":Array.isArray(s)?s.join("|"):s).join("&");return{fragment:r,tag:i,topics:n}}async function Xu(t,e){const{subs:n}=Wn(t);return n.get((await ib(t,e)).tag)||null}async function yA(t,e,n){const r=ba(t.runner);de(r,"contract runner does not support subscribing","UNSUPPORTED_OPERATION",{operation:e});const{fragment:i,tag:s,topics:o}=await ib(t,n),{addr:a,subs:l}=Wn(t);let c=l.get(s);if(!c){const d={address:a||t,topics:o},f=w=>{let p=i;if(p==null)try{p=t.interface.getEvent(w.topics[0])}catch{}if(p){const v=p,y=i?t.interface.decodeEventLog(i,w.data,w.topics):[];Gv(t,n,y,C=>new q5(t,C,n,v,w))}else Gv(t,n,[],v=>new W3(t,v,n,w))};let h=[];c={tag:s,listeners:[],start:()=>{h.length||h.push(r.on(d,f))},stop:async()=>{if(h.length==0)return;let w=h;h=[],await Promise.all(w),r.off(d,f)}},l.set(s,c)}return c}let Vv=Promise.resolve();async function n6(t,e,n,r){await Vv;const i=await Xu(t,e);if(!i)return!1;const s=i.listeners.length;return i.listeners=i.listeners.filter(({listener:o,once:a})=>{const l=Array.from(n);r&&l.push(r(a?null:o));try{o.call(t,...l)}catch{}return!a}),i.listeners.length===0&&(i.stop(),Wn(t).subs.delete(i.tag)),s>0}async function Gv(t,e,n,r){try{await Vv}catch{}const i=n6(t,e,n,r);return Vv=i,await i}const wh=["then"];var tC;tC=y0;const Cd=class Cd{constructor(e,n,r,i){Y(this,"target");Y(this,"interface");Y(this,"runner");Y(this,"filters");Y(this,tC);Y(this,"fallback");G(typeof e=="string"||i3(e),"invalid value for Contract target","target",e),r==null&&(r=null);const s=zv.from(n);_e(this,{target:e,runner:r,interface:s}),Object.defineProperty(this,y0,{value:{}});let o,a=null,l=null;if(i){const d=ba(r);l=new rb(this.interface,d,i)}let c=new Map;if(typeof e=="string")if(it(e))a=e,o=Promise.resolve(e);else{const d=il(r,"resolveName");if(!Tg(d))throw at("contract runner does not support name resolution","UNSUPPORTED_OPERATION",{operation:"resolveName"});o=d.resolveName(e).then(f=>{if(f==null)throw at("an ENS name used for a contract target must be correctly configured","UNCONFIGURED_NAME",{value:e});return Wn(this).addr=f,f})}else o=e.getAddress().then(d=>{if(d==null)throw new Error("TODO");return Wn(this).addr=d,d});e6(this,{addrPromise:o,addr:a,deployTx:l,subs:c});const u=new Proxy({},{get:(d,f,h)=>{if(typeof f=="symbol"||wh.indexOf(f)>=0)return Reflect.get(d,f,h);try{return this.getEvent(f)}catch(m){if(!Vt(m,"INVALID_ARGUMENT")||m.argument!=="key")throw m}},has:(d,f)=>wh.indexOf(f)>=0?Reflect.has(d,f):Reflect.has(d,f)||this.interface.hasEvent(String(f))});return _e(this,{filters:u}),_e(this,{fallback:s.receive||s.fallback?J5(this):null}),new Proxy(this,{get:(d,f,h)=>{if(typeof f=="symbol"||f in d||wh.indexOf(f)>=0)return Reflect.get(d,f,h);try{return d.getFunction(f)}catch(m){if(!Vt(m,"INVALID_ARGUMENT")||m.argument!=="key")throw m}},has:(d,f)=>typeof f=="symbol"||f in d||wh.indexOf(f)>=0?Reflect.has(d,f):d.interface.hasFunction(f)})}connect(e){return new Cd(this.target,this.interface,e)}attach(e){return new Cd(e,this.interface,this.runner)}async getAddress(){return await Wn(this).addrPromise}async getDeployedCode(){const e=ba(this.runner);de(e,"runner does not support .provider","UNSUPPORTED_OPERATION",{operation:"getDeployedCode"});const n=await e.getCode(await this.getAddress());return n==="0x"?null:n}async waitForDeployment(){const e=this.deploymentTransaction();if(e)return await e.wait(),this;if(await this.getDeployedCode()!=null)return this;const r=ba(this.runner);return de(r!=null,"contract runner does not support .provider","UNSUPPORTED_OPERATION",{operation:"waitForDeployment"}),new Promise((i,s)=>{const o=async()=>{try{if(await this.getDeployedCode()!=null)return i(this);r.once("block",o)}catch(a){s(a)}};o()})}deploymentTransaction(){return Wn(this).deployTx}getFunction(e){return typeof e!="string"&&(e=e.format()),Z5(this,e)}getEvent(e){return typeof e!="string"&&(e=e.format()),X5(this,e)}async queryTransaction(e){throw new Error("@TODO")}async queryFilter(e,n,r){n==null&&(n=0),r==null&&(r="latest");const{addr:i,addrPromise:s}=Wn(this),o=i||await s,{fragment:a,topics:l}=await ib(this,e),c={address:o,topics:l,fromBlock:n,toBlock:r},u=ba(this.runner);return de(u,"contract runner does not have a provider","UNSUPPORTED_OPERATION",{operation:"queryFilter"}),(await u.getLogs(c)).map(d=>{let f=a;if(f==null)try{f=this.interface.getEvent(d.topics[0])}catch{}if(f)try{return new nb(d,this.interface,f)}catch(h){return new G3(d,h)}return new Bf(d,u)})}async on(e,n){const r=await yA(this,"on",e);return r.listeners.push({listener:n,once:!1}),r.start(),this}async once(e,n){const r=await yA(this,"once",e);return r.listeners.push({listener:n,once:!0}),r.start(),this}async emit(e,...n){return await Gv(this,e,n,null)}async listenerCount(e){if(e){const i=await Xu(this,e);return i?i.listeners.length:0}const{subs:n}=Wn(this);let r=0;for(const{listeners:i}of n.values())r+=i.length;return r}async listeners(e){if(e){const i=await Xu(this,e);return i?i.listeners.map(({listener:s})=>s):[]}const{subs:n}=Wn(this);let r=[];for(const{listeners:i}of n.values())r=r.concat(i.map(({listener:s})=>s));return r}async off(e,n){const r=await Xu(this,e);if(!r)return this;if(n){const i=r.listeners.map(({listener:s})=>s).indexOf(n);i>=0&&r.listeners.splice(i,1)}return(n==null||r.listeners.length===0)&&(r.stop(),Wn(this).subs.delete(r.tag)),this}async removeAllListeners(e){if(e){const n=await Xu(this,e);if(!n)return this;n.stop(),Wn(this).subs.delete(n.tag)}else{const{subs:n}=Wn(this);for(const{tag:r,stop:i}of n.values())i(),n.delete(r)}return this}async addListener(e,n){return await this.on(e,n)}async removeListener(e,n){return await this.off(e,n)}static buildClass(e){class n extends Cd{constructor(i,s=null){super(i,e,s)}}return n}static from(e,n,r){return r==null&&(r=null),new this(e,n,r)}};let Wv=Cd;function r6(){return Wv}class Ge extends r6(){}function Im(t){return t.match(/^ipfs:\/\/ipfs\//i)?t=t.substring(12):t.match(/^ipfs:\/\//i)?t=t.substring(7):G(!1,"unsupported IPFS format","link",t),`https://gateway.ipfs.io/ipfs/${t}`}class i6{constructor(e){Y(this,"name");_e(this,{name:e})}connect(e){return this}supportsCoinType(e){return!1}async encodeAddress(e,n){throw new Error("unsupported coin")}async decodeAddress(e,n){throw new Error("unsupported coin")}}const eT=new RegExp("^(ipfs)://(.*)$","i"),vA=[new RegExp("^(https)://(.*)$","i"),new RegExp("^(data):(.*)$","i"),eT,new RegExp("^eip155:[0-9]+/(erc[0-9]+):(.*)$","i")];var po,Da,go,kl,Y0,tT;const Zl=class Zl{constructor(e,n,r){ee(this,go);Y(this,"provider");Y(this,"address");Y(this,"name");ee(this,po);ee(this,Da);_e(this,{provider:e,address:n,name:r}),H(this,po,null),H(this,Da,new Ge(n,["function supportsInterface(bytes4) view returns (bool)","function resolve(bytes, bytes) view returns (bytes)","function addr(bytes32) view returns (address)","function addr(bytes32, uint) view returns (bytes)","function text(bytes32, string) view returns (string)","function contenthash(bytes32) view returns (bytes)"],e))}async supportsWildcard(){return _(this,po)==null&&H(this,po,(async()=>{try{return await _(this,Da).supportsInterface("0x9061b923")}catch(e){if(Vt(e,"CALL_EXCEPTION"))return!1;throw H(this,po,null),e}})()),await _(this,po)}async getAddress(e){if(e==null&&(e=60),e===60)try{const s=await ge(this,go,kl).call(this,"addr(bytes32)");return s==null||s===zd?null:s}catch(s){if(Vt(s,"CALL_EXCEPTION"))return null;throw s}if(e>=0&&e<2147483648){let s=e+2147483648;const o=await ge(this,go,kl).call(this,"addr(bytes32,uint)",[s]);if(it(o,20))return Ze(o)}let n=null;for(const s of this.provider.plugins)if(s instanceof i6&&s.supportsCoinType(e)){n=s;break}if(n==null)return null;const r=await ge(this,go,kl).call(this,"addr(bytes32,uint)",[e]);if(r==null||r==="0x")return null;const i=await n.decodeAddress(e,r);if(i!=null)return i;de(!1,"invalid coin data","UNSUPPORTED_OPERATION",{operation:`getAddress(${e})`,info:{coinType:e,data:r}})}async getText(e){const n=await ge(this,go,kl).call(this,"text(bytes32,string)",[e]);return n==null||n==="0x"?null:n}async getContentHash(){const e=await ge(this,go,kl).call(this,"contenthash(bytes32)");if(e==null||e==="0x")return null;const n=e.match(/^0x(e3010170|e5010172)(([0-9a-f][0-9a-f])([0-9a-f][0-9a-f])([0-9a-f]*))$/);if(n){const i=n[1]==="e3010170"?"ipfs":"ipns",s=parseInt(n[4],16);if(n[5].length===s*2)return`${i}://${cN("0x"+n[2])}`}const r=e.match(/^0xe40101fa011b20([0-9a-f]*)$/);if(r&&r[1].length===64)return`bzz://${r[1]}`;de(!1,"invalid or unsupported content hash data","UNSUPPORTED_OPERATION",{operation:"getContentHash()",info:{data:e}})}async getAvatar(){return(await this._getAvatar()).url}async _getAvatar(){const e=[{type:"name",value:this.name}];try{const n=await this.getText("avatar");if(n==null)return e.push({type:"!avatar",value:""}),{url:null,linkage:e};e.push({type:"avatar",value:n});for(let r=0;r<vA.length;r++){const i=n.match(vA[r]);if(i==null)continue;const s=i[1].toLowerCase();switch(s){case"https":case"data":return e.push({type:"url",value:n}),{linkage:e,url:n};case"ipfs":{const o=Im(n);return e.push({type:"ipfs",value:n}),e.push({type:"url",value:o}),{linkage:e,url:o}}case"erc721":case"erc1155":{const o=s==="erc721"?"tokenURI(uint256)":"uri(uint256)";e.push({type:s,value:n});const a=await this.getAddress();if(a==null)return e.push({type:"!owner",value:""}),{url:null,linkage:e};const l=(i[2]||"").split("/");if(l.length!==2)return e.push({type:`!${s}caip`,value:i[2]||""}),{url:null,linkage:e};const c=l[1],u=new Ge(l[0],["function tokenURI(uint) view returns (string)","function ownerOf(uint) view returns (address)","function uri(uint) view returns (string)","function balanceOf(address, uint256) view returns (uint)"],this.provider);if(s==="erc721"){const g=await u.ownerOf(c);if(a!==g)return e.push({type:"!owner",value:g}),{url:null,linkage:e};e.push({type:"owner",value:g})}else if(s==="erc1155"){const g=await u.balanceOf(a,c);if(!g)return e.push({type:"!balance",value:"0"}),{url:null,linkage:e};e.push({type:"balance",value:g.toString()})}let d=await u[o](c);if(d==null||d==="0x")return e.push({type:"!metadata-url",value:""}),{url:null,linkage:e};e.push({type:"metadata-url-base",value:d}),s==="erc1155"&&(d=d.replace("{id}",Ho(c,32).substring(2)),e.push({type:"metadata-url-expanded",value:d})),d.match(/^ipfs:/i)&&(d=Im(d)),e.push({type:"metadata-url",value:d});let f={};const h=await new Ko(d).send();h.assertOk();try{f=h.bodyJson}catch{try{e.push({type:"!metadata",value:h.bodyText})}catch{const p=h.body;return p&&e.push({type:"!metadata",value:ve(p)}),{url:null,linkage:e}}return{url:null,linkage:e}}if(!f)return e.push({type:"!metadata",value:""}),{url:null,linkage:e};e.push({type:"metadata",value:JSON.stringify(f)});let m=f.image;if(typeof m!="string")return e.push({type:"!imageUrl",value:""}),{url:null,linkage:e};if(!m.match(/^(https:\/\/|data:)/i)){if(m.match(eT)==null)return e.push({type:"!imageUrl-ipfs",value:m}),{url:null,linkage:e};e.push({type:"imageUrl-ipfs",value:m}),m=Im(m)}return e.push({type:"url",value:m}),{linkage:e,url:m}}}}}catch{}return{linkage:e,url:null}}static async getEnsAddress(e){const n=await e.getNetwork(),r=n.getPlugin("org.ethers.plugins.network.Ens");return de(r,"network does not support ENS","UNSUPPORTED_OPERATION",{operation:"getEnsAddress",info:{network:n}}),r.address}static async fromName(e,n){var i;let r=n;for(;;){if(r===""||r==="."||n!=="eth"&&r==="eth")return null;const s=await ge(i=Zl,Y0,tT).call(i,e,r);if(s!=null){const o=new Zl(e,s,n);return r!==n&&!await o.supportsWildcard()?null:o}r=r.split(".").slice(1).join(".")}}};po=new WeakMap,Da=new WeakMap,go=new WeakSet,kl=async function(e,n){n=(n||[]).slice();const r=_(this,Da).interface;n.unshift(Hv(this.name));let i=null;await this.supportsWildcard()&&(i=r.getFunction(e),de(i,"missing fragment","UNKNOWN_ERROR",{info:{funcName:e}}),n=[w5(this.name,255),r.encodeFunctionData(i,n)],e="resolve(bytes,bytes)"),n.push({enableCcipRead:!0});try{const s=await _(this,Da)[e](...n);return i?r.decodeFunctionResult(i,s)[0]:s}catch(s){if(!Vt(s,"CALL_EXCEPTION"))throw s}return null},Y0=new WeakSet,tT=async function(e,n){const r=await Zl.getEnsAddress(e);try{const s=await new Ge(r,["function resolver(bytes32) view returns (address)"],e).resolver(Hv(n),{enableCcipRead:!0});return s===zd?null:s}catch(i){throw i}return null},ee(Zl,Y0);let v0=Zl;const wA=BigInt(0);function Ue(t,e){return function(n){return n==null?e:t(n)}}function Xd(t,e){return n=>{if(e&&n==null)return null;if(!Array.isArray(n))throw new Error("not an array");return n.map(r=>t(r))}}function Df(t,e){return n=>{const r={};for(const i in t){let s=i;if(e&&i in e&&!(s in n)){for(const o of e[i])if(o in n){s=o;break}}try{const o=t[i](n[s]);o!==void 0&&(r[i]=o)}catch(o){const a=o instanceof Error?o.message:"not-an-error";de(!1,`invalid value for value.${i} (${a})`,"BAD_DATA",{value:n})}}return r}}function s6(t){switch(t){case!0:case"true":return!0;case!1:case"false":return!1}G(!1,`invalid boolean; ${JSON.stringify(t)}`,"value",t)}function gu(t){return G(it(t,!0),"invalid data","value",t),t}function zt(t){return G(it(t,32),"invalid hash","value",t),t}const o6=Df({address:Ze,blockHash:zt,blockNumber:Oe,data:gu,index:Oe,removed:Ue(s6,!1),topics:Xd(zt),transactionHash:zt,transactionIndex:Oe},{index:["logIndex"]});function a6(t){return o6(t)}const l6=Df({hash:Ue(zt),parentHash:zt,parentBeaconBlockRoot:Ue(zt,null),number:Oe,timestamp:Oe,nonce:Ue(gu),difficulty:Ae,gasLimit:Ae,gasUsed:Ae,stateRoot:Ue(zt,null),receiptsRoot:Ue(zt,null),blobGasUsed:Ue(Ae,null),excessBlobGas:Ue(Ae,null),miner:Ue(Ze),prevRandao:Ue(zt,null),extraData:gu,baseFeePerGas:Ue(Ae)},{prevRandao:["mixHash"]});function c6(t){const e=l6(t);return e.transactions=t.transactions.map(n=>typeof n=="string"?n:nT(n)),e}const u6=Df({transactionIndex:Oe,blockNumber:Oe,transactionHash:zt,address:Ze,topics:Xd(zt),data:gu,index:Oe,blockHash:zt},{index:["logIndex"]});function d6(t){return u6(t)}const f6=Df({to:Ue(Ze,null),from:Ue(Ze,null),contractAddress:Ue(Ze,null),index:Oe,root:Ue(ve),gasUsed:Ae,blobGasUsed:Ue(Ae,null),logsBloom:Ue(gu),blockHash:zt,hash:zt,logs:Xd(d6),blockNumber:Oe,cumulativeGasUsed:Ae,effectiveGasPrice:Ue(Ae),blobGasPrice:Ue(Ae,null),status:Ue(Oe),type:Ue(Oe,0)},{effectiveGasPrice:["gasPrice"],hash:["transactionHash"],index:["transactionIndex"]});function h6(t){return f6(t)}function nT(t){t.to&&Ae(t.to)===wA&&(t.to="0x0000000000000000000000000000000000000000");const e=Df({hash:zt,index:Ue(Oe,void 0),type:n=>n==="0x"||n==null?0:Oe(n),accessList:Ue(ul,null),blobVersionedHashes:Ue(Xd(zt,!0),null),authorizationList:Ue(Xd(n=>{let r;if(n.signature)r=n.signature;else{let i=n.yParity;i==="0x1b"?i=0:i==="0x1c"&&(i=1),r=Object.assign({},n,{yParity:i})}return{address:Ze(n.address),chainId:Ae(n.chainId),nonce:Ae(n.nonce),signature:jn.from(r)}},!1),null),blockHash:Ue(zt,null),blockNumber:Ue(Oe,null),transactionIndex:Ue(Oe,null),from:Ze,gasPrice:Ue(Ae),maxPriorityFeePerGas:Ue(Ae),maxFeePerGas:Ue(Ae),maxFeePerBlobGas:Ue(Ae,null),gasLimit:Ae,to:Ue(Ze,null),value:Ae,nonce:Oe,data:gu,creates:Ue(Ze,null),chainId:Ue(Ae,null)},{data:["input"],gasLimit:["gas"],index:["transactionIndex"]})(t);if(e.to==null&&e.creates==null&&(e.creates=tM(e)),(t.type===1||t.type===2)&&t.accessList==null&&(e.accessList=[]),t.signature?e.signature=jn.from(t.signature):e.signature=jn.from(t),e.chainId==null){const n=e.signature.legacyChainId;n!=null&&(e.chainId=n)}return e.blockHash&&Ae(e.blockHash)===wA&&(e.blockHash=null),e}const p6="0x00000000000C2E074eC69A0dFb2997BA6C7d2e1e";class $f{constructor(e){Y(this,"name");_e(this,{name:e})}clone(){return new $f(this.name)}}class Pg extends $f{constructor(n,r){n==null&&(n=0);super(`org.ethers.network.plugins.GasCost#${n||0}`);Y(this,"effectiveBlock");Y(this,"txBase");Y(this,"txCreate");Y(this,"txDataZero");Y(this,"txDataNonzero");Y(this,"txAccessListStorageKey");Y(this,"txAccessListAddress");const i={effectiveBlock:n};function s(o,a){let l=(r||{})[o];l==null&&(l=a),G(typeof l=="number",`invalud value for ${o}`,"costs",r),i[o]=l}s("txBase",21e3),s("txCreate",32e3),s("txDataZero",4),s("txDataNonzero",16),s("txAccessListStorageKey",1900),s("txAccessListAddress",2400),_e(this,i)}clone(){return new Pg(this.effectiveBlock,this)}}class Rg extends $f{constructor(n,r){super("org.ethers.plugins.network.Ens");Y(this,"address");Y(this,"targetNetwork");_e(this,{address:n||p6,targetNetwork:r??1})}clone(){return new Rg(this.address,this.targetNetwork)}}var xf,Cf;class g6 extends $f{constructor(n,r){super("org.ethers.plugins.network.FetchUrlFeeDataPlugin");ee(this,xf);ee(this,Cf);H(this,xf,n),H(this,Cf,r)}get url(){return _(this,xf)}get processFunc(){return _(this,Cf)}clone(){return this}}xf=new WeakMap,Cf=new WeakMap;const Om=new Map;var jc,Hc,mo;const Xl=class Xl{constructor(e,n){ee(this,jc);ee(this,Hc);ee(this,mo);H(this,jc,e),H(this,Hc,Ae(n)),H(this,mo,new Map)}toJSON(){return{name:this.name,chainId:String(this.chainId)}}get name(){return _(this,jc)}set name(e){H(this,jc,e)}get chainId(){return _(this,Hc)}set chainId(e){H(this,Hc,Ae(e,"chainId"))}matches(e){if(e==null)return!1;if(typeof e=="string"){try{return this.chainId===Ae(e)}catch{}return this.name===e}if(typeof e=="number"||typeof e=="bigint"){try{return this.chainId===Ae(e)}catch{}return!1}if(typeof e=="object"){if(e.chainId!=null){try{return this.chainId===Ae(e.chainId)}catch{}return!1}return e.name!=null?this.name===e.name:!1}return!1}get plugins(){return Array.from(_(this,mo).values())}attachPlugin(e){if(_(this,mo).get(e.name))throw new Error(`cannot replace existing plugin: ${e.name} `);return _(this,mo).set(e.name,e.clone()),this}getPlugin(e){return _(this,mo).get(e)||null}getPlugins(e){return this.plugins.filter(n=>n.name.split("#")[0]===e)}clone(){const e=new Xl(this.name,this.chainId);return this.plugins.forEach(n=>{e.attachPlugin(n.clone())}),e}computeIntrinsicGas(e){const n=this.getPlugin("org.ethers.plugins.network.GasCost")||new Pg;let r=n.txBase;if(e.to==null&&(r+=n.txCreate),e.data)for(let i=2;i<e.data.length;i+=2)e.data.substring(i,i+2)==="00"?r+=n.txDataZero:r+=n.txDataNonzero;if(e.accessList){const i=ul(e.accessList);for(const s in i)r+=n.txAccessListAddress+n.txAccessListStorageKey*i[s].storageKeys.length}return r}static from(e){if(m6(),e==null)return Xl.from("mainnet");if(typeof e=="number"&&(e=BigInt(e)),typeof e=="string"||typeof e=="bigint"){const n=Om.get(e);if(n)return n();if(typeof e=="bigint")return new Xl("unknown",e);G(!1,"unknown network","network",e)}if(typeof e.clone=="function")return e.clone();if(typeof e=="object"){G(typeof e.name=="string"&&typeof e.chainId=="number","invalid network object name or chainId","network",e);const n=new Xl(e.name,e.chainId);return(e.ensAddress||e.ensNetwork!=null)&&n.attachPlugin(new Rg(e.ensAddress,e.ensNetwork)),n}G(!1,"invalid network","network",e)}static register(e,n){typeof e=="number"&&(e=BigInt(e));const r=Om.get(e);r&&G(!1,`conflicting network for ${JSON.stringify(r.name)}`,"nameOrChainId",e),Om.set(e,n)}};jc=new WeakMap,Hc=new WeakMap,mo=new WeakMap;let Pi=Xl;function bA(t,e){const n=String(t);if(!n.match(/^[0-9.]+$/))throw new Error(`invalid gwei value: ${t}`);const r=n.split(".");if(r.length===1&&r.push(""),r.length!==2)throw new Error(`invalid gwei value: ${t}`);for(;r[1].length<e;)r[1]+="0";if(r[1].length>9){let i=BigInt(r[1].substring(0,9));r[1].substring(9).match(/^0+$/)||i++,r[1]=i.toString()}return BigInt(r[0]+r[1])}function EA(t){return new g6(t,async(e,n,r)=>{r.setHeader("User-Agent","ethers");let i;try{const[s,o]=await Promise.all([r.send(),e()]);i=s;const a=i.bodyJson.standard;return{gasPrice:o.gasPrice,maxFeePerGas:bA(a.maxFee,9),maxPriorityFeePerGas:bA(a.maxPriorityFee,9)}}catch(s){de(!1,`error encountered with polygon gas station (${JSON.stringify(r.url)})`,"SERVER_ERROR",{request:r,response:i,error:s})}})}let AA=!1;function m6(){if(AA)return;AA=!0;function t(e,n,r){const i=function(){const s=new Pi(e,n);return r.ensNetwork!=null&&s.attachPlugin(new Rg(null,r.ensNetwork)),s.attachPlugin(new Pg),(r.plugins||[]).forEach(o=>{s.attachPlugin(o)}),s};Pi.register(e,i),Pi.register(n,i),r.altNames&&r.altNames.forEach(s=>{Pi.register(s,i)})}t("mainnet",1,{ensNetwork:1,altNames:["homestead"]}),t("ropsten",3,{ensNetwork:3}),t("rinkeby",4,{ensNetwork:4}),t("goerli",5,{ensNetwork:5}),t("kovan",42,{ensNetwork:42}),t("sepolia",11155111,{ensNetwork:11155111}),t("holesky",17e3,{ensNetwork:17e3}),t("classic",61,{}),t("classicKotti",6,{}),t("arbitrum",42161,{ensNetwork:1}),t("arbitrum-goerli",421613,{}),t("arbitrum-sepolia",421614,{}),t("base",8453,{ensNetwork:1}),t("base-goerli",84531,{}),t("base-sepolia",84532,{}),t("bnb",56,{ensNetwork:1}),t("bnbt",97,{}),t("linea",59144,{ensNetwork:1}),t("linea-goerli",59140,{}),t("linea-sepolia",59141,{}),t("matic",137,{ensNetwork:1,plugins:[EA("https://gasstation.polygon.technology/v2")]}),t("matic-amoy",80002,{}),t("matic-mumbai",80001,{altNames:["maticMumbai","maticmum"],plugins:[EA("https://gasstation-testnet.polygon.technology/v2")]}),t("optimism",10,{ensNetwork:1,plugins:[]}),t("optimism-goerli",420,{}),t("optimism-sepolia",11155420,{}),t("xdai",100,{ensNetwork:1})}function qv(t){return JSON.parse(JSON.stringify(t))}var ss,vr,yo,wi,Kc,dp;class y6{constructor(e){ee(this,Kc);ee(this,ss);ee(this,vr);ee(this,yo);ee(this,wi);H(this,ss,e),H(this,vr,null),H(this,yo,4e3),H(this,wi,-2)}get pollingInterval(){return _(this,yo)}set pollingInterval(e){H(this,yo,e)}start(){_(this,vr)||(H(this,vr,_(this,ss)._setTimeout(ge(this,Kc,dp).bind(this),_(this,yo))),ge(this,Kc,dp).call(this))}stop(){_(this,vr)&&(_(this,ss)._clearTimeout(_(this,vr)),H(this,vr,null))}pause(e){this.stop(),e&&H(this,wi,-2)}resume(){this.start()}}ss=new WeakMap,vr=new WeakMap,yo=new WeakMap,wi=new WeakMap,Kc=new WeakSet,dp=async function(){try{const e=await _(this,ss).getBlockNumber();if(_(this,wi)===-2){H(this,wi,e);return}if(e!==_(this,wi)){for(let n=_(this,wi)+1;n<=e;n++){if(_(this,vr)==null)return;await _(this,ss).emit("block",n)}H(this,wi,e)}}catch{}_(this,vr)!=null&&H(this,vr,_(this,ss)._setTimeout(ge(this,Kc,dp).bind(this),_(this,yo)))};var $a,Ua,vo;class sb{constructor(e){ee(this,$a);ee(this,Ua);ee(this,vo);H(this,$a,e),H(this,vo,!1),H(this,Ua,n=>{this._poll(n,_(this,$a))})}async _poll(e,n){throw new Error("sub-classes must override this")}start(){_(this,vo)||(H(this,vo,!0),_(this,Ua).call(this,-2),_(this,$a).on("block",_(this,Ua)))}stop(){_(this,vo)&&(H(this,vo,!1),_(this,$a).off("block",_(this,Ua)))}pause(e){this.stop()}resume(){this.start()}}$a=new WeakMap,Ua=new WeakMap,vo=new WeakMap;var zc,os;class v6 extends sb{constructor(n,r){super(n);ee(this,zc);ee(this,os);H(this,zc,r),H(this,os,-2)}pause(n){n&&H(this,os,-2),super.pause(n)}async _poll(n,r){const i=await r.getBlock(_(this,zc));i!=null&&(_(this,os)===-2?H(this,os,i.number):i.number>_(this,os)&&(r.emit(_(this,zc),i.number),H(this,os,i.number)))}}zc=new WeakMap,os=new WeakMap;var J0;class w6 extends sb{constructor(n,r){super(n);ee(this,J0);H(this,J0,qv(r))}async _poll(n,r){throw new Error("@TODO")}}J0=new WeakMap;var Vc;class b6 extends sb{constructor(n,r){super(n);ee(this,Vc);H(this,Vc,r)}async _poll(n,r){const i=await r.getTransactionReceipt(_(this,Vc));i&&r.emit(_(this,Vc),i)}}Vc=new WeakMap;var as,Gc,Wc,wo,wr,Z0,rT;class ob{constructor(e,n){ee(this,Z0);ee(this,as);ee(this,Gc);ee(this,Wc);ee(this,wo);ee(this,wr);H(this,as,e),H(this,Gc,qv(n)),H(this,Wc,ge(this,Z0,rT).bind(this)),H(this,wo,!1),H(this,wr,-2)}start(){_(this,wo)||(H(this,wo,!0),_(this,wr)===-2&&_(this,as).getBlockNumber().then(e=>{H(this,wr,e)}),_(this,as).on("block",_(this,Wc)))}stop(){_(this,wo)&&(H(this,wo,!1),_(this,as).off("block",_(this,Wc)))}pause(e){this.stop(),e&&H(this,wr,-2)}resume(){this.start()}}as=new WeakMap,Gc=new WeakMap,Wc=new WeakMap,wo=new WeakMap,wr=new WeakMap,Z0=new WeakSet,rT=async function(e){if(_(this,wr)===-2)return;const n=qv(_(this,Gc));n.fromBlock=_(this,wr)+1,n.toBlock=e;const r=await _(this,as).getLogs(n);if(r.length===0){_(this,wr)<e-60&&H(this,wr,e-60);return}for(const i of r)_(this,as).emit(_(this,Gc),i),H(this,wr,i.blockNumber)};const E6=BigInt(2),A6=10;function bh(t){return t&&typeof t.then=="function"}function fp(t,e){return t+":"+JSON.stringify(e,(n,r)=>{if(r==null)return"null";if(typeof r=="bigint")return`bigint:${r.toString()}`;if(typeof r=="string")return r.toLowerCase();if(typeof r=="object"&&!Array.isArray(r)){const i=Object.keys(r);return i.sort(),i.reduce((s,o)=>(s[o]=r[o],s),{})}return r})}class iT{constructor(e){Y(this,"name");_e(this,{name:e})}start(){}stop(){}pause(e){}resume(){}}function S6(t){return JSON.parse(JSON.stringify(t))}function Qv(t){return t=Array.from(new Set(t).values()),t.sort(),t}async function Nm(t,e){if(t==null)throw new Error("invalid event");if(Array.isArray(t)&&(t={topics:t}),typeof t=="string")switch(t){case"block":case"debug":case"error":case"finalized":case"network":case"pending":case"safe":return{type:t,tag:t}}if(it(t,32)){const n=t.toLowerCase();return{type:"transaction",tag:fp("tx",{hash:n}),hash:n}}if(t.orphan){const n=t;return{type:"orphan",tag:fp("orphan",n),filter:S6(n)}}if(t.address||t.topics){const n=t,r={topics:(n.topics||[]).map(i=>i==null?null:Array.isArray(i)?Qv(i.map(s=>s.toLowerCase())):i.toLowerCase())};if(n.address){const i=[],s=[],o=a=>{it(a)?i.push(a):s.push((async()=>{i.push(await En(a,e))})())};Array.isArray(n.address)?n.address.forEach(o):o(n.address),s.length&&await Promise.all(s),r.address=Qv(i.map(a=>a.toLowerCase()))}return{filter:r,tag:fp("event",r),type:"event"}}G(!1,"unknown ProviderEvent","event",t)}function Mm(){return new Date().getTime()}const x6={cacheTimeout:250,pollingInterval:4e3};var nn,bo,rn,qc,Zn,Fa,Eo,ls,kf,br,Qc,Yc,De,Gn,Yv,Jv,ed,Zv,td,hp;class C6{constructor(e,n){ee(this,De);ee(this,nn);ee(this,bo);ee(this,rn);ee(this,qc);ee(this,Zn);ee(this,Fa);ee(this,Eo);ee(this,ls);ee(this,kf);ee(this,br);ee(this,Qc);ee(this,Yc);if(H(this,Yc,Object.assign({},x6,n||{})),e==="any")H(this,Fa,!0),H(this,Zn,null);else if(e){const r=Pi.from(e);H(this,Fa,!1),H(this,Zn,Promise.resolve(r)),setTimeout(()=>{this.emit("network",r,null)},0)}else H(this,Fa,!1),H(this,Zn,null);H(this,ls,-1),H(this,Eo,new Map),H(this,nn,new Map),H(this,bo,new Map),H(this,rn,null),H(this,qc,!1),H(this,kf,1),H(this,br,new Map),H(this,Qc,!1)}get pollingInterval(){return _(this,Yc).pollingInterval}get provider(){return this}get plugins(){return Array.from(_(this,bo).values())}attachPlugin(e){if(_(this,bo).get(e.name))throw new Error(`cannot replace existing plugin: ${e.name} `);return _(this,bo).set(e.name,e.connect(this)),this}getPlugin(e){return _(this,bo).get(e)||null}get disableCcipRead(){return _(this,Qc)}set disableCcipRead(e){H(this,Qc,!!e)}async ccipReadFetch(e,n,r){if(this.disableCcipRead||r.length===0||e.to==null)return null;const i=e.to.toLowerCase(),s=n.toLowerCase(),o=[];for(let a=0;a<r.length;a++){const l=r[a],c=l.replace("{sender}",i).replace("{data}",s),u=new Ko(c);l.indexOf("{data}")===-1&&(u.body={data:s,sender:i}),this.emit("debug",{action:"sendCcipReadFetchRequest",request:u,index:a,urls:r});let d="unknown error",f;try{f=await u.send()}catch(h){o.push(h.message),this.emit("debug",{action:"receiveCcipReadFetchError",request:u,result:{error:h}});continue}try{const h=f.bodyJson;if(h.data)return this.emit("debug",{action:"receiveCcipReadFetchResult",request:u,result:h}),h.data;h.message&&(d=h.message),this.emit("debug",{action:"receiveCcipReadFetchError",request:u,result:h})}catch{}de(f.statusCode<400||f.statusCode>=500,`response not found during CCIP fetch: ${d}`,"OFFCHAIN_FAULT",{reason:"404_MISSING_RESOURCE",transaction:e,info:{url:l,errorMessage:d}}),o.push(d)}de(!1,`error encountered during CCIP fetch: ${o.map(a=>JSON.stringify(a)).join(", ")}`,"OFFCHAIN_FAULT",{reason:"500_SERVER_ERROR",transaction:e,info:{urls:r,errorMessages:o}})}_wrapBlock(e,n){return new z5(c6(e),this)}_wrapLog(e,n){return new Bf(a6(e),this)}_wrapTransactionReceipt(e,n){return new K3(h6(e),this)}_wrapTransactionResponse(e,n){return new Zd(nT(e),this)}_detectNetwork(){de(!1,"sub-classes must implement this","UNSUPPORTED_OPERATION",{operation:"_detectNetwork"})}async _perform(e){de(!1,`unsupported method: ${e.method}`,"UNSUPPORTED_OPERATION",{operation:e.method,info:e})}async getBlockNumber(){const e=Oe(await ge(this,De,Gn).call(this,{method:"getBlockNumber"}),"%response");return _(this,ls)>=0&&H(this,ls,e),e}_getAddress(e){return En(e,this)}_getBlockTag(e){if(e==null)return"latest";switch(e){case"earliest":return"0x0";case"finalized":case"latest":case"pending":case"safe":return e}if(it(e))return it(e,32)?e:Qr(e);if(typeof e=="bigint"&&(e=Oe(e,"blockTag")),typeof e=="number")return e>=0?Qr(e):_(this,ls)>=0?Qr(_(this,ls)+e):this.getBlockNumber().then(n=>Qr(n+e));G(!1,"invalid blockTag","blockTag",e)}_getFilter(e){const n=(e.topics||[]).map(l=>l==null?null:Array.isArray(l)?Qv(l.map(c=>c.toLowerCase())):l.toLowerCase()),r="blockHash"in e?e.blockHash:void 0,i=(l,c,u)=>{let d;switch(l.length){case 0:break;case 1:d=l[0];break;default:l.sort(),d=l}if(r&&(c!=null||u!=null))throw new Error("invalid filter");const f={};return d&&(f.address=d),n.length&&(f.topics=n),c&&(f.fromBlock=c),u&&(f.toBlock=u),r&&(f.blockHash=r),f};let s=[];if(e.address)if(Array.isArray(e.address))for(const l of e.address)s.push(this._getAddress(l));else s.push(this._getAddress(e.address));let o;"fromBlock"in e&&(o=this._getBlockTag(e.fromBlock));let a;return"toBlock"in e&&(a=this._getBlockTag(e.toBlock)),s.filter(l=>typeof l!="string").length||o!=null&&typeof o!="string"||a!=null&&typeof a!="string"?Promise.all([Promise.all(s),o,a]).then(l=>i(l[0],l[1],l[2])):i(s,o,a)}_getTransactionRequest(e){const n=m0(e),r=[];if(["to","from"].forEach(i=>{if(n[i]==null)return;const s=En(n[i],this);bh(s)?r.push(async function(){n[i]=await s}()):n[i]=s}),n.blockTag!=null){const i=this._getBlockTag(n.blockTag);bh(i)?r.push(async function(){n.blockTag=await i}()):n.blockTag=i}return r.length?async function(){return await Promise.all(r),n}():n}async getNetwork(){if(_(this,Zn)==null){const i=(async()=>{try{const s=await this._detectNetwork();return this.emit("network",s,null),s}catch(s){throw _(this,Zn)===i&&H(this,Zn,null),s}})();return H(this,Zn,i),(await i).clone()}const e=_(this,Zn),[n,r]=await Promise.all([e,this._detectNetwork()]);return n.chainId!==r.chainId&&(_(this,Fa)?(this.emit("network",r,n),_(this,Zn)===e&&H(this,Zn,Promise.resolve(r))):de(!1,`network changed: ${n.chainId} => ${r.chainId} `,"NETWORK_ERROR",{event:"changed"})),n.clone()}async getFeeData(){const e=await this.getNetwork(),n=async()=>{const{_block:i,gasPrice:s,priorityFee:o}=await mn({_block:ge(this,De,Zv).call(this,"latest",!1),gasPrice:(async()=>{try{const u=await ge(this,De,Gn).call(this,{method:"getGasPrice"});return Ae(u,"%response")}catch{}return null})(),priorityFee:(async()=>{try{const u=await ge(this,De,Gn).call(this,{method:"getPriorityFee"});return Ae(u,"%response")}catch{}return null})()});let a=null,l=null;const c=this._wrapBlock(i,e);return c&&c.baseFeePerGas&&(l=o??BigInt("1000000000"),a=c.baseFeePerGas*E6+l),new gA(s,a,l)},r=e.getPlugin("org.ethers.plugins.network.FetchUrlFeeDataPlugin");if(r){const i=new Ko(r.url),s=await r.processFunc(n,this,i);return new gA(s.gasPrice,s.maxFeePerGas,s.maxPriorityFeePerGas)}return await n()}async estimateGas(e){let n=this._getTransactionRequest(e);return bh(n)&&(n=await n),Ae(await ge(this,De,Gn).call(this,{method:"estimateGas",transaction:n}),"%response")}async call(e){const{tx:n,blockTag:r}=await mn({tx:this._getTransactionRequest(e),blockTag:this._getBlockTag(e.blockTag)});return await ge(this,De,Jv).call(this,ge(this,De,Yv).call(this,n,r,e.enableCcipRead?0:-1))}async getBalance(e,n){return Ae(await ge(this,De,ed).call(this,{method:"getBalance"},e,n),"%response")}async getTransactionCount(e,n){return Oe(await ge(this,De,ed).call(this,{method:"getTransactionCount"},e,n),"%response")}async getCode(e,n){return ve(await ge(this,De,ed).call(this,{method:"getCode"},e,n))}async getStorage(e,n,r){const i=Ae(n,"position");return ve(await ge(this,De,ed).call(this,{method:"getStorage",position:i},e,r))}async broadcastTransaction(e){const{blockNumber:n,hash:r,network:i}=await mn({blockNumber:this.getBlockNumber(),hash:this._perform({method:"broadcastTransaction",signedTransaction:e}),network:this.getNetwork()}),s=c0.from(e);if(s.hash!==r)throw new Error("@TODO: the returned hash did not match");return this._wrapTransactionResponse(s,i).replaceableTransaction(n)}async getBlock(e,n){const{network:r,params:i}=await mn({network:this.getNetwork(),params:ge(this,De,Zv).call(this,e,!!n)});return i==null?null:this._wrapBlock(i,r)}async getTransaction(e){const{network:n,params:r}=await mn({network:this.getNetwork(),params:ge(this,De,Gn).call(this,{method:"getTransaction",hash:e})});return r==null?null:this._wrapTransactionResponse(r,n)}async getTransactionReceipt(e){const{network:n,params:r}=await mn({network:this.getNetwork(),params:ge(this,De,Gn).call(this,{method:"getTransactionReceipt",hash:e})});if(r==null)return null;if(r.gasPrice==null&&r.effectiveGasPrice==null){const i=await ge(this,De,Gn).call(this,{method:"getTransaction",hash:e});if(i==null)throw new Error("report this; could not find tx or effectiveGasPrice");r.effectiveGasPrice=i.gasPrice}return this._wrapTransactionReceipt(r,n)}async getTransactionResult(e){const{result:n}=await mn({network:this.getNetwork(),result:ge(this,De,Gn).call(this,{method:"getTransactionResult",hash:e})});return n==null?null:ve(n)}async getLogs(e){let n=this._getFilter(e);bh(n)&&(n=await n);const{network:r,params:i}=await mn({network:this.getNetwork(),params:ge(this,De,Gn).call(this,{method:"getLogs",filter:n})});return i.map(s=>this._wrapLog(s,r))}_getProvider(e){de(!1,"provider cannot connect to target network","UNSUPPORTED_OPERATION",{operation:"_getProvider()"})}async getResolver(e){return await v0.fromName(this,e)}async getAvatar(e){const n=await this.getResolver(e);return n?await n.getAvatar():null}async resolveName(e){const n=await this.getResolver(e);return n?await n.getAddress():null}async lookupAddress(e){e=Ze(e);const n=Hv(e.substring(2).toLowerCase()+".addr.reverse");try{const r=await v0.getEnsAddress(this),s=await new Ge(r,["function resolver(bytes32) view returns (address)"],this).resolver(n);if(s==null||s===zd)return null;const a=await new Ge(s,["function name(bytes32) view returns (string)"],this).name(n);return await this.resolveName(a)!==e?null:a}catch(r){if(Vt(r,"BAD_DATA")&&r.value==="0x"||Vt(r,"CALL_EXCEPTION"))return null;throw r}return null}async waitForTransaction(e,n,r){const i=n??1;return i===0?this.getTransactionReceipt(e):new Promise(async(s,o)=>{let a=null;const l=async c=>{try{const u=await this.getTransactionReceipt(e);if(u!=null&&c-u.blockNumber+1>=i){s(u),a&&(clearTimeout(a),a=null);return}}catch(u){console.log("EEE",u)}this.once("block",l)};r!=null&&(a=setTimeout(()=>{a!=null&&(a=null,this.off("block",l),o(at("timeout","TIMEOUT",{reason:"timeout"})))},r)),l(await this.getBlockNumber())})}async waitForBlock(e){de(!1,"not implemented yet","NOT_IMPLEMENTED",{operation:"waitForBlock"})}_clearTimeout(e){const n=_(this,br).get(e);n&&(n.timer&&clearTimeout(n.timer),_(this,br).delete(e))}_setTimeout(e,n){n==null&&(n=0);const r=Pu(this,kf)._++,i=()=>{_(this,br).delete(r),e()};if(this.paused)_(this,br).set(r,{timer:null,func:i,time:n});else{const s=setTimeout(i,n);_(this,br).set(r,{timer:s,func:i,time:Mm()})}return r}_forEachSubscriber(e){for(const n of _(this,nn).values())e(n.subscriber)}_getSubscriber(e){switch(e.type){case"debug":case"error":case"network":return new iT(e.type);case"block":{const n=new y6(this);return n.pollingInterval=this.pollingInterval,n}case"safe":case"finalized":return new v6(this,e.type);case"event":return new ob(this,e.filter);case"transaction":return new b6(this,e.hash);case"orphan":return new w6(this,e.filter)}throw new Error(`unsupported event: ${e.type}`)}_recoverSubscriber(e,n){for(const r of _(this,nn).values())if(r.subscriber===e){r.started&&r.subscriber.stop(),r.subscriber=n,r.started&&n.start(),_(this,rn)!=null&&n.pause(_(this,rn));break}}async on(e,n){const r=await ge(this,De,hp).call(this,e);return r.listeners.push({listener:n,once:!1}),r.started||(r.subscriber.start(),r.started=!0,_(this,rn)!=null&&r.subscriber.pause(_(this,rn))),this}async once(e,n){const r=await ge(this,De,hp).call(this,e);return r.listeners.push({listener:n,once:!0}),r.started||(r.subscriber.start(),r.started=!0,_(this,rn)!=null&&r.subscriber.pause(_(this,rn))),this}async emit(e,...n){const r=await ge(this,De,td).call(this,e,n);if(!r||r.listeners.length===0)return!1;const i=r.listeners.length;return r.listeners=r.listeners.filter(({listener:s,once:o})=>{const a=new v_(this,o?null:s,e);try{s.call(this,...n,a)}catch{}return!o}),r.listeners.length===0&&(r.started&&r.subscriber.stop(),_(this,nn).delete(r.tag)),i>0}async listenerCount(e){if(e){const r=await ge(this,De,td).call(this,e);return r?r.listeners.length:0}let n=0;for(const{listeners:r}of _(this,nn).values())n+=r.length;return n}async listeners(e){if(e){const r=await ge(this,De,td).call(this,e);return r?r.listeners.map(({listener:i})=>i):[]}let n=[];for(const{listeners:r}of _(this,nn).values())n=n.concat(r.map(({listener:i})=>i));return n}async off(e,n){const r=await ge(this,De,td).call(this,e);if(!r)return this;if(n){const i=r.listeners.map(({listener:s})=>s).indexOf(n);i>=0&&r.listeners.splice(i,1)}return(!n||r.listeners.length===0)&&(r.started&&r.subscriber.stop(),_(this,nn).delete(r.tag)),this}async removeAllListeners(e){if(e){const{tag:n,started:r,subscriber:i}=await ge(this,De,hp).call(this,e);r&&i.stop(),_(this,nn).delete(n)}else for(const[n,{started:r,subscriber:i}]of _(this,nn))r&&i.stop(),_(this,nn).delete(n);return this}async addListener(e,n){return await this.on(e,n)}async removeListener(e,n){return this.off(e,n)}get destroyed(){return _(this,qc)}destroy(){this.removeAllListeners();for(const e of _(this,br).keys())this._clearTimeout(e);H(this,qc,!0)}get paused(){return _(this,rn)!=null}set paused(e){!!e!==this.paused&&(this.paused?this.resume():this.pause(!1))}pause(e){if(H(this,ls,-1),_(this,rn)!=null){if(_(this,rn)==!!e)return;de(!1,"cannot change pause type; resume first","UNSUPPORTED_OPERATION",{operation:"pause"})}this._forEachSubscriber(n=>n.pause(e)),H(this,rn,!!e);for(const n of _(this,br).values())n.timer&&clearTimeout(n.timer),n.time=Mm()-n.time}resume(){if(_(this,rn)!=null){this._forEachSubscriber(e=>e.resume()),H(this,rn,null);for(const e of _(this,br).values()){let n=e.time;n<0&&(n=0),e.time=Mm(),setTimeout(e.func,n)}}}}nn=new WeakMap,bo=new WeakMap,rn=new WeakMap,qc=new WeakMap,Zn=new WeakMap,Fa=new WeakMap,Eo=new WeakMap,ls=new WeakMap,kf=new WeakMap,br=new WeakMap,Qc=new WeakMap,Yc=new WeakMap,De=new WeakSet,Gn=async function(e){const n=_(this,Yc).cacheTimeout;if(n<0)return await this._perform(e);const r=fp(e.method,e);let i=_(this,Eo).get(r);return i||(i=this._perform(e),_(this,Eo).set(r,i),setTimeout(()=>{_(this,Eo).get(r)===i&&_(this,Eo).delete(r)},n)),await i},Yv=async function(e,n,r){de(r<A6,"CCIP read exceeded maximum redirections","OFFCHAIN_FAULT",{reason:"TOO_MANY_REDIRECTS",transaction:Object.assign({},e,{blockTag:n,enableCcipRead:!0})});const i=m0(e);try{return ve(await this._perform({method:"call",transaction:i,blockTag:n}))}catch(s){if(!this.disableCcipRead&&H1(s)&&s.data&&r>=0&&n==="latest"&&i.to!=null&&gt(s.data,0,4)==="0x556f1830"){const o=s.data,a=await En(i.to,this);let l;try{l=R6(gt(s.data,4))}catch(d){de(!1,d.message,"OFFCHAIN_FAULT",{reason:"BAD_DATA",transaction:i,info:{data:o}})}de(l.sender.toLowerCase()===a.toLowerCase(),"CCIP Read sender mismatch","CALL_EXCEPTION",{action:"call",data:o,reason:"OffchainLookup",transaction:i,invocation:null,revert:{signature:"OffchainLookup(address,string[],bytes,bytes4,bytes)",name:"OffchainLookup",args:l.errorArgs}});const c=await this.ccipReadFetch(i,l.calldata,l.urls);de(c!=null,"CCIP Read failed to fetch data","OFFCHAIN_FAULT",{reason:"FETCH_FAILED",transaction:i,info:{data:s.data,errorArgs:l.errorArgs}});const u={to:a,data:vt([l.selector,P6([c,l.extraData])])};this.emit("debug",{action:"sendCcipReadCall",transaction:u});try{const d=await ge(this,De,Yv).call(this,u,n,r+1);return this.emit("debug",{action:"receiveCcipReadCallResult",transaction:Object.assign({},u),result:d}),d}catch(d){throw this.emit("debug",{action:"receiveCcipReadCallError",transaction:Object.assign({},u),error:d}),d}}throw s}},Jv=async function(e){const{value:n}=await mn({network:this.getNetwork(),value:e});return n},ed=async function(e,n,r){let i=this._getAddress(n),s=this._getBlockTag(r);return(typeof i!="string"||typeof s!="string")&&([i,s]=await Promise.all([i,s])),await ge(this,De,Jv).call(this,ge(this,De,Gn).call(this,Object.assign(e,{address:i,blockTag:s})))},Zv=async function(e,n){if(it(e,32))return await ge(this,De,Gn).call(this,{method:"getBlock",blockHash:e,includeTransactions:n});let r=this._getBlockTag(e);return typeof r!="string"&&(r=await r),await ge(this,De,Gn).call(this,{method:"getBlock",blockTag:r,includeTransactions:n})},td=async function(e,n){let r=await Nm(e,this);return r.type==="event"&&n&&n.length>0&&n[0].removed===!0&&(r=await Nm({orphan:"drop-log",log:n[0]},this)),_(this,nn).get(r.tag)||null},hp=async function(e){const n=await Nm(e,this),r=n.tag;let i=_(this,nn).get(r);return i||(i={subscriber:this._getSubscriber(n),tag:r,addressableMap:new WeakMap,nameMap:new Map,started:!1,listeners:[]},_(this,nn).set(r,i)),i};function k6(t,e){try{const n=Xv(t,e);if(n)return o0(n)}catch{}return null}function Xv(t,e){if(t==="0x")return null;try{const n=Oe(gt(t,e,e+32)),r=Oe(gt(t,n,n+32));return gt(t,n+32,n+32+r)}catch{}return null}function SA(t){const e=Pt(t);if(e.length>32)throw new Error("internal; should not happen");const n=new Uint8Array(32);return n.set(e,32-e.length),n}function _6(t){if(t.length%32===0)return t;const e=new Uint8Array(Math.ceil(t.length/32)*32);return e.set(t),e}const T6=new Uint8Array([]);function P6(t){const e=[];let n=0;for(let r=0;r<t.length;r++)e.push(T6),n+=32;for(let r=0;r<t.length;r++){const i=Be(t[r]);e[r]=SA(n),e.push(SA(i.length)),e.push(_6(i)),n+=32+Math.ceil(i.length/32)*32}return vt(e)}const xA="0x0000000000000000000000000000000000000000000000000000000000000000";function R6(t){const e={sender:"",urls:[],calldata:"",selector:"",extraData:"",errorArgs:[]};de(oc(t)>=5*32,"insufficient OffchainLookup data","OFFCHAIN_FAULT",{reason:"insufficient OffchainLookup data"});const n=gt(t,0,32);de(gt(n,0,12)===gt(xA,0,12),"corrupt OffchainLookup sender","OFFCHAIN_FAULT",{reason:"corrupt OffchainLookup sender"}),e.sender=gt(n,12);try{const r=[],i=Oe(gt(t,32,64)),s=Oe(gt(t,i,i+32)),o=gt(t,i+32);for(let a=0;a<s;a++){const l=k6(o,a*32);if(l==null)throw new Error("abort");r.push(l)}e.urls=r}catch{de(!1,"corrupt OffchainLookup urls","OFFCHAIN_FAULT",{reason:"corrupt OffchainLookup urls"})}try{const r=Xv(t,64);if(r==null)throw new Error("abort");e.calldata=r}catch{de(!1,"corrupt OffchainLookup calldata","OFFCHAIN_FAULT",{reason:"corrupt OffchainLookup calldata"})}de(gt(t,100,128)===gt(xA,0,28),"corrupt OffchainLookup callbaackSelector","OFFCHAIN_FAULT",{reason:"corrupt OffchainLookup callbaackSelector"}),e.selector=gt(t,96,100);try{const r=Xv(t,128);if(r==null)throw new Error("abort");e.extraData=r}catch{de(!1,"corrupt OffchainLookup extraData","OFFCHAIN_FAULT",{reason:"corrupt OffchainLookup extraData"})}return e.errorArgs="sender,urls,calldata,selector,extraData".split(/,/).map(r=>e[r]),e}function ea(t,e){if(t.provider)return t.provider;de(!1,"missing provider","UNSUPPORTED_OPERATION",{operation:e})}async function CA(t,e){let n=m0(e);if(n.to!=null&&(n.to=En(n.to,t)),n.from!=null){const r=n.from;n.from=Promise.all([t.getAddress(),En(r,t)]).then(([i,s])=>(G(i.toLowerCase()===s.toLowerCase(),"transaction from mismatch","tx.from",s),i))}else n.from=t.getAddress();return await mn(n)}class I6{constructor(e){Y(this,"provider");_e(this,{provider:e||null})}async getNonce(e){return ea(this,"getTransactionCount").getTransactionCount(await this.getAddress(),e)}async populateCall(e){return await CA(this,e)}async populateTransaction(e){const n=ea(this,"populateTransaction"),r=await CA(this,e);r.nonce==null&&(r.nonce=await this.getNonce("pending")),r.gasLimit==null&&(r.gasLimit=await this.estimateGas(r));const i=await this.provider.getNetwork();if(r.chainId!=null){const o=Ae(r.chainId);G(o===i.chainId,"transaction chainId mismatch","tx.chainId",e.chainId)}else r.chainId=i.chainId;const s=r.maxFeePerGas!=null||r.maxPriorityFeePerGas!=null;if(r.gasPrice!=null&&(r.type===2||s)?G(!1,"eip-1559 transaction do not support gasPrice","tx",e):(r.type===0||r.type===1)&&s&&G(!1,"pre-eip-1559 transaction do not support maxFeePerGas/maxPriorityFeePerGas","tx",e),(r.type===2||r.type==null)&&r.maxFeePerGas!=null&&r.maxPriorityFeePerGas!=null)r.type=2;else if(r.type===0||r.type===1){const o=await n.getFeeData();de(o.gasPrice!=null,"network does not support gasPrice","UNSUPPORTED_OPERATION",{operation:"getGasPrice"}),r.gasPrice==null&&(r.gasPrice=o.gasPrice)}else{const o=await n.getFeeData();if(r.type==null)if(o.maxFeePerGas!=null&&o.maxPriorityFeePerGas!=null)if(r.authorizationList&&r.authorizationList.length?r.type=4:r.type=2,r.gasPrice!=null){const a=r.gasPrice;delete r.gasPrice,r.maxFeePerGas=a,r.maxPriorityFeePerGas=a}else r.maxFeePerGas==null&&(r.maxFeePerGas=o.maxFeePerGas),r.maxPriorityFeePerGas==null&&(r.maxPriorityFeePerGas=o.maxPriorityFeePerGas);else o.gasPrice!=null?(de(!s,"network does not support EIP-1559","UNSUPPORTED_OPERATION",{operation:"populateTransaction"}),r.gasPrice==null&&(r.gasPrice=o.gasPrice),r.type=0):de(!1,"failed to get consistent fee data","UNSUPPORTED_OPERATION",{operation:"signer.getFeeData"});else(r.type===2||r.type===3||r.type===4)&&(r.maxFeePerGas==null&&(r.maxFeePerGas=o.maxFeePerGas),r.maxPriorityFeePerGas==null&&(r.maxPriorityFeePerGas=o.maxPriorityFeePerGas))}return await mn(r)}async populateAuthorization(e){const n=Object.assign({},e);return n.chainId==null&&(n.chainId=(await ea(this,"getNetwork").getNetwork()).chainId),n.nonce==null&&(n.nonce=await this.getNonce()),n}async estimateGas(e){return ea(this,"estimateGas").estimateGas(await this.populateCall(e))}async call(e){return ea(this,"call").call(await this.populateCall(e))}async resolveName(e){return await ea(this,"resolveName").resolveName(e)}async sendTransaction(e){const n=ea(this,"sendTransaction"),r=await this.populateTransaction(e);delete r.from;const i=c0.from(r);return await n.broadcastTransaction(await this.signTransaction(i))}authorize(e){de(!1,"authorization not implemented for this signer","UNSUPPORTED_OPERATION",{operation:"authorize"})}}function O6(t){return JSON.parse(JSON.stringify(t))}var hn,bi,ja,Ao,Ha,Jc,qo,ew,tw;class sT{constructor(e){ee(this,qo);ee(this,hn);ee(this,bi);ee(this,ja);ee(this,Ao);ee(this,Ha);ee(this,Jc);H(this,hn,e),H(this,bi,null),H(this,ja,ge(this,qo,ew).bind(this)),H(this,Ao,!1),H(this,Ha,null),H(this,Jc,!1)}_subscribe(e){throw new Error("subclasses must override this")}_emitResults(e,n){throw new Error("subclasses must override this")}_recover(e){throw new Error("subclasses must override this")}start(){_(this,Ao)||(H(this,Ao,!0),ge(this,qo,ew).call(this,-2))}stop(){_(this,Ao)&&(H(this,Ao,!1),H(this,Jc,!0),ge(this,qo,tw).call(this),_(this,hn).off("block",_(this,ja)))}pause(e){e&&ge(this,qo,tw).call(this),_(this,hn).off("block",_(this,ja))}resume(){this.start()}}hn=new WeakMap,bi=new WeakMap,ja=new WeakMap,Ao=new WeakMap,Ha=new WeakMap,Jc=new WeakMap,qo=new WeakSet,ew=async function(e){try{_(this,bi)==null&&H(this,bi,this._subscribe(_(this,hn)));let n=null;try{n=await _(this,bi)}catch(s){if(!Vt(s,"UNSUPPORTED_OPERATION")||s.operation!=="eth_newFilter")throw s}if(n==null){H(this,bi,null),_(this,hn)._recoverSubscriber(this,this._recover(_(this,hn)));return}const r=await _(this,hn).getNetwork();if(_(this,Ha)||H(this,Ha,r),_(this,Ha).chainId!==r.chainId)throw new Error("chaid changed");if(_(this,Jc))return;const i=await _(this,hn).send("eth_getFilterChanges",[n]);await this._emitResults(_(this,hn),i)}catch(n){console.log("@TODO",n)}_(this,hn).once("block",_(this,ja))},tw=function(){const e=_(this,bi);e&&(H(this,bi,null),e.then(n=>{_(this,hn).destroyed||_(this,hn).send("eth_uninstallFilter",[n])}))};var Ka;class N6 extends sT{constructor(n,r){super(n);ee(this,Ka);H(this,Ka,O6(r))}_recover(n){return new ob(n,_(this,Ka))}async _subscribe(n){return await n.send("eth_newFilter",[_(this,Ka)])}async _emitResults(n,r){for(const i of r)n.emit(_(this,Ka),n._wrapLog(i,n._network))}}Ka=new WeakMap;class M6 extends sT{async _subscribe(e){return await e.send("eth_newPendingTransactionFilter",[])}async _emitResults(e,n){for(const r of n)e.emit("pending",r)}}const L6="bigint,boolean,function,number,string,symbol".split(/,/g);function pp(t){if(t==null||L6.indexOf(typeof t)>=0||typeof t.getAddress=="function")return t;if(Array.isArray(t))return t.map(pp);if(typeof t=="object")return Object.keys(t).reduce((e,n)=>(e[n]=t[n],e),{});throw new Error(`should not happen: ${t} (${typeof t})`)}function B6(t){return new Promise(e=>{setTimeout(e,t)})}function wl(t){return t&&t.toLowerCase()}function kA(t){return t&&typeof t.pollingInterval=="number"}const oT={polling:!1,staticNetwork:null,batchStallTime:10,batchMaxSize:1<<20,batchMaxCount:100,cacheTimeout:250,pollingInterval:4e3};class Lm extends I6{constructor(n,r){super(n);Y(this,"address");r=Ze(r),_e(this,{address:r})}connect(n){de(!1,"cannot reconnect JsonRpcSigner","UNSUPPORTED_OPERATION",{operation:"signer.connect"})}async getAddress(){return this.address}async populateTransaction(n){return await this.populateCall(n)}async sendUncheckedTransaction(n){const r=pp(n),i=[];if(r.from){const o=r.from;i.push((async()=>{const a=await En(o,this.provider);G(a!=null&&a.toLowerCase()===this.address.toLowerCase(),"from address mismatch","transaction",n),r.from=a})())}else r.from=this.address;if(r.gasLimit==null&&i.push((async()=>{r.gasLimit=await this.provider.estimateGas({...r,from:this.address})})()),r.to!=null){const o=r.to;i.push((async()=>{r.to=await En(o,this.provider)})())}i.length&&await Promise.all(i);const s=this.provider.getRpcTransaction(r);return this.provider.send("eth_sendTransaction",[s])}async sendTransaction(n){const r=await this.provider.getBlockNumber(),i=await this.sendUncheckedTransaction(n);return await new Promise((s,o)=>{const a=[1e3,100];let l=0;const c=async()=>{try{const u=await this.provider.getTransaction(i);if(u!=null){s(u.replaceableTransaction(r));return}}catch(u){if(Vt(u,"CANCELLED")||Vt(u,"BAD_DATA")||Vt(u,"NETWORK_ERROR")||Vt(u,"UNSUPPORTED_OPERATION")){u.info==null&&(u.info={}),u.info.sendTransactionHash=i,o(u);return}if(Vt(u,"INVALID_ARGUMENT")&&(l++,u.info==null&&(u.info={}),u.info.sendTransactionHash=i,l>10)){o(u);return}this.provider.emit("error",at("failed to fetch transation after sending (will try again)","UNKNOWN_ERROR",{error:u}))}this.provider._setTimeout(()=>{c()},a.pop()||4e3)};c()})}async signTransaction(n){const r=pp(n);if(r.from){const s=await En(r.from,this.provider);G(s!=null&&s.toLowerCase()===this.address.toLowerCase(),"from address mismatch","transaction",n),r.from=s}else r.from=this.address;const i=this.provider.getRpcTransaction(r);return await this.provider.send("eth_signTransaction",[i])}async signMessage(n){const r=typeof n=="string"?ws(n):n;return await this.provider.send("personal_sign",[ve(r),this.address.toLowerCase()])}async signTypedData(n,r,i){const s=pp(i),o=await g0.resolveNames(n,r,s,async a=>{const l=await En(a);return G(l!=null,"TypedData does not support null address","value",a),l});return await this.provider.send("eth_signTypedData_v4",[this.address.toLowerCase(),JSON.stringify(g0.getPayload(o.domain,r,o.value))])}async unlock(n){return this.provider.send("personal_unlockAccount",[this.address.toLowerCase(),n,null])}async _legacySignMessage(n){const r=typeof n=="string"?ws(n):n;return await this.provider.send("eth_sign",[this.address.toLowerCase(),ve(r)])}}var za,Zc,cs,Ei,Vr,Er,On,_f,nw;class D6 extends C6{constructor(n,r){super(n,r);ee(this,_f);ee(this,za);ee(this,Zc);ee(this,cs);ee(this,Ei);ee(this,Vr);ee(this,Er);ee(this,On);H(this,Zc,1),H(this,za,Object.assign({},oT,r||{})),H(this,cs,[]),H(this,Ei,null),H(this,Er,null),H(this,On,null);{let s=null;const o=new Promise(a=>{s=a});H(this,Vr,{promise:o,resolve:s})}const i=this._getOption("staticNetwork");typeof i=="boolean"?(G(!i||n!=="any","staticNetwork cannot be used on special network 'any'","options",r),i&&n!=null&&H(this,Er,Pi.from(n))):i&&(G(n==null||i.matches(n),"staticNetwork MUST match network object","options",r),H(this,Er,i))}_getOption(n){return _(this,za)[n]}get _network(){return de(_(this,Er),"network is not available yet","NETWORK_ERROR"),_(this,Er)}async _perform(n){if(n.method==="call"||n.method==="estimateGas"){let i=n.transaction;if(i&&i.type!=null&&Ae(i.type)&&i.maxFeePerGas==null&&i.maxPriorityFeePerGas==null){const s=await this.getFeeData();s.maxFeePerGas==null&&s.maxPriorityFeePerGas==null&&(n=Object.assign({},n,{transaction:Object.assign({},i,{type:void 0})}))}}const r=this.getRpcRequest(n);return r!=null?await this.send(r.method,r.args):super._perform(n)}async _detectNetwork(){const n=this._getOption("staticNetwork");if(n)if(n===!0){if(_(this,Er))return _(this,Er)}else return n;return _(this,On)?await _(this,On):this.ready?(H(this,On,(async()=>{try{const r=Pi.from(Ae(await this.send("eth_chainId",[])));return H(this,On,null),r}catch(r){throw H(this,On,null),r}})()),await _(this,On)):(H(this,On,(async()=>{const r={id:Pu(this,Zc)._++,method:"eth_chainId",params:[],jsonrpc:"2.0"};this.emit("debug",{action:"sendRpcPayload",payload:r});let i;try{i=(await this._send(r))[0],H(this,On,null)}catch(s){throw H(this,On,null),this.emit("debug",{action:"receiveRpcError",error:s}),s}if(this.emit("debug",{action:"receiveRpcResult",result:i}),"result"in i)return Pi.from(Ae(i.result));throw this.getRpcError(r,i)})()),await _(this,On))}_start(){_(this,Vr)==null||_(this,Vr).resolve==null||(_(this,Vr).resolve(),H(this,Vr,null),(async()=>{for(;_(this,Er)==null&&!this.destroyed;)try{H(this,Er,await this._detectNetwork())}catch(n){if(this.destroyed)break;console.log("JsonRpcProvider failed to detect network and cannot start up; retry in 1s (perhaps the URL is wrong or the node is not started)"),this.emit("error",at("failed to bootstrap network detection","NETWORK_ERROR",{event:"initial-network-discovery",info:{error:n}})),await B6(1e3)}ge(this,_f,nw).call(this)})())}async _waitUntilReady(){if(_(this,Vr)!=null)return await _(this,Vr).promise}_getSubscriber(n){return n.type==="pending"?new M6(this):n.type==="event"?this._getOption("polling")?new ob(this,n.filter):new N6(this,n.filter):n.type==="orphan"&&n.filter.orphan==="drop-log"?new iT("orphan"):super._getSubscriber(n)}get ready(){return _(this,Vr)==null}getRpcTransaction(n){const r={};return["chainId","gasLimit","gasPrice","type","maxFeePerGas","maxPriorityFeePerGas","nonce","value"].forEach(i=>{if(n[i]==null)return;let s=i;i==="gasLimit"&&(s="gas"),r[s]=Qr(Ae(n[i],`tx.${i}`))}),["from","to","data"].forEach(i=>{n[i]!=null&&(r[i]=ve(n[i]))}),n.accessList&&(r.accessList=ul(n.accessList)),n.blobVersionedHashes&&(r.blobVersionedHashes=n.blobVersionedHashes.map(i=>i.toLowerCase())),n.authorizationList&&(r.authorizationList=n.authorizationList.map(i=>{const s=l3(i);return{address:s.address,nonce:Qr(s.nonce),chainId:Qr(s.chainId),yParity:Qr(s.signature.yParity),r:Qr(s.signature.r),s:Qr(s.signature.s)}})),r}getRpcRequest(n){switch(n.method){case"chainId":return{method:"eth_chainId",args:[]};case"getBlockNumber":return{method:"eth_blockNumber",args:[]};case"getGasPrice":return{method:"eth_gasPrice",args:[]};case"getPriorityFee":return{method:"eth_maxPriorityFeePerGas",args:[]};case"getBalance":return{method:"eth_getBalance",args:[wl(n.address),n.blockTag]};case"getTransactionCount":return{method:"eth_getTransactionCount",args:[wl(n.address),n.blockTag]};case"getCode":return{method:"eth_getCode",args:[wl(n.address),n.blockTag]};case"getStorage":return{method:"eth_getStorageAt",args:[wl(n.address),"0x"+n.position.toString(16),n.blockTag]};case"broadcastTransaction":return{method:"eth_sendRawTransaction",args:[n.signedTransaction]};case"getBlock":if("blockTag"in n)return{method:"eth_getBlockByNumber",args:[n.blockTag,!!n.includeTransactions]};if("blockHash"in n)return{method:"eth_getBlockByHash",args:[n.blockHash,!!n.includeTransactions]};break;case"getTransaction":return{method:"eth_getTransactionByHash",args:[n.hash]};case"getTransactionReceipt":return{method:"eth_getTransactionReceipt",args:[n.hash]};case"call":return{method:"eth_call",args:[this.getRpcTransaction(n.transaction),n.blockTag]};case"estimateGas":return{method:"eth_estimateGas",args:[this.getRpcTransaction(n.transaction)]};case"getLogs":return n.filter&&n.filter.address!=null&&(Array.isArray(n.filter.address)?n.filter.address=n.filter.address.map(wl):n.filter.address=wl(n.filter.address)),{method:"eth_getLogs",args:[n.filter]}}return null}getRpcError(n,r){const{method:i}=n,{error:s}=r;if(i==="eth_estimateGas"&&s.message){const l=s.message;if(!l.match(/revert/i)&&l.match(/insufficient funds/i))return at("insufficient funds","INSUFFICIENT_FUNDS",{transaction:n.params[0],info:{payload:n,error:s}});if(l.match(/nonce/i)&&l.match(/too low/i))return at("nonce has already been used","NONCE_EXPIRED",{transaction:n.params[0],info:{payload:n,error:s}})}if(i==="eth_call"||i==="eth_estimateGas"){const l=rw(s),c=Jd.getBuiltinCallException(i==="eth_call"?"call":"estimateGas",n.params[0],l?l.data:null);return c.info={error:s,payload:n},c}const o=JSON.stringify(U6(s));if(typeof s.message=="string"&&s.message.match(/user denied|ethers-user-denied/i))return at("user rejected action","ACTION_REJECTED",{action:{eth_sign:"signMessage",personal_sign:"signMessage",eth_signTypedData_v4:"signTypedData",eth_signTransaction:"signTransaction",eth_sendTransaction:"sendTransaction",eth_requestAccounts:"requestAccess",wallet_requestAccounts:"requestAccess"}[i]||"unknown",reason:"rejected",info:{payload:n,error:s}});if(i==="eth_sendRawTransaction"||i==="eth_sendTransaction"){const l=n.params[0];if(o.match(/insufficient funds|base fee exceeds gas limit/i))return at("insufficient funds for intrinsic transaction cost","INSUFFICIENT_FUNDS",{transaction:l,info:{error:s}});if(o.match(/nonce/i)&&o.match(/too low/i))return at("nonce has already been used","NONCE_EXPIRED",{transaction:l,info:{error:s}});if(o.match(/replacement transaction/i)&&o.match(/underpriced/i))return at("replacement fee too low","REPLACEMENT_UNDERPRICED",{transaction:l,info:{error:s}});if(o.match(/only replay-protected/i))return at("legacy pre-eip-155 transactions not supported","UNSUPPORTED_OPERATION",{operation:i,info:{transaction:l,info:{error:s}}})}let a=!!o.match(/the method .* does not exist/i);return a||s&&s.details&&s.details.startsWith("Unauthorized method:")&&(a=!0),a?at("unsupported operation","UNSUPPORTED_OPERATION",{operation:n.method,info:{error:s,payload:n}}):at("could not coalesce error","UNKNOWN_ERROR",{error:s,payload:n})}send(n,r){if(this.destroyed)return Promise.reject(at("provider destroyed; cancelled request","UNSUPPORTED_OPERATION",{operation:n}));const i=Pu(this,Zc)._++,s=new Promise((o,a)=>{_(this,cs).push({resolve:o,reject:a,payload:{method:n,params:r,id:i,jsonrpc:"2.0"}})});return ge(this,_f,nw).call(this),s}async getSigner(n){n==null&&(n=0);const r=this.send("eth_accounts",[]);if(typeof n=="number"){const s=await r;if(n>=s.length)throw new Error("no such account");return new Lm(this,s[n])}const{accounts:i}=await mn({network:this.getNetwork(),accounts:r});n=Ze(n);for(const s of i)if(Ze(s)===n)return new Lm(this,n);throw new Error("invalid account")}async listAccounts(){return(await this.send("eth_accounts",[])).map(r=>new Lm(this,r))}destroy(){_(this,Ei)&&(clearTimeout(_(this,Ei)),H(this,Ei,null));for(const{payload:n,reject:r}of _(this,cs))r(at("provider destroyed; cancelled request","UNSUPPORTED_OPERATION",{operation:n.method}));H(this,cs,[]),super.destroy()}}za=new WeakMap,Zc=new WeakMap,cs=new WeakMap,Ei=new WeakMap,Vr=new WeakMap,Er=new WeakMap,On=new WeakMap,_f=new WeakSet,nw=function(){if(_(this,Ei))return;const n=this._getOption("batchMaxCount")===1?0:this._getOption("batchStallTime");H(this,Ei,setTimeout(()=>{H(this,Ei,null);const r=_(this,cs);for(H(this,cs,[]);r.length;){const i=[r.shift()];for(;r.length&&i.length!==_(this,za).batchMaxCount;)if(i.push(r.shift()),JSON.stringify(i.map(o=>o.payload)).length>_(this,za).batchMaxSize){r.unshift(i.pop());break}(async()=>{const s=i.length===1?i[0].payload:i.map(o=>o.payload);this.emit("debug",{action:"sendRpcPayload",payload:s});try{const o=await this._send(s);this.emit("debug",{action:"receiveRpcResult",result:o});for(const{resolve:a,reject:l,payload:c}of i){if(this.destroyed){l(at("provider destroyed; cancelled request","UNSUPPORTED_OPERATION",{operation:c.method}));continue}const u=o.filter(d=>d.id===c.id)[0];if(u==null){const d=at("missing response for request","BAD_DATA",{value:o,info:{payload:c}});this.emit("error",d),l(d);continue}if("error"in u){l(this.getRpcError(c,u));continue}a(u.result)}}catch(o){this.emit("debug",{action:"receiveRpcError",error:o});for(const{reject:a}of i)a(o)}})()}},n))};var So;class $6 extends D6{constructor(n,r){super(n,r);ee(this,So);let i=this._getOption("pollingInterval");i==null&&(i=oT.pollingInterval),H(this,So,i)}_getSubscriber(n){const r=super._getSubscriber(n);return kA(r)&&(r.pollingInterval=_(this,So)),r}get pollingInterval(){return _(this,So)}set pollingInterval(n){if(!Number.isInteger(n)||n<0)throw new Error("invalid interval");H(this,So,n),this._forEachSubscriber(r=>{kA(r)&&(r.pollingInterval=_(this,So))})}}So=new WeakMap;function rw(t){if(t==null)return null;if(typeof t.message=="string"&&t.message.match(/revert/i)&&it(t.data))return{message:t.message,data:t.data};if(typeof t=="object"){for(const e in t){const n=rw(t[e]);if(n)return n}return null}if(typeof t=="string")try{return rw(JSON.parse(t))}catch{}return null}function iw(t,e){if(t!=null){if(typeof t.message=="string"&&e.push(t.message),typeof t=="object")for(const n in t)iw(t[n],e);if(typeof t=="string")try{return iw(JSON.parse(t),e)}catch{}}}function U6(t){const e=[];return iw(t,e),e}var Xc,eu;const ha=class ha extends $6{constructor(n,r,i){const s=Object.assign({},i??{},{batchMaxCount:1});G(n&&n.request,"invalid EIP-1193 provider","ethereum",n);super(r,s);ee(this,Xc);ee(this,eu);H(this,eu,null),i&&i.providerInfo&&H(this,eu,i.providerInfo),H(this,Xc,async(o,a)=>{const l={method:o,params:a};this.emit("debug",{action:"sendEip1193Request",payload:l});try{const c=await n.request(l);return this.emit("debug",{action:"receiveEip1193Result",result:c}),c}catch(c){const u=new Error(c.message);throw u.code=c.code,u.data=c.data,u.payload=l,this.emit("debug",{action:"receiveEip1193Error",error:u}),u}})}get providerInfo(){return _(this,eu)}async send(n,r){return await this._start(),await super.send(n,r)}async _send(n){G(!Array.isArray(n),"EIP-1193 does not support batch request","payload",n);try{const r=await _(this,Xc).call(this,n.method,n.params||[]);return[{id:n.id,result:r}]}catch(r){return[{id:n.id,error:{code:r.code,data:r.data,message:r.message}}]}}getRpcError(n,r){switch(r=JSON.parse(JSON.stringify(r)),r.error.code||-1){case 4001:r.error.message=`ethers-user-denied: ${r.error.message}`;break;case 4200:r.error.message=`ethers-unsupported: ${r.error.message}`;break}return super.getRpcError(n,r)}async hasSigner(n){n==null&&(n=0);const r=await this.send("eth_accounts",[]);return typeof n=="number"?r.length>n:(n=n.toLowerCase(),r.filter(i=>i.toLowerCase()===n).length!==0)}async getSigner(n){if(n==null&&(n=0),!await this.hasSigner(n))try{await _(this,Xc).call(this,"eth_requestAccounts",[])}catch(r){const i=r.payload;throw this.getRpcError(i,{id:i.id,error:r})}return await super.getSigner(n)}static async discover(n){if(n==null&&(n={}),n.provider)return new ha(n.provider);const r=n.window?n.window:typeof window<"u"?window:null;if(r==null)return null;const i=n.anyProvider;if(i&&r.ethereum)return new ha(r.ethereum);if(!("addEventListener"in r&&"dispatchEvent"in r&&"removeEventListener"in r))return null;const s=n.timeout?n.timeout:300;return s===0?null:await new Promise((o,a)=>{let l=[];const c=f=>{l.push(f.detail),i&&u()},u=()=>{if(clearTimeout(d),l.length)if(n&&n.filter){const f=n.filter(l.map(h=>Object.assign({},h.info)));if(f==null)o(null);else if(f instanceof ha)o(f);else{let h=null;if(f.uuid&&(h=l.filter(g=>f.uuid===g.info.uuid)[0]),h){const{provider:m,info:g}=h;o(new ha(m,void 0,{providerInfo:g}))}else a(at("filter returned unknown info","UNSUPPORTED_OPERATION",{value:f}))}}else{const{provider:f,info:h}=l[0];o(new ha(f,void 0,{providerInfo:h}))}else o(null);r.removeEventListener("eip6963:announceProvider",c)},d=setTimeout(()=>{u()},s);r.addEventListener("eip6963:announceProvider",c),r.dispatchEvent(new Event("eip6963:requestProvider"))})}};Xc=new WeakMap,eu=new WeakMap;let w0=ha;const F6="modulepreload",j6=function(t,e){return new URL(t,e).href},_A={},H6=function(e,n,r){let i=Promise.resolve();if(n&&n.length>0){const o=document.getElementsByTagName("link"),a=document.querySelector("meta[property=csp-nonce]"),l=(a==null?void 0:a.nonce)||(a==null?void 0:a.getAttribute("nonce"));i=Promise.allSettled(n.map(c=>{if(c=j6(c,r),c in _A)return;_A[c]=!0;const u=c.endsWith(".css"),d=u?'[rel="stylesheet"]':"";if(!!r)for(let m=o.length-1;m>=0;m--){const g=o[m];if(g.href===c&&(!u||g.rel==="stylesheet"))return}else if(document.querySelector(`link[href="${c}"]${d}`))return;const h=document.createElement("link");if(h.rel=u?"stylesheet":F6,u||(h.as="script"),h.crossOrigin="",h.href=c,l&&h.setAttribute("nonce",l),document.head.appendChild(h),u)return new Promise((m,g)=>{h.addEventListener("load",m),h.addEventListener("error",()=>g(new Error(`Unable to preload CSS for ${c}`)))})}))}function s(o){const a=new Event("vite:preloadError",{cancelable:!0});if(a.payload=o,window.dispatchEvent(a),!a.defaultPrevented)throw o}return i.then(o=>{for(const a of o||[])a.status==="rejected"&&s(a.reason);return e().catch(s)})};var sw={exports:{}};(function(t,e){var n=typeof globalThis<"u"&&globalThis||typeof self<"u"&&self||typeof qf<"u"&&qf,r=function(){function s(){this.fetch=!1,this.DOMException=n.DOMException}return s.prototype=n,new s}();(function(s){(function(o){var a=typeof s<"u"&&s||typeof self<"u"&&self||typeof qf<"u"&&qf||{},l={searchParams:"URLSearchParams"in a,iterable:"Symbol"in a&&"iterator"in Symbol,blob:"FileReader"in a&&"Blob"in a&&function(){try{return new Blob,!0}catch{return!1}}(),formData:"FormData"in a,arrayBuffer:"ArrayBuffer"in a};function c(x){return x&&DataView.prototype.isPrototypeOf(x)}if(l.arrayBuffer)var u=["[object Int8Array]","[object Uint8Array]","[object Uint8ClampedArray]","[object Int16Array]","[object Uint16Array]","[object Int32Array]","[object Uint32Array]","[object Float32Array]","[object Float64Array]"],d=ArrayBuffer.isView||function(x){return x&&u.indexOf(Object.prototype.toString.call(x))>-1};function f(x){if(typeof x!="string"&&(x=String(x)),/[^a-z0-9\-#$%&'*+.^_`|~!]/i.test(x)||x==="")throw new TypeError('Invalid character in header field name: "'+x+'"');return x.toLowerCase()}function h(x){return typeof x!="string"&&(x=String(x)),x}function m(x){var O={next:function(){var B=x.shift();return{done:B===void 0,value:B}}};return l.iterable&&(O[Symbol.iterator]=function(){return O}),O}function g(x){this.map={},x instanceof g?x.forEach(function(O,B){this.append(B,O)},this):Array.isArray(x)?x.forEach(function(O){if(O.length!=2)throw new TypeError("Headers constructor: expected name/value pair to be length 2, found"+O.length);this.append(O[0],O[1])},this):x&&Object.getOwnPropertyNames(x).forEach(function(O){this.append(O,x[O])},this)}g.prototype.append=function(x,O){x=f(x),O=h(O);var B=this.map[x];this.map[x]=B?B+", "+O:O},g.prototype.delete=function(x){delete this.map[f(x)]},g.prototype.get=function(x){return x=f(x),this.has(x)?this.map[x]:null},g.prototype.has=function(x){return this.map.hasOwnProperty(f(x))},g.prototype.set=function(x,O){this.map[f(x)]=h(O)},g.prototype.forEach=function(x,O){for(var B in this.map)this.map.hasOwnProperty(B)&&x.call(O,this.map[B],B,this)},g.prototype.keys=function(){var x=[];return this.forEach(function(O,B){x.push(B)}),m(x)},g.prototype.values=function(){var x=[];return this.forEach(function(O){x.push(O)}),m(x)},g.prototype.entries=function(){var x=[];return this.forEach(function(O,B){x.push([B,O])}),m(x)},l.iterable&&(g.prototype[Symbol.iterator]=g.prototype.entries);function w(x){if(!x._noBody){if(x.bodyUsed)return Promise.reject(new TypeError("Already read"));x.bodyUsed=!0}}function p(x){return new Promise(function(O,B){x.onload=function(){O(x.result)},x.onerror=function(){B(x.error)}})}function v(x){var O=new FileReader,B=p(O);return O.readAsArrayBuffer(x),B}function y(x){var O=new FileReader,B=p(O),b=/charset=([A-Za-z0-9_-]+)/.exec(x.type),E=b?b[1]:"utf-8";return O.readAsText(x,E),B}function C(x){for(var O=new Uint8Array(x),B=new Array(O.length),b=0;b<O.length;b++)B[b]=String.fromCharCode(O[b]);return B.join("")}function P(x){if(x.slice)return x.slice(0);var O=new Uint8Array(x.byteLength);return O.set(new Uint8Array(x)),O.buffer}function L(){return this.bodyUsed=!1,this._initBody=function(x){this.bodyUsed=this.bodyUsed,this._bodyInit=x,x?typeof x=="string"?this._bodyText=x:l.blob&&Blob.prototype.isPrototypeOf(x)?this._bodyBlob=x:l.formData&&FormData.prototype.isPrototypeOf(x)?this._bodyFormData=x:l.searchParams&&URLSearchParams.prototype.isPrototypeOf(x)?this._bodyText=x.toString():l.arrayBuffer&&l.blob&&c(x)?(this._bodyArrayBuffer=P(x.buffer),this._bodyInit=new Blob([this._bodyArrayBuffer])):l.arrayBuffer&&(ArrayBuffer.prototype.isPrototypeOf(x)||d(x))?this._bodyArrayBuffer=P(x):this._bodyText=x=Object.prototype.toString.call(x):(this._noBody=!0,this._bodyText=""),this.headers.get("content-type")||(typeof x=="string"?this.headers.set("content-type","text/plain;charset=UTF-8"):this._bodyBlob&&this._bodyBlob.type?this.headers.set("content-type",this._bodyBlob.type):l.searchParams&&URLSearchParams.prototype.isPrototypeOf(x)&&this.headers.set("content-type","application/x-www-form-urlencoded;charset=UTF-8"))},l.blob&&(this.blob=function(){var x=w(this);if(x)return x;if(this._bodyBlob)return Promise.resolve(this._bodyBlob);if(this._bodyArrayBuffer)return Promise.resolve(new Blob([this._bodyArrayBuffer]));if(this._bodyFormData)throw new Error("could not read FormData body as blob");return Promise.resolve(new Blob([this._bodyText]))}),this.arrayBuffer=function(){if(this._bodyArrayBuffer){var x=w(this);return x||(ArrayBuffer.isView(this._bodyArrayBuffer)?Promise.resolve(this._bodyArrayBuffer.buffer.slice(this._bodyArrayBuffer.byteOffset,this._bodyArrayBuffer.byteOffset+this._bodyArrayBuffer.byteLength)):Promise.resolve(this._bodyArrayBuffer))}else{if(l.blob)return this.blob().then(v);throw new Error("could not read as ArrayBuffer")}},this.text=function(){var x=w(this);if(x)return x;if(this._bodyBlob)return y(this._bodyBlob);if(this._bodyArrayBuffer)return Promise.resolve(C(this._bodyArrayBuffer));if(this._bodyFormData)throw new Error("could not read FormData body as text");return Promise.resolve(this._bodyText)},l.formData&&(this.formData=function(){return this.text().then(F)}),this.json=function(){return this.text().then(JSON.parse)},this}var j=["CONNECT","DELETE","GET","HEAD","OPTIONS","PATCH","POST","PUT","TRACE"];function D(x){var O=x.toUpperCase();return j.indexOf(O)>-1?O:x}function V(x,O){if(!(this instanceof V))throw new TypeError('Please use the "new" operator, this DOM object constructor cannot be called as a function.');O=O||{};var B=O.body;if(x instanceof V){if(x.bodyUsed)throw new TypeError("Already read");this.url=x.url,this.credentials=x.credentials,O.headers||(this.headers=new g(x.headers)),this.method=x.method,this.mode=x.mode,this.signal=x.signal,!B&&x._bodyInit!=null&&(B=x._bodyInit,x.bodyUsed=!0)}else this.url=String(x);if(this.credentials=O.credentials||this.credentials||"same-origin",(O.headers||!this.headers)&&(this.headers=new g(O.headers)),this.method=D(O.method||this.method||"GET"),this.mode=O.mode||this.mode||null,this.signal=O.signal||this.signal||function(){if("AbortController"in a){var k=new AbortController;return k.signal}}(),this.referrer=null,(this.method==="GET"||this.method==="HEAD")&&B)throw new TypeError("Body not allowed for GET or HEAD requests");if(this._initBody(B),(this.method==="GET"||this.method==="HEAD")&&(O.cache==="no-store"||O.cache==="no-cache")){var b=/([?&])_=[^&]*/;if(b.test(this.url))this.url=this.url.replace(b,"$1_="+new Date().getTime());else{var E=/\?/;this.url+=(E.test(this.url)?"&":"?")+"_="+new Date().getTime()}}}V.prototype.clone=function(){return new V(this,{body:this._bodyInit})};function F(x){var O=new FormData;return x.trim().split("&").forEach(function(B){if(B){var b=B.split("="),E=b.shift().replace(/\+/g," "),k=b.join("=").replace(/\+/g," ");O.append(decodeURIComponent(E),decodeURIComponent(k))}}),O}function W(x){var O=new g,B=x.replace(/\r?\n[\t ]+/g," ");return B.split("\r").map(function(b){return b.indexOf(`
`)===0?b.substr(1,b.length):b}).forEach(function(b){var E=b.split(":"),k=E.shift().trim();if(k){var I=E.join(":").trim();try{O.append(k,I)}catch(A){console.warn("Response "+A.message)}}}),O}L.call(V.prototype);function K(x,O){if(!(this instanceof K))throw new TypeError('Please use the "new" operator, this DOM object constructor cannot be called as a function.');if(O||(O={}),this.type="default",this.status=O.status===void 0?200:O.status,this.status<200||this.status>599)throw new RangeError("Failed to construct 'Response': The status provided (0) is outside the range [200, 599].");this.ok=this.status>=200&&this.status<300,this.statusText=O.statusText===void 0?"":""+O.statusText,this.headers=new g(O.headers),this.url=O.url||"",this._initBody(x)}L.call(K.prototype),K.prototype.clone=function(){return new K(this._bodyInit,{status:this.status,statusText:this.statusText,headers:new g(this.headers),url:this.url})},K.error=function(){var x=new K(null,{status:200,statusText:""});return x.ok=!1,x.status=0,x.type="error",x};var $=[301,302,303,307,308];K.redirect=function(x,O){if($.indexOf(O)===-1)throw new RangeError("Invalid status code");return new K(null,{status:O,headers:{location:x}})},o.DOMException=a.DOMException;try{new o.DOMException}catch{o.DOMException=function(O,B){this.message=O,this.name=B;var b=Error(O);this.stack=b.stack},o.DOMException.prototype=Object.create(Error.prototype),o.DOMException.prototype.constructor=o.DOMException}function M(x,O){return new Promise(function(B,b){var E=new V(x,O);if(E.signal&&E.signal.aborted)return b(new o.DOMException("Aborted","AbortError"));var k=new XMLHttpRequest;function I(){k.abort()}k.onload=function(){var T={statusText:k.statusText,headers:W(k.getAllResponseHeaders()||"")};E.url.indexOf("file://")===0&&(k.status<200||k.status>599)?T.status=200:T.status=k.status,T.url="responseURL"in k?k.responseURL:T.headers.get("X-Request-URL");var R="response"in k?k.response:k.responseText;setTimeout(function(){B(new K(R,T))},0)},k.onerror=function(){setTimeout(function(){b(new TypeError("Network request failed"))},0)},k.ontimeout=function(){setTimeout(function(){b(new TypeError("Network request timed out"))},0)},k.onabort=function(){setTimeout(function(){b(new o.DOMException("Aborted","AbortError"))},0)};function A(T){try{return T===""&&a.location.href?a.location.href:T}catch{return T}}if(k.open(E.method,A(E.url),!0),E.credentials==="include"?k.withCredentials=!0:E.credentials==="omit"&&(k.withCredentials=!1),"responseType"in k&&(l.blob?k.responseType="blob":l.arrayBuffer&&(k.responseType="arraybuffer")),O&&typeof O.headers=="object"&&!(O.headers instanceof g||a.Headers&&O.headers instanceof a.Headers)){var S=[];Object.getOwnPropertyNames(O.headers).forEach(function(T){S.push(f(T)),k.setRequestHeader(T,h(O.headers[T]))}),E.headers.forEach(function(T,R){S.indexOf(R)===-1&&k.setRequestHeader(R,T)})}else E.headers.forEach(function(T,R){k.setRequestHeader(R,T)});E.signal&&(E.signal.addEventListener("abort",I),k.onreadystatechange=function(){k.readyState===4&&E.signal.removeEventListener("abort",I)}),k.send(typeof E._bodyInit>"u"?null:E._bodyInit)})}return M.polyfill=!0,a.fetch||(a.fetch=M,a.Headers=g,a.Request=V,a.Response=K),o.Headers=g,o.Request=V,o.Response=K,o.fetch=M,o})({})})(r),r.fetch.ponyfill=!0,delete r.fetch.polyfill;var i=n.fetch?n:r;e=i.fetch,e.default=i.fetch,e.fetch=i.fetch,e.Headers=i.Headers,e.Request=i.Request,e.Response=i.Response,t.exports=e})(sw,sw.exports);var K6=sw.exports;const aT=X0(K6);var ow={exports:{}},Bm,TA;function z6(){if(TA)return Bm;TA=1;var t=1e3,e=t*60,n=e*60,r=n*24,i=r*7,s=r*365.25;Bm=function(u,d){d=d||{};var f=typeof u;if(f==="string"&&u.length>0)return o(u);if(f==="number"&&isFinite(u))return d.long?l(u):a(u);throw new Error("val is not a non-empty string or a valid number. val="+JSON.stringify(u))};function o(u){if(u=String(u),!(u.length>100)){var d=/^(-?(?:\d+)?\.?\d+) *(milliseconds?|msecs?|ms|seconds?|secs?|s|minutes?|mins?|m|hours?|hrs?|h|days?|d|weeks?|w|years?|yrs?|y)?$/i.exec(u);if(d){var f=parseFloat(d[1]),h=(d[2]||"ms").toLowerCase();switch(h){case"years":case"year":case"yrs":case"yr":case"y":return f*s;case"weeks":case"week":case"w":return f*i;case"days":case"day":case"d":return f*r;case"hours":case"hour":case"hrs":case"hr":case"h":return f*n;case"minutes":case"minute":case"mins":case"min":case"m":return f*e;case"seconds":case"second":case"secs":case"sec":case"s":return f*t;case"milliseconds":case"millisecond":case"msecs":case"msec":case"ms":return f;default:return}}}}function a(u){var d=Math.abs(u);return d>=r?Math.round(u/r)+"d":d>=n?Math.round(u/n)+"h":d>=e?Math.round(u/e)+"m":d>=t?Math.round(u/t)+"s":u+"ms"}function l(u){var d=Math.abs(u);return d>=r?c(u,d,r,"day"):d>=n?c(u,d,n,"hour"):d>=e?c(u,d,e,"minute"):d>=t?c(u,d,t,"second"):u+" ms"}function c(u,d,f,h){var m=d>=f*1.5;return Math.round(u/f)+" "+h+(m?"s":"")}return Bm}function V6(t){n.debug=n,n.default=n,n.coerce=l,n.disable=o,n.enable=i,n.enabled=a,n.humanize=z6(),n.destroy=c,Object.keys(t).forEach(u=>{n[u]=t[u]}),n.names=[],n.skips=[],n.formatters={};function e(u){let d=0;for(let f=0;f<u.length;f++)d=(d<<5)-d+u.charCodeAt(f),d|=0;return n.colors[Math.abs(d)%n.colors.length]}n.selectColor=e;function n(u){let d,f=null,h,m;function g(...w){if(!g.enabled)return;const p=g,v=Number(new Date),y=v-(d||v);p.diff=y,p.prev=d,p.curr=v,d=v,w[0]=n.coerce(w[0]),typeof w[0]!="string"&&w.unshift("%O");let C=0;w[0]=w[0].replace(/%([a-zA-Z%])/g,(L,j)=>{if(L==="%%")return"%";C++;const D=n.formatters[j];if(typeof D=="function"){const V=w[C];L=D.call(p,V),w.splice(C,1),C--}return L}),n.formatArgs.call(p,w),(p.log||n.log).apply(p,w)}return g.namespace=u,g.useColors=n.useColors(),g.color=n.selectColor(u),g.extend=r,g.destroy=n.destroy,Object.defineProperty(g,"enabled",{enumerable:!0,configurable:!1,get:()=>f!==null?f:(h!==n.namespaces&&(h=n.namespaces,m=n.enabled(u)),m),set:w=>{f=w}}),typeof n.init=="function"&&n.init(g),g}function r(u,d){const f=n(this.namespace+(typeof d>"u"?":":d)+u);return f.log=this.log,f}function i(u){n.save(u),n.namespaces=u,n.names=[],n.skips=[];const d=(typeof u=="string"?u:"").trim().replace(/\s+/g,",").split(",").filter(Boolean);for(const f of d)f[0]==="-"?n.skips.push(f.slice(1)):n.names.push(f)}function s(u,d){let f=0,h=0,m=-1,g=0;for(;f<u.length;)if(h<d.length&&(d[h]===u[f]||d[h]==="*"))d[h]==="*"?(m=h,g=f,h++):(f++,h++);else if(m!==-1)h=m+1,g++,f=g;else return!1;for(;h<d.length&&d[h]==="*";)h++;return h===d.length}function o(){const u=[...n.names,...n.skips.map(d=>"-"+d)].join(",");return n.enable(""),u}function a(u){for(const d of n.skips)if(s(u,d))return!1;for(const d of n.names)if(s(u,d))return!0;return!1}function l(u){return u instanceof Error?u.stack||u.message:u}function c(){console.warn("Instance method `debug.destroy()` is deprecated and no longer does anything. It will be removed in the next major version of `debug`.")}return n.enable(n.load()),n}var G6=V6;(function(t,e){var n={};e.formatArgs=i,e.save=s,e.load=o,e.useColors=r,e.storage=a(),e.destroy=(()=>{let c=!1;return()=>{c||(c=!0,console.warn("Instance method `debug.destroy()` is deprecated and no longer does anything. It will be removed in the next major version of `debug`."))}})(),e.colors=["#0000CC","#0000FF","#0033CC","#0033FF","#0066CC","#0066FF","#0099CC","#0099FF","#00CC00","#00CC33","#00CC66","#00CC99","#00CCCC","#00CCFF","#3300CC","#3300FF","#3333CC","#3333FF","#3366CC","#3366FF","#3399CC","#3399FF","#33CC00","#33CC33","#33CC66","#33CC99","#33CCCC","#33CCFF","#6600CC","#6600FF","#6633CC","#6633FF","#66CC00","#66CC33","#9900CC","#9900FF","#9933CC","#9933FF","#99CC00","#99CC33","#CC0000","#CC0033","#CC0066","#CC0099","#CC00CC","#CC00FF","#CC3300","#CC3333","#CC3366","#CC3399","#CC33CC","#CC33FF","#CC6600","#CC6633","#CC9900","#CC9933","#CCCC00","#CCCC33","#FF0000","#FF0033","#FF0066","#FF0099","#FF00CC","#FF00FF","#FF3300","#FF3333","#FF3366","#FF3399","#FF33CC","#FF33FF","#FF6600","#FF6633","#FF9900","#FF9933","#FFCC00","#FFCC33"];function r(){if(typeof window<"u"&&window.process&&(window.process.type==="renderer"||window.process.__nwjs))return!0;if(typeof navigator<"u"&&navigator.userAgent&&navigator.userAgent.toLowerCase().match(/(edge|trident)\/(\d+)/))return!1;let c;return typeof document<"u"&&document.documentElement&&document.documentElement.style&&document.documentElement.style.WebkitAppearance||typeof window<"u"&&window.console&&(window.console.firebug||window.console.exception&&window.console.table)||typeof navigator<"u"&&navigator.userAgent&&(c=navigator.userAgent.toLowerCase().match(/firefox\/(\d+)/))&&parseInt(c[1],10)>=31||typeof navigator<"u"&&navigator.userAgent&&navigator.userAgent.toLowerCase().match(/applewebkit\/(\d+)/)}function i(c){if(c[0]=(this.useColors?"%c":"")+this.namespace+(this.useColors?" %c":" ")+c[0]+(this.useColors?"%c ":" ")+"+"+t.exports.humanize(this.diff),!this.useColors)return;const u="color: "+this.color;c.splice(1,0,u,"color: inherit");let d=0,f=0;c[0].replace(/%[a-zA-Z%]/g,h=>{h!=="%%"&&(d++,h==="%c"&&(f=d))}),c.splice(f,0,u)}e.log=console.debug||console.log||(()=>{});function s(c){try{c?e.storage.setItem("debug",c):e.storage.removeItem("debug")}catch{}}function o(){let c;try{c=e.storage.getItem("debug")||e.storage.getItem("DEBUG")}catch{}return!c&&typeof process<"u"&&"env"in process&&(c=n.DEBUG),c}function a(){try{return localStorage}catch{}}t.exports=G6(e);const{formatters:l}=t.exports;l.j=function(c){try{return JSON.stringify(c)}catch(u){return"[UnexpectedJSONParseError]: "+u.message}}})(ow,ow.exports);var W6=ow.exports;const Sn=X0(W6);var ab=Object.defineProperty,q6=Object.getOwnPropertyDescriptor,Q6=Object.getOwnPropertyNames,Y6=Object.prototype.hasOwnProperty,J6=(t,e)=>{for(var n in e)ab(t,n,{get:e[n],enumerable:!0})},Z6=(t,e,n,r)=>{if(e&&typeof e=="object"||typeof e=="function")for(let i of Q6(e))!Y6.call(t,i)&&i!==n&&ab(t,i,{get:()=>e[i],enumerable:!(r=q6(e,i))||r.enumerable});return t},X6=t=>Z6(ab({},"__esModule",{value:!0}),t),lT={};J6(lT,{createFinalURL:()=>pT,createPathBasedClient:()=>sL,createQuerySerializer:()=>aw,default:()=>uT,defaultBodySerializer:()=>hT,defaultPathSerializer:()=>fT,mergeHeaders:()=>lw,randomID:()=>cT,removeTrailingSlash:()=>cw,serializeArrayParam:()=>cb,serializeObjectParam:()=>lb,serializePrimitiveParam:()=>Uf,wrapAsPathBasedClient:()=>dT});var eL=X6(lT),tL=/\{[^{}]+\}/g,nL=()=>{var t,e;return typeof process=="object"&&Number.parseInt((e=(t=process==null?void 0:process.versions)==null?void 0:t.node)==null?void 0:e.substring(0,2))>=18&&process.versions.undici};function cT(){return Math.random().toString(36).slice(2,11)}function uT(t){let{baseUrl:e="",Request:n=globalThis.Request,fetch:r=globalThis.fetch,querySerializer:i,bodySerializer:s,headers:o,requestInitExt:a=void 0,...l}={...t};a=nL()?a:void 0,e=cw(e);const c=[];async function u(d,f){const{baseUrl:h,fetch:m=r,Request:g=n,headers:w,params:p={},parseAs:v="json",querySerializer:y,bodySerializer:C=s??hT,body:P,...L}=f||{};let j=e;h&&(j=cw(h)??e);let D=typeof i=="function"?i:aw(i);y&&(D=typeof y=="function"?y:aw({...typeof i=="object"?i:{},...y}));const V=P===void 0?void 0:C(P,lw(o,w,p.header)),F=lw(V===void 0||V instanceof FormData?{}:{"Content-Type":"application/json"},o,w,p.header),W={redirect:"follow",...l,...L,body:V,headers:F};let K,$,M=new n(pT(d,{baseUrl:j,params:p,querySerializer:D}),W),x;for(const B in L)B in M||(M[B]=L[B]);if(c.length){K=cT(),$=Object.freeze({baseUrl:j,fetch:m,parseAs:v,querySerializer:D,bodySerializer:C});for(const B of c)if(B&&typeof B=="object"&&typeof B.onRequest=="function"){const b=await B.onRequest({request:M,schemaPath:d,params:p,options:$,id:K});if(b)if(b instanceof n)M=b;else if(b instanceof Response){x=b;break}else throw new Error("onRequest: must return new Request() or Response() when modifying the request")}}if(!x){try{x=await m(M,a)}catch(B){let b=B;if(c.length)for(let E=c.length-1;E>=0;E--){const k=c[E];if(k&&typeof k=="object"&&typeof k.onError=="function"){const I=await k.onError({request:M,error:b,schemaPath:d,params:p,options:$,id:K});if(I){if(I instanceof Response){b=void 0,x=I;break}if(I instanceof Error){b=I;continue}throw new Error("onError: must return new Response() or instance of Error")}}}if(b)throw b}if(c.length)for(let B=c.length-1;B>=0;B--){const b=c[B];if(b&&typeof b=="object"&&typeof b.onResponse=="function"){const E=await b.onResponse({request:M,response:x,schemaPath:d,params:p,options:$,id:K});if(E){if(!(E instanceof Response))throw new Error("onResponse: must return new Response() when modifying the response");x=E}}}}if(x.status===204||M.method==="HEAD"||x.headers.get("Content-Length")==="0")return x.ok?{data:void 0,response:x}:{error:void 0,response:x};if(x.ok)return v==="stream"?{data:x.body,response:x}:{data:await x[v](),response:x};let O=await x.text();try{O=JSON.parse(O)}catch{}return{error:O,response:x}}return{request(d,f,h){return u(f,{...h,method:d.toUpperCase()})},GET(d,f){return u(d,{...f,method:"GET"})},PUT(d,f){return u(d,{...f,method:"PUT"})},POST(d,f){return u(d,{...f,method:"POST"})},DELETE(d,f){return u(d,{...f,method:"DELETE"})},OPTIONS(d,f){return u(d,{...f,method:"OPTIONS"})},HEAD(d,f){return u(d,{...f,method:"HEAD"})},PATCH(d,f){return u(d,{...f,method:"PATCH"})},TRACE(d,f){return u(d,{...f,method:"TRACE"})},use(...d){for(const f of d)if(f){if(typeof f!="object"||!("onRequest"in f||"onResponse"in f||"onError"in f))throw new Error("Middleware must be an object with one of `onRequest()`, `onResponse() or `onError()`");c.push(f)}},eject(...d){for(const f of d){const h=c.indexOf(f);h!==-1&&c.splice(h,1)}}}}var rL=class{constructor(t,e){Y(this,"GET",t=>this.client.GET(this.url,t));Y(this,"PUT",t=>this.client.PUT(this.url,t));Y(this,"POST",t=>this.client.POST(this.url,t));Y(this,"DELETE",t=>this.client.DELETE(this.url,t));Y(this,"OPTIONS",t=>this.client.OPTIONS(this.url,t));Y(this,"HEAD",t=>this.client.HEAD(this.url,t));Y(this,"PATCH",t=>this.client.PATCH(this.url,t));Y(this,"TRACE",t=>this.client.TRACE(this.url,t));this.client=t,this.url=e}},iL=class{constructor(){this.client=null}get(t,e){const n=new rL(t,e);return this.client[e]=n,n}};function dT(t){const e=new iL,n=new Proxy(t,e);function r(){}r.prototype=n;const i=new r;return e.client=i,i}function sL(t){return dT(uT(t))}function Uf(t,e,n){if(e==null)return"";if(typeof e=="object")throw new Error("Deeply-nested arrays/objects arent supported. Provide your own `querySerializer()` to handle these.");return`${t}=${(n==null?void 0:n.allowReserved)===!0?e:encodeURIComponent(e)}`}function lb(t,e,n){if(!e||typeof e!="object")return"";const r=[],i={simple:",",label:".",matrix:";"}[n.style]||"&";if(n.style!=="deepObject"&&n.explode===!1){for(const a in e)r.push(a,n.allowReserved===!0?e[a]:encodeURIComponent(e[a]));const o=r.join(",");switch(n.style){case"form":return`${t}=${o}`;case"label":return`.${o}`;case"matrix":return`;${t}=${o}`;default:return o}}for(const o in e){const a=n.style==="deepObject"?`${t}[${o}]`:o;r.push(Uf(a,e[o],n))}const s=r.join(i);return n.style==="label"||n.style==="matrix"?`${i}${s}`:s}function cb(t,e,n){if(!Array.isArray(e))return"";if(n.explode===!1){const s={form:",",spaceDelimited:"%20",pipeDelimited:"|"}[n.style]||",",o=(n.allowReserved===!0?e:e.map(a=>encodeURIComponent(a))).join(s);switch(n.style){case"simple":return o;case"label":return`.${o}`;case"matrix":return`;${t}=${o}`;default:return`${t}=${o}`}}const r={simple:",",label:".",matrix:";"}[n.style]||"&",i=[];for(const s of e)n.style==="simple"||n.style==="label"?i.push(n.allowReserved===!0?s:encodeURIComponent(s)):i.push(Uf(t,s,n));return n.style==="label"||n.style==="matrix"?`${r}${i.join(r)}`:i.join(r)}function aw(t){return function(n){const r=[];if(n&&typeof n=="object")for(const i in n){const s=n[i];if(s!=null){if(Array.isArray(s)){if(s.length===0)continue;r.push(cb(i,s,{style:"form",explode:!0,...t==null?void 0:t.array,allowReserved:(t==null?void 0:t.allowReserved)||!1}));continue}if(typeof s=="object"){r.push(lb(i,s,{style:"deepObject",explode:!0,...t==null?void 0:t.object,allowReserved:(t==null?void 0:t.allowReserved)||!1}));continue}r.push(Uf(i,s,t))}}return r.join("&")}}function fT(t,e){let n=t;for(const r of t.match(tL)??[]){let i=r.substring(1,r.length-1),s=!1,o="simple";if(i.endsWith("*")&&(s=!0,i=i.substring(0,i.length-1)),i.startsWith(".")?(o="label",i=i.substring(1)):i.startsWith(";")&&(o="matrix",i=i.substring(1)),!e||e[i]===void 0||e[i]===null)continue;const a=e[i];if(Array.isArray(a)){n=n.replace(r,cb(i,a,{style:o,explode:s}));continue}if(typeof a=="object"){n=n.replace(r,lb(i,a,{style:o,explode:s}));continue}if(o==="matrix"){n=n.replace(r,`;${Uf(i,a)}`);continue}n=n.replace(r,o==="label"?`.${encodeURIComponent(a)}`:encodeURIComponent(a))}return n}function hT(t,e){return t instanceof FormData?t:e&&(e.get instanceof Function?e.get("Content-Type")??e.get("content-type"):e["Content-Type"]??e["content-type"])==="application/x-www-form-urlencoded"?new URLSearchParams(t).toString():JSON.stringify(t)}function pT(t,e){var i;let n=`${e.baseUrl}${t}`;(i=e.params)!=null&&i.path&&(n=fT(n,e.params.path));let r=e.querySerializer(e.params.query??{});return r.startsWith("?")&&(r=r.substring(1)),r&&(n+=`?${r}`),n}function lw(...t){const e=new Headers;for(const n of t){if(!n||typeof n!="object")continue;const r=n instanceof Headers?n.entries():Object.entries(n);for(const[i,s]of r)if(s===null)e.delete(i);else if(Array.isArray(s))for(const o of s)e.append(i,o);else s!==void 0&&e.set(i,s)}return e}function cw(t){return t.endsWith("/")?t.substring(0,t.length-1):t}var Dm={},oL=Object.create,Ig=Object.defineProperty,aL=Object.getOwnPropertyDescriptor,lL=Object.getOwnPropertyNames,cL=Object.getPrototypeOf,uL=Object.prototype.hasOwnProperty,dL=(t,e)=>{for(var n in e)Ig(t,n,{get:e[n],enumerable:!0})},gT=(t,e,n,r)=>{if(e&&typeof e=="object"||typeof e=="function")for(let i of lL(e))!uL.call(t,i)&&i!==n&&Ig(t,i,{get:()=>e[i],enumerable:!(r=aL(e,i))||r.enumerable});return t},fL=(t,e,n)=>(n=t!=null?oL(cL(t)):{},gT(!t||!t.__esModule?Ig(n,"default",{value:t,enumerable:!0}):n,t)),hL=t=>gT(Ig({},"__esModule",{value:!0}),t),mT={};dL(mT,{analytics:()=>EL});var bt=hL(mT),pL=fL(eL),gL=class{constructor(t){this.batch=[],this.maxTimeoutMs=3e4,this.timeoutId=null,this.isSending=!1,this.batchSize=t.batchSize,this.baseTimeoutMs=t.baseTimeoutMs,this.currentTimeoutMs=t.baseTimeoutMs,this.sendFn=t.sendFn}enqueue(t){this.batch.push(t),this.schedule()}schedule(){this.batch.length>0&&!this.timeoutId&&(this.timeoutId=setTimeout(()=>{this.timeoutId=null,this.flush()},this.currentTimeoutMs))}async flush(){if(this.isSending||this.batch.length===0)return;this.isSending=!0;const t=[...this.batch.slice(0,this.batchSize)];this.batch=this.batch.slice(this.batchSize);try{await this.sendFn(t),this.currentTimeoutMs=this.baseTimeoutMs}catch(e){console.error("Sender: Failed to send batch",e),this.batch=[...t,...this.batch],this.currentTimeoutMs=Math.min(this.currentTimeoutMs*2,this.maxTimeoutMs)}finally{this.isSending=!1,this.schedule()}}},mL=gL,yL=class{constructor(t){this.enabled=!1,this.properties={};const e=(0,pL.default)({baseUrl:t}),n=async r=>{const i=await e.POST("/v1/events",{body:r});if(i.response.status!==200)throw new Error(i.error)};this.sender=new mL({batchSize:100,baseTimeoutMs:200,sendFn:n})}enable(){this.enabled=!0}setGlobalProperty(t,e){this.properties[t]=e}track(t,e){if(!this.enabled)return;const n={name:t,...this.properties,...e};this.sender.enqueue(n)}},vL=yL,uw,PA;typeof process<"u"&&Dm&&(uw=(PA=Dm.METAMASK_ANALYTICS_ENDPOINT)!=null?PA:Dm.NEXT_PUBLIC_METAMASK_ANALYTICS_ENDPOINT);var wL=uw??"https://mm-sdk-analytics.api.cx.metamask.io/",bL=new vL(wL),EL=bL,yT={exports:{}};/*!
 * EventEmitter2
 * https://github.com/hij1nx/EventEmitter2
 *
 * Copyright (c) 2013 hij1nx
 * Licensed under the MIT license.
 */(function(t,e){(function(n){var r=Object.hasOwnProperty,i=Array.isArray?Array.isArray:function(E){return Object.prototype.toString.call(E)==="[object Array]"},s=10,o=typeof process=="object"&&typeof process.nextTick=="function",a=typeof Symbol=="function",l=typeof Reflect=="object",c=typeof setImmediate=="function",u=c?setImmediate:setTimeout,d=a?l&&typeof Reflect.ownKeys=="function"?Reflect.ownKeys:function(b){var E=Object.getOwnPropertyNames(b);return E.push.apply(E,Object.getOwnPropertySymbols(b)),E}:Object.keys;function f(){this._events={},this._conf&&h.call(this,this._conf)}function h(b){b&&(this._conf=b,b.delimiter&&(this.delimiter=b.delimiter),b.maxListeners!==n&&(this._maxListeners=b.maxListeners),b.wildcard&&(this.wildcard=b.wildcard),b.newListener&&(this._newListener=b.newListener),b.removeListener&&(this._removeListener=b.removeListener),b.verboseMemoryLeak&&(this.verboseMemoryLeak=b.verboseMemoryLeak),b.ignoreErrors&&(this.ignoreErrors=b.ignoreErrors),this.wildcard&&(this.listenerTree={}))}function m(b,E){var k="(node) warning: possible EventEmitter memory leak detected. "+b+" listeners added. Use emitter.setMaxListeners() to increase limit.";if(this.verboseMemoryLeak&&(k+=" Event name: "+E+"."),typeof process<"u"&&process.emitWarning){var I=new Error(k);I.name="MaxListenersExceededWarning",I.emitter=this,I.count=b,process.emitWarning(I)}else console.error(k),console.trace&&console.trace()}var g=function(b,E,k){var I=arguments.length;switch(I){case 0:return[];case 1:return[b];case 2:return[b,E];case 3:return[b,E,k];default:for(var A=new Array(I);I--;)A[I]=arguments[I];return A}};function w(b,E){for(var k={},I,A=b.length,S=0,T=0;T<A;T++)I=b[T],k[I]=T<S?E[T]:n;return k}function p(b,E,k){this._emitter=b,this._target=E,this._listeners={},this._listenersCount=0;var I,A;if((k.on||k.off)&&(I=k.on,A=k.off),E.addEventListener?(I=E.addEventListener,A=E.removeEventListener):E.addListener?(I=E.addListener,A=E.removeListener):E.on&&(I=E.on,A=E.off),!I&&!A)throw Error("target does not implement any known event API");if(typeof I!="function")throw TypeError("on method must be a function");if(typeof A!="function")throw TypeError("off method must be a function");this._on=I,this._off=A;var S=b._observers;S?S.push(this):b._observers=[this]}Object.assign(p.prototype,{subscribe:function(b,E,k){var I=this,A=this._target,S=this._emitter,T=this._listeners,R=function(){var N=g.apply(null,arguments),U={data:N,name:E,original:b};if(k){var z=k.call(A,U);z!==!1&&S.emit.apply(S,[U.name].concat(N));return}S.emit.apply(S,[E].concat(N))};if(T[b])throw Error("Event '"+b+"' is already listening");this._listenersCount++,S._newListener&&S._removeListener&&!I._onNewListener?(this._onNewListener=function(N){N===E&&T[b]===null&&(T[b]=R,I._on.call(A,b,R))},S.on("newListener",this._onNewListener),this._onRemoveListener=function(N){N===E&&!S.hasListeners(N)&&T[b]&&(T[b]=null,I._off.call(A,b,R))},T[b]=null,S.on("removeListener",this._onRemoveListener)):(T[b]=R,I._on.call(A,b,R))},unsubscribe:function(b){var E=this,k=this._listeners,I=this._emitter,A,S,T=this._off,R=this._target,N;if(b&&typeof b!="string")throw TypeError("event must be a string");function U(){E._onNewListener&&(I.off("newListener",E._onNewListener),I.off("removeListener",E._onRemoveListener),E._onNewListener=null,E._onRemoveListener=null);var z=D.call(I,E);I._observers.splice(z,1)}if(b){if(A=k[b],!A)return;T.call(R,b,A),delete k[b],--this._listenersCount||U()}else{for(S=d(k),N=S.length;N-- >0;)b=S[N],T.call(R,b,k[b]);this._listeners={},this._listenersCount=0,U()}}});function v(b,E,k,I){var A=Object.assign({},E);if(!b)return A;if(typeof b!="object")throw TypeError("options must be an object");var S=Object.keys(b),T=S.length,R,N,U;function z(Q){throw Error('Invalid "'+R+'" option value'+(Q?". Reason: "+Q:""))}for(var q=0;q<T;q++){if(R=S[q],!r.call(E,R))throw Error('Unknown "'+R+'" option');N=b[R],N!==n&&(U=k[R],A[R]=U?U(N,z):N)}return A}function y(b,E){return(typeof b!="function"||!b.hasOwnProperty("prototype"))&&E("value must be a constructor"),b}function C(b){var E="value must be type of "+b.join("|"),k=b.length,I=b[0],A=b[1];return k===1?function(S,T){if(typeof S===I)return S;T(E)}:k===2?function(S,T){var R=typeof S;if(R===I||R===A)return S;T(E)}:function(S,T){for(var R=typeof S,N=k;N-- >0;)if(R===b[N])return S;T(E)}}var P=C(["function"]),L=C(["object","function"]);function j(b,E,k){var I,A,S=0,T,R=new b(function(N,U,z){k=v(k,{timeout:0,overload:!1},{timeout:function(oe,J){return oe*=1,(typeof oe!="number"||oe<0||!Number.isFinite(oe))&&J("timeout must be a positive number"),oe}}),I=!k.overload&&typeof b.prototype.cancel=="function"&&typeof z=="function";function q(){A&&(A=null),S&&(clearTimeout(S),S=0)}var Q=function(oe){q(),N(oe)},ie=function(oe){q(),U(oe)};I?E(Q,ie,z):(A=[function(oe){ie(oe||Error("canceled"))}],E(Q,ie,function(oe){if(T)throw Error("Unable to subscribe on cancel event asynchronously");if(typeof oe!="function")throw TypeError("onCancel callback must be a function");A.push(oe)}),T=!0),k.timeout>0&&(S=setTimeout(function(){var oe=Error("timeout");oe.code="ETIMEDOUT",S=0,R.cancel(oe),U(oe)},k.timeout))});return I||(R.cancel=function(N){if(A){for(var U=A.length,z=1;z<U;z++)A[z](N);A[0](N),A=null}}),R}function D(b){var E=this._observers;if(!E)return-1;for(var k=E.length,I=0;I<k;I++)if(E[I]._target===b)return I;return-1}function V(b,E,k,I,A){if(!k)return null;if(I===0){var S=typeof E;if(S==="string"){var T,R,N=0,U=0,z=this.delimiter,q=z.length;if((R=E.indexOf(z))!==-1){T=new Array(5);do T[N++]=E.slice(U,R),U=R+q;while((R=E.indexOf(z,U))!==-1);T[N++]=E.slice(U),E=T,A=N}else E=[E],A=1}else S==="object"?A=E.length:(E=[E],A=1)}var Q=null,ie,oe,J,le,Z,te=E[I],ue=E[I+1],me,he;if(I===A)k._listeners&&(typeof k._listeners=="function"?(b&&b.push(k._listeners),Q=[k]):(b&&b.push.apply(b,k._listeners),Q=[k]));else if(te==="*"){for(me=d(k),R=me.length;R-- >0;)ie=me[R],ie!=="_listeners"&&(he=V(b,E,k[ie],I+1,A),he&&(Q?Q.push.apply(Q,he):Q=he));return Q}else if(te==="**"){for(Z=I+1===A||I+2===A&&ue==="*",Z&&k._listeners&&(Q=V(b,E,k,A,A)),me=d(k),R=me.length;R-- >0;)ie=me[R],ie!=="_listeners"&&(ie==="*"||ie==="**"?(k[ie]._listeners&&!Z&&(he=V(b,E,k[ie],A,A),he&&(Q?Q.push.apply(Q,he):Q=he)),he=V(b,E,k[ie],I,A)):ie===ue?he=V(b,E,k[ie],I+2,A):he=V(b,E,k[ie],I,A),he&&(Q?Q.push.apply(Q,he):Q=he));return Q}else k[te]&&(Q=V(b,E,k[te],I+1,A));if(oe=k["*"],oe&&V(b,E,oe,I+1,A),J=k["**"],J)if(I<A)for(J._listeners&&V(b,E,J,A,A),me=d(J),R=me.length;R-- >0;)ie=me[R],ie!=="_listeners"&&(ie===ue?V(b,E,J[ie],I+2,A):ie===te?V(b,E,J[ie],I+1,A):(le={},le[ie]=J[ie],V(b,E,{"**":le},I+1,A)));else J._listeners?V(b,E,J,A,A):J["*"]&&J["*"]._listeners&&V(b,E,J["*"],A,A);return Q}function F(b,E,k){var I=0,A=0,S,T=this.delimiter,R=T.length,N;if(typeof b=="string")if((S=b.indexOf(T))!==-1){N=new Array(5);do N[I++]=b.slice(A,S),A=S+R;while((S=b.indexOf(T,A))!==-1);N[I++]=b.slice(A)}else N=[b],I=1;else N=b,I=b.length;if(I>1){for(S=0;S+1<I;S++)if(N[S]==="**"&&N[S+1]==="**")return}var U=this.listenerTree,z;for(S=0;S<I;S++)if(z=N[S],U=U[z]||(U[z]={}),S===I-1)return U._listeners?(typeof U._listeners=="function"&&(U._listeners=[U._listeners]),k?U._listeners.unshift(E):U._listeners.push(E),!U._listeners.warned&&this._maxListeners>0&&U._listeners.length>this._maxListeners&&(U._listeners.warned=!0,m.call(this,U._listeners.length,z))):U._listeners=E,!0;return!0}function W(b,E,k,I){for(var A=d(b),S=A.length,T,R,N,U=b._listeners,z;S-- >0;)R=A[S],T=b[R],R==="_listeners"?N=k:N=k?k.concat(R):[R],z=I||typeof R=="symbol",U&&E.push(z?N:N.join(this.delimiter)),typeof T=="object"&&W.call(this,T,E,N,z);return E}function K(b){for(var E=d(b),k=E.length,I,A,S;k-- >0;)A=E[k],I=b[A],I&&(S=!0,A!=="_listeners"&&!K(I)&&delete b[A]);return S}function $(b,E,k){this.emitter=b,this.event=E,this.listener=k}$.prototype.off=function(){return this.emitter.off(this.event,this.listener),this};function M(b,E,k){if(k===!0)A=!0;else if(k===!1)I=!0;else{if(!k||typeof k!="object")throw TypeError("options should be an object or true");var I=k.async,A=k.promisify,S=k.nextTick,T=k.objectify}if(I||S||A){var R=E,N=E._origin||E;if(S&&!o)throw Error("process.nextTick is not supported");A===n&&(A=E.constructor.name==="AsyncFunction"),E=function(){var U=arguments,z=this,q=this.event;return A?S?Promise.resolve():new Promise(function(Q){u(Q)}).then(function(){return z.event=q,R.apply(z,U)}):(S?process.nextTick:u)(function(){z.event=q,R.apply(z,U)})},E._async=!0,E._origin=N}return[E,T?new $(this,b,E):this]}function x(b){this._events={},this._newListener=!1,this._removeListener=!1,this.verboseMemoryLeak=!1,h.call(this,b)}x.EventEmitter2=x,x.prototype.listenTo=function(b,E,k){if(typeof b!="object")throw TypeError("target musts be an object");var I=this;k=v(k,{on:n,off:n,reducers:n},{on:P,off:P,reducers:L});function A(S){if(typeof S!="object")throw TypeError("events must be an object");var T=k.reducers,R=D.call(I,b),N;R===-1?N=new p(I,b,k):N=I._observers[R];for(var U=d(S),z=U.length,q,Q=typeof T=="function",ie=0;ie<z;ie++)q=U[ie],N.subscribe(q,S[q]||q,Q?T:T&&T[q])}return i(E)?A(w(E)):A(typeof E=="string"?w(E.split(/\s+/)):E),this},x.prototype.stopListeningTo=function(b,E){var k=this._observers;if(!k)return!1;var I=k.length,A,S=!1;if(b&&typeof b!="object")throw TypeError("target should be an object");for(;I-- >0;)A=k[I],(!b||A._target===b)&&(A.unsubscribe(E),S=!0);return S},x.prototype.delimiter=".",x.prototype.setMaxListeners=function(b){b!==n&&(this._maxListeners=b,this._conf||(this._conf={}),this._conf.maxListeners=b)},x.prototype.getMaxListeners=function(){return this._maxListeners},x.prototype.event="",x.prototype.once=function(b,E,k){return this._once(b,E,!1,k)},x.prototype.prependOnceListener=function(b,E,k){return this._once(b,E,!0,k)},x.prototype._once=function(b,E,k,I){return this._many(b,1,E,k,I)},x.prototype.many=function(b,E,k,I){return this._many(b,E,k,!1,I)},x.prototype.prependMany=function(b,E,k,I){return this._many(b,E,k,!0,I)},x.prototype._many=function(b,E,k,I,A){var S=this;if(typeof k!="function")throw new Error("many only accepts instances of Function");function T(){return--E===0&&S.off(b,T),k.apply(this,arguments)}return T._origin=k,this._on(b,T,I,A)},x.prototype.emit=function(){if(!this._events&&!this._all)return!1;this._events||f.call(this);var b=arguments[0],E,k=this.wildcard,I,A,S,T,R;if(b==="newListener"&&!this._newListener&&!this._events.newListener)return!1;if(k&&(E=b,b!=="newListener"&&b!=="removeListener"&&typeof b=="object")){if(A=b.length,a){for(S=0;S<A;S++)if(typeof b[S]=="symbol"){R=!0;break}}R||(b=b.join(this.delimiter))}var N=arguments.length,U;if(this._all&&this._all.length)for(U=this._all.slice(),S=0,A=U.length;S<A;S++)switch(this.event=b,N){case 1:U[S].call(this,b);break;case 2:U[S].call(this,b,arguments[1]);break;case 3:U[S].call(this,b,arguments[1],arguments[2]);break;default:U[S].apply(this,arguments)}if(k)U=[],V.call(this,U,E,this.listenerTree,0,A);else if(U=this._events[b],typeof U=="function"){switch(this.event=b,N){case 1:U.call(this);break;case 2:U.call(this,arguments[1]);break;case 3:U.call(this,arguments[1],arguments[2]);break;default:for(I=new Array(N-1),T=1;T<N;T++)I[T-1]=arguments[T];U.apply(this,I)}return!0}else U&&(U=U.slice());if(U&&U.length){if(N>3)for(I=new Array(N-1),T=1;T<N;T++)I[T-1]=arguments[T];for(S=0,A=U.length;S<A;S++)switch(this.event=b,N){case 1:U[S].call(this);break;case 2:U[S].call(this,arguments[1]);break;case 3:U[S].call(this,arguments[1],arguments[2]);break;default:U[S].apply(this,I)}return!0}else if(!this.ignoreErrors&&!this._all&&b==="error")throw arguments[1]instanceof Error?arguments[1]:new Error("Uncaught, unspecified 'error' event.");return!!this._all},x.prototype.emitAsync=function(){if(!this._events&&!this._all)return!1;this._events||f.call(this);var b=arguments[0],E=this.wildcard,k,I,A,S,T,R;if(b==="newListener"&&!this._newListener&&!this._events.newListener)return Promise.resolve([!1]);if(E&&(k=b,b!=="newListener"&&b!=="removeListener"&&typeof b=="object")){if(S=b.length,a){for(T=0;T<S;T++)if(typeof b[T]=="symbol"){I=!0;break}}I||(b=b.join(this.delimiter))}var N=[],U=arguments.length,z;if(this._all)for(T=0,S=this._all.length;T<S;T++)switch(this.event=b,U){case 1:N.push(this._all[T].call(this,b));break;case 2:N.push(this._all[T].call(this,b,arguments[1]));break;case 3:N.push(this._all[T].call(this,b,arguments[1],arguments[2]));break;default:N.push(this._all[T].apply(this,arguments))}if(E?(z=[],V.call(this,z,k,this.listenerTree,0)):z=this._events[b],typeof z=="function")switch(this.event=b,U){case 1:N.push(z.call(this));break;case 2:N.push(z.call(this,arguments[1]));break;case 3:N.push(z.call(this,arguments[1],arguments[2]));break;default:for(A=new Array(U-1),R=1;R<U;R++)A[R-1]=arguments[R];N.push(z.apply(this,A))}else if(z&&z.length){if(z=z.slice(),U>3)for(A=new Array(U-1),R=1;R<U;R++)A[R-1]=arguments[R];for(T=0,S=z.length;T<S;T++)switch(this.event=b,U){case 1:N.push(z[T].call(this));break;case 2:N.push(z[T].call(this,arguments[1]));break;case 3:N.push(z[T].call(this,arguments[1],arguments[2]));break;default:N.push(z[T].apply(this,A))}}else if(!this.ignoreErrors&&!this._all&&b==="error")return arguments[1]instanceof Error?Promise.reject(arguments[1]):Promise.reject("Uncaught, unspecified 'error' event.");return Promise.all(N)},x.prototype.on=function(b,E,k){return this._on(b,E,!1,k)},x.prototype.prependListener=function(b,E,k){return this._on(b,E,!0,k)},x.prototype.onAny=function(b){return this._onAny(b,!1)},x.prototype.prependAny=function(b){return this._onAny(b,!0)},x.prototype.addListener=x.prototype.on,x.prototype._onAny=function(b,E){if(typeof b!="function")throw new Error("onAny only accepts instances of Function");return this._all||(this._all=[]),E?this._all.unshift(b):this._all.push(b),this},x.prototype._on=function(b,E,k,I){if(typeof b=="function")return this._onAny(b,E),this;if(typeof E!="function")throw new Error("on only accepts instances of Function");this._events||f.call(this);var A=this,S;return I!==n&&(S=M.call(this,b,E,I),E=S[0],A=S[1]),this._newListener&&this.emit("newListener",b,E),this.wildcard?(F.call(this,b,E,k),A):(this._events[b]?(typeof this._events[b]=="function"&&(this._events[b]=[this._events[b]]),k?this._events[b].unshift(E):this._events[b].push(E),!this._events[b].warned&&this._maxListeners>0&&this._events[b].length>this._maxListeners&&(this._events[b].warned=!0,m.call(this,this._events[b].length,b))):this._events[b]=E,A)},x.prototype.off=function(b,E){if(typeof E!="function")throw new Error("removeListener only takes instances of Function");var k,I=[];if(this.wildcard){var A=typeof b=="string"?b.split(this.delimiter):b.slice();if(I=V.call(this,null,A,this.listenerTree,0),!I)return this}else{if(!this._events[b])return this;k=this._events[b],I.push({_listeners:k})}for(var S=0;S<I.length;S++){var T=I[S];if(k=T._listeners,i(k)){for(var R=-1,N=0,U=k.length;N<U;N++)if(k[N]===E||k[N].listener&&k[N].listener===E||k[N]._origin&&k[N]._origin===E){R=N;break}if(R<0)continue;return this.wildcard?T._listeners.splice(R,1):this._events[b].splice(R,1),k.length===0&&(this.wildcard?delete T._listeners:delete this._events[b]),this._removeListener&&this.emit("removeListener",b,E),this}else(k===E||k.listener&&k.listener===E||k._origin&&k._origin===E)&&(this.wildcard?delete T._listeners:delete this._events[b],this._removeListener&&this.emit("removeListener",b,E))}return this.listenerTree&&K(this.listenerTree),this},x.prototype.offAny=function(b){var E=0,k=0,I;if(b&&this._all&&this._all.length>0){for(I=this._all,E=0,k=I.length;E<k;E++)if(b===I[E])return I.splice(E,1),this._removeListener&&this.emit("removeListenerAny",b),this}else{if(I=this._all,this._removeListener)for(E=0,k=I.length;E<k;E++)this.emit("removeListenerAny",I[E]);this._all=[]}return this},x.prototype.removeListener=x.prototype.off,x.prototype.removeAllListeners=function(b){if(b===n)return!this._events||f.call(this),this;if(this.wildcard){var E=V.call(this,null,b,this.listenerTree,0),k,I;if(!E)return this;for(I=0;I<E.length;I++)k=E[I],k._listeners=null;this.listenerTree&&K(this.listenerTree)}else this._events&&(this._events[b]=null);return this},x.prototype.listeners=function(b){var E=this._events,k,I,A,S,T;if(b===n){if(this.wildcard)throw Error("event name required for wildcard emitter");if(!E)return[];for(k=d(E),S=k.length,A=[];S-- >0;)I=E[k[S]],typeof I=="function"?A.push(I):A.push.apply(A,I);return A}else{if(this.wildcard){if(T=this.listenerTree,!T)return[];var R=[],N=typeof b=="string"?b.split(this.delimiter):b.slice();return V.call(this,R,N,T,0),R}return E?(I=E[b],I?typeof I=="function"?[I]:I:[]):[]}},x.prototype.eventNames=function(b){var E=this._events;return this.wildcard?W.call(this,this.listenerTree,[],null,b):E?d(E):[]},x.prototype.listenerCount=function(b){return this.listeners(b).length},x.prototype.hasListeners=function(b){if(this.wildcard){var E=[],k=typeof b=="string"?b.split(this.delimiter):b.slice();return V.call(this,E,k,this.listenerTree,0),E.length>0}var I=this._events,A=this._all;return!!(A&&A.length||I&&(b===n?d(I).length:I[b]))},x.prototype.listenersAny=function(){return this._all?this._all:[]},x.prototype.waitFor=function(b,E){var k=this,I=typeof E;return I==="number"?E={timeout:E}:I==="function"&&(E={filter:E}),E=v(E,{timeout:0,filter:n,handleError:!1,Promise,overload:!1},{filter:P,Promise:y}),j(E.Promise,function(A,S,T){function R(){var N=E.filter;if(!(N&&!N.apply(k,arguments)))if(k.off(b,R),E.handleError){var U=arguments[0];U?S(U):A(g.apply(null,arguments).slice(1))}else A(g.apply(null,arguments))}T(function(){k.off(b,R)}),k._on(b,R,!1)},{timeout:E.timeout,overload:E.overload})};function O(b,E,k){k=v(k,{Promise,timeout:0,overload:!1},{Promise:y});var I=k.Promise;return j(I,function(A,S,T){var R;if(typeof b.addEventListener=="function"){R=function(){A(g.apply(null,arguments))},T(function(){b.removeEventListener(E,R)}),b.addEventListener(E,R,{once:!0});return}var N=function(){U&&b.removeListener("error",U),A(g.apply(null,arguments))},U;E!=="error"&&(U=function(z){b.removeListener(E,N),S(z)},b.once("error",U)),T(function(){U&&b.removeListener("error",U),b.removeListener(E,N)}),b.once(E,N)},{timeout:k.timeout,overload:k.overload})}var B=x.prototype;Object.defineProperties(x,{defaultMaxListeners:{get:function(){return B._maxListeners},set:function(b){if(typeof b!="number"||b<0||Number.isNaN(b))throw TypeError("n must be a non-negative number");B._maxListeners=b},enumerable:!0},once:{value:O,writable:!0,configurable:!0}}),Object.defineProperties(B,{_maxListeners:{value:s,writable:!0,configurable:!0},_observers:{value:null,writable:!0,configurable:!0}}),t.exports=x})()})(yT);var Og=yT.exports;const AL=X0(Og);var Eh,SL=new Uint8Array(16);function xL(){if(!Eh&&(Eh=typeof crypto<"u"&&crypto.getRandomValues&&crypto.getRandomValues.bind(crypto)||typeof msCrypto<"u"&&typeof msCrypto.getRandomValues=="function"&&msCrypto.getRandomValues.bind(msCrypto),!Eh))throw new Error("crypto.getRandomValues() not supported. See https://github.com/uuidjs/uuid#getrandomvalues-not-supported");return Eh(SL)}const CL=/^(?:[0-9a-f]{8}-[0-9a-f]{4}-[1-5][0-9a-f]{3}-[89ab][0-9a-f]{3}-[0-9a-f]{12}|00000000-0000-0000-0000-000000000000)$/i;function dw(t){return typeof t=="string"&&CL.test(t)}var Ft=[];for(var $m=0;$m<256;++$m)Ft.push(($m+256).toString(16).substr(1));function kL(t){var e=arguments.length>1&&arguments[1]!==void 0?arguments[1]:0,n=(Ft[t[e+0]]+Ft[t[e+1]]+Ft[t[e+2]]+Ft[t[e+3]]+"-"+Ft[t[e+4]]+Ft[t[e+5]]+"-"+Ft[t[e+6]]+Ft[t[e+7]]+"-"+Ft[t[e+8]]+Ft[t[e+9]]+"-"+Ft[t[e+10]]+Ft[t[e+11]]+Ft[t[e+12]]+Ft[t[e+13]]+Ft[t[e+14]]+Ft[t[e+15]]).toLowerCase();if(!dw(n))throw TypeError("Stringified UUID is invalid");return n}function ro(t,e,n){t=t||{};var r=t.random||(t.rng||xL)();return r[6]=r[6]&15|64,r[8]=r[8]&63|128,kL(r)}const Ui=Object.create(null);Ui.open="0";Ui.close="1";Ui.ping="2";Ui.pong="3";Ui.message="4";Ui.upgrade="5";Ui.noop="6";const gp=Object.create(null);Object.keys(Ui).forEach(t=>{gp[Ui[t]]=t});const fw={type:"error",data:"parser error"},vT=typeof Blob=="function"||typeof Blob<"u"&&Object.prototype.toString.call(Blob)==="[object BlobConstructor]",wT=typeof ArrayBuffer=="function",bT=t=>typeof ArrayBuffer.isView=="function"?ArrayBuffer.isView(t):t&&t.buffer instanceof ArrayBuffer,ub=({type:t,data:e},n,r)=>vT&&e instanceof Blob?n?r(e):RA(e,r):wT&&(e instanceof ArrayBuffer||bT(e))?n?r(e):RA(new Blob([e]),r):r(Ui[t]+(e||"")),RA=(t,e)=>{const n=new FileReader;return n.onload=function(){const r=n.result.split(",")[1];e("b"+(r||""))},n.readAsDataURL(t)};function IA(t){return t instanceof Uint8Array?t:t instanceof ArrayBuffer?new Uint8Array(t):new Uint8Array(t.buffer,t.byteOffset,t.byteLength)}let Um;function _L(t,e){if(vT&&t.data instanceof Blob)return t.data.arrayBuffer().then(IA).then(e);if(wT&&(t.data instanceof ArrayBuffer||bT(t.data)))return e(IA(t.data));ub(t,!1,n=>{Um||(Um=new TextEncoder),e(Um.encode(n))})}const OA="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",nd=typeof Uint8Array>"u"?[]:new Uint8Array(256);for(let t=0;t<OA.length;t++)nd[OA.charCodeAt(t)]=t;const TL=t=>{let e=t.length*.75,n=t.length,r,i=0,s,o,a,l;t[t.length-1]==="="&&(e--,t[t.length-2]==="="&&e--);const c=new ArrayBuffer(e),u=new Uint8Array(c);for(r=0;r<n;r+=4)s=nd[t.charCodeAt(r)],o=nd[t.charCodeAt(r+1)],a=nd[t.charCodeAt(r+2)],l=nd[t.charCodeAt(r+3)],u[i++]=s<<2|o>>4,u[i++]=(o&15)<<4|a>>2,u[i++]=(a&3)<<6|l&63;return c},PL=typeof ArrayBuffer=="function",db=(t,e)=>{if(typeof t!="string")return{type:"message",data:ET(t,e)};const n=t.charAt(0);return n==="b"?{type:"message",data:RL(t.substring(1),e)}:gp[n]?t.length>1?{type:gp[n],data:t.substring(1)}:{type:gp[n]}:fw},RL=(t,e)=>{if(PL){const n=TL(t);return ET(n,e)}else return{base64:!0,data:t}},ET=(t,e)=>{switch(e){case"blob":return t instanceof Blob?t:new Blob([t]);case"arraybuffer":default:return t instanceof ArrayBuffer?t:t.buffer}},AT="",IL=(t,e)=>{const n=t.length,r=new Array(n);let i=0;t.forEach((s,o)=>{ub(s,!1,a=>{r[o]=a,++i===n&&e(r.join(AT))})})},OL=(t,e)=>{const n=t.split(AT),r=[];for(let i=0;i<n.length;i++){const s=db(n[i],e);if(r.push(s),s.type==="error")break}return r};function NL(){return new TransformStream({transform(t,e){_L(t,n=>{const r=n.length;let i;if(r<126)i=new Uint8Array(1),new DataView(i.buffer).setUint8(0,r);else if(r<65536){i=new Uint8Array(3);const s=new DataView(i.buffer);s.setUint8(0,126),s.setUint16(1,r)}else{i=new Uint8Array(9);const s=new DataView(i.buffer);s.setUint8(0,127),s.setBigUint64(1,BigInt(r))}t.data&&typeof t.data!="string"&&(i[0]|=128),e.enqueue(i),e.enqueue(n)})}})}let Fm;function Ah(t){return t.reduce((e,n)=>e+n.length,0)}function Sh(t,e){if(t[0].length===e)return t.shift();const n=new Uint8Array(e);let r=0;for(let i=0;i<e;i++)n[i]=t[0][r++],r===t[0].length&&(t.shift(),r=0);return t.length&&r<t[0].length&&(t[0]=t[0].slice(r)),n}function ML(t,e){Fm||(Fm=new TextDecoder);const n=[];let r=0,i=-1,s=!1;return new TransformStream({transform(o,a){for(n.push(o);;){if(r===0){if(Ah(n)<1)break;const l=Sh(n,1);s=(l[0]&128)===128,i=l[0]&127,i<126?r=3:i===126?r=1:r=2}else if(r===1){if(Ah(n)<2)break;const l=Sh(n,2);i=new DataView(l.buffer,l.byteOffset,l.length).getUint16(0),r=3}else if(r===2){if(Ah(n)<8)break;const l=Sh(n,8),c=new DataView(l.buffer,l.byteOffset,l.length),u=c.getUint32(0);if(u>Math.pow(2,21)-1){a.enqueue(fw);break}i=u*Math.pow(2,32)+c.getUint32(4),r=3}else{if(Ah(n)<i)break;const l=Sh(n,i);a.enqueue(db(s?l:Fm.decode(l),e)),r=0}if(i===0||i>t){a.enqueue(fw);break}}}})}const ST=4;function kt(t){if(t)return LL(t)}function LL(t){for(var e in kt.prototype)t[e]=kt.prototype[e];return t}kt.prototype.on=kt.prototype.addEventListener=function(t,e){return this._callbacks=this._callbacks||{},(this._callbacks["$"+t]=this._callbacks["$"+t]||[]).push(e),this};kt.prototype.once=function(t,e){function n(){this.off(t,n),e.apply(this,arguments)}return n.fn=e,this.on(t,n),this};kt.prototype.off=kt.prototype.removeListener=kt.prototype.removeAllListeners=kt.prototype.removeEventListener=function(t,e){if(this._callbacks=this._callbacks||{},arguments.length==0)return this._callbacks={},this;var n=this._callbacks["$"+t];if(!n)return this;if(arguments.length==1)return delete this._callbacks["$"+t],this;for(var r,i=0;i<n.length;i++)if(r=n[i],r===e||r.fn===e){n.splice(i,1);break}return n.length===0&&delete this._callbacks["$"+t],this};kt.prototype.emit=function(t){this._callbacks=this._callbacks||{};for(var e=new Array(arguments.length-1),n=this._callbacks["$"+t],r=1;r<arguments.length;r++)e[r-1]=arguments[r];if(n){n=n.slice(0);for(var r=0,i=n.length;r<i;++r)n[r].apply(this,e)}return this};kt.prototype.emitReserved=kt.prototype.emit;kt.prototype.listeners=function(t){return this._callbacks=this._callbacks||{},this._callbacks["$"+t]||[]};kt.prototype.hasListeners=function(t){return!!this.listeners(t).length};const Ng=typeof Promise=="function"&&typeof Promise.resolve=="function"?e=>Promise.resolve().then(e):(e,n)=>n(e,0),_r=typeof self<"u"?self:typeof window<"u"?window:Function("return this")(),BL="arraybuffer";function xT(t,...e){return e.reduce((n,r)=>(t.hasOwnProperty(r)&&(n[r]=t[r]),n),{})}const DL=_r.setTimeout,$L=_r.clearTimeout;function Mg(t,e){e.useNativeTimers?(t.setTimeoutFn=DL.bind(_r),t.clearTimeoutFn=$L.bind(_r)):(t.setTimeoutFn=_r.setTimeout.bind(_r),t.clearTimeoutFn=_r.clearTimeout.bind(_r))}const UL=1.33;function FL(t){return typeof t=="string"?jL(t):Math.ceil((t.byteLength||t.size)*UL)}function jL(t){let e=0,n=0;for(let r=0,i=t.length;r<i;r++)e=t.charCodeAt(r),e<128?n+=1:e<2048?n+=2:e<55296||e>=57344?n+=3:(r++,n+=4);return n}function CT(){return Date.now().toString(36).substring(3)+Math.random().toString(36).substring(2,5)}function HL(t){let e="";for(let n in t)t.hasOwnProperty(n)&&(e.length&&(e+="&"),e+=encodeURIComponent(n)+"="+encodeURIComponent(t[n]));return e}function KL(t){let e={},n=t.split("&");for(let r=0,i=n.length;r<i;r++){let s=n[r].split("=");e[decodeURIComponent(s[0])]=decodeURIComponent(s[1])}return e}class zL extends Error{constructor(e,n,r){super(e),this.description=n,this.context=r,this.type="TransportError"}}class fb extends kt{constructor(e){super(),this.writable=!1,Mg(this,e),this.opts=e,this.query=e.query,this.socket=e.socket,this.supportsBinary=!e.forceBase64}onError(e,n,r){return super.emitReserved("error",new zL(e,n,r)),this}open(){return this.readyState="opening",this.doOpen(),this}close(){return(this.readyState==="opening"||this.readyState==="open")&&(this.doClose(),this.onClose()),this}send(e){this.readyState==="open"&&this.write(e)}onOpen(){this.readyState="open",this.writable=!0,super.emitReserved("open")}onData(e){const n=db(e,this.socket.binaryType);this.onPacket(n)}onPacket(e){super.emitReserved("packet",e)}onClose(e){this.readyState="closed",super.emitReserved("close",e)}pause(e){}createUri(e,n={}){return e+"://"+this._hostname()+this._port()+this.opts.path+this._query(n)}_hostname(){const e=this.opts.hostname;return e.indexOf(":")===-1?e:"["+e+"]"}_port(){return this.opts.port&&(this.opts.secure&&+(this.opts.port!==443)||!this.opts.secure&&Number(this.opts.port)!==80)?":"+this.opts.port:""}_query(e){const n=HL(e);return n.length?"?"+n:""}}class VL extends fb{constructor(){super(...arguments),this._polling=!1}get name(){return"polling"}doOpen(){this._poll()}pause(e){this.readyState="pausing";const n=()=>{this.readyState="paused",e()};if(this._polling||!this.writable){let r=0;this._polling&&(r++,this.once("pollComplete",function(){--r||n()})),this.writable||(r++,this.once("drain",function(){--r||n()}))}else n()}_poll(){this._polling=!0,this.doPoll(),this.emitReserved("poll")}onData(e){const n=r=>{if(this.readyState==="opening"&&r.type==="open"&&this.onOpen(),r.type==="close")return this.onClose({description:"transport closed by the server"}),!1;this.onPacket(r)};OL(e,this.socket.binaryType).forEach(n),this.readyState!=="closed"&&(this._polling=!1,this.emitReserved("pollComplete"),this.readyState==="open"&&this._poll())}doClose(){const e=()=>{this.write([{type:"close"}])};this.readyState==="open"?e():this.once("open",e)}write(e){this.writable=!1,IL(e,n=>{this.doWrite(n,()=>{this.writable=!0,this.emitReserved("drain")})})}uri(){const e=this.opts.secure?"https":"http",n=this.query||{};return this.opts.timestampRequests!==!1&&(n[this.opts.timestampParam]=CT()),!this.supportsBinary&&!n.sid&&(n.b64=1),this.createUri(e,n)}}let kT=!1;try{kT=typeof XMLHttpRequest<"u"&&"withCredentials"in new XMLHttpRequest}catch{}const GL=kT;function WL(){}class qL extends VL{constructor(e){if(super(e),typeof location<"u"){const n=location.protocol==="https:";let r=location.port;r||(r=n?"443":"80"),this.xd=typeof location<"u"&&e.hostname!==location.hostname||r!==e.port}}doWrite(e,n){const r=this.request({method:"POST",data:e});r.on("success",n),r.on("error",(i,s)=>{this.onError("xhr post error",i,s)})}doPoll(){const e=this.request();e.on("data",this.onData.bind(this)),e.on("error",(n,r)=>{this.onError("xhr poll error",n,r)}),this.pollXhr=e}}class Li extends kt{constructor(e,n,r){super(),this.createRequest=e,Mg(this,r),this._opts=r,this._method=r.method||"GET",this._uri=n,this._data=r.data!==void 0?r.data:null,this._create()}_create(){var e;const n=xT(this._opts,"agent","pfx","key","passphrase","cert","ca","ciphers","rejectUnauthorized","autoUnref");n.xdomain=!!this._opts.xd;const r=this._xhr=this.createRequest(n);try{r.open(this._method,this._uri,!0);try{if(this._opts.extraHeaders){r.setDisableHeaderCheck&&r.setDisableHeaderCheck(!0);for(let i in this._opts.extraHeaders)this._opts.extraHeaders.hasOwnProperty(i)&&r.setRequestHeader(i,this._opts.extraHeaders[i])}}catch{}if(this._method==="POST")try{r.setRequestHeader("Content-type","text/plain;charset=UTF-8")}catch{}try{r.setRequestHeader("Accept","*/*")}catch{}(e=this._opts.cookieJar)===null||e===void 0||e.addCookies(r),"withCredentials"in r&&(r.withCredentials=this._opts.withCredentials),this._opts.requestTimeout&&(r.timeout=this._opts.requestTimeout),r.onreadystatechange=()=>{var i;r.readyState===3&&((i=this._opts.cookieJar)===null||i===void 0||i.parseCookies(r.getResponseHeader("set-cookie"))),r.readyState===4&&(r.status===200||r.status===1223?this._onLoad():this.setTimeoutFn(()=>{this._onError(typeof r.status=="number"?r.status:0)},0))},r.send(this._data)}catch(i){this.setTimeoutFn(()=>{this._onError(i)},0);return}typeof document<"u"&&(this._index=Li.requestsCount++,Li.requests[this._index]=this)}_onError(e){this.emitReserved("error",e,this._xhr),this._cleanup(!0)}_cleanup(e){if(!(typeof this._xhr>"u"||this._xhr===null)){if(this._xhr.onreadystatechange=WL,e)try{this._xhr.abort()}catch{}typeof document<"u"&&delete Li.requests[this._index],this._xhr=null}}_onLoad(){const e=this._xhr.responseText;e!==null&&(this.emitReserved("data",e),this.emitReserved("success"),this._cleanup())}abort(){this._cleanup()}}Li.requestsCount=0;Li.requests={};if(typeof document<"u"){if(typeof attachEvent=="function")attachEvent("onunload",NA);else if(typeof addEventListener=="function"){const t="onpagehide"in _r?"pagehide":"unload";addEventListener(t,NA,!1)}}function NA(){for(let t in Li.requests)Li.requests.hasOwnProperty(t)&&Li.requests[t].abort()}const QL=function(){const t=_T({xdomain:!1});return t&&t.responseType!==null}();class YL extends qL{constructor(e){super(e);const n=e&&e.forceBase64;this.supportsBinary=QL&&!n}request(e={}){return Object.assign(e,{xd:this.xd},this.opts),new Li(_T,this.uri(),e)}}function _T(t){const e=t.xdomain;try{if(typeof XMLHttpRequest<"u"&&(!e||GL))return new XMLHttpRequest}catch{}if(!e)try{return new _r[["Active"].concat("Object").join("X")]("Microsoft.XMLHTTP")}catch{}}const TT=typeof navigator<"u"&&typeof navigator.product=="string"&&navigator.product.toLowerCase()==="reactnative";class JL extends fb{get name(){return"websocket"}doOpen(){const e=this.uri(),n=this.opts.protocols,r=TT?{}:xT(this.opts,"agent","perMessageDeflate","pfx","key","passphrase","cert","ca","ciphers","rejectUnauthorized","localAddress","protocolVersion","origin","maxPayload","family","checkServerIdentity");this.opts.extraHeaders&&(r.headers=this.opts.extraHeaders);try{this.ws=this.createSocket(e,n,r)}catch(i){return this.emitReserved("error",i)}this.ws.binaryType=this.socket.binaryType,this.addEventListeners()}addEventListeners(){this.ws.onopen=()=>{this.opts.autoUnref&&this.ws._socket.unref(),this.onOpen()},this.ws.onclose=e=>this.onClose({description:"websocket connection closed",context:e}),this.ws.onmessage=e=>this.onData(e.data),this.ws.onerror=e=>this.onError("websocket error",e)}write(e){this.writable=!1;for(let n=0;n<e.length;n++){const r=e[n],i=n===e.length-1;ub(r,this.supportsBinary,s=>{try{this.doWrite(r,s)}catch{}i&&Ng(()=>{this.writable=!0,this.emitReserved("drain")},this.setTimeoutFn)})}}doClose(){typeof this.ws<"u"&&(this.ws.onerror=()=>{},this.ws.close(),this.ws=null)}uri(){const e=this.opts.secure?"wss":"ws",n=this.query||{};return this.opts.timestampRequests&&(n[this.opts.timestampParam]=CT()),this.supportsBinary||(n.b64=1),this.createUri(e,n)}}const jm=_r.WebSocket||_r.MozWebSocket;class ZL extends JL{createSocket(e,n,r){return TT?new jm(e,n,r):n?new jm(e,n):new jm(e)}doWrite(e,n){this.ws.send(n)}}class XL extends fb{get name(){return"webtransport"}doOpen(){try{this._transport=new WebTransport(this.createUri("https"),this.opts.transportOptions[this.name])}catch(e){return this.emitReserved("error",e)}this._transport.closed.then(()=>{this.onClose()}).catch(e=>{this.onError("webtransport error",e)}),this._transport.ready.then(()=>{this._transport.createBidirectionalStream().then(e=>{const n=ML(Number.MAX_SAFE_INTEGER,this.socket.binaryType),r=e.readable.pipeThrough(n).getReader(),i=NL();i.readable.pipeTo(e.writable),this._writer=i.writable.getWriter();const s=()=>{r.read().then(({done:a,value:l})=>{a||(this.onPacket(l),s())}).catch(a=>{})};s();const o={type:"open"};this.query.sid&&(o.data=`{"sid":"${this.query.sid}"}`),this._writer.write(o).then(()=>this.onOpen())})})}write(e){this.writable=!1;for(let n=0;n<e.length;n++){const r=e[n],i=n===e.length-1;this._writer.write(r).then(()=>{i&&Ng(()=>{this.writable=!0,this.emitReserved("drain")},this.setTimeoutFn)})}}doClose(){var e;(e=this._transport)===null||e===void 0||e.close()}}const eB={websocket:ZL,webtransport:XL,polling:YL},tB=/^(?:(?![^:@\/?#]+:[^:@\/]*@)(http|https|ws|wss):\/\/)?((?:(([^:@\/?#]*)(?::([^:@\/?#]*))?)?@)?((?:[a-f0-9]{0,4}:){2,7}[a-f0-9]{0,4}|[^:\/?#]*)(?::(\d*))?)(((\/(?:[^?#](?![^?#\/]*\.[^?#\/.]+(?:[?#]|$)))*\/?)?([^?#\/]*))(?:\?([^#]*))?(?:#(.*))?)/,nB=["source","protocol","authority","userInfo","user","password","host","port","relative","path","directory","file","query","anchor"];function hw(t){if(t.length>8e3)throw"URI too long";const e=t,n=t.indexOf("["),r=t.indexOf("]");n!=-1&&r!=-1&&(t=t.substring(0,n)+t.substring(n,r).replace(/:/g,";")+t.substring(r,t.length));let i=tB.exec(t||""),s={},o=14;for(;o--;)s[nB[o]]=i[o]||"";return n!=-1&&r!=-1&&(s.source=e,s.host=s.host.substring(1,s.host.length-1).replace(/;/g,":"),s.authority=s.authority.replace("[","").replace("]","").replace(/;/g,":"),s.ipv6uri=!0),s.pathNames=rB(s,s.path),s.queryKey=iB(s,s.query),s}function rB(t,e){const n=/\/{2,9}/g,r=e.replace(n,"/").split("/");return(e.slice(0,1)=="/"||e.length===0)&&r.splice(0,1),e.slice(-1)=="/"&&r.splice(r.length-1,1),r}function iB(t,e){const n={};return e.replace(/(?:^|&)([^&=]*)=?([^&]*)/g,function(r,i,s){i&&(n[i]=s)}),n}const pw=typeof addEventListener=="function"&&typeof removeEventListener=="function",mp=[];pw&&addEventListener("offline",()=>{mp.forEach(t=>t())},!1);class Do extends kt{constructor(e,n){if(super(),this.binaryType=BL,this.writeBuffer=[],this._prevBufferLen=0,this._pingInterval=-1,this._pingTimeout=-1,this._maxPayload=-1,this._pingTimeoutTime=1/0,e&&typeof e=="object"&&(n=e,e=null),e){const r=hw(e);n.hostname=r.host,n.secure=r.protocol==="https"||r.protocol==="wss",n.port=r.port,r.query&&(n.query=r.query)}else n.host&&(n.hostname=hw(n.host).host);Mg(this,n),this.secure=n.secure!=null?n.secure:typeof location<"u"&&location.protocol==="https:",n.hostname&&!n.port&&(n.port=this.secure?"443":"80"),this.hostname=n.hostname||(typeof location<"u"?location.hostname:"localhost"),this.port=n.port||(typeof location<"u"&&location.port?location.port:this.secure?"443":"80"),this.transports=[],this._transportsByName={},n.transports.forEach(r=>{const i=r.prototype.name;this.transports.push(i),this._transportsByName[i]=r}),this.opts=Object.assign({path:"/engine.io",agent:!1,withCredentials:!1,upgrade:!0,timestampParam:"t",rememberUpgrade:!1,addTrailingSlash:!0,rejectUnauthorized:!0,perMessageDeflate:{threshold:1024},transportOptions:{},closeOnBeforeunload:!1},n),this.opts.path=this.opts.path.replace(/\/$/,"")+(this.opts.addTrailingSlash?"/":""),typeof this.opts.query=="string"&&(this.opts.query=KL(this.opts.query)),pw&&(this.opts.closeOnBeforeunload&&(this._beforeunloadEventListener=()=>{this.transport&&(this.transport.removeAllListeners(),this.transport.close())},addEventListener("beforeunload",this._beforeunloadEventListener,!1)),this.hostname!=="localhost"&&(this._offlineEventListener=()=>{this._onClose("transport close",{description:"network connection lost"})},mp.push(this._offlineEventListener))),this.opts.withCredentials&&(this._cookieJar=void 0),this._open()}createTransport(e){const n=Object.assign({},this.opts.query);n.EIO=ST,n.transport=e,this.id&&(n.sid=this.id);const r=Object.assign({},this.opts,{query:n,socket:this,hostname:this.hostname,secure:this.secure,port:this.port},this.opts.transportOptions[e]);return new this._transportsByName[e](r)}_open(){if(this.transports.length===0){this.setTimeoutFn(()=>{this.emitReserved("error","No transports available")},0);return}const e=this.opts.rememberUpgrade&&Do.priorWebsocketSuccess&&this.transports.indexOf("websocket")!==-1?"websocket":this.transports[0];this.readyState="opening";const n=this.createTransport(e);n.open(),this.setTransport(n)}setTransport(e){this.transport&&this.transport.removeAllListeners(),this.transport=e,e.on("drain",this._onDrain.bind(this)).on("packet",this._onPacket.bind(this)).on("error",this._onError.bind(this)).on("close",n=>this._onClose("transport close",n))}onOpen(){this.readyState="open",Do.priorWebsocketSuccess=this.transport.name==="websocket",this.emitReserved("open"),this.flush()}_onPacket(e){if(this.readyState==="opening"||this.readyState==="open"||this.readyState==="closing")switch(this.emitReserved("packet",e),this.emitReserved("heartbeat"),e.type){case"open":this.onHandshake(JSON.parse(e.data));break;case"ping":this._sendPacket("pong"),this.emitReserved("ping"),this.emitReserved("pong"),this._resetPingTimeout();break;case"error":const n=new Error("server error");n.code=e.data,this._onError(n);break;case"message":this.emitReserved("data",e.data),this.emitReserved("message",e.data);break}}onHandshake(e){this.emitReserved("handshake",e),this.id=e.sid,this.transport.query.sid=e.sid,this._pingInterval=e.pingInterval,this._pingTimeout=e.pingTimeout,this._maxPayload=e.maxPayload,this.onOpen(),this.readyState!=="closed"&&this._resetPingTimeout()}_resetPingTimeout(){this.clearTimeoutFn(this._pingTimeoutTimer);const e=this._pingInterval+this._pingTimeout;this._pingTimeoutTime=Date.now()+e,this._pingTimeoutTimer=this.setTimeoutFn(()=>{this._onClose("ping timeout")},e),this.opts.autoUnref&&this._pingTimeoutTimer.unref()}_onDrain(){this.writeBuffer.splice(0,this._prevBufferLen),this._prevBufferLen=0,this.writeBuffer.length===0?this.emitReserved("drain"):this.flush()}flush(){if(this.readyState!=="closed"&&this.transport.writable&&!this.upgrading&&this.writeBuffer.length){const e=this._getWritablePackets();this.transport.send(e),this._prevBufferLen=e.length,this.emitReserved("flush")}}_getWritablePackets(){if(!(this._maxPayload&&this.transport.name==="polling"&&this.writeBuffer.length>1))return this.writeBuffer;let n=1;for(let r=0;r<this.writeBuffer.length;r++){const i=this.writeBuffer[r].data;if(i&&(n+=FL(i)),r>0&&n>this._maxPayload)return this.writeBuffer.slice(0,r);n+=2}return this.writeBuffer}_hasPingExpired(){if(!this._pingTimeoutTime)return!0;const e=Date.now()>this._pingTimeoutTime;return e&&(this._pingTimeoutTime=0,Ng(()=>{this._onClose("ping timeout")},this.setTimeoutFn)),e}write(e,n,r){return this._sendPacket("message",e,n,r),this}send(e,n,r){return this._sendPacket("message",e,n,r),this}_sendPacket(e,n,r,i){if(typeof n=="function"&&(i=n,n=void 0),typeof r=="function"&&(i=r,r=null),this.readyState==="closing"||this.readyState==="closed")return;r=r||{},r.compress=r.compress!==!1;const s={type:e,data:n,options:r};this.emitReserved("packetCreate",s),this.writeBuffer.push(s),i&&this.once("flush",i),this.flush()}close(){const e=()=>{this._onClose("forced close"),this.transport.close()},n=()=>{this.off("upgrade",n),this.off("upgradeError",n),e()},r=()=>{this.once("upgrade",n),this.once("upgradeError",n)};return(this.readyState==="opening"||this.readyState==="open")&&(this.readyState="closing",this.writeBuffer.length?this.once("drain",()=>{this.upgrading?r():e()}):this.upgrading?r():e()),this}_onError(e){if(Do.priorWebsocketSuccess=!1,this.opts.tryAllTransports&&this.transports.length>1&&this.readyState==="opening")return this.transports.shift(),this._open();this.emitReserved("error",e),this._onClose("transport error",e)}_onClose(e,n){if(this.readyState==="opening"||this.readyState==="open"||this.readyState==="closing"){if(this.clearTimeoutFn(this._pingTimeoutTimer),this.transport.removeAllListeners("close"),this.transport.close(),this.transport.removeAllListeners(),pw&&(this._beforeunloadEventListener&&removeEventListener("beforeunload",this._beforeunloadEventListener,!1),this._offlineEventListener)){const r=mp.indexOf(this._offlineEventListener);r!==-1&&mp.splice(r,1)}this.readyState="closed",this.id=null,this.emitReserved("close",e,n),this.writeBuffer=[],this._prevBufferLen=0}}}Do.protocol=ST;class sB extends Do{constructor(){super(...arguments),this._upgrades=[]}onOpen(){if(super.onOpen(),this.readyState==="open"&&this.opts.upgrade)for(let e=0;e<this._upgrades.length;e++)this._probe(this._upgrades[e])}_probe(e){let n=this.createTransport(e),r=!1;Do.priorWebsocketSuccess=!1;const i=()=>{r||(n.send([{type:"ping",data:"probe"}]),n.once("packet",d=>{if(!r)if(d.type==="pong"&&d.data==="probe"){if(this.upgrading=!0,this.emitReserved("upgrading",n),!n)return;Do.priorWebsocketSuccess=n.name==="websocket",this.transport.pause(()=>{r||this.readyState!=="closed"&&(u(),this.setTransport(n),n.send([{type:"upgrade"}]),this.emitReserved("upgrade",n),n=null,this.upgrading=!1,this.flush())})}else{const f=new Error("probe error");f.transport=n.name,this.emitReserved("upgradeError",f)}}))};function s(){r||(r=!0,u(),n.close(),n=null)}const o=d=>{const f=new Error("probe error: "+d);f.transport=n.name,s(),this.emitReserved("upgradeError",f)};function a(){o("transport closed")}function l(){o("socket closed")}function c(d){n&&d.name!==n.name&&s()}const u=()=>{n.removeListener("open",i),n.removeListener("error",o),n.removeListener("close",a),this.off("close",l),this.off("upgrading",c)};n.once("open",i),n.once("error",o),n.once("close",a),this.once("close",l),this.once("upgrading",c),this._upgrades.indexOf("webtransport")!==-1&&e!=="webtransport"?this.setTimeoutFn(()=>{r||n.open()},200):n.open()}onHandshake(e){this._upgrades=this._filterUpgrades(e.upgrades),super.onHandshake(e)}_filterUpgrades(e){const n=[];for(let r=0;r<e.length;r++)~this.transports.indexOf(e[r])&&n.push(e[r]);return n}}let oB=class extends sB{constructor(e,n={}){const r=typeof e=="object"?e:n;(!r.transports||r.transports&&typeof r.transports[0]=="string")&&(r.transports=(r.transports||["polling","websocket","webtransport"]).map(i=>eB[i]).filter(i=>!!i)),super(e,r)}};function aB(t,e="",n){let r=t;n=n||typeof location<"u"&&location,t==null&&(t=n.protocol+"//"+n.host),typeof t=="string"&&(t.charAt(0)==="/"&&(t.charAt(1)==="/"?t=n.protocol+t:t=n.host+t),/^(https?|wss?):\/\//.test(t)||(typeof n<"u"?t=n.protocol+"//"+t:t="https://"+t),r=hw(t)),r.port||(/^(http|ws)$/.test(r.protocol)?r.port="80":/^(http|ws)s$/.test(r.protocol)&&(r.port="443")),r.path=r.path||"/";const s=r.host.indexOf(":")!==-1?"["+r.host+"]":r.host;return r.id=r.protocol+"://"+s+":"+r.port+e,r.href=r.protocol+"://"+s+(n&&n.port===r.port?"":":"+r.port),r}const lB=typeof ArrayBuffer=="function",cB=t=>typeof ArrayBuffer.isView=="function"?ArrayBuffer.isView(t):t.buffer instanceof ArrayBuffer,PT=Object.prototype.toString,uB=typeof Blob=="function"||typeof Blob<"u"&&PT.call(Blob)==="[object BlobConstructor]",dB=typeof File=="function"||typeof File<"u"&&PT.call(File)==="[object FileConstructor]";function hb(t){return lB&&(t instanceof ArrayBuffer||cB(t))||uB&&t instanceof Blob||dB&&t instanceof File}function yp(t,e){if(!t||typeof t!="object")return!1;if(Array.isArray(t)){for(let n=0,r=t.length;n<r;n++)if(yp(t[n]))return!0;return!1}if(hb(t))return!0;if(t.toJSON&&typeof t.toJSON=="function"&&arguments.length===1)return yp(t.toJSON(),!0);for(const n in t)if(Object.prototype.hasOwnProperty.call(t,n)&&yp(t[n]))return!0;return!1}function fB(t){const e=[],n=t.data,r=t;return r.data=gw(n,e),r.attachments=e.length,{packet:r,buffers:e}}function gw(t,e){if(!t)return t;if(hb(t)){const n={_placeholder:!0,num:e.length};return e.push(t),n}else if(Array.isArray(t)){const n=new Array(t.length);for(let r=0;r<t.length;r++)n[r]=gw(t[r],e);return n}else if(typeof t=="object"&&!(t instanceof Date)){const n={};for(const r in t)Object.prototype.hasOwnProperty.call(t,r)&&(n[r]=gw(t[r],e));return n}return t}function hB(t,e){return t.data=mw(t.data,e),delete t.attachments,t}function mw(t,e){if(!t)return t;if(t&&t._placeholder===!0){if(typeof t.num=="number"&&t.num>=0&&t.num<e.length)return e[t.num];throw new Error("illegal attachments")}else if(Array.isArray(t))for(let n=0;n<t.length;n++)t[n]=mw(t[n],e);else if(typeof t=="object")for(const n in t)Object.prototype.hasOwnProperty.call(t,n)&&(t[n]=mw(t[n],e));return t}const pB=["connect","connect_error","disconnect","disconnecting","newListener","removeListener"],gB=5;var Fe;(function(t){t[t.CONNECT=0]="CONNECT",t[t.DISCONNECT=1]="DISCONNECT",t[t.EVENT=2]="EVENT",t[t.ACK=3]="ACK",t[t.CONNECT_ERROR=4]="CONNECT_ERROR",t[t.BINARY_EVENT=5]="BINARY_EVENT",t[t.BINARY_ACK=6]="BINARY_ACK"})(Fe||(Fe={}));class mB{constructor(e){this.replacer=e}encode(e){return(e.type===Fe.EVENT||e.type===Fe.ACK)&&yp(e)?this.encodeAsBinary({type:e.type===Fe.EVENT?Fe.BINARY_EVENT:Fe.BINARY_ACK,nsp:e.nsp,data:e.data,id:e.id}):[this.encodeAsString(e)]}encodeAsString(e){let n=""+e.type;return(e.type===Fe.BINARY_EVENT||e.type===Fe.BINARY_ACK)&&(n+=e.attachments+"-"),e.nsp&&e.nsp!=="/"&&(n+=e.nsp+","),e.id!=null&&(n+=e.id),e.data!=null&&(n+=JSON.stringify(e.data,this.replacer)),n}encodeAsBinary(e){const n=fB(e),r=this.encodeAsString(n.packet),i=n.buffers;return i.unshift(r),i}}function MA(t){return Object.prototype.toString.call(t)==="[object Object]"}class pb extends kt{constructor(e){super(),this.reviver=e}add(e){let n;if(typeof e=="string"){if(this.reconstructor)throw new Error("got plaintext data when reconstructing a packet");n=this.decodeString(e);const r=n.type===Fe.BINARY_EVENT;r||n.type===Fe.BINARY_ACK?(n.type=r?Fe.EVENT:Fe.ACK,this.reconstructor=new yB(n),n.attachments===0&&super.emitReserved("decoded",n)):super.emitReserved("decoded",n)}else if(hb(e)||e.base64)if(this.reconstructor)n=this.reconstructor.takeBinaryData(e),n&&(this.reconstructor=null,super.emitReserved("decoded",n));else throw new Error("got binary data when not reconstructing a packet");else throw new Error("Unknown type: "+e)}decodeString(e){let n=0;const r={type:Number(e.charAt(0))};if(Fe[r.type]===void 0)throw new Error("unknown packet type "+r.type);if(r.type===Fe.BINARY_EVENT||r.type===Fe.BINARY_ACK){const s=n+1;for(;e.charAt(++n)!=="-"&&n!=e.length;);const o=e.substring(s,n);if(o!=Number(o)||e.charAt(n)!=="-")throw new Error("Illegal attachments");r.attachments=Number(o)}if(e.charAt(n+1)==="/"){const s=n+1;for(;++n&&!(e.charAt(n)===","||n===e.length););r.nsp=e.substring(s,n)}else r.nsp="/";const i=e.charAt(n+1);if(i!==""&&Number(i)==i){const s=n+1;for(;++n;){const o=e.charAt(n);if(o==null||Number(o)!=o){--n;break}if(n===e.length)break}r.id=Number(e.substring(s,n+1))}if(e.charAt(++n)){const s=this.tryParse(e.substr(n));if(pb.isPayloadValid(r.type,s))r.data=s;else throw new Error("invalid payload")}return r}tryParse(e){try{return JSON.parse(e,this.reviver)}catch{return!1}}static isPayloadValid(e,n){switch(e){case Fe.CONNECT:return MA(n);case Fe.DISCONNECT:return n===void 0;case Fe.CONNECT_ERROR:return typeof n=="string"||MA(n);case Fe.EVENT:case Fe.BINARY_EVENT:return Array.isArray(n)&&(typeof n[0]=="number"||typeof n[0]=="string"&&pB.indexOf(n[0])===-1);case Fe.ACK:case Fe.BINARY_ACK:return Array.isArray(n)}}destroy(){this.reconstructor&&(this.reconstructor.finishedReconstruction(),this.reconstructor=null)}}class yB{constructor(e){this.packet=e,this.buffers=[],this.reconPack=e}takeBinaryData(e){if(this.buffers.push(e),this.buffers.length===this.reconPack.attachments){const n=hB(this.reconPack,this.buffers);return this.finishedReconstruction(),n}return null}finishedReconstruction(){this.reconPack=null,this.buffers=[]}}const vB=Object.freeze(Object.defineProperty({__proto__:null,Decoder:pb,Encoder:mB,get PacketType(){return Fe},protocol:gB},Symbol.toStringTag,{value:"Module"}));function Wr(t,e,n){return t.on(e,n),function(){t.off(e,n)}}const wB=Object.freeze({connect:1,connect_error:1,disconnect:1,disconnecting:1,newListener:1,removeListener:1});class RT extends kt{constructor(e,n,r){super(),this.connected=!1,this.recovered=!1,this.receiveBuffer=[],this.sendBuffer=[],this._queue=[],this._queueSeq=0,this.ids=0,this.acks={},this.flags={},this.io=e,this.nsp=n,r&&r.auth&&(this.auth=r.auth),this._opts=Object.assign({},r),this.io._autoConnect&&this.open()}get disconnected(){return!this.connected}subEvents(){if(this.subs)return;const e=this.io;this.subs=[Wr(e,"open",this.onopen.bind(this)),Wr(e,"packet",this.onpacket.bind(this)),Wr(e,"error",this.onerror.bind(this)),Wr(e,"close",this.onclose.bind(this))]}get active(){return!!this.subs}connect(){return this.connected?this:(this.subEvents(),this.io._reconnecting||this.io.open(),this.io._readyState==="open"&&this.onopen(),this)}open(){return this.connect()}send(...e){return e.unshift("message"),this.emit.apply(this,e),this}emit(e,...n){var r,i,s;if(wB.hasOwnProperty(e))throw new Error('"'+e.toString()+'" is a reserved event name');if(n.unshift(e),this._opts.retries&&!this.flags.fromQueue&&!this.flags.volatile)return this._addToQueue(n),this;const o={type:Fe.EVENT,data:n};if(o.options={},o.options.compress=this.flags.compress!==!1,typeof n[n.length-1]=="function"){const u=this.ids++,d=n.pop();this._registerAckCallback(u,d),o.id=u}const a=(i=(r=this.io.engine)===null||r===void 0?void 0:r.transport)===null||i===void 0?void 0:i.writable,l=this.connected&&!(!((s=this.io.engine)===null||s===void 0)&&s._hasPingExpired());return this.flags.volatile&&!a||(l?(this.notifyOutgoingListeners(o),this.packet(o)):this.sendBuffer.push(o)),this.flags={},this}_registerAckCallback(e,n){var r;const i=(r=this.flags.timeout)!==null&&r!==void 0?r:this._opts.ackTimeout;if(i===void 0){this.acks[e]=n;return}const s=this.io.setTimeoutFn(()=>{delete this.acks[e];for(let a=0;a<this.sendBuffer.length;a++)this.sendBuffer[a].id===e&&this.sendBuffer.splice(a,1);n.call(this,new Error("operation has timed out"))},i),o=(...a)=>{this.io.clearTimeoutFn(s),n.apply(this,a)};o.withError=!0,this.acks[e]=o}emitWithAck(e,...n){return new Promise((r,i)=>{const s=(o,a)=>o?i(o):r(a);s.withError=!0,n.push(s),this.emit(e,...n)})}_addToQueue(e){let n;typeof e[e.length-1]=="function"&&(n=e.pop());const r={id:this._queueSeq++,tryCount:0,pending:!1,args:e,flags:Object.assign({fromQueue:!0},this.flags)};e.push((i,...s)=>r!==this._queue[0]?void 0:(i!==null?r.tryCount>this._opts.retries&&(this._queue.shift(),n&&n(i)):(this._queue.shift(),n&&n(null,...s)),r.pending=!1,this._drainQueue())),this._queue.push(r),this._drainQueue()}_drainQueue(e=!1){if(!this.connected||this._queue.length===0)return;const n=this._queue[0];n.pending&&!e||(n.pending=!0,n.tryCount++,this.flags=n.flags,this.emit.apply(this,n.args))}packet(e){e.nsp=this.nsp,this.io._packet(e)}onopen(){typeof this.auth=="function"?this.auth(e=>{this._sendConnectPacket(e)}):this._sendConnectPacket(this.auth)}_sendConnectPacket(e){this.packet({type:Fe.CONNECT,data:this._pid?Object.assign({pid:this._pid,offset:this._lastOffset},e):e})}onerror(e){this.connected||this.emitReserved("connect_error",e)}onclose(e,n){this.connected=!1,delete this.id,this.emitReserved("disconnect",e,n),this._clearAcks()}_clearAcks(){Object.keys(this.acks).forEach(e=>{if(!this.sendBuffer.some(r=>String(r.id)===e)){const r=this.acks[e];delete this.acks[e],r.withError&&r.call(this,new Error("socket has been disconnected"))}})}onpacket(e){if(e.nsp===this.nsp)switch(e.type){case Fe.CONNECT:e.data&&e.data.sid?this.onconnect(e.data.sid,e.data.pid):this.emitReserved("connect_error",new Error("It seems you are trying to reach a Socket.IO server in v2.x with a v3.x client, but they are not compatible (more information here: https://socket.io/docs/v3/migrating-from-2-x-to-3-0/)"));break;case Fe.EVENT:case Fe.BINARY_EVENT:this.onevent(e);break;case Fe.ACK:case Fe.BINARY_ACK:this.onack(e);break;case Fe.DISCONNECT:this.ondisconnect();break;case Fe.CONNECT_ERROR:this.destroy();const r=new Error(e.data.message);r.data=e.data.data,this.emitReserved("connect_error",r);break}}onevent(e){const n=e.data||[];e.id!=null&&n.push(this.ack(e.id)),this.connected?this.emitEvent(n):this.receiveBuffer.push(Object.freeze(n))}emitEvent(e){if(this._anyListeners&&this._anyListeners.length){const n=this._anyListeners.slice();for(const r of n)r.apply(this,e)}super.emit.apply(this,e),this._pid&&e.length&&typeof e[e.length-1]=="string"&&(this._lastOffset=e[e.length-1])}ack(e){const n=this;let r=!1;return function(...i){r||(r=!0,n.packet({type:Fe.ACK,id:e,data:i}))}}onack(e){const n=this.acks[e.id];typeof n=="function"&&(delete this.acks[e.id],n.withError&&e.data.unshift(null),n.apply(this,e.data))}onconnect(e,n){this.id=e,this.recovered=n&&this._pid===n,this._pid=n,this.connected=!0,this.emitBuffered(),this.emitReserved("connect"),this._drainQueue(!0)}emitBuffered(){this.receiveBuffer.forEach(e=>this.emitEvent(e)),this.receiveBuffer=[],this.sendBuffer.forEach(e=>{this.notifyOutgoingListeners(e),this.packet(e)}),this.sendBuffer=[]}ondisconnect(){this.destroy(),this.onclose("io server disconnect")}destroy(){this.subs&&(this.subs.forEach(e=>e()),this.subs=void 0),this.io._destroy(this)}disconnect(){return this.connected&&this.packet({type:Fe.DISCONNECT}),this.destroy(),this.connected&&this.onclose("io client disconnect"),this}close(){return this.disconnect()}compress(e){return this.flags.compress=e,this}get volatile(){return this.flags.volatile=!0,this}timeout(e){return this.flags.timeout=e,this}onAny(e){return this._anyListeners=this._anyListeners||[],this._anyListeners.push(e),this}prependAny(e){return this._anyListeners=this._anyListeners||[],this._anyListeners.unshift(e),this}offAny(e){if(!this._anyListeners)return this;if(e){const n=this._anyListeners;for(let r=0;r<n.length;r++)if(e===n[r])return n.splice(r,1),this}else this._anyListeners=[];return this}listenersAny(){return this._anyListeners||[]}onAnyOutgoing(e){return this._anyOutgoingListeners=this._anyOutgoingListeners||[],this._anyOutgoingListeners.push(e),this}prependAnyOutgoing(e){return this._anyOutgoingListeners=this._anyOutgoingListeners||[],this._anyOutgoingListeners.unshift(e),this}offAnyOutgoing(e){if(!this._anyOutgoingListeners)return this;if(e){const n=this._anyOutgoingListeners;for(let r=0;r<n.length;r++)if(e===n[r])return n.splice(r,1),this}else this._anyOutgoingListeners=[];return this}listenersAnyOutgoing(){return this._anyOutgoingListeners||[]}notifyOutgoingListeners(e){if(this._anyOutgoingListeners&&this._anyOutgoingListeners.length){const n=this._anyOutgoingListeners.slice();for(const r of n)r.apply(this,e.data)}}}function Cu(t){t=t||{},this.ms=t.min||100,this.max=t.max||1e4,this.factor=t.factor||2,this.jitter=t.jitter>0&&t.jitter<=1?t.jitter:0,this.attempts=0}Cu.prototype.duration=function(){var t=this.ms*Math.pow(this.factor,this.attempts++);if(this.jitter){var e=Math.random(),n=Math.floor(e*this.jitter*t);t=Math.floor(e*10)&1?t+n:t-n}return Math.min(t,this.max)|0};Cu.prototype.reset=function(){this.attempts=0};Cu.prototype.setMin=function(t){this.ms=t};Cu.prototype.setMax=function(t){this.max=t};Cu.prototype.setJitter=function(t){this.jitter=t};class yw extends kt{constructor(e,n){var r;super(),this.nsps={},this.subs=[],e&&typeof e=="object"&&(n=e,e=void 0),n=n||{},n.path=n.path||"/socket.io",this.opts=n,Mg(this,n),this.reconnection(n.reconnection!==!1),this.reconnectionAttempts(n.reconnectionAttempts||1/0),this.reconnectionDelay(n.reconnectionDelay||1e3),this.reconnectionDelayMax(n.reconnectionDelayMax||5e3),this.randomizationFactor((r=n.randomizationFactor)!==null&&r!==void 0?r:.5),this.backoff=new Cu({min:this.reconnectionDelay(),max:this.reconnectionDelayMax(),jitter:this.randomizationFactor()}),this.timeout(n.timeout==null?2e4:n.timeout),this._readyState="closed",this.uri=e;const i=n.parser||vB;this.encoder=new i.Encoder,this.decoder=new i.Decoder,this._autoConnect=n.autoConnect!==!1,this._autoConnect&&this.open()}reconnection(e){return arguments.length?(this._reconnection=!!e,e||(this.skipReconnect=!0),this):this._reconnection}reconnectionAttempts(e){return e===void 0?this._reconnectionAttempts:(this._reconnectionAttempts=e,this)}reconnectionDelay(e){var n;return e===void 0?this._reconnectionDelay:(this._reconnectionDelay=e,(n=this.backoff)===null||n===void 0||n.setMin(e),this)}randomizationFactor(e){var n;return e===void 0?this._randomizationFactor:(this._randomizationFactor=e,(n=this.backoff)===null||n===void 0||n.setJitter(e),this)}reconnectionDelayMax(e){var n;return e===void 0?this._reconnectionDelayMax:(this._reconnectionDelayMax=e,(n=this.backoff)===null||n===void 0||n.setMax(e),this)}timeout(e){return arguments.length?(this._timeout=e,this):this._timeout}maybeReconnectOnOpen(){!this._reconnecting&&this._reconnection&&this.backoff.attempts===0&&this.reconnect()}open(e){if(~this._readyState.indexOf("open"))return this;this.engine=new oB(this.uri,this.opts);const n=this.engine,r=this;this._readyState="opening",this.skipReconnect=!1;const i=Wr(n,"open",function(){r.onopen(),e&&e()}),s=a=>{this.cleanup(),this._readyState="closed",this.emitReserved("error",a),e?e(a):this.maybeReconnectOnOpen()},o=Wr(n,"error",s);if(this._timeout!==!1){const a=this._timeout,l=this.setTimeoutFn(()=>{i(),s(new Error("timeout")),n.close()},a);this.opts.autoUnref&&l.unref(),this.subs.push(()=>{this.clearTimeoutFn(l)})}return this.subs.push(i),this.subs.push(o),this}connect(e){return this.open(e)}onopen(){this.cleanup(),this._readyState="open",this.emitReserved("open");const e=this.engine;this.subs.push(Wr(e,"ping",this.onping.bind(this)),Wr(e,"data",this.ondata.bind(this)),Wr(e,"error",this.onerror.bind(this)),Wr(e,"close",this.onclose.bind(this)),Wr(this.decoder,"decoded",this.ondecoded.bind(this)))}onping(){this.emitReserved("ping")}ondata(e){try{this.decoder.add(e)}catch(n){this.onclose("parse error",n)}}ondecoded(e){Ng(()=>{this.emitReserved("packet",e)},this.setTimeoutFn)}onerror(e){this.emitReserved("error",e)}socket(e,n){let r=this.nsps[e];return r?this._autoConnect&&!r.active&&r.connect():(r=new RT(this,e,n),this.nsps[e]=r),r}_destroy(e){const n=Object.keys(this.nsps);for(const r of n)if(this.nsps[r].active)return;this._close()}_packet(e){const n=this.encoder.encode(e);for(let r=0;r<n.length;r++)this.engine.write(n[r],e.options)}cleanup(){this.subs.forEach(e=>e()),this.subs.length=0,this.decoder.destroy()}_close(){this.skipReconnect=!0,this._reconnecting=!1,this.onclose("forced close")}disconnect(){return this._close()}onclose(e,n){var r;this.cleanup(),(r=this.engine)===null||r===void 0||r.close(),this.backoff.reset(),this._readyState="closed",this.emitReserved("close",e,n),this._reconnection&&!this.skipReconnect&&this.reconnect()}reconnect(){if(this._reconnecting||this.skipReconnect)return this;const e=this;if(this.backoff.attempts>=this._reconnectionAttempts)this.backoff.reset(),this.emitReserved("reconnect_failed"),this._reconnecting=!1;else{const n=this.backoff.duration();this._reconnecting=!0;const r=this.setTimeoutFn(()=>{e.skipReconnect||(this.emitReserved("reconnect_attempt",e.backoff.attempts),!e.skipReconnect&&e.open(i=>{i?(e._reconnecting=!1,e.reconnect(),this.emitReserved("reconnect_error",i)):e.onreconnect()}))},n);this.opts.autoUnref&&r.unref(),this.subs.push(()=>{this.clearTimeoutFn(r)})}}onreconnect(){const e=this.backoff.attempts;this._reconnecting=!1,this.backoff.reset(),this.emitReserved("reconnect",e)}}const ju={};function vp(t,e){typeof t=="object"&&(e=t,t=void 0),e=e||{};const n=aB(t,e.path||"/socket.io"),r=n.source,i=n.id,s=n.path,o=ju[i]&&s in ju[i].nsps,a=e.forceNew||e["force new connection"]||e.multiplex===!1||o;let l;return a?l=new yw(r,e):(ju[i]||(ju[i]=new yw(r,e)),l=ju[i]),n.query&&!e.query&&(e.query=n.queryKey),l.socket(n.path,e)}Object.assign(vp,{Manager:yw,Socket:RT,io:vp,connect:vp});function se(t,e,n,r){return new(n||(n=Promise))(function(i,s){function o(c){try{l(r.next(c))}catch(u){s(u)}}function a(c){try{l(r.throw(c))}catch(u){s(u)}}function l(c){var u;c.done?i(c.value):(u=c.value,u instanceof n?u:new n(function(d){d(u)})).then(o,a)}l((r=r.apply(t,e||[])).next())})}var Cn=typeof global<"u"?global:typeof self<"u"?self:typeof window<"u"?window:{},Ci=[],yr=[],bB=typeof Uint8Array<"u"?Uint8Array:Array,gb=!1;function IT(){gb=!0;for(var t="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",e=0;e<64;++e)Ci[e]=t[e],yr[t.charCodeAt(e)]=e;yr[45]=62,yr[95]=63}function EB(t,e,n){for(var r,i,s=[],o=e;o<n;o+=3)r=(t[o]<<16)+(t[o+1]<<8)+t[o+2],s.push(Ci[(i=r)>>18&63]+Ci[i>>12&63]+Ci[i>>6&63]+Ci[63&i]);return s.join("")}function LA(t){var e;gb||IT();for(var n=t.length,r=n%3,i="",s=[],o=16383,a=0,l=n-r;a<l;a+=o)s.push(EB(t,a,a+o>l?l:a+o));return r===1?(e=t[n-1],i+=Ci[e>>2],i+=Ci[e<<4&63],i+="=="):r===2&&(e=(t[n-2]<<8)+t[n-1],i+=Ci[e>>10],i+=Ci[e>>4&63],i+=Ci[e<<2&63],i+="="),s.push(i),s.join("")}function xh(t,e,n,r,i){var s,o,a=8*i-r-1,l=(1<<a)-1,c=l>>1,u=-7,d=n?i-1:0,f=n?-1:1,h=t[e+d];for(d+=f,s=h&(1<<-u)-1,h>>=-u,u+=a;u>0;s=256*s+t[e+d],d+=f,u-=8);for(o=s&(1<<-u)-1,s>>=-u,u+=r;u>0;o=256*o+t[e+d],d+=f,u-=8);if(s===0)s=1-c;else{if(s===l)return o?NaN:1/0*(h?-1:1);o+=Math.pow(2,r),s-=c}return(h?-1:1)*o*Math.pow(2,s-r)}function OT(t,e,n,r,i,s){var o,a,l,c=8*s-i-1,u=(1<<c)-1,d=u>>1,f=i===23?Math.pow(2,-24)-Math.pow(2,-77):0,h=r?0:s-1,m=r?1:-1,g=e<0||e===0&&1/e<0?1:0;for(e=Math.abs(e),isNaN(e)||e===1/0?(a=isNaN(e)?1:0,o=u):(o=Math.floor(Math.log(e)/Math.LN2),e*(l=Math.pow(2,-o))<1&&(o--,l*=2),(e+=o+d>=1?f/l:f*Math.pow(2,1-d))*l>=2&&(o++,l/=2),o+d>=u?(a=0,o=u):o+d>=1?(a=(e*l-1)*Math.pow(2,i),o+=d):(a=e*Math.pow(2,d-1)*Math.pow(2,i),o=0));i>=8;t[n+h]=255&a,h+=m,a/=256,i-=8);for(o=o<<i|a,c+=i;c>0;t[n+h]=255&o,h+=m,o/=256,c-=8);t[n+h-m]|=128*g}var AB={}.toString,NT=Array.isArray||function(t){return AB.call(t)=="[object Array]"};ae.TYPED_ARRAY_SUPPORT=Cn.TYPED_ARRAY_SUPPORT===void 0||Cn.TYPED_ARRAY_SUPPORT;var SB=b0();function b0(){return ae.TYPED_ARRAY_SUPPORT?2147483647:1073741823}function ps(t,e){if(b0()<e)throw new RangeError("Invalid typed array length");return ae.TYPED_ARRAY_SUPPORT?(t=new Uint8Array(e)).__proto__=ae.prototype:(t===null&&(t=new ae(e)),t.length=e),t}function ae(t,e,n){if(!(ae.TYPED_ARRAY_SUPPORT||this instanceof ae))return new ae(t,e,n);if(typeof t=="number"){if(typeof e=="string")throw new Error("If encoding is specified then the first argument must be a string");return vw(this,t)}return MT(this,t,e,n)}function MT(t,e,n,r){if(typeof e=="number")throw new TypeError('"value" argument must not be a number');return typeof ArrayBuffer<"u"&&e instanceof ArrayBuffer?function(i,s,o,a){if(s.byteLength,o<0||s.byteLength<o)throw new RangeError("'offset' is out of bounds");if(s.byteLength<o+(a||0))throw new RangeError("'length' is out of bounds");return s=o===void 0&&a===void 0?new Uint8Array(s):a===void 0?new Uint8Array(s,o):new Uint8Array(s,o,a),ae.TYPED_ARRAY_SUPPORT?(i=s).__proto__=ae.prototype:i=Hm(i,s),i}(t,e,n,r):typeof e=="string"?function(i,s,o){if(typeof o=="string"&&o!==""||(o="utf8"),!ae.isEncoding(o))throw new TypeError('"encoding" must be a valid string encoding');var a=0|BT(s,o);i=ps(i,a);var l=i.write(s,o);return l!==a&&(i=i.slice(0,l)),i}(t,e,n):function(i,s){if(ki(s)){var o=0|mb(s.length);return(i=ps(i,o)).length===0||s.copy(i,0,0,o),i}if(s){if(typeof ArrayBuffer<"u"&&s.buffer instanceof ArrayBuffer||"length"in s)return typeof s.length!="number"||(a=s.length)!=a?ps(i,0):Hm(i,s);if(s.type==="Buffer"&&NT(s.data))return Hm(i,s.data)}var a;throw new TypeError("First argument must be a string, Buffer, ArrayBuffer, Array, or array-like object.")}(t,e)}function LT(t){if(typeof t!="number")throw new TypeError('"size" argument must be a number');if(t<0)throw new RangeError('"size" argument must not be negative')}function vw(t,e){if(LT(e),t=ps(t,e<0?0:0|mb(e)),!ae.TYPED_ARRAY_SUPPORT)for(var n=0;n<e;++n)t[n]=0;return t}function Hm(t,e){var n=e.length<0?0:0|mb(e.length);t=ps(t,n);for(var r=0;r<n;r+=1)t[r]=255&e[r];return t}function mb(t){if(t>=b0())throw new RangeError("Attempt to allocate Buffer larger than maximum size: 0x"+b0().toString(16)+" bytes");return 0|t}function ki(t){return!(t==null||!t._isBuffer)}function BT(t,e){if(ki(t))return t.length;if(typeof ArrayBuffer<"u"&&typeof ArrayBuffer.isView=="function"&&(ArrayBuffer.isView(t)||t instanceof ArrayBuffer))return t.byteLength;typeof t!="string"&&(t=""+t);var n=t.length;if(n===0)return 0;for(var r=!1;;)switch(e){case"ascii":case"latin1":case"binary":return n;case"utf8":case"utf-8":case void 0:return E0(t).length;case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return 2*n;case"hex":return n>>>1;case"base64":return FT(t).length;default:if(r)return E0(t).length;e=(""+e).toLowerCase(),r=!0}}function xB(t,e,n){var r=!1;if((e===void 0||e<0)&&(e=0),e>this.length||((n===void 0||n>this.length)&&(n=this.length),n<=0)||(n>>>=0)<=(e>>>=0))return"";for(t||(t="utf8");;)switch(t){case"hex":return NB(this,e,n);case"utf8":case"utf-8":return $T(this,e,n);case"ascii":return IB(this,e,n);case"latin1":case"binary":return OB(this,e,n);case"base64":return RB(this,e,n);case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return MB(this,e,n);default:if(r)throw new TypeError("Unknown encoding: "+t);t=(t+"").toLowerCase(),r=!0}}function ta(t,e,n){var r=t[e];t[e]=t[n],t[n]=r}function BA(t,e,n,r,i){if(t.length===0)return-1;if(typeof n=="string"?(r=n,n=0):n>2147483647?n=2147483647:n<-2147483648&&(n=-2147483648),n=+n,isNaN(n)&&(n=i?0:t.length-1),n<0&&(n=t.length+n),n>=t.length){if(i)return-1;n=t.length-1}else if(n<0){if(!i)return-1;n=0}if(typeof e=="string"&&(e=ae.from(e,r)),ki(e))return e.length===0?-1:DA(t,e,n,r,i);if(typeof e=="number")return e&=255,ae.TYPED_ARRAY_SUPPORT&&typeof Uint8Array.prototype.indexOf=="function"?i?Uint8Array.prototype.indexOf.call(t,e,n):Uint8Array.prototype.lastIndexOf.call(t,e,n):DA(t,[e],n,r,i);throw new TypeError("val must be string, number or Buffer")}function DA(t,e,n,r,i){var s,o=1,a=t.length,l=e.length;if(r!==void 0&&((r=String(r).toLowerCase())==="ucs2"||r==="ucs-2"||r==="utf16le"||r==="utf-16le")){if(t.length<2||e.length<2)return-1;o=2,a/=2,l/=2,n/=2}function c(h,m){return o===1?h[m]:h.readUInt16BE(m*o)}if(i){var u=-1;for(s=n;s<a;s++)if(c(t,s)===c(e,u===-1?0:s-u)){if(u===-1&&(u=s),s-u+1===l)return u*o}else u!==-1&&(s-=s-u),u=-1}else for(n+l>a&&(n=a-l),s=n;s>=0;s--){for(var d=!0,f=0;f<l;f++)if(c(t,s+f)!==c(e,f)){d=!1;break}if(d)return s}return-1}function CB(t,e,n,r){n=Number(n)||0;var i=t.length-n;r?(r=Number(r))>i&&(r=i):r=i;var s=e.length;if(s%2!=0)throw new TypeError("Invalid hex string");r>s/2&&(r=s/2);for(var o=0;o<r;++o){var a=parseInt(e.substr(2*o,2),16);if(isNaN(a))return o;t[n+o]=a}return o}function kB(t,e,n,r){return Lg(E0(e,t.length-n),t,n,r)}function DT(t,e,n,r){return Lg(function(i){for(var s=[],o=0;o<i.length;++o)s.push(255&i.charCodeAt(o));return s}(e),t,n,r)}function _B(t,e,n,r){return DT(t,e,n,r)}function TB(t,e,n,r){return Lg(FT(e),t,n,r)}function PB(t,e,n,r){return Lg(function(i,s){for(var o,a,l,c=[],u=0;u<i.length&&!((s-=2)<0);++u)a=(o=i.charCodeAt(u))>>8,l=o%256,c.push(l),c.push(a);return c}(e,t.length-n),t,n,r)}function RB(t,e,n){return e===0&&n===t.length?LA(t):LA(t.slice(e,n))}function $T(t,e,n){n=Math.min(t.length,n);for(var r=[],i=e;i<n;){var s,o,a,l,c=t[i],u=null,d=c>239?4:c>223?3:c>191?2:1;if(i+d<=n)switch(d){case 1:c<128&&(u=c);break;case 2:(192&(s=t[i+1]))==128&&(l=(31&c)<<6|63&s)>127&&(u=l);break;case 3:s=t[i+1],o=t[i+2],(192&s)==128&&(192&o)==128&&(l=(15&c)<<12|(63&s)<<6|63&o)>2047&&(l<55296||l>57343)&&(u=l);break;case 4:s=t[i+1],o=t[i+2],a=t[i+3],(192&s)==128&&(192&o)==128&&(192&a)==128&&(l=(15&c)<<18|(63&s)<<12|(63&o)<<6|63&a)>65535&&l<1114112&&(u=l)}u===null?(u=65533,d=1):u>65535&&(u-=65536,r.push(u>>>10&1023|55296),u=56320|1023&u),r.push(u),i+=d}return function(f){var h=f.length;if(h<=$A)return String.fromCharCode.apply(String,f);for(var m="",g=0;g<h;)m+=String.fromCharCode.apply(String,f.slice(g,g+=$A));return m}(r)}ae.poolSize=8192,ae._augment=function(t){return t.__proto__=ae.prototype,t},ae.from=function(t,e,n){return MT(null,t,e,n)},ae.TYPED_ARRAY_SUPPORT&&(ae.prototype.__proto__=Uint8Array.prototype,ae.__proto__=Uint8Array,typeof Symbol<"u"&&Symbol.species&&ae[Symbol.species]),ae.alloc=function(t,e,n){return function(r,i,s,o){return LT(i),i<=0?ps(r,i):s!==void 0?typeof o=="string"?ps(r,i).fill(s,o):ps(r,i).fill(s):ps(r,i)}(null,t,e,n)},ae.allocUnsafe=function(t){return vw(null,t)},ae.allocUnsafeSlow=function(t){return vw(null,t)},ae.isBuffer=jT,ae.compare=function(t,e){if(!ki(t)||!ki(e))throw new TypeError("Arguments must be Buffers");if(t===e)return 0;for(var n=t.length,r=e.length,i=0,s=Math.min(n,r);i<s;++i)if(t[i]!==e[i]){n=t[i],r=e[i];break}return n<r?-1:r<n?1:0},ae.isEncoding=function(t){switch(String(t).toLowerCase()){case"hex":case"utf8":case"utf-8":case"ascii":case"latin1":case"binary":case"base64":case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return!0;default:return!1}},ae.concat=function(t,e){if(!NT(t))throw new TypeError('"list" argument must be an Array of Buffers');if(t.length===0)return ae.alloc(0);var n;if(e===void 0)for(e=0,n=0;n<t.length;++n)e+=t[n].length;var r=ae.allocUnsafe(e),i=0;for(n=0;n<t.length;++n){var s=t[n];if(!ki(s))throw new TypeError('"list" argument must be an Array of Buffers');s.copy(r,i),i+=s.length}return r},ae.byteLength=BT,ae.prototype._isBuffer=!0,ae.prototype.swap16=function(){var t=this.length;if(t%2!=0)throw new RangeError("Buffer size must be a multiple of 16-bits");for(var e=0;e<t;e+=2)ta(this,e,e+1);return this},ae.prototype.swap32=function(){var t=this.length;if(t%4!=0)throw new RangeError("Buffer size must be a multiple of 32-bits");for(var e=0;e<t;e+=4)ta(this,e,e+3),ta(this,e+1,e+2);return this},ae.prototype.swap64=function(){var t=this.length;if(t%8!=0)throw new RangeError("Buffer size must be a multiple of 64-bits");for(var e=0;e<t;e+=8)ta(this,e,e+7),ta(this,e+1,e+6),ta(this,e+2,e+5),ta(this,e+3,e+4);return this},ae.prototype.toString=function(){var t=0|this.length;return t===0?"":arguments.length===0?$T(this,0,t):xB.apply(this,arguments)},ae.prototype.equals=function(t){if(!ki(t))throw new TypeError("Argument must be a Buffer");return this===t||ae.compare(this,t)===0},ae.prototype.inspect=function(){var t="";return this.length>0&&(t=this.toString("hex",0,50).match(/.{2}/g).join(" "),this.length>50&&(t+=" ... ")),"<Buffer "+t+">"},ae.prototype.compare=function(t,e,n,r,i){if(!ki(t))throw new TypeError("Argument must be a Buffer");if(e===void 0&&(e=0),n===void 0&&(n=t?t.length:0),r===void 0&&(r=0),i===void 0&&(i=this.length),e<0||n>t.length||r<0||i>this.length)throw new RangeError("out of range index");if(r>=i&&e>=n)return 0;if(r>=i)return-1;if(e>=n)return 1;if(this===t)return 0;for(var s=(i>>>=0)-(r>>>=0),o=(n>>>=0)-(e>>>=0),a=Math.min(s,o),l=this.slice(r,i),c=t.slice(e,n),u=0;u<a;++u)if(l[u]!==c[u]){s=l[u],o=c[u];break}return s<o?-1:o<s?1:0},ae.prototype.includes=function(t,e,n){return this.indexOf(t,e,n)!==-1},ae.prototype.indexOf=function(t,e,n){return BA(this,t,e,n,!0)},ae.prototype.lastIndexOf=function(t,e,n){return BA(this,t,e,n,!1)},ae.prototype.write=function(t,e,n,r){if(e===void 0)r="utf8",n=this.length,e=0;else if(n===void 0&&typeof e=="string")r=e,n=this.length,e=0;else{if(!isFinite(e))throw new Error("Buffer.write(string, encoding, offset[, length]) is no longer supported");e|=0,isFinite(n)?(n|=0,r===void 0&&(r="utf8")):(r=n,n=void 0)}var i=this.length-e;if((n===void 0||n>i)&&(n=i),t.length>0&&(n<0||e<0)||e>this.length)throw new RangeError("Attempt to write outside buffer bounds");r||(r="utf8");for(var s=!1;;)switch(r){case"hex":return CB(this,t,e,n);case"utf8":case"utf-8":return kB(this,t,e,n);case"ascii":return DT(this,t,e,n);case"latin1":case"binary":return _B(this,t,e,n);case"base64":return TB(this,t,e,n);case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return PB(this,t,e,n);default:if(s)throw new TypeError("Unknown encoding: "+r);r=(""+r).toLowerCase(),s=!0}},ae.prototype.toJSON=function(){return{type:"Buffer",data:Array.prototype.slice.call(this._arr||this,0)}};var $A=4096;function IB(t,e,n){var r="";n=Math.min(t.length,n);for(var i=e;i<n;++i)r+=String.fromCharCode(127&t[i]);return r}function OB(t,e,n){var r="";n=Math.min(t.length,n);for(var i=e;i<n;++i)r+=String.fromCharCode(t[i]);return r}function NB(t,e,n){var r=t.length;(!e||e<0)&&(e=0),(!n||n<0||n>r)&&(n=r);for(var i="",s=e;s<n;++s)i+=BB(t[s]);return i}function MB(t,e,n){for(var r=t.slice(e,n),i="",s=0;s<r.length;s+=2)i+=String.fromCharCode(r[s]+256*r[s+1]);return i}function Rt(t,e,n){if(t%1!=0||t<0)throw new RangeError("offset is not uint");if(t+e>n)throw new RangeError("Trying to access beyond buffer length")}function Tn(t,e,n,r,i,s){if(!ki(t))throw new TypeError('"buffer" argument must be a Buffer instance');if(e>i||e<s)throw new RangeError('"value" argument is out of bounds');if(n+r>t.length)throw new RangeError("Index out of range")}function Ch(t,e,n,r){e<0&&(e=65535+e+1);for(var i=0,s=Math.min(t.length-n,2);i<s;++i)t[n+i]=(e&255<<8*(r?i:1-i))>>>8*(r?i:1-i)}function kh(t,e,n,r){e<0&&(e=4294967295+e+1);for(var i=0,s=Math.min(t.length-n,4);i<s;++i)t[n+i]=e>>>8*(r?i:3-i)&255}function UT(t,e,n,r,i,s){if(n+r>t.length)throw new RangeError("Index out of range");if(n<0)throw new RangeError("Index out of range")}function UA(t,e,n,r,i){return i||UT(t,0,n,4),OT(t,e,n,r,23,4),n+4}function FA(t,e,n,r,i){return i||UT(t,0,n,8),OT(t,e,n,r,52,8),n+8}ae.prototype.slice=function(t,e){var n,r=this.length;if((t=~~t)<0?(t+=r)<0&&(t=0):t>r&&(t=r),(e=e===void 0?r:~~e)<0?(e+=r)<0&&(e=0):e>r&&(e=r),e<t&&(e=t),ae.TYPED_ARRAY_SUPPORT)(n=this.subarray(t,e)).__proto__=ae.prototype;else{var i=e-t;n=new ae(i,void 0);for(var s=0;s<i;++s)n[s]=this[s+t]}return n},ae.prototype.readUIntLE=function(t,e,n){t|=0,e|=0,n||Rt(t,e,this.length);for(var r=this[t],i=1,s=0;++s<e&&(i*=256);)r+=this[t+s]*i;return r},ae.prototype.readUIntBE=function(t,e,n){t|=0,e|=0,n||Rt(t,e,this.length);for(var r=this[t+--e],i=1;e>0&&(i*=256);)r+=this[t+--e]*i;return r},ae.prototype.readUInt8=function(t,e){return e||Rt(t,1,this.length),this[t]},ae.prototype.readUInt16LE=function(t,e){return e||Rt(t,2,this.length),this[t]|this[t+1]<<8},ae.prototype.readUInt16BE=function(t,e){return e||Rt(t,2,this.length),this[t]<<8|this[t+1]},ae.prototype.readUInt32LE=function(t,e){return e||Rt(t,4,this.length),(this[t]|this[t+1]<<8|this[t+2]<<16)+16777216*this[t+3]},ae.prototype.readUInt32BE=function(t,e){return e||Rt(t,4,this.length),16777216*this[t]+(this[t+1]<<16|this[t+2]<<8|this[t+3])},ae.prototype.readIntLE=function(t,e,n){t|=0,e|=0,n||Rt(t,e,this.length);for(var r=this[t],i=1,s=0;++s<e&&(i*=256);)r+=this[t+s]*i;return r>=(i*=128)&&(r-=Math.pow(2,8*e)),r},ae.prototype.readIntBE=function(t,e,n){t|=0,e|=0,n||Rt(t,e,this.length);for(var r=e,i=1,s=this[t+--r];r>0&&(i*=256);)s+=this[t+--r]*i;return s>=(i*=128)&&(s-=Math.pow(2,8*e)),s},ae.prototype.readInt8=function(t,e){return e||Rt(t,1,this.length),128&this[t]?-1*(255-this[t]+1):this[t]},ae.prototype.readInt16LE=function(t,e){e||Rt(t,2,this.length);var n=this[t]|this[t+1]<<8;return 32768&n?4294901760|n:n},ae.prototype.readInt16BE=function(t,e){e||Rt(t,2,this.length);var n=this[t+1]|this[t]<<8;return 32768&n?4294901760|n:n},ae.prototype.readInt32LE=function(t,e){return e||Rt(t,4,this.length),this[t]|this[t+1]<<8|this[t+2]<<16|this[t+3]<<24},ae.prototype.readInt32BE=function(t,e){return e||Rt(t,4,this.length),this[t]<<24|this[t+1]<<16|this[t+2]<<8|this[t+3]},ae.prototype.readFloatLE=function(t,e){return e||Rt(t,4,this.length),xh(this,t,!0,23,4)},ae.prototype.readFloatBE=function(t,e){return e||Rt(t,4,this.length),xh(this,t,!1,23,4)},ae.prototype.readDoubleLE=function(t,e){return e||Rt(t,8,this.length),xh(this,t,!0,52,8)},ae.prototype.readDoubleBE=function(t,e){return e||Rt(t,8,this.length),xh(this,t,!1,52,8)},ae.prototype.writeUIntLE=function(t,e,n,r){t=+t,e|=0,n|=0,r||Tn(this,t,e,n,Math.pow(2,8*n)-1,0);var i=1,s=0;for(this[e]=255&t;++s<n&&(i*=256);)this[e+s]=t/i&255;return e+n},ae.prototype.writeUIntBE=function(t,e,n,r){t=+t,e|=0,n|=0,r||Tn(this,t,e,n,Math.pow(2,8*n)-1,0);var i=n-1,s=1;for(this[e+i]=255&t;--i>=0&&(s*=256);)this[e+i]=t/s&255;return e+n},ae.prototype.writeUInt8=function(t,e,n){return t=+t,e|=0,n||Tn(this,t,e,1,255,0),ae.TYPED_ARRAY_SUPPORT||(t=Math.floor(t)),this[e]=255&t,e+1},ae.prototype.writeUInt16LE=function(t,e,n){return t=+t,e|=0,n||Tn(this,t,e,2,65535,0),ae.TYPED_ARRAY_SUPPORT?(this[e]=255&t,this[e+1]=t>>>8):Ch(this,t,e,!0),e+2},ae.prototype.writeUInt16BE=function(t,e,n){return t=+t,e|=0,n||Tn(this,t,e,2,65535,0),ae.TYPED_ARRAY_SUPPORT?(this[e]=t>>>8,this[e+1]=255&t):Ch(this,t,e,!1),e+2},ae.prototype.writeUInt32LE=function(t,e,n){return t=+t,e|=0,n||Tn(this,t,e,4,4294967295,0),ae.TYPED_ARRAY_SUPPORT?(this[e+3]=t>>>24,this[e+2]=t>>>16,this[e+1]=t>>>8,this[e]=255&t):kh(this,t,e,!0),e+4},ae.prototype.writeUInt32BE=function(t,e,n){return t=+t,e|=0,n||Tn(this,t,e,4,4294967295,0),ae.TYPED_ARRAY_SUPPORT?(this[e]=t>>>24,this[e+1]=t>>>16,this[e+2]=t>>>8,this[e+3]=255&t):kh(this,t,e,!1),e+4},ae.prototype.writeIntLE=function(t,e,n,r){if(t=+t,e|=0,!r){var i=Math.pow(2,8*n-1);Tn(this,t,e,n,i-1,-i)}var s=0,o=1,a=0;for(this[e]=255&t;++s<n&&(o*=256);)t<0&&a===0&&this[e+s-1]!==0&&(a=1),this[e+s]=(t/o>>0)-a&255;return e+n},ae.prototype.writeIntBE=function(t,e,n,r){if(t=+t,e|=0,!r){var i=Math.pow(2,8*n-1);Tn(this,t,e,n,i-1,-i)}var s=n-1,o=1,a=0;for(this[e+s]=255&t;--s>=0&&(o*=256);)t<0&&a===0&&this[e+s+1]!==0&&(a=1),this[e+s]=(t/o>>0)-a&255;return e+n},ae.prototype.writeInt8=function(t,e,n){return t=+t,e|=0,n||Tn(this,t,e,1,127,-128),ae.TYPED_ARRAY_SUPPORT||(t=Math.floor(t)),t<0&&(t=255+t+1),this[e]=255&t,e+1},ae.prototype.writeInt16LE=function(t,e,n){return t=+t,e|=0,n||Tn(this,t,e,2,32767,-32768),ae.TYPED_ARRAY_SUPPORT?(this[e]=255&t,this[e+1]=t>>>8):Ch(this,t,e,!0),e+2},ae.prototype.writeInt16BE=function(t,e,n){return t=+t,e|=0,n||Tn(this,t,e,2,32767,-32768),ae.TYPED_ARRAY_SUPPORT?(this[e]=t>>>8,this[e+1]=255&t):Ch(this,t,e,!1),e+2},ae.prototype.writeInt32LE=function(t,e,n){return t=+t,e|=0,n||Tn(this,t,e,4,2147483647,-2147483648),ae.TYPED_ARRAY_SUPPORT?(this[e]=255&t,this[e+1]=t>>>8,this[e+2]=t>>>16,this[e+3]=t>>>24):kh(this,t,e,!0),e+4},ae.prototype.writeInt32BE=function(t,e,n){return t=+t,e|=0,n||Tn(this,t,e,4,2147483647,-2147483648),t<0&&(t=4294967295+t+1),ae.TYPED_ARRAY_SUPPORT?(this[e]=t>>>24,this[e+1]=t>>>16,this[e+2]=t>>>8,this[e+3]=255&t):kh(this,t,e,!1),e+4},ae.prototype.writeFloatLE=function(t,e,n){return UA(this,t,e,!0,n)},ae.prototype.writeFloatBE=function(t,e,n){return UA(this,t,e,!1,n)},ae.prototype.writeDoubleLE=function(t,e,n){return FA(this,t,e,!0,n)},ae.prototype.writeDoubleBE=function(t,e,n){return FA(this,t,e,!1,n)},ae.prototype.copy=function(t,e,n,r){if(n||(n=0),r||r===0||(r=this.length),e>=t.length&&(e=t.length),e||(e=0),r>0&&r<n&&(r=n),r===n||t.length===0||this.length===0)return 0;if(e<0)throw new RangeError("targetStart out of bounds");if(n<0||n>=this.length)throw new RangeError("sourceStart out of bounds");if(r<0)throw new RangeError("sourceEnd out of bounds");r>this.length&&(r=this.length),t.length-e<r-n&&(r=t.length-e+n);var i,s=r-n;if(this===t&&n<e&&e<r)for(i=s-1;i>=0;--i)t[i+e]=this[i+n];else if(s<1e3||!ae.TYPED_ARRAY_SUPPORT)for(i=0;i<s;++i)t[i+e]=this[i+n];else Uint8Array.prototype.set.call(t,this.subarray(n,n+s),e);return s},ae.prototype.fill=function(t,e,n,r){if(typeof t=="string"){if(typeof e=="string"?(r=e,e=0,n=this.length):typeof n=="string"&&(r=n,n=this.length),t.length===1){var i=t.charCodeAt(0);i<256&&(t=i)}if(r!==void 0&&typeof r!="string")throw new TypeError("encoding must be a string");if(typeof r=="string"&&!ae.isEncoding(r))throw new TypeError("Unknown encoding: "+r)}else typeof t=="number"&&(t&=255);if(e<0||this.length<e||this.length<n)throw new RangeError("Out of range index");if(n<=e)return this;var s;if(e>>>=0,n=n===void 0?this.length:n>>>0,t||(t=0),typeof t=="number")for(s=e;s<n;++s)this[s]=t;else{var o=ki(t)?t:E0(new ae(t,r).toString()),a=o.length;for(s=0;s<n-e;++s)this[s+e]=o[s%a]}return this};var LB=/[^+\/0-9A-Za-z-_]/g;function BB(t){return t<16?"0"+t.toString(16):t.toString(16)}function E0(t,e){var n;e=e||1/0;for(var r=t.length,i=null,s=[],o=0;o<r;++o){if((n=t.charCodeAt(o))>55295&&n<57344){if(!i){if(n>56319){(e-=3)>-1&&s.push(239,191,189);continue}if(o+1===r){(e-=3)>-1&&s.push(239,191,189);continue}i=n;continue}if(n<56320){(e-=3)>-1&&s.push(239,191,189),i=n;continue}n=65536+(i-55296<<10|n-56320)}else i&&(e-=3)>-1&&s.push(239,191,189);if(i=null,n<128){if((e-=1)<0)break;s.push(n)}else if(n<2048){if((e-=2)<0)break;s.push(n>>6|192,63&n|128)}else if(n<65536){if((e-=3)<0)break;s.push(n>>12|224,n>>6&63|128,63&n|128)}else{if(!(n<1114112))throw new Error("Invalid code point");if((e-=4)<0)break;s.push(n>>18|240,n>>12&63|128,n>>6&63|128,63&n|128)}}return s}function FT(t){return function(e){var n,r,i,s,o,a;gb||IT();var l=e.length;if(l%4>0)throw new Error("Invalid string. Length must be a multiple of 4");o=e[l-2]==="="?2:e[l-1]==="="?1:0,a=new bB(3*l/4-o),i=o>0?l-4:l;var c=0;for(n=0,r=0;n<i;n+=4,r+=3)s=yr[e.charCodeAt(n)]<<18|yr[e.charCodeAt(n+1)]<<12|yr[e.charCodeAt(n+2)]<<6|yr[e.charCodeAt(n+3)],a[c++]=s>>16&255,a[c++]=s>>8&255,a[c++]=255&s;return o===2?(s=yr[e.charCodeAt(n)]<<2|yr[e.charCodeAt(n+1)]>>4,a[c++]=255&s):o===1&&(s=yr[e.charCodeAt(n)]<<10|yr[e.charCodeAt(n+1)]<<4|yr[e.charCodeAt(n+2)]>>2,a[c++]=s>>8&255,a[c++]=255&s),a}(function(e){if((e=function(n){return n.trim?n.trim():n.replace(/^\s+|\s+$/g,"")}(e).replace(LB,"")).length<2)return"";for(;e.length%4!=0;)e+="=";return e}(t))}function Lg(t,e,n,r){for(var i=0;i<r&&!(i+n>=e.length||i>=t.length);++i)e[i+n]=t[i];return i}function jT(t){return t!=null&&(!!t._isBuffer||jA(t)||function(e){return typeof e.readFloatLE=="function"&&typeof e.slice=="function"&&jA(e.slice(0,0))}(t))}function jA(t){return!!t.constructor&&typeof t.constructor.isBuffer=="function"&&t.constructor.isBuffer(t)}var DB=Object.freeze({__proto__:null,Buffer:ae,INSPECT_MAX_BYTES:50,SlowBuffer:function(t){return+t!=t&&(t=0),ae.alloc(+t)},isBuffer:jT,kMaxLength:SB}),Pr=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};function Bg(t){return t&&t.__esModule&&Object.prototype.hasOwnProperty.call(t,"default")?t.default:t}function Ff(t){if(t.__esModule)return t;var e=t.default;if(typeof e=="function"){var n=function r(){return this instanceof r?Reflect.construct(e,arguments,this.constructor):e.apply(this,arguments)};n.prototype=e.prototype}else n={};return Object.defineProperty(n,"__esModule",{value:!0}),Object.keys(t).forEach(function(r){var i=Object.getOwnPropertyDescriptor(t,r);Object.defineProperty(n,r,i.get?i:{enumerable:!0,get:function(){return t[r]}})}),n}var _l={},lr={},on={};function A0(t){if(!Number.isSafeInteger(t)||t<0)throw new Error(`positive integer expected, not ${t}`)}function HT(t){if(typeof t!="boolean")throw new Error(`boolean expected, not ${t}`)}function KT(t){return t instanceof Uint8Array||t!=null&&typeof t=="object"&&t.constructor.name==="Uint8Array"}function yb(t,...e){if(!KT(t))throw new Error("Uint8Array expected");if(e.length>0&&!e.includes(t.length))throw new Error(`Uint8Array expected of length ${e}, not of length=${t.length}`)}function zT(t){if(typeof t!="function"||typeof t.create!="function")throw new Error("hash must be wrapped by utils.wrapConstructor");A0(t.outputLen),A0(t.blockLen)}function VT(t,e=!0){if(t.destroyed)throw new Error("Hash instance has been destroyed");if(e&&t.finished)throw new Error("Hash#digest() has already been called")}function GT(t,e){yb(t);const n=e.outputLen;if(t.length<n)throw new Error(`digestInto() expects output buffer of length at least ${n}`)}Object.defineProperty(on,"__esModule",{value:!0}),on.isBytes=KT,on.number=A0,on.bool=HT,on.bytes=yb,on.hash=zT,on.exists=VT,on.output=GT;const $B={number:A0,bool:HT,bytes:yb,hash:zT,exists:VT,output:GT};on.default=$B,function(t){Object.defineProperty(t,"__esModule",{value:!0}),t.wrapCipher=t.Hash=t.nextTick=t.isLE=t.createView=t.u32=t.u16=t.u8=void 0,t.bytesToHex=r,t.hexToBytes=o,t.hexToNumber=a,t.bytesToNumberBE=function(d){return a(r(d))},t.numberToBytesBE=function(d,f){return o(d.toString(16).padStart(2*f,"0"))},t.asyncLoop=async function(d,f,h){let m=Date.now();for(let g=0;g<d;g++){h(g);const w=Date.now()-m;w>=0&&w<f||(await(0,t.nextTick)(),m+=w)}},t.utf8ToBytes=l,t.bytesToUtf8=function(d){return new TextDecoder().decode(d)},t.toBytes=function(d){if(typeof d=="string")d=l(d);else{if(!(0,e.isBytes)(d))throw new Error("Uint8Array expected, got "+typeof d);d=u(d)}return d},t.concatBytes=function(...d){let f=0;for(let m=0;m<d.length;m++){const g=d[m];(0,e.bytes)(g),f+=g.length}const h=new Uint8Array(f);for(let m=0,g=0;m<d.length;m++){const w=d[m];h.set(w,g),g+=w.length}return h},t.checkOpts=function(d,f){if(f==null||typeof f!="object")throw new Error("options must be defined");return Object.assign(d,f)},t.equalBytes=function(d,f){if(d.length!==f.length)return!1;let h=0;for(let m=0;m<d.length;m++)h|=d[m]^f[m];return h===0},t.setBigUint64=c,t.u64Lengths=function(d,f){const h=new Uint8Array(16),m=(0,t.createView)(h);return c(m,0,BigInt(f?f.length:0),!0),c(m,8,BigInt(d.length),!0),h},t.isAligned32=function(d){return d.byteOffset%4==0},t.copyBytes=u,t.clean=function(...d){for(let f=0;f<d.length;f++)d[f].fill(0)};const e=on;if(t.u8=d=>new Uint8Array(d.buffer,d.byteOffset,d.byteLength),t.u16=d=>new Uint16Array(d.buffer,d.byteOffset,Math.floor(d.byteLength/2)),t.u32=d=>new Uint32Array(d.buffer,d.byteOffset,Math.floor(d.byteLength/4)),t.createView=d=>new DataView(d.buffer,d.byteOffset,d.byteLength),t.isLE=new Uint8Array(new Uint32Array([287454020]).buffer)[0]===68,!t.isLE)throw new Error("Non little-endian hardware is not supported");const n=Array.from({length:256},(d,f)=>f.toString(16).padStart(2,"0"));function r(d){(0,e.bytes)(d);let f="";for(let h=0;h<d.length;h++)f+=n[d[h]];return f}const i={_0:48,_9:57,_A:65,_F:70,_a:97,_f:102};function s(d){return d>=i._0&&d<=i._9?d-i._0:d>=i._A&&d<=i._F?d-(i._A-10):d>=i._a&&d<=i._f?d-(i._a-10):void 0}function o(d){if(typeof d!="string")throw new Error("hex string expected, got "+typeof d);const f=d.length,h=f/2;if(f%2)throw new Error("padded hex string expected, got unpadded hex of length "+f);const m=new Uint8Array(h);for(let g=0,w=0;g<h;g++,w+=2){const p=s(d.charCodeAt(w)),v=s(d.charCodeAt(w+1));if(p===void 0||v===void 0){const y=d[w]+d[w+1];throw new Error('hex string expected, got non-hex character "'+y+'" at index '+w)}m[g]=16*p+v}return m}function a(d){if(typeof d!="string")throw new Error("hex string expected, got "+typeof d);return BigInt(d===""?"0":`0x${d}`)}function l(d){if(typeof d!="string")throw new Error("string expected, got "+typeof d);return new Uint8Array(new TextEncoder().encode(d))}t.nextTick=async()=>{},t.Hash=class{};function c(d,f,h,m){if(typeof d.setBigUint64=="function")return d.setBigUint64(f,h,m);const g=BigInt(32),w=BigInt(4294967295),p=Number(h>>g&w),v=Number(h&w),y=m?4:0,C=m?0:4;d.setUint32(f+y,p,m),d.setUint32(f+C,v,m)}function u(d){return Uint8Array.from(d)}t.wrapCipher=(d,f)=>(Object.assign(f,d),f)}(lr);var ef={},It={};Object.defineProperty(It,"__esModule",{value:!0}),It.AEAD_TAG_LENGTH=It.XCHACHA20_NONCE_LENGTH=It.CURVE25519_PUBLIC_KEY_SIZE=It.ETH_PUBLIC_KEY_SIZE=It.UNCOMPRESSED_PUBLIC_KEY_SIZE=It.COMPRESSED_PUBLIC_KEY_SIZE=It.SECRET_KEY_LENGTH=void 0,It.SECRET_KEY_LENGTH=32,It.COMPRESSED_PUBLIC_KEY_SIZE=33,It.UNCOMPRESSED_PUBLIC_KEY_SIZE=65,It.ETH_PUBLIC_KEY_SIZE=64,It.CURVE25519_PUBLIC_KEY_SIZE=32,It.XCHACHA20_NONCE_LENGTH=24,It.AEAD_TAG_LENGTH=16,function(t){Object.defineProperty(t,"__esModule",{value:!0}),t.ephemeralKeySize=t.symmetricNonceLength=t.symmetricAlgorithm=t.isHkdfKeyCompressed=t.isEphemeralKeyCompressed=t.ellipticCurve=t.ECIES_CONFIG=void 0;var e=It,n=function(){this.ellipticCurve="secp256k1",this.isEphemeralKeyCompressed=!1,this.isHkdfKeyCompressed=!1,this.symmetricAlgorithm="aes-256-gcm",this.symmetricNonceLength=16};t.ECIES_CONFIG=new n,t.ellipticCurve=function(){return t.ECIES_CONFIG.ellipticCurve},t.isEphemeralKeyCompressed=function(){return t.ECIES_CONFIG.isEphemeralKeyCompressed},t.isHkdfKeyCompressed=function(){return t.ECIES_CONFIG.isHkdfKeyCompressed},t.symmetricAlgorithm=function(){return t.ECIES_CONFIG.symmetricAlgorithm},t.symmetricNonceLength=function(){return t.ECIES_CONFIG.symmetricNonceLength},t.ephemeralKeySize=function(){var r={secp256k1:t.ECIES_CONFIG.isEphemeralKeyCompressed?e.COMPRESSED_PUBLIC_KEY_SIZE:e.UNCOMPRESSED_PUBLIC_KEY_SIZE,x25519:e.CURVE25519_PUBLIC_KEY_SIZE,ed25519:e.CURVE25519_PUBLIC_KEY_SIZE};if(t.ECIES_CONFIG.ellipticCurve in r)return r[t.ECIES_CONFIG.ellipticCurve];throw new Error("Not implemented")}}(ef);var Km={},S0={},Dg={},WT={},vb={},_h={};Object.defineProperty(_h,"__esModule",{value:!0}),_h.crypto=void 0,_h.crypto=typeof globalThis=="object"&&"crypto"in globalThis?globalThis.crypto:void 0,function(t){Object.defineProperty(t,"__esModule",{value:!0}),t.gcm=t.ctr=t.cbc=t.utils=void 0,t.randomBytes=i,t.getWebcryptoSubtle=s,t.managedNonce=function(l){return(0,n.number)(l.nonceLength),(c,...u)=>({encrypt(d,...f){const{nonceLength:h}=l,m=i(h),g=l(c,m,...u).encrypt(d,...f),w=(0,r.concatBytes)(m,g);return g.fill(0),w},decrypt(d,...f){const{nonceLength:h}=l,m=d.subarray(0,h),g=d.subarray(h);return l(c,m,...u).decrypt(g,...f)}})};const e=_h,n=on,r=lr;function i(l=32){if(e.crypto&&typeof e.crypto.getRandomValues=="function")return e.crypto.getRandomValues(new Uint8Array(l));if(e.crypto&&typeof e.crypto.randomBytes=="function")return e.crypto.randomBytes(l);throw new Error("crypto.getRandomValues must be defined")}function s(){if(e.crypto&&typeof e.crypto.subtle=="object"&&e.crypto.subtle!=null)return e.crypto.subtle;throw new Error("crypto.subtle must be defined")}t.utils={async encrypt(l,c,u,d){const f=s(),h=await f.importKey("raw",l,c,!0,["encrypt"]),m=await f.encrypt(u,h,d);return new Uint8Array(m)},async decrypt(l,c,u,d){const f=s(),h=await f.importKey("raw",l,c,!0,["decrypt"]),m=await f.decrypt(u,h,d);return new Uint8Array(m)}};const o={CBC:"AES-CBC",CTR:"AES-CTR",GCM:"AES-GCM"};function a(l){return(c,u,d)=>{(0,n.bytes)(c),(0,n.bytes)(u);const f={name:l,length:8*c.length},h=function(m,g,w){if(m===o.CBC)return{name:o.CBC,iv:g};if(m===o.CTR)return{name:o.CTR,counter:g,length:64};if(m===o.GCM)return w?{name:o.GCM,iv:g,additionalData:w}:{name:o.GCM,iv:g};throw new Error("unknown aes block mode")}(l,u,d);return{encrypt:m=>((0,n.bytes)(m),t.utils.encrypt(c,f,h,m)),decrypt:m=>((0,n.bytes)(m),t.utils.decrypt(c,f,h,m))}}}t.cbc=a(o.CBC),t.ctr=a(o.CTR),t.gcm=a(o.GCM)}(vb);var qT={},Nt={},gs={},tr={};function x0(t){if(!Number.isSafeInteger(t)||t<0)throw new Error(`positive integer expected, not ${t}`)}function QT(t){if(typeof t!="boolean")throw new Error(`boolean expected, not ${t}`)}function YT(t){return t instanceof Uint8Array||t!=null&&typeof t=="object"&&t.constructor.name==="Uint8Array"}function wb(t,...e){if(!YT(t))throw new Error("Uint8Array expected");if(e.length>0&&!e.includes(t.length))throw new Error(`Uint8Array expected of length ${e}, not of length=${t.length}`)}function JT(t){if(typeof t!="function"||typeof t.create!="function")throw new Error("Hash should be wrapped by utils.wrapConstructor");x0(t.outputLen),x0(t.blockLen)}function ZT(t,e=!0){if(t.destroyed)throw new Error("Hash instance has been destroyed");if(e&&t.finished)throw new Error("Hash#digest() has already been called")}function XT(t,e){wb(t);const n=e.outputLen;if(t.length<n)throw new Error(`digestInto() expects output buffer of length at least ${n}`)}Object.defineProperty(tr,"__esModule",{value:!0}),tr.isBytes=YT,tr.number=x0,tr.bool=QT,tr.bytes=wb,tr.hash=JT,tr.exists=ZT,tr.output=XT;const UB={number:x0,bool:QT,bytes:wb,hash:JT,exists:ZT,output:XT};tr.default=UB;var Is={},Th={};Object.defineProperty(Th,"__esModule",{value:!0}),Th.crypto=void 0,Th.crypto=typeof globalThis=="object"&&"crypto"in globalThis?globalThis.crypto:void 0,function(t){Object.defineProperty(t,"__esModule",{value:!0}),t.Hash=t.nextTick=t.byteSwapIfBE=t.byteSwap=t.isLE=t.rotl=t.rotr=t.createView=t.u32=t.u8=void 0,t.isBytes=function(c){return c instanceof Uint8Array||c!=null&&typeof c=="object"&&c.constructor.name==="Uint8Array"},t.byteSwap32=function(c){for(let u=0;u<c.length;u++)c[u]=(0,t.byteSwap)(c[u])},t.bytesToHex=function(c){(0,n.bytes)(c);let u="";for(let d=0;d<c.length;d++)u+=r[c[d]];return u},t.hexToBytes=function(c){if(typeof c!="string")throw new Error("hex string expected, got "+typeof c);const u=c.length,d=u/2;if(u%2)throw new Error("padded hex string expected, got unpadded hex of length "+u);const f=new Uint8Array(d);for(let h=0,m=0;h<d;h++,m+=2){const g=s(c.charCodeAt(m)),w=s(c.charCodeAt(m+1));if(g===void 0||w===void 0){const p=c[m]+c[m+1];throw new Error('hex string expected, got non-hex character "'+p+'" at index '+m)}f[h]=16*g+w}return f},t.asyncLoop=async function(c,u,d){let f=Date.now();for(let h=0;h<c;h++){d(h);const m=Date.now()-f;m>=0&&m<u||(await(0,t.nextTick)(),f+=m)}},t.utf8ToBytes=o,t.toBytes=a,t.concatBytes=function(...c){let u=0;for(let f=0;f<c.length;f++){const h=c[f];(0,n.bytes)(h),u+=h.length}const d=new Uint8Array(u);for(let f=0,h=0;f<c.length;f++){const m=c[f];d.set(m,h),h+=m.length}return d},t.checkOpts=function(c,u){if(u!==void 0&&l.call(u)!=="[object Object]")throw new Error("Options should be object or undefined");return Object.assign(c,u)},t.wrapConstructor=function(c){const u=f=>c().update(a(f)).digest(),d=c();return u.outputLen=d.outputLen,u.blockLen=d.blockLen,u.create=()=>c(),u},t.wrapConstructorWithOpts=function(c){const u=(f,h)=>c(h).update(a(f)).digest(),d=c({});return u.outputLen=d.outputLen,u.blockLen=d.blockLen,u.create=f=>c(f),u},t.wrapXOFConstructorWithOpts=function(c){const u=(f,h)=>c(h).update(a(f)).digest(),d=c({});return u.outputLen=d.outputLen,u.blockLen=d.blockLen,u.create=f=>c(f),u},t.randomBytes=function(c=32){if(e.crypto&&typeof e.crypto.getRandomValues=="function")return e.crypto.getRandomValues(new Uint8Array(c));if(e.crypto&&typeof e.crypto.randomBytes=="function")return e.crypto.randomBytes(c);throw new Error("crypto.getRandomValues must be defined")};const e=Th,n=tr;t.u8=c=>new Uint8Array(c.buffer,c.byteOffset,c.byteLength),t.u32=c=>new Uint32Array(c.buffer,c.byteOffset,Math.floor(c.byteLength/4)),t.createView=c=>new DataView(c.buffer,c.byteOffset,c.byteLength),t.rotr=(c,u)=>c<<32-u|c>>>u,t.rotl=(c,u)=>c<<u|c>>>32-u>>>0,t.isLE=new Uint8Array(new Uint32Array([287454020]).buffer)[0]===68,t.byteSwap=c=>c<<24&4278190080|c<<8&16711680|c>>>8&65280|c>>>24&255,t.byteSwapIfBE=t.isLE?c=>c:c=>(0,t.byteSwap)(c);const r=Array.from({length:256},(c,u)=>u.toString(16).padStart(2,"0")),i={_0:48,_9:57,_A:65,_F:70,_a:97,_f:102};function s(c){return c>=i._0&&c<=i._9?c-i._0:c>=i._A&&c<=i._F?c-(i._A-10):c>=i._a&&c<=i._f?c-(i._a-10):void 0}function o(c){if(typeof c!="string")throw new Error("utf8ToBytes expected string, got "+typeof c);return new Uint8Array(new TextEncoder().encode(c))}function a(c){return typeof c=="string"&&(c=o(c)),(0,n.bytes)(c),c}t.nextTick=async()=>{},t.Hash=class{clone(){return this._cloneInto()}};const l={}.toString}(Is),Object.defineProperty(gs,"__esModule",{value:!0}),gs.HashMD=gs.Maj=gs.Chi=void 0;const zm=tr,Hu=Is;gs.Chi=(t,e,n)=>t&e^~t&n;gs.Maj=(t,e,n)=>t&e^t&n^e&n;gs.HashMD=class extends Hu.Hash{constructor(t,e,n,r){super(),this.blockLen=t,this.outputLen=e,this.padOffset=n,this.isLE=r,this.finished=!1,this.length=0,this.pos=0,this.destroyed=!1,this.buffer=new Uint8Array(t),this.view=(0,Hu.createView)(this.buffer)}update(t){(0,zm.exists)(this);const{view:e,buffer:n,blockLen:r}=this,i=(t=(0,Hu.toBytes)(t)).length;for(let s=0;s<i;){const o=Math.min(r-this.pos,i-s);if(o!==r)n.set(t.subarray(s,s+o),this.pos),this.pos+=o,s+=o,this.pos===r&&(this.process(e,0),this.pos=0);else{const a=(0,Hu.createView)(t);for(;r<=i-s;s+=r)this.process(a,s)}}return this.length+=t.length,this.roundClean(),this}digestInto(t){(0,zm.exists)(this),(0,zm.output)(t,this),this.finished=!0;const{buffer:e,view:n,blockLen:r,isLE:i}=this;let{pos:s}=this;e[s++]=128,this.buffer.subarray(s).fill(0),this.padOffset>r-s&&(this.process(n,0),s=0);for(let u=s;u<r;u++)e[u]=0;(function(u,d,f,h){if(typeof u.setBigUint64=="function")return u.setBigUint64(d,f,h);const m=BigInt(32),g=BigInt(4294967295),w=Number(f>>m&g),p=Number(f&g),v=h?4:0,y=h?0:4;u.setUint32(d+v,w,h),u.setUint32(d+y,p,h)})(n,r-8,BigInt(8*this.length),i),this.process(n,0);const o=(0,Hu.createView)(t),a=this.outputLen;if(a%4)throw new Error("_sha2: outputLen should be aligned to 32bit");const l=a/4,c=this.get();if(l>c.length)throw new Error("_sha2: outputLen bigger than state");for(let u=0;u<l;u++)o.setUint32(4*u,c[u],i)}digest(){const{buffer:t,outputLen:e}=this;this.digestInto(t);const n=t.slice(0,e);return this.destroy(),n}_cloneInto(t){t||(t=new this.constructor),t.set(...this.get());const{blockLen:e,buffer:n,length:r,finished:i,destroyed:s,pos:o}=this;return t.length=r,t.pos=o,t.finished=i,t.destroyed=s,r%e&&t.buffer.set(n),t}};var Re={};Object.defineProperty(Re,"__esModule",{value:!0}),Re.add5L=Re.add5H=Re.add4H=Re.add4L=Re.add3H=Re.add3L=Re.rotlBL=Re.rotlBH=Re.rotlSL=Re.rotlSH=Re.rotr32L=Re.rotr32H=Re.rotrBL=Re.rotrBH=Re.rotrSL=Re.rotrSH=Re.shrSL=Re.shrSH=Re.toBig=void 0,Re.fromBig=bb,Re.split=eP,Re.add=pP;const Ph=BigInt(2**32-1),ww=BigInt(32);function bb(t,e=!1){return e?{h:Number(t&Ph),l:Number(t>>ww&Ph)}:{h:0|Number(t>>ww&Ph),l:0|Number(t&Ph)}}function eP(t,e=!1){let n=new Uint32Array(t.length),r=new Uint32Array(t.length);for(let i=0;i<t.length;i++){const{h:s,l:o}=bb(t[i],e);[n[i],r[i]]=[s,o]}return[n,r]}const tP=(t,e)=>BigInt(t>>>0)<<ww|BigInt(e>>>0);Re.toBig=tP;const nP=(t,e,n)=>t>>>n;Re.shrSH=nP;const rP=(t,e,n)=>t<<32-n|e>>>n;Re.shrSL=rP;const iP=(t,e,n)=>t>>>n|e<<32-n;Re.rotrSH=iP;const sP=(t,e,n)=>t<<32-n|e>>>n;Re.rotrSL=sP;const oP=(t,e,n)=>t<<64-n|e>>>n-32;Re.rotrBH=oP;const aP=(t,e,n)=>t>>>n-32|e<<64-n;Re.rotrBL=aP;const lP=(t,e)=>e;Re.rotr32H=lP;const cP=(t,e)=>t;Re.rotr32L=cP;const uP=(t,e,n)=>t<<n|e>>>32-n;Re.rotlSH=uP;const dP=(t,e,n)=>e<<n|t>>>32-n;Re.rotlSL=dP;const fP=(t,e,n)=>e<<n-32|t>>>64-n;Re.rotlBH=fP;const hP=(t,e,n)=>t<<n-32|e>>>64-n;function pP(t,e,n,r){const i=(e>>>0)+(r>>>0);return{h:t+n+(i/2**32|0)|0,l:0|i}}Re.rotlBL=hP;const gP=(t,e,n)=>(t>>>0)+(e>>>0)+(n>>>0);Re.add3L=gP;const mP=(t,e,n,r)=>e+n+r+(t/2**32|0)|0;Re.add3H=mP;const yP=(t,e,n,r)=>(t>>>0)+(e>>>0)+(n>>>0)+(r>>>0);Re.add4L=yP;const vP=(t,e,n,r,i)=>e+n+r+i+(t/2**32|0)|0;Re.add4H=vP;const wP=(t,e,n,r,i)=>(t>>>0)+(e>>>0)+(n>>>0)+(r>>>0)+(i>>>0);Re.add5L=wP;const bP=(t,e,n,r,i,s)=>e+n+r+i+s+(t/2**32|0)|0;Re.add5H=bP;const FB={fromBig:bb,split:eP,toBig:tP,shrSH:nP,shrSL:rP,rotrSH:iP,rotrSL:sP,rotrBH:oP,rotrBL:aP,rotr32H:lP,rotr32L:cP,rotlSH:uP,rotlSL:dP,rotlBH:fP,rotlBL:hP,add:pP,add3L:gP,add3H:mP,add4L:yP,add4H:vP,add5H:bP,add5L:wP};Re.default=FB,Object.defineProperty(Nt,"__esModule",{value:!0}),Nt.sha384=Nt.sha512_256=Nt.sha512_224=Nt.sha512=Nt.SHA384=Nt.SHA512_256=Nt.SHA512_224=Nt.SHA512=void 0;const jB=gs,Me=Re,Rh=Is,[HB,KB]=Me.default.split(["0x428a2f98d728ae22","0x7137449123ef65cd","0xb5c0fbcfec4d3b2f","0xe9b5dba58189dbbc","0x3956c25bf348b538","0x59f111f1b605d019","0x923f82a4af194f9b","0xab1c5ed5da6d8118","0xd807aa98a3030242","0x12835b0145706fbe","0x243185be4ee4b28c","0x550c7dc3d5ffb4e2","0x72be5d74f27b896f","0x80deb1fe3b1696b1","0x9bdc06a725c71235","0xc19bf174cf692694","0xe49b69c19ef14ad2","0xefbe4786384f25e3","0x0fc19dc68b8cd5b5","0x240ca1cc77ac9c65","0x2de92c6f592b0275","0x4a7484aa6ea6e483","0x5cb0a9dcbd41fbd4","0x76f988da831153b5","0x983e5152ee66dfab","0xa831c66d2db43210","0xb00327c898fb213f","0xbf597fc7beef0ee4","0xc6e00bf33da88fc2","0xd5a79147930aa725","0x06ca6351e003826f","0x142929670a0e6e70","0x27b70a8546d22ffc","0x2e1b21385c26c926","0x4d2c6dfc5ac42aed","0x53380d139d95b3df","0x650a73548baf63de","0x766a0abb3c77b2a8","0x81c2c92e47edaee6","0x92722c851482353b","0xa2bfe8a14cf10364","0xa81a664bbc423001","0xc24b8b70d0f89791","0xc76c51a30654be30","0xd192e819d6ef5218","0xd69906245565a910","0xf40e35855771202a","0x106aa07032bbd1b8","0x19a4c116b8d2d0c8","0x1e376c085141ab53","0x2748774cdf8eeb99","0x34b0bcb5e19b48a8","0x391c0cb3c5c95a63","0x4ed8aa4ae3418acb","0x5b9cca4f7763e373","0x682e6ff3d6b2b8a3","0x748f82ee5defb2fc","0x78a5636f43172f60","0x84c87814a1f0ab72","0x8cc702081a6439ec","0x90befffa23631e28","0xa4506cebde82bde9","0xbef9a3f7b2c67915","0xc67178f2e372532b","0xca273eceea26619c","0xd186b8c721c0c207","0xeada7dd6cde0eb1e","0xf57d4f7fee6ed178","0x06f067aa72176fba","0x0a637dc5a2c898a6","0x113f9804bef90dae","0x1b710b35131c471b","0x28db77f523047d84","0x32caab7b40c72493","0x3c9ebe0a15c9bebc","0x431d67c49c100d4c","0x4cc5d4becb3e42b6","0x597f299cfc657e2a","0x5fcb6fab3ad6faec","0x6c44198c4a475817"].map(t=>BigInt(t))),Ds=new Uint32Array(80),$s=new Uint32Array(80);class jf extends jB.HashMD{constructor(){super(128,64,16,!1),this.Ah=1779033703,this.Al=-205731576,this.Bh=-1150833019,this.Bl=-2067093701,this.Ch=1013904242,this.Cl=-23791573,this.Dh=-1521486534,this.Dl=1595750129,this.Eh=1359893119,this.El=-1377402159,this.Fh=-1694144372,this.Fl=725511199,this.Gh=528734635,this.Gl=-79577749,this.Hh=1541459225,this.Hl=327033209}get(){const{Ah:e,Al:n,Bh:r,Bl:i,Ch:s,Cl:o,Dh:a,Dl:l,Eh:c,El:u,Fh:d,Fl:f,Gh:h,Gl:m,Hh:g,Hl:w}=this;return[e,n,r,i,s,o,a,l,c,u,d,f,h,m,g,w]}set(e,n,r,i,s,o,a,l,c,u,d,f,h,m,g,w){this.Ah=0|e,this.Al=0|n,this.Bh=0|r,this.Bl=0|i,this.Ch=0|s,this.Cl=0|o,this.Dh=0|a,this.Dl=0|l,this.Eh=0|c,this.El=0|u,this.Fh=0|d,this.Fl=0|f,this.Gh=0|h,this.Gl=0|m,this.Hh=0|g,this.Hl=0|w}process(e,n){for(let y=0;y<16;y++,n+=4)Ds[y]=e.getUint32(n),$s[y]=e.getUint32(n+=4);for(let y=16;y<80;y++){const C=0|Ds[y-15],P=0|$s[y-15],L=Me.default.rotrSH(C,P,1)^Me.default.rotrSH(C,P,8)^Me.default.shrSH(C,P,7),j=Me.default.rotrSL(C,P,1)^Me.default.rotrSL(C,P,8)^Me.default.shrSL(C,P,7),D=0|Ds[y-2],V=0|$s[y-2],F=Me.default.rotrSH(D,V,19)^Me.default.rotrBH(D,V,61)^Me.default.shrSH(D,V,6),W=Me.default.rotrSL(D,V,19)^Me.default.rotrBL(D,V,61)^Me.default.shrSL(D,V,6),K=Me.default.add4L(j,W,$s[y-7],$s[y-16]),$=Me.default.add4H(K,L,F,Ds[y-7],Ds[y-16]);Ds[y]=0|$,$s[y]=0|K}let{Ah:r,Al:i,Bh:s,Bl:o,Ch:a,Cl:l,Dh:c,Dl:u,Eh:d,El:f,Fh:h,Fl:m,Gh:g,Gl:w,Hh:p,Hl:v}=this;for(let y=0;y<80;y++){const C=Me.default.rotrSH(d,f,14)^Me.default.rotrSH(d,f,18)^Me.default.rotrBH(d,f,41),P=Me.default.rotrSL(d,f,14)^Me.default.rotrSL(d,f,18)^Me.default.rotrBL(d,f,41),L=d&h^~d&g,j=f&m^~f&w,D=Me.default.add5L(v,P,j,KB[y],$s[y]),V=Me.default.add5H(D,p,C,L,HB[y],Ds[y]),F=0|D,W=Me.default.rotrSH(r,i,28)^Me.default.rotrBH(r,i,34)^Me.default.rotrBH(r,i,39),K=Me.default.rotrSL(r,i,28)^Me.default.rotrBL(r,i,34)^Me.default.rotrBL(r,i,39),$=r&s^r&a^s&a,M=i&o^i&l^o&l;p=0|g,v=0|w,g=0|h,w=0|m,h=0|d,m=0|f,{h:d,l:f}=Me.default.add(0|c,0|u,0|V,0|F),c=0|a,u=0|l,a=0|s,l=0|o,s=0|r,o=0|i;const x=Me.default.add3L(F,K,M);r=Me.default.add3H(x,V,W,$),i=0|x}({h:r,l:i}=Me.default.add(0|this.Ah,0|this.Al,0|r,0|i)),{h:s,l:o}=Me.default.add(0|this.Bh,0|this.Bl,0|s,0|o),{h:a,l}=Me.default.add(0|this.Ch,0|this.Cl,0|a,0|l),{h:c,l:u}=Me.default.add(0|this.Dh,0|this.Dl,0|c,0|u),{h:d,l:f}=Me.default.add(0|this.Eh,0|this.El,0|d,0|f),{h,l:m}=Me.default.add(0|this.Fh,0|this.Fl,0|h,0|m),{h:g,l:w}=Me.default.add(0|this.Gh,0|this.Gl,0|g,0|w),{h:p,l:v}=Me.default.add(0|this.Hh,0|this.Hl,0|p,0|v),this.set(r,i,s,o,a,l,c,u,d,f,h,m,g,w,p,v)}roundClean(){Ds.fill(0),$s.fill(0)}destroy(){this.buffer.fill(0),this.set(0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0)}}Nt.SHA512=jf;class EP extends jf{constructor(){super(),this.Ah=-1942145080,this.Al=424955298,this.Bh=1944164710,this.Bl=-1982016298,this.Ch=502970286,this.Cl=855612546,this.Dh=1738396948,this.Dl=1479516111,this.Eh=258812777,this.El=2077511080,this.Fh=2011393907,this.Fl=79989058,this.Gh=1067287976,this.Gl=1780299464,this.Hh=286451373,this.Hl=-1848208735,this.outputLen=28}}Nt.SHA512_224=EP;class AP extends jf{constructor(){super(),this.Ah=573645204,this.Al=-64227540,this.Bh=-1621794909,this.Bl=-934517566,this.Ch=596883563,this.Cl=1867755857,this.Dh=-1774684391,this.Dl=1497426621,this.Eh=-1775747358,this.El=-1467023389,this.Fh=-1101128155,this.Fl=1401305490,this.Gh=721525244,this.Gl=746961066,this.Hh=246885852,this.Hl=-2117784414,this.outputLen=32}}Nt.SHA512_256=AP;class HA extends jf{constructor(){super(),this.Ah=-876896931,this.Al=-1056596264,this.Bh=1654270250,this.Bl=914150663,this.Ch=-1856437926,this.Cl=812702999,this.Dh=355462360,this.Dl=-150054599,this.Eh=1731405415,this.El=-4191439,this.Fh=-1900787065,this.Fl=1750603025,this.Gh=-619958771,this.Gl=1694076839,this.Hh=1203062813,this.Hl=-1090891868,this.outputLen=48}}Nt.SHA384=HA,Nt.sha512=(0,Rh.wrapConstructor)(()=>new jf),Nt.sha512_224=(0,Rh.wrapConstructor)(()=>new EP),Nt.sha512_256=(0,Rh.wrapConstructor)(()=>new AP),Nt.sha384=(0,Rh.wrapConstructor)(()=>new HA);var bw={},zl={},Ye={},Le={};Object.defineProperty(Le,"__esModule",{value:!0}),Le.notImplemented=Le.bitMask=void 0,Le.isBytes=C0,Le.abytes=k0,Le.abool=function(t,e){if(typeof e!="boolean")throw new Error(`${t} must be valid boolean, got "${e}".`)},Le.bytesToHex=Vm,Le.numberToHexUnpadded=KA,Le.hexToNumber=Gm,Le.hexToBytes=bp,Le.bytesToNumberBE=function(t){return Gm(Vm(t))},Le.bytesToNumberLE=function(t){return k0(t),Gm(Vm(Uint8Array.from(t).reverse()))},Le.numberToBytesBE=VA,Le.numberToBytesLE=function(t,e){return VA(t,e).reverse()},Le.numberToVarBytesBE=function(t){return bp(KA(t))},Le.ensureBytes=function(t,e,n){let r;if(typeof e=="string")try{r=bp(e)}catch(s){throw new Error(`${t} must be valid hex string, got "${e}". Cause: ${s}`)}else{if(!C0(e))throw new Error(`${t} must be hex string or Uint8Array`);r=Uint8Array.from(e)}const i=r.length;if(typeof n=="number"&&i!==n)throw new Error(`${t} expected ${n} bytes, got ${i}`);return r},Le.concatBytes=GA,Le.equalBytes=function(t,e){if(t.length!==e.length)return!1;let n=0;for(let r=0;r<t.length;r++)n|=t[r]^e[r];return n===0},Le.utf8ToBytes=function(t){if(typeof t!="string")throw new Error("utf8ToBytes expected string, got "+typeof t);return new Uint8Array(new TextEncoder().encode(t))},Le.inRange=WA,Le.aInRange=function(t,e,n,r){if(!WA(e,n,r))throw new Error(`expected valid ${t}: ${n} <= n < ${r}, got ${typeof e} ${e}`)},Le.bitLen=function(t){let e;for(e=0;t>Ew;t>>=wp,e+=1);return e},Le.bitGet=function(t,e){return t>>BigInt(e)&wp},Le.bitSet=function(t,e,n){return t|(n?wp:Ew)<<BigInt(e)},Le.createHmacDrbg=function(t,e,n){if(typeof t!="number"||t<2)throw new Error("hashLen must be a number");if(typeof e!="number"||e<2)throw new Error("qByteLen must be a number");if(typeof n!="function")throw new Error("hmacFn must be a function");let r=qm(t),i=qm(t),s=0;const o=()=>{r.fill(1),i.fill(0),s=0},a=(...u)=>n(i,r,...u),l=(u=qm())=>{i=a(qA([0]),u),r=a(),u.length!==0&&(i=a(qA([1]),u),r=a())},c=()=>{if(s++>=1e3)throw new Error("drbg: tried 1000 values");let u=0;const d=[];for(;u<e;){r=a();const f=r.slice();d.push(f),u+=r.length}return GA(...d)};return(u,d)=>{let f;for(o(),l(u);!(f=d(c()));)l();return o(),f}},Le.validateObject=function(t,e,n={}){const r=(i,s,o)=>{const a=GB[s];if(typeof a!="function")throw new Error(`Invalid validator "${s}", expected function`);const l=t[i];if(!(o&&l===void 0||a(l,t)))throw new Error(`Invalid param ${String(i)}=${l} (${typeof l}), expected ${s}`)};for(const[i,s]of Object.entries(e))r(i,s,!1);for(const[i,s]of Object.entries(n))r(i,s,!0);return t},Le.memoized=function(t){const e=new WeakMap;return(n,...r)=>{const i=e.get(n);if(i!==void 0)return i;const s=t(n,...r);return e.set(n,s),s}};const Ew=BigInt(0),wp=BigInt(1),zB=BigInt(2);function C0(t){return t instanceof Uint8Array||t!=null&&typeof t=="object"&&t.constructor.name==="Uint8Array"}function k0(t){if(!C0(t))throw new Error("Uint8Array expected")}const VB=Array.from({length:256},(t,e)=>e.toString(16).padStart(2,"0"));function Vm(t){k0(t);let e="";for(let n=0;n<t.length;n++)e+=VB[t[n]];return e}function KA(t){const e=t.toString(16);return 1&e.length?`0${e}`:e}function Gm(t){if(typeof t!="string")throw new Error("hex string expected, got "+typeof t);return BigInt(t===""?"0":`0x${t}`)}const ji={_0:48,_9:57,_A:65,_F:70,_a:97,_f:102};function zA(t){return t>=ji._0&&t<=ji._9?t-ji._0:t>=ji._A&&t<=ji._F?t-(ji._A-10):t>=ji._a&&t<=ji._f?t-(ji._a-10):void 0}function bp(t){if(typeof t!="string")throw new Error("hex string expected, got "+typeof t);const e=t.length,n=e/2;if(e%2)throw new Error("padded hex string expected, got unpadded hex of length "+e);const r=new Uint8Array(n);for(let i=0,s=0;i<n;i++,s+=2){const o=zA(t.charCodeAt(s)),a=zA(t.charCodeAt(s+1));if(o===void 0||a===void 0){const l=t[s]+t[s+1];throw new Error('hex string expected, got non-hex character "'+l+'" at index '+s)}r[i]=16*o+a}return r}function VA(t,e){return bp(t.toString(16).padStart(2*e,"0"))}function GA(...t){let e=0;for(let r=0;r<t.length;r++){const i=t[r];k0(i),e+=i.length}const n=new Uint8Array(e);for(let r=0,i=0;r<t.length;r++){const s=t[r];n.set(s,i),i+=s.length}return n}const Wm=t=>typeof t=="bigint"&&Ew<=t;function WA(t,e,n){return Wm(t)&&Wm(e)&&Wm(n)&&e<=t&&t<n}Le.bitMask=t=>(zB<<BigInt(t-1))-wp;const qm=t=>new Uint8Array(t),qA=t=>Uint8Array.from(t),GB={bigint:t=>typeof t=="bigint",function:t=>typeof t=="function",boolean:t=>typeof t=="boolean",string:t=>typeof t=="string",stringOrUint8Array:t=>typeof t=="string"||C0(t),isSafeInteger:t=>Number.isSafeInteger(t),array:t=>Array.isArray(t),field:(t,e)=>e.Fp.isValid(t),hash:t=>typeof t=="function"&&Number.isSafeInteger(t.outputLen)};Le.notImplemented=()=>{throw new Error("not implemented")},Object.defineProperty(Ye,"__esModule",{value:!0}),Ye.isNegativeLE=void 0,Ye.mod=qn,Ye.pow=SP,Ye.pow2=function(t,e,n){let r=t;for(;e-- >Bt;)r*=r,r%=n;return r},Ye.invert=Ih,Ye.tonelliShanks=xP,Ye.FpSqrt=JA,Ye.validateField=function(t){const e=qB.reduce((n,r)=>(n[r]="function",n),{ORDER:"bigint",MASK:"bigint",BYTES:"isSafeInteger",BITS:"isSafeInteger"});return(0,zn.validateObject)(t,e)},Ye.FpPow=ZA,Ye.FpInvertBatch=XA,Ye.FpDiv=function(t,e,n){return t.mul(e,typeof n=="bigint"?Ih(n,t.ORDER):t.inv(n))},Ye.FpLegendre=eS,Ye.FpIsSquare=function(t){const e=eS(t.ORDER);return n=>{const r=e(t,n);return t.eql(r,t.ZERO)||t.eql(r,t.ONE)}},Ye.nLength=Qm,Ye.Field=function(t,e,n=!1,r={}){if(t<=Bt)throw new Error(`Expected Field ORDER > 0, got ${t}`);const{nBitLength:i,nByteLength:s}=Qm(t,e);if(s>2048)throw new Error("Field lengths over 2048 bytes are not supported");const o=JA(t),a=Object.freeze({ORDER:t,BITS:i,BYTES:s,MASK:(0,zn.bitMask)(i),ZERO:Bt,ONE:nt,create:l=>qn(l,t),isValid:l=>{if(typeof l!="bigint")throw new Error("Invalid field element: expected bigint, got "+typeof l);return Bt<=l&&l<t},is0:l=>l===Bt,isOdd:l=>(l&nt)===nt,neg:l=>qn(-l,t),eql:(l,c)=>l===c,sqr:l=>qn(l*l,t),add:(l,c)=>qn(l+c,t),sub:(l,c)=>qn(l-c,t),mul:(l,c)=>qn(l*c,t),pow:(l,c)=>ZA(a,l,c),div:(l,c)=>qn(l*Ih(c,t),t),sqrN:l=>l*l,addN:(l,c)=>l+c,subN:(l,c)=>l-c,mulN:(l,c)=>l*c,inv:l=>Ih(l,t),sqrt:r.sqrt||(l=>o(a,l)),invertBatch:l=>XA(a,l),cmov:(l,c,u)=>u?c:l,toBytes:l=>n?(0,zn.numberToBytesLE)(l,s):(0,zn.numberToBytesBE)(l,s),fromBytes:l=>{if(l.length!==s)throw new Error(`Fp.fromBytes: expected ${s}, got ${l.length}`);return n?(0,zn.bytesToNumberLE)(l):(0,zn.bytesToNumberBE)(l)}});return Object.freeze(a)},Ye.FpSqrtOdd=function(t,e){if(!t.isOdd)throw new Error("Field doesn't have isOdd");const n=t.sqrt(e);return t.isOdd(n)?n:t.neg(n)},Ye.FpSqrtEven=function(t,e){if(!t.isOdd)throw new Error("Field doesn't have isOdd");const n=t.sqrt(e);return t.isOdd(n)?t.neg(n):n},Ye.hashToPrivateScalar=function(t,e,n=!1){t=(0,zn.ensureBytes)("privateHash",t);const r=t.length,i=Qm(e).nByteLength+8;if(i<24||r<i||r>1024)throw new Error(`hashToPrivateScalar: expected ${i}-1024 bytes of input, got ${r}`);const s=n?(0,zn.bytesToNumberLE)(t):(0,zn.bytesToNumberBE)(t);return qn(s,e-nt)+nt},Ye.getFieldBytesLength=Sw,Ye.getMinHashLength=tS,Ye.mapHashToField=function(t,e,n=!1){const r=t.length,i=Sw(e),s=tS(e);if(r<16||r<s||r>1024)throw new Error(`expected ${s}-1024 bytes of input, got ${r}`);const o=qn(n?(0,zn.bytesToNumberBE)(t):(0,zn.bytesToNumberLE)(t),e-nt)+nt;return n?(0,zn.numberToBytesLE)(o,i):(0,zn.numberToBytesBE)(o,i)};const zn=Le,Bt=BigInt(0),nt=BigInt(1),io=BigInt(2),WB=BigInt(3),Aw=BigInt(4),QA=BigInt(5),YA=BigInt(8);function qn(t,e){const n=t%e;return n>=Bt?n:e+n}function SP(t,e,n){if(n<=Bt||e<Bt)throw new Error("Expected power/modulo > 0");if(n===nt)return Bt;let r=nt;for(;e>Bt;)e&nt&&(r=r*t%n),t=t*t%n,e>>=nt;return r}function Ih(t,e){if(t===Bt||e<=Bt)throw new Error(`invert: expected positive integers, got n=${t} mod=${e}`);let n=qn(t,e),r=e,i=Bt,s=nt;for(;n!==Bt;){const o=r%n,a=i-s*(r/n);r=n,n=o,i=s,s=a}if(r!==nt)throw new Error("invert: does not exist");return qn(i,e)}function xP(t){const e=(t-nt)/io;let n,r,i;for(n=t-nt,r=0;n%io===Bt;n/=io,r++);for(i=io;i<t&&SP(i,e,t)!==t-nt;i++);if(r===1){const o=(t+nt)/Aw;return function(a,l){const c=a.pow(l,o);if(!a.eql(a.sqr(c),l))throw new Error("Cannot find square root");return c}}const s=(n+nt)/io;return function(o,a){if(o.pow(a,e)===o.neg(o.ONE))throw new Error("Cannot find square root");let l=r,c=o.pow(o.mul(o.ONE,i),n),u=o.pow(a,s),d=o.pow(a,n);for(;!o.eql(d,o.ONE);){if(o.eql(d,o.ZERO))return o.ZERO;let f=1;for(let m=o.sqr(d);f<l&&!o.eql(m,o.ONE);f++)m=o.sqr(m);const h=o.pow(c,nt<<BigInt(l-f-1));c=o.sqr(h),u=o.mul(u,h),d=o.mul(d,c),l=f}return u}}function JA(t){if(t%Aw===WB){const e=(t+nt)/Aw;return function(n,r){const i=n.pow(r,e);if(!n.eql(n.sqr(i),r))throw new Error("Cannot find square root");return i}}if(t%YA===QA){const e=(t-QA)/YA;return function(n,r){const i=n.mul(r,io),s=n.pow(i,e),o=n.mul(r,s),a=n.mul(n.mul(o,io),s),l=n.mul(o,n.sub(a,n.ONE));if(!n.eql(n.sqr(l),r))throw new Error("Cannot find square root");return l}}return xP(t)}BigInt(9),BigInt(16);Ye.isNegativeLE=(t,e)=>(qn(t,e)&nt)===nt;const qB=["create","isValid","is0","neg","inv","sqrt","sqr","eql","add","sub","mul","pow","div","addN","subN","mulN","sqrN"];function ZA(t,e,n){if(n<Bt)throw new Error("Expected power > 0");if(n===Bt)return t.ONE;if(n===nt)return e;let r=t.ONE,i=e;for(;n>Bt;)n&nt&&(r=t.mul(r,i)),i=t.sqr(i),n>>=nt;return r}function XA(t,e){const n=new Array(e.length),r=e.reduce((s,o,a)=>t.is0(o)?s:(n[a]=s,t.mul(s,o)),t.ONE),i=t.inv(r);return e.reduceRight((s,o,a)=>t.is0(o)?s:(n[a]=t.mul(s,n[a]),t.mul(s,o)),i),n}function eS(t){const e=(t-nt)/io;return(n,r)=>n.pow(r,e)}function Qm(t,e){const n=e!==void 0?e:t.toString(2).length;return{nBitLength:n,nByteLength:Math.ceil(n/8)}}function Sw(t){if(typeof t!="bigint")throw new Error("field order must be bigint");const e=t.toString(2).length;return Math.ceil(e/8)}function tS(t){const e=Sw(t);return e+Math.ceil(e/2)}Object.defineProperty(zl,"__esModule",{value:!0}),zl.wNAF=function(t,e){const n=(s,o)=>{const a=o.negate();return s?a:o},r=s=>{if(!Number.isSafeInteger(s)||s<=0||s>e)throw new Error(`Wrong window size=${s}, should be [1..${e}]`)},i=s=>(r(s),{windows:Math.ceil(e/s)+1,windowSize:2**(s-1)});return{constTimeNegate:n,unsafeLadder(s,o){let a=t.ZERO,l=s;for(;o>QB;)o&Ym&&(a=a.add(l)),l=l.double(),o>>=Ym;return a},precomputeWindow(s,o){const{windows:a,windowSize:l}=i(o),c=[];let u=s,d=u;for(let f=0;f<a;f++){d=u,c.push(d);for(let h=1;h<l;h++)d=d.add(u),c.push(d);u=d.double()}return c},wNAF(s,o,a){const{windows:l,windowSize:c}=i(s);let u=t.ZERO,d=t.BASE;const f=BigInt(2**s-1),h=2**s,m=BigInt(s);for(let g=0;g<l;g++){const w=g*c;let p=Number(a&f);a>>=m,p>c&&(p-=h,a+=Ym);const v=w,y=w+Math.abs(p)-1,C=g%2!=0,P=p<0;p===0?d=d.add(n(C,o[v])):u=u.add(n(P,o[y]))}return{p:u,f:d}},wNAFCached(s,o,a){const l=iS.get(s)||1;let c=Jm.get(s);return c||(c=this.precomputeWindow(s,l),l!==1&&Jm.set(s,a(c))),this.wNAF(l,c,o)},setWindowSize(s,o){r(o),iS.set(s,o),Jm.delete(s)}}},zl.pippenger=function(t,e,n,r){if(!Array.isArray(n)||!Array.isArray(r)||r.length!==n.length)throw new Error("arrays of points and scalars must have equal length");r.forEach((u,d)=>{if(!e.isValid(u))throw new Error(`wrong scalar at index ${d}`)}),n.forEach((u,d)=>{if(!(u instanceof t))throw new Error(`wrong point at index ${d}`)});const i=(0,rS.bitLen)(BigInt(n.length)),s=i>12?i-3:i>4?i-2:i?2:1,o=(1<<s)-1,a=new Array(o+1).fill(t.ZERO),l=Math.floor((e.BITS-1)/s)*s;let c=t.ZERO;for(let u=l;u>=0;u-=s){a.fill(t.ZERO);for(let f=0;f<r.length;f++){const h=r[f],m=Number(h>>BigInt(u)&BigInt(o));a[m]=a[m].add(n[f])}let d=t.ZERO;for(let f=a.length-1,h=t.ZERO;f>0;f--)h=h.add(a[f]),d=d.add(h);if(c=c.add(d),u!==0)for(let f=0;f<s;f++)c=c.double()}return c},zl.validateBasic=function(t){return(0,nS.validateField)(t.Fp),(0,rS.validateObject)(t,{n:"bigint",h:"bigint",Gx:"field",Gy:"field"},{nBitLength:"isSafeInteger",nByteLength:"isSafeInteger"}),Object.freeze({...(0,nS.nLength)(t.n,t.nBitLength),...t,p:t.Fp.ORDER})};const nS=Ye,rS=Le,QB=BigInt(0),Ym=BigInt(1),Jm=new WeakMap,iS=new WeakMap;Object.defineProperty(bw,"__esModule",{value:!0}),bw.twistedEdwards=function(t){const e=function($){const M=(0,Zm.validateBasic)($);return Pn.validateObject($,{hash:"function",a:"bigint",d:"bigint",randomBytes:"function"},{adjustScalarBytes:"function",domain:"function",uvRatio:"function",mapToCurve:"function"}),Object.freeze({...M})}(t),{Fp:n,n:r,prehash:i,hash:s,randomBytes:o,nByteLength:a,h:l}=e,c=Oh<<BigInt(8*a)-Rn,u=n.create,d=(0,sS.Field)(e.n,e.nBitLength),f=e.uvRatio||(($,M)=>{try{return{isValid:!0,value:n.sqrt($*n.inv(M))}}catch{return{isValid:!1,value:Mr}}}),h=e.adjustScalarBytes||($=>$),m=e.domain||(($,M,x)=>{if((0,Vn.abool)("phflag",x),M.length||x)throw new Error("Contexts/pre-hash are not supported");return $});function g($,M){Pn.aInRange("coordinate "+$,M,Mr,c)}function w($){if(!($ instanceof y))throw new Error("ExtendedPoint expected")}const p=(0,Vn.memoized)(($,M)=>{const{ex:x,ey:O,ez:B}=$,b=$.is0();M==null&&(M=b?YB:n.inv(B));const E=u(x*M),k=u(O*M),I=u(B*M);if(b)return{x:Mr,y:Rn};if(I!==Rn)throw new Error("invZ was invalid");return{x:E,y:k}}),v=(0,Vn.memoized)($=>{const{a:M,d:x}=e;if($.is0())throw new Error("bad point: ZERO");const{ex:O,ey:B,ez:b,et:E}=$,k=u(O*O),I=u(B*B),A=u(b*b),S=u(A*A),T=u(k*M);if(u(A*u(T+I))!==u(S+u(x*u(k*I))))throw new Error("bad point: equation left != right (1)");if(u(O*B)!==u(b*E))throw new Error("bad point: equation left != right (2)");return!0});class y{constructor(M,x,O,B){this.ex=M,this.ey=x,this.ez=O,this.et=B,g("x",M),g("y",x),g("z",O),g("t",B),Object.freeze(this)}get x(){return this.toAffine().x}get y(){return this.toAffine().y}static fromAffine(M){if(M instanceof y)throw new Error("extended point not allowed");const{x,y:O}=M||{};return g("x",x),g("y",O),new y(x,O,Rn,u(x*O))}static normalizeZ(M){const x=n.invertBatch(M.map(O=>O.ez));return M.map((O,B)=>O.toAffine(x[B])).map(y.fromAffine)}static msm(M,x){return(0,Zm.pippenger)(y,d,M,x)}_setWindowSize(M){L.setWindowSize(this,M)}assertValidity(){v(this)}equals(M){w(M);const{ex:x,ey:O,ez:B}=this,{ex:b,ey:E,ez:k}=M,I=u(x*k),A=u(b*B),S=u(O*k),T=u(E*B);return I===A&&S===T}is0(){return this.equals(y.ZERO)}negate(){return new y(u(-this.ex),this.ey,this.ez,u(-this.et))}double(){const{a:M}=e,{ex:x,ey:O,ez:B}=this,b=u(x*x),E=u(O*O),k=u(Oh*u(B*B)),I=u(M*b),A=x+O,S=u(u(A*A)-b-E),T=I+E,R=T-k,N=I-E,U=u(S*R),z=u(T*N),q=u(S*N),Q=u(R*T);return new y(U,z,Q,q)}add(M){w(M);const{a:x,d:O}=e,{ex:B,ey:b,ez:E,et:k}=this,{ex:I,ey:A,ez:S,et:T}=M;if(x===BigInt(-1)){const ue=u((b-B)*(A+I)),me=u((b+B)*(A-I)),he=u(me-ue);if(he===Mr)return this.double();const ke=u(E*Oh*T),Pe=u(k*Oh*S),xe=Pe+ke,Te=me+ue,Ie=Pe-ke,We=u(xe*he),Yt=u(Te*Ie),Vf=u(xe*Ie),Gf=u(he*Te);return new y(We,Yt,Gf,Vf)}const R=u(B*I),N=u(b*A),U=u(k*O*T),z=u(E*S),q=u((B+b)*(I+A)-R-N),Q=z-U,ie=z+U,oe=u(N-x*R),J=u(q*Q),le=u(ie*oe),Z=u(q*oe),te=u(Q*ie);return new y(J,le,te,Z)}subtract(M){return this.add(M.negate())}wNAF(M){return L.wNAFCached(this,M,y.normalizeZ)}multiply(M){const x=M;Pn.aInRange("scalar",x,Rn,r);const{p:O,f:B}=this.wNAF(x);return y.normalizeZ([O,B])[0]}multiplyUnsafe(M){const x=M;return Pn.aInRange("scalar",x,Mr,r),x===Mr?P:this.equals(P)||x===Rn?this:this.equals(C)?this.wNAF(x).p:L.unsafeLadder(this,x)}isSmallOrder(){return this.multiplyUnsafe(l).is0()}isTorsionFree(){return L.unsafeLadder(this,r).is0()}toAffine(M){return p(this,M)}clearCofactor(){const{h:M}=e;return M===Rn?this:this.multiplyUnsafe(M)}static fromHex(M,x=!1){const{d:O,a:B}=e,b=n.BYTES;M=(0,Vn.ensureBytes)("pointHex",M,b),(0,Vn.abool)("zip215",x);const E=M.slice(),k=M[b-1];E[b-1]=-129&k;const I=Pn.bytesToNumberLE(E),A=x?c:n.ORDER;Pn.aInRange("pointHex.y",I,Mr,A);const S=u(I*I),T=u(S-Rn),R=u(O*S-B);let{isValid:N,value:U}=f(T,R);if(!N)throw new Error("Point.fromHex: invalid y coordinate");const z=(U&Rn)===Rn,q=(128&k)!=0;if(!x&&U===Mr&&q)throw new Error("Point.fromHex: x=0 and x_0=1");return q!==z&&(U=u(-U)),y.fromAffine({x:U,y:I})}static fromPrivateKey(M){return V(M).point}toRawBytes(){const{x:M,y:x}=this.toAffine(),O=Pn.numberToBytesLE(x,n.BYTES);return O[O.length-1]|=M&Rn?128:0,O}toHex(){return Pn.bytesToHex(this.toRawBytes())}}y.BASE=new y(e.Gx,e.Gy,Rn,u(e.Gx*e.Gy)),y.ZERO=new y(Mr,Rn,Rn,Mr);const{BASE:C,ZERO:P}=y,L=(0,Zm.wNAF)(y,8*a);function j($){return(0,sS.mod)($,r)}function D($){return j(Pn.bytesToNumberLE($))}function V($){const M=a;$=(0,Vn.ensureBytes)("private key",$,M);const x=(0,Vn.ensureBytes)("hashed private key",s($),2*M),O=h(x.slice(0,M)),B=x.slice(M,2*M),b=D(O),E=C.multiply(b),k=E.toRawBytes();return{head:O,prefix:B,scalar:b,point:E,pointBytes:k}}function F($=new Uint8Array,...M){const x=Pn.concatBytes(...M);return D(s(m(x,(0,Vn.ensureBytes)("context",$),!!i)))}const W=JB;return C._setWindowSize(8),{CURVE:e,getPublicKey:function($){return V($).pointBytes},sign:function($,M,x={}){$=(0,Vn.ensureBytes)("message",$),i&&($=i($));const{prefix:O,scalar:B,pointBytes:b}=V(M),E=F(x.context,O,$),k=C.multiply(E).toRawBytes(),I=j(E+F(x.context,k,b,$)*B);Pn.aInRange("signature.s",I,Mr,r);const A=Pn.concatBytes(k,Pn.numberToBytesLE(I,n.BYTES));return(0,Vn.ensureBytes)("result",A,2*a)},verify:function($,M,x,O=W){const{context:B,zip215:b}=O,E=n.BYTES;$=(0,Vn.ensureBytes)("signature",$,2*E),M=(0,Vn.ensureBytes)("message",M),b!==void 0&&(0,Vn.abool)("zip215",b),i&&(M=i(M));const k=Pn.bytesToNumberLE($.slice(E,2*E));let I,A,S;try{I=y.fromHex(x,b),A=y.fromHex($.slice(0,E),b),S=C.multiplyUnsafe(k)}catch{return!1}if(!b&&I.isSmallOrder())return!1;const T=F(B,A.toRawBytes(),I.toRawBytes(),M);return A.add(I.multiplyUnsafe(T)).subtract(S).clearCofactor().equals(y.ZERO)},ExtendedPoint:y,utils:{getExtendedPublicKey:V,randomPrivateKey:()=>o(n.BYTES),precompute:($=8,M=y.BASE)=>(M._setWindowSize($),M.multiply(BigInt(3)),M)}}};const Zm=zl,sS=Ye,Pn=Le,Vn=Le,Mr=BigInt(0),Rn=BigInt(1),Oh=BigInt(2),YB=BigInt(8),JB={zip215:!0};var Qs={};Object.defineProperty(Qs,"__esModule",{value:!0}),Qs.expand_message_xmd=CP,Qs.expand_message_xof=kP,Qs.hash_to_field=Xm,Qs.isogenyMap=function(t,e){const n=e.map(r=>Array.from(r).reverse());return(r,i)=>{const[s,o,a,l]=n.map(c=>c.reduce((u,d)=>t.add(t.mul(u,r),d)));return r=t.div(s,o),i=t.mul(i,t.div(a,l)),{x:r,y:i}}},Qs.createHasher=function(t,e,n){if(typeof e!="function")throw new Error("mapToCurve() must be defined");return{hashToCurve(r,i){const s=Xm(r,2,{...n,DST:n.DST,...i}),o=t.fromAffine(e(s[0])),a=t.fromAffine(e(s[1])),l=o.add(a).clearCofactor();return l.assertValidity(),l},encodeToCurve(r,i){const s=Xm(r,1,{...n,DST:n.encodeDST,...i}),o=t.fromAffine(e(s[0])).clearCofactor();return o.assertValidity(),o},mapToCurve(r){if(!Array.isArray(r))throw new Error("mapToCurve: expected array of bigints");for(const s of r)if(typeof s!="bigint")throw new Error(`mapToCurve: expected array of bigints, got ${s} in array`);const i=t.fromAffine(e(r)).clearCofactor();return i.assertValidity(),i}}};const ZB=Ye,sn=Le,XB=sn.bytesToNumberBE;function Ys(t,e){if(tf(t),tf(e),t<0||t>=1<<8*e)throw new Error(`bad I2OSP call: value=${t} length=${e}`);const n=Array.from({length:e}).fill(0);for(let r=e-1;r>=0;r--)n[r]=255&t,t>>>=8;return new Uint8Array(n)}function eD(t,e){const n=new Uint8Array(t.length);for(let r=0;r<t.length;r++)n[r]=t[r]^e[r];return n}function tf(t){if(!Number.isSafeInteger(t))throw new Error("number expected")}function CP(t,e,n,r){(0,sn.abytes)(t),(0,sn.abytes)(e),tf(n),e.length>255&&(e=r((0,sn.concatBytes)((0,sn.utf8ToBytes)("H2C-OVERSIZE-DST-"),e)));const{outputLen:i,blockLen:s}=r,o=Math.ceil(n/i);if(n>65535||o>255)throw new Error("expand_message_xmd: invalid lenInBytes");const a=(0,sn.concatBytes)(e,Ys(e.length,1)),l=Ys(0,s),c=Ys(n,2),u=new Array(o),d=r((0,sn.concatBytes)(l,t,c,Ys(0,1),a));u[0]=r((0,sn.concatBytes)(d,Ys(1,1),a));for(let f=1;f<=o;f++){const h=[eD(d,u[f-1]),Ys(f+1,1),a];u[f]=r((0,sn.concatBytes)(...h))}return(0,sn.concatBytes)(...u).slice(0,n)}function kP(t,e,n,r,i){if((0,sn.abytes)(t),(0,sn.abytes)(e),tf(n),e.length>255){const s=Math.ceil(2*r/8);e=i.create({dkLen:s}).update((0,sn.utf8ToBytes)("H2C-OVERSIZE-DST-")).update(e).digest()}if(n>65535||e.length>255)throw new Error("expand_message_xof: invalid lenInBytes");return i.create({dkLen:n}).update(t).update(Ys(n,2)).update(e).update(Ys(e.length,1)).digest()}function Xm(t,e,n){(0,sn.validateObject)(n,{DST:"stringOrUint8Array",p:"bigint",m:"isSafeInteger",k:"isSafeInteger",hash:"hash"});const{p:r,k:i,m:s,hash:o,expand:a,DST:l}=n;(0,sn.abytes)(t),tf(e);const c=typeof l=="string"?(0,sn.utf8ToBytes)(l):l,u=r.toString(2).length,d=Math.ceil((u+i)/8),f=e*s*d;let h;if(a==="xmd")h=CP(t,c,f,o);else if(a==="xof")h=kP(t,c,f,i,o);else{if(a!=="_internal_pass")throw new Error('expand must be "xmd" or "xof"');h=t}const m=new Array(e);for(let g=0;g<e;g++){const w=new Array(s);for(let p=0;p<s;p++){const v=d*(p+g*s),y=h.subarray(v,v+d);w[p]=(0,ZB.mod)(XB(y),r)}m[g]=w}return m}var xw={};Object.defineProperty(xw,"__esModule",{value:!0}),xw.montgomery=function(t){const e=function(g){return(0,Us.validateObject)(g,{a:"bigint"},{montgomeryBits:"isSafeInteger",nByteLength:"isSafeInteger",adjustScalarBytes:"function",domain:"function",powPminus2:"function",Gu:"bigint"}),Object.freeze({...g})}(t),{P:n}=e,r=g=>(0,oS.mod)(g,n),i=e.montgomeryBits,s=Math.ceil(i/8),o=e.nByteLength,a=e.adjustScalarBytes||(g=>g),l=e.powPminus2||(g=>(0,oS.pow)(g,n-BigInt(2),n));function c(g,w,p){const v=r(g*(w-p));return[w=r(w-v),p=r(p+v)]}const u=(e.a-BigInt(2))/BigInt(4);function d(g){return(0,Us.numberToBytesLE)(r(g),s)}function f(g,w){const p=function(C){const P=(0,Us.ensureBytes)("u coordinate",C,s);return o===32&&(P[31]&=127),(0,Us.bytesToNumberLE)(P)}(w),v=function(C){const P=(0,Us.ensureBytes)("scalar",C),L=P.length;if(L!==s&&L!==o)throw new Error(`Expected ${s} or ${o} bytes, got ${L}`);return(0,Us.bytesToNumberLE)(a(P))}(g),y=function(C,P){(0,Us.aInRange)("u",C,bl,n),(0,Us.aInRange)("scalar",P,bl,n);const L=P,j=C;let D,V=ey,F=bl,W=C,K=ey,$=bl;for(let x=BigInt(i-1);x>=bl;x--){const O=L>>x&ey;$^=O,D=c($,V,W),V=D[0],W=D[1],D=c($,F,K),F=D[0],K=D[1],$=O;const B=V+F,b=r(B*B),E=V-F,k=r(E*E),I=b-k,A=W+K,S=r((W-K)*B),T=r(A*E),R=S+T,N=S-T;W=r(R*R),K=r(j*r(N*N)),V=r(b*k),F=r(I*(b+r(u*I)))}D=c($,V,W),V=D[0],W=D[1],D=c($,F,K),F=D[0],K=D[1];const M=l(F);return r(V*M)}(p,v);if(y===bl)throw new Error("Invalid private or public key received");return d(y)}const h=d(e.Gu);function m(g){return f(g,h)}return{scalarMult:f,scalarMultBase:m,getSharedSecret:(g,w)=>f(g,w),getPublicKey:g=>m(g),utils:{randomPrivateKey:()=>e.randomBytes(e.nByteLength)},GuBytes:h}};const oS=Ye,Us=Le,bl=BigInt(0),ey=BigInt(1);(function(t){Object.defineProperty(t,"__esModule",{value:!0}),t.hash_to_ristretto255=t.hashToRistretto255=t.RistrettoPoint=t.encodeToCurve=t.hashToCurve=t.edwardsToMontgomery=t.x25519=t.ed25519ph=t.ed25519ctx=t.ed25519=t.ED25519_TORSION_SUBGROUP=void 0,t.edwardsToMontgomeryPub=L,t.edwardsToMontgomeryPriv=function(T){const R=C.hash(T.subarray(0,32));return C.adjustScalarBytes(R).subarray(0,32)};const e=Nt,n=Is,r=bw,i=Qs,s=Ye,o=xw,a=Le,l=BigInt("57896044618658097711785492504343953926634992332820282019728792003956564819949"),c=BigInt("19681161376707505956807079304988542015446066515923890162744021073123829784752"),u=BigInt(0),d=BigInt(1),f=BigInt(2),h=BigInt(3),m=BigInt(5),g=BigInt(8);function w(T){const R=BigInt(10),N=BigInt(20),U=BigInt(40),z=BigInt(80),q=l,Q=T*T%q*T%q,ie=(0,s.pow2)(Q,f,q)*Q%q,oe=(0,s.pow2)(ie,d,q)*T%q,J=(0,s.pow2)(oe,m,q)*oe%q,le=(0,s.pow2)(J,R,q)*J%q,Z=(0,s.pow2)(le,N,q)*le%q,te=(0,s.pow2)(Z,U,q)*Z%q,ue=(0,s.pow2)(te,z,q)*te%q,me=(0,s.pow2)(ue,z,q)*te%q,he=(0,s.pow2)(me,R,q)*J%q;return{pow_p_5_8:(0,s.pow2)(he,f,q)*T%q,b2:Q}}function p(T){return T[0]&=248,T[31]&=127,T[31]|=64,T}function v(T,R){const N=l,U=(0,s.mod)(R*R*R,N),z=w(T*(0,s.mod)(U*U*R,N)).pow_p_5_8;let q=(0,s.mod)(T*U*z,N);const Q=(0,s.mod)(R*q*q,N),ie=q,oe=(0,s.mod)(q*c,N),J=Q===T,le=Q===(0,s.mod)(-T,N),Z=Q===(0,s.mod)(-T*c,N);return J&&(q=ie),(le||Z)&&(q=oe),(0,s.isNegativeLE)(q,N)&&(q=(0,s.mod)(-q,N)),{isValid:J||le,value:q}}t.ED25519_TORSION_SUBGROUP=["0100000000000000000000000000000000000000000000000000000000000000","c7176a703d4dd84fba3c0b760d10670f2a2053fa2c39ccc64ec7fd7792ac037a","0000000000000000000000000000000000000000000000000000000000000080","26e8958fc2b227b045c3f489f2ef98f0d5dfac05d3c63339b13802886d53fc05","ecffffffffffffffffffffffffffffffffffffffffffffffffffffffffffff7f","26e8958fc2b227b045c3f489f2ef98f0d5dfac05d3c63339b13802886d53fc85","0000000000000000000000000000000000000000000000000000000000000000","c7176a703d4dd84fba3c0b760d10670f2a2053fa2c39ccc64ec7fd7792ac03fa"];const y=(0,s.Field)(l,void 0,!0),C={a:BigInt(-1),d:BigInt("37095705934669439343138083508754565189542113879843219016388785533085940283555"),Fp:y,n:BigInt("7237005577332262213973186563042994240857116359379907606001950938285454250989"),h:g,Gx:BigInt("15112221349535400772501151409588531511454012693041857206046113283949847762202"),Gy:BigInt("46316835694926478169428394003475163141307993866256225615783033603165251855960"),hash:e.sha512,randomBytes:n.randomBytes,adjustScalarBytes:p,uvRatio:v};function P(T,R,N){if(R.length>255)throw new Error("Context is too big");return(0,n.concatBytes)((0,n.utf8ToBytes)("SigEd25519 no Ed25519 collisions"),new Uint8Array([N?1:0,R.length]),R,T)}function L(T){const{y:R}=t.ed25519.ExtendedPoint.fromHex(T),N=BigInt(1);return y.toBytes(y.create((N+R)*y.inv(N-R)))}t.ed25519=(0,r.twistedEdwards)(C),t.ed25519ctx=(0,r.twistedEdwards)({...C,domain:P}),t.ed25519ph=(0,r.twistedEdwards)(Object.assign({},C,{domain:P,prehash:e.sha512})),t.x25519=(0,o.montgomery)({P:l,a:BigInt(486662),montgomeryBits:255,nByteLength:32,Gu:BigInt(9),powPminus2:T=>{const R=l,{pow_p_5_8:N,b2:U}=w(T);return(0,s.mod)((0,s.pow2)(N,h,R)*U,R)},adjustScalarBytes:p,randomBytes:n.randomBytes}),t.edwardsToMontgomery=L;const j=(y.ORDER+h)/g,D=y.pow(f,j),V=y.sqrt(y.neg(y.ONE)),F=(0,s.FpSqrtEven)(y,y.neg(BigInt(486664)));function W(T){const{xMn:R,xMd:N,yMn:U,yMd:z}=function(te){const ue=(y.ORDER-m)/g,me=BigInt(486662);let he=y.sqr(te);he=y.mul(he,f);let ke=y.add(he,y.ONE),Pe=y.neg(me),xe=y.sqr(ke),Te=y.mul(xe,ke),Ie=y.mul(he,me);Ie=y.mul(Ie,Pe),Ie=y.add(Ie,xe),Ie=y.mul(Ie,Pe);let We=y.sqr(Te);xe=y.sqr(We),We=y.mul(We,Te),We=y.mul(We,Ie),xe=y.mul(xe,We);let Yt=y.pow(xe,ue);Yt=y.mul(Yt,We);let Vf=y.mul(Yt,V);xe=y.sqr(Yt),xe=y.mul(xe,Te);let Gf=y.eql(xe,Ie),Wf=y.cmov(Vf,Yt,Gf),rE=y.mul(Pe,he),_u=y.mul(Yt,te);_u=y.mul(_u,D);let xI=y.mul(_u,V),CI=y.mul(Ie,he);xe=y.sqr(_u),xe=y.mul(xe,Te);let kI=y.eql(xe,CI),_I=y.cmov(xI,_u,kI);xe=y.sqr(Wf),xe=y.mul(xe,Te);let zg=y.eql(xe,Ie),TI=y.cmov(rE,Pe,zg),Tu=y.cmov(_I,Wf,zg),PI=y.isOdd(Tu);return Tu=y.cmov(Tu,y.neg(Tu),zg!==PI),{xMn:TI,xMd:ke,yMn:Tu,yMd:d}}(T);let q=y.mul(R,z);q=y.mul(q,F);let Q=y.mul(N,U),ie=y.sub(R,N),oe=y.add(R,N),J=y.mul(Q,oe),le=y.eql(J,y.ZERO);q=y.cmov(q,y.ZERO,le),Q=y.cmov(Q,y.ONE,le),ie=y.cmov(ie,y.ONE,le),oe=y.cmov(oe,y.ONE,le);const Z=y.invertBatch([Q,oe]);return{x:y.mul(q,Z[0]),y:y.mul(ie,Z[1])}}const K=(0,i.createHasher)(t.ed25519.ExtendedPoint,T=>W(T[0]),{DST:"edwards25519_XMD:SHA-512_ELL2_RO_",encodeDST:"edwards25519_XMD:SHA-512_ELL2_NU_",p:y.ORDER,m:1,k:128,expand:"xmd",hash:e.sha512});function $(T){if(!(T instanceof S))throw new Error("RistrettoPoint expected")}t.hashToCurve=K.hashToCurve,t.encodeToCurve=K.encodeToCurve;const M=c,x=BigInt("25063068953384623474111414158702152701244531502492656460079210482610430750235"),O=BigInt("54469307008909316920995813868745141605393597292927456921205312896311721017578"),B=BigInt("1159843021668779879193775521855586647937357759715417654439879720876111806838"),b=BigInt("40440834346308536858101042469323190826248399146238708352240133220865137265952"),E=T=>v(d,T),k=BigInt("0x7fffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffff"),I=T=>t.ed25519.CURVE.Fp.create((0,a.bytesToNumberLE)(T)&k);function A(T){const{d:R}=t.ed25519.CURVE,N=t.ed25519.CURVE.Fp.ORDER,U=t.ed25519.CURVE.Fp.create,z=U(M*T*T),q=U((z+d)*B);let Q=BigInt(-1);const ie=U((Q-R*z)*U(z+R));let{isValid:oe,value:J}=v(q,ie),le=U(J*T);(0,s.isNegativeLE)(le,N)||(le=U(-le)),oe||(J=le),oe||(Q=z);const Z=U(Q*(z-d)*b-ie),te=J*J,ue=U((J+J)*ie),me=U(Z*x),he=U(d-te),ke=U(d+te);return new t.ed25519.ExtendedPoint(U(ue*ke),U(he*me),U(me*ke),U(ue*he))}class S{constructor(R){this.ep=R}static fromAffine(R){return new S(t.ed25519.ExtendedPoint.fromAffine(R))}static hashToCurve(R){R=(0,a.ensureBytes)("ristrettoHash",R,64);const N=A(I(R.slice(0,32))),U=A(I(R.slice(32,64)));return new S(N.add(U))}static fromHex(R){R=(0,a.ensureBytes)("ristrettoHex",R,32);const{a:N,d:U}=t.ed25519.CURVE,z=t.ed25519.CURVE.Fp.ORDER,q=t.ed25519.CURVE.Fp.create,Q="RistrettoPoint.fromHex: the hex is not valid encoding of RistrettoPoint",ie=I(R);if(!(0,a.equalBytes)((0,a.numberToBytesLE)(ie,32),R)||(0,s.isNegativeLE)(ie,z))throw new Error(Q);const oe=q(ie*ie),J=q(d+N*oe),le=q(d-N*oe),Z=q(J*J),te=q(le*le),ue=q(N*U*Z-te),{isValid:me,value:he}=E(q(ue*te)),ke=q(he*le),Pe=q(he*ke*ue);let xe=q((ie+ie)*ke);(0,s.isNegativeLE)(xe,z)&&(xe=q(-xe));const Te=q(J*Pe),Ie=q(xe*Te);if(!me||(0,s.isNegativeLE)(Ie,z)||Te===u)throw new Error(Q);return new S(new t.ed25519.ExtendedPoint(xe,Te,d,Ie))}toRawBytes(){let{ex:R,ey:N,ez:U,et:z}=this.ep;const q=t.ed25519.CURVE.Fp.ORDER,Q=t.ed25519.CURVE.Fp.create,ie=Q(Q(U+N)*Q(U-N)),oe=Q(R*N),J=Q(oe*oe),{value:le}=E(Q(ie*J)),Z=Q(le*ie),te=Q(le*oe),ue=Q(Z*te*z);let me;if((0,s.isNegativeLE)(z*ue,q)){let ke=Q(N*M),Pe=Q(R*M);R=ke,N=Pe,me=Q(Z*O)}else me=te;(0,s.isNegativeLE)(R*ue,q)&&(N=Q(-N));let he=Q((U-N)*me);return(0,s.isNegativeLE)(he,q)&&(he=Q(-he)),(0,a.numberToBytesLE)(he,32)}toHex(){return(0,a.bytesToHex)(this.toRawBytes())}toString(){return this.toHex()}equals(R){$(R);const{ex:N,ey:U}=this.ep,{ex:z,ey:q}=R.ep,Q=t.ed25519.CURVE.Fp.create,ie=Q(N*q)===Q(U*z),oe=Q(U*q)===Q(N*z);return ie||oe}add(R){return $(R),new S(this.ep.add(R.ep))}subtract(R){return $(R),new S(this.ep.subtract(R.ep))}multiply(R){return new S(this.ep.multiply(R))}multiplyUnsafe(R){return new S(this.ep.multiplyUnsafe(R))}double(){return new S(this.ep.double())}negate(){return new S(this.ep.negate())}}t.RistrettoPoint=(S.BASE||(S.BASE=new S(t.ed25519.ExtendedPoint.BASE)),S.ZERO||(S.ZERO=new S(t.ed25519.ExtendedPoint.ZERO)),S),t.hashToRistretto255=(T,R)=>{const N=R.DST,U=typeof N=="string"?(0,n.utf8ToBytes)(N):N,z=(0,i.expand_message_xmd)(T,U,64,e.sha512);return S.hashToCurve(z)},t.hash_to_ristretto255=t.hashToRistretto255})(qT);var _P={},ms={};Object.defineProperty(ms,"__esModule",{value:!0}),ms.sha224=ms.sha256=ms.SHA256=void 0;const ty=gs,fr=Is,tD=new Uint32Array([1116352408,1899447441,3049323471,3921009573,961987163,1508970993,2453635748,2870763221,3624381080,310598401,607225278,1426881987,1925078388,2162078206,2614888103,3248222580,3835390401,4022224774,264347078,604807628,770255983,1249150122,1555081692,1996064986,2554220882,2821834349,2952996808,3210313671,3336571891,3584528711,113926993,338241895,666307205,773529912,1294757372,1396182291,1695183700,1986661051,2177026350,2456956037,2730485921,2820302411,3259730800,3345764771,3516065817,3600352804,4094571909,275423344,430227734,506948616,659060556,883997877,958139571,1322822218,1537002063,1747873779,1955562222,2024104815,2227730452,2361852424,2428436474,2756734187,3204031479,3329325298]),Fs=new Uint32Array([1779033703,3144134277,1013904242,2773480762,1359893119,2600822924,528734635,1541459225]),js=new Uint32Array(64);class Eb extends ty.HashMD{constructor(){super(64,32,8,!1),this.A=0|Fs[0],this.B=0|Fs[1],this.C=0|Fs[2],this.D=0|Fs[3],this.E=0|Fs[4],this.F=0|Fs[5],this.G=0|Fs[6],this.H=0|Fs[7]}get(){const{A:e,B:n,C:r,D:i,E:s,F:o,G:a,H:l}=this;return[e,n,r,i,s,o,a,l]}set(e,n,r,i,s,o,a,l){this.A=0|e,this.B=0|n,this.C=0|r,this.D=0|i,this.E=0|s,this.F=0|o,this.G=0|a,this.H=0|l}process(e,n){for(let d=0;d<16;d++,n+=4)js[d]=e.getUint32(n,!1);for(let d=16;d<64;d++){const f=js[d-15],h=js[d-2],m=(0,fr.rotr)(f,7)^(0,fr.rotr)(f,18)^f>>>3,g=(0,fr.rotr)(h,17)^(0,fr.rotr)(h,19)^h>>>10;js[d]=g+js[d-7]+m+js[d-16]|0}let{A:r,B:i,C:s,D:o,E:a,F:l,G:c,H:u}=this;for(let d=0;d<64;d++){const f=u+((0,fr.rotr)(a,6)^(0,fr.rotr)(a,11)^(0,fr.rotr)(a,25))+(0,ty.Chi)(a,l,c)+tD[d]+js[d]|0,h=((0,fr.rotr)(r,2)^(0,fr.rotr)(r,13)^(0,fr.rotr)(r,22))+(0,ty.Maj)(r,i,s)|0;u=c,c=l,l=a,a=o+f|0,o=s,s=i,i=r,r=f+h|0}r=r+this.A|0,i=i+this.B|0,s=s+this.C|0,o=o+this.D|0,a=a+this.E|0,l=l+this.F|0,c=c+this.G|0,u=u+this.H|0,this.set(r,i,s,o,a,l,c,u)}roundClean(){js.fill(0)}destroy(){this.set(0,0,0,0,0,0,0,0),this.buffer.fill(0)}}ms.SHA256=Eb;class nD extends Eb{constructor(){super(),this.A=-1056596264,this.B=914150663,this.C=812702999,this.D=-150054599,this.E=-4191439,this.F=1750603025,this.G=1694076839,this.H=-1090891868,this.outputLen=28}}ms.sha256=(0,fr.wrapConstructor)(()=>new Eb),ms.sha224=(0,fr.wrapConstructor)(()=>new nD);var Ep={},Ab={};(function(t){Object.defineProperty(t,"__esModule",{value:!0}),t.hmac=t.HMAC=void 0;const e=tr,n=Is;class r extends n.Hash{constructor(s,o){super(),this.finished=!1,this.destroyed=!1,(0,e.hash)(s);const a=(0,n.toBytes)(o);if(this.iHash=s.create(),typeof this.iHash.update!="function")throw new Error("Expected instance of class which extends utils.Hash");this.blockLen=this.iHash.blockLen,this.outputLen=this.iHash.outputLen;const l=this.blockLen,c=new Uint8Array(l);c.set(a.length>l?s.create().update(a).digest():a);for(let u=0;u<c.length;u++)c[u]^=54;this.iHash.update(c),this.oHash=s.create();for(let u=0;u<c.length;u++)c[u]^=106;this.oHash.update(c),c.fill(0)}update(s){return(0,e.exists)(this),this.iHash.update(s),this}digestInto(s){(0,e.exists)(this),(0,e.bytes)(s,this.outputLen),this.finished=!0,this.iHash.digestInto(s),this.oHash.update(s),this.oHash.digestInto(s),this.destroy()}digest(){const s=new Uint8Array(this.oHash.outputLen);return this.digestInto(s),s}_cloneInto(s){s||(s=Object.create(Object.getPrototypeOf(this),{}));const{oHash:o,iHash:a,finished:l,destroyed:c,blockLen:u,outputLen:d}=this;return s.finished=l,s.destroyed=c,s.blockLen=u,s.outputLen=d,s.oHash=o._cloneInto(s.oHash),s.iHash=a._cloneInto(s.iHash),s}destroy(){this.destroyed=!0,this.oHash.destroy(),this.iHash.destroy()}}t.HMAC=r,t.hmac=(i,s,o)=>new r(i,s).update(o).digest(),t.hmac.create=(i,s)=>new r(i,s)})(Ab);var Sb={};(function(t){Object.defineProperty(t,"__esModule",{value:!0}),t.DER=void 0,t.weierstrassPoints=h,t.weierstrass=function(g){const w=function(T){const R=(0,e.validateBasic)(T);return r.validateObject(R,{hash:"hash",hmac:"function",randomBytes:"function"},{bits2int:"function",bits2int_modN:"function",lowS:"boolean"}),Object.freeze({lowS:!0,...R})}(g),{Fp:p,n:v}=w,y=p.BYTES+1,C=2*p.BYTES+1;function P(T){return n.mod(T,v)}function L(T){return n.invert(T,v)}const{ProjectivePoint:j,normPrivateKeyToScalar:D,weierstrassEquation:V,isWithinCurveOrder:F}=h({...w,toBytes(T,R,N){const U=R.toAffine(),z=p.toBytes(U.x),q=r.concatBytes;return(0,i.abool)("isCompressed",N),N?q(Uint8Array.from([R.hasEvenY()?2:3]),z):q(Uint8Array.from([4]),z,p.toBytes(U.y))},fromBytes(T){const R=T.length,N=T[0],U=T.subarray(1);if(R!==y||N!==2&&N!==3){if(R===C&&N===4)return{x:p.fromBytes(U.subarray(0,p.BYTES)),y:p.fromBytes(U.subarray(p.BYTES,2*p.BYTES))};throw new Error(`Point of length ${R} was invalid. Expected ${y} compressed bytes or ${C} uncompressed bytes`)}{const z=r.bytesToNumberBE(U);if(!r.inRange(z,c,p.ORDER))throw new Error("Point is not on curve");const q=V(z);let Q;try{Q=p.sqrt(q)}catch(ie){const oe=ie instanceof Error?": "+ie.message:"";throw new Error("Point is not on curve"+oe)}return(1&N)==1!=((Q&c)===c)&&(Q=p.neg(Q)),{x:z,y:Q}}}}),W=T=>r.bytesToHex(r.numberToBytesBE(T,w.nByteLength));function K(T){return T>v>>c}const $=(T,R,N)=>r.bytesToNumberBE(T.slice(R,N));class M{constructor(R,N,U){this.r=R,this.s=N,this.recovery=U,this.assertValidity()}static fromCompact(R){const N=w.nByteLength;return R=(0,i.ensureBytes)("compactSignature",R,2*N),new M($(R,0,N),$(R,N,2*N))}static fromDER(R){const{r:N,s:U}=t.DER.toSig((0,i.ensureBytes)("DER",R));return new M(N,U)}assertValidity(){r.aInRange("r",this.r,c,v),r.aInRange("s",this.s,c,v)}addRecoveryBit(R){return new M(this.r,this.s,R)}recoverPublicKey(R){const{r:N,s:U,recovery:z}=this,q=b((0,i.ensureBytes)("msgHash",R));if(z==null||![0,1,2,3].includes(z))throw new Error("recovery id invalid");const Q=z===2||z===3?N+w.n:N;if(Q>=p.ORDER)throw new Error("recovery id 2 or 3 invalid");const ie=1&z?"03":"02",oe=j.fromHex(ie+W(Q)),J=L(Q),le=P(-q*J),Z=P(U*J),te=j.BASE.multiplyAndAddUnsafe(oe,le,Z);if(!te)throw new Error("point at infinify");return te.assertValidity(),te}hasHighS(){return K(this.s)}normalizeS(){return this.hasHighS()?new M(this.r,P(-this.s),this.recovery):this}toDERRawBytes(){return r.hexToBytes(this.toDERHex())}toDERHex(){return t.DER.hexFromSig({r:this.r,s:this.s})}toCompactRawBytes(){return r.hexToBytes(this.toCompactHex())}toCompactHex(){return W(this.r)+W(this.s)}}const x={isValidPrivateKey(T){try{return D(T),!0}catch{return!1}},normPrivateKeyToScalar:D,randomPrivateKey:()=>{const T=n.getMinHashLength(w.n);return n.mapHashToField(w.randomBytes(T),w.n)},precompute:(T=8,R=j.BASE)=>(R._setWindowSize(T),R.multiply(BigInt(3)),R)};function O(T){const R=r.isBytes(T),N=typeof T=="string",U=(R||N)&&T.length;return R?U===y||U===C:N?U===2*y||U===2*C:T instanceof j}const B=w.bits2int||function(T){const R=r.bytesToNumberBE(T),N=8*T.length-w.nBitLength;return N>0?R>>BigInt(N):R},b=w.bits2int_modN||function(T){return P(B(T))},E=r.bitMask(w.nBitLength);function k(T){return r.aInRange(`num < 2^${w.nBitLength}`,T,l,E),r.numberToBytesBE(T,w.nByteLength)}function I(T,R,N=A){if(["recovered","canonical"].some(ue=>ue in N))throw new Error("sign() legacy options not supported");const{hash:U,randomBytes:z}=w;let{lowS:q,prehash:Q,extraEntropy:ie}=N;q==null&&(q=!0),T=(0,i.ensureBytes)("msgHash",T),s(N),Q&&(T=(0,i.ensureBytes)("prehashed msgHash",U(T)));const oe=b(T),J=D(R),le=[k(J),k(oe)];if(ie!=null&&ie!==!1){const ue=ie===!0?z(p.BYTES):ie;le.push((0,i.ensureBytes)("extraEntropy",ue))}const Z=r.concatBytes(...le),te=oe;return{seed:Z,k2sig:function(ue){const me=B(ue);if(!F(me))return;const he=L(me),ke=j.BASE.multiply(me).toAffine(),Pe=P(ke.x);if(Pe===l)return;const xe=P(he*P(te+Pe*J));if(xe===l)return;let Te=(ke.x===Pe?0:2)|Number(ke.y&c),Ie=xe;return q&&K(xe)&&(Ie=function(We){return K(We)?P(-We):We}(xe),Te^=1),new M(Pe,Ie,Te)}}}const A={lowS:w.lowS,prehash:!1},S={lowS:w.lowS,prehash:!1};return j.BASE._setWindowSize(8),{CURVE:w,getPublicKey:function(T,R=!0){return j.fromPrivateKey(T).toRawBytes(R)},getSharedSecret:function(T,R,N=!0){if(O(T))throw new Error("first arg must be private key");if(!O(R))throw new Error("second arg must be public key");return j.fromHex(R).multiply(D(T)).toRawBytes(N)},sign:function(T,R,N=A){const{seed:U,k2sig:z}=I(T,R,N),q=w;return r.createHmacDrbg(q.hash.outputLen,q.nByteLength,q.hmac)(U,z)},verify:function(T,R,N,U=S){var Pe;const z=T;if(R=(0,i.ensureBytes)("msgHash",R),N=(0,i.ensureBytes)("publicKey",N),"strict"in U)throw new Error("options.strict was renamed to lowS");s(U);const{lowS:q,prehash:Q}=U;let ie,oe;try{if(typeof z=="string"||r.isBytes(z))try{ie=M.fromDER(z)}catch(xe){if(!(xe instanceof t.DER.Err))throw xe;ie=M.fromCompact(z)}else{if(typeof z!="object"||typeof z.r!="bigint"||typeof z.s!="bigint")throw new Error("PARSE");{const{r:xe,s:Te}=z;ie=new M(xe,Te)}}oe=j.fromHex(N)}catch(xe){if(xe.message==="PARSE")throw new Error("signature must be Signature instance, Uint8Array or hex string");return!1}if(q&&ie.hasHighS())return!1;Q&&(R=w.hash(R));const{r:J,s:le}=ie,Z=b(R),te=L(le),ue=P(Z*te),me=P(J*te),he=(Pe=j.BASE.multiplyAndAddUnsafe(oe,ue,me))==null?void 0:Pe.toAffine();return he?P(he.x)===J:!1},ProjectivePoint:j,Signature:M,utils:x}},t.SWUFpSqrtRatio=m,t.mapToCurveSimpleSWU=function(g,w){if(n.validateField(g),!g.isValid(w.A)||!g.isValid(w.B)||!g.isValid(w.Z))throw new Error("mapToCurveSimpleSWU: invalid opts");const p=m(g,w.Z);if(!g.isOdd)throw new Error("Fp.isOdd is not implemented!");return v=>{let y,C,P,L,j,D,V,F;y=g.sqr(v),y=g.mul(y,w.Z),C=g.sqr(y),C=g.add(C,y),P=g.add(C,g.ONE),P=g.mul(P,w.B),L=g.cmov(w.Z,g.neg(C),!g.eql(C,g.ZERO)),L=g.mul(L,w.A),C=g.sqr(P),D=g.sqr(L),j=g.mul(D,w.A),C=g.add(C,j),C=g.mul(C,P),D=g.mul(D,L),j=g.mul(D,w.B),C=g.add(C,j),V=g.mul(y,P);const{isValid:W,value:K}=p(C,D);F=g.mul(y,v),F=g.mul(F,K),V=g.cmov(V,P,W),F=g.cmov(F,K,W);const $=g.isOdd(v)===g.isOdd(F);return F=g.cmov(g.neg(F),F,$),V=g.div(V,L),{x:V,y:F}}};const e=zl,n=Ye,r=Le,i=Le;function s(g){g.lowS!==void 0&&(0,i.abool)("lowS",g.lowS),g.prehash!==void 0&&(0,i.abool)("prehash",g.prehash)}const{bytesToNumberBE:o,hexToBytes:a}=r;t.DER={Err:class extends Error{constructor(g=""){super(g)}},_tlv:{encode:(g,w)=>{const{Err:p}=t.DER;if(g<0||g>256)throw new p("tlv.encode: wrong tag");if(1&w.length)throw new p("tlv.encode: unpadded data");const v=w.length/2,y=r.numberToHexUnpadded(v);if(y.length/2&128)throw new p("tlv.encode: long form length too big");const C=v>127?r.numberToHexUnpadded(y.length/2|128):"";return`${r.numberToHexUnpadded(g)}${C}${y}${w}`},decode(g,w){const{Err:p}=t.DER;let v=0;if(g<0||g>256)throw new p("tlv.encode: wrong tag");if(w.length<2||w[v++]!==g)throw new p("tlv.decode: wrong tlv");const y=w[v++];let C=0;if(128&y){const L=127&y;if(!L)throw new p("tlv.decode(long): indefinite length not supported");if(L>4)throw new p("tlv.decode(long): byte length is too big");const j=w.subarray(v,v+L);if(j.length!==L)throw new p("tlv.decode: length bytes not complete");if(j[0]===0)throw new p("tlv.decode(long): zero leftmost byte");for(const D of j)C=C<<8|D;if(v+=L,C<128)throw new p("tlv.decode(long): not minimal encoding")}else C=y;const P=w.subarray(v,v+C);if(P.length!==C)throw new p("tlv.decode: wrong value length");return{v:P,l:w.subarray(v+C)}}},_int:{encode(g){const{Err:w}=t.DER;if(g<l)throw new w("integer: negative integers are not allowed");let p=r.numberToHexUnpadded(g);if(8&Number.parseInt(p[0],16)&&(p="00"+p),1&p.length)throw new w("unexpected assertion");return p},decode(g){const{Err:w}=t.DER;if(128&g[0])throw new w("Invalid signature integer: negative");if(g[0]===0&&!(128&g[1]))throw new w("Invalid signature integer: unnecessary leading zero");return o(g)}},toSig(g){const{Err:w,_int:p,_tlv:v}=t.DER,y=typeof g=="string"?a(g):g;r.abytes(y);const{v:C,l:P}=v.decode(48,y);if(P.length)throw new w("Invalid signature: left bytes after parsing");const{v:L,l:j}=v.decode(2,C),{v:D,l:V}=v.decode(2,j);if(V.length)throw new w("Invalid signature: left bytes after parsing");return{r:p.decode(L),s:p.decode(D)}},hexFromSig(g){const{_tlv:w,_int:p}=t.DER,v=`${w.encode(2,p.encode(g.r))}${w.encode(2,p.encode(g.s))}`;return w.encode(48,v)}};const l=BigInt(0),c=BigInt(1),u=BigInt(2),d=BigInt(3),f=BigInt(4);function h(g){const w=function($){const M=(0,e.validateBasic)($);r.validateObject(M,{a:"field",b:"field"},{allowedPrivateKeyLengths:"array",wrapPrivateKey:"boolean",isTorsionFree:"function",clearCofactor:"function",allowInfinityPoint:"boolean",fromBytes:"function",toBytes:"function"});const{endo:x,Fp:O,a:B}=M;if(x){if(!O.eql(B,O.ZERO))throw new Error("Endomorphism can only be defined for Koblitz curves that have a=0");if(typeof x!="object"||typeof x.beta!="bigint"||typeof x.splitScalar!="function")throw new Error("Expected endomorphism with beta: bigint and splitScalar: function")}return Object.freeze({...M})}(g),{Fp:p}=w,v=n.Field(w.n,w.nBitLength),y=w.toBytes||(($,M,x)=>{const O=M.toAffine();return r.concatBytes(Uint8Array.from([4]),p.toBytes(O.x),p.toBytes(O.y))}),C=w.fromBytes||($=>{const M=$.subarray(1);return{x:p.fromBytes(M.subarray(0,p.BYTES)),y:p.fromBytes(M.subarray(p.BYTES,2*p.BYTES))}});function P($){const{a:M,b:x}=w,O=p.sqr($),B=p.mul(O,$);return p.add(p.add(B,p.mul($,M)),x)}if(!p.eql(p.sqr(w.Gy),P(w.Gx)))throw new Error("bad generator point: equation left != right");function L($){const{allowedPrivateKeyLengths:M,nByteLength:x,wrapPrivateKey:O,n:B}=w;if(M&&typeof $!="bigint"){if(r.isBytes($)&&($=r.bytesToHex($)),typeof $!="string"||!M.includes($.length))throw new Error("Invalid key");$=$.padStart(2*x,"0")}let b;try{b=typeof $=="bigint"?$:r.bytesToNumberBE((0,i.ensureBytes)("private key",$,x))}catch{throw new Error(`private key must be ${x} bytes, hex or bigint, not ${typeof $}`)}return O&&(b=n.mod(b,B)),r.aInRange("private key",b,c,B),b}function j($){if(!($ instanceof F))throw new Error("ProjectivePoint expected")}const D=(0,i.memoized)(($,M)=>{const{px:x,py:O,pz:B}=$;if(p.eql(B,p.ONE))return{x,y:O};const b=$.is0();M==null&&(M=b?p.ONE:p.inv(B));const E=p.mul(x,M),k=p.mul(O,M),I=p.mul(B,M);if(b)return{x:p.ZERO,y:p.ZERO};if(!p.eql(I,p.ONE))throw new Error("invZ was invalid");return{x:E,y:k}}),V=(0,i.memoized)($=>{if($.is0()){if(w.allowInfinityPoint&&!p.is0($.py))return;throw new Error("bad point: ZERO")}const{x:M,y:x}=$.toAffine();if(!p.isValid(M)||!p.isValid(x))throw new Error("bad point: x or y not FE");const O=p.sqr(x),B=P(M);if(!p.eql(O,B))throw new Error("bad point: equation left != right");if(!$.isTorsionFree())throw new Error("bad point: not in prime-order subgroup");return!0});class F{constructor(M,x,O){if(this.px=M,this.py=x,this.pz=O,M==null||!p.isValid(M))throw new Error("x required");if(x==null||!p.isValid(x))throw new Error("y required");if(O==null||!p.isValid(O))throw new Error("z required");Object.freeze(this)}static fromAffine(M){const{x,y:O}=M||{};if(!M||!p.isValid(x)||!p.isValid(O))throw new Error("invalid affine point");if(M instanceof F)throw new Error("projective point not allowed");const B=b=>p.eql(b,p.ZERO);return B(x)&&B(O)?F.ZERO:new F(x,O,p.ONE)}get x(){return this.toAffine().x}get y(){return this.toAffine().y}static normalizeZ(M){const x=p.invertBatch(M.map(O=>O.pz));return M.map((O,B)=>O.toAffine(x[B])).map(F.fromAffine)}static fromHex(M){const x=F.fromAffine(C((0,i.ensureBytes)("pointHex",M)));return x.assertValidity(),x}static fromPrivateKey(M){return F.BASE.multiply(L(M))}static msm(M,x){return(0,e.pippenger)(F,v,M,x)}_setWindowSize(M){K.setWindowSize(this,M)}assertValidity(){V(this)}hasEvenY(){const{y:M}=this.toAffine();if(p.isOdd)return!p.isOdd(M);throw new Error("Field doesn't support isOdd")}equals(M){j(M);const{px:x,py:O,pz:B}=this,{px:b,py:E,pz:k}=M,I=p.eql(p.mul(x,k),p.mul(b,B)),A=p.eql(p.mul(O,k),p.mul(E,B));return I&&A}negate(){return new F(this.px,p.neg(this.py),this.pz)}double(){const{a:M,b:x}=w,O=p.mul(x,d),{px:B,py:b,pz:E}=this;let k=p.ZERO,I=p.ZERO,A=p.ZERO,S=p.mul(B,B),T=p.mul(b,b),R=p.mul(E,E),N=p.mul(B,b);return N=p.add(N,N),A=p.mul(B,E),A=p.add(A,A),k=p.mul(M,A),I=p.mul(O,R),I=p.add(k,I),k=p.sub(T,I),I=p.add(T,I),I=p.mul(k,I),k=p.mul(N,k),A=p.mul(O,A),R=p.mul(M,R),N=p.sub(S,R),N=p.mul(M,N),N=p.add(N,A),A=p.add(S,S),S=p.add(A,S),S=p.add(S,R),S=p.mul(S,N),I=p.add(I,S),R=p.mul(b,E),R=p.add(R,R),S=p.mul(R,N),k=p.sub(k,S),A=p.mul(R,T),A=p.add(A,A),A=p.add(A,A),new F(k,I,A)}add(M){j(M);const{px:x,py:O,pz:B}=this,{px:b,py:E,pz:k}=M;let I=p.ZERO,A=p.ZERO,S=p.ZERO;const T=w.a,R=p.mul(w.b,d);let N=p.mul(x,b),U=p.mul(O,E),z=p.mul(B,k),q=p.add(x,O),Q=p.add(b,E);q=p.mul(q,Q),Q=p.add(N,U),q=p.sub(q,Q),Q=p.add(x,B);let ie=p.add(b,k);return Q=p.mul(Q,ie),ie=p.add(N,z),Q=p.sub(Q,ie),ie=p.add(O,B),I=p.add(E,k),ie=p.mul(ie,I),I=p.add(U,z),ie=p.sub(ie,I),S=p.mul(T,Q),I=p.mul(R,z),S=p.add(I,S),I=p.sub(U,S),S=p.add(U,S),A=p.mul(I,S),U=p.add(N,N),U=p.add(U,N),z=p.mul(T,z),Q=p.mul(R,Q),U=p.add(U,z),z=p.sub(N,z),z=p.mul(T,z),Q=p.add(Q,z),N=p.mul(U,Q),A=p.add(A,N),N=p.mul(ie,Q),I=p.mul(q,I),I=p.sub(I,N),N=p.mul(q,U),S=p.mul(ie,S),S=p.add(S,N),new F(I,A,S)}subtract(M){return this.add(M.negate())}is0(){return this.equals(F.ZERO)}wNAF(M){return K.wNAFCached(this,M,F.normalizeZ)}multiplyUnsafe(M){r.aInRange("scalar",M,l,w.n);const x=F.ZERO;if(M===l)return x;if(M===c)return this;const{endo:O}=w;if(!O)return K.unsafeLadder(this,M);let{k1neg:B,k1:b,k2neg:E,k2:k}=O.splitScalar(M),I=x,A=x,S=this;for(;b>l||k>l;)b&c&&(I=I.add(S)),k&c&&(A=A.add(S)),S=S.double(),b>>=c,k>>=c;return B&&(I=I.negate()),E&&(A=A.negate()),A=new F(p.mul(A.px,O.beta),A.py,A.pz),I.add(A)}multiply(M){const{endo:x,n:O}=w;let B,b;if(r.aInRange("scalar",M,c,O),x){const{k1neg:E,k1:k,k2neg:I,k2:A}=x.splitScalar(M);let{p:S,f:T}=this.wNAF(k),{p:R,f:N}=this.wNAF(A);S=K.constTimeNegate(E,S),R=K.constTimeNegate(I,R),R=new F(p.mul(R.px,x.beta),R.py,R.pz),B=S.add(R),b=T.add(N)}else{const{p:E,f:k}=this.wNAF(M);B=E,b=k}return F.normalizeZ([B,b])[0]}multiplyAndAddUnsafe(M,x,O){const B=F.BASE,b=(k,I)=>I!==l&&I!==c&&k.equals(B)?k.multiply(I):k.multiplyUnsafe(I),E=b(this,x).add(b(M,O));return E.is0()?void 0:E}toAffine(M){return D(this,M)}isTorsionFree(){const{h:M,isTorsionFree:x}=w;if(M===c)return!0;if(x)return x(F,this);throw new Error("isTorsionFree() has not been declared for the elliptic curve")}clearCofactor(){const{h:M,clearCofactor:x}=w;return M===c?this:x?x(F,this):this.multiplyUnsafe(w.h)}toRawBytes(M=!0){return(0,i.abool)("isCompressed",M),this.assertValidity(),y(F,this,M)}toHex(M=!0){return(0,i.abool)("isCompressed",M),r.bytesToHex(this.toRawBytes(M))}}F.BASE=new F(w.Gx,w.Gy,p.ONE),F.ZERO=new F(p.ZERO,p.ONE,p.ZERO);const W=w.nBitLength,K=(0,e.wNAF)(F,w.endo?Math.ceil(W/2):W);return{CURVE:w,ProjectivePoint:F,normPrivateKeyToScalar:L,weierstrassEquation:P,isWithinCurveOrder:function($){return r.inRange($,c,w.n)}}}function m(g,w){const p=g.ORDER;let v=l;for(let $=p-c;$%u===l;$/=u)v+=c;const y=v,C=u<<y-c-c,P=C*u,L=(p-c)/P,j=(L-c)/u,D=P-c,V=C,F=g.pow(w,L),W=g.pow(w,(L+c)/u);let K=($,M)=>{let x=F,O=g.pow(M,D),B=g.sqr(O);B=g.mul(B,M);let b=g.mul($,B);b=g.pow(b,j),b=g.mul(b,O),O=g.mul(b,M),B=g.mul(b,$);let E=g.mul(B,O);b=g.pow(E,V);let k=g.eql(b,g.ONE);O=g.mul(B,W),b=g.mul(E,x),B=g.cmov(O,B,k),E=g.cmov(b,E,k);for(let I=y;I>c;I--){let A=I-u;A=u<<A-c;let S=g.pow(E,A);const T=g.eql(S,g.ONE);O=g.mul(B,x),x=g.mul(x,x),S=g.mul(E,x),B=g.cmov(O,B,T),E=g.cmov(S,E,T)}return{isValid:k,value:B}};if(g.ORDER%f===d){const $=(g.ORDER-d)/f,M=g.sqrt(g.neg(w));K=(x,O)=>{let B=g.sqr(O);const b=g.mul(x,O);B=g.mul(B,b);let E=g.pow(B,$);E=g.mul(E,b);const k=g.mul(E,M),I=g.mul(g.sqr(E),O),A=g.eql(I,x);return{isValid:A,value:g.cmov(k,E,A)}}}return K}})(Sb),Object.defineProperty(Ep,"__esModule",{value:!0}),Ep.getHash=lS,Ep.createCurve=function(t,e){const n=r=>(0,iD.weierstrass)({...t,...lS(r)});return Object.freeze({...n(e),create:n})};const rD=Ab,aS=Is,iD=Sb;function lS(t){return{hash:t,hmac:(e,...n)=>(0,rD.hmac)(t,e,(0,aS.concatBytes)(...n)),randomBytes:aS.randomBytes}}(function(t){Object.defineProperty(t,"__esModule",{value:!0}),t.encodeToCurve=t.hashToCurve=t.schnorr=t.secp256k1=void 0;const e=ms,n=Is,r=Ep,i=Qs,s=Ye,o=Le,a=Sb,l=BigInt("0xfffffffffffffffffffffffffffffffffffffffffffffffffffffffefffffc2f"),c=BigInt("0xfffffffffffffffffffffffffffffffebaaedce6af48a03bbfd25e8cd0364141"),u=BigInt(1),d=BigInt(2),f=(b,E)=>(b+E/d)/E;function h(b){const E=l,k=BigInt(3),I=BigInt(6),A=BigInt(11),S=BigInt(22),T=BigInt(23),R=BigInt(44),N=BigInt(88),U=b*b*b%E,z=U*U*b%E,q=(0,s.pow2)(z,k,E)*z%E,Q=(0,s.pow2)(q,k,E)*z%E,ie=(0,s.pow2)(Q,d,E)*U%E,oe=(0,s.pow2)(ie,A,E)*ie%E,J=(0,s.pow2)(oe,S,E)*oe%E,le=(0,s.pow2)(J,R,E)*J%E,Z=(0,s.pow2)(le,N,E)*le%E,te=(0,s.pow2)(Z,R,E)*J%E,ue=(0,s.pow2)(te,k,E)*z%E,me=(0,s.pow2)(ue,T,E)*oe%E,he=(0,s.pow2)(me,I,E)*U%E,ke=(0,s.pow2)(he,d,E);if(!m.eql(m.sqr(ke),b))throw new Error("Cannot find square root");return ke}const m=(0,s.Field)(l,void 0,void 0,{sqrt:h});t.secp256k1=(0,r.createCurve)({a:BigInt(0),b:BigInt(7),Fp:m,n:c,Gx:BigInt("55066263022277343669578718895168534326250603453777594175500187360389116729240"),Gy:BigInt("32670510020758816978083085130507043184471273380659243275938904335757337482424"),h:BigInt(1),lowS:!0,endo:{beta:BigInt("0x7ae96a2b657c07106e64479eac3434e99cf0497512f58995c1396c28719501ee"),splitScalar:b=>{const E=c,k=BigInt("0x3086d221a7d46bcde86c90e49284eb15"),I=-u*BigInt("0xe4437ed6010e88286f547fa90abfe4c3"),A=BigInt("0x114ca50f7a8e2f3f657c1108d9d44cfd8"),S=k,T=BigInt("0x100000000000000000000000000000000"),R=f(S*b,E),N=f(-I*b,E);let U=(0,s.mod)(b-R*k-N*A,E),z=(0,s.mod)(-R*I-N*S,E);const q=U>T,Q=z>T;if(q&&(U=E-U),Q&&(z=E-z),U>T||z>T)throw new Error("splitScalar: Endomorphism failed, k="+b);return{k1neg:q,k1:U,k2neg:Q,k2:z}}}},e.sha256);const g=BigInt(0),w={};function p(b,...E){let k=w[b];if(k===void 0){const I=(0,e.sha256)(Uint8Array.from(b,A=>A.charCodeAt(0)));k=(0,o.concatBytes)(I,I),w[b]=k}return(0,e.sha256)((0,o.concatBytes)(k,...E))}const v=b=>b.toRawBytes(!0).slice(1),y=b=>(0,o.numberToBytesBE)(b,32),C=b=>(0,s.mod)(b,l),P=b=>(0,s.mod)(b,c),L=t.secp256k1.ProjectivePoint,j=(b,E,k)=>L.BASE.multiplyAndAddUnsafe(b,E,k);function D(b){let E=t.secp256k1.utils.normPrivateKeyToScalar(b),k=L.fromPrivateKey(E);return{scalar:k.hasEvenY()?E:P(-E),bytes:v(k)}}function V(b){(0,o.aInRange)("x",b,u,l);const E=C(b*b);let k=h(C(E*b+BigInt(7)));k%d!==g&&(k=C(-k));const I=new L(b,k,u);return I.assertValidity(),I}const F=o.bytesToNumberBE;function W(...b){return P(F(p("BIP0340/challenge",...b)))}function K(b){return D(b).bytes}function $(b,E,k=(0,n.randomBytes)(32)){const I=(0,o.ensureBytes)("message",b),{bytes:A,scalar:S}=D(E),T=(0,o.ensureBytes)("auxRand",k,32),R=y(S^F(p("BIP0340/aux",T))),N=p("BIP0340/nonce",R,A,I),U=P(F(N));if(U===g)throw new Error("sign failed: k is zero");const{bytes:z,scalar:q}=D(U),Q=W(z,A,I),ie=new Uint8Array(64);if(ie.set(z,0),ie.set(y(P(q+Q*S)),32),!M(ie,I,A))throw new Error("sign: Invalid signature produced");return ie}function M(b,E,k){const I=(0,o.ensureBytes)("signature",b,64),A=(0,o.ensureBytes)("message",E),S=(0,o.ensureBytes)("publicKey",k,32);try{const T=V(F(S)),R=F(I.subarray(0,32));if(!(0,o.inRange)(R,u,l))return!1;const N=F(I.subarray(32,64));if(!(0,o.inRange)(N,u,c))return!1;const U=W(y(R),v(T),A),z=j(T,N,P(-U));return!(!z||!z.hasEvenY()||z.toAffine().x!==R)}catch{return!1}}t.schnorr={getPublicKey:K,sign:$,verify:M,utils:{randomPrivateKey:t.secp256k1.utils.randomPrivateKey,lift_x:V,pointToBytes:v,numberToBytesBE:o.numberToBytesBE,bytesToNumberBE:o.bytesToNumberBE,taggedHash:p,mod:s.mod}};const x=(0,i.isogenyMap)(m,[["0x8e38e38e38e38e38e38e38e38e38e38e38e38e38e38e38e38e38e38daaaaa8c7","0x7d3d4c80bc321d5b9f315cea7fd44c5d595d2fc0bf63b92dfff1044f17c6581","0x534c328d23f234e6e2a413deca25caece4506144037c40314ecbd0b53d9dd262","0x8e38e38e38e38e38e38e38e38e38e38e38e38e38e38e38e38e38e38daaaaa88c"],["0xd35771193d94918a9ca34ccbb7b640dd86cd409542f8487d9fe6b745781eb49b","0xedadc6f64383dc1df7c4b2d51b54225406d36b641f5e41bbc52a56612a8c6d14","0x0000000000000000000000000000000000000000000000000000000000000001"],["0x4bda12f684bda12f684bda12f684bda12f684bda12f684bda12f684b8e38e23c","0xc75e0c32d5cb7c0fa9d0a54b12a0a6d5647ab046d686da6fdffc90fc201d71a3","0x29a6194691f91a73715209ef6512e576722830a201be2018a765e85a9ecee931","0x2f684bda12f684bda12f684bda12f684bda12f684bda12f684bda12f38e38d84"],["0xfffffffffffffffffffffffffffffffffffffffffffffffffffffffefffff93b","0x7a06534bb8bdb49fd5e9e6632722c2989467c1bfc8e8d978dfb425d2685c2573","0x6484aa716545ca2cf3a70c3fa8fe337e0a3d21162f0d6299a7bf8192bfd2a76f","0x0000000000000000000000000000000000000000000000000000000000000001"]].map(b=>b.map(E=>BigInt(E)))),O=(0,a.mapToCurveSimpleSWU)(m,{A:BigInt("0x3f8731abdd661adca08a5558f0f5d272e953d363cb6f0e5d405447c01a444533"),B:BigInt("1771"),Z:m.create(BigInt("-11"))}),B=(0,i.createHasher)(t.secp256k1.ProjectivePoint,b=>{const{x:E,y:k}=O(m.create(b[0]));return x(E,k)},{DST:"secp256k1_XMD:SHA-256_SSWU_RO_",encodeDST:"secp256k1_XMD:SHA-256_SSWU_NU_",p:m.ORDER,m:1,k:128,expand:"xmd",hash:e.sha256});t.hashToCurve=B.hashToCurve,t.encodeToCurve=B.encodeToCurve})(_P);var Cw={};(function(t){Object.defineProperty(t,"__esModule",{value:!0}),t.decodeHex=t.remove0x=void 0;var e=lr;t.remove0x=function(n){return n.startsWith("0x")||n.startsWith("0X")?n.slice(2):n},t.decodeHex=function(n){return(0,e.hexToBytes)((0,t.remove0x)(n))}})(Cw),function(t){Object.defineProperty(t,"__esModule",{value:!0}),t.hexToPublicKey=t.convertPublicKeyFormat=t.getSharedPoint=t.getPublicKey=t.isValidPrivateKey=t.getValidSecret=void 0;var e=vb,n=qT,r=_P,i=ef,s=It,o=Cw;t.getValidSecret=function(){var u;do u=(0,e.randomBytes)(s.SECRET_KEY_LENGTH);while(!(0,t.isValidPrivateKey)(u));return u},t.isValidPrivateKey=function(u){return a((0,i.ellipticCurve)(),function(d){return d.utils.isValidPrivateKey(u)},function(){return!0},function(){return!0})},t.getPublicKey=function(u){return a((0,i.ellipticCurve)(),function(d){return d.getPublicKey(u)},function(d){return d.getPublicKey(u)},function(d){return d.getPublicKey(u)})},t.getSharedPoint=function(u,d,f){return a((0,i.ellipticCurve)(),function(h){return h.getSharedSecret(u,d,f)},function(h){return h.getSharedSecret(u,d)},function(h){return c(h,u,d)})},t.convertPublicKeyFormat=function(u,d){return a((0,i.ellipticCurve)(),function(f){return f.getSharedSecret(BigInt(1),u,d)},function(){return u},function(){return u})};function a(u,d,f,h){if(u==="secp256k1")return d(r.secp256k1);if(u==="x25519")return f(n.x25519);if(u==="ed25519")return h(n.ed25519);throw new Error("Not implemented")}t.hexToPublicKey=function(u){var d=(0,o.decodeHex)(u);return a((0,i.ellipticCurve)(),function(){return l(d)},function(){return d},function(){return d})};var l=function(u){if(u.length===s.ETH_PUBLIC_KEY_SIZE){var d=new Uint8Array(1+u.length);return d.set([4]),d.set(u,1),d}return u},c=function(u,d,f){var h=u.utils.getExtendedPublicKey(d).scalar;return u.ExtendedPoint.fromHex(f).multiply(h).toRawBytes()}}(WT);var TP={},Vl={};Object.defineProperty(Vl,"__esModule",{value:!0}),Vl.hkdf=void 0,Vl.extract=RP,Vl.expand=IP;const kw=tr,cS=Is,PP=Ab;function RP(t,e,n){return(0,kw.hash)(t),n===void 0&&(n=new Uint8Array(t.outputLen)),(0,PP.hmac)(t,(0,cS.toBytes)(n),(0,cS.toBytes)(e))}const ny=new Uint8Array([0]),uS=new Uint8Array;function IP(t,e,n,r=32){if((0,kw.hash)(t),(0,kw.number)(r),r>255*t.outputLen)throw new Error("Length should be <= 255*HashLen");const i=Math.ceil(r/t.outputLen);n===void 0&&(n=uS);const s=new Uint8Array(i*t.outputLen),o=PP.hmac.create(t,e),a=o._cloneInto(),l=new Uint8Array(o.outputLen);for(let c=0;c<i;c++)ny[0]=c+1,a.update(c===0?uS:l).update(n).update(ny).digestInto(l),s.set(l,t.outputLen*c),o._cloneInto(a);return o.destroy(),a.destroy(),l.fill(0),ny.fill(0),s.slice(0,r)}Vl.hkdf=(t,e,n,r,i)=>IP(t,RP(t,e,n),r,i),function(t){Object.defineProperty(t,"__esModule",{value:!0}),t.getSharedKey=t.deriveKey=void 0;var e=lr,n=Vl,r=ms;t.deriveKey=function(i,s,o){return(0,n.hkdf)(r.sha256,i,s,o,32)},t.getSharedKey=function(){for(var i=[],s=0;s<arguments.length;s++)i[s]=arguments[s];return(0,t.deriveKey)(e.concatBytes.apply(void 0,i))}}(TP);var dS={},uc={},pt={},Ea={};Object.defineProperty(Ea,"__esModule",{value:!0}),Ea.polyval=Ea.ghash=void 0,Ea._toGHASHKey=OP;const Aa=on,yn=lr,Qi=16,xb=new Uint8Array(16),_i=(0,yn.u32)(xb),Sr=t=>(t>>>0&255)<<24|(t>>>8&255)<<16|(t>>>16&255)<<8|t>>>24&255|0;function OP(t){t.reverse();const e=1&t[15];let n=0;for(let r=0;r<t.length;r++){const i=t[r];t[r]=i>>>1|n,n=(1&i)<<7}return t[0]^=225&-e,t}class NP{constructor(e,n){this.blockLen=Qi,this.outputLen=Qi,this.s0=0,this.s1=0,this.s2=0,this.s3=0,this.finished=!1,e=(0,yn.toBytes)(e),(0,Aa.bytes)(e,16);const r=(0,yn.createView)(e);let i=r.getUint32(0,!1),s=r.getUint32(4,!1),o=r.getUint32(8,!1),a=r.getUint32(12,!1);const l=[];for(let p=0;p<128;p++)l.push({s0:Sr(i),s1:Sr(s),s2:Sr(o),s3:Sr(a)}),{s0:i,s1:s,s2:o,s3:a}={s3:(d=o)<<31|(f=a)>>>1,s2:(u=s)<<31|d>>>1,s1:(c=i)<<31|u>>>1,s0:c>>>1^225<<24&-(1&f)};var c,u,d,f;const h=(p=>p>65536?8:p>1024?4:2)(n||1024);if(![1,2,4,8].includes(h))throw new Error(`ghash: wrong window size=${h}, should be 2, 4 or 8`);this.W=h;const m=128/h,g=this.windowSize=2**h,w=[];for(let p=0;p<m;p++)for(let v=0;v<g;v++){let y=0,C=0,P=0,L=0;for(let j=0;j<h;j++){if(!(v>>>h-j-1&1))continue;const{s0:D,s1:V,s2:F,s3:W}=l[h*p+j];y^=D,C^=V,P^=F,L^=W}w.push({s0:y,s1:C,s2:P,s3:L})}this.t=w}_updateBlock(e,n,r,i){e^=this.s0,n^=this.s1,r^=this.s2,i^=this.s3;const{W:s,t:o,windowSize:a}=this;let l=0,c=0,u=0,d=0;const f=(1<<s)-1;let h=0;for(const m of[e,n,r,i])for(let g=0;g<4;g++){const w=m>>>8*g&255;for(let p=8/s-1;p>=0;p--){const v=w>>>s*p&f,{s0:y,s1:C,s2:P,s3:L}=o[h*a+v];l^=y,c^=C,u^=P,d^=L,h+=1}}this.s0=l,this.s1=c,this.s2=u,this.s3=d}update(e){e=(0,yn.toBytes)(e),(0,Aa.exists)(this);const n=(0,yn.u32)(e),r=Math.floor(e.length/Qi),i=e.length%Qi;for(let s=0;s<r;s++)this._updateBlock(n[4*s+0],n[4*s+1],n[4*s+2],n[4*s+3]);return i&&(xb.set(e.subarray(r*Qi)),this._updateBlock(_i[0],_i[1],_i[2],_i[3]),(0,yn.clean)(_i)),this}destroy(){const{t:e}=this;for(const n of e)n.s0=0,n.s1=0,n.s2=0,n.s3=0}digestInto(e){(0,Aa.exists)(this),(0,Aa.output)(e,this),this.finished=!0;const{s0:n,s1:r,s2:i,s3:s}=this,o=(0,yn.u32)(e);return o[0]=n,o[1]=r,o[2]=i,o[3]=s,e}digest(){const e=new Uint8Array(Qi);return this.digestInto(e),this.destroy(),e}}class sD extends NP{constructor(e,n){e=(0,yn.toBytes)(e);const r=OP((0,yn.copyBytes)(e));super(r,n),(0,yn.clean)(r)}update(e){e=(0,yn.toBytes)(e),(0,Aa.exists)(this);const n=(0,yn.u32)(e),r=e.length%Qi,i=Math.floor(e.length/Qi);for(let s=0;s<i;s++)this._updateBlock(Sr(n[4*s+3]),Sr(n[4*s+2]),Sr(n[4*s+1]),Sr(n[4*s+0]));return r&&(xb.set(e.subarray(i*Qi)),this._updateBlock(Sr(_i[3]),Sr(_i[2]),Sr(_i[1]),Sr(_i[0])),(0,yn.clean)(_i)),this}digestInto(e){(0,Aa.exists)(this),(0,Aa.output)(e,this),this.finished=!0;const{s0:n,s1:r,s2:i,s3:s}=this,o=(0,yn.u32)(e);return o[0]=n,o[1]=r,o[2]=i,o[3]=s,e.reverse()}}function fS(t){const e=(r,i)=>t(i,r.length).update((0,yn.toBytes)(r)).digest(),n=t(new Uint8Array(16),0);return e.outputLen=n.outputLen,e.blockLen=n.blockLen,e.create=(r,i)=>t(r,i),e}Ea.ghash=fS((t,e)=>new NP(t,e)),Ea.polyval=fS((t,e)=>new sD(t,e)),Object.defineProperty(pt,"__esModule",{value:!0}),pt.unsafe=pt.aeskwp=pt.aeskw=pt.siv=pt.gcm=pt.cfb=pt.cbc=pt.ecb=pt.ctr=void 0,pt.expandKeyLE=Zr,pt.expandKeyDecLE=nf;const He=on,_w=Ea,fe=lr,Hn=16,Nh=new Uint8Array(Hn),oD=283;function Cb(t){return t<<1^oD&-(t>>7)}function Gl(t,e){let n=0;for(;e>0;e>>=1)n^=t&-(1&e),t=Cb(t);return n}const Tw=(()=>{const t=new Uint8Array(256);for(let n=0,r=1;n<256;n++,r^=Cb(r))t[n]=r;const e=new Uint8Array(256);e[0]=99;for(let n=0;n<255;n++){let r=t[255-n];r|=r<<8,e[t[n]]=255&(r^r>>4^r>>5^r>>6^r>>7^99)}return(0,fe.clean)(t),e})(),aD=Tw.map((t,e)=>Tw.indexOf(e)),lD=t=>t<<24|t>>>8,ry=t=>t<<8|t>>>24,_0=t=>t<<24&4278190080|t<<8&16711680|t>>>8&65280|t>>>24&255;function MP(t,e){if(t.length!==256)throw new Error("Wrong sbox length");const n=new Uint32Array(256).map((c,u)=>e(t[u])),r=n.map(ry),i=r.map(ry),s=i.map(ry),o=new Uint32Array(65536),a=new Uint32Array(65536),l=new Uint16Array(65536);for(let c=0;c<256;c++)for(let u=0;u<256;u++){const d=256*c+u;o[d]=n[c]^r[u],a[d]=i[c]^s[u],l[d]=t[c]<<8|t[u]}return{sbox:t,sbox2:l,T0:n,T1:r,T2:i,T3:s,T01:o,T23:a}}const kb=MP(Tw,t=>Gl(t,3)<<24|t<<16|t<<8|Gl(t,2)),LP=MP(aD,t=>Gl(t,11)<<24|Gl(t,13)<<16|Gl(t,9)<<8|Gl(t,14)),cD=(()=>{const t=new Uint8Array(16);for(let e=0,n=1;e<16;e++,n=Cb(n))t[e]=n;return t})();function Zr(t){(0,He.bytes)(t);const e=t.length;if(![16,24,32].includes(e))throw new Error(`aes: wrong key size: should be 16, 24 or 32, got: ${e}`);const{sbox2:n}=kb,r=[];(0,fe.isAligned32)(t)||r.push(t=(0,fe.copyBytes)(t));const i=(0,fe.u32)(t),s=i.length,o=l=>Ri(n,l,l,l,l),a=new Uint32Array(e+28);a.set(i);for(let l=s;l<a.length;l++){let c=a[l-1];l%s==0?c=o(lD(c))^cD[l/s-1]:s>6&&l%s==4&&(c=o(c)),a[l]=a[l-s]^c}return(0,fe.clean)(...r),a}function nf(t){const e=Zr(t),n=e.slice(),r=e.length,{sbox2:i}=kb,{T0:s,T1:o,T2:a,T3:l}=LP;for(let c=0;c<r;c+=4)for(let u=0;u<4;u++)n[c+u]=e[r-c-4+u];(0,fe.clean)(e);for(let c=4;c<r-4;c++){const u=n[c],d=Ri(i,u,u,u,u);n[c]=s[255&d]^o[d>>>8&255]^a[d>>>16&255]^l[d>>>24]}return n}function ko(t,e,n,r,i,s){return t[n<<8&65280|r>>>8&255]^e[i>>>8&65280|s>>>24&255]}function Ri(t,e,n,r,i){return t[255&e|65280&n]|t[r>>>16&255|i>>>16&65280]<<16}function vn(t,e,n,r,i){const{sbox2:s,T01:o,T23:a}=kb;let l=0;e^=t[l++],n^=t[l++],r^=t[l++],i^=t[l++];const c=t.length/4-2;for(let u=0;u<c;u++){const d=t[l++]^ko(o,a,e,n,r,i),f=t[l++]^ko(o,a,n,r,i,e),h=t[l++]^ko(o,a,r,i,e,n),m=t[l++]^ko(o,a,i,e,n,r);e=d,n=f,r=h,i=m}return{s0:t[l++]^Ri(s,e,n,r,i),s1:t[l++]^Ri(s,n,r,i,e),s2:t[l++]^Ri(s,r,i,e,n),s3:t[l++]^Ri(s,i,e,n,r)}}function rf(t,e,n,r,i){const{sbox2:s,T01:o,T23:a}=LP;let l=0;e^=t[l++],n^=t[l++],r^=t[l++],i^=t[l++];const c=t.length/4-2;for(let u=0;u<c;u++){const d=t[l++]^ko(o,a,e,i,r,n),f=t[l++]^ko(o,a,n,e,i,r),h=t[l++]^ko(o,a,r,n,e,i),m=t[l++]^ko(o,a,i,r,n,e);e=d,n=f,r=h,i=m}return{s0:t[l++]^Ri(s,e,i,r,n),s1:t[l++]^Ri(s,n,e,i,r),s2:t[l++]^Ri(s,r,n,e,i),s3:t[l++]^Ri(s,i,r,n,e)}}function dc(t,e){if(e===void 0)return new Uint8Array(t);if((0,He.bytes)(e),e.length<t)throw new Error(`aes: wrong destination length, expected at least ${t}, got: ${e.length}`);if(!(0,fe.isAligned32)(e))throw new Error("unaligned dst");return e}function BP(t,e,n,r){(0,He.bytes)(e,Hn),(0,He.bytes)(n);const i=n.length;r=dc(i,r);const s=e,o=(0,fe.u32)(s);let{s0:a,s1:l,s2:c,s3:u}=vn(t,o[0],o[1],o[2],o[3]);const d=(0,fe.u32)(n),f=(0,fe.u32)(r);for(let m=0;m+4<=d.length;m+=4){f[m+0]=d[m+0]^a,f[m+1]=d[m+1]^l,f[m+2]=d[m+2]^c,f[m+3]=d[m+3]^u;let g=1;for(let w=s.length-1;w>=0;w--)g=g+(255&s[w])|0,s[w]=255&g,g>>>=8;({s0:a,s1:l,s2:c,s3:u}=vn(t,o[0],o[1],o[2],o[3]))}const h=Hn*Math.floor(d.length/4);if(h<i){const m=new Uint32Array([a,l,c,u]),g=(0,fe.u8)(m);for(let w=h,p=0;w<i;w++,p++)r[w]=n[w]^g[p];(0,fe.clean)(m)}return r}function Wl(t,e,n,r,i){(0,He.bytes)(n,Hn),(0,He.bytes)(r),i=dc(r.length,i);const s=n,o=(0,fe.u32)(s),a=(0,fe.createView)(s),l=(0,fe.u32)(r),c=(0,fe.u32)(i),u=e?0:12,d=r.length;let f=a.getUint32(u,e),{s0:h,s1:m,s2:g,s3:w}=vn(t,o[0],o[1],o[2],o[3]);for(let v=0;v+4<=l.length;v+=4)c[v+0]=l[v+0]^h,c[v+1]=l[v+1]^m,c[v+2]=l[v+2]^g,c[v+3]=l[v+3]^w,f=f+1>>>0,a.setUint32(u,f,e),{s0:h,s1:m,s2:g,s3:w}=vn(t,o[0],o[1],o[2],o[3]);const p=Hn*Math.floor(l.length/4);if(p<d){const v=new Uint32Array([h,m,g,w]),y=(0,fe.u8)(v);for(let C=p,P=0;C<d;C++,P++)i[C]=r[C]^y[P];(0,fe.clean)(v)}return i}function hS(t){if((0,He.bytes)(t),t.length%Hn!=0)throw new Error("aes/(cbc-ecb).decrypt ciphertext should consist of blocks with size 16")}function pS(t,e,n){(0,He.bytes)(t);let r=t.length;const i=r%Hn;if(!e&&i!==0)throw new Error("aec/(cbc-ecb): unpadded plaintext with disabled padding");(0,fe.isAligned32)(t)||(t=(0,fe.copyBytes)(t));const s=(0,fe.u32)(t);if(e){let a=Hn-i;a||(a=Hn),r+=a}const o=dc(r,n);return{b:s,o:(0,fe.u32)(o),out:o}}function gS(t,e){if(!e)return t;const n=t.length;if(!n)throw new Error("aes/pcks5: empty ciphertext not allowed");const r=t[n-1];if(r<=0||r>16)throw new Error("aes/pcks5: wrong padding");const i=t.subarray(0,-r);for(let s=0;s<r;s++)if(t[n-s-1]!==r)throw new Error("aes/pcks5: wrong padding");return i}function mS(t){const e=new Uint8Array(16),n=(0,fe.u32)(e);e.set(t);const r=Hn-t.length;for(let i=Hn-r;i<Hn;i++)e[i]=r;return n}function DP(t,e,n,r,i){const s=i==null?0:i.length,o=t.create(n,r.length+s);i&&o.update(i),o.update(r);const a=new Uint8Array(16),l=(0,fe.createView)(a);i&&(0,fe.setBigUint64)(l,0,BigInt(8*s),e),(0,fe.setBigUint64)(l,8,BigInt(8*r.length),e),o.update(a);const c=o.digest();return(0,fe.clean)(a),c}pt.ctr=(0,fe.wrapCipher)({blockSize:16,nonceLength:16},function(t,e){function n(r,i){if((0,He.bytes)(r),i!==void 0&&((0,He.bytes)(i),!(0,fe.isAligned32)(i)))throw new Error("unaligned destination");const s=Zr(t),o=(0,fe.copyBytes)(e),a=[s,o];(0,fe.isAligned32)(r)||a.push(r=(0,fe.copyBytes)(r));const l=BP(s,o,r,i);return(0,fe.clean)(...a),l}return(0,He.bytes)(t),(0,He.bytes)(e,Hn),{encrypt:(r,i)=>n(r,i),decrypt:(r,i)=>n(r,i)}}),pt.ecb=(0,fe.wrapCipher)({blockSize:16},function(t,e={}){(0,He.bytes)(t);const n=!e.disablePadding;return{encrypt(r,i){const{b:s,o,out:a}=pS(r,n,i),l=Zr(t);let c=0;for(;c+4<=s.length;){const{s0:u,s1:d,s2:f,s3:h}=vn(l,s[c+0],s[c+1],s[c+2],s[c+3]);o[c++]=u,o[c++]=d,o[c++]=f,o[c++]=h}if(n){const u=mS(r.subarray(4*c)),{s0:d,s1:f,s2:h,s3:m}=vn(l,u[0],u[1],u[2],u[3]);o[c++]=d,o[c++]=f,o[c++]=h,o[c++]=m}return(0,fe.clean)(l),a},decrypt(r,i){hS(r);const s=nf(t),o=dc(r.length,i),a=[s];(0,fe.isAligned32)(r)||a.push(r=(0,fe.copyBytes)(r));const l=(0,fe.u32)(r),c=(0,fe.u32)(o);for(let u=0;u+4<=l.length;){const{s0:d,s1:f,s2:h,s3:m}=rf(s,l[u+0],l[u+1],l[u+2],l[u+3]);c[u++]=d,c[u++]=f,c[u++]=h,c[u++]=m}return(0,fe.clean)(...a),gS(o,n)}}}),pt.cbc=(0,fe.wrapCipher)({blockSize:16,nonceLength:16},function(t,e,n={}){(0,He.bytes)(t),(0,He.bytes)(e,16);const r=!n.disablePadding;return{encrypt(i,s){const o=Zr(t),{b:a,o:l,out:c}=pS(i,r,s);let u=e;const d=[o];(0,fe.isAligned32)(u)||d.push(u=(0,fe.copyBytes)(u));const f=(0,fe.u32)(u);let h=f[0],m=f[1],g=f[2],w=f[3],p=0;for(;p+4<=a.length;)h^=a[p+0],m^=a[p+1],g^=a[p+2],w^=a[p+3],{s0:h,s1:m,s2:g,s3:w}=vn(o,h,m,g,w),l[p++]=h,l[p++]=m,l[p++]=g,l[p++]=w;if(r){const v=mS(i.subarray(4*p));h^=v[0],m^=v[1],g^=v[2],w^=v[3],{s0:h,s1:m,s2:g,s3:w}=vn(o,h,m,g,w),l[p++]=h,l[p++]=m,l[p++]=g,l[p++]=w}return(0,fe.clean)(...d),c},decrypt(i,s){hS(i);const o=nf(t);let a=e;const l=[o];(0,fe.isAligned32)(a)||l.push(a=(0,fe.copyBytes)(a));const c=(0,fe.u32)(a),u=dc(i.length,s);(0,fe.isAligned32)(i)||l.push(i=(0,fe.copyBytes)(i));const d=(0,fe.u32)(i),f=(0,fe.u32)(u);let h=c[0],m=c[1],g=c[2],w=c[3];for(let p=0;p+4<=d.length;){const v=h,y=m,C=g,P=w;h=d[p+0],m=d[p+1],g=d[p+2],w=d[p+3];const{s0:L,s1:j,s2:D,s3:V}=rf(o,h,m,g,w);f[p++]=L^v,f[p++]=j^y,f[p++]=D^C,f[p++]=V^P}return(0,fe.clean)(...l),gS(u,r)}}}),pt.cfb=(0,fe.wrapCipher)({blockSize:16,nonceLength:16},function(t,e){function n(r,i,s){(0,He.bytes)(r);const o=r.length;s=dc(o,s);const a=Zr(t);let l=e;const c=[a];(0,fe.isAligned32)(l)||c.push(l=(0,fe.copyBytes)(l)),(0,fe.isAligned32)(r)||c.push(r=(0,fe.copyBytes)(r));const u=(0,fe.u32)(r),d=(0,fe.u32)(s),f=i?d:u,h=(0,fe.u32)(l);let m=h[0],g=h[1],w=h[2],p=h[3];for(let y=0;y+4<=u.length;){const{s0:C,s1:P,s2:L,s3:j}=vn(a,m,g,w,p);d[y+0]=u[y+0]^C,d[y+1]=u[y+1]^P,d[y+2]=u[y+2]^L,d[y+3]=u[y+3]^j,m=f[y++],g=f[y++],w=f[y++],p=f[y++]}const v=Hn*Math.floor(u.length/4);if(v<o){({s0:m,s1:g,s2:w,s3:p}=vn(a,m,g,w,p));const y=(0,fe.u8)(new Uint32Array([m,g,w,p]));for(let C=v,P=0;C<o;C++,P++)s[C]=r[C]^y[P];(0,fe.clean)(y)}return(0,fe.clean)(...c),s}return(0,He.bytes)(t),(0,He.bytes)(e,16),{encrypt:(r,i)=>n(r,!0,i),decrypt:(r,i)=>n(r,!1,i)}}),pt.gcm=(0,fe.wrapCipher)({blockSize:16,nonceLength:12,tagLength:16},function(t,e,n){if((0,He.bytes)(t),(0,He.bytes)(e),n!==void 0&&(0,He.bytes)(n),e.length<8)throw new Error("aes/gcm: invalid nonce length");const r=16;function i(o,a,l){const c=DP(_w.ghash,!1,o,l,n);for(let u=0;u<a.length;u++)c[u]^=a[u];return c}function s(){const o=Zr(t),a=Nh.slice(),l=Nh.slice();if(Wl(o,!1,l,l,a),e.length===12)l.set(e);else{const c=Nh.slice(),u=(0,fe.createView)(c);(0,fe.setBigUint64)(u,8,BigInt(8*e.length),!1);const d=_w.ghash.create(a).update(e).update(c);d.digestInto(l),d.destroy()}return{xk:o,authKey:a,counter:l,tagMask:Wl(o,!1,l,Nh)}}return{encrypt(o){(0,He.bytes)(o);const{xk:a,authKey:l,counter:c,tagMask:u}=s(),d=new Uint8Array(o.length+r),f=[a,l,c,u];(0,fe.isAligned32)(o)||f.push(o=(0,fe.copyBytes)(o)),Wl(a,!1,c,o,d);const h=i(l,u,d.subarray(0,d.length-r));return f.push(h),d.set(h,o.length),(0,fe.clean)(...f),d},decrypt(o){if((0,He.bytes)(o),o.length<r)throw new Error("aes/gcm: ciphertext less than tagLen (16)");const{xk:a,authKey:l,counter:c,tagMask:u}=s(),d=[a,l,u,c];(0,fe.isAligned32)(o)||d.push(o=(0,fe.copyBytes)(o));const f=o.subarray(0,-16),h=o.subarray(-16),m=i(l,u,f);if(d.push(m),!(0,fe.equalBytes)(m,h))throw new Error("aes/gcm: invalid ghash tag");const g=Wl(a,!1,c,f);return(0,fe.clean)(...d),g}}});const Mh=(t,e,n)=>r=>{if(!Number.isSafeInteger(r)||e>r||r>n)throw new Error(`${t}: invalid value=${r}, must be [${e}..${n}]`)};function $P(t){return t!=null&&typeof t=="object"&&(t instanceof Uint32Array||t.constructor.name==="Uint32Array")}function UP(t,e){if((0,He.bytes)(e,16),!$P(t))throw new Error("_encryptBlock accepts result of expandKeyLE");const n=(0,fe.u32)(e);let{s0:r,s1:i,s2:s,s3:o}=vn(t,n[0],n[1],n[2],n[3]);return n[0]=r,n[1]=i,n[2]=s,n[3]=o,e}function FP(t,e){if((0,He.bytes)(e,16),!$P(t))throw new Error("_decryptBlock accepts result of expandKeyLE");const n=(0,fe.u32)(e);let{s0:r,s1:i,s2:s,s3:o}=rf(t,n[0],n[1],n[2],n[3]);return n[0]=r,n[1]=i,n[2]=s,n[3]=o,e}pt.siv=(0,fe.wrapCipher)({blockSize:16,nonceLength:12,tagLength:16},function(t,e,n){const r=Mh("AAD",0,68719476736),i=Mh("plaintext",0,2**36),s=Mh("nonce",12,12),o=Mh("ciphertext",16,2**36+16);function a(){const u=Zr(t),d=new Uint8Array(t.length),f=new Uint8Array(16),h=[u,d];let m=e;(0,fe.isAligned32)(m)||h.push(m=(0,fe.copyBytes)(m));const g=(0,fe.u32)(m);let w=0,p=g[0],v=g[1],y=g[2],C=0;for(const L of[f,d].map(fe.u32)){const j=(0,fe.u32)(L);for(let D=0;D<j.length;D+=2){const{s0:V,s1:F}=vn(u,w,p,v,y);j[D+0]=V,j[D+1]=F,w=++C}}const P={authKey:f,encKey:Zr(d)};return(0,fe.clean)(...h),P}function l(u,d,f){const h=DP(_w.polyval,!0,d,f,n);for(let y=0;y<12;y++)h[y]^=e[y];h[15]&=127;const m=(0,fe.u32)(h);let g=m[0],w=m[1],p=m[2],v=m[3];return{s0:g,s1:w,s2:p,s3:v}=vn(u,g,w,p,v),m[0]=g,m[1]=w,m[2]=p,m[3]=v,h}function c(u,d,f){let h=(0,fe.copyBytes)(d);h[15]|=128;const m=Wl(u,!0,h,f);return(0,fe.clean)(h),m}return(0,He.bytes)(t,16,24,32),(0,He.bytes)(e),s(e.length),n!==void 0&&((0,He.bytes)(n),r(n.length)),{encrypt(u){(0,He.bytes)(u),i(u.length);const{encKey:d,authKey:f}=a(),h=l(d,f,u),m=[d,f,h];(0,fe.isAligned32)(u)||m.push(u=(0,fe.copyBytes)(u));const g=new Uint8Array(u.length+16);return g.set(h,u.length),g.set(c(d,h,u)),(0,fe.clean)(...m),g},decrypt(u){(0,He.bytes)(u),o(u.length);const d=u.subarray(-16),{encKey:f,authKey:h}=a(),m=[f,h];(0,fe.isAligned32)(u)||m.push(u=(0,fe.copyBytes)(u));const g=c(f,d,u.subarray(0,-16)),w=l(f,h,g);if(m.push(w),!(0,fe.equalBytes)(d,w))throw(0,fe.clean)(...m),new Error("invalid polyval tag");return(0,fe.clean)(...m),g}}});const T0={encrypt(t,e){if(e.length>=2**32)throw new Error("plaintext should be less than 4gb");const n=Zr(t);if(e.length===16)UP(n,e);else{const r=(0,fe.u32)(e);let i=r[0],s=r[1];for(let o=0,a=1;o<6;o++)for(let l=2;l<r.length;l+=2,a++){const{s0:c,s1:u,s2:d,s3:f}=vn(n,i,s,r[l],r[l+1]);i=c,s=u^_0(a),r[l]=d,r[l+1]=f}r[0]=i,r[1]=s}n.fill(0)},decrypt(t,e){if(e.length-8>=2**32)throw new Error("ciphertext should be less than 4gb");const n=nf(t),r=e.length/8-1;if(r===1)FP(n,e);else{const i=(0,fe.u32)(e);let s=i[0],o=i[1];for(let a=0,l=6*r;a<6;a++)for(let c=2*r;c>=1;c-=2,l--){o^=_0(l);const{s0:u,s1:d,s2:f,s3:h}=rf(n,s,o,i[c],i[c+1]);s=u,o=d,i[c]=f,i[c+1]=h}i[0]=s,i[1]=o}n.fill(0)}},yS=new Uint8Array(8).fill(166);pt.aeskw=(0,fe.wrapCipher)({blockSize:8},t=>({encrypt(e){if((0,He.bytes)(e),!e.length||e.length%8!=0)throw new Error("invalid plaintext length");if(e.length===8)throw new Error("8-byte keys not allowed in AESKW, use AESKWP instead");const n=(0,fe.concatBytes)(yS,e);return T0.encrypt(t,n),n},decrypt(e){if((0,He.bytes)(e),e.length%8!=0||e.length<24)throw new Error("invalid ciphertext length");const n=(0,fe.copyBytes)(e);if(T0.decrypt(t,n),!(0,fe.equalBytes)(n.subarray(0,8),yS))throw new Error("integrity check failed");return n.subarray(0,8).fill(0),n.subarray(8)}}));const vS=2790873510;pt.aeskwp=(0,fe.wrapCipher)({blockSize:8},t=>({encrypt(e){if((0,He.bytes)(e),!e.length)throw new Error("invalid plaintext length");const n=8*Math.ceil(e.length/8),r=new Uint8Array(8+n);r.set(e,8);const i=(0,fe.u32)(r);return i[0]=vS,i[1]=_0(e.length),T0.encrypt(t,r),r},decrypt(e){if((0,He.bytes)(e),e.length<16)throw new Error("invalid ciphertext length");const n=(0,fe.copyBytes)(e),r=(0,fe.u32)(n);T0.decrypt(t,n);const i=_0(r[1])>>>0,s=8*Math.ceil(i/8);if(r[0]!==vS||n.length-8!==s)throw new Error("integrity check failed");for(let o=i;o<s;o++)if(n[8+o]!==0)throw new Error("integrity check failed");return n.subarray(0,8).fill(0),n.subarray(8,8+i)}})),pt.unsafe={expandKeyLE:Zr,expandKeyDecLE:nf,encrypt:vn,decrypt:rf,encryptBlock:UP,decryptBlock:FP,ctrCounter:BP,ctr32:Wl},Object.defineProperty(uc,"__esModule",{value:!0}),uc.aes256cbc=uc.aes256gcm=void 0;var jP=pt;uc.aes256gcm=function(t,e,n){return(0,jP.gcm)(t,e,n)};uc.aes256cbc=function(t,e,n){return(0,jP.cbc)(t,e)};var P0={},HP={},ql={};Object.defineProperty(ql,"__esModule",{value:!0}),ql.sigma=void 0,ql.rotl=function(t,e){return t<<e|t>>>32-e},ql.createCipher=function(t,e){const{allowShortKeys:n,extendNonceFn:r,counterLength:i,counterRight:s,rounds:o}=(0,hr.checkOpts)({allowShortKeys:!1,counterLength:8,counterRight:!1,rounds:20},e);if(typeof t!="function")throw new Error("core must be a function");return(0,Hi.number)(i),(0,Hi.number)(o),(0,Hi.bool)(s),(0,Hi.bool)(n),(a,l,c,u,d=0)=>{(0,Hi.bytes)(a),(0,Hi.bytes)(l),(0,Hi.bytes)(c);const f=c.length;if(u===void 0&&(u=new Uint8Array(f)),(0,Hi.bytes)(u),(0,Hi.number)(d),d<0||d>=wS)throw new Error("arx: counter overflow");if(u.length<f)throw new Error(`arx: output (${u.length}) is shorter than data (${f})`);const h=[];let m,g,w=a.length;if(w===32)h.push(m=(0,hr.copyBytes)(a)),g=zP;else{if(w!==16||!n)throw new Error(`arx: invalid 32-byte key, got length=${w}`);m=new Uint8Array(32),m.set(a),m.set(a,16),g=fD,h.push(m)}iy(l)||h.push(l=(0,hr.copyBytes)(l));const p=(0,hr.u32)(m);if(r){if(l.length!==24)throw new Error("arx: extended nonce must be 24 bytes");r(g,p,(0,hr.u32)(l.subarray(0,16)),p),l=l.subarray(16)}const v=16-i;if(v!==l.length)throw new Error(`arx: nonce must be ${v} or 16 bytes`);if(v!==12){const C=new Uint8Array(12);C.set(l,s?0:12-l.length),l=C,h.push(l)}const y=(0,hr.u32)(l);return function(C,P,L,j,D,V,F,W){const K=D.length,$=new Uint8Array(Lh),M=(0,hr.u32)($),x=iy(D)&&iy(V),O=x?(0,hr.u32)(D):bS,B=x?(0,hr.u32)(V):bS;for(let b=0;b<K;F++){if(C(P,L,j,M,F,W),F>=wS)throw new Error("arx: counter overflow");const E=Math.min(Lh,K-b);if(x&&E===Lh){const k=b/4;if(b%4!=0)throw new Error("arx: invalid block position");for(let I,A=0;A<hD;A++)I=k+A,B[I]=O[I]^M[A];b+=Lh}else{for(let k,I=0;I<E;I++)k=b+I,V[k]=D[k]^$[I];b+=E}}}(t,g,p,y,c,u,d,o),(0,hr.clean)(...h),u}};const Hi=on,hr=lr,KP=t=>Uint8Array.from(t.split("").map(e=>e.charCodeAt(0))),uD=KP("expand 16-byte k"),dD=KP("expand 32-byte k"),fD=(0,hr.u32)(uD),zP=(0,hr.u32)(dD);function iy(t){return t.byteOffset%4==0}ql.sigma=zP.slice();const Lh=64,hD=16,wS=2**32-1,bS=new Uint32Array;var yd={};Object.defineProperty(yd,"__esModule",{value:!0}),yd.poly1305=void 0,yd.wrapConstructorWithKey=VP;const Bh=on,rd=lr,Ut=(t,e)=>255&t[e++]|(255&t[e++])<<8;class pD{constructor(e){this.blockLen=16,this.outputLen=16,this.buffer=new Uint8Array(16),this.r=new Uint16Array(10),this.h=new Uint16Array(10),this.pad=new Uint16Array(8),this.pos=0,this.finished=!1,e=(0,rd.toBytes)(e),(0,Bh.bytes)(e,32);const n=Ut(e,0),r=Ut(e,2),i=Ut(e,4),s=Ut(e,6),o=Ut(e,8),a=Ut(e,10),l=Ut(e,12),c=Ut(e,14);this.r[0]=8191&n,this.r[1]=8191&(n>>>13|r<<3),this.r[2]=7939&(r>>>10|i<<6),this.r[3]=8191&(i>>>7|s<<9),this.r[4]=255&(s>>>4|o<<12),this.r[5]=o>>>1&8190,this.r[6]=8191&(o>>>14|a<<2),this.r[7]=8065&(a>>>11|l<<5),this.r[8]=8191&(l>>>8|c<<8),this.r[9]=c>>>5&127;for(let u=0;u<8;u++)this.pad[u]=Ut(e,16+2*u)}process(e,n,r=!1){const i=r?0:2048,{h:s,r:o}=this,a=o[0],l=o[1],c=o[2],u=o[3],d=o[4],f=o[5],h=o[6],m=o[7],g=o[8],w=o[9],p=Ut(e,n+0),v=Ut(e,n+2),y=Ut(e,n+4),C=Ut(e,n+6),P=Ut(e,n+8),L=Ut(e,n+10),j=Ut(e,n+12),D=Ut(e,n+14);let V=s[0]+(8191&p),F=s[1]+(8191&(p>>>13|v<<3)),W=s[2]+(8191&(v>>>10|y<<6)),K=s[3]+(8191&(y>>>7|C<<9)),$=s[4]+(8191&(C>>>4|P<<12)),M=s[5]+(P>>>1&8191),x=s[6]+(8191&(P>>>14|L<<2)),O=s[7]+(8191&(L>>>11|j<<5)),B=s[8]+(8191&(j>>>8|D<<8)),b=s[9]+(D>>>5|i),E=0,k=E+V*a+F*(5*w)+W*(5*g)+K*(5*m)+$*(5*h);E=k>>>13,k&=8191,k+=M*(5*f)+x*(5*d)+O*(5*u)+B*(5*c)+b*(5*l),E+=k>>>13,k&=8191;let I=E+V*l+F*a+W*(5*w)+K*(5*g)+$*(5*m);E=I>>>13,I&=8191,I+=M*(5*h)+x*(5*f)+O*(5*d)+B*(5*u)+b*(5*c),E+=I>>>13,I&=8191;let A=E+V*c+F*l+W*a+K*(5*w)+$*(5*g);E=A>>>13,A&=8191,A+=M*(5*m)+x*(5*h)+O*(5*f)+B*(5*d)+b*(5*u),E+=A>>>13,A&=8191;let S=E+V*u+F*c+W*l+K*a+$*(5*w);E=S>>>13,S&=8191,S+=M*(5*g)+x*(5*m)+O*(5*h)+B*(5*f)+b*(5*d),E+=S>>>13,S&=8191;let T=E+V*d+F*u+W*c+K*l+$*a;E=T>>>13,T&=8191,T+=M*(5*w)+x*(5*g)+O*(5*m)+B*(5*h)+b*(5*f),E+=T>>>13,T&=8191;let R=E+V*f+F*d+W*u+K*c+$*l;E=R>>>13,R&=8191,R+=M*a+x*(5*w)+O*(5*g)+B*(5*m)+b*(5*h),E+=R>>>13,R&=8191;let N=E+V*h+F*f+W*d+K*u+$*c;E=N>>>13,N&=8191,N+=M*l+x*a+O*(5*w)+B*(5*g)+b*(5*m),E+=N>>>13,N&=8191;let U=E+V*m+F*h+W*f+K*d+$*u;E=U>>>13,U&=8191,U+=M*c+x*l+O*a+B*(5*w)+b*(5*g),E+=U>>>13,U&=8191;let z=E+V*g+F*m+W*h+K*f+$*d;E=z>>>13,z&=8191,z+=M*u+x*c+O*l+B*a+b*(5*w),E+=z>>>13,z&=8191;let q=E+V*w+F*g+W*m+K*h+$*f;E=q>>>13,q&=8191,q+=M*d+x*u+O*c+B*l+b*a,E+=q>>>13,q&=8191,E=(E<<2)+E|0,E=E+k|0,k=8191&E,E>>>=13,I+=E,s[0]=k,s[1]=I,s[2]=A,s[3]=S,s[4]=T,s[5]=R,s[6]=N,s[7]=U,s[8]=z,s[9]=q}finalize(){const{h:e,pad:n}=this,r=new Uint16Array(10);let i=e[1]>>>13;e[1]&=8191;for(let a=2;a<10;a++)e[a]+=i,i=e[a]>>>13,e[a]&=8191;e[0]+=5*i,i=e[0]>>>13,e[0]&=8191,e[1]+=i,i=e[1]>>>13,e[1]&=8191,e[2]+=i,r[0]=e[0]+5,i=r[0]>>>13,r[0]&=8191;for(let a=1;a<10;a++)r[a]=e[a]+i,i=r[a]>>>13,r[a]&=8191;r[9]-=8192;let s=(1^i)-1;for(let a=0;a<10;a++)r[a]&=s;s=~s;for(let a=0;a<10;a++)e[a]=e[a]&s|r[a];e[0]=65535&(e[0]|e[1]<<13),e[1]=65535&(e[1]>>>3|e[2]<<10),e[2]=65535&(e[2]>>>6|e[3]<<7),e[3]=65535&(e[3]>>>9|e[4]<<4),e[4]=65535&(e[4]>>>12|e[5]<<1|e[6]<<14),e[5]=65535&(e[6]>>>2|e[7]<<11),e[6]=65535&(e[7]>>>5|e[8]<<8),e[7]=65535&(e[8]>>>8|e[9]<<5);let o=e[0]+n[0];e[0]=65535&o;for(let a=1;a<8;a++)o=(e[a]+n[a]|0)+(o>>>16)|0,e[a]=65535&o;(0,rd.clean)(r)}update(e){(0,Bh.exists)(this);const{buffer:n,blockLen:r}=this,i=(e=(0,rd.toBytes)(e)).length;for(let s=0;s<i;){const o=Math.min(r-this.pos,i-s);if(o!==r)n.set(e.subarray(s,s+o),this.pos),this.pos+=o,s+=o,this.pos===r&&(this.process(n,0,!1),this.pos=0);else for(;r<=i-s;s+=r)this.process(e,s)}return this}destroy(){(0,rd.clean)(this.h,this.r,this.buffer,this.pad)}digestInto(e){(0,Bh.exists)(this),(0,Bh.output)(e,this),this.finished=!0;const{buffer:n,h:r}=this;let{pos:i}=this;if(i){for(n[i++]=1;i<16;i++)n[i]=0;this.process(n,0,!0)}this.finalize();let s=0;for(let o=0;o<8;o++)e[s++]=r[o]>>>0,e[s++]=r[o]>>>8;return e}digest(){const{buffer:e,outputLen:n}=this;this.digestInto(e);const r=e.slice(0,n);return this.destroy(),r}}function VP(t){const e=(r,i)=>t(i).update((0,rd.toBytes)(r)).digest(),n=t(new Uint8Array(32));return e.outputLen=n.outputLen,e.blockLen=n.blockLen,e.create=r=>t(r),e}yd.poly1305=VP(t=>new pD(t)),function(t){Object.defineProperty(t,"__esModule",{value:!0}),t.xchacha20poly1305=t.chacha20poly1305=t._poly1305_aead=t.chacha12=t.chacha8=t.xchacha20=t.chacha20=t.chacha20orig=void 0,t.hchacha=o;const e=ql,n=on,r=yd,i=lr;function s(d,f,h,m,g,w=20){let p=d[0],v=d[1],y=d[2],C=d[3],P=f[0],L=f[1],j=f[2],D=f[3],V=f[4],F=f[5],W=f[6],K=f[7],$=g,M=h[0],x=h[1],O=h[2],B=p,b=v,E=y,k=C,I=P,A=L,S=j,T=D,R=V,N=F,U=W,z=K,q=$,Q=M,ie=x,oe=O;for(let le=0;le<w;le+=2)B=B+I|0,q=(0,e.rotl)(q^B,16),R=R+q|0,I=(0,e.rotl)(I^R,12),B=B+I|0,q=(0,e.rotl)(q^B,8),R=R+q|0,I=(0,e.rotl)(I^R,7),b=b+A|0,Q=(0,e.rotl)(Q^b,16),N=N+Q|0,A=(0,e.rotl)(A^N,12),b=b+A|0,Q=(0,e.rotl)(Q^b,8),N=N+Q|0,A=(0,e.rotl)(A^N,7),E=E+S|0,ie=(0,e.rotl)(ie^E,16),U=U+ie|0,S=(0,e.rotl)(S^U,12),E=E+S|0,ie=(0,e.rotl)(ie^E,8),U=U+ie|0,S=(0,e.rotl)(S^U,7),k=k+T|0,oe=(0,e.rotl)(oe^k,16),z=z+oe|0,T=(0,e.rotl)(T^z,12),k=k+T|0,oe=(0,e.rotl)(oe^k,8),z=z+oe|0,T=(0,e.rotl)(T^z,7),B=B+A|0,oe=(0,e.rotl)(oe^B,16),U=U+oe|0,A=(0,e.rotl)(A^U,12),B=B+A|0,oe=(0,e.rotl)(oe^B,8),U=U+oe|0,A=(0,e.rotl)(A^U,7),b=b+S|0,q=(0,e.rotl)(q^b,16),z=z+q|0,S=(0,e.rotl)(S^z,12),b=b+S|0,q=(0,e.rotl)(q^b,8),z=z+q|0,S=(0,e.rotl)(S^z,7),E=E+T|0,Q=(0,e.rotl)(Q^E,16),R=R+Q|0,T=(0,e.rotl)(T^R,12),E=E+T|0,Q=(0,e.rotl)(Q^E,8),R=R+Q|0,T=(0,e.rotl)(T^R,7),k=k+I|0,ie=(0,e.rotl)(ie^k,16),N=N+ie|0,I=(0,e.rotl)(I^N,12),k=k+I|0,ie=(0,e.rotl)(ie^k,8),N=N+ie|0,I=(0,e.rotl)(I^N,7);let J=0;m[J++]=p+B|0,m[J++]=v+b|0,m[J++]=y+E|0,m[J++]=C+k|0,m[J++]=P+I|0,m[J++]=L+A|0,m[J++]=j+S|0,m[J++]=D+T|0,m[J++]=V+R|0,m[J++]=F+N|0,m[J++]=W+U|0,m[J++]=K+z|0,m[J++]=$+q|0,m[J++]=M+Q|0,m[J++]=x+ie|0,m[J++]=O+oe|0}function o(d,f,h,m){let g=d[0],w=d[1],p=d[2],v=d[3],y=f[0],C=f[1],P=f[2],L=f[3],j=f[4],D=f[5],V=f[6],F=f[7],W=h[0],K=h[1],$=h[2],M=h[3];for(let O=0;O<20;O+=2)g=g+y|0,W=(0,e.rotl)(W^g,16),j=j+W|0,y=(0,e.rotl)(y^j,12),g=g+y|0,W=(0,e.rotl)(W^g,8),j=j+W|0,y=(0,e.rotl)(y^j,7),w=w+C|0,K=(0,e.rotl)(K^w,16),D=D+K|0,C=(0,e.rotl)(C^D,12),w=w+C|0,K=(0,e.rotl)(K^w,8),D=D+K|0,C=(0,e.rotl)(C^D,7),p=p+P|0,$=(0,e.rotl)($^p,16),V=V+$|0,P=(0,e.rotl)(P^V,12),p=p+P|0,$=(0,e.rotl)($^p,8),V=V+$|0,P=(0,e.rotl)(P^V,7),v=v+L|0,M=(0,e.rotl)(M^v,16),F=F+M|0,L=(0,e.rotl)(L^F,12),v=v+L|0,M=(0,e.rotl)(M^v,8),F=F+M|0,L=(0,e.rotl)(L^F,7),g=g+C|0,M=(0,e.rotl)(M^g,16),V=V+M|0,C=(0,e.rotl)(C^V,12),g=g+C|0,M=(0,e.rotl)(M^g,8),V=V+M|0,C=(0,e.rotl)(C^V,7),w=w+P|0,W=(0,e.rotl)(W^w,16),F=F+W|0,P=(0,e.rotl)(P^F,12),w=w+P|0,W=(0,e.rotl)(W^w,8),F=F+W|0,P=(0,e.rotl)(P^F,7),p=p+L|0,K=(0,e.rotl)(K^p,16),j=j+K|0,L=(0,e.rotl)(L^j,12),p=p+L|0,K=(0,e.rotl)(K^p,8),j=j+K|0,L=(0,e.rotl)(L^j,7),v=v+y|0,$=(0,e.rotl)($^v,16),D=D+$|0,y=(0,e.rotl)(y^D,12),v=v+y|0,$=(0,e.rotl)($^v,8),D=D+$|0,y=(0,e.rotl)(y^D,7);let x=0;m[x++]=g,m[x++]=w,m[x++]=p,m[x++]=v,m[x++]=W,m[x++]=K,m[x++]=$,m[x++]=M}t.chacha20orig=(0,e.createCipher)(s,{counterRight:!1,counterLength:8,allowShortKeys:!0}),t.chacha20=(0,e.createCipher)(s,{counterRight:!1,counterLength:4,allowShortKeys:!1}),t.xchacha20=(0,e.createCipher)(s,{counterRight:!1,counterLength:8,extendNonceFn:o,allowShortKeys:!1}),t.chacha8=(0,e.createCipher)(s,{counterRight:!1,counterLength:4,rounds:8}),t.chacha12=(0,e.createCipher)(s,{counterRight:!1,counterLength:4,rounds:12});const a=new Uint8Array(16),l=(d,f)=>{d.update(f);const h=f.length%16;h&&d.update(a.subarray(h))},c=new Uint8Array(32);function u(d,f,h,m,g){const w=d(f,h,c),p=r.poly1305.create(w);g&&l(p,g),l(p,m);const v=new Uint8Array(16),y=(0,i.createView)(v);(0,i.setBigUint64)(y,0,BigInt(g?g.length:0),!0),(0,i.setBigUint64)(y,8,BigInt(m.length),!0),p.update(v);const C=p.digest();return(0,i.clean)(w,v),C}t._poly1305_aead=d=>(f,h,m)=>((0,n.bytes)(f,32),(0,n.bytes)(h),{encrypt(w,p){const v=w.length,y=v+16;p?(0,n.bytes)(p,y):p=new Uint8Array(y),d(f,h,w,p,1);const C=u(d,f,h,p.subarray(0,-16),m);return p.set(C,v),(0,i.clean)(C),p},decrypt(w,p){const v=w.length,y=v-16;if(v<16)throw new Error("encrypted data must be at least 16 bytes");p?(0,n.bytes)(p,y):p=new Uint8Array(y);const C=w.subarray(0,-16),P=w.subarray(-16),L=u(d,f,h,C,m);if(!(0,i.equalBytes)(P,L))throw new Error("invalid tag");return d(f,h,C,p,1),(0,i.clean)(L),p}}),t.chacha20poly1305=(0,i.wrapCipher)({blockSize:64,nonceLength:12,tagLength:16},(0,t._poly1305_aead)(t.chacha20)),t.xchacha20poly1305=(0,i.wrapCipher)({blockSize:64,nonceLength:24,tagLength:16},(0,t._poly1305_aead)(t.xchacha20))}(HP),Object.defineProperty(P0,"__esModule",{value:!0}),P0.xchacha20=void 0;var El,ES,Ku,gD=HP;P0.xchacha20=function(t,e,n){return(0,gD.xchacha20poly1305)(t,e,n)},function(t){Object.defineProperty(t,"__esModule",{value:!0}),t.aesDecrypt=t.aesEncrypt=t.symDecrypt=t.symEncrypt=void 0;var e=lr,n=vb,r=uc,i=P0,s=ef,o=It;t.symEncrypt=function(u,d,f){return a(l,u,d,f)};function a(u,d,f,h){var m=(0,s.symmetricAlgorithm)();if(m==="aes-256-gcm")return u(r.aes256gcm,d,f,(0,s.symmetricNonceLength)(),o.AEAD_TAG_LENGTH,h);if(m==="xchacha20")return u(i.xchacha20,d,f,o.XCHACHA20_NONCE_LENGTH,o.AEAD_TAG_LENGTH,h);if(m==="aes-256-cbc")return u(r.aes256cbc,d,f,16,0);throw new Error("Not implemented")}function l(u,d,f,h,m,g){var w=(0,n.randomBytes)(h),p=u(d,w,g).encrypt(f);if(m===0)return(0,e.concatBytes)(w,p);var v=p.length-m,y=p.subarray(0,v),C=p.subarray(v);return(0,e.concatBytes)(w,C,y)}function c(u,d,f,h,m,g){var w=f.subarray(0,h),p=u(d,Uint8Array.from(w),g),v=f.subarray(h);if(m===0)return p.decrypt(v);var y=v.subarray(0,m),C=v.subarray(m);return p.decrypt((0,e.concatBytes)(C,y))}t.symDecrypt=function(u,d,f){return a(c,u,d,f)},t.aesEncrypt=t.symEncrypt,t.aesDecrypt=t.symDecrypt}(dS),El=Dg,ES=Pr&&Pr.__createBinding||(Object.create?function(t,e,n,r){r===void 0&&(r=n);var i=Object.getOwnPropertyDescriptor(e,n);i&&!("get"in i?!e.__esModule:i.writable||i.configurable)||(i={enumerable:!0,get:function(){return e[n]}}),Object.defineProperty(t,r,i)}:function(t,e,n,r){r===void 0&&(r=n),t[r]=e[n]}),Ku=Pr&&Pr.__exportStar||function(t,e){for(var n in t)n==="default"||Object.prototype.hasOwnProperty.call(e,n)||ES(e,t,n)},Object.defineProperty(El,"__esModule",{value:!0}),Ku(WT,El),Ku(TP,El),Ku(Cw,El),Ku(dS,El);var sf={};Object.defineProperty(sf,"__esModule",{value:!0}),sf.PublicKey=void 0;var AS=lr,Dh=Dg,mD=function(){function t(e){this.data=(0,Dh.convertPublicKeyFormat)(e,!0)}return t.fromHex=function(e){return new t((0,Dh.hexToPublicKey)(e))},Object.defineProperty(t.prototype,"uncompressed",{get:function(){return ae.from((0,Dh.convertPublicKeyFormat)(this.data,!1))},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"compressed",{get:function(){return ae.from(this.data)},enumerable:!1,configurable:!0}),t.prototype.toHex=function(e){return e===void 0&&(e=!0),(0,AS.bytesToHex)(e?this.data:this.uncompressed)},t.prototype.decapsulate=function(e,n){n===void 0&&(n=!1);var r=n?this.data:this.uncompressed,i=e.multiply(this,n);return(0,Dh.getSharedKey)(r,i)},t.prototype.equals=function(e){return(0,AS.equalBytes)(this.data,e.data)},t}();sf.PublicKey=mD,Object.defineProperty(S0,"__esModule",{value:!0}),S0.PrivateKey=void 0;var SS=lr,Al=Dg,yD=sf,vD=function(){function t(e){if(e===void 0)this.data=(0,Al.getValidSecret)();else{if(!(0,Al.isValidPrivateKey)(e))throw new Error("Invalid private key");this.data=e}this.publicKey=new yD.PublicKey((0,Al.getPublicKey)(this.data))}return t.fromHex=function(e){return new t((0,Al.decodeHex)(e))},Object.defineProperty(t.prototype,"secret",{get:function(){return ae.from(this.data)},enumerable:!1,configurable:!0}),t.prototype.toHex=function(){return(0,SS.bytesToHex)(this.data)},t.prototype.encapsulate=function(e,n){n===void 0&&(n=!1);var r=n?this.publicKey.compressed:this.publicKey.uncompressed,i=this.multiply(e,n);return(0,Al.getSharedKey)(r,i)},t.prototype.multiply=function(e,n){return n===void 0&&(n=!1),(0,Al.getSharedPoint)(this.data,e.compressed,n)},t.prototype.equals=function(e){return(0,SS.equalBytes)(this.data,e.data)},t}();S0.PrivateKey=vD,function(t){Object.defineProperty(t,"__esModule",{value:!0}),t.PublicKey=t.PrivateKey=void 0;var e=S0;Object.defineProperty(t,"PrivateKey",{enumerable:!0,get:function(){return e.PrivateKey}});var n=sf;Object.defineProperty(t,"PublicKey",{enumerable:!0,get:function(){return n.PublicKey}})}(Km),function(t){Object.defineProperty(t,"__esModule",{value:!0}),t.utils=t.PublicKey=t.PrivateKey=t.ECIES_CONFIG=void 0,t.encrypt=function(a,l){var c=new r.PrivateKey,u=a instanceof Uint8Array?new r.PublicKey(a):r.PublicKey.fromHex(a),d=c.encapsulate(u,(0,n.isHkdfKeyCompressed)()),f=(0,n.isEphemeralKeyCompressed)()?c.publicKey.compressed:c.publicKey.uncompressed,h=(0,i.symEncrypt)(d,l);return ae.from((0,e.concatBytes)(f,h))},t.decrypt=function(a,l){var c=a instanceof Uint8Array?new r.PrivateKey(a):r.PrivateKey.fromHex(a),u=(0,n.ephemeralKeySize)(),d=new r.PublicKey(l.subarray(0,u)),f=l.subarray(u),h=d.decapsulate(c,(0,n.isHkdfKeyCompressed)());return ae.from((0,i.symDecrypt)(h,f))};var e=lr,n=ef,r=Km,i=Dg,s=ef;Object.defineProperty(t,"ECIES_CONFIG",{enumerable:!0,get:function(){return s.ECIES_CONFIG}});var o=Km;Object.defineProperty(t,"PrivateKey",{enumerable:!0,get:function(){return o.PrivateKey}}),Object.defineProperty(t,"PublicKey",{enumerable:!0,get:function(){return o.PublicKey}}),t.utils={aesEncrypt:i.aesEncrypt,aesDecrypt:i.aesDecrypt,symEncrypt:i.symEncrypt,symDecrypt:i.symDecrypt,decodeHex:i.decodeHex,getValidSecret:i.getValidSecret,remove0x:i.remove0x}}(_l);const GP=Sn("KeyExchange:Layer"),WP=Sn("SocketService:Layer"),qP=Sn("Ecies:Layer"),QP=Sn("RemoteCommunication:Layer");GP.color="##95c44e",WP.color="#f638d7",qP.color="#465b9c",QP.color="#47a2be";const X={KeyExchange:GP,SocketService:WP,Ecies:qP,RemoteCommunication:QP};let zu,$h=[],sy=[];const Ts=(t,e)=>se(void 0,void 0,void 0,function*(){zu=e,sy.push(t),function(n){return se(this,void 0,void 0,function*(){if(!zu||!n)return;(function(){const o=sy;sy=$h,$h=o})();const r=zu.endsWith("/")?`${zu}evt`:`${zu}/evt`,i=Object.assign({},n);if(delete i.params,n.params)for(const[o,a]of Object.entries(n.params))i[o]=a;const s=JSON.stringify(i);X.RemoteCommunication(`[sendBufferedEvents] Sending ${$h.length} analytics events to ${r}`);try{const o=yield aT(r,{method:"POST",headers:{Accept:"application/json","Content-Type":"application/json"},body:s}),a=yield o.text();X.RemoteCommunication(`[sendBufferedEvents] Response: ${a}`),$h.length=0}catch{}})}(t).catch(()=>{})});class oy{constructor(e){this.enabled=!0,e!=null&&e.debug&&Sn.enable("Ecies:Layer"),this.ecies=e!=null&&e.privateKey?_l.PrivateKey.fromHex(e.privateKey):new _l.PrivateKey,X.Ecies("[ECIES constructor()] initialized secret: ",this.ecies.toHex()),X.Ecies("[ECIES constructor()] initialized public: ",this.ecies.publicKey.toHex()),X.Ecies("[ECIES constructor()] init with",this)}generateECIES(){this.ecies=new _l.PrivateKey}getPublicKey(){return this.ecies.publicKey.toHex()}encrypt(e,n){let r=e;if(this.enabled)try{X.Ecies("[ECIES: encrypt()] using otherPublicKey",n);const i=ae.from(e),s=_l.encrypt(n,i);r=ae.from(s).toString("base64")}catch(i){throw X.Ecies("[ECIES: encrypt()] error encrypt:",i),X.Ecies("[ECIES: encrypt()] private: ",this.ecies.toHex()),X.Ecies("[ECIES: encrypt()] data: ",e),X.Ecies("[ECIES: encrypt()] otherkey: ",n),i}return r}decrypt(e){let n=e;if(this.enabled)try{X.Ecies("[ECIES: decrypt()] using privateKey",this.ecies.toHex());const r=ae.from(e.toString(),"base64");n=_l.decrypt(this.ecies.toHex(),r).toString()}catch(r){throw X.Ecies("[ECIES: decrypt()] error decrypt",r),X.Ecies("[ECIES: decrypt()] private: ",this.ecies.toHex()),X.Ecies("[ECIES: decrypt()] encryptedData: ",e),r}return n}getKeyInfo(){return{private:this.ecies.toHex(),public:this.ecies.publicKey.toHex()}}toString(){X.Ecies("[ECIES: toString()]",this.getKeyInfo())}}var Vo={version:"0.33.0"};const mu="https://metamask-sdk.api.cx.metamask.io/",wD=["websocket"],yu=6048e5,bD=3e3,en={METAMASK_CONNECTSIGN:"metamask_connectSign",METAMASK_CONNECTWITH:"metamask_connectWith",METAMASK_OPEN:"metamask_open",METAMASK_BATCH:"metamask_batch",PERSONAL_SIGN:"personal_sign",WALLET_REQUESTPERMISSIONS:"wallet_requestPermissions",WALLET_REVOKEPERMISSIONS:"wallet_revokePermissions",WALLET_WATCHASSET:"wallet_watchAsset",ETH_REQUESTACCOUNTS:"eth_requestAccounts",ETH_SENDTRANSACTION:"eth_sendTransaction",ETH_SIGNTYPEDDATA:"eth_signTypedData",ETH_SIGNTYPEDDATA_V3:"eth_signTypedData_v3",ETH_SIGNTYPEDDATA_V4:"eth_signTypedData_v4",ETH_SIGNTRANSACTION:"eth_signTransaction",ETH_SIGN:"eth_sign",PERSONAL_EC_RECOVER:"personal_ecRecover"},ED=[en.METAMASK_CONNECTSIGN,en.METAMASK_CONNECTWITH,en.METAMASK_OPEN,en.METAMASK_BATCH,en.PERSONAL_SIGN,en.WALLET_REQUESTPERMISSIONS,en.WALLET_REVOKEPERMISSIONS,en.WALLET_WATCHASSET,en.ETH_SENDTRANSACTION,en.ETH_SIGNTYPEDDATA,en.ETH_SIGNTYPEDDATA_V3,en.ETH_SIGNTYPEDDATA_V4,en.ETH_SIGNTRANSACTION,en.ETH_SIGN,en.PERSONAL_EC_RECOVER];function Hf(t){return ED.includes(t)}function YP(t){const{context:e}=t;X.RemoteCommunication(`[RemoteCommunication: clean()] context=${e}`),t.channelConfig=void 0,t.ready=!1,t.originatorConnectStarted=!1}var Gt,pe,R0,Qe,ct,St,Sl;(Sl=Gt||(Gt={})).DISCONNECTED="disconnected",Sl.WAITING="waiting",Sl.TIMEOUT="timeout",Sl.LINKED="linked",Sl.PAUSED="paused",Sl.TERMINATED="terminated",function(t){t.KEY_INFO="key_info",t.SERVICE_STATUS="service_status",t.PROVIDER_UPDATE="provider_update",t.RPC_UPDATE="rpc_update",t.KEYS_EXCHANGED="keys_exchanged",t.JOIN_CHANNEL="join_channel",t.PUBLIC_KEY="public_key",t.CHANNEL_CREATED="channel_created",t.CLIENTS_CONNECTED="clients_connected",t.CLIENTS_DISCONNECTED="clients_disconnected",t.CLIENTS_WAITING="clients_waiting",t.CLIENTS_READY="clients_ready",t.REJECTED="rejected",t.WALLET_INIT="wallet_init",t.CHANNEL_PERSISTENCE="channel_persistence",t.CONFIG="config",t.MESSAGE_ACK="ack",t.SOCKET_DISCONNECTED="socket_disconnected",t.SOCKET_RECONNECT="socket_reconnect",t.OTP="otp",t.SDK_RPC_CALL="sdk_rpc_call",t.AUTHORIZED="authorized",t.CONNECTION_STATUS="connection_status",t.MESSAGE="message",t.TERMINATE="terminate"}(pe||(pe={})),(R0||(R0={})).KEY_EXCHANGE="key_exchange",function(t){t.KEY_HANDSHAKE_START="key_handshake_start",t.KEY_HANDSHAKE_CHECK="key_handshake_check",t.KEY_HANDSHAKE_SYN="key_handshake_SYN",t.KEY_HANDSHAKE_SYNACK="key_handshake_SYNACK",t.KEY_HANDSHAKE_ACK="key_handshake_ACK",t.KEY_HANDSHAKE_WALLET="key_handshake_wallet",t.KEY_HANDSHAKE_NONE="none"}(Qe||(Qe={}));class AD extends Og.EventEmitter2{constructor({communicationLayer:e,otherPublicKey:n,context:r,ecies:i,logging:s}){super(),this.keysExchanged=!1,this.step=Qe.KEY_HANDSHAKE_NONE,this.debug=!1,this.context=r,this.communicationLayer=e,i!=null&&i.privateKey&&n&&(X.KeyExchange(`[KeyExchange: constructor()] otherPubKey=${n} set keysExchanged to true!`,i),this.keysExchanged=!0),this.myECIES=new oy(Object.assign(Object.assign({},i),{debug:s==null?void 0:s.eciesLayer})),this.communicationLayer.state.eciesInstance=this.myECIES,this.myPublicKey=this.myECIES.getPublicKey(),this.debug=(s==null?void 0:s.keyExchangeLayer)===!0,n&&this.setOtherPublicKey(n),this.communicationLayer.on(R0.KEY_EXCHANGE,this.onKeyExchangeMessage.bind(this))}onKeyExchangeMessage(e){const{relayPersistence:n}=this.communicationLayer.remote.state;if(X.KeyExchange(`[KeyExchange: onKeyExchangeMessage()] context=${this.context} keysExchanged=${this.keysExchanged} relayPersistence=${n}`,e),n)return void X.KeyExchange("[KeyExchange: onKeyExchangeMessage()] Ignoring key exchange message because relay persistence is activated");const{message:r}=e;this.keysExchanged&&X.KeyExchange(`[KeyExchange: onKeyExchangeMessage()] context=${this.context} received handshake while already exchanged. step=${this.step} otherPubKey=${this.otherPublicKey}`),this.emit(pe.KEY_INFO,r.type),r.type===Qe.KEY_HANDSHAKE_SYN?(this.checkStep([Qe.KEY_HANDSHAKE_NONE,Qe.KEY_HANDSHAKE_ACK]),X.KeyExchange("[KeyExchange: onKeyExchangeMessage()] KEY_HANDSHAKE_SYN",r),r.pubkey&&this.setOtherPublicKey(r.pubkey),this.communicationLayer.sendMessage({type:Qe.KEY_HANDSHAKE_SYNACK,pubkey:this.myPublicKey}).catch(i=>{X.KeyExchange("[KeyExchange: onKeyExchangeMessage()] Error sending KEY_HANDSHAKE_SYNACK",i)}),this.setStep(Qe.KEY_HANDSHAKE_ACK)):r.type===Qe.KEY_HANDSHAKE_SYNACK?(this.checkStep([Qe.KEY_HANDSHAKE_SYNACK,Qe.KEY_HANDSHAKE_ACK,Qe.KEY_HANDSHAKE_NONE]),X.KeyExchange("[KeyExchange: onKeyExchangeMessage()] KEY_HANDSHAKE_SYNACK"),r.pubkey&&this.setOtherPublicKey(r.pubkey),this.communicationLayer.sendMessage({type:Qe.KEY_HANDSHAKE_ACK}).catch(i=>{X.KeyExchange("[KeyExchange: onKeyExchangeMessage()] Error sending KEY_HANDSHAKE_ACK",i)}),this.keysExchanged=!0,this.setStep(Qe.KEY_HANDSHAKE_ACK),this.emit(pe.KEYS_EXCHANGED)):r.type===Qe.KEY_HANDSHAKE_ACK&&(X.KeyExchange("[KeyExchange: onKeyExchangeMessage()] KEY_HANDSHAKE_ACK set keysExchanged to true!"),this.checkStep([Qe.KEY_HANDSHAKE_ACK,Qe.KEY_HANDSHAKE_NONE]),this.keysExchanged=!0,this.setStep(Qe.KEY_HANDSHAKE_ACK),this.emit(pe.KEYS_EXCHANGED))}resetKeys(e){this.clean(),this.myECIES=new oy(e)}clean(){X.KeyExchange(`[KeyExchange: clean()] context=${this.context} reset handshake state`),this.setStep(Qe.KEY_HANDSHAKE_NONE),this.emit(pe.KEY_INFO,this.step),this.keysExchanged=!1}start({isOriginator:e,force:n}){const{relayPersistence:r,protocolVersion:i}=this.communicationLayer.remote.state,s=i>=2;r?X.KeyExchange("[KeyExchange: start()] Ignoring key exchange message because relay persistence is activated"):(X.KeyExchange(`[KeyExchange: start()] context=${this.context} protocolVersion=${i} isOriginator=${e} step=${this.step} force=${n} relayPersistence=${r} keysExchanged=${this.keysExchanged}`),e?!(this.keysExchanged||this.step!==Qe.KEY_HANDSHAKE_NONE&&this.step!==Qe.KEY_HANDSHAKE_SYNACK)||n?(X.KeyExchange(`[KeyExchange: start()] context=${this.context} -- start key exchange (force=${n}) -- step=${this.step}`,this.step),this.clean(),this.setStep(Qe.KEY_HANDSHAKE_SYNACK),this.communicationLayer.sendMessage({type:Qe.KEY_HANDSHAKE_SYN,pubkey:this.myPublicKey,v:2}).catch(o=>{X.KeyExchange("[KeyExchange: start()] Error sending KEY_HANDSHAKE_SYN",o)})):X.KeyExchange(`[KeyExchange: start()] context=${this.context} -- key exchange already ${this.keysExchanged?"done":"in progress"} -- aborted.`,this.step):this.keysExchanged&&n!==!0?X.KeyExchange("[KeyExchange: start()] don't send KEY_HANDSHAKE_START -- exchange already done."):s?this.communicationLayer.sendMessage({type:Qe.KEY_HANDSHAKE_SYNACK,pubkey:this.myPublicKey,v:2}).catch(o=>{X.KeyExchange("[KeyExchange: start()] Error sending KEY_HANDSHAKE_SYNACK",o)}):(this.communicationLayer.sendMessage({type:Qe.KEY_HANDSHAKE_START}).catch(o=>{X.KeyExchange("[KeyExchange: start()] Error sending KEY_HANDSHAKE_START",o)}),this.clean()))}setStep(e){this.step=e,this.emit(pe.KEY_INFO,e)}checkStep(e){e.length>0&&e.indexOf(this.step.toString())}setRelayPersistence({localKey:e,otherKey:n}){this.otherPublicKey=n,this.myECIES=new oy({privateKey:e,debug:this.debug}),this.keysExchanged=!0}setKeysExchanged(e){this.keysExchanged=e}areKeysExchanged(){return this.keysExchanged}getMyPublicKey(){return this.myPublicKey}getOtherPublicKey(){return this.otherPublicKey}setOtherPublicKey(e){X.KeyExchange("[KeyExchange: setOtherPubKey()]",e),this.otherPublicKey=e}encryptMessage(e){if(!this.otherPublicKey)throw new Error("encryptMessage: Keys not exchanged - missing otherPubKey");return this.myECIES.encrypt(e,this.otherPublicKey)}decryptMessage(e){if(!this.otherPublicKey)throw new Error("decryptMessage: Keys not exchanged - missing otherPubKey");return this.myECIES.decrypt(e)}getKeyInfo(){return{ecies:Object.assign(Object.assign({},this.myECIES.getKeyInfo()),{otherPubKey:this.otherPublicKey}),step:this.step,keysExchanged:this.areKeysExchanged()}}toString(){const e={keyInfo:this.getKeyInfo(),keysExchanged:this.keysExchanged,step:this.step};return JSON.stringify(e)}}(function(t){t.TERMINATE="terminate",t.ANSWER="answer",t.OFFER="offer",t.CANDIDATE="candidate",t.JSONRPC="jsonrpc",t.WALLET_INFO="wallet_info",t.WALLET_INIT="wallet_init",t.ORIGINATOR_INFO="originator_info",t.PAUSE="pause",t.OTP="otp",t.AUTHORIZED="authorized",t.PING="ping",t.READY="ready"})(ct||(ct={})),function(t){t.REQUEST="sdk_connect_request_started",t.REQUEST_MOBILE="sdk_connect_request_started_mobile",t.RECONNECT="sdk_reconnect_request_started",t.CONNECTED="sdk_connection_established",t.CONNECTED_MOBILE="sdk_connection_established_mobile",t.AUTHORIZED="sdk_connection_authorized",t.REJECTED="sdk_connection_rejected",t.TERMINATED="sdk_connection_terminated",t.DISCONNECTED="sdk_disconnected",t.SDK_USE_EXTENSION="sdk_use_extension",t.SDK_RPC_REQUEST="sdk_rpc_request",t.SDK_RPC_REQUEST_RECEIVED="sdk_rpc_request_received",t.SDK_RPC_REQUEST_DONE="sdk_rpc_request_done",t.SDK_EXTENSION_UTILIZED="sdk_extension_utilized",t.SDK_USE_INAPP_BROWSER="sdk_use_inapp_browser"}(St||(St={}));const Ap=(t,e,n)=>se(void 0,void 0,void 0,function*(){var r,i,s,o,a,l;const{remote:c,state:u}=t,{channelId:d,isOriginator:f}=u;if(e==="error_terminated")return X.SocketService(`handleJoinChannelResults: Channel ${d} terminated`),void t.emit(pe.TERMINATE);if(!n)return void X.SocketService(`handleJoinChannelResults: No result for channel ${d}`);const{persistence:h,walletKey:m,rejected:g}=n;if(X.SocketService(`handleJoinChannelResults: Channel ${d} persistence=${h} walletKey=${m} rejected=${g}`),g)return X.SocketService(`handleJoinChannelResults: Channel ${d} rejected`),yield t.remote.disconnect({terminate:!0}),t.remote.emit(pe.REJECTED,{channelId:d}),void t.remote.emitServiceStatusEvent();if(m&&!(!((r=c.state.channelConfig)===null||r===void 0)&&r.otherKey)){t.getKeyExchange().setOtherPublicKey(m),(i=t.state.keyExchange)===null||i===void 0||i.setKeysExchanged(!0),c.state.ready=!0,c.state.authorized=!0,c.emit(pe.AUTHORIZED);const{communicationLayer:w,storageManager:p}=c.state,v=Object.assign(Object.assign({},c.state.channelConfig),{channelId:(s=c.state.channelId)!==null&&s!==void 0?s:"",validUntil:Date.now()+yu,localKey:w==null?void 0:w.getKeyInfo().ecies.private,otherKey:m});t.sendMessage({type:Qe.KEY_HANDSHAKE_ACK}).catch(y=>{}),(o=t.state.socket)===null||o===void 0||o.emit(ct.PING,{id:d,clientType:f?"dapp":"wallet",context:"on_channel_reconnect",message:""}),yield p==null?void 0:p.persistChannelConfig(v),c.emitServiceStatusEvent(),c.setConnectionStatus(Gt.LINKED)}h&&(t.emit(pe.CHANNEL_PERSISTENCE),(a=t.state.keyExchange)===null||a===void 0||a.setKeysExchanged(!0),c.state.ready=!0,c.state.authorized=!0,c.emit(pe.AUTHORIZED),Ts(Object.assign(Object.assign({id:d??"",event:f?St.CONNECTED:St.CONNECTED_MOBILE},t.remote.state.originatorInfo),{sdkVersion:t.remote.state.sdkVersion,commLayer:t.state.communicationLayerPreference,commLayerVersion:Vo.version,walletVersion:(l=t.remote.state.walletInfo)===null||l===void 0?void 0:l.version}),u.communicationServerUrl).catch(w=>{}))}),fc=t=>new Promise(e=>{setTimeout(e,t)}),xS=(t,e,...n)=>se(void 0,[t,e,...n],void 0,function*(r,i,s=200){let o;const a=Date.now();let l=!1;for(;!l;){if(l=Date.now()-a>3e5,o=i[r],o.elapsedTime!==void 0)return o;yield fc(s)}throw new Error(`RPC ${r} timed out`)}),Pw=t=>se(void 0,void 0,void 0,function*(){const{state:e}=t,{socket:n,channelId:r,context:i,isOriginator:s,isReconnecting:o}=e;if(o)return X.SocketService("[SocketService: reconnectSocket()] Reconnection already in progress, skipping",t),!1;if(!n)return X.SocketService("[SocketService: reconnectSocket()] socket is not defined",t),!1;if(!r)return!1;const{connected:a}=n;e.isReconnecting=!0,e.reconnectionAttempts=0,X.SocketService(`[SocketService: reconnectSocket()] connected=${a} trying to reconnect after socketio disconnection`,t);try{for(;3>e.reconnectionAttempts;){if(X.SocketService(`[SocketService: reconnectSocket()] Attempt ${e.reconnectionAttempts+1} of 3`,t),yield fc(200),n.connected)return X.SocketService("Socket already connected --- ping to retrieve messages"),n.emit(ct.PING,{id:r,clientType:s?"dapp":"wallet",context:"on_channel_config",message:""}),!0;e.resumed=!0,n.connect(),t.emit(pe.SOCKET_RECONNECT);try{if(yield new Promise((l,c)=>{n.emit(pe.JOIN_CHANNEL,{channelId:r,context:`${i}connect_again`,clientType:s?"dapp":"wallet"},(u,d)=>se(void 0,void 0,void 0,function*(){try{yield Ap(t,u,d),l()}catch(f){c(f)}}))}),yield fc(100),n.connected)return X.SocketService(`Reconnection successful on attempt ${e.reconnectionAttempts+1}`),!0}catch(l){X.SocketService(`Error during reconnection attempt ${e.reconnectionAttempts+1}:`,l)}e.reconnectionAttempts+=1,3>e.reconnectionAttempts&&(yield fc(200))}return X.SocketService("Failed to reconnect after 3 attempts"),!1}finally{e.isReconnecting=!1,e.reconnectionAttempts=0}});function JP(t,e){return se(this,void 0,void 0,function*(){var n;const r=(n=t.state.keyExchange)===null||n===void 0?void 0:n.encryptMessage(JSON.stringify(e)),i={id:t.state.channelId,context:t.state.context,clientType:t.state.isOriginator?"dapp":"wallet",message:r,plaintext:t.state.hasPlaintext?JSON.stringify(e):void 0};return X.SocketService(`[SocketService: encryptAndSendMessage()] context=${t.state.context}`,i),e.type===ct.TERMINATE&&(t.state.manualDisconnect=!0),new Promise((s,o)=>{var a;(a=t.state.socket)===null||a===void 0||a.emit(pe.MESSAGE,i,(l,c)=>{var u;l&&(X.SocketService(`[SocketService: encryptAndSendMessage()] error=${l}`),o(l)),X.SocketService("[encryptAndSendMessage] response",c),s((u=c==null?void 0:c.success)!==null&&u!==void 0&&u)})})})}var Ql;(function(t){t.RPC_CHECK="rpcCheck",t.SKIPPED_RPC="skippedRpc"})(Ql||(Ql={}));const ZP=["eth_sendTransaction","eth_signTypedData","eth_signTransaction","personal_sign","wallet_requestPermissions","wallet_switchEthereumChain","eth_signTypedData_v3","eth_signTypedData_v4","metamask_connectSign","metamask_connectWith","metamask_batch"].map(t=>t.toLowerCase()),SD=[{event:pe.CLIENTS_CONNECTED,handler:function(t,e){return n=>se(this,void 0,void 0,function*(){var r,i,s,o,a,l,c,u,d,f,h;const m=(i=(r=t.remote.state.channelConfig)===null||r===void 0?void 0:r.relayPersistence)!==null&&i!==void 0&&i;if(X.SocketService(`[SocketService: handleClientsConnected()] context=${t.state.context} on 'clients_connected-${e}' relayPersistence=${m} resumed=${t.state.resumed}  clientsPaused=${t.state.clientsPaused} keysExchanged=${(s=t.state.keyExchange)===null||s===void 0?void 0:s.areKeysExchanged()} isOriginator=${t.state.isOriginator}`),t.emit(pe.CLIENTS_CONNECTED,{isOriginator:t.state.isOriginator,keysExchanged:(o=t.state.keyExchange)===null||o===void 0?void 0:o.areKeysExchanged(),context:t.state.context}),t.state.resumed)t.state.isOriginator||(X.SocketService(`[SocketService: handleClientsConnected()] context=${t.state.context} 'clients_connected' / keysExchanged=${(a=t.state.keyExchange)===null||a===void 0?void 0:a.areKeysExchanged()} -- backward compatibility`),(l=t.state.keyExchange)===null||l===void 0||l.start({isOriginator:(c=t.state.isOriginator)!==null&&c!==void 0&&c})),t.state.resumed=!1;else if(t.state.clientsPaused)X.SocketService("[SocketService: handleClientsConnected()] 'clients_connected' skip sending originatorInfo on pause");else if(!t.state.isOriginator){const g=!m;X.SocketService(`[SocketService: handleClientsConnected()] context=${t.state.context} on 'clients_connected' / keysExchanged=${(u=t.state.keyExchange)===null||u===void 0?void 0:u.areKeysExchanged()} -- force=${g} -- backward compatibility`),X.SocketService(`[SocketService: handleClientsConnected()] context=${t.state.context} on 'clients_connected' / keysExchanged=${(d=t.state.keyExchange)===null||d===void 0?void 0:d.areKeysExchanged()} -- force=${g} -- backward compatibility`),(f=t.state.keyExchange)===null||f===void 0||f.start({isOriginator:(h=t.state.isOriginator)!==null&&h!==void 0&&h,force:g})}t.state.clientsConnected=!0,t.state.clientsPaused=!1})}},{event:pe.CHANNEL_CREATED,handler:function(t,e){return n=>{X.SocketService(`[SocketService: handleChannelCreated()] context=${t.state.context} on 'channel_created-${e}'`,n),t.emit(pe.CHANNEL_CREATED,n)}}},{event:pe.CLIENTS_DISCONNECTED,handler:function(t,e){return()=>{var n;t.state.clientsConnected=!1,X.SocketService(`[SocketService: handlesClientsDisconnected()] context=${t.state.context} on 'clients_disconnected-${e}'`),t.remote.state.relayPersistence?X.SocketService(`[SocketService: handlesClientsDisconnected()] context=${t.state.context} on 'clients_disconnected-${e}' - relayPersistence enabled, skipping key exchange cleanup.`):(t.state.isOriginator&&!t.state.clientsPaused&&((n=t.state.keyExchange)===null||n===void 0||n.clean()),t.emit(pe.CLIENTS_DISCONNECTED,e))}}},{event:pe.CONFIG,handler:function(t,e){return n=>se(this,void 0,void 0,function*(){var r,i,s;X.SocketService(`[SocketService: handleChannelConfig()] update relayPersistence on 'config-${e}'`,n);const{persistence:o,walletKey:a}=n;t.state.isOriginator&&t.remote.state.channelConfig?(n.walletKey&&!t.remote.state.channelConfig.otherKey&&(X.SocketService(`Setting wallet key ${a}`),t.remote.state.channelConfig.otherKey=a,t.getKeyExchange().setOtherPublicKey(n.walletKey),(r=t.state.keyExchange)===null||r===void 0||r.setKeysExchanged(!0),yield t.remote.sendMessage({type:Qe.KEY_HANDSHAKE_ACK}),yield t.remote.sendMessage({type:ct.PING}),yield(i=t.remote.state.storageManager)===null||i===void 0?void 0:i.persistChannelConfig(t.remote.state.channelConfig)),o!==!0||t.remote.state.channelConfig.relayPersistence||(X.SocketService(`Setting relay persistence ${o}`),t.remote.state.channelConfig.relayPersistence=o,t.remote.state.relayPersistence=!0,t.remote.emit(pe.CHANNEL_PERSISTENCE),t.remote.state.authorized=!0,t.remote.state.ready=!0,t.remote.emit(pe.AUTHORIZED),yield(s=t.remote.state.storageManager)===null||s===void 0?void 0:s.persistChannelConfig(t.remote.state.channelConfig))):t.state.isOriginator||n.persistence&&(t.remote.state.relayPersistence=!0,t.remote.emit(pe.CHANNEL_PERSISTENCE))})}},{event:pe.MESSAGE,handler:function(t,e){return n=>{var r,i,s,o,a,l,c,u,d,f,h,m,g,w,p,v,y,C;const{ackId:P,message:L,error:j}=n,D=(r=t.remote.state.relayPersistence)!==null&&r!==void 0&&r;if(X.SocketService(`[SocketService handleMessage()]  relayPersistence=${D}  context=${t.state.context} on 'message' ${e} keysExchanged=${(i=t.state.keyExchange)===null||i===void 0?void 0:i.areKeysExchanged()}`,n),j)throw X.SocketService(`
      [SocketService handleMessage()] context=${t.state.context}::on 'message' error=${j}`),new Error(j);const V=typeof L=="string";if(!V&&(L==null?void 0:L.type)===Qe.KEY_HANDSHAKE_START)return D?void 0:(X.SocketService(`[SocketService handleMessage()] context=${t.state.context}::on 'message' received HANDSHAKE_START isOriginator=${t.state.isOriginator}`,L),void((s=t.state.keyExchange)===null||s===void 0||s.start({isOriginator:(o=t.state.isOriginator)!==null&&o!==void 0&&o,force:!0})));if(!V&&(!((a=L==null?void 0:L.type)===null||a===void 0)&&a.startsWith("key_handshake")))return D?void 0:(X.SocketService(`[SocketService handleMessage()] context=${t.state.context}::on 'message' emit KEY_EXCHANGE`,L),void t.emit(R0.KEY_EXCHANGE,{message:L,context:t.state.context}));if(V&&!(!((l=t.state.keyExchange)===null||l===void 0)&&l.areKeysExchanged())){let K=!1;try{X.SocketService(`[SocketService handleMessage()] context=${t.state.context}::on 'message' trying to decrypt message`),(c=t.state.keyExchange)===null||c===void 0||c.decryptMessage(L),K=!0}catch($){X.SocketService(`[SocketService handleMessage()] context=${t.state.context}::on 'message' error`,$)}if(!K)return t.state.isOriginator?(d=t.state.keyExchange)===null||d===void 0||d.start({isOriginator:(f=t.state.isOriginator)!==null&&f!==void 0&&f}):t.sendMessage({type:Qe.KEY_HANDSHAKE_START}).catch($=>{}),void X.SocketService(`Message ignored because invalid key exchange status. step=${(h=t.state.keyExchange)===null||h===void 0?void 0:h.getKeyInfo().step}`,(m=t.state.keyExchange)===null||m===void 0?void 0:m.getKeyInfo(),L);X.SocketService("Invalid key exchange status detected --- updating it."),(u=t.state.keyExchange)===null||u===void 0||u.setKeysExchanged(!0)}else if(!V&&(L!=null&&L.type))return void t.emit(pe.MESSAGE,L);if(!V)return void t.emit(pe.MESSAGE,L);const F=(g=t.state.keyExchange)===null||g===void 0?void 0:g.decryptMessage(L),W=JSON.parse(F??"{}");if(P&&(P==null?void 0:P.length)>0&&(X.SocketService(`[SocketService handleMessage()] context=${t.state.context}::on 'message' ackid=${P} channelId=${e}`),(w=t.state.socket)===null||w===void 0||w.emit(pe.MESSAGE_ACK,{ackId:P,channelId:e,clientType:t.state.isOriginator?"dapp":"wallet"})),t.state.clientsPaused=(W==null?void 0:W.type)===ct.PAUSE,t.state.isOriginator&&W.data){const K=W.data,$=t.state.rpcMethodTracker[K.id];if($){const M=Date.now()-$.timestamp;X.SocketService(`[SocketService handleMessage()] context=${t.state.context}::on 'message' received answer for id=${K.id} method=${$.method} responseTime=${M}`,W),t.remote.state.analytics&&ZP.includes($.method.toLowerCase())&&Ts(Object.assign(Object.assign({id:(p=t.remote.state.channelId)!==null&&p!==void 0?p:"",event:St.SDK_RPC_REQUEST_DONE,sdkVersion:t.remote.state.sdkVersion,commLayerVersion:Vo.version},t.remote.state.originatorInfo),{walletVersion:(v=t.remote.state.walletInfo)===null||v===void 0?void 0:v.version,params:{method:$.method,from:"mobile"}}),t.remote.state.communicationServerUrl).catch(O=>{}),Hf($.method)&&bt.analytics.track(K.error?K.error.code===4001?"sdk_action_rejected":"sdk_action_failed":"sdk_action_succeeded",{action:$.method});const x=Object.assign(Object.assign({},$),{result:K.result,error:K.error?{code:(y=K.error)===null||y===void 0?void 0:y.code,message:(C=K.error)===null||C===void 0?void 0:C.message}:void 0,elapsedTime:M});t.state.rpcMethodTracker[K.id]=x,t.emit(pe.RPC_UPDATE,x)}}t.emit(pe.MESSAGE,{message:W})}}},{event:pe.REJECTED,handler:function(t,e){return n=>se(this,void 0,void 0,function*(){var r;t.state.isOriginator&&!t.remote.state.ready?(X.SocketService(`[SocketService: handleChannelRejected()] context=${t.state.context} channelId=${e} isOriginator=${t.state.isOriginator} ready=${t.remote.state.ready}`,t.remote.state.originatorInfo),Ts(Object.assign(Object.assign({id:e,event:St.REJECTED},t.remote.state.originatorInfo),{sdkVersion:t.remote.state.sdkVersion,commLayer:t.state.communicationLayerPreference,commLayerVersion:Vo.version,walletVersion:(r=t.remote.state.walletInfo)===null||r===void 0?void 0:r.version}),t.remote.state.communicationServerUrl).catch(i=>{}),bt.analytics.track("sdk_connection_rejected",{transport_type:"websocket"}),yield t.remote.disconnect({terminate:!0}),t.remote.emit(pe.REJECTED,{channelId:e}),t.remote.setConnectionStatus(Gt.DISCONNECTED)):X.SocketService(`[SocketService: handleChannelRejected()] SKIP -- channelId=${e} isOriginator=${t.state.isOriginator} ready=${t.remote.state.ready}`)})}},{event:"clients_waiting_to_join",handler:function(t,e){return n=>{X.SocketService(`[SocketService: handleClientsWaitingToJoin()] context=${t.state.context} on 'clients_waiting_to_join-${e}'`,n),t.emit(pe.CLIENTS_WAITING,n)}}}],xD=[{event:pe.KEY_INFO,handler:function(t){return e=>{X.SocketService("[SocketService: handleKeyInfo()] on 'KEY_INFO'",e),t.emit(pe.KEY_INFO,e)}}},{event:pe.KEYS_EXCHANGED,handler:function(t){return()=>{var e,n,r;X.SocketService(`[SocketService: handleKeysExchanged()] on 'keys_exchanged' keyschanged=${(e=t.state.keyExchange)===null||e===void 0?void 0:e.areKeysExchanged()}`);const{channelConfig:i}=t.remote.state;if(i){const o=t.getKeyExchange().getKeyInfo().ecies;i.localKey=o.private,i.otherKey=o.otherPubKey,t.remote.state.channelConfig=i,(n=t.remote.state.storageManager)===null||n===void 0||n.persistChannelConfig(i).catch(a=>{})}t.emit(pe.KEYS_EXCHANGED,{keysExchanged:(r=t.state.keyExchange)===null||r===void 0?void 0:r.areKeysExchanged(),isOriginator:t.state.isOriginator});const s={keyInfo:t.getKeyInfo()};t.emit(pe.SERVICE_STATUS,s)}}}];function CS(t,e){X.SocketService(`[SocketService: setupChannelListener()] context=${t.state.context} setting socket listeners for channel ${e}...`);const{socket:n}=t.state,{keyExchange:r}=t.state;n&&t.state.isOriginator&&(t.state.debug&&(n==null||n.io.on("error",i=>{X.SocketService(`[SocketService: setupChannelListener()] context=${t.state.context} socket event=error`,i)}),n==null||n.io.on("reconnect",i=>{X.SocketService(`[SocketService: setupChannelListener()] context=${t.state.context} socket event=reconnect`,i),Pw(t).catch(s=>{})}),n==null||n.io.on("reconnect_error",i=>{X.SocketService(`[SocketService: setupChannelListener()] context=${t.state.context} socket event=reconnect_error`,i)}),n==null||n.io.on("reconnect_failed",()=>{X.SocketService(`[SocketService: setupChannelListener()] context=${t.state.context} socket event=reconnect_failed`)})),n==null||n.on("disconnect",i=>(X.SocketService(`[SocketService: setupChannelListener()] on 'disconnect' -- MetaMaskSDK socket disconnected '${i}' begin recovery...`),function(s){return o=>{X.SocketService(`[SocketService: handleDisconnect()] on 'disconnect' manualDisconnect=${s.state.manualDisconnect}`,o),s.state.manualDisconnect||(s.emit(pe.SOCKET_DISCONNECTED),Pw(s).catch(a=>{}))}}(t)(i)))),SD.forEach(({event:i,handler:s})=>{n==null||n.on(`${i}-${e}`,s(t,e))}),xD.forEach(({event:i,handler:s})=>{r==null||r.on(i,s(t))}),t.state.setupChannelListeners=!0}class CD extends Og.EventEmitter2{constructor(e){super(),this.state={clientsConnected:!1,clientsPaused:!1,manualDisconnect:!1,lastRpcId:void 0,rpcMethodTracker:{},hasPlaintext:!1,communicationServerUrl:"",focusListenerAdded:!1,removeFocusListener:void 0,isReconnecting:!1,reconnectionAttempts:0},this.options=e;const{reconnect:n,communicationLayerPreference:r,communicationServerUrl:i,context:s,remote:o,logging:a}=e;this.state.resumed=n,this.state.context=s,this.state.isOriginator=o.state.isOriginator,this.state.communicationLayerPreference=r,this.state.debug=(a==null?void 0:a.serviceLayer)===!0,this.remote=o,(a==null?void 0:a.serviceLayer)===!0&&Sn.enable("SocketService:Layer"),this.state.communicationServerUrl=i,this.state.hasPlaintext=this.state.communicationServerUrl!==mu&&(a==null?void 0:a.plaintext)===!0,X.SocketService(`[SocketService: constructor()] Socket IO url: ${this.state.communicationServerUrl}`),this.initSocket()}initSocket(){var e;const{otherPublicKey:n,ecies:r,logging:i}=this.options,s={autoConnect:!1,transports:wD,withCredentials:!0},o=this.state.communicationServerUrl;X.SocketService(`[SocketService: initSocket()] Socket IO url: ${o}`),this.state.socket=vp(o,s),function(l){if(typeof window<"u"&&typeof document<"u"&&(X.SocketService(`[SocketService: setupSocketFocusListener()] hasFocus=${document.hasFocus()}`,l),!l.state.focusListenerAdded)){const c=()=>{X.SocketService("Document has focus --- reconnecting socket"),Pw(l).catch(u=>{})};window.addEventListener("focus",c),l.state.focusListenerAdded=!0,l.state.removeFocusListener=()=>{window.removeEventListener("focus",c),l.state.focusListenerAdded=!1}}}(this);const a={communicationLayer:this,otherPublicKey:n,sendPublicKey:!1,context:(e=this.state.context)!==null&&e!==void 0?e:"",ecies:r,logging:i};this.state.keyExchange=new AD(a)}resetKeys(){return X.SocketService("[SocketService: resetKeys()] Resetting keys."),void((e=this.state.keyExchange)===null||e===void 0||e.resetKeys());var e}createChannel(){return se(this,void 0,void 0,function*(){return function(e){return se(this,void 0,void 0,function*(){var n,r,i;if(X.SocketService(`[SocketService: createChannel()] context=${e.state.context}`),e.state.socket||e.initSocket(),(n=e.state.socket)===null||n===void 0?void 0:n.connected)throw new Error("socket already connected");(r=e.state.socket)===null||r===void 0||r.connect(),e.state.manualDisconnect=!1,e.state.isOriginator=!0;const s=ro();e.state.channelId=s,CS(e,s),yield new Promise((a,l)=>{var c;(c=e.state.socket)===null||c===void 0||c.emit(pe.JOIN_CHANNEL,{channelId:s,context:`${e.state.context}createChannel`,clientType:"dapp"},(u,d)=>se(this,void 0,void 0,function*(){try{yield Ap(e,u,d),a()}catch(f){l(f)}}))});const o=(i=e.state.keyExchange)===null||i===void 0?void 0:i.getKeyInfo();return{channelId:s,pubKey:(o==null?void 0:o.ecies.public)||"",privKey:(o==null?void 0:o.ecies.private)||""}})}(this)})}connectToChannel({channelId:e,withKeyExchange:n=!1,authorized:r}){return function(i){return se(this,arguments,void 0,function*({options:s,instance:o}){const{channelId:a,authorized:l,withKeyExchange:c}=s,{state:u,remote:d}=o,{isOriginator:f=!1,socket:h,keyExchange:m}=u,{channelConfig:g}=d.state;if(h!=null&&h.connected)throw new Error("socket already connected");if(f&&(g!=null&&g.relayPersistence)){const{localKey:w,otherKey:p}=g;w&&p&&(m==null||m.setRelayPersistence({localKey:w,otherKey:p}))}return Object.assign(u,{manualDisconnect:!1,withKeyExchange:c,isOriginator:f,channelId:a}),h==null||h.connect(),CS(o,a),!f&&l&&(m==null||m.setKeysExchanged(!0),Object.assign(d.state,{ready:!0,authorized:!0})),new Promise(w=>{var p;const v=(p=m==null?void 0:m.getKeyInfo())===null||p===void 0?void 0:p.ecies.public;h==null||h.emit(pe.JOIN_CHANNEL,{channelId:a,context:`${u.context}_connectToChannel`,clientType:f?"dapp":"wallet",publicKey:l&&!f?v:void 0},(y,C)=>se(this,void 0,void 0,function*(){yield Ap(o,y,C),w()}))})})}({options:{channelId:e,withKeyExchange:n,authorized:r},instance:this})}getKeyInfo(){return this.state.keyExchange.getKeyInfo()}keyCheck(){var e,n;(n=(e=this).state.socket)===null||n===void 0||n.emit(pe.MESSAGE,{id:e.state.channelId,context:e.state.context,message:{type:Qe.KEY_HANDSHAKE_CHECK,pubkey:e.getKeyInfo().ecies.otherPubKey}})}getKeyExchange(){return this.state.keyExchange}sendMessage(e){return se(this,void 0,void 0,function*(){return function(n,r){return se(this,void 0,void 0,function*(){var i,s,o;if(!n.state.channelId)throw X.SocketService("handleSendMessage: no channelId - Create a channel first"),new Error("Create a channel first");if(X.SocketService(`[SocketService: handleSendMessage()] context=${n.state.context} areKeysExchanged=${(i=n.state.keyExchange)===null||i===void 0?void 0:i.areKeysExchanged()}`,r),(s=r==null?void 0:r.type)===null||s===void 0?void 0:s.startsWith("key_handshake"))return function(l,c){var u;X.SocketService(`[SocketService: handleKeyHandshake()] context=${l.state.context}`,c),(u=l.state.socket)===null||u===void 0||u.emit(pe.MESSAGE,{id:l.state.channelId,context:l.state.context,clientType:l.state.isOriginator?"dapp":"wallet",message:c})}(n,r),!0;(function(l,c){var u;if(!(!((u=l.state.keyExchange)===null||u===void 0)&&u.areKeysExchanged())&&!l.remote.state.relayPersistence)throw X.SocketService(`[SocketService: validateKeyExchange()] context=${l.state.context} ERROR keys not exchanged`,c),new Error("Keys not exchanged BBB")})(n,r),function(l,c){var u;const d=(u=c==null?void 0:c.method)!==null&&u!==void 0?u:"",f=c==null?void 0:c.id;l.state.isOriginator&&f&&(l.state.rpcMethodTracker[f]={id:f,timestamp:Date.now(),method:d},l.emit(pe.RPC_UPDATE,l.state.rpcMethodTracker[f]))}(n,r);const a=yield JP(n,r);return n.remote.state.analytics&&n.remote.state.isOriginator&&r.method&&ZP.includes(r.method.toLowerCase())&&Ts({id:(o=n.remote.state.channelId)!==null&&o!==void 0?o:"",event:St.SDK_RPC_REQUEST,params:{method:r.method,from:"mobile"}},n.remote.state.communicationServerUrl).catch(l=>{}),n.remote.state.isOriginator&&r.method&&Hf(r.method)&&bt.analytics.track("sdk_action_requested",{action:r.method}),function(l,c){return se(this,void 0,void 0,function*(){var u;const d=c==null?void 0:c.id,f=(u=c==null?void 0:c.method)!==null&&u!==void 0?u:"";if(l.state.isOriginator&&d)try{const h=xS(d,l.state.rpcMethodTracker,200).then(w=>({type:Ql.RPC_CHECK,result:w})),m=se(this,void 0,void 0,function*(){const w=yield(v=>se(void 0,[v],void 0,function*({rpcId:y,instance:C}){for(;C.state.lastRpcId===y||C.state.lastRpcId===void 0;)yield fc(200);return C.state.lastRpcId}))({instance:l,rpcId:d}),p=yield xS(w,l.state.rpcMethodTracker,200);return{type:Ql.SKIPPED_RPC,result:p}}),g=yield Promise.race([h,m]);if(g.type===Ql.RPC_CHECK){const w=g.result;X.SocketService(`[SocketService:handleRpcReplies()] id=${c.id} ${f} ( ${w.elapsedTime} ms)`,w.result)}else{if(g.type!==Ql.SKIPPED_RPC)throw new Error(`Error handling RPC replies for ${d}`);{const w=Object.assign(Object.assign({},l.state.rpcMethodTracker[d]),{error:new Error("SDK_CONNECTION_ISSUE")});l.emit(pe.RPC_UPDATE,w);const p={data:Object.assign(Object.assign({},w),{jsonrpc:"2.0"}),name:"metamask-provider"};l.emit(pe.MESSAGE,{message:p})}}}catch(h){throw h}})}(n,r).catch(l=>{}),a})}(this,e)})}ping(){return function(e){return se(this,void 0,void 0,function*(){var n,r;X.SocketService(`[SocketService: ping()] context=${e.state.context} originator=${e.state.isOriginator} keysExchanged=${(n=e.state.keyExchange)===null||n===void 0?void 0:n.areKeysExchanged()}`),(r=e.state.socket)===null||r===void 0||r.emit(ct.PING,{id:e.state.channelId,context:"ping",clientType:e.remote.state.isOriginator?"dapp":"wallet",message:""})})}(this)}pause(){return function(e){return se(this,void 0,void 0,function*(){var n,r;X.SocketService(`[SocketService: pause()] context=${e.state.context}`),e.state.manualDisconnect=!0,!((n=e.state.keyExchange)===null||n===void 0)&&n.areKeysExchanged()&&(yield e.sendMessage({type:ct.PAUSE})),(r=e.state.socket)===null||r===void 0||r.disconnect()})}(this)}isConnected(){var e;return(e=this.state.socket)===null||e===void 0?void 0:e.connected}resume(){return function(e){return se(this,void 0,void 0,function*(){const{state:n,remote:r}=e,{socket:i,channelId:s,context:o,keyExchange:a,isOriginator:l}=n,{isOriginator:c}=r.state;if(X.SocketService(`[SocketService: resume()] channelId=${s} context=${o} connected=${i==null?void 0:i.connected} manualDisconnect=${n.manualDisconnect} resumed=${n.resumed} keysExchanged=${a==null?void 0:a.areKeysExchanged()}`),!s)throw X.SocketService("[SocketService: resume()] channelId is not defined"),new Error("ChannelId is not defined");i!=null&&i.connected?(X.SocketService("[SocketService: resume()] already connected."),i.emit(ct.PING,{id:s,clientType:c?"dapp":"wallet",context:"on_channel_config",message:""}),r.hasRelayPersistence()||a!=null&&a.areKeysExchanged()||(l?yield e.sendMessage({type:ct.READY}):a==null||a.start({isOriginator:!1}))):(i==null||i.connect(),X.SocketService(`[SocketService: resume()] after connecting socket --> connected=${i==null?void 0:i.connected}`),i==null||i.emit(pe.JOIN_CHANNEL,{channelId:s,context:`${o}_resume`,clientType:c?"dapp":"wallet"},(u,d)=>se(this,void 0,void 0,function*(){try{yield Ap(e,u,d)}catch{}}))),n.manualDisconnect=!1,n.resumed=!0})}(this)}getRPCMethodTracker(){return this.state.rpcMethodTracker}disconnect(e){return function(n,r){var i,s,o,a,l;X.SocketService(`[SocketService: disconnect()] context=${n.state.context}`,r),r!=null&&r.terminate&&((s=(i=n.state).removeFocusListener)===null||s===void 0||s.call(i),n.state.channelId=r.channelId,(o=n.state.socket)===null||o===void 0||o.removeAllListeners(),(a=n.state.keyExchange)===null||a===void 0||a.clean(),n.remote.state.ready=!1,n.state.socket=void 0,n.state.rpcMethodTracker={}),n.state.manualDisconnect=!0,(l=n.state.socket)===null||l===void 0||l.disconnect()}(this,e)}}var sl,ln,kS;function kD(t){return()=>se(this,void 0,void 0,function*(){var e,n,r;const{state:i}=t;if(i.authorized)return;yield se(this,void 0,void 0,function*(){for(;!i.walletInfo;)yield fc(500)});const s="7.3".localeCompare(((e=i.walletInfo)===null||e===void 0?void 0:e.version)||"");if(X.RemoteCommunication(`[RemoteCommunication: handleAuthorizedEvent()] HACK 'authorized' version=${(n=i.walletInfo)===null||n===void 0?void 0:n.version} compareValue=${s}`),s!==1)return;const o=i.platformType===ln.MobileWeb||i.platformType===ln.ReactNative||i.platformType===ln.MetaMaskMobileWebview;X.RemoteCommunication(`[RemoteCommunication: handleAuthorizedEvent()] HACK 'authorized' platform=${i.platformType} secure=${o} channel=${i.channelId} walletVersion=${(r=i.walletInfo)===null||r===void 0?void 0:r.version}`),o&&(i.authorized=!0,t.emit(pe.AUTHORIZED))})}function _D(t){return e=>{const{state:n}=t;X.RemoteCommunication(`[RemoteCommunication: handleChannelCreatedEvent()] context=${n.context} on 'channel_created' channelId=${e}`),t.emit(pe.CHANNEL_CREATED,e)}}function TD(t,e){return()=>{var n,r,i,s;const{state:o}=t;X.RemoteCommunication(`[RemoteCommunication: handleClientsConnectedEvent()] on 'clients_connected' channel=${o.channelId} keysExchanged=${(r=(n=o.communicationLayer)===null||n===void 0?void 0:n.getKeyInfo())===null||r===void 0?void 0:r.keysExchanged}`),o.analytics&&Ts(Object.assign(Object.assign({id:(i=o.channelId)!==null&&i!==void 0?i:"",event:o.reconnection?St.RECONNECT:o.isOriginator?St.REQUEST:St.REQUEST_MOBILE},o.originatorInfo),{commLayer:e,sdkVersion:o.sdkVersion,walletVersion:(s=o.walletInfo)===null||s===void 0?void 0:s.version,commLayerVersion:Vo.version}),o.communicationServerUrl).catch(a=>{}),o.isOriginator&&!o.reconnection&&bt.analytics.track("sdk_connection_established",{transport_type:"websocket"}),o.clientsConnected=!0,o.originatorInfoSent=!1,t.emit(pe.CLIENTS_CONNECTED)}}function PD(t){return e=>{const{state:n}=t;X.RemoteCommunication(`[RemoteCommunication: handleClientsDisconnectedEvent()] context=${n.context} on 'clients_disconnected' channelId=${e}`),n.relayPersistence||(n.clientsConnected=!1,n.ready=!1,n.authorized=!1),t.emit(pe.CLIENTS_DISCONNECTED,n.channelId),t.setConnectionStatus(Gt.DISCONNECTED)}}function RD(t){return e=>{var n;const{state:r}=t;if(X.RemoteCommunication(`[RemoteCommunication: handleClientsWaitingEvent()] context=${r.context} on 'clients_waiting' numberUsers=${e} ready=${r.ready} autoStarted=${r.originatorConnectStarted}`),t.setConnectionStatus(Gt.WAITING),t.emit(pe.CLIENTS_WAITING,e),r.originatorConnectStarted){X.RemoteCommunication(`[RemoteCommunication: handleClientsWaitingEvent()] on 'clients_waiting' watch autoStarted=${r.originatorConnectStarted} timeout`,r.autoConnectOptions);const i=((n=r.autoConnectOptions)===null||n===void 0?void 0:n.timeout)||3e3,s=setTimeout(()=>{X.RemoteCommunication(`[RemoteCommunication: handleClientsWaitingEvent()] setTimeout(${i}) terminate channelConfig`,r.autoConnectOptions),r.originatorConnectStarted=!1,r.ready||t.setConnectionStatus(Gt.TIMEOUT),clearTimeout(s)},i)}}}function ID(t,e){return n=>{var r,i,s,o,a,l,c,u;const{state:d}=t;if(X.RemoteCommunication(`[RemoteCommunication: handleKeysExchangedEvent()] context=${d.context} on commLayer.'keys_exchanged' channel=${d.channelId}`,n),(i=(r=d.communicationLayer)===null||r===void 0?void 0:r.getKeyInfo())===null||i===void 0?void 0:i.keysExchanged){const f=Object.assign(Object.assign({},d.channelConfig),{channelId:(s=d.channelId)!==null&&s!==void 0?s:"",validUntil:((o=d.channelConfig)===null||o===void 0?void 0:o.validUntil)||yu,localKey:d.communicationLayer.getKeyInfo().ecies.private,otherKey:d.communicationLayer.getKeyInfo().ecies.otherPubKey});(a=d.storageManager)===null||a===void 0||a.persistChannelConfig(f).catch(h=>{}),t.setConnectionStatus(Gt.LINKED)}(function(f,h){var m,g,w,p,v,y,C,P;const{state:L}=f;X.RemoteCommunication(`[RemoteCommunication: setLastActiveDate()] channel=${L.channelId}`,h);const j=Object.assign(Object.assign({},L.channelConfig),{channelId:(m=L.channelId)!==null&&m!==void 0?m:"",validUntil:(w=(g=L.channelConfig)===null||g===void 0?void 0:g.validUntil)!==null&&w!==void 0?w:0,relayPersistence:L.relayPersistence,localKey:(v=(p=L.communicationLayer)===null||p===void 0?void 0:p.state.keyExchange)===null||v===void 0?void 0:v.getKeyInfo().ecies.private,otherKey:(C=(y=L.communicationLayer)===null||y===void 0?void 0:y.state.keyExchange)===null||C===void 0?void 0:C.getKeyInfo().ecies.otherPubKey,lastActive:h.getTime()});(P=L.storageManager)===null||P===void 0||P.persistChannelConfig(j)})(t,new Date),d.analytics&&d.channelId&&Ts(Object.assign(Object.assign({id:d.channelId,event:n.isOriginator?St.CONNECTED:St.CONNECTED_MOBILE},d.originatorInfo),{sdkVersion:d.sdkVersion,commLayer:e,commLayerVersion:Vo.version,walletVersion:(l=d.walletInfo)===null||l===void 0?void 0:l.version}),d.communicationServerUrl).catch(f=>{}),d.isOriginator=n.isOriginator,n.isOriginator||((c=d.communicationLayer)===null||c===void 0||c.sendMessage({type:ct.READY}),d.ready=!0,d.paused=!1),n.isOriginator&&!d.originatorInfoSent&&((u=d.communicationLayer)===null||u===void 0||u.sendMessage({type:ct.ORIGINATOR_INFO,originatorInfo:d.originatorInfo,originator:d.originatorInfo}),d.originatorInfoSent=!0)}}function OD(t){return e=>{let n=e;e.message&&(n=n.message),function(r,i){const{state:s}=i;if(X.RemoteCommunication(`[RemoteCommunication: onCommunicationLayerMessage()] context=${s.context} on 'message' typeof=${typeof r}`,r),i.state.ready=!0,s.isOriginator||r.type!==ct.ORIGINATOR_INFO)if(s.isOriginator&&r.type===ct.WALLET_INFO)(function(o,a){const{state:l}=o;l.walletInfo=a.walletInfo,l.paused=!1})(i,r);else{if(s.isOriginator&&r.type===ct.WALLET_INIT)(function(o,a){return se(this,void 0,void 0,function*(){var l,c,u;const{state:d}=o;if(d.isOriginator){const f=a.data||{};if(typeof f=="object"&&"accounts"in f&&"chainId"in f&&"walletKey"in f)try{const{channelConfig:h}=o.state;if(X.RemoteCommunication("WALLET_INIT: channelConfig",JSON.stringify(h,null,2)),h){const m=f.accounts,g=f.chainId,w=f.walletKey;let p,v=!1;"deeplinkProtocol"in f&&(v=!!f.deeplinkProtocol,o.state.deeplinkProtocolAvailable=v),"walletVersion"in f&&(p=f.walletVersion),yield(l=o.state.storageManager)===null||l===void 0?void 0:l.persistChannelConfig(Object.assign(Object.assign({},h),{otherKey:w,walletVersion:p,deeplinkProtocolAvailable:v,relayPersistence:!0})),yield(c=o.state.storageManager)===null||c===void 0?void 0:c.persistAccounts(m),yield(u=o.state.storageManager)===null||u===void 0?void 0:u.persistChainId(g)}o.emit(pe.WALLET_INIT,{accounts:f.accounts,chainId:f.chainId})}catch{}}})})(i,r).catch(o=>{X.RemoteCommunication(`[RemoteCommunication: onCommunicationLayerMessage()] error=${o}`)});else if(r.type===ct.TERMINATE)(function(o){return se(this,void 0,void 0,function*(){const{state:a}=o;a.isOriginator&&(yield XP({options:{terminate:!0,sendMessage:!1},instance:o}),o.emit(pe.TERMINATE))})})(i).catch(o=>{X.RemoteCommunication(`[RemoteCommunication: onCommunicationLayerMessage()] error=${o}`)});else if(r.type===ct.PAUSE)(function(o){const{state:a}=o;a.paused=!0,o.setConnectionStatus(Gt.PAUSED)})(i);else if(r.type===ct.READY&&s.isOriginator)(function(o){const{state:a}=o;o.setConnectionStatus(Gt.LINKED);const l=a.paused;a.paused=!1,o.emit(pe.CLIENTS_READY,{isOriginator:a.isOriginator,walletInfo:a.walletInfo}),l&&(a.authorized=!0,o.emit(pe.AUTHORIZED))})(i);else{if(r.type===ct.OTP&&s.isOriginator)return void function(o,a){var l;const{state:c}=o;o.emit(pe.OTP,a.otpAnswer),"6.6".localeCompare(((l=c.walletInfo)===null||l===void 0?void 0:l.version)||"")===1&&o.emit(pe.SDK_RPC_CALL,{method:en.ETH_REQUESTACCOUNTS,params:[]})}(i,r);r.type===ct.AUTHORIZED&&s.isOriginator&&function(o){const{state:a}=o;a.authorized=!0,o.emit(pe.AUTHORIZED)}(i)}i.emit(pe.MESSAGE,r)}else(function(o,a){var l;const{state:c}=o;(l=c.communicationLayer)===null||l===void 0||l.sendMessage({type:ct.WALLET_INFO,walletInfo:c.walletInfo}),c.originatorInfo=a.originatorInfo||a.originator,o.emit(pe.CLIENTS_READY,{isOriginator:c.isOriginator,originatorInfo:c.originatorInfo}),c.paused=!1})(i,r)}(n,t)}}function ND(t){return()=>{const{state:e}=t;X.RemoteCommunication("[RemoteCommunication: handleSocketReconnectEvent()] on 'socket_reconnect' -- reset key exchange status / set ready to false"),e.ready=!1,e.authorized=!1,YP(e),t.emitServiceStatusEvent({context:"socket_reconnect"})}}function MD(t){return()=>{const{state:e}=t;X.RemoteCommunication("[RemoteCommunication: handleSocketDisconnectedEvent()] on 'socket_Disconnected' set ready to false"),e.ready=!1}}function LD(t){return()=>se(this,void 0,void 0,function*(){var e,n,r,i,s,o,a;const{state:l}=t;X.RemoteCommunication(`[RemoteCommunication: handleFullPersistenceEvent()] context=${l.context}`),t.state.ready=!0,t.state.clientsConnected=!0,t.state.authorized=!0,t.state.relayPersistence=!0,(e=t.state.communicationLayer)===null||e===void 0||e.getKeyExchange().setKeysExchanged(!0),t.emit(pe.KEYS_EXCHANGED,{keysExchanged:!0,isOriginator:!0}),t.emit(pe.AUTHORIZED),t.emit(pe.CLIENTS_READY),t.emit(pe.CHANNEL_PERSISTENCE);try{l.channelConfig=Object.assign(Object.assign({},l.channelConfig),{localKey:(n=l.communicationLayer)===null||n===void 0?void 0:n.getKeyExchange().getKeyInfo().ecies.private,otherKey:(r=l.communicationLayer)===null||r===void 0?void 0:r.getKeyExchange().getOtherPublicKey(),channelId:(i=l.channelId)!==null&&i!==void 0?i:"",validUntil:(o=(s=l.channelConfig)===null||s===void 0?void 0:s.validUntil)!==null&&o!==void 0?o:yu,relayPersistence:!0}),yield(a=l.storageManager)===null||a===void 0?void 0:a.persistChannelConfig(l.channelConfig)}catch{}})}function _S({communicationLayerPreference:t,otherPublicKey:e,reconnect:n,ecies:r,communicationServerUrl:i=mu,instance:s}){var o,a,l,c,u,d,f,h,m,g,w;const{state:p}=s;if(X.RemoteCommunication("[initCommunicationLayer()] ",JSON.stringify(p,null,2)),t!==sl.SOCKET)throw new Error("Invalid communication protocol");p.communicationLayer=new CD({communicationLayerPreference:t,otherPublicKey:e,reconnect:n,transports:p.transports,communicationServerUrl:i,context:p.context,ecies:r,logging:p.logging,remote:s});let v=typeof document<"u"&&document.URL||"",y=typeof document<"u"&&document.title||"";!((o=p.dappMetadata)===null||o===void 0)&&o.url&&(v=p.dappMetadata.url),!((a=p.dappMetadata)===null||a===void 0)&&a.name&&(y=p.dappMetadata.name);const C=(d=(c=(l=p.dappMetadata)===null||l===void 0?void 0:l.name)!==null&&c!==void 0?c:(u=p.dappMetadata)===null||u===void 0?void 0:u.url)!==null&&d!==void 0?d:"N/A",P=typeof window<"u"&&window.location!==void 0&&(f=window.location.hostname)!==null&&f!==void 0?f:C,L={url:v,title:y,source:(h=p.dappMetadata)===null||h===void 0?void 0:h.source,dappId:P,anonId:p.anonId,icon:((m=p.dappMetadata)===null||m===void 0?void 0:m.iconUrl)||((g=p.dappMetadata)===null||g===void 0?void 0:g.base64Icon),platform:p.platformType,apiVersion:Vo.version,connector:(w=p.dappMetadata)===null||w===void 0?void 0:w.connector};p.originatorInfo=L;const j={[pe.AUTHORIZED]:kD(s),[pe.MESSAGE]:OD(s),[pe.CHANNEL_PERSISTENCE]:LD(s),[pe.CLIENTS_CONNECTED]:TD(s,t),[pe.KEYS_EXCHANGED]:ID(s,t),[pe.SOCKET_DISCONNECTED]:MD(s),[pe.SOCKET_RECONNECT]:ND(s),[pe.CLIENTS_DISCONNECTED]:PD(s),[pe.KEY_INFO]:()=>{},[pe.CHANNEL_CREATED]:_D(s),[pe.CLIENTS_WAITING]:RD(s),[pe.RPC_UPDATE]:D=>{s.emit(pe.RPC_UPDATE,D)}};for(const[D,V]of Object.entries(j))try{p.communicationLayer.on(D,V)}catch{}}function XP(t){return se(this,arguments,void 0,function*({options:e,instance:n}){const{state:r}=n;return X.RemoteCommunication(`[RemoteCommunication: disconnect()] channel=${r.channelId}`,e),new Promise((i,s)=>{var o,a,l,c,u,d;e!=null&&e.terminate?(n.state.ready&&Ts({id:(o=n.state.channelId)!==null&&o!==void 0?o:"",event:St.TERMINATED},n.state.communicationServerUrl).catch(f=>{}),r.ready=!1,r.paused=!1,(a=r.storageManager)===null||a===void 0||a.terminate((l=r.channelId)!==null&&l!==void 0?l:""),n.state.terminated=!0,e.sendMessage?!((c=r.communicationLayer)===null||c===void 0)&&c.getKeyInfo().keysExchanged&&n.state.communicationLayer&&JP(n.state.communicationLayer,{type:ct.TERMINATE}).then(()=>{i(!0)}).catch(f=>{s(f)}):i(!0),r.authorized=!1,r.relayPersistence=!1,r.channelId=ro(),e.channelId=r.channelId,r.channelConfig=void 0,r.originatorConnectStarted=!1,(u=r.communicationLayer)===null||u===void 0||u.disconnect(e),n.setConnectionStatus(Gt.TERMINATED)):((d=r.communicationLayer)===null||d===void 0||d.disconnect(e),n.setConnectionStatus(Gt.DISCONNECTED),i(!0))})})}(sl||(sl={})).SOCKET="socket",function(t){t.NonBrowser="nodejs",t.MetaMaskMobileWebview="in-app-browser",t.DesktopWeb="web-desktop",t.MobileWeb="web-mobile",t.ReactNative="react-native"}(ln||(ln={}));class BD extends Og.EventEmitter2{constructor(e){super(),this.state={ready:!1,anonId:"",authorized:!1,isOriginator:!1,terminated:!1,protocolVersion:1,paused:!1,deeplinkProtocolAvailable:!1,platformType:"metamask-mobile",analytics:!1,reconnection:!1,originatorInfoSent:!1,communicationServerUrl:mu,context:"",persist:!1,clientsConnected:!1,sessionDuration:yu,originatorConnectStarted:!1,debug:!1,_connectionStatus:Gt.DISCONNECTED},this._options=e;const{anonId:n,platformType:r,communicationLayerPreference:i,otherPublicKey:s,reconnect:o,walletInfo:a,dappMetadata:l,protocolVersion:c,transports:u,context:d,relayPersistence:f,ecies:h,analytics:m=!1,storage:g,sdkVersion:w,communicationServerUrl:p=mu,logging:v,autoConnect:y={timeout:bD}}=e;this.state.anonId=n,this.state.otherPublicKey=s,this.state.dappMetadata=l,this.state.walletInfo=a,this.state.transports=u,this.state.platformType=r,this.state.analytics=m,this.state.protocolVersion=c??1,this.state.isOriginator=!s,this.state.relayPersistence=f,this.state.communicationServerUrl=p,this.state.context=d,this.state.terminated=!1,this.state.sdkVersion=w,this.setMaxListeners(50),this.setConnectionStatus(Gt.DISCONNECTED),g!=null&&g.duration&&(this.state.sessionDuration=yu),this.state.storageOptions=g,this.state.autoConnectOptions=y,this.state.debug=(v==null?void 0:v.remoteLayer)===!0,(v==null?void 0:v.remoteLayer)===!0&&Sn.enable("RemoteCommunication:Layer"),(v==null?void 0:v.serviceLayer)===!0&&Sn.enable("SocketService:Layer"),(v==null?void 0:v.eciesLayer)===!0&&Sn.enable("ECIES:Layer"),(v==null?void 0:v.keyExchangeLayer)===!0&&Sn.enable("KeyExchange:Layer"),this.state.logging=v,g!=null&&g.storageManager&&(this.state.storageManager=g.storageManager),X.RemoteCommunication(`[RemoteCommunication: constructor()] protocolVersion=${c} relayPersistence=${f} isOriginator=${this.state.isOriginator} communicationLayerPreference=${i} otherPublicKey=${s} reconnect=${o}`),this.state.isOriginator||_S({communicationLayerPreference:i,otherPublicKey:s,reconnect:o,ecies:h,communicationServerUrl:p,instance:this}),this.emitServiceStatusEvent({context:"constructor"})}initFromDappStorage(){return se(this,void 0,void 0,function*(){var e;if(this.state.storageManager){const n=yield this.state.storageManager.getPersistedChannelConfig({});n&&(this.state.channelConfig=n,this.state.channelId=n.channelId,this.state.deeplinkProtocolAvailable=(e=n.deeplinkProtocolAvailable)!==null&&e!==void 0&&e,n.relayPersistence&&(this.state.authorized=!0,this.state.ready=!0,this.setConnectionStatus(Gt.LINKED),yield this.connectToChannel({channelId:n.channelId})))}_S({communicationLayerPreference:sl.SOCKET,otherPublicKey:this.state.otherPublicKey,reconnect:this._options.reconnect,ecies:this._options.ecies,communicationServerUrl:this.state.communicationServerUrl,instance:this})})}originatorSessionConnect(){return se(this,void 0,void 0,function*(){return yield function(e){return se(this,void 0,void 0,function*(){var n;const{state:r}=e;if(!r.storageManager)return void X.RemoteCommunication("[RemoteCommunication: originatorSessionConnect()] no storage manager defined - skip");const i=yield r.storageManager.getPersistedChannelConfig({});if(X.RemoteCommunication(`[RemoteCommunication: originatorSessionConnect()] autoStarted=${r.originatorConnectStarted} channelConfig`,i),(n=r.communicationLayer)===null||n===void 0?void 0:n.isConnected())return X.RemoteCommunication("[RemoteCommunication: originatorSessionConnect()] socket already connected - skip"),i;if(i){if(i.validUntil>Date.now())return r.channelConfig=i,r.originatorConnectStarted=!0,r.channelId=i==null?void 0:i.channelId,r.reconnection=!0,i;X.RemoteCommunication("[RemoteCommunication: autoConnect()] Session has expired")}r.originatorConnectStarted=!1})}(this)})}generateChannelIdConnect(){return se(this,void 0,void 0,function*(){return function(e){return se(this,void 0,void 0,function*(){var n,r,i,s,o,a;if(!e.communicationLayer)throw new Error("communication layer not initialized");if(e.ready)throw new Error("Channel already connected");if(e.channelId&&(!((n=e.communicationLayer)===null||n===void 0)&&n.isConnected()))return e.channelConfig=Object.assign(Object.assign({},e.channelConfig),{channelId:e.channelId,validUntil:Date.now()+e.sessionDuration}),(r=e.storageManager)===null||r===void 0||r.persistChannelConfig(e.channelConfig),{channelId:e.channelId,privKey:(s=(i=e.communicationLayer)===null||i===void 0?void 0:i.getKeyInfo())===null||s===void 0?void 0:s.ecies.private,pubKey:(a=(o=e.communicationLayer)===null||o===void 0?void 0:o.getKeyInfo())===null||a===void 0?void 0:a.ecies.public};X.RemoteCommunication("[RemoteCommunication: generateChannelId()]");const l=yield e.communicationLayer.createChannel();X.RemoteCommunication("[RemoteCommunication: generateChannelId()] channel created",l);const c=Object.assign(Object.assign({},e.channelConfig),{channelId:l.channelId,localKey:l.privKey,validUntil:Date.now()+e.sessionDuration});return e.channelId=l.channelId,e.channelConfig=c,{channelId:e.channelId,pubKey:l.pubKey,privKey:l.privKey}})}(this.state)})}clean(){return YP(this.state)}connectToChannel({channelId:e,withKeyExchange:n,authorized:r}){return function(i){return se(this,arguments,void 0,function*({channelId:s,withKeyExchange:o,authorized:a,state:l}){var c,u,d;if(!dw(s))throw X.RemoteCommunication(`[RemoteCommunication: connectToChannel()] context=${l.context} invalid channel channelId=${s}`),new Error(`Invalid channel ${s}`);if(X.RemoteCommunication(`[RemoteCommunication: connectToChannel()] context=${l.context} channelId=${s} withKeyExchange=${o}`),(c=l.communicationLayer)===null||c===void 0?void 0:c.isConnected())return void X.RemoteCommunication(`[RemoteCommunication: connectToChannel()] context=${l.context} already connected - interrupt connection.`);l.channelId=s,yield(u=l.communicationLayer)===null||u===void 0?void 0:u.connectToChannel({channelId:s,authorized:a,withKeyExchange:o});const f=Object.assign(Object.assign({},l.channelConfig),{channelId:s,validUntil:Date.now()+l.sessionDuration});l.channelConfig=f,(d=l.storageManager)===null||d===void 0||d.persistChannelConfig(f)})}({channelId:e,authorized:r,withKeyExchange:n,state:this.state})}sendMessage(e){return se(this,void 0,void 0,function*(){const n=this.state.isOriginator&&e.method&&Hf(e.method);n&&bt.analytics.track("sdk_action_requested",{action:e.method});try{return yield function(r,i){return se(this,void 0,void 0,function*(){var s,o;const{state:a}=r;X.RemoteCommunication(`[RemoteCommunication: sendMessage()] context=${a.context} paused=${a.paused} ready=${a.ready} relayPersistence=${a.relayPersistence} authorized=${a.authorized} socket=${(s=a.communicationLayer)===null||s===void 0?void 0:s.isConnected()} clientsConnected=${a.clientsConnected} status=${a._connectionStatus}`,i),a.relayPersistence||a.ready&&(!((o=a.communicationLayer)===null||o===void 0)&&o.isConnected())&&a.clientsConnected||(X.RemoteCommunication(`[RemoteCommunication: sendMessage()] context=${a.context}  SKIP message waiting for MM mobile readiness.`),yield new Promise(l=>{r.once(pe.CLIENTS_READY,l)}),X.RemoteCommunication(`[RemoteCommunication: sendMessage()] context=${a.context}  AFTER SKIP / READY -- sending pending message`));try{return yield function(c,u){return se(this,void 0,void 0,function*(){return new Promise(d=>{var f;const{state:h}=c;X.RemoteCommunication(`[RemoteCommunication: handleAuthorization()] context=${h.context} ready=${h.ready} authorized=${h.authorized} method=${u.method}`),!h.isOriginator||h.authorized||h.relayPersistence?(f=h.communicationLayer)===null||f===void 0||f.sendMessage(u).then(m=>{d(m)}).catch(m=>{d(!1)}):c.once(pe.AUTHORIZED,()=>{var m;X.RemoteCommunication(`[RemoteCommunication: handleAuthorization()] context=${h.context}  AFTER SKIP / AUTHORIZED -- sending pending message`),(m=h.communicationLayer)===null||m===void 0||m.sendMessage(u).then(g=>{d(g)}).catch(g=>{d(!1)})})})})}(r,i)}catch(l){throw l}})}(this,e)}catch(r){throw n&&bt.analytics.track("sdk_action_failed",{action:e.method}),r}})}testStorage(){return se(this,void 0,void 0,function*(){return function(e){return se(this,void 0,void 0,function*(){var n;const r=yield(n=e.storageManager)===null||n===void 0?void 0:n.getPersistedChannelConfig();X.RemoteCommunication("[RemoteCommunication: testStorage()] res",r)})}(this.state)})}hasDeeplinkProtocol(){return this.state.deeplinkProtocolAvailable}getChannelConfig(){return this.state.channelConfig}isReady(){return this.state.ready}isConnected(){var e;return(e=this.state.communicationLayer)===null||e===void 0?void 0:e.isConnected()}isAuthorized(){return this.state.authorized}isPaused(){return this.state.paused}getCommunicationLayer(){return this.state.communicationLayer}ping(){return se(this,void 0,void 0,function*(){var e;X.RemoteCommunication(`[RemoteCommunication: ping()] channel=${this.state.channelId}`),yield(e=this.state.communicationLayer)===null||e===void 0?void 0:e.ping()})}testLogger(){X.RemoteCommunication(`testLogger() channel=${this.state.channelId}`),X.SocketService(`testLogger() channel=${this.state.channelId}`),X.Ecies(`testLogger() channel=${this.state.channelId}`),X.KeyExchange(`testLogger() channel=${this.state.channelId}`)}keyCheck(){var e;X.RemoteCommunication(`[RemoteCommunication: keyCheck()] channel=${this.state.channelId}`),(e=this.state.communicationLayer)===null||e===void 0||e.keyCheck()}setConnectionStatus(e){this.state._connectionStatus!==e&&(this.state._connectionStatus=e,this.emit(pe.CONNECTION_STATUS,e),this.emitServiceStatusEvent({context:"setConnectionStatus"}))}emitServiceStatusEvent(e={}){this.emit(pe.SERVICE_STATUS,this.getServiceStatus())}getConnectionStatus(){return this.state._connectionStatus}getServiceStatus(){return{originatorInfo:this.state.originatorInfo,keyInfo:this.getKeyInfo(),connectionStatus:this.state._connectionStatus,channelConfig:this.state.channelConfig,channelId:this.state.channelId}}getKeyInfo(){var e;return(e=this.state.communicationLayer)===null||e===void 0?void 0:e.getKeyInfo()}resetKeys(){var e;(e=this.state.communicationLayer)===null||e===void 0||e.resetKeys()}setOtherPublicKey(e){var n;const r=(n=this.state.communicationLayer)===null||n===void 0?void 0:n.getKeyExchange();if(!r)throw new Error("KeyExchange is not initialized.");r.getOtherPublicKey()!==e&&r.setOtherPublicKey(e)}pause(){return se(this,void 0,void 0,function*(){var e;X.RemoteCommunication(`[RemoteCommunication: pause()] channel=${this.state.channelId}`),yield(e=this.state.communicationLayer)===null||e===void 0?void 0:e.pause(),this.setConnectionStatus(Gt.PAUSED)})}getVersion(){return Vo.version}hasRelayPersistence(){var e;return(e=this.state.relayPersistence)!==null&&e!==void 0&&e}resume(){return se(this,void 0,void 0,function*(){return function(e){return se(this,void 0,void 0,function*(){var n;const{state:r}=e;X.RemoteCommunication(`[RemoteCommunication: resume()] channel=${r.channelId}`),yield(n=r.communicationLayer)===null||n===void 0?void 0:n.resume(),e.setConnectionStatus(Gt.LINKED)})}(this)})}encrypt(e){var n,r,i;const s=(n=this.state.communicationLayer)===null||n===void 0?void 0:n.getKeyExchange(),o=s==null?void 0:s.getOtherPublicKey();if(!o)throw new Error("KeyExchange not completed");return(i=(r=this.state.communicationLayer)===null||r===void 0?void 0:r.state.eciesInstance)===null||i===void 0?void 0:i.encrypt(e,o)}decrypt(e){var n,r,i;if(!(!((n=this.state.communicationLayer)===null||n===void 0)&&n.state.eciesInstance))throw new Error("ECIES instance is not initialized");return(i=(r=this.state.communicationLayer)===null||r===void 0?void 0:r.state.eciesInstance)===null||i===void 0?void 0:i.decrypt(e)}getChannelId(){return this.state.channelId}getRPCMethodTracker(){var e;return(e=this.state.communicationLayer)===null||e===void 0?void 0:e.getRPCMethodTracker()}reject({channelId:e}){return function(n){return se(this,arguments,void 0,function*({channelId:r,state:i}){var s,o,a;if(!dw(r))throw X.RemoteCommunication(`[RemoteCommunication: connectToChannel()] context=${i.context} invalid channel channelId=${r}`),new Error(`Invalid channel ${r}`);if(i.isOriginator)return void X.RemoteCommunication(`[RemoteCommunication: reject()] context=${i.context} isOriginator=${i.isOriginator} channelId=${r}`);const{socket:l}=(o=(s=i.communicationLayer)===null||s===void 0?void 0:s.state)!==null&&o!==void 0?o:{};l!=null&&l.connected||(X.RemoteCommunication(`[RemoteCommunication: reject()] context=${i.context} socket already connected`),l==null||l.connect()),Ts(Object.assign(Object.assign({id:r,event:St.REJECTED},i.originatorInfo),{sdkVersion:i.sdkVersion,commLayerVersion:Vo.version,walletVersion:(a=i.walletInfo)===null||a===void 0?void 0:a.version}),i.communicationServerUrl).catch(c=>{}),yield new Promise((c,u)=>{l==null||l.emit(pe.REJECTED,{channelId:r},(d,f)=>{X.RemoteCommunication(`[RemoteCommunication: reject()] context=${i.context} socket=${l==null?void 0:l.id}`,{error:d,response:f}),d?u(d):c(f)})})})}({channelId:e,state:this.state})}disconnect(e){return se(this,void 0,void 0,function*(){return XP({options:e,instance:this})})}}(function(t){t.RENEW="renew",t.LINK="link"})(kS||(kS={}));var DD="ERC721",$D="ERC1155",yt={errors:{disconnected:()=>"MetaMask: Disconnected from chain. Attempting to connect.",permanentlyDisconnected:()=>"MetaMask: Disconnected from MetaMask background. Page reload required.",sendSiteMetadata:()=>"MetaMask: Failed to send site metadata. This is an internal error, please report this bug.",unsupportedSync:t=>`MetaMask: The MetaMask Ethereum provider does not support synchronous methods like ${t} without a callback parameter.`,invalidDuplexStream:()=>"Must provide a Node.js-style duplex stream.",invalidNetworkParams:()=>"MetaMask: Received invalid network parameters. Please report this bug.",invalidRequestArgs:()=>"Expected a single, non-array, object argument.",invalidRequestMethod:()=>"'args.method' must be a non-empty string.",invalidRequestParams:()=>"'args.params' must be an object or array if provided.",invalidLoggerObject:()=>"'args.logger' must be an object if provided.",invalidLoggerMethod:t=>`'args.logger' must include required method '${t}'.`},info:{connected:t=>`MetaMask: Connected to chain with ID "${t}".`},warnings:{chainIdDeprecation:`MetaMask: 'ethereum.chainId' is deprecated and may be removed in the future. Please use the 'eth_chainId' RPC method instead.
For more information, see: https://github.com/MetaMask/metamask-improvement-proposals/discussions/23`,networkVersionDeprecation:`MetaMask: 'ethereum.networkVersion' is deprecated and may be removed in the future. Please use the 'net_version' RPC method instead.
For more information, see: https://github.com/MetaMask/metamask-improvement-proposals/discussions/23`,selectedAddressDeprecation:`MetaMask: 'ethereum.selectedAddress' is deprecated and may be removed in the future. Please use the 'eth_accounts' RPC method instead.
For more information, see: https://github.com/MetaMask/metamask-improvement-proposals/discussions/23`,enableDeprecation:`MetaMask: 'ethereum.enable()' is deprecated and may be removed in the future. Please use the 'eth_requestAccounts' RPC method instead.
For more information, see: https://eips.ethereum.org/EIPS/eip-1102`,sendDeprecation:`MetaMask: 'ethereum.send(...)' is deprecated and may be removed in the future. Please use 'ethereum.sendAsync(...)' or 'ethereum.request(...)' instead.
For more information, see: https://eips.ethereum.org/EIPS/eip-1193`,events:{close:`MetaMask: The event 'close' is deprecated and may be removed in the future. Please use 'disconnect' instead.
For more information, see: https://eips.ethereum.org/EIPS/eip-1193#disconnect`,data:`MetaMask: The event 'data' is deprecated and will be removed in the future. Use 'message' instead.
For more information, see: https://eips.ethereum.org/EIPS/eip-1193#message`,networkChanged:`MetaMask: The event 'networkChanged' is deprecated and may be removed in the future. Use 'chainChanged' instead.
For more information, see: https://eips.ethereum.org/EIPS/eip-1193#chainchanged`,notification:`MetaMask: The event 'notification' is deprecated and may be removed in the future. Use 'message' instead.
For more information, see: https://eips.ethereum.org/EIPS/eip-1193#message`},rpc:{ethDecryptDeprecation:`MetaMask: The RPC method 'eth_decrypt' is deprecated and may be removed in the future.
For more information, see: https://medium.com/metamask/metamask-api-method-deprecation-2b0564a84686`,ethGetEncryptionPublicKeyDeprecation:`MetaMask: The RPC method 'eth_getEncryptionPublicKey' is deprecated and may be removed in the future.
For more information, see: https://medium.com/metamask/metamask-api-method-deprecation-2b0564a84686`,walletWatchAssetNFTExperimental:`MetaMask: The RPC method 'wallet_watchAsset' is experimental for ERC721/ERC1155 assets and may change in the future.
For more information, see: https://github.com/MetaMask/metamask-improvement-proposals/blob/main/MIPs/mip-1.md and https://github.com/MetaMask/metamask-improvement-proposals/blob/main/PROCESS-GUIDE.md#proposal-lifecycle`},experimentalMethods:"MetaMask: 'ethereum._metamask' exposes non-standard, experimental methods. They may be removed or changed without warning."}};function UD(t){const e={ethDecryptDeprecation:!1,ethGetEncryptionPublicKeyDeprecation:!1,walletWatchAssetNFTExperimental:!1};return(n,r,i)=>{var s;e.ethDecryptDeprecation||n.method!=="eth_decrypt"?e.ethGetEncryptionPublicKeyDeprecation||n.method!=="eth_getEncryptionPublicKey"?!e.walletWatchAssetNFTExperimental&&n.method==="wallet_watchAsset"&&[DD,$D].includes(((s=n.params)==null?void 0:s.type)||"")&&(t.warn(yt.warnings.rpc.walletWatchAssetNFTExperimental),e.walletWatchAssetNFTExperimental=!0):(t.warn(yt.warnings.rpc.ethGetEncryptionPublicKeyDeprecation),e.ethGetEncryptionPublicKeyDeprecation=!0):(t.warn(yt.warnings.rpc.ethDecryptDeprecation),e.ethDecryptDeprecation=!0),i()}}var eR=4294967295,TS=Math.floor(Math.random()*eR);function FD(){return(t,e,n,r)=>{const i=t.id,s=TS=(TS+1)%eR;t.id=s,e.id=s,n(o=>{t.id=i,e.id=i,o()})}}var _b=(t,e,n)=>{if(!e.has(t))throw TypeError("Cannot "+n)},so=(t,e,n)=>(_b(t,e,"read from private field"),n?n.call(t):e.get(t)),Yr=(t,e,n)=>{if(e.has(t))throw TypeError("Cannot add the same private member more than once");e instanceof WeakSet?e.add(t):e.set(t,n)},Uh=(t,e,n,r)=>(_b(t,e,"write to private field"),e.set(t,n),n),pn=(t,e,n)=>(_b(t,e,"access private method"),n),Js={invalidInput:-32e3,resourceNotFound:-32001,resourceUnavailable:-32002,transactionRejected:-32003,methodNotSupported:-32004,limitExceeded:-32005,parse:-32700,invalidRequest:-32600,methodNotFound:-32601,invalidParams:-32602,internal:-32603},PS={"-32700":{standard:"JSON RPC 2.0",message:"Invalid JSON was received by the server. An error occurred on the server while parsing the JSON text."},"-32600":{standard:"JSON RPC 2.0",message:"The JSON sent is not a valid Request object."},"-32601":{standard:"JSON RPC 2.0",message:"The method does not exist / is not available."},"-32602":{standard:"JSON RPC 2.0",message:"Invalid method parameter(s)."},"-32603":{standard:"JSON RPC 2.0",message:"Internal JSON-RPC error."},"-32000":{standard:"EIP-1474",message:"Invalid input."},"-32001":{standard:"EIP-1474",message:"Resource not found."},"-32002":{standard:"EIP-1474",message:"Resource unavailable."},"-32003":{standard:"EIP-1474",message:"Transaction rejected."},"-32004":{standard:"EIP-1474",message:"Method not supported."},"-32005":{standard:"EIP-1474",message:"Request limit exceeded."},4001:{standard:"EIP-1193",message:"User rejected the request."},4100:{standard:"EIP-1193",message:"The requested account and/or method has not been authorized by the user."},4200:{standard:"EIP-1193",message:"The requested method is not supported by this Ethereum provider."},4900:{standard:"EIP-1193",message:"The provider is disconnected from all chains."},4901:{standard:"EIP-1193",message:"The provider is disconnected from the specified chain."}};function RS(t){return!!t&&typeof t=="object"&&!Array.isArray(t)}var I0=(t,e)=>Object.hasOwnProperty.call(t,e);class jD extends TypeError{constructor(e,n){let r;const{message:i,explanation:s,...o}=e,{path:a}=e,l=a.length===0?i:`At path: ${a.join(".")} -- ${i}`;super(s??l),s!=null&&(this.cause=l),Object.assign(this,o),this.name=this.constructor.name,this.failures=()=>r??(r=[e,...n()])}}function Es(t){return typeof t=="object"&&t!=null}function Fi(t){return typeof t=="symbol"?t.toString():typeof t=="string"?JSON.stringify(t):`${t}`}function HD(t,e,n,r){if(t===!0)return;t===!1?t={}:typeof t=="string"&&(t={message:t});const{path:i,branch:s}=e,{type:o}=n,{refinement:a,message:l=`Expected a value of type \`${o}\`${a?` with refinement \`${a}\``:""}, but received: \`${Fi(r)}\``}=t;return{value:r,type:o,refinement:a,key:i[i.length-1],path:i,branch:s,...t,message:l}}function*IS(t,e,n,r){(function(i){return Es(i)&&typeof i[Symbol.iterator]=="function"})(t)||(t=[t]);for(const i of t){const s=HD(i,e,n,r);s&&(yield s)}}function*Tb(t,e,n={}){const{path:r=[],branch:i=[t],coerce:s=!1,mask:o=!1}=n,a={path:r,branch:i};if(s&&(t=e.coercer(t,a),o&&e.type!=="type"&&Es(e.schema)&&Es(t)&&!Array.isArray(t)))for(const c in t)e.schema[c]===void 0&&delete t[c];let l="valid";for(const c of e.validator(t,a))c.explanation=n.message,l="not_valid",yield[c,void 0];for(let[c,u,d]of e.entries(t,a)){const f=Tb(u,d,{path:c===void 0?r:[...r,c],branch:c===void 0?i:[...i,u],coerce:s,mask:o,message:n.message});for(const h of f)h[0]?(l=h[0].refinement!=null?"not_refined":"not_valid",yield[h[0],void 0]):s&&(u=h[1],c===void 0?t=u:t instanceof Map?t.set(c,u):t instanceof Set?t.add(u):Es(t)&&(u!==void 0||c in t)&&(t[c]=u))}if(l!=="not_valid")for(const c of e.refiner(t,a))c.explanation=n.message,l="not_refined",yield[c,void 0];l==="valid"&&(yield[void 0,t])}class si{constructor(e){const{type:n,schema:r,validator:i,refiner:s,coercer:o=l=>l,entries:a=function*(){}}=e;this.type=n,this.schema=r,this.entries=a,this.coercer=o,this.validator=i?(l,c)=>IS(i(l,c),c,this,l):()=>[],this.refiner=s?(l,c)=>IS(s(l,c),c,this,l):()=>[]}assert(e,n){return tR(e,this,n)}create(e,n){return nR(e,this,n)}is(e){return ku(e,this)}mask(e,n){return function(r,i,s){const o=of(r,i,{coerce:!0,mask:!0,message:s});if(o[0])throw o[0];return o[1]}(e,this,n)}validate(e,n={}){return of(e,this,n)}}function tR(t,e,n){const r=of(t,e,{message:n});if(r[0])throw r[0]}function nR(t,e,n){const r=of(t,e,{coerce:!0,message:n});if(r[0])throw r[0];return r[1]}function ku(t,e){return!of(t,e)[0]}function of(t,e,n={}){const r=Tb(t,e,n),i=function(s){const{done:o,value:a}=s.next();return o?void 0:a}(r);return i[0]?[new jD(i[0],function*(){for(const o of r)o[0]&&(yield o[0])}),void 0]:[void 0,i[1]]}function Go(t,e){return new si({type:t,schema:null,validator:e})}function OS(t){let e;return new si({type:"lazy",schema:null,*entries(n,r){e??(e=t()),yield*e.entries(n,r)},validator:(n,r)=>(e??(e=t()),e.validator(n,r)),coercer:(n,r)=>(e??(e=t()),e.coercer(n,r)),refiner:(n,r)=>(e??(e=t()),e.refiner(n,r))})}function rR(t){return new si({type:"array",schema:t,*entries(e){if(t&&Array.isArray(e))for(const[n,r]of e.entries())yield[n,r,t]},coercer:e=>Array.isArray(e)?e.slice():e,validator:e=>Array.isArray(e)||`Expected an array value, but received: ${Fi(e)}`})}function iR(t){const e=Fi(t),n=typeof t;return new si({type:"literal",schema:n==="string"||n==="number"||n==="boolean"?t:null,validator:r=>r===t||`Expected the literal \`${e}\`, but received: ${Fi(r)}`})}function sR(){return Go("number",t=>typeof t=="number"&&!isNaN(t)||`Expected a number, but received: ${Fi(t)}`)}function oR(t){const e=t?Object.keys(t):[],n=Go("never",()=>!1);return new si({type:"object",schema:t||null,*entries(r){if(t&&Es(r)){const i=new Set(Object.keys(r));for(const s of e)i.delete(s),yield[s,r[s],t[s]];for(const s of i)yield[s,r[s],n]}},validator:r=>Es(r)||`Expected an object, but received: ${Fi(r)}`,coercer:r=>Es(r)?{...r}:r})}function NS(t){return new si({...t,validator:(e,n)=>e===void 0||t.validator(e,n),refiner:(e,n)=>e===void 0||t.refiner(e,n)})}function aR(t,e){return new si({type:"record",schema:null,*entries(n){if(Es(n))for(const r in n){const i=n[r];yield[r,r,t],yield[r,i,e]}},validator:n=>Es(n)||`Expected an object, but received: ${Fi(n)}`})}function Wo(){return Go("string",t=>typeof t=="string"||`Expected a string, but received: ${Fi(t)}`)}function $g(t){const e=t.map(n=>n.type).join(" | ");return new si({type:"union",schema:null,coercer(n){for(const r of t){const[i,s]=r.validate(n,{coerce:!0});if(!i)return s}return n},validator(n,r){const i=[];for(const s of t){const[...o]=Tb(n,s,r),[a]=o;if(!a[0])return[];for(const[l]of o)l&&i.push(l)}return[`Expected the value to satisfy a union of \`${e}\`, but received: ${Fi(n)}`,...i]}})}function KD(t){return function(e){return function(n){return typeof n=="object"&&n!==null&&"message"in n}(e)&&typeof e.message=="string"?e.message:e==null?"":String(e)}(t).replace(/\.$/u,"")}function zD(t,e){var r,i;return n=t,typeof((i=(r=n==null?void 0:n.prototype)==null?void 0:r.constructor)==null?void 0:i.name)=="string"?new t({message:e}):t({message:e});var n}var VD=class extends Error{constructor(t){super(t.message),this.code="ERR_ASSERTION"}};function lR(){throw new Error("setTimeout has not been defined")}function cR(){throw new Error("clearTimeout has not been defined")}var Ks=lR,zs=cR;function uR(t){if(Ks===setTimeout)return setTimeout(t,0);if((Ks===lR||!Ks)&&setTimeout)return Ks=setTimeout,setTimeout(t,0);try{return Ks(t,0)}catch{try{return Ks.call(null,t,0)}catch{return Ks.call(this,t,0)}}}typeof Cn.setTimeout=="function"&&(Ks=setTimeout),typeof Cn.clearTimeout=="function"&&(zs=clearTimeout);var Sa,ys=[],hc=!1,Sp=-1;function GD(){hc&&Sa&&(hc=!1,Sa.length?ys=Sa.concat(ys):Sp=-1,ys.length&&dR())}function dR(){if(!hc){var t=uR(GD);hc=!0;for(var e=ys.length;e;){for(Sa=ys,ys=[];++Sp<e;)Sa&&Sa[Sp].run();Sp=-1,e=ys.length}Sa=null,hc=!1,function(n){if(zs===clearTimeout)return clearTimeout(n);if((zs===cR||!zs)&&clearTimeout)return zs=clearTimeout,clearTimeout(n);try{return zs(n)}catch{try{return zs.call(null,n)}catch{return zs.call(this,n)}}}(t)}}function fR(t,e){this.fun=t,this.array=e}fR.prototype.run=function(){this.fun.apply(null,this.array)};function fl(){}var WD=fl,qD=fl,QD=fl,YD=fl,JD=fl,ZD=fl,XD=fl,Tl=Cn.performance||{},e9=Tl.now||Tl.mozNow||Tl.msNow||Tl.oNow||Tl.webkitNow||function(){return new Date().getTime()},t9=new Date,Ke={nextTick:function(t){var e=new Array(arguments.length-1);if(arguments.length>1)for(var n=1;n<arguments.length;n++)e[n-1]=arguments[n];ys.push(new fR(t,e)),ys.length!==1||hc||uR(dR)},title:"browser",browser:!0,env:{},argv:[],version:"",versions:{},on:WD,addListener:qD,once:QD,off:YD,removeListener:JD,removeAllListeners:ZD,emit:XD,binding:function(t){throw new Error("process.binding is not supported")},cwd:function(){return"/"},chdir:function(t){throw new Error("process.chdir is not supported")},umask:function(){return 0},hrtime:function(t){var e=.001*e9.call(Tl),n=Math.floor(e),r=Math.floor(e%1*1e9);return t&&(n-=t[0],(r-=t[1])<0&&(n--,r+=1e9)),[n,r]},platform:"browser",release:{},config:{},uptime:function(){return(new Date-t9)/1e3}},af=t=>oR(t);function MS({path:t,branch:e}){const n=t[t.length-1];return I0(e[e.length-2],n)}function O0(t){return new si({...t,type:`optional ${t.type}`,validator:(e,n)=>!MS(n)||t.validator(e,n),refiner:(e,n)=>!MS(n)||t.refiner(e,n)})}var Fh,LS,BS,N0=$g([iR(null),Go("boolean",t=>typeof t=="boolean"),Go("finite number",t=>ku(t,sR())&&Number.isFinite(t)),Wo(),rR(OS(()=>N0)),aR(Wo(),OS(()=>N0))]),lf=(Fh=N0,LS=Go("any",()=>!0),BS=t=>(function(e,n,r="Assertion failed",i=VD){try{tR(e,n)}catch(s){throw zD(i,`${r}: ${KD(s)}.`)}}(t,N0),JSON.parse(JSON.stringify(t,(e,n)=>{if(e!=="__proto__"&&e!=="constructor")return n}))),new si({...Fh,coercer:(t,e)=>ku(t,LS)?Fh.coercer(BS(t,e),e):Fh.coercer(t,e)}));function Rw(t){try{return function(e){nR(e,lf)}(t),!0}catch{return!1}}var vd=iR("2.0"),xp=function(t){return new si({...t,validator:(e,n)=>e===null||t.validator(e,n),refiner:(e,n)=>e===null||t.refiner(e,n)})}($g([sR(),Wo()])),Iw=af({code:Go("integer",t=>typeof t=="number"&&!isNaN(t)&&Number.isInteger(t)||`Expected an integer, but received: ${Fi(t)}`),message:Wo(),data:O0(lf),stack:O0(Wo())}),hR=$g([aR(Wo(),lf),rR(lf)]),n9=af({id:xp,jsonrpc:vd,method:Wo(),params:O0(hR)}),r9=af({jsonrpc:vd,method:Wo(),params:O0(hR)});function DS(t){return ku(t,n9)}function $S(t){return ku(t,Iw)}oR({id:xp,jsonrpc:vd,result:NS(Go("unknown",()=>!0)),error:NS(Iw)}),$g([af({id:xp,jsonrpc:vd,result:lf}),af({id:xp,jsonrpc:vd,error:Iw})]);var US=Js.internal,i9="Unspecified error message. This is a bug, please report it.",s9={code:US,message:pR(US)},o9="Unspecified server error.";function pR(t,e=i9){if(function(n){return Number.isInteger(n)}(t)){const n=t.toString();if(I0(PS,n))return PS[n].message;if(function(r){return r>=-32099&&r<=-32e3}(t))return o9}return e}function FS(t,{fallbackError:e=s9,shouldIncludeStack:n=!0}={}){if(!$S(e))throw new Error("Must provide fallback error with integer number code and string message.");const r=function(i,s){if(i&&typeof i=="object"&&"serialize"in i&&typeof i.serialize=="function")return i.serialize();if($S(i))return i;const o=gR(i);return{...s,data:{cause:o}}}(t,e);return n||delete r.stack,r}function gR(t){return Array.isArray(t)?t.map(e=>Rw(e)?e:RS(e)?jS(e):null):RS(t)?jS(t):Rw(t)?t:null}function jS(t){return Object.getOwnPropertyNames(t).reduce((e,n)=>{const r=t[n];return Rw(r)&&(e[n]=r),e},{})}var mR=id;id.default=id,id.stable=HS,id.stableStringify=HS;var M0="[...]",yR="[Circular]",ol=[],xa=[];function vR(){return{depthLimit:Number.MAX_SAFE_INTEGER,edgesLimit:Number.MAX_SAFE_INTEGER}}function id(t,e,n,r){var i;r===void 0&&(r=vR()),Ow(t,"",0,[],void 0,0,r);try{i=xa.length===0?JSON.stringify(t,e,n):JSON.stringify(t,wR(e),n)}catch{return JSON.stringify("[unable to serialize, circular reference is too complex to analyze]")}finally{for(;ol.length!==0;){var s=ol.pop();s.length===4?Object.defineProperty(s[0],s[1],s[3]):s[0][s[1]]=s[2]}}return i}function pc(t,e,n,r){var i=Object.getOwnPropertyDescriptor(r,n);i.get!==void 0?i.configurable?(Object.defineProperty(r,n,{value:t}),ol.push([r,n,e,i])):xa.push([e,n,t]):(r[n]=t,ol.push([r,n,e]))}function Ow(t,e,n,r,i,s,o){var a;if(s+=1,typeof t=="object"&&t!==null){for(a=0;a<r.length;a++)if(r[a]===t)return void pc(yR,t,e,i);if(o.depthLimit!==void 0&&s>o.depthLimit||o.edgesLimit!==void 0&&n+1>o.edgesLimit)return void pc(M0,t,e,i);if(r.push(t),Array.isArray(t))for(a=0;a<t.length;a++)Ow(t[a],a,a,r,t,s,o);else{var l=Object.keys(t);for(a=0;a<l.length;a++){var c=l[a];Ow(t[c],c,a,r,t,s,o)}}r.pop()}}function a9(t,e){return t<e?-1:t>e?1:0}function HS(t,e,n,r){r===void 0&&(r=vR());var i,s=Nw(t,"",0,[],void 0,0,r)||t;try{i=xa.length===0?JSON.stringify(s,e,n):JSON.stringify(s,wR(e),n)}catch{return JSON.stringify("[unable to serialize, circular reference is too complex to analyze]")}finally{for(;ol.length!==0;){var o=ol.pop();o.length===4?Object.defineProperty(o[0],o[1],o[3]):o[0][o[1]]=o[2]}}return i}function Nw(t,e,n,r,i,s,o){var a;if(s+=1,typeof t=="object"&&t!==null){for(a=0;a<r.length;a++)if(r[a]===t)return void pc(yR,t,e,i);try{if(typeof t.toJSON=="function")return}catch{return}if(o.depthLimit!==void 0&&s>o.depthLimit||o.edgesLimit!==void 0&&n+1>o.edgesLimit)return void pc(M0,t,e,i);if(r.push(t),Array.isArray(t))for(a=0;a<t.length;a++)Nw(t[a],a,a,r,t,s,o);else{var l={},c=Object.keys(t).sort(a9);for(a=0;a<c.length;a++){var u=c[a];Nw(t[u],u,a,r,t,s,o),l[u]=t[u]}if(i===void 0)return l;ol.push([i,e,t]),i[e]=l}r.pop()}}function wR(t){return t=t!==void 0?t:function(e,n){return n},function(e,n){if(xa.length>0)for(var r=0;r<xa.length;r++){var i=xa[r];if(i[1]===e&&i[0]===n){n=i[2],xa.splice(r,1);break}}return t.call(this,e,n)}}var l9=Bg(mR),Yi=class extends Error{constructor(t,e,n){if(!Number.isInteger(t))throw new Error('"code" must be an integer.');if(!e||typeof e!="string")throw new Error('"message" must be a non-empty string.');super(e),this.code=t,n!==void 0&&(this.data=n)}serialize(){const t={code:this.code,message:this.message};return this.data!==void 0&&(t.data=this.data,function(e){if(typeof e!="object"||e===null)return!1;try{let n=e;for(;Object.getPrototypeOf(n)!==null;)n=Object.getPrototypeOf(n);return Object.getPrototypeOf(e)===n}catch{return!1}}(this.data)&&(t.data.cause=gR(this.data.cause))),this.stack&&(t.stack=this.stack),t}toString(){return l9(this.serialize(),c9,2)}};function c9(t,e){if(e!=="[Circular]")return e}var wd=t=>u9(Js.invalidRequest,t);function u9(t,e){const[n,r]=function(i){if(i){if(typeof i=="string")return[i];if(typeof i=="object"&&!Array.isArray(i)){const{message:s,data:o}=i;if(s&&typeof s!="string")throw new Error("Must specify string message.");return[s??void 0,o]}}return[]}(e);return new Yi(t,n??pR(t),r)}var bR={};function Vs(){}function qe(){qe.init.call(this)}function ER(t){return t._maxListeners===void 0?qe.defaultMaxListeners:t._maxListeners}function KS(t,e,n,r){var i,s,o;if(typeof n!="function")throw new TypeError('"listener" argument must be a function');if((s=t._events)?(s.newListener&&(t.emit("newListener",e,n.listener?n.listener:n),s=t._events),o=s[e]):(s=t._events=new Vs,t._eventsCount=0),o){if(typeof o=="function"?o=s[e]=r?[n,o]:[o,n]:r?o.unshift(n):o.push(n),!o.warned&&(i=ER(t))&&i>0&&o.length>i){o.warned=!0;var a=new Error("Possible EventEmitter memory leak detected. "+o.length+" "+e+" listeners added. Use emitter.setMaxListeners() to increase limit");a.name="MaxListenersExceededWarning",a.emitter=t,a.type=e,a.count=o.length,function(l){typeof console.warn=="function"?console.warn(l):console.log(l)}(a)}}else o=s[e]=n,++t._eventsCount;return t}function zS(t,e,n){var r=!1;function i(){t.removeListener(e,i),r||(r=!0,n.apply(t,arguments))}return i.listener=n,i}function VS(t){var e=this._events;if(e){var n=e[t];if(typeof n=="function")return 1;if(n)return n.length}return 0}function Vu(t,e){for(var n=new Array(e);e--;)n[e]=t[e];return n}Vs.prototype=Object.create(null),qe.EventEmitter=qe,qe.usingDomains=!1,qe.prototype.domain=void 0,qe.prototype._events=void 0,qe.prototype._maxListeners=void 0,qe.defaultMaxListeners=10,qe.init=function(){this.domain=null,qe.usingDomains&&(void 0).active,this._events&&this._events!==Object.getPrototypeOf(this)._events||(this._events=new Vs,this._eventsCount=0),this._maxListeners=this._maxListeners||void 0},qe.prototype.setMaxListeners=function(t){if(typeof t!="number"||t<0||isNaN(t))throw new TypeError('"n" argument must be a positive number');return this._maxListeners=t,this},qe.prototype.getMaxListeners=function(){return ER(this)},qe.prototype.emit=function(t){var e,n,r,i,s,o,a,l=t==="error";if(o=this._events)l=l&&o.error==null;else if(!l)return!1;if(a=this.domain,l){if(e=arguments[1],!a){if(e instanceof Error)throw e;var c=new Error('Uncaught, unspecified "error" event. ('+e+")");throw c.context=e,c}return e||(e=new Error('Uncaught, unspecified "error" event')),e.domainEmitter=this,e.domain=a,e.domainThrown=!1,a.emit("error",e),!1}if(!(n=o[t]))return!1;var u=typeof n=="function";switch(r=arguments.length){case 1:(function(d,f,h){if(f)d.call(h);else for(var m=d.length,g=Vu(d,m),w=0;w<m;++w)g[w].call(h)})(n,u,this);break;case 2:(function(d,f,h,m){if(f)d.call(h,m);else for(var g=d.length,w=Vu(d,g),p=0;p<g;++p)w[p].call(h,m)})(n,u,this,arguments[1]);break;case 3:(function(d,f,h,m,g){if(f)d.call(h,m,g);else for(var w=d.length,p=Vu(d,w),v=0;v<w;++v)p[v].call(h,m,g)})(n,u,this,arguments[1],arguments[2]);break;case 4:(function(d,f,h,m,g,w){if(f)d.call(h,m,g,w);else for(var p=d.length,v=Vu(d,p),y=0;y<p;++y)v[y].call(h,m,g,w)})(n,u,this,arguments[1],arguments[2],arguments[3]);break;default:for(i=new Array(r-1),s=1;s<r;s++)i[s-1]=arguments[s];(function(d,f,h,m){if(f)d.apply(h,m);else for(var g=d.length,w=Vu(d,g),p=0;p<g;++p)w[p].apply(h,m)})(n,u,this,i)}return!0},qe.prototype.addListener=function(t,e){return KS(this,t,e,!1)},qe.prototype.on=qe.prototype.addListener,qe.prototype.prependListener=function(t,e){return KS(this,t,e,!0)},qe.prototype.once=function(t,e){if(typeof e!="function")throw new TypeError('"listener" argument must be a function');return this.on(t,zS(this,t,e)),this},qe.prototype.prependOnceListener=function(t,e){if(typeof e!="function")throw new TypeError('"listener" argument must be a function');return this.prependListener(t,zS(this,t,e)),this},qe.prototype.removeListener=function(t,e){var n,r,i,s,o;if(typeof e!="function")throw new TypeError('"listener" argument must be a function');if(!(r=this._events))return this;if(!(n=r[t]))return this;if(n===e||n.listener&&n.listener===e)--this._eventsCount==0?this._events=new Vs:(delete r[t],r.removeListener&&this.emit("removeListener",t,n.listener||e));else if(typeof n!="function"){for(i=-1,s=n.length;s-- >0;)if(n[s]===e||n[s].listener&&n[s].listener===e){o=n[s].listener,i=s;break}if(i<0)return this;if(n.length===1){if(n[0]=void 0,--this._eventsCount==0)return this._events=new Vs,this;delete r[t]}else(function(a,l){for(var c=l,u=c+1,d=a.length;u<d;c+=1,u+=1)a[c]=a[u];a.pop()})(n,i);r.removeListener&&this.emit("removeListener",t,o||e)}return this},qe.prototype.off=function(t,e){return this.removeListener(t,e)},qe.prototype.removeAllListeners=function(t){var e,n;if(!(n=this._events))return this;if(!n.removeListener)return arguments.length===0?(this._events=new Vs,this._eventsCount=0):n[t]&&(--this._eventsCount==0?this._events=new Vs:delete n[t]),this;if(arguments.length===0){for(var r,i=Object.keys(n),s=0;s<i.length;++s)(r=i[s])!=="removeListener"&&this.removeAllListeners(r);return this.removeAllListeners("removeListener"),this._events=new Vs,this._eventsCount=0,this}if(typeof(e=n[t])=="function")this.removeListener(t,e);else if(e)do this.removeListener(t,e[e.length-1]);while(e[0]);return this},qe.prototype.listeners=function(t){var e,n,r=this._events;return n=r&&(e=r[t])?typeof e=="function"?[e.listener||e]:function(i){for(var s=new Array(i.length),o=0;o<s.length;++o)s[o]=i[o].listener||i[o];return s}(e):[],n},qe.listenerCount=function(t,e){return typeof t.listenerCount=="function"?t.listenerCount(e):VS.call(t,e)},qe.prototype.listenerCount=VS,qe.prototype.eventNames=function(){return this._eventsCount>0?Reflect.ownKeys(this._events):[]};var Pb=Ff(Object.freeze({__proto__:null,EventEmitter:qe,default:qe}));Object.defineProperty(bR,"__esModule",{value:!0});const d9=Pb;function GS(t,e,n){try{Reflect.apply(t,e,n)}catch(r){setTimeout(()=>{throw r})}}let f9=class extends d9.EventEmitter{emit(t,...e){let n=t==="error";const r=this._events;if(r!==void 0)n=n&&r.error===void 0;else if(!n)return!1;if(n){let s;if(e.length>0&&([s]=e),s instanceof Error)throw s;const o=new Error("Unhandled error."+(s?` (${s.message})`:""));throw o.context=s,o}const i=r[t];if(i===void 0)return!1;if(typeof i=="function")GS(i,this,e);else{const s=i.length,o=function(a){const l=a.length,c=new Array(l);for(let u=0;u<l;u+=1)c[u]=a[u];return c}(i);for(let a=0;a<s;a+=1)GS(o[a],this,e)}return!0}};var L0,Zs,Yl,sd,Cp,kp,Mw,_p,Lw,ay,WS,Tp,Bw,ly,qS,bd,B0,cy,QS,AR=bR.default=f9,Lr=class Pp extends AR{constructor({notificationHandler:e}={}){super(),Yr(this,sd),Yr(this,kp),Yr(this,_p),Yr(this,L0,!1),Yr(this,Zs,void 0),Yr(this,Yl,void 0),Uh(this,Zs,[]),Uh(this,Yl,e)}destroy(){so(this,Zs).forEach(e=>{"destroy"in e&&typeof e.destroy=="function"&&e.destroy()}),Uh(this,Zs,[]),Uh(this,L0,!0)}push(e){pn(this,sd,Cp).call(this),so(this,Zs).push(e)}handle(e,n){if(pn(this,sd,Cp).call(this),n&&typeof n!="function")throw new Error('"callback" must be a function if provided.');return Array.isArray(e)?n?pn(this,kp,Mw).call(this,e,n):pn(this,kp,Mw).call(this,e):n?pn(this,_p,Lw).call(this,e,n):this._promiseHandle(e)}asMiddleware(){return pn(this,sd,Cp).call(this),async(e,n,r,i)=>{var s,o;try{const[a,l,c]=await pn(s=Pp,Tp,Bw).call(s,e,n,so(this,Zs));return l?(await pn(o=Pp,bd,B0).call(o,c),i(a)):r(async u=>{var d;try{await pn(d=Pp,bd,B0).call(d,c)}catch(f){return u(f)}return u()})}catch(a){return i(a)}}}async _promiseHandle(e){return new Promise((n,r)=>{pn(this,_p,Lw).call(this,e,(i,s)=>{i&&s===void 0?r(i):n(s)}).catch(r)})}};L0=new WeakMap,Zs=new WeakMap,Yl=new WeakMap,sd=new WeakSet,Cp=function(){if(so(this,L0))throw new Error("This engine is destroyed and can no longer be used.")},kp=new WeakSet,Mw=async function(t,e){try{if(t.length===0){const r=[{id:null,jsonrpc:"2.0",error:new Yi(Js.invalidRequest,"Request batch must contain plain objects. Received an empty array")}];return e?e(null,r):r}const n=(await Promise.all(t.map(this._promiseHandle.bind(this)))).filter(r=>r!==void 0);return e?e(null,n):n}catch(n){if(e)return e(n);throw n}},_p=new WeakSet,Lw=async function(t,e){var n;if(!t||Array.isArray(t)||typeof t!="object"){const o=new Yi(Js.invalidRequest,"Requests must be plain objects. Received: "+typeof t,{request:t});return e(o,{id:null,jsonrpc:"2.0",error:o})}if(typeof t.method!="string"){const o=new Yi(Js.invalidRequest,"Must specify a string method. Received: "+typeof t.method,{request:t});return so(this,Yl)&&!DS(t)?e(null):e(o,{id:t.id??null,jsonrpc:"2.0",error:o})}if(so(this,Yl)&&ku(t,r9)&&!DS(t)){try{await so(this,Yl).call(this,t)}catch(o){return e(o)}return e(null)}let r=null;const i={...t},s={id:i.id,jsonrpc:i.jsonrpc};try{await pn(n=Lr,ay,WS).call(n,i,s,so(this,Zs))}catch(o){r=o}return r&&(delete s.result,s.error||(s.error=FS(r))),e(r,s)},ay=new WeakSet,WS=async function(t,e,n){var r,i,s;const[o,a,l]=await pn(r=Lr,Tp,Bw).call(r,t,e,n);if(pn(i=Lr,cy,QS).call(i,t,e,a),await pn(s=Lr,bd,B0).call(s,l),o)throw o},Tp=new WeakSet,Bw=async function(t,e,n){var r;const i=[];let s=null,o=!1;for(const a of n)if([s,o]=await pn(r=Lr,ly,qS).call(r,t,e,a,i),o)break;return[s,o,i.reverse()]},ly=new WeakSet,qS=async function(t,e,n,r){return new Promise(i=>{const s=a=>{const l=a||e.error;l&&(e.error=FS(l)),i([l,!0])},o=a=>{e.error?s(e.error):(a&&(typeof a!="function"&&s(new Yi(Js.internal,`JsonRpcEngine: "next" return handlers must be functions. Received "${typeof a}" for request:
${uy(t)}`,{request:t})),r.push(a)),i([null,!1]))};try{n(t,e,o,s)}catch(a){s(a)}})},bd=new WeakSet,B0=async function(t){for(const e of t)await new Promise((n,r)=>{e(i=>i?r(i):n())})},cy=new WeakSet,QS=function(t,e,n){if(!I0(e,"result")&&!I0(e,"error"))throw new Yi(Js.internal,`JsonRpcEngine: Response has no error or result for request:
${uy(t)}`,{request:t});if(!n)throw new Yi(Js.internal,`JsonRpcEngine: Nothing ended request:
${uy(t)}`,{request:t})},Yr(Lr,ay),Yr(Lr,Tp),Yr(Lr,ly),Yr(Lr,bd),Yr(Lr,cy);var h9=Lr;function uy(t){return JSON.stringify(t,null,2)}var SR=Object.freeze(["eth_subscription"]),p9=(t=console)=>[FD(),g9(t),UD(t)];function g9(t){return(e,n,r)=>{typeof e.method=="string"&&e.method||(n.error=wd({message:"The request 'method' must be a non-empty string.",data:e})),r(i=>{const{error:s}=n;return s&&t.error(`MetaMask - RPC Error: ${s.message}`,s),i()})}}var Rp=(t,e,n=!0)=>(r,i)=>{r||i.error?e(r||i.error):!n||Array.isArray(i)?t(i):t(i.result)},xR=t=>!!t&&typeof t=="string"&&t.startsWith("0x"),CR=()=>{};async function YS(t,e){try{const n=await async function(){return{name:m9(window),icon:await y9(window)}}();t.handle({jsonrpc:"2.0",id:1,method:"metamask_sendDomainMetadata",params:n},CR)}catch(n){e.error({message:yt.errors.sendSiteMetadata(),originalError:n})}}function m9(t){const{document:e}=t,n=e.querySelector('head > meta[property="og:site_name"]');if(n)return n.content;const r=e.querySelector('head > meta[name="title"]');return r?r.content:e.title&&e.title.length>0?e.title:window.location.hostname}async function y9(t){const{document:e}=t,n=e.querySelectorAll('head > link[rel~="icon"]');for(const r of Array.from(n))if(r&&await v9(r.href))return r.href;return null}async function v9(t){return new Promise((e,n)=>{try{const r=document.createElement("img");r.onload=()=>e(!0),r.onerror=()=>e(!1),r.src=t}catch(r){n(r)}})}var kR=(t,e,n)=>{if(!e.has(t))throw TypeError("Cannot "+n)},Ti=(t,e,n)=>(kR(t,e,"read from private field"),n?n.call(t):e.get(t)),Dw=(t,e,n)=>{if(e.has(t))throw TypeError("Cannot add the same private member more than once");e instanceof WeakSet?e.add(t):e.set(t,n)},Ji=(t,e,n,r)=>(kR(t,e,"write to private field"),e.set(t,n),n);function JS(t,e,n){try{Reflect.apply(t,e,n)}catch(r){setTimeout(()=>{throw r})}}class w9 extends qe{emit(e,...n){let r=e==="error";const i=this._events;if(i!==void 0)r=r&&i.error===void 0;else if(!r)return!1;if(r){let o;if(n.length>0&&([o]=n),o instanceof Error)throw o;const a=new Error("Unhandled error."+(o?` (${o.message})`:""));throw a.context=o,a}const s=i[e];if(s===void 0)return!1;if(typeof s=="function")JS(s,this,n);else{const o=s.length,a=function(l){const c=l.length,u=new Array(c);for(let d=0;d<c;d+=1)u[d]=l[d];return u}(s);for(let l=0;l<o;l+=1)JS(a[l],this,n)}return!0}}var Gs,aa,b9=function t(e,n){if(e===n)return!0;if(e&&n&&typeof e=="object"&&typeof n=="object"){if(e.constructor!==n.constructor)return!1;var r,i,s;if(Array.isArray(e)){if((r=e.length)!=n.length)return!1;for(i=r;i--!=0;)if(!t(e[i],n[i]))return!1;return!0}if(e.constructor===RegExp)return e.source===n.source&&e.flags===n.flags;if(e.valueOf!==Object.prototype.valueOf)return e.valueOf()===n.valueOf();if(e.toString!==Object.prototype.toString)return e.toString()===n.toString();if((r=(s=Object.keys(e)).length)!==Object.keys(n).length)return!1;for(i=r;i--!=0;)if(!Object.prototype.hasOwnProperty.call(n,s[i]))return!1;for(i=r;i--!=0;){var o=s[i];if(!t(e[o],n[o]))return!1}return!0}return e!=e&&n!=n},E9=Bg(b9),_R=class TR extends w9{constructor({logger:e=console,maxEventListeners:n=100,rpcMiddleware:r=[]}={}){super(),Dw(this,Gs,void 0),Dw(this,aa,void 0),this._log=e,this.setMaxListeners(n),this._state={...TR._defaultState},Ji(this,aa,null),Ji(this,Gs,null),this._handleAccountsChanged=this._handleAccountsChanged.bind(this),this._handleConnect=this._handleConnect.bind(this),this._handleChainChanged=this._handleChainChanged.bind(this),this._handleDisconnect=this._handleDisconnect.bind(this),this._handleUnlockStateChanged=this._handleUnlockStateChanged.bind(this),this._rpcRequest=this._rpcRequest.bind(this),this.request=this.request.bind(this);const i=new h9;r.forEach(s=>i.push(s)),this._rpcEngine=i}get chainId(){return Ti(this,Gs)}get selectedAddress(){return Ti(this,aa)}isConnected(){return this._state.isConnected}async request(e){if(!e||typeof e!="object"||Array.isArray(e))throw wd({message:yt.errors.invalidRequestArgs(),data:e});const{method:n,params:r}=e;if(typeof n!="string"||n.length===0)throw wd({message:yt.errors.invalidRequestMethod(),data:e});if(r!==void 0&&!Array.isArray(r)&&(typeof r!="object"||r===null))throw wd({message:yt.errors.invalidRequestParams(),data:e});const i=r==null?{method:n}:{method:n,params:r};return new Promise((s,o)=>{this._rpcRequest(i,Rp(s,o))})}_initializeState(e){if(this._state.initialized)throw new Error("Provider already initialized.");if(e){const{accounts:n,chainId:r,isUnlocked:i,networkVersion:s}=e;this._handleConnect(r),this._handleChainChanged({chainId:r,networkVersion:s}),this._handleUnlockStateChanged({accounts:n,isUnlocked:i}),this._handleAccountsChanged(n)}this._state.initialized=!0,this.emit("_initialized")}_rpcRequest(e,n){let r=n;return Array.isArray(e)||(e.jsonrpc||(e.jsonrpc="2.0"),e.method!=="eth_accounts"&&e.method!=="eth_requestAccounts"||(r=(i,s)=>{this._handleAccountsChanged(s.result??[],e.method==="eth_accounts"),n(i,s)})),this._rpcEngine.handle(e,r)}_handleConnect(e){this._state.isConnected||(this._state.isConnected=!0,this.emit("connect",{chainId:e}),this._log.debug(yt.info.connected(e)))}_handleDisconnect(e,n){if(this._state.isConnected||!this._state.isPermanentlyDisconnected&&!e){let r;this._state.isConnected=!1,e?(r=new Yi(1013,n??yt.errors.disconnected()),this._log.debug(r)):(r=new Yi(1011,n??yt.errors.permanentlyDisconnected()),this._log.error(r),Ji(this,Gs,null),this._state.accounts=null,Ji(this,aa,null),this._state.isUnlocked=!1,this._state.isPermanentlyDisconnected=!0),this.emit("disconnect",r)}}_handleChainChanged({chainId:e}={}){xR(e)?(this._handleConnect(e),e!==Ti(this,Gs)&&(Ji(this,Gs,e),this._state.initialized&&this.emit("chainChanged",Ti(this,Gs)))):this._log.error(yt.errors.invalidNetworkParams(),{chainId:e})}_handleAccountsChanged(e,n=!1){let r=e;Array.isArray(e)||(this._log.error("MetaMask: Received invalid accounts parameter. Please report this bug.",e),r=[]);for(const i of e)if(typeof i!="string"){this._log.error("MetaMask: Received non-string account. Please report this bug.",e),r=[];break}if(!E9(this._state.accounts,r)&&(n&&this._state.accounts!==null&&this._log.error("MetaMask: 'eth_accounts' unexpectedly updated accounts. Please report this bug.",r),this._state.accounts=r,Ti(this,aa)!==r[0]&&Ji(this,aa,r[0]||null),this._state.initialized)){const i=[...r];this.emit("accountsChanged",i)}}_handleUnlockStateChanged({accounts:e,isUnlocked:n}={}){typeof n=="boolean"?n!==this._state.isUnlocked&&(this._state.isUnlocked=n,this._handleAccountsChanged(e??[])):this._log.error("MetaMask: Received invalid isUnlocked parameter. Please report this bug.")}};Gs=new WeakMap,aa=new WeakMap,_R._defaultState={accounts:null,isConnected:!1,isUnlocked:!1,initialized:!1,isPermanentlyDisconnected:!1};var ZS,XS,A9=_R,$w={exports:{}};function PR(){return XS?ZS:(XS=1,ZS=Pb.EventEmitter)}var Rb,Ib=Ff(DB);Rb=typeof Object.create=="function"?function(t,e){t.super_=e,t.prototype=Object.create(e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}})}:function(t,e){t.super_=e;var n=function(){};n.prototype=e.prototype,t.prototype=new n,t.prototype.constructor=t};var RR=Object.getOwnPropertyDescriptors||function(t){for(var e=Object.keys(t),n={},r=0;r<e.length;r++)n[e[r]]=Object.getOwnPropertyDescriptor(t,e[r]);return n},S9=/%[sdj%]/g;function Ug(t){if(!cf(t)){for(var e=[],n=0;n<arguments.length;n++)e.push(Bi(arguments[n]));return e.join(" ")}n=1;for(var r=arguments,i=r.length,s=String(t).replace(S9,function(a){if(a==="%%")return"%";if(n>=i)return a;switch(a){case"%s":return String(r[n++]);case"%d":return Number(r[n++]);case"%j":try{return JSON.stringify(r[n++])}catch{return"[Circular]"}default:return a}}),o=r[n];n<i;o=r[++n])Kf(o)||!hl(o)?s+=" "+o:s+=" "+Bi(o);return s}function Ob(t,e){if(Ii(Cn.process))return function(){return Ob(t,e).apply(this,arguments)};if(Ke.noDeprecation===!0)return t;var n=!1;return function(){if(!n){if(Ke.throwDeprecation)throw new Error(e);Ke.traceDeprecation?console.trace(e):console.error(e),n=!0}return t.apply(this,arguments)}}var dy,jh={};function IR(t){return Ii(dy)&&(dy=Ke.env.NODE_DEBUG||""),t=t.toUpperCase(),!jh[t]&&(new RegExp("\\b"+t+"\\b","i").test(dy)?jh[t]=function(){var e=Ug.apply(null,arguments);console.error("%s %d: %s",t,0,e)}:jh[t]=function(){}),jh[t]}function Bi(t,e){var n={seen:[],stylize:C9};return arguments.length>=3&&(n.depth=arguments[2]),arguments.length>=4&&(n.colors=arguments[3]),Fg(e)?n.showHidden=e:e&&Bb(n,e),Ii(n.showHidden)&&(n.showHidden=!1),Ii(n.depth)&&(n.depth=2),Ii(n.colors)&&(n.colors=!1),Ii(n.customInspect)&&(n.customInspect=!0),n.colors&&(n.stylize=x9),D0(n,t,n.depth)}function x9(t,e){var n=Bi.styles[e];return n?"\x1B["+Bi.colors[n][0]+"m"+t+"\x1B["+Bi.colors[n][1]+"m":t}function C9(t,e){return t}function D0(t,e,n){if(t.customInspect&&e&&Sd(e.inspect)&&e.inspect!==Bi&&(!e.constructor||e.constructor.prototype!==e)){var r=e.inspect(n,t);return cf(r)||(r=D0(t,r,n)),r}var i=function(f,h){if(Ii(h))return f.stylize("undefined","undefined");if(cf(h)){var m="'"+JSON.stringify(h).replace(/^"|"$/g,"").replace(/'/g,"\\'").replace(/\\"/g,'"')+"'";return f.stylize(m,"string")}if(Mb(h))return f.stylize(""+h,"number");if(Fg(h))return f.stylize(""+h,"boolean");if(Kf(h))return f.stylize("null","null")}(t,e);if(i)return i;var s=Object.keys(e),o=function(f){var h={};return f.forEach(function(m,g){h[m]=!0}),h}(s);if(t.showHidden&&(s=Object.getOwnPropertyNames(e)),Ad(e)&&(s.indexOf("message")>=0||s.indexOf("description")>=0))return fy(e);if(s.length===0){if(Sd(e)){var a=e.name?": "+e.name:"";return t.stylize("[Function"+a+"]","special")}if(Ed(e))return t.stylize(RegExp.prototype.toString.call(e),"regexp");if($0(e))return t.stylize(Date.prototype.toString.call(e),"date");if(Ad(e))return fy(e)}var l,c="",u=!1,d=["{","}"];return Nb(e)&&(u=!0,d=["[","]"]),Sd(e)&&(c=" [Function"+(e.name?": "+e.name:"")+"]"),Ed(e)&&(c=" "+RegExp.prototype.toString.call(e)),$0(e)&&(c=" "+Date.prototype.toUTCString.call(e)),Ad(e)&&(c=" "+fy(e)),s.length!==0||u&&e.length!=0?n<0?Ed(e)?t.stylize(RegExp.prototype.toString.call(e),"regexp"):t.stylize("[Object]","special"):(t.seen.push(e),l=u?function(f,h,m,g,w){for(var p=[],v=0,y=h.length;v<y;++v)DR(h,String(v))?p.push(hy(f,h,m,g,String(v),!0)):p.push("");return w.forEach(function(C){C.match(/^\d+$/)||p.push(hy(f,h,m,g,C,!0))}),p}(t,e,n,o,s):s.map(function(f){return hy(t,e,n,o,f,u)}),t.seen.pop(),function(f,h,m){var g=f.reduce(function(w,p){return p.indexOf(`
`),w+p.replace(/\u001b\[\d\d?m/g,"").length+1},0);return g>60?m[0]+(h===""?"":h+`
 `)+" "+f.join(`,
  `)+" "+m[1]:m[0]+h+" "+f.join(", ")+" "+m[1]}(l,c,d)):d[0]+c+d[1]}function fy(t){return"["+Error.prototype.toString.call(t)+"]"}function hy(t,e,n,r,i,s){var o,a,l;if((l=Object.getOwnPropertyDescriptor(e,i)||{value:e[i]}).get?a=l.set?t.stylize("[Getter/Setter]","special"):t.stylize("[Getter]","special"):l.set&&(a=t.stylize("[Setter]","special")),DR(r,i)||(o="["+i+"]"),a||(t.seen.indexOf(l.value)<0?(a=Kf(n)?D0(t,l.value,null):D0(t,l.value,n-1)).indexOf(`
`)>-1&&(a=s?a.split(`
`).map(function(c){return"  "+c}).join(`
`).substr(2):`
`+a.split(`
`).map(function(c){return"   "+c}).join(`
`)):a=t.stylize("[Circular]","special")),Ii(o)){if(s&&i.match(/^\d+$/))return a;(o=JSON.stringify(""+i)).match(/^"([a-zA-Z_][a-zA-Z_0-9]*)"$/)?(o=o.substr(1,o.length-2),o=t.stylize(o,"name")):(o=o.replace(/'/g,"\\'").replace(/\\"/g,'"').replace(/(^"|"$)/g,"'"),o=t.stylize(o,"string"))}return o+": "+a}function Nb(t){return Array.isArray(t)}function Fg(t){return typeof t=="boolean"}function Kf(t){return t===null}function OR(t){return t==null}function Mb(t){return typeof t=="number"}function cf(t){return typeof t=="string"}function NR(t){return typeof t=="symbol"}function Ii(t){return t===void 0}function Ed(t){return hl(t)&&Lb(t)==="[object RegExp]"}function hl(t){return typeof t=="object"&&t!==null}function $0(t){return hl(t)&&Lb(t)==="[object Date]"}function Ad(t){return hl(t)&&(Lb(t)==="[object Error]"||t instanceof Error)}function Sd(t){return typeof t=="function"}function MR(t){return t===null||typeof t=="boolean"||typeof t=="number"||typeof t=="string"||typeof t=="symbol"||t===void 0}function LR(t){return ae.isBuffer(t)}function Lb(t){return Object.prototype.toString.call(t)}function py(t){return t<10?"0"+t.toString(10):t.toString(10)}Bi.colors={bold:[1,22],italic:[3,23],underline:[4,24],inverse:[7,27],white:[37,39],grey:[90,39],black:[30,39],blue:[34,39],cyan:[36,39],green:[32,39],magenta:[35,39],red:[31,39],yellow:[33,39]},Bi.styles={special:"cyan",number:"yellow",boolean:"yellow",undefined:"grey",null:"bold",string:"green",date:"magenta",regexp:"red"};var k9=["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"];function BR(){var t,e;console.log("%s - %s",(t=new Date,e=[py(t.getHours()),py(t.getMinutes()),py(t.getSeconds())].join(":"),[t.getDate(),k9[t.getMonth()],e].join(" ")),Ug.apply(null,arguments))}function Bb(t,e){if(!e||!hl(e))return t;for(var n=Object.keys(e),r=n.length;r--;)t[n[r]]=e[n[r]];return t}function DR(t,e){return Object.prototype.hasOwnProperty.call(t,e)}var la=typeof Symbol<"u"?Symbol("util.promisify.custom"):void 0;function Db(t){if(typeof t!="function")throw new TypeError('The "original" argument must be of type Function');if(la&&t[la]){var e;if(typeof(e=t[la])!="function")throw new TypeError('The "util.promisify.custom" argument must be of type Function');return Object.defineProperty(e,la,{value:e,enumerable:!1,writable:!1,configurable:!0}),e}function e(){for(var n,r,i=new Promise(function(a,l){n=a,r=l}),s=[],o=0;o<arguments.length;o++)s.push(arguments[o]);s.push(function(a,l){a?r(a):n(l)});try{t.apply(this,s)}catch(a){r(a)}return i}return Object.setPrototypeOf(e,Object.getPrototypeOf(t)),la&&Object.defineProperty(e,la,{value:e,enumerable:!1,writable:!1,configurable:!0}),Object.defineProperties(e,RR(t))}function _9(t,e){if(!t){var n=new Error("Promise was rejected with a falsy value");n.reason=t,t=n}return e(t)}function $R(t){if(typeof t!="function")throw new TypeError('The "original" argument must be of type Function');function e(){for(var n=[],r=0;r<arguments.length;r++)n.push(arguments[r]);var i=n.pop();if(typeof i!="function")throw new TypeError("The last argument must be of type Function");var s=this,o=function(){return i.apply(s,arguments)};t.apply(this,n).then(function(a){Ke.nextTick(o.bind(null,null,a))},function(a){Ke.nextTick(_9.bind(null,a,o))})}return Object.setPrototypeOf(e,Object.getPrototypeOf(t)),Object.defineProperties(e,RR(t)),e}Db.custom=la;var gy,ex,my,tx,T9={inherits:Rb,_extend:Bb,log:BR,isBuffer:LR,isPrimitive:MR,isFunction:Sd,isError:Ad,isDate:$0,isObject:hl,isRegExp:Ed,isUndefined:Ii,isSymbol:NR,isString:cf,isNumber:Mb,isNullOrUndefined:OR,isNull:Kf,isBoolean:Fg,isArray:Nb,inspect:Bi,deprecate:Ob,format:Ug,debuglog:IR,promisify:Db,callbackify:$R},UR=Ff(Object.freeze({__proto__:null,_extend:Bb,callbackify:$R,debuglog:IR,default:T9,deprecate:Ob,format:Ug,inherits:Rb,inspect:Bi,isArray:Nb,isBoolean:Fg,isBuffer:LR,isDate:$0,isError:Ad,isFunction:Sd,isNull:Kf,isNullOrUndefined:OR,isNumber:Mb,isObject:hl,isPrimitive:MR,isRegExp:Ed,isString:cf,isSymbol:NR,isUndefined:Ii,log:BR,promisify:Db}));function P9(){if(ex)return gy;function t(l,c){var u=Object.keys(l);if(Object.getOwnPropertySymbols){var d=Object.getOwnPropertySymbols(l);c&&(d=d.filter(function(f){return Object.getOwnPropertyDescriptor(l,f).enumerable})),u.push.apply(u,d)}return u}function e(l){for(var c=1;c<arguments.length;c++){var u=arguments[c]!=null?arguments[c]:{};c%2?t(Object(u),!0).forEach(function(d){n(l,d,u[d])}):Object.getOwnPropertyDescriptors?Object.defineProperties(l,Object.getOwnPropertyDescriptors(u)):t(Object(u)).forEach(function(d){Object.defineProperty(l,d,Object.getOwnPropertyDescriptor(u,d))})}return l}function n(l,c,u){return(c=i(c))in l?Object.defineProperty(l,c,{value:u,enumerable:!0,configurable:!0,writable:!0}):l[c]=u,l}function r(l,c,u){return c&&function(d,f){for(var h=0;h<f.length;h++){var m=f[h];m.enumerable=m.enumerable||!1,m.configurable=!0,"value"in m&&(m.writable=!0),Object.defineProperty(d,i(m.key),m)}}(l.prototype,c),Object.defineProperty(l,"prototype",{writable:!1}),l}function i(l){var c=function(u,d){if(typeof u!="object"||u===null)return u;var f=u[Symbol.toPrimitive];if(f!==void 0){var h=f.call(u,d);if(typeof h!="object")return h;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(u)}(l,"string");return typeof c=="symbol"?c:String(c)}ex=1;var s=Ib.Buffer,o=UR.inspect,a=o&&o.custom||"inspect";return gy=function(){function l(){(function(c,u){if(!(c instanceof u))throw new TypeError("Cannot call a class as a function")})(this,l),this.head=null,this.tail=null,this.length=0}return r(l,[{key:"push",value:function(c){var u={data:c,next:null};this.length>0?this.tail.next=u:this.head=u,this.tail=u,++this.length}},{key:"unshift",value:function(c){var u={data:c,next:this.head};this.length===0&&(this.tail=u),this.head=u,++this.length}},{key:"shift",value:function(){if(this.length!==0){var c=this.head.data;return this.length===1?this.head=this.tail=null:this.head=this.head.next,--this.length,c}}},{key:"clear",value:function(){this.head=this.tail=null,this.length=0}},{key:"join",value:function(c){if(this.length===0)return"";for(var u=this.head,d=""+u.data;u=u.next;)d+=c+u.data;return d}},{key:"concat",value:function(c){if(this.length===0)return s.alloc(0);for(var u,d,f,h=s.allocUnsafe(c>>>0),m=this.head,g=0;m;)u=m.data,d=h,f=g,s.prototype.copy.call(u,d,f),g+=m.data.length,m=m.next;return h}},{key:"consume",value:function(c,u){var d;return c<this.head.data.length?(d=this.head.data.slice(0,c),this.head.data=this.head.data.slice(c)):d=c===this.head.data.length?this.shift():u?this._getString(c):this._getBuffer(c),d}},{key:"first",value:function(){return this.head.data}},{key:"_getString",value:function(c){var u=this.head,d=1,f=u.data;for(c-=f.length;u=u.next;){var h=u.data,m=c>h.length?h.length:c;if(m===h.length?f+=h:f+=h.slice(0,c),(c-=m)===0){m===h.length?(++d,u.next?this.head=u.next:this.head=this.tail=null):(this.head=u,u.data=h.slice(m));break}++d}return this.length-=d,f}},{key:"_getBuffer",value:function(c){var u=s.allocUnsafe(c),d=this.head,f=1;for(d.data.copy(u),c-=d.data.length;d=d.next;){var h=d.data,m=c>h.length?h.length:c;if(h.copy(u,u.length-c,0,m),(c-=m)===0){m===h.length?(++f,d.next?this.head=d.next:this.head=this.tail=null):(this.head=d,d.data=h.slice(m));break}++f}return this.length-=f,u}},{key:a,value:function(c,u){return o(this,e(e({},u),{},{depth:0,customInspect:!1}))}}]),l}(),gy}function FR(){if(tx)return my;function t(r,i){n(r,i),e(r)}function e(r){r._writableState&&!r._writableState.emitClose||r._readableState&&!r._readableState.emitClose||r.emit("close")}function n(r,i){r.emit("error",i)}return tx=1,my={destroy:function(r,i){var s=this,o=this._readableState&&this._readableState.destroyed,a=this._writableState&&this._writableState.destroyed;return o||a?(i?i(r):r&&(this._writableState?this._writableState.errorEmitted||(this._writableState.errorEmitted=!0,Ke.nextTick(n,this,r)):Ke.nextTick(n,this,r)),this):(this._readableState&&(this._readableState.destroyed=!0),this._writableState&&(this._writableState.destroyed=!0),this._destroy(r||null,function(l){!i&&l?s._writableState?s._writableState.errorEmitted?Ke.nextTick(e,s):(s._writableState.errorEmitted=!0,Ke.nextTick(t,s,l)):Ke.nextTick(t,s,l):i?(Ke.nextTick(e,s),i(l)):Ke.nextTick(e,s)}),this)},undestroy:function(){this._readableState&&(this._readableState.destroyed=!1,this._readableState.reading=!1,this._readableState.ended=!1,this._readableState.endEmitted=!1),this._writableState&&(this._writableState.destroyed=!1,this._writableState.ended=!1,this._writableState.ending=!1,this._writableState.finalCalled=!1,this._writableState.prefinished=!1,this._writableState.finished=!1,this._writableState.errorEmitted=!1)},errorOrDestroy:function(r,i){var s=r._readableState,o=r._writableState;s&&s.autoDestroy||o&&o.autoDestroy?r.destroy(i):r.emit("error",i)}},my}var pl={},nx,rx,jR={};function ur(t,e,n){n||(n=Error);var r=function(i){var s,o;function a(l,c,u){return i.call(this,function(d,f,h){return typeof e=="string"?e:e(d,f,h)}(l,c,u))||this}return o=i,(s=a).prototype=Object.create(o.prototype),s.prototype.constructor=s,s.__proto__=o,a}(n);r.prototype.name=n.name,r.prototype.code=t,jR[t]=r}function ix(t,e){if(Array.isArray(t)){var n=t.length;return t=t.map(function(r){return String(r)}),n>2?"one of ".concat(e," ").concat(t.slice(0,n-1).join(", "),", or ")+t[n-1]:n===2?"one of ".concat(e," ").concat(t[0]," or ").concat(t[1]):"of ".concat(e," ").concat(t[0])}return"of ".concat(e," ").concat(String(t))}function HR(){if(rx)return nx;rx=1;var t=pl.codes.ERR_INVALID_OPT_VALUE;return nx={getHighWaterMark:function(e,n,r,i){var s=function(o,a,l){return o.highWaterMark!=null?o.highWaterMark:a?o[l]:null}(n,i,r);if(s!=null){if(!isFinite(s)||Math.floor(s)!==s||s<0)throw new t(i?r:"highWaterMark",s);return Math.floor(s)}return e.objectMode?16:16384}}}ur("ERR_INVALID_OPT_VALUE",function(t,e){return'The value "'+e+'" is invalid for option "'+t+'"'},TypeError),ur("ERR_INVALID_ARG_TYPE",function(t,e,n){var r,i,s;if(typeof e=="string"&&(i="not ",e.substr(0,i.length)===i)?(r="must not be",e=e.replace(/^not /,"")):r="must be",function(a,l,c){return(c===void 0||c>a.length)&&(c=a.length),a.substring(c-l.length,c)===l}(t," argument"))s="The ".concat(t," ").concat(r," ").concat(ix(e,"type"));else{var o=function(a,l,c){return typeof c!="number"&&(c=0),!(c+l.length>a.length)&&a.indexOf(l,c)!==-1}(t,".")?"property":"argument";s='The "'.concat(t,'" ').concat(o," ").concat(r," ").concat(ix(e,"type"))}return s+=". Received type ".concat(typeof n)},TypeError),ur("ERR_STREAM_PUSH_AFTER_EOF","stream.push() after EOF"),ur("ERR_METHOD_NOT_IMPLEMENTED",function(t){return"The "+t+" method is not implemented"}),ur("ERR_STREAM_PREMATURE_CLOSE","Premature close"),ur("ERR_STREAM_DESTROYED",function(t){return"Cannot call "+t+" after a stream was destroyed"}),ur("ERR_MULTIPLE_CALLBACK","Callback called multiple times"),ur("ERR_STREAM_CANNOT_PIPE","Cannot pipe, not readable"),ur("ERR_STREAM_WRITE_AFTER_END","write after end"),ur("ERR_STREAM_NULL_VALUES","May not write null values to stream",TypeError),ur("ERR_UNKNOWN_ENCODING",function(t){return"Unknown encoding: "+t},TypeError),ur("ERR_STREAM_UNSHIFT_AFTER_END_EVENT","stream.unshift() after end event"),pl.codes=jR;var yy,sx,vy,ox,wy,ax,R9=typeof Object.create=="function"?function(t,e){t.super_=e,t.prototype=Object.create(e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}})}:function(t,e){t.super_=e;var n=function(){};n.prototype=e.prototype,t.prototype=new n,t.prototype.constructor=t},zf=Ff(Object.freeze({__proto__:null,default:R9}));function I9(){if(sx)return yy;function t(e){try{if(!Pr.localStorage)return!1}catch{return!1}var n=Pr.localStorage[e];return n!=null&&String(n).toLowerCase()==="true"}return sx=1,yy=function(e,n){if(t("noDeprecation"))return e;var r=!1;return function(){if(!r){if(t("throwDeprecation"))throw new Error(n);t("traceDeprecation")?console.trace(n):console.warn(n),r=!0}return e.apply(this,arguments)}},yy}function KR(){if(ox)return vy;function t(K){var $=this;this.next=null,this.entry=null,this.finish=function(){(function(M,x,O){var B=M.entry;for(M.entry=null;B;){var b=B.callback;x.pendingcb--,b(O),B=B.next}x.corkedRequestsFree.next=M})($,K)}}var e;ox=1,vy=P,P.WritableState=C;var n={deprecate:I9()},r=PR(),i=Ib.Buffer,s=(Pr!==void 0?Pr:typeof window<"u"?window:typeof self<"u"?self:{}).Uint8Array||function(){},o,a=FR(),l=HR().getHighWaterMark,c=pl.codes,u=c.ERR_INVALID_ARG_TYPE,d=c.ERR_METHOD_NOT_IMPLEMENTED,f=c.ERR_MULTIPLE_CALLBACK,h=c.ERR_STREAM_CANNOT_PIPE,m=c.ERR_STREAM_DESTROYED,g=c.ERR_STREAM_NULL_VALUES,w=c.ERR_STREAM_WRITE_AFTER_END,p=c.ERR_UNKNOWN_ENCODING,v=a.errorOrDestroy;function y(){}function C(K,$,M){e=e||vu(),K=K||{},typeof M!="boolean"&&(M=$ instanceof e),this.objectMode=!!K.objectMode,M&&(this.objectMode=this.objectMode||!!K.writableObjectMode),this.highWaterMark=l(this,K,"writableHighWaterMark",M),this.finalCalled=!1,this.needDrain=!1,this.ending=!1,this.ended=!1,this.finished=!1,this.destroyed=!1;var x=K.decodeStrings===!1;this.decodeStrings=!x,this.defaultEncoding=K.defaultEncoding||"utf8",this.length=0,this.writing=!1,this.corked=0,this.sync=!0,this.bufferProcessing=!1,this.onwrite=function(O){(function(B,b){var E=B._writableState,k=E.sync,I=E.writecb;if(typeof I!="function")throw new f;if(function(S){S.writing=!1,S.writecb=null,S.length-=S.writelen,S.writelen=0}(E),b)(function(S,T,R,N,U){--T.pendingcb,R?(Ke.nextTick(U,N),Ke.nextTick(W,S,T),S._writableState.errorEmitted=!0,v(S,N)):(U(N),S._writableState.errorEmitted=!0,v(S,N),W(S,T))})(B,E,k,b,I);else{var A=V(E)||B.destroyed;A||E.corked||E.bufferProcessing||!E.bufferedRequest||D(B,E),k?Ke.nextTick(j,B,E,A,I):j(B,E,A,I)}})($,O)},this.writecb=null,this.writelen=0,this.bufferedRequest=null,this.lastBufferedRequest=null,this.pendingcb=0,this.prefinished=!1,this.errorEmitted=!1,this.emitClose=K.emitClose!==!1,this.autoDestroy=!!K.autoDestroy,this.bufferedRequestCount=0,this.corkedRequestsFree=new t(this)}function P(K){var $=this instanceof(e=e||vu());if(!$&&!o.call(P,this))return new P(K);this._writableState=new C(K,this,$),this.writable=!0,K&&(typeof K.write=="function"&&(this._write=K.write),typeof K.writev=="function"&&(this._writev=K.writev),typeof K.destroy=="function"&&(this._destroy=K.destroy),typeof K.final=="function"&&(this._final=K.final)),r.call(this)}function L(K,$,M,x,O,B,b){$.writelen=x,$.writecb=b,$.writing=!0,$.sync=!0,$.destroyed?$.onwrite(new m("write")):M?K._writev(O,$.onwrite):K._write(O,B,$.onwrite),$.sync=!1}function j(K,$,M,x){M||function(O,B){B.length===0&&B.needDrain&&(B.needDrain=!1,O.emit("drain"))}(K,$),$.pendingcb--,x(),W(K,$)}function D(K,$){$.bufferProcessing=!0;var M=$.bufferedRequest;if(K._writev&&M&&M.next){var x=$.bufferedRequestCount,O=new Array(x),B=$.corkedRequestsFree;B.entry=M;for(var b=0,E=!0;M;)O[b]=M,M.isBuf||(E=!1),M=M.next,b+=1;O.allBuffers=E,L(K,$,!0,$.length,O,"",B.finish),$.pendingcb++,$.lastBufferedRequest=null,B.next?($.corkedRequestsFree=B.next,B.next=null):$.corkedRequestsFree=new t($),$.bufferedRequestCount=0}else{for(;M;){var k=M.chunk,I=M.encoding,A=M.callback;if(L(K,$,!1,$.objectMode?1:k.length,k,I,A),M=M.next,$.bufferedRequestCount--,$.writing)break}M===null&&($.lastBufferedRequest=null)}$.bufferedRequest=M,$.bufferProcessing=!1}function V(K){return K.ending&&K.length===0&&K.bufferedRequest===null&&!K.finished&&!K.writing}function F(K,$){K._final(function(M){$.pendingcb--,M&&v(K,M),$.prefinished=!0,K.emit("prefinish"),W(K,$)})}function W(K,$){var M=V($);if(M&&(function(O,B){B.prefinished||B.finalCalled||(typeof O._final!="function"||B.destroyed?(B.prefinished=!0,O.emit("prefinish")):(B.pendingcb++,B.finalCalled=!0,Ke.nextTick(F,O,B)))}(K,$),$.pendingcb===0&&($.finished=!0,K.emit("finish"),$.autoDestroy))){var x=K._readableState;(!x||x.autoDestroy&&x.endEmitted)&&K.destroy()}return M}return zf(P,r),C.prototype.getBuffer=function(){for(var K=this.bufferedRequest,$=[];K;)$.push(K),K=K.next;return $},function(){try{Object.defineProperty(C.prototype,"buffer",{get:n.deprecate(function(){return this.getBuffer()},"_writableState.buffer is deprecated. Use _writableState.getBuffer instead.","DEP0003")})}catch{}}(),typeof Symbol=="function"&&Symbol.hasInstance&&typeof Function.prototype[Symbol.hasInstance]=="function"?(o=Function.prototype[Symbol.hasInstance],Object.defineProperty(P,Symbol.hasInstance,{value:function(K){return!!o.call(this,K)||this===P&&K&&K._writableState instanceof C}})):o=function(K){return K instanceof this},P.prototype.pipe=function(){v(this,new h)},P.prototype.write=function(K,$,M){var x,O=this._writableState,B=!1,b=!O.objectMode&&(x=K,i.isBuffer(x)||x instanceof s);return b&&!i.isBuffer(K)&&(K=function(E){return i.from(E)}(K)),typeof $=="function"&&(M=$,$=null),b?$="buffer":$||($=O.defaultEncoding),typeof M!="function"&&(M=y),O.ending?function(E,k){var I=new w;v(E,I),Ke.nextTick(k,I)}(this,M):(b||function(E,k,I,A){var S;return I===null?S=new g:typeof I=="string"||k.objectMode||(S=new u("chunk",["string","Buffer"],I)),!S||(v(E,S),Ke.nextTick(A,S),!1)}(this,O,K,M))&&(O.pendingcb++,B=function(E,k,I,A,S,T){if(!I){var R=function(q,Q,ie){return q.objectMode||q.decodeStrings===!1||typeof Q!="string"||(Q=i.from(Q,ie)),Q}(k,A,S);A!==R&&(I=!0,S="buffer",A=R)}var N=k.objectMode?1:A.length;k.length+=N;var U=k.length<k.highWaterMark;if(U||(k.needDrain=!0),k.writing||k.corked){var z=k.lastBufferedRequest;k.lastBufferedRequest={chunk:A,encoding:S,isBuf:I,callback:T,next:null},z?z.next=k.lastBufferedRequest:k.bufferedRequest=k.lastBufferedRequest,k.bufferedRequestCount+=1}else L(E,k,!1,N,A,S,T);return U}(this,O,b,K,$,M)),B},P.prototype.cork=function(){this._writableState.corked++},P.prototype.uncork=function(){var K=this._writableState;K.corked&&(K.corked--,K.writing||K.corked||K.bufferProcessing||!K.bufferedRequest||D(this,K))},P.prototype.setDefaultEncoding=function(K){if(typeof K=="string"&&(K=K.toLowerCase()),!(["hex","utf8","utf-8","ascii","binary","base64","ucs2","ucs-2","utf16le","utf-16le","raw"].indexOf((K+"").toLowerCase())>-1))throw new p(K);return this._writableState.defaultEncoding=K,this},Object.defineProperty(P.prototype,"writableBuffer",{enumerable:!1,get:function(){return this._writableState&&this._writableState.getBuffer()}}),Object.defineProperty(P.prototype,"writableHighWaterMark",{enumerable:!1,get:function(){return this._writableState.highWaterMark}}),P.prototype._write=function(K,$,M){M(new d("_write()"))},P.prototype._writev=null,P.prototype.end=function(K,$,M){var x=this._writableState;return typeof K=="function"?(M=K,K=null,$=null):typeof $=="function"&&(M=$,$=null),K!=null&&this.write(K,$),x.corked&&(x.corked=1,this.uncork()),x.ending||function(O,B,b){B.ending=!0,W(O,B),b&&(B.finished?Ke.nextTick(b):O.once("finish",b)),B.ended=!0,O.writable=!1}(this,x,M),this},Object.defineProperty(P.prototype,"writableLength",{enumerable:!1,get:function(){return this._writableState.length}}),Object.defineProperty(P.prototype,"destroyed",{enumerable:!1,get:function(){return this._writableState!==void 0&&this._writableState.destroyed},set:function(K){this._writableState&&(this._writableState.destroyed=K)}}),P.prototype.destroy=a.destroy,P.prototype._undestroy=a.undestroy,P.prototype._destroy=function(K,$){$(K)},vy}function vu(){if(ax)return wy;ax=1;var t=Object.keys||function(c){var u=[];for(var d in c)u.push(d);return u};wy=o;var e=zR(),n=KR();zf(o,e);for(var r=t(n.prototype),i=0;i<r.length;i++){var s=r[i];o.prototype[s]||(o.prototype[s]=n.prototype[s])}function o(c){if(!(this instanceof o))return new o(c);e.call(this,c),n.call(this,c),this.allowHalfOpen=!0,c&&(c.readable===!1&&(this.readable=!1),c.writable===!1&&(this.writable=!1),c.allowHalfOpen===!1&&(this.allowHalfOpen=!1,this.once("end",a)))}function a(){this._writableState.ended||Ke.nextTick(l,this)}function l(c){c.end()}return Object.defineProperty(o.prototype,"writableHighWaterMark",{enumerable:!1,get:function(){return this._writableState.highWaterMark}}),Object.defineProperty(o.prototype,"writableBuffer",{enumerable:!1,get:function(){return this._writableState&&this._writableState.getBuffer()}}),Object.defineProperty(o.prototype,"writableLength",{enumerable:!1,get:function(){return this._writableState.length}}),Object.defineProperty(o.prototype,"destroyed",{enumerable:!1,get:function(){return this._readableState!==void 0&&this._writableState!==void 0&&this._readableState.destroyed&&this._writableState.destroyed},set:function(c){this._readableState!==void 0&&this._writableState!==void 0&&(this._readableState.destroyed=c,this._writableState.destroyed=c)}}),wy}var O9=ae.isEncoding||function(t){switch(t&&t.toLowerCase()){case"hex":case"utf8":case"utf-8":case"ascii":case"binary":case"base64":case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":case"raw":return!0;default:return!1}};function Ip(t){switch(this.encoding=(t||"utf8").toLowerCase().replace(/[-_]/,""),function(e){if(e&&!O9(e))throw new Error("Unknown encoding: "+e)}(t),this.encoding){case"utf8":this.surrogateSize=3;break;case"ucs2":case"utf16le":this.surrogateSize=2,this.detectIncompleteChar=M9;break;case"base64":this.surrogateSize=3,this.detectIncompleteChar=L9;break;default:return void(this.write=N9)}this.charBuffer=new ae(6),this.charReceived=0,this.charLength=0}function N9(t){return t.toString(this.encoding)}function M9(t){this.charReceived=t.length%2,this.charLength=this.charReceived?2:0}function L9(t){this.charReceived=t.length%3,this.charLength=this.charReceived?3:0}Ip.prototype.write=function(t){for(var e="";this.charLength;){var n=t.length>=this.charLength-this.charReceived?this.charLength-this.charReceived:t.length;if(t.copy(this.charBuffer,this.charReceived,0,n),this.charReceived+=n,this.charReceived<this.charLength)return"";if(t=t.slice(n,t.length),!((i=(e=this.charBuffer.slice(0,this.charLength).toString(this.encoding)).charCodeAt(e.length-1))>=55296&&i<=56319)){if(this.charReceived=this.charLength=0,t.length===0)return e;break}this.charLength+=this.surrogateSize,e=""}this.detectIncompleteChar(t);var r=t.length;this.charLength&&(t.copy(this.charBuffer,0,t.length-this.charReceived,r),r-=this.charReceived);var i;if(r=(e+=t.toString(this.encoding,0,r)).length-1,(i=e.charCodeAt(r))>=55296&&i<=56319){var s=this.surrogateSize;return this.charLength+=s,this.charReceived+=s,this.charBuffer.copy(this.charBuffer,s,0,s),t.copy(this.charBuffer,0,0,s),e.substring(0,r)}return e},Ip.prototype.detectIncompleteChar=function(t){for(var e=t.length>=3?3:t.length;e>0;e--){var n=t[t.length-e];if(e==1&&n>>5==6){this.charLength=2;break}if(e<=2&&n>>4==14){this.charLength=3;break}if(e<=3&&n>>3==30){this.charLength=4;break}}this.charReceived=e},Ip.prototype.end=function(t){var e="";if(t&&t.length&&(e=this.write(t)),this.charReceived){var n=this.charReceived,r=this.charBuffer,i=this.encoding;e+=r.slice(0,n).toString(i)}return e};var lx=Ff(Object.freeze({__proto__:null,StringDecoder:Ip})),cx=pl.codes.ERR_STREAM_PREMATURE_CLOSE;function B9(){}var by,ux,dx,fx,Ey,hx,$b=function t(e,n,r){if(typeof n=="function")return t(e,null,n);n||(n={}),r=function(m){var g=!1;return function(){if(!g){g=!0;for(var w=arguments.length,p=new Array(w),v=0;v<w;v++)p[v]=arguments[v];m.apply(this,p)}}}(r||B9);var i=n.readable||n.readable!==!1&&e.readable,s=n.writable||n.writable!==!1&&e.writable,o=function(){e.writable||l()},a=e._writableState&&e._writableState.finished,l=function(){s=!1,a=!0,i||r.call(e)},c=e._readableState&&e._readableState.endEmitted,u=function(){i=!1,c=!0,s||r.call(e)},d=function(m){r.call(e,m)},f=function(){var m;return i&&!c?(e._readableState&&e._readableState.ended||(m=new cx),r.call(e,m)):s&&!a?(e._writableState&&e._writableState.ended||(m=new cx),r.call(e,m)):void 0},h=function(){e.req.on("finish",l)};return function(m){return m.setHeader&&typeof m.abort=="function"}(e)?(e.on("complete",l),e.on("abort",f),e.req?h():e.on("request",h)):s&&!e._writableState&&(e.on("end",o),e.on("close",o)),e.on("end",u),e.on("finish",l),n.error!==!1&&e.on("error",d),e.on("close",f),function(){e.removeListener("complete",l),e.removeListener("abort",f),e.removeListener("request",h),e.req&&e.req.removeListener("finish",l),e.removeListener("end",o),e.removeListener("close",o),e.removeListener("finish",l),e.removeListener("end",u),e.removeListener("error",d),e.removeListener("close",f)}};function D9(){if(ux)return by;var t;function e(g,w,p){return(w=function(v){var y=function(C,P){if(typeof C!="object"||C===null)return C;var L=C[Symbol.toPrimitive];if(L!==void 0){var j=L.call(C,P);if(typeof j!="object")return j;throw new TypeError("@@toPrimitive must return a primitive value.")}return(P==="string"?String:Number)(C)}(v,"string");return typeof y=="symbol"?y:String(y)}(w))in g?Object.defineProperty(g,w,{value:p,enumerable:!0,configurable:!0,writable:!0}):g[w]=p,g}ux=1;var n=$b,r=Symbol("lastResolve"),i=Symbol("lastReject"),s=Symbol("error"),o=Symbol("ended"),a=Symbol("lastPromise"),l=Symbol("handlePromise"),c=Symbol("stream");function u(g,w){return{value:g,done:w}}function d(g){var w=g[r];if(w!==null){var p=g[c].read();p!==null&&(g[a]=null,g[r]=null,g[i]=null,w(u(p,!1)))}}function f(g){Ke.nextTick(d,g)}var h=Object.getPrototypeOf(function(){}),m=Object.setPrototypeOf((e(t={get stream(){return this[c]},next:function(){var g=this,w=this[s];if(w!==null)return Promise.reject(w);if(this[o])return Promise.resolve(u(void 0,!0));if(this[c].destroyed)return new Promise(function(C,P){Ke.nextTick(function(){g[s]?P(g[s]):C(u(void 0,!0))})});var p,v=this[a];if(v)p=new Promise(function(C,P){return function(L,j){C.then(function(){P[o]?L(u(void 0,!0)):P[l](L,j)},j)}}(v,this));else{var y=this[c].read();if(y!==null)return Promise.resolve(u(y,!1));p=new Promise(this[l])}return this[a]=p,p}},Symbol.asyncIterator,function(){return this}),e(t,"return",function(){var g=this;return new Promise(function(w,p){g[c].destroy(null,function(v){v?p(v):w(u(void 0,!0))})})}),t),h);return by=function(g){var w,p=Object.create(m,(e(w={},c,{value:g,writable:!0}),e(w,r,{value:null,writable:!0}),e(w,i,{value:null,writable:!0}),e(w,s,{value:null,writable:!0}),e(w,o,{value:g._readableState.endEmitted,writable:!0}),e(w,l,{value:function(v,y){var C=p[c].read();C?(p[a]=null,p[r]=null,p[i]=null,v(u(C,!1))):(p[r]=v,p[i]=y)},writable:!0}),w));return p[a]=null,n(g,function(v){if(v&&v.code!=="ERR_STREAM_PREMATURE_CLOSE"){var y=p[i];return y!==null&&(p[a]=null,p[r]=null,p[i]=null,y(v)),void(p[s]=v)}var C=p[r];C!==null&&(p[a]=null,p[r]=null,p[i]=null,C(u(void 0,!0))),p[o]=!0}),g.on("readable",f.bind(null,p)),p},by}function zR(){if(hx)return Ey;var t;hx=1,Ey=P,P.ReadableState=C,Pb.EventEmitter;var e=function(A,S){return A.listeners(S).length},n=PR(),r=Ib.Buffer,i=(Pr!==void 0?Pr:typeof window<"u"?window:typeof self<"u"?self:{}).Uint8Array||function(){},s,o=UR;s=o&&o.debuglog?o.debuglog("stream"):function(){};var a,l,c,u=P9(),d=FR(),f=HR().getHighWaterMark,h=pl.codes,m=h.ERR_INVALID_ARG_TYPE,g=h.ERR_STREAM_PUSH_AFTER_EOF,w=h.ERR_METHOD_NOT_IMPLEMENTED,p=h.ERR_STREAM_UNSHIFT_AFTER_END_EVENT;zf(P,n);var v=d.errorOrDestroy,y=["error","close","destroy","pause","resume"];function C(A,S,T){t=t||vu(),A=A||{},typeof T!="boolean"&&(T=S instanceof t),this.objectMode=!!A.objectMode,T&&(this.objectMode=this.objectMode||!!A.readableObjectMode),this.highWaterMark=f(this,A,"readableHighWaterMark",T),this.buffer=new u,this.length=0,this.pipes=null,this.pipesCount=0,this.flowing=null,this.ended=!1,this.endEmitted=!1,this.reading=!1,this.sync=!0,this.needReadable=!1,this.emittedReadable=!1,this.readableListening=!1,this.resumeScheduled=!1,this.paused=!0,this.emitClose=A.emitClose!==!1,this.autoDestroy=!!A.autoDestroy,this.destroyed=!1,this.defaultEncoding=A.defaultEncoding||"utf8",this.awaitDrain=0,this.readingMore=!1,this.decoder=null,this.encoding=null,A.encoding&&(a||(a=lx.StringDecoder),this.decoder=new a(A.encoding),this.encoding=A.encoding)}function P(A){if(t=t||vu(),!(this instanceof P))return new P(A);var S=this instanceof t;this._readableState=new C(A,this,S),this.readable=!0,A&&(typeof A.read=="function"&&(this._read=A.read),typeof A.destroy=="function"&&(this._destroy=A.destroy)),n.call(this)}function L(A,S,T,R,N){s("readableAddChunk",S);var U,z=A._readableState;if(S===null)z.reading=!1,function(q,Q){if(s("onEofChunk"),!Q.ended){if(Q.decoder){var ie=Q.decoder.end();ie&&ie.length&&(Q.buffer.push(ie),Q.length+=Q.objectMode?1:ie.length)}Q.ended=!0,Q.sync?F(q):(Q.needReadable=!1,Q.emittedReadable||(Q.emittedReadable=!0,W(q)))}}(A,z);else if(N||(U=function(q,Q){var ie;oe=Q,r.isBuffer(oe)||oe instanceof i||typeof Q=="string"||Q===void 0||q.objectMode||(ie=new m("chunk",["string","Buffer","Uint8Array"],Q));var oe;return ie}(z,S)),U)v(A,U);else if(z.objectMode||S&&S.length>0)if(typeof S=="string"||z.objectMode||Object.getPrototypeOf(S)===r.prototype||(S=function(q){return r.from(q)}(S)),R)z.endEmitted?v(A,new p):j(A,z,S,!0);else if(z.ended)v(A,new g);else{if(z.destroyed)return!1;z.reading=!1,z.decoder&&!T?(S=z.decoder.write(S),z.objectMode||S.length!==0?j(A,z,S,!1):K(A,z)):j(A,z,S,!1)}else R||(z.reading=!1,K(A,z));return!z.ended&&(z.length<z.highWaterMark||z.length===0)}function j(A,S,T,R){S.flowing&&S.length===0&&!S.sync?(S.awaitDrain=0,A.emit("data",T)):(S.length+=S.objectMode?1:T.length,R?S.buffer.unshift(T):S.buffer.push(T),S.needReadable&&F(A)),K(A,S)}Object.defineProperty(P.prototype,"destroyed",{enumerable:!1,get:function(){return this._readableState!==void 0&&this._readableState.destroyed},set:function(A){this._readableState&&(this._readableState.destroyed=A)}}),P.prototype.destroy=d.destroy,P.prototype._undestroy=d.undestroy,P.prototype._destroy=function(A,S){S(A)},P.prototype.push=function(A,S){var T,R=this._readableState;return R.objectMode?T=!0:typeof A=="string"&&((S=S||R.defaultEncoding)!==R.encoding&&(A=r.from(A,S),S=""),T=!0),L(this,A,S,!1,T)},P.prototype.unshift=function(A){return L(this,A,null,!0,!1)},P.prototype.isPaused=function(){return this._readableState.flowing===!1},P.prototype.setEncoding=function(A){a||(a=lx.StringDecoder);var S=new a(A);this._readableState.decoder=S,this._readableState.encoding=this._readableState.decoder.encoding;for(var T=this._readableState.buffer.head,R="";T!==null;)R+=S.write(T.data),T=T.next;return this._readableState.buffer.clear(),R!==""&&this._readableState.buffer.push(R),this._readableState.length=R.length,this};var D=1073741824;function V(A,S){return A<=0||S.length===0&&S.ended?0:S.objectMode?1:A!=A?S.flowing&&S.length?S.buffer.head.data.length:S.length:(A>S.highWaterMark&&(S.highWaterMark=function(T){return T>=D?T=D:(T--,T|=T>>>1,T|=T>>>2,T|=T>>>4,T|=T>>>8,T|=T>>>16,T++),T}(A)),A<=S.length?A:S.ended?S.length:(S.needReadable=!0,0))}function F(A){var S=A._readableState;s("emitReadable",S.needReadable,S.emittedReadable),S.needReadable=!1,S.emittedReadable||(s("emitReadable",S.flowing),S.emittedReadable=!0,Ke.nextTick(W,A))}function W(A){var S=A._readableState;s("emitReadable_",S.destroyed,S.length,S.ended),S.destroyed||!S.length&&!S.ended||(A.emit("readable"),S.emittedReadable=!1),S.needReadable=!S.flowing&&!S.ended&&S.length<=S.highWaterMark,B(A)}function K(A,S){S.readingMore||(S.readingMore=!0,Ke.nextTick($,A,S))}function $(A,S){for(;!S.reading&&!S.ended&&(S.length<S.highWaterMark||S.flowing&&S.length===0);){var T=S.length;if(s("maybeReadMore read 0"),A.read(0),T===S.length)break}S.readingMore=!1}function M(A){var S=A._readableState;S.readableListening=A.listenerCount("readable")>0,S.resumeScheduled&&!S.paused?S.flowing=!0:A.listenerCount("data")>0&&A.resume()}function x(A){s("readable nexttick read 0"),A.read(0)}function O(A,S){s("resume",S.reading),S.reading||A.read(0),S.resumeScheduled=!1,A.emit("resume"),B(A),S.flowing&&!S.reading&&A.read(0)}function B(A){var S=A._readableState;for(s("flow",S.flowing);S.flowing&&A.read()!==null;);}function b(A,S){return S.length===0?null:(S.objectMode?T=S.buffer.shift():!A||A>=S.length?(T=S.decoder?S.buffer.join(""):S.buffer.length===1?S.buffer.first():S.buffer.concat(S.length),S.buffer.clear()):T=S.buffer.consume(A,S.decoder),T);var T}function E(A){var S=A._readableState;s("endReadable",S.endEmitted),S.endEmitted||(S.ended=!0,Ke.nextTick(k,S,A))}function k(A,S){if(s("endReadableNT",A.endEmitted,A.length),!A.endEmitted&&A.length===0&&(A.endEmitted=!0,S.readable=!1,S.emit("end"),A.autoDestroy)){var T=S._writableState;(!T||T.autoDestroy&&T.finished)&&S.destroy()}}function I(A,S){for(var T=0,R=A.length;T<R;T++)if(A[T]===S)return T;return-1}return P.prototype.read=function(A){s("read",A),A=parseInt(A,10);var S=this._readableState,T=A;if(A!==0&&(S.emittedReadable=!1),A===0&&S.needReadable&&((S.highWaterMark!==0?S.length>=S.highWaterMark:S.length>0)||S.ended))return s("read: emitReadable",S.length,S.ended),S.length===0&&S.ended?E(this):F(this),null;if((A=V(A,S))===0&&S.ended)return S.length===0&&E(this),null;var R,N=S.needReadable;return s("need readable",N),(S.length===0||S.length-A<S.highWaterMark)&&s("length less than watermark",N=!0),S.ended||S.reading?s("reading or ended",N=!1):N&&(s("do read"),S.reading=!0,S.sync=!0,S.length===0&&(S.needReadable=!0),this._read(S.highWaterMark),S.sync=!1,S.reading||(A=V(T,S))),(R=A>0?b(A,S):null)===null?(S.needReadable=S.length<=S.highWaterMark,A=0):(S.length-=A,S.awaitDrain=0),S.length===0&&(S.ended||(S.needReadable=!0),T!==A&&S.ended&&E(this)),R!==null&&this.emit("data",R),R},P.prototype._read=function(A){v(this,new w("_read()"))},P.prototype.pipe=function(A,S){var T=this,R=this._readableState;switch(R.pipesCount){case 0:R.pipes=A;break;case 1:R.pipes=[R.pipes,A];break;default:R.pipes.push(A)}R.pipesCount+=1,s("pipe count=%d opts=%j",R.pipesCount,S);var N=(!S||S.end!==!1)&&A!==Ke.stdout&&A!==Ke.stderr?z:Z;function U(te,ue){s("onunpipe"),te===T&&ue&&ue.hasUnpiped===!1&&(ue.hasUnpiped=!0,s("cleanup"),A.removeListener("close",J),A.removeListener("finish",le),A.removeListener("drain",q),A.removeListener("error",oe),A.removeListener("unpipe",U),T.removeListener("end",z),T.removeListener("end",Z),T.removeListener("data",ie),Q=!0,!R.awaitDrain||A._writableState&&!A._writableState.needDrain||q())}function z(){s("onend"),A.end()}R.endEmitted?Ke.nextTick(N):T.once("end",N),A.on("unpipe",U);var q=function(te){return function(){var ue=te._readableState;s("pipeOnDrain",ue.awaitDrain),ue.awaitDrain&&ue.awaitDrain--,ue.awaitDrain===0&&e(te,"data")&&(ue.flowing=!0,B(te))}}(T);A.on("drain",q);var Q=!1;function ie(te){s("ondata");var ue=A.write(te);s("dest.write",ue),ue===!1&&((R.pipesCount===1&&R.pipes===A||R.pipesCount>1&&I(R.pipes,A)!==-1)&&!Q&&(s("false write response, pause",R.awaitDrain),R.awaitDrain++),T.pause())}function oe(te){s("onerror",te),Z(),A.removeListener("error",oe),e(A,"error")===0&&v(A,te)}function J(){A.removeListener("finish",le),Z()}function le(){s("onfinish"),A.removeListener("close",J),Z()}function Z(){s("unpipe"),T.unpipe(A)}return T.on("data",ie),function(te,ue,me){if(typeof te.prependListener=="function")return te.prependListener(ue,me);te._events&&te._events[ue]?Array.isArray(te._events[ue])?te._events[ue].unshift(me):te._events[ue]=[me,te._events[ue]]:te.on(ue,me)}(A,"error",oe),A.once("close",J),A.once("finish",le),A.emit("pipe",T),R.flowing||(s("pipe resume"),T.resume()),A},P.prototype.unpipe=function(A){var S=this._readableState,T={hasUnpiped:!1};if(S.pipesCount===0)return this;if(S.pipesCount===1)return A&&A!==S.pipes||(A||(A=S.pipes),S.pipes=null,S.pipesCount=0,S.flowing=!1,A&&A.emit("unpipe",this,T)),this;if(!A){var R=S.pipes,N=S.pipesCount;S.pipes=null,S.pipesCount=0,S.flowing=!1;for(var U=0;U<N;U++)R[U].emit("unpipe",this,{hasUnpiped:!1});return this}var z=I(S.pipes,A);return z===-1||(S.pipes.splice(z,1),S.pipesCount-=1,S.pipesCount===1&&(S.pipes=S.pipes[0]),A.emit("unpipe",this,T)),this},P.prototype.on=function(A,S){var T=n.prototype.on.call(this,A,S),R=this._readableState;return A==="data"?(R.readableListening=this.listenerCount("readable")>0,R.flowing!==!1&&this.resume()):A==="readable"&&(R.endEmitted||R.readableListening||(R.readableListening=R.needReadable=!0,R.flowing=!1,R.emittedReadable=!1,s("on readable",R.length,R.reading),R.length?F(this):R.reading||Ke.nextTick(x,this))),T},P.prototype.addListener=P.prototype.on,P.prototype.removeListener=function(A,S){var T=n.prototype.removeListener.call(this,A,S);return A==="readable"&&Ke.nextTick(M,this),T},P.prototype.removeAllListeners=function(A){var S=n.prototype.removeAllListeners.apply(this,arguments);return A!=="readable"&&A!==void 0||Ke.nextTick(M,this),S},P.prototype.resume=function(){var A=this._readableState;return A.flowing||(s("resume"),A.flowing=!A.readableListening,function(S,T){T.resumeScheduled||(T.resumeScheduled=!0,Ke.nextTick(O,S,T))}(this,A)),A.paused=!1,this},P.prototype.pause=function(){return s("call pause flowing=%j",this._readableState.flowing),this._readableState.flowing!==!1&&(s("pause"),this._readableState.flowing=!1,this.emit("pause")),this._readableState.paused=!0,this},P.prototype.wrap=function(A){var S=this,T=this._readableState,R=!1;for(var N in A.on("end",function(){if(s("wrapped end"),T.decoder&&!T.ended){var z=T.decoder.end();z&&z.length&&S.push(z)}S.push(null)}),A.on("data",function(z){s("wrapped data"),T.decoder&&(z=T.decoder.write(z)),T.objectMode&&z==null||(T.objectMode||z&&z.length)&&(S.push(z)||(R=!0,A.pause()))}),A)this[N]===void 0&&typeof A[N]=="function"&&(this[N]=function(z){return function(){return A[z].apply(A,arguments)}}(N));for(var U=0;U<y.length;U++)A.on(y[U],this.emit.bind(this,y[U]));return this._read=function(z){s("wrapped _read",z),R&&(R=!1,A.resume())},this},typeof Symbol=="function"&&(P.prototype[Symbol.asyncIterator]=function(){return l===void 0&&(l=D9()),l(this)}),Object.defineProperty(P.prototype,"readableHighWaterMark",{enumerable:!1,get:function(){return this._readableState.highWaterMark}}),Object.defineProperty(P.prototype,"readableBuffer",{enumerable:!1,get:function(){return this._readableState&&this._readableState.buffer}}),Object.defineProperty(P.prototype,"readableFlowing",{enumerable:!1,get:function(){return this._readableState.flowing},set:function(A){this._readableState&&(this._readableState.flowing=A)}}),P._fromList=b,Object.defineProperty(P.prototype,"readableLength",{enumerable:!1,get:function(){return this._readableState.length}}),typeof Symbol=="function"&&(P.from=function(A,S){return c===void 0&&(c=fx?dx:(fx=1,dx=function(){throw new Error("Readable.from is not available in the browser")})),c(P,A,S)}),Ey}var VR=Zi,jg=pl.codes,$9=jg.ERR_METHOD_NOT_IMPLEMENTED,U9=jg.ERR_MULTIPLE_CALLBACK,F9=jg.ERR_TRANSFORM_ALREADY_TRANSFORMING,j9=jg.ERR_TRANSFORM_WITH_LENGTH_0,Op=vu();function H9(t,e){var n=this._transformState;n.transforming=!1;var r=n.writecb;if(r===null)return this.emit("error",new U9);n.writechunk=null,n.writecb=null,e!=null&&this.push(e),r(t);var i=this._readableState;i.reading=!1,(i.needReadable||i.length<i.highWaterMark)&&this._read(i.highWaterMark)}function Zi(t){if(!(this instanceof Zi))return new Zi(t);Op.call(this,t),this._transformState={afterTransform:H9.bind(this),needTransform:!1,transforming:!1,writecb:null,writechunk:null,writeencoding:null},this._readableState.needReadable=!0,this._readableState.sync=!1,t&&(typeof t.transform=="function"&&(this._transform=t.transform),typeof t.flush=="function"&&(this._flush=t.flush)),this.on("prefinish",K9)}function K9(){var t=this;typeof this._flush!="function"||this._readableState.destroyed?px(this,null,null):this._flush(function(e,n){px(t,e,n)})}function px(t,e,n){if(e)return t.emit("error",e);if(n!=null&&t.push(n),t._writableState.length)throw new j9;if(t._transformState.transforming)throw new F9;return t.push(null)}zf(Zi,Op),Zi.prototype.push=function(t,e){return this._transformState.needTransform=!1,Op.prototype.push.call(this,t,e)},Zi.prototype._transform=function(t,e,n){n(new $9("_transform()"))},Zi.prototype._write=function(t,e,n){var r=this._transformState;if(r.writecb=n,r.writechunk=t,r.writeencoding=e,!r.transforming){var i=this._readableState;(r.needTransform||i.needReadable||i.length<i.highWaterMark)&&this._read(i.highWaterMark)}},Zi.prototype._read=function(t){var e=this._transformState;e.writechunk===null||e.transforming?e.needTransform=!0:(e.transforming=!0,this._transform(e.writechunk,e.writeencoding,e.afterTransform))},Zi.prototype._destroy=function(t,e){Op.prototype._destroy.call(this,t,function(n){e(n)})};var Ay,z9=uf,GR=VR;function uf(t){if(!(this instanceof uf))return new uf(t);GR.call(this,t)}zf(uf,GR),uf.prototype._transform=function(t,e,n){n(null,t)};var WR=pl.codes,V9=WR.ERR_MISSING_ARGS,G9=WR.ERR_STREAM_DESTROYED;function gx(t){if(t)throw t}function mx(t){t()}function W9(t,e){return t.pipe(e)}var q9=function(){for(var t=arguments.length,e=new Array(t),n=0;n<t;n++)e[n]=arguments[n];var r,i=function(o){return o.length?typeof o[o.length-1]!="function"?gx:o.pop():gx}(e);if(Array.isArray(e[0])&&(e=e[0]),e.length<2)throw new V9("streams");var s=e.map(function(o,a){var l=a<e.length-1;return function(c,u,d,f){f=function(g){var w=!1;return function(){w||(w=!0,g.apply(void 0,arguments))}}(f);var h=!1;c.on("close",function(){h=!0}),Ay===void 0&&(Ay=$b),Ay(c,{readable:u,writable:d},function(g){if(g)return f(g);h=!0,f()});var m=!1;return function(g){if(!h&&!m)return m=!0,function(w){return w.setHeader&&typeof w.abort=="function"}(c)?c.abort():typeof c.destroy=="function"?c.destroy():void f(g||new G9("pipe"))}}(o,l,a>0,function(c){r||(r=c),c&&s.forEach(mx),l||(s.forEach(mx),i(r))})});return e.reduce(W9)};(function(t,e){(e=$w.exports=zR()).Stream=e,e.Readable=e,e.Writable=KR(),e.Duplex=vu(),e.Transform=VR,e.PassThrough=z9,e.finished=$b,e.pipeline=q9})(0,$w.exports);var wu=$w.exports;function Q9(t={}){const e={},n=new wu.Duplex({objectMode:!0,read:()=>{},write:function(s,o,a){let l=null;try{s.id?function(c){const{id:u}=c;if(u===null)return;const d=e[u];if(!d)return void console.warn(`StreamMiddleware - Unknown response id "${u}"`);delete e[u],Object.assign(d.res,c),setTimeout(d.end)}(s):function(c){t!=null&&t.retryOnMessage&&c.method===t.retryOnMessage&&Object.values(e).forEach(({req:u,retryCount:d=0})=>{if(!u.id)return;if(d>=3)throw new Error(`StreamMiddleware - Retry limit exceeded for request id "${u.id}"`);const f=e[u.id];f&&(f.retryCount=d+1),i(u)}),r.emit("notification",c)}(s)}catch(c){l=c}a(l)}}),r=new AR;return{events:r,middleware:(s,o,a,l)=>{e[s.id]={req:s,res:o,next:a,end:l},i(s)},stream:n};function i(s){n.push(s)}}var U0={},Uw={exports:{}},Y9=function t(e,n){if(e&&n)return t(e)(n);if(typeof e!="function")throw new TypeError("need wrapper function");return Object.keys(e).forEach(function(i){r[i]=e[i]}),r;function r(){for(var i=new Array(arguments.length),s=0;s<i.length;s++)i[s]=arguments[s];var o=e.apply(this,i),a=i[i.length-1];return typeof o=="function"&&o!==a&&Object.keys(a).forEach(function(l){o[l]=a[l]}),o}},yx=Y9;function Hh(t){var e=function(){return e.called?e.value:(e.called=!0,e.value=t.apply(this,arguments))};return e.called=!1,e}function vx(t){var e=function(){if(e.called)throw new Error(e.onceError);return e.called=!0,e.value=t.apply(this,arguments)},n=t.name||"Function wrapped with `once`";return e.onceError=n+" shouldn't be called more than once",e.called=!1,e}Uw.exports=yx(Hh),Uw.exports.strict=yx(vx),Hh.proto=Hh(function(){Object.defineProperty(Function.prototype,"once",{value:function(){return Hh(this)},configurable:!0}),Object.defineProperty(Function.prototype,"onceStrict",{value:function(){return vx(this)},configurable:!0})});var J9=Uw.exports,F0={};Object.defineProperty(F0,"__esModule",{value:!0}),F0.Substream=void 0;const Z9=wu;class X9 extends Z9.Duplex{constructor({parent:e,name:n}){super({objectMode:!0}),this._parent=e,this._name=n}_read(){}_write(e,n,r){this._parent.push({name:this._name,data:e}),r()}}F0.Substream=X9;var e$=Pr&&Pr.__importDefault||function(t){return t&&t.__esModule?t:{default:t}};Object.defineProperty(U0,"__esModule",{value:!0}),U0.ObjectMultiplex=void 0;const Sy=wu,t$=e$(J9),n$=F0,wx=Symbol("IGNORE_SUBSTREAM");let r$=class extends Sy.Duplex{constructor(t={}){super(Object.assign(Object.assign({},t),{objectMode:!0})),this._substreams={}}createStream(t){if(this.destroyed)throw new Error(`ObjectMultiplex - parent stream for name "${t}" already destroyed`);if(this._readableState.ended||this._writableState.ended)throw new Error(`ObjectMultiplex - parent stream for name "${t}" already ended`);if(!t)throw new Error("ObjectMultiplex - name must not be empty");if(this._substreams[t])throw new Error(`ObjectMultiplex - Substream for name "${t}" already exists`);const e=new n$.Substream({parent:this,name:t});return this._substreams[t]=e,function(n,r){const i=(0,t$.default)(r);(0,Sy.finished)(n,{readable:!1},i),(0,Sy.finished)(n,{writable:!1},i)}(this,n=>e.destroy(n||void 0)),e}ignoreStream(t){if(!t)throw new Error("ObjectMultiplex - name must not be empty");if(this._substreams[t])throw new Error(`ObjectMultiplex - Substream for name "${t}" already exists`);this._substreams[t]=wx}_read(){}_write(t,e,n){const{name:r,data:i}=t;if(!r)return console.warn(`ObjectMultiplex - malformed chunk without name "${t}"`),n();const s=this._substreams[r];return s?(s!==wx&&s.push(i),n()):(console.warn(`ObjectMultiplex - orphaned data for stream "${r}"`),n())}};U0.ObjectMultiplex=r$;var i$=Bg(U0.ObjectMultiplex);const ci=t=>t!==null&&typeof t=="object"&&typeof t.pipe=="function";ci.writable=t=>ci(t)&&t.writable!==!1&&typeof t._write=="function"&&typeof t._writableState=="object",ci.readable=t=>ci(t)&&t.readable!==!1&&typeof t._read=="function"&&typeof t._readableState=="object",ci.duplex=t=>ci.writable(t)&&ci.readable(t),ci.transform=t=>ci.duplex(t)&&typeof t._transform=="function";var ui,s$=ci,o$=class extends A9{constructor(t,{jsonRpcStreamName:e,logger:n=console,maxEventListeners:r=100,rpcMiddleware:i=[]}){if(super({logger:n,maxEventListeners:r,rpcMiddleware:i}),!s$.duplex(t))throw new Error(yt.errors.invalidDuplexStream());this._handleStreamDisconnect=this._handleStreamDisconnect.bind(this);const s=new i$;wu.pipeline(t,s,t,this._handleStreamDisconnect.bind(this,"MetaMask")),this._jsonRpcConnection=Q9({retryOnMessage:"METAMASK_EXTENSION_CONNECT_CAN_RETRY"}),wu.pipeline(this._jsonRpcConnection.stream,s.createStream(e),this._jsonRpcConnection.stream,this._handleStreamDisconnect.bind(this,"MetaMask RpcProvider")),this._rpcEngine.push(this._jsonRpcConnection.middleware),this._jsonRpcConnection.events.on("notification",o=>{const{method:a,params:l}=o;a==="metamask_accountsChanged"?this._handleAccountsChanged(l):a==="metamask_unlockStateChanged"?this._handleUnlockStateChanged(l):a==="metamask_chainChanged"?this._handleChainChanged(l):SR.includes(a)?this.emit("message",{type:a,data:l}):a==="METAMASK_STREAM_FAILURE"&&t.destroy(new Error(yt.errors.permanentlyDisconnected()))})}async _initializeStateAsync(){let t;try{t=await this.request({method:"metamask_getProviderState"})}catch(e){this._log.error("MetaMask: Failed to get initial state. Please report this bug.",e)}this._initializeState(t)}_handleStreamDisconnect(t,e){let n=`MetaMask: Lost connection to "${t}".`;e!=null&&e.stack&&(n+=`
${e.stack}`),this._log.warn(n),this.listenerCount("error")>0&&this.emit("error",n),this._handleDisconnect(!1,e?e.message:void 0)}_handleChainChanged({chainId:t,networkVersion:e}={}){xR(t)&&(n=>!!n&&typeof n=="string")(e)?e==="loading"?this._handleDisconnect(!0):super._handleChainChanged({chainId:t}):this._log.error(yt.errors.invalidNetworkParams(),{chainId:t,networkVersion:e})}},a$=class extends o${constructor(t,{jsonRpcStreamName:e="metamask-provider",logger:n=console,maxEventListeners:r=100,shouldSendMetadata:i}={}){if(super(t,{jsonRpcStreamName:e,logger:n,maxEventListeners:r,rpcMiddleware:p9(n)}),this._sentWarnings={chainId:!1,networkVersion:!1,selectedAddress:!1,enable:!1,experimentalMethods:!1,send:!1,events:{close:!1,data:!1,networkChanged:!1,notification:!1}},Dw(this,ui,void 0),this._initializeStateAsync(),Ji(this,ui,null),this.isMetaMask=!0,this._sendSync=this._sendSync.bind(this),this.enable=this.enable.bind(this),this.send=this.send.bind(this),this.sendAsync=this.sendAsync.bind(this),this._warnOfDeprecation=this._warnOfDeprecation.bind(this),this._metamask=this._getExperimentalApi(),this._jsonRpcConnection.events.on("notification",s=>{const{method:o}=s;SR.includes(o)&&(this.emit("data",s),this.emit("notification",s.params.result))}),i)if(document.readyState==="complete")YS(this._rpcEngine,this._log);else{const s=()=>{YS(this._rpcEngine,this._log),window.removeEventListener("DOMContentLoaded",s)};window.addEventListener("DOMContentLoaded",s)}}get chainId(){return this._sentWarnings.chainId||(this._log.warn(yt.warnings.chainIdDeprecation),this._sentWarnings.chainId=!0),super.chainId}get networkVersion(){return this._sentWarnings.networkVersion||(this._log.warn(yt.warnings.networkVersionDeprecation),this._sentWarnings.networkVersion=!0),Ti(this,ui)}get selectedAddress(){return this._sentWarnings.selectedAddress||(this._log.warn(yt.warnings.selectedAddressDeprecation),this._sentWarnings.selectedAddress=!0),super.selectedAddress}sendAsync(t,e){this._rpcRequest(t,e)}addListener(t,e){return this._warnOfDeprecation(t),super.addListener(t,e)}on(t,e){return this._warnOfDeprecation(t),super.on(t,e)}once(t,e){return this._warnOfDeprecation(t),super.once(t,e)}prependListener(t,e){return this._warnOfDeprecation(t),super.prependListener(t,e)}prependOnceListener(t,e){return this._warnOfDeprecation(t),super.prependOnceListener(t,e)}_handleDisconnect(t,e){super._handleDisconnect(t,e),Ti(this,ui)&&!t&&Ji(this,ui,null)}_warnOfDeprecation(t){var e;((e=this._sentWarnings)==null?void 0:e.events[t])===!1&&(this._log.warn(yt.warnings.events[t]),this._sentWarnings.events[t]=!0)}async enable(){return this._sentWarnings.enable||(this._log.warn(yt.warnings.enableDeprecation),this._sentWarnings.enable=!0),new Promise((t,e)=>{try{this._rpcRequest({method:"eth_requestAccounts",params:[]},Rp(t,e))}catch(n){e(n)}})}send(t,e){return this._sentWarnings.send||(this._log.warn(yt.warnings.sendDeprecation),this._sentWarnings.send=!0),typeof t!="string"||e&&!Array.isArray(e)?t&&typeof t=="object"&&typeof e=="function"?this._rpcRequest(t,e):this._sendSync(t):new Promise((n,r)=>{try{this._rpcRequest({method:t,params:e},Rp(n,r,!1))}catch(i){r(i)}})}_sendSync(t){let e;switch(t.method){case"eth_accounts":e=this.selectedAddress?[this.selectedAddress]:[];break;case"eth_coinbase":e=this.selectedAddress??null;break;case"eth_uninstallFilter":this._rpcRequest(t,CR),e=!0;break;case"net_version":e=Ti(this,ui)??null;break;default:throw new Error(yt.errors.unsupportedSync(t.method))}return{id:t.id,jsonrpc:t.jsonrpc,result:e}}_getExperimentalApi(){return new Proxy({isUnlocked:async()=>(this._state.initialized||await new Promise(t=>{this.on("_initialized",()=>t())}),this._state.isUnlocked),requestBatch:async t=>{if(!Array.isArray(t))throw wd({message:"Batch requests must be made with an array of request objects.",data:t});return new Promise((e,n)=>{this._rpcRequest(t,Rp(e,n))})}},{get:(t,e,...n)=>(this._sentWarnings.experimentalMethods||(this._log.warn(yt.warnings.experimentalMethods),this._sentWarnings.experimentalMethods=!0),Reflect.get(t,e,...n))})}_handleChainChanged({chainId:t,networkVersion:e}={}){super._handleChainChanged({chainId:t,networkVersion:e}),this._state.isConnected&&e!==Ti(this,ui)&&(Ji(this,ui,e),this._state.initialized&&this.emit("networkChanged",Ti(this,ui)))}};ui=new WeakMap;const ne=Sn("MM_SDK");let bx;ne.color="#FFAC1C";var qR={},$o={};Object.defineProperty($o,"__esModule",{value:!0}),$o.EthereumProviderError=$o.EthereumRpcError=void 0;const l$=mR;class QR extends Error{constructor(e,n,r){if(!Number.isInteger(e))throw new Error('"code" must be an integer.');if(!n||typeof n!="string")throw new Error('"message" must be a nonempty string.');super(n),this.code=e,r!==void 0&&(this.data=r)}serialize(){const e={code:this.code,message:this.message};return this.data!==void 0&&(e.data=this.data),this.stack&&(e.stack=this.stack),e}toString(){return l$.default(this.serialize(),c$,2)}}$o.EthereumRpcError=QR;function c$(t,e){if(e!=="[Circular]")return e}$o.EthereumProviderError=class extends QR{constructor(t,e,n){if(!function(r){return Number.isInteger(r)&&r>=1e3&&r<=4999}(t))throw new Error('"code" must be an integer such that: 1000 <= code <= 4999');super(t,e,n)}};var Ub={},Xs={};Object.defineProperty(Xs,"__esModule",{value:!0}),Xs.errorValues=Xs.errorCodes=void 0,Xs.errorCodes={rpc:{invalidInput:-32e3,resourceNotFound:-32001,resourceUnavailable:-32002,transactionRejected:-32003,methodNotSupported:-32004,limitExceeded:-32005,parse:-32700,invalidRequest:-32600,methodNotFound:-32601,invalidParams:-32602,internal:-32603},provider:{userRejectedRequest:4001,unauthorized:4100,unsupportedMethod:4200,disconnected:4900,chainDisconnected:4901}},Xs.errorValues={"-32700":{standard:"JSON RPC 2.0",message:"Invalid JSON was received by the server. An error occurred on the server while parsing the JSON text."},"-32600":{standard:"JSON RPC 2.0",message:"The JSON sent is not a valid Request object."},"-32601":{standard:"JSON RPC 2.0",message:"The method does not exist / is not available."},"-32602":{standard:"JSON RPC 2.0",message:"Invalid method parameter(s)."},"-32603":{standard:"JSON RPC 2.0",message:"Internal JSON-RPC error."},"-32000":{standard:"EIP-1474",message:"Invalid input."},"-32001":{standard:"EIP-1474",message:"Resource not found."},"-32002":{standard:"EIP-1474",message:"Resource unavailable."},"-32003":{standard:"EIP-1474",message:"Transaction rejected."},"-32004":{standard:"EIP-1474",message:"Method not supported."},"-32005":{standard:"EIP-1474",message:"Request limit exceeded."},4001:{standard:"EIP-1193",message:"User rejected the request."},4100:{standard:"EIP-1193",message:"The requested account and/or method has not been authorized by the user."},4200:{standard:"EIP-1193",message:"The requested method is not supported by this Ethereum provider."},4900:{standard:"EIP-1193",message:"The provider is disconnected from all chains."},4901:{standard:"EIP-1193",message:"The provider is disconnected from the specified chain."}},function(t){Object.defineProperty(t,"__esModule",{value:!0}),t.serializeError=t.isValidCode=t.getMessageFromCode=t.JSON_RPC_SERVER_ERROR_MESSAGE=void 0;const e=Xs,n=$o,r=e.errorCodes.rpc.internal,i="Unspecified error message. This is a bug, please report it.",s={code:r,message:o(r)};function o(d,f=i){if(Number.isInteger(d)){const h=d.toString();if(u(e.errorValues,h))return e.errorValues[h].message;if(l(d))return t.JSON_RPC_SERVER_ERROR_MESSAGE}return f}function a(d){if(!Number.isInteger(d))return!1;const f=d.toString();return!!e.errorValues[f]||!!l(d)}function l(d){return d>=-32099&&d<=-32e3}function c(d){return d&&typeof d=="object"&&!Array.isArray(d)?Object.assign({},d):d}function u(d,f){return Object.prototype.hasOwnProperty.call(d,f)}t.JSON_RPC_SERVER_ERROR_MESSAGE="Unspecified server error.",t.getMessageFromCode=o,t.isValidCode=a,t.serializeError=function(d,{fallbackError:f=s,shouldIncludeStack:h=!1}={}){var m,g;if(!f||!Number.isInteger(f.code)||typeof f.message!="string")throw new Error("Must provide fallback error with integer number code and string message.");if(d instanceof n.EthereumRpcError)return d.serialize();const w={};if(d&&typeof d=="object"&&!Array.isArray(d)&&u(d,"code")&&a(d.code)){const v=d;w.code=v.code,v.message&&typeof v.message=="string"?(w.message=v.message,u(v,"data")&&(w.data=v.data)):(w.message=o(w.code),w.data={originalError:c(d)})}else{w.code=f.code;const v=(m=d)===null||m===void 0?void 0:m.message;w.message=v&&typeof v=="string"?v:f.message,w.data={originalError:c(d)}}const p=(g=d)===null||g===void 0?void 0:g.stack;return h&&d&&p&&typeof p=="string"&&(w.stack=p),w}}(Ub);var j0={};Object.defineProperty(j0,"__esModule",{value:!0}),j0.ethErrors=void 0;const Fb=$o,YR=Ub,Xt=Xs;function dr(t,e){const[n,r]=JR(e);return new Fb.EthereumRpcError(t,n||YR.getMessageFromCode(t),r)}function Gu(t,e){const[n,r]=JR(e);return new Fb.EthereumProviderError(t,n||YR.getMessageFromCode(t),r)}function JR(t){if(t){if(typeof t=="string")return[t];if(typeof t=="object"&&!Array.isArray(t)){const{message:e,data:n}=t;if(e&&typeof e!="string")throw new Error("Must specify string message.");return[e||void 0,n]}}return[]}j0.ethErrors={rpc:{parse:t=>dr(Xt.errorCodes.rpc.parse,t),invalidRequest:t=>dr(Xt.errorCodes.rpc.invalidRequest,t),invalidParams:t=>dr(Xt.errorCodes.rpc.invalidParams,t),methodNotFound:t=>dr(Xt.errorCodes.rpc.methodNotFound,t),internal:t=>dr(Xt.errorCodes.rpc.internal,t),server:t=>{if(!t||typeof t!="object"||Array.isArray(t))throw new Error("Ethereum RPC Server errors must provide single object argument.");const{code:e}=t;if(!Number.isInteger(e)||e>-32005||e<-32099)throw new Error('"code" must be an integer such that: -32099 <= code <= -32005');return dr(e,t)},invalidInput:t=>dr(Xt.errorCodes.rpc.invalidInput,t),resourceNotFound:t=>dr(Xt.errorCodes.rpc.resourceNotFound,t),resourceUnavailable:t=>dr(Xt.errorCodes.rpc.resourceUnavailable,t),transactionRejected:t=>dr(Xt.errorCodes.rpc.transactionRejected,t),methodNotSupported:t=>dr(Xt.errorCodes.rpc.methodNotSupported,t),limitExceeded:t=>dr(Xt.errorCodes.rpc.limitExceeded,t)},provider:{userRejectedRequest:t=>Gu(Xt.errorCodes.provider.userRejectedRequest,t),unauthorized:t=>Gu(Xt.errorCodes.provider.unauthorized,t),unsupportedMethod:t=>Gu(Xt.errorCodes.provider.unsupportedMethod,t),disconnected:t=>Gu(Xt.errorCodes.provider.disconnected,t),chainDisconnected:t=>Gu(Xt.errorCodes.provider.chainDisconnected,t),custom:t=>{if(!t||typeof t!="object"||Array.isArray(t))throw new Error("Ethereum Provider custom errors must provide single object argument.");const{code:e,message:n,data:r}=t;if(!n||typeof n!="string")throw new Error('"message" must be a nonempty string');return new Fb.EthereumProviderError(e,n,r)}}},function(t){Object.defineProperty(t,"__esModule",{value:!0}),t.getMessageFromCode=t.serializeError=t.EthereumProviderError=t.EthereumRpcError=t.ethErrors=t.errorCodes=void 0;const e=$o;Object.defineProperty(t,"EthereumRpcError",{enumerable:!0,get:function(){return e.EthereumRpcError}}),Object.defineProperty(t,"EthereumProviderError",{enumerable:!0,get:function(){return e.EthereumProviderError}});const n=Ub;Object.defineProperty(t,"serializeError",{enumerable:!0,get:function(){return n.serializeError}}),Object.defineProperty(t,"getMessageFromCode",{enumerable:!0,get:function(){return n.getMessageFromCode}});const r=j0;Object.defineProperty(t,"ethErrors",{enumerable:!0,get:function(){return r.ethErrors}});const i=Xs;Object.defineProperty(t,"errorCodes",{enumerable:!0,get:function(){return i.errorCodes}})}(qR);var ZR={exports:{}};ZR.exports=function(t){var e={};function n(r){if(e[r])return e[r].exports;var i=e[r]={i:r,l:!1,exports:{}};return t[r].call(i.exports,i,i.exports,n),i.l=!0,i.exports}return n.m=t,n.c=e,n.d=function(r,i,s){n.o(r,i)||Object.defineProperty(r,i,{enumerable:!0,get:s})},n.r=function(r){typeof Symbol<"u"&&Symbol.toStringTag&&Object.defineProperty(r,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(r,"__esModule",{value:!0})},n.t=function(r,i){if(1&i&&(r=n(r)),8&i||4&i&&typeof r=="object"&&r&&r.__esModule)return r;var s=Object.create(null);if(n.r(s),Object.defineProperty(s,"default",{enumerable:!0,value:r}),2&i&&typeof r!="string")for(var o in r)n.d(s,o,(function(a){return r[a]}).bind(null,o));return s},n.n=function(r){var i=r&&r.__esModule?function(){return r.default}:function(){return r};return n.d(i,"a",i),i},n.o=function(r,i){return Object.prototype.hasOwnProperty.call(r,i)},n.p="",n(n.s=90)}({17:function(t,e,n){e.__esModule=!0,e.default=void 0;var r=n(18),i=function(){function s(){}return s.getFirstMatch=function(o,a){var l=a.match(o);return l&&l.length>0&&l[1]||""},s.getSecondMatch=function(o,a){var l=a.match(o);return l&&l.length>1&&l[2]||""},s.matchAndReturnConst=function(o,a,l){if(o.test(a))return l},s.getWindowsVersionName=function(o){switch(o){case"NT":return"NT";case"XP":case"NT 5.1":return"XP";case"NT 5.0":return"2000";case"NT 5.2":return"2003";case"NT 6.0":return"Vista";case"NT 6.1":return"7";case"NT 6.2":return"8";case"NT 6.3":return"8.1";case"NT 10.0":return"10";default:return}},s.getMacOSVersionName=function(o){var a=o.split(".").splice(0,2).map(function(l){return parseInt(l,10)||0});if(a.push(0),a[0]===10)switch(a[1]){case 5:return"Leopard";case 6:return"Snow Leopard";case 7:return"Lion";case 8:return"Mountain Lion";case 9:return"Mavericks";case 10:return"Yosemite";case 11:return"El Capitan";case 12:return"Sierra";case 13:return"High Sierra";case 14:return"Mojave";case 15:return"Catalina";default:return}},s.getAndroidVersionName=function(o){var a=o.split(".").splice(0,2).map(function(l){return parseInt(l,10)||0});if(a.push(0),!(a[0]===1&&a[1]<5))return a[0]===1&&a[1]<6?"Cupcake":a[0]===1&&a[1]>=6?"Donut":a[0]===2&&a[1]<2?"Eclair":a[0]===2&&a[1]===2?"Froyo":a[0]===2&&a[1]>2?"Gingerbread":a[0]===3?"Honeycomb":a[0]===4&&a[1]<1?"Ice Cream Sandwich":a[0]===4&&a[1]<4?"Jelly Bean":a[0]===4&&a[1]>=4?"KitKat":a[0]===5?"Lollipop":a[0]===6?"Marshmallow":a[0]===7?"Nougat":a[0]===8?"Oreo":a[0]===9?"Pie":void 0},s.getVersionPrecision=function(o){return o.split(".").length},s.compareVersions=function(o,a,l){l===void 0&&(l=!1);var c=s.getVersionPrecision(o),u=s.getVersionPrecision(a),d=Math.max(c,u),f=0,h=s.map([o,a],function(m){var g=d-s.getVersionPrecision(m),w=m+new Array(g+1).join(".0");return s.map(w.split("."),function(p){return new Array(20-p.length).join("0")+p}).reverse()});for(l&&(f=d-Math.min(c,u)),d-=1;d>=f;){if(h[0][d]>h[1][d])return 1;if(h[0][d]===h[1][d]){if(d===f)return 0;d-=1}else if(h[0][d]<h[1][d])return-1}},s.map=function(o,a){var l,c=[];if(Array.prototype.map)return Array.prototype.map.call(o,a);for(l=0;l<o.length;l+=1)c.push(a(o[l]));return c},s.find=function(o,a){var l,c;if(Array.prototype.find)return Array.prototype.find.call(o,a);for(l=0,c=o.length;l<c;l+=1){var u=o[l];if(a(u,l))return u}},s.assign=function(o){for(var a,l,c=o,u=arguments.length,d=new Array(u>1?u-1:0),f=1;f<u;f++)d[f-1]=arguments[f];if(Object.assign)return Object.assign.apply(Object,[o].concat(d));var h=function(){var m=d[a];typeof m=="object"&&m!==null&&Object.keys(m).forEach(function(g){c[g]=m[g]})};for(a=0,l=d.length;a<l;a+=1)h();return o},s.getBrowserAlias=function(o){return r.BROWSER_ALIASES_MAP[o]},s.getBrowserTypeByAlias=function(o){return r.BROWSER_MAP[o]||""},s}();e.default=i,t.exports=e.default},18:function(t,e,n){e.__esModule=!0,e.ENGINE_MAP=e.OS_MAP=e.PLATFORMS_MAP=e.BROWSER_MAP=e.BROWSER_ALIASES_MAP=void 0,e.BROWSER_ALIASES_MAP={"Amazon Silk":"amazon_silk","Android Browser":"android",Bada:"bada",BlackBerry:"blackberry",Chrome:"chrome",Chromium:"chromium",Electron:"electron",Epiphany:"epiphany",Firefox:"firefox",Focus:"focus",Generic:"generic","Google Search":"google_search",Googlebot:"googlebot","Internet Explorer":"ie","K-Meleon":"k_meleon",Maxthon:"maxthon","Microsoft Edge":"edge","MZ Browser":"mz","NAVER Whale Browser":"naver",Opera:"opera","Opera Coast":"opera_coast",PhantomJS:"phantomjs",Puffin:"puffin",QupZilla:"qupzilla",QQ:"qq",QQLite:"qqlite",Safari:"safari",Sailfish:"sailfish","Samsung Internet for Android":"samsung_internet",SeaMonkey:"seamonkey",Sleipnir:"sleipnir",Swing:"swing",Tizen:"tizen","UC Browser":"uc",Vivaldi:"vivaldi","WebOS Browser":"webos",WeChat:"wechat","Yandex Browser":"yandex",Roku:"roku"},e.BROWSER_MAP={amazon_silk:"Amazon Silk",android:"Android Browser",bada:"Bada",blackberry:"BlackBerry",chrome:"Chrome",chromium:"Chromium",electron:"Electron",epiphany:"Epiphany",firefox:"Firefox",focus:"Focus",generic:"Generic",googlebot:"Googlebot",google_search:"Google Search",ie:"Internet Explorer",k_meleon:"K-Meleon",maxthon:"Maxthon",edge:"Microsoft Edge",mz:"MZ Browser",naver:"NAVER Whale Browser",opera:"Opera",opera_coast:"Opera Coast",phantomjs:"PhantomJS",puffin:"Puffin",qupzilla:"QupZilla",qq:"QQ Browser",qqlite:"QQ Browser Lite",safari:"Safari",sailfish:"Sailfish",samsung_internet:"Samsung Internet for Android",seamonkey:"SeaMonkey",sleipnir:"Sleipnir",swing:"Swing",tizen:"Tizen",uc:"UC Browser",vivaldi:"Vivaldi",webos:"WebOS Browser",wechat:"WeChat",yandex:"Yandex Browser"},e.PLATFORMS_MAP={tablet:"tablet",mobile:"mobile",desktop:"desktop",tv:"tv"},e.OS_MAP={WindowsPhone:"Windows Phone",Windows:"Windows",MacOS:"macOS",iOS:"iOS",Android:"Android",WebOS:"WebOS",BlackBerry:"BlackBerry",Bada:"Bada",Tizen:"Tizen",Linux:"Linux",ChromeOS:"Chrome OS",PlayStation4:"PlayStation 4",Roku:"Roku"},e.ENGINE_MAP={EdgeHTML:"EdgeHTML",Blink:"Blink",Trident:"Trident",Presto:"Presto",Gecko:"Gecko",WebKit:"WebKit"}},90:function(t,e,n){e.__esModule=!0,e.default=void 0;var r,i=(r=n(91))&&r.__esModule?r:{default:r},s=n(18);function o(l,c){for(var u=0;u<c.length;u++){var d=c[u];d.enumerable=d.enumerable||!1,d.configurable=!0,"value"in d&&(d.writable=!0),Object.defineProperty(l,d.key,d)}}var a=function(){function l(){}var c,u,d;return l.getParser=function(f,h){if(h===void 0&&(h=!1),typeof f!="string")throw new Error("UserAgent should be a string");return new i.default(f,h)},l.parse=function(f){return new i.default(f).getResult()},c=l,d=[{key:"BROWSER_MAP",get:function(){return s.BROWSER_MAP}},{key:"ENGINE_MAP",get:function(){return s.ENGINE_MAP}},{key:"OS_MAP",get:function(){return s.OS_MAP}},{key:"PLATFORMS_MAP",get:function(){return s.PLATFORMS_MAP}}],(u=null)&&o(c.prototype,u),d&&o(c,d),l}();e.default=a,t.exports=e.default},91:function(t,e,n){e.__esModule=!0,e.default=void 0;var r=l(n(92)),i=l(n(93)),s=l(n(94)),o=l(n(95)),a=l(n(17));function l(u){return u&&u.__esModule?u:{default:u}}var c=function(){function u(f,h){if(h===void 0&&(h=!1),f==null||f==="")throw new Error("UserAgent parameter can't be empty");this._ua=f,this.parsedResult={},h!==!0&&this.parse()}var d=u.prototype;return d.getUA=function(){return this._ua},d.test=function(f){return f.test(this._ua)},d.parseBrowser=function(){var f=this;this.parsedResult.browser={};var h=a.default.find(r.default,function(m){if(typeof m.test=="function")return m.test(f);if(m.test instanceof Array)return m.test.some(function(g){return f.test(g)});throw new Error("Browser's test function is not valid")});return h&&(this.parsedResult.browser=h.describe(this.getUA())),this.parsedResult.browser},d.getBrowser=function(){return this.parsedResult.browser?this.parsedResult.browser:this.parseBrowser()},d.getBrowserName=function(f){return f?String(this.getBrowser().name).toLowerCase()||"":this.getBrowser().name||""},d.getBrowserVersion=function(){return this.getBrowser().version},d.getOS=function(){return this.parsedResult.os?this.parsedResult.os:this.parseOS()},d.parseOS=function(){var f=this;this.parsedResult.os={};var h=a.default.find(i.default,function(m){if(typeof m.test=="function")return m.test(f);if(m.test instanceof Array)return m.test.some(function(g){return f.test(g)});throw new Error("Browser's test function is not valid")});return h&&(this.parsedResult.os=h.describe(this.getUA())),this.parsedResult.os},d.getOSName=function(f){var h=this.getOS().name;return f?String(h).toLowerCase()||"":h||""},d.getOSVersion=function(){return this.getOS().version},d.getPlatform=function(){return this.parsedResult.platform?this.parsedResult.platform:this.parsePlatform()},d.getPlatformType=function(f){f===void 0&&(f=!1);var h=this.getPlatform().type;return f?String(h).toLowerCase()||"":h||""},d.parsePlatform=function(){var f=this;this.parsedResult.platform={};var h=a.default.find(s.default,function(m){if(typeof m.test=="function")return m.test(f);if(m.test instanceof Array)return m.test.some(function(g){return f.test(g)});throw new Error("Browser's test function is not valid")});return h&&(this.parsedResult.platform=h.describe(this.getUA())),this.parsedResult.platform},d.getEngine=function(){return this.parsedResult.engine?this.parsedResult.engine:this.parseEngine()},d.getEngineName=function(f){return f?String(this.getEngine().name).toLowerCase()||"":this.getEngine().name||""},d.parseEngine=function(){var f=this;this.parsedResult.engine={};var h=a.default.find(o.default,function(m){if(typeof m.test=="function")return m.test(f);if(m.test instanceof Array)return m.test.some(function(g){return f.test(g)});throw new Error("Browser's test function is not valid")});return h&&(this.parsedResult.engine=h.describe(this.getUA())),this.parsedResult.engine},d.parse=function(){return this.parseBrowser(),this.parseOS(),this.parsePlatform(),this.parseEngine(),this},d.getResult=function(){return a.default.assign({},this.parsedResult)},d.satisfies=function(f){var h=this,m={},g=0,w={},p=0;if(Object.keys(f).forEach(function(V){var F=f[V];typeof F=="string"?(w[V]=F,p+=1):typeof F=="object"&&(m[V]=F,g+=1)}),g>0){var v=Object.keys(m),y=a.default.find(v,function(V){return h.isOS(V)});if(y){var C=this.satisfies(m[y]);if(C!==void 0)return C}var P=a.default.find(v,function(V){return h.isPlatform(V)});if(P){var L=this.satisfies(m[P]);if(L!==void 0)return L}}if(p>0){var j=Object.keys(w),D=a.default.find(j,function(V){return h.isBrowser(V,!0)});if(D!==void 0)return this.compareVersion(w[D])}},d.isBrowser=function(f,h){h===void 0&&(h=!1);var m=this.getBrowserName().toLowerCase(),g=f.toLowerCase(),w=a.default.getBrowserTypeByAlias(g);return h&&w&&(g=w.toLowerCase()),g===m},d.compareVersion=function(f){var h=[0],m=f,g=!1,w=this.getBrowserVersion();if(typeof w=="string")return f[0]===">"||f[0]==="<"?(m=f.substr(1),f[1]==="="?(g=!0,m=f.substr(2)):h=[],f[0]===">"?h.push(1):h.push(-1)):f[0]==="="?m=f.substr(1):f[0]==="~"&&(g=!0,m=f.substr(1)),h.indexOf(a.default.compareVersions(w,m,g))>-1},d.isOS=function(f){return this.getOSName(!0)===String(f).toLowerCase()},d.isPlatform=function(f){return this.getPlatformType(!0)===String(f).toLowerCase()},d.isEngine=function(f){return this.getEngineName(!0)===String(f).toLowerCase()},d.is=function(f,h){return h===void 0&&(h=!1),this.isBrowser(f,h)||this.isOS(f)||this.isPlatform(f)},d.some=function(f){var h=this;return f===void 0&&(f=[]),f.some(function(m){return h.is(m)})},u}();e.default=c,t.exports=e.default},92:function(t,e,n){e.__esModule=!0,e.default=void 0;var r,i=(r=n(17))&&r.__esModule?r:{default:r},s=/version\/(\d+(\.?_?\d+)+)/i,o=[{test:[/googlebot/i],describe:function(a){var l={name:"Googlebot"},c=i.default.getFirstMatch(/googlebot\/(\d+(\.\d+))/i,a)||i.default.getFirstMatch(s,a);return c&&(l.version=c),l}},{test:[/opera/i],describe:function(a){var l={name:"Opera"},c=i.default.getFirstMatch(s,a)||i.default.getFirstMatch(/(?:opera)[\s/](\d+(\.?_?\d+)+)/i,a);return c&&(l.version=c),l}},{test:[/opr\/|opios/i],describe:function(a){var l={name:"Opera"},c=i.default.getFirstMatch(/(?:opr|opios)[\s/](\S+)/i,a)||i.default.getFirstMatch(s,a);return c&&(l.version=c),l}},{test:[/SamsungBrowser/i],describe:function(a){var l={name:"Samsung Internet for Android"},c=i.default.getFirstMatch(s,a)||i.default.getFirstMatch(/(?:SamsungBrowser)[\s/](\d+(\.?_?\d+)+)/i,a);return c&&(l.version=c),l}},{test:[/Whale/i],describe:function(a){var l={name:"NAVER Whale Browser"},c=i.default.getFirstMatch(s,a)||i.default.getFirstMatch(/(?:whale)[\s/](\d+(?:\.\d+)+)/i,a);return c&&(l.version=c),l}},{test:[/MZBrowser/i],describe:function(a){var l={name:"MZ Browser"},c=i.default.getFirstMatch(/(?:MZBrowser)[\s/](\d+(?:\.\d+)+)/i,a)||i.default.getFirstMatch(s,a);return c&&(l.version=c),l}},{test:[/focus/i],describe:function(a){var l={name:"Focus"},c=i.default.getFirstMatch(/(?:focus)[\s/](\d+(?:\.\d+)+)/i,a)||i.default.getFirstMatch(s,a);return c&&(l.version=c),l}},{test:[/swing/i],describe:function(a){var l={name:"Swing"},c=i.default.getFirstMatch(/(?:swing)[\s/](\d+(?:\.\d+)+)/i,a)||i.default.getFirstMatch(s,a);return c&&(l.version=c),l}},{test:[/coast/i],describe:function(a){var l={name:"Opera Coast"},c=i.default.getFirstMatch(s,a)||i.default.getFirstMatch(/(?:coast)[\s/](\d+(\.?_?\d+)+)/i,a);return c&&(l.version=c),l}},{test:[/opt\/\d+(?:.?_?\d+)+/i],describe:function(a){var l={name:"Opera Touch"},c=i.default.getFirstMatch(/(?:opt)[\s/](\d+(\.?_?\d+)+)/i,a)||i.default.getFirstMatch(s,a);return c&&(l.version=c),l}},{test:[/yabrowser/i],describe:function(a){var l={name:"Yandex Browser"},c=i.default.getFirstMatch(/(?:yabrowser)[\s/](\d+(\.?_?\d+)+)/i,a)||i.default.getFirstMatch(s,a);return c&&(l.version=c),l}},{test:[/ucbrowser/i],describe:function(a){var l={name:"UC Browser"},c=i.default.getFirstMatch(s,a)||i.default.getFirstMatch(/(?:ucbrowser)[\s/](\d+(\.?_?\d+)+)/i,a);return c&&(l.version=c),l}},{test:[/Maxthon|mxios/i],describe:function(a){var l={name:"Maxthon"},c=i.default.getFirstMatch(s,a)||i.default.getFirstMatch(/(?:Maxthon|mxios)[\s/](\d+(\.?_?\d+)+)/i,a);return c&&(l.version=c),l}},{test:[/epiphany/i],describe:function(a){var l={name:"Epiphany"},c=i.default.getFirstMatch(s,a)||i.default.getFirstMatch(/(?:epiphany)[\s/](\d+(\.?_?\d+)+)/i,a);return c&&(l.version=c),l}},{test:[/puffin/i],describe:function(a){var l={name:"Puffin"},c=i.default.getFirstMatch(s,a)||i.default.getFirstMatch(/(?:puffin)[\s/](\d+(\.?_?\d+)+)/i,a);return c&&(l.version=c),l}},{test:[/sleipnir/i],describe:function(a){var l={name:"Sleipnir"},c=i.default.getFirstMatch(s,a)||i.default.getFirstMatch(/(?:sleipnir)[\s/](\d+(\.?_?\d+)+)/i,a);return c&&(l.version=c),l}},{test:[/k-meleon/i],describe:function(a){var l={name:"K-Meleon"},c=i.default.getFirstMatch(s,a)||i.default.getFirstMatch(/(?:k-meleon)[\s/](\d+(\.?_?\d+)+)/i,a);return c&&(l.version=c),l}},{test:[/micromessenger/i],describe:function(a){var l={name:"WeChat"},c=i.default.getFirstMatch(/(?:micromessenger)[\s/](\d+(\.?_?\d+)+)/i,a)||i.default.getFirstMatch(s,a);return c&&(l.version=c),l}},{test:[/qqbrowser/i],describe:function(a){var l={name:/qqbrowserlite/i.test(a)?"QQ Browser Lite":"QQ Browser"},c=i.default.getFirstMatch(/(?:qqbrowserlite|qqbrowser)[/](\d+(\.?_?\d+)+)/i,a)||i.default.getFirstMatch(s,a);return c&&(l.version=c),l}},{test:[/msie|trident/i],describe:function(a){var l={name:"Internet Explorer"},c=i.default.getFirstMatch(/(?:msie |rv:)(\d+(\.?_?\d+)+)/i,a);return c&&(l.version=c),l}},{test:[/\sedg\//i],describe:function(a){var l={name:"Microsoft Edge"},c=i.default.getFirstMatch(/\sedg\/(\d+(\.?_?\d+)+)/i,a);return c&&(l.version=c),l}},{test:[/edg([ea]|ios)/i],describe:function(a){var l={name:"Microsoft Edge"},c=i.default.getSecondMatch(/edg([ea]|ios)\/(\d+(\.?_?\d+)+)/i,a);return c&&(l.version=c),l}},{test:[/vivaldi/i],describe:function(a){var l={name:"Vivaldi"},c=i.default.getFirstMatch(/vivaldi\/(\d+(\.?_?\d+)+)/i,a);return c&&(l.version=c),l}},{test:[/seamonkey/i],describe:function(a){var l={name:"SeaMonkey"},c=i.default.getFirstMatch(/seamonkey\/(\d+(\.?_?\d+)+)/i,a);return c&&(l.version=c),l}},{test:[/sailfish/i],describe:function(a){var l={name:"Sailfish"},c=i.default.getFirstMatch(/sailfish\s?browser\/(\d+(\.\d+)?)/i,a);return c&&(l.version=c),l}},{test:[/silk/i],describe:function(a){var l={name:"Amazon Silk"},c=i.default.getFirstMatch(/silk\/(\d+(\.?_?\d+)+)/i,a);return c&&(l.version=c),l}},{test:[/phantom/i],describe:function(a){var l={name:"PhantomJS"},c=i.default.getFirstMatch(/phantomjs\/(\d+(\.?_?\d+)+)/i,a);return c&&(l.version=c),l}},{test:[/slimerjs/i],describe:function(a){var l={name:"SlimerJS"},c=i.default.getFirstMatch(/slimerjs\/(\d+(\.?_?\d+)+)/i,a);return c&&(l.version=c),l}},{test:[/blackberry|\bbb\d+/i,/rim\stablet/i],describe:function(a){var l={name:"BlackBerry"},c=i.default.getFirstMatch(s,a)||i.default.getFirstMatch(/blackberry[\d]+\/(\d+(\.?_?\d+)+)/i,a);return c&&(l.version=c),l}},{test:[/(web|hpw)[o0]s/i],describe:function(a){var l={name:"WebOS Browser"},c=i.default.getFirstMatch(s,a)||i.default.getFirstMatch(/w(?:eb)?[o0]sbrowser\/(\d+(\.?_?\d+)+)/i,a);return c&&(l.version=c),l}},{test:[/bada/i],describe:function(a){var l={name:"Bada"},c=i.default.getFirstMatch(/dolfin\/(\d+(\.?_?\d+)+)/i,a);return c&&(l.version=c),l}},{test:[/tizen/i],describe:function(a){var l={name:"Tizen"},c=i.default.getFirstMatch(/(?:tizen\s?)?browser\/(\d+(\.?_?\d+)+)/i,a)||i.default.getFirstMatch(s,a);return c&&(l.version=c),l}},{test:[/qupzilla/i],describe:function(a){var l={name:"QupZilla"},c=i.default.getFirstMatch(/(?:qupzilla)[\s/](\d+(\.?_?\d+)+)/i,a)||i.default.getFirstMatch(s,a);return c&&(l.version=c),l}},{test:[/firefox|iceweasel|fxios/i],describe:function(a){var l={name:"Firefox"},c=i.default.getFirstMatch(/(?:firefox|iceweasel|fxios)[\s/](\d+(\.?_?\d+)+)/i,a);return c&&(l.version=c),l}},{test:[/electron/i],describe:function(a){var l={name:"Electron"},c=i.default.getFirstMatch(/(?:electron)\/(\d+(\.?_?\d+)+)/i,a);return c&&(l.version=c),l}},{test:[/MiuiBrowser/i],describe:function(a){var l={name:"Miui"},c=i.default.getFirstMatch(/(?:MiuiBrowser)[\s/](\d+(\.?_?\d+)+)/i,a);return c&&(l.version=c),l}},{test:[/chromium/i],describe:function(a){var l={name:"Chromium"},c=i.default.getFirstMatch(/(?:chromium)[\s/](\d+(\.?_?\d+)+)/i,a)||i.default.getFirstMatch(s,a);return c&&(l.version=c),l}},{test:[/chrome|crios|crmo/i],describe:function(a){var l={name:"Chrome"},c=i.default.getFirstMatch(/(?:chrome|crios|crmo)\/(\d+(\.?_?\d+)+)/i,a);return c&&(l.version=c),l}},{test:[/GSA/i],describe:function(a){var l={name:"Google Search"},c=i.default.getFirstMatch(/(?:GSA)\/(\d+(\.?_?\d+)+)/i,a);return c&&(l.version=c),l}},{test:function(a){var l=!a.test(/like android/i),c=a.test(/android/i);return l&&c},describe:function(a){var l={name:"Android Browser"},c=i.default.getFirstMatch(s,a);return c&&(l.version=c),l}},{test:[/playstation 4/i],describe:function(a){var l={name:"PlayStation 4"},c=i.default.getFirstMatch(s,a);return c&&(l.version=c),l}},{test:[/safari|applewebkit/i],describe:function(a){var l={name:"Safari"},c=i.default.getFirstMatch(s,a);return c&&(l.version=c),l}},{test:[/.*/i],describe:function(a){var l=a.search("\\(")!==-1?/^(.*)\/(.*)[ \t]\((.*)/:/^(.*)\/(.*) /;return{name:i.default.getFirstMatch(l,a),version:i.default.getSecondMatch(l,a)}}}];e.default=o,t.exports=e.default},93:function(t,e,n){e.__esModule=!0,e.default=void 0;var r,i=(r=n(17))&&r.__esModule?r:{default:r},s=n(18),o=[{test:[/Roku\/DVP/],describe:function(a){var l=i.default.getFirstMatch(/Roku\/DVP-(\d+\.\d+)/i,a);return{name:s.OS_MAP.Roku,version:l}}},{test:[/windows phone/i],describe:function(a){var l=i.default.getFirstMatch(/windows phone (?:os)?\s?(\d+(\.\d+)*)/i,a);return{name:s.OS_MAP.WindowsPhone,version:l}}},{test:[/windows /i],describe:function(a){var l=i.default.getFirstMatch(/Windows ((NT|XP)( \d\d?.\d)?)/i,a),c=i.default.getWindowsVersionName(l);return{name:s.OS_MAP.Windows,version:l,versionName:c}}},{test:[/Macintosh(.*?) FxiOS(.*?)\//],describe:function(a){var l={name:s.OS_MAP.iOS},c=i.default.getSecondMatch(/(Version\/)(\d[\d.]+)/,a);return c&&(l.version=c),l}},{test:[/macintosh/i],describe:function(a){var l=i.default.getFirstMatch(/mac os x (\d+(\.?_?\d+)+)/i,a).replace(/[_\s]/g,"."),c=i.default.getMacOSVersionName(l),u={name:s.OS_MAP.MacOS,version:l};return c&&(u.versionName=c),u}},{test:[/(ipod|iphone|ipad)/i],describe:function(a){var l=i.default.getFirstMatch(/os (\d+([_\s]\d+)*) like mac os x/i,a).replace(/[_\s]/g,".");return{name:s.OS_MAP.iOS,version:l}}},{test:function(a){var l=!a.test(/like android/i),c=a.test(/android/i);return l&&c},describe:function(a){var l=i.default.getFirstMatch(/android[\s/-](\d+(\.\d+)*)/i,a),c=i.default.getAndroidVersionName(l),u={name:s.OS_MAP.Android,version:l};return c&&(u.versionName=c),u}},{test:[/(web|hpw)[o0]s/i],describe:function(a){var l=i.default.getFirstMatch(/(?:web|hpw)[o0]s\/(\d+(\.\d+)*)/i,a),c={name:s.OS_MAP.WebOS};return l&&l.length&&(c.version=l),c}},{test:[/blackberry|\bbb\d+/i,/rim\stablet/i],describe:function(a){var l=i.default.getFirstMatch(/rim\stablet\sos\s(\d+(\.\d+)*)/i,a)||i.default.getFirstMatch(/blackberry\d+\/(\d+([_\s]\d+)*)/i,a)||i.default.getFirstMatch(/\bbb(\d+)/i,a);return{name:s.OS_MAP.BlackBerry,version:l}}},{test:[/bada/i],describe:function(a){var l=i.default.getFirstMatch(/bada\/(\d+(\.\d+)*)/i,a);return{name:s.OS_MAP.Bada,version:l}}},{test:[/tizen/i],describe:function(a){var l=i.default.getFirstMatch(/tizen[/\s](\d+(\.\d+)*)/i,a);return{name:s.OS_MAP.Tizen,version:l}}},{test:[/linux/i],describe:function(){return{name:s.OS_MAP.Linux}}},{test:[/CrOS/],describe:function(){return{name:s.OS_MAP.ChromeOS}}},{test:[/PlayStation 4/],describe:function(a){var l=i.default.getFirstMatch(/PlayStation 4[/\s](\d+(\.\d+)*)/i,a);return{name:s.OS_MAP.PlayStation4,version:l}}}];e.default=o,t.exports=e.default},94:function(t,e,n){e.__esModule=!0,e.default=void 0;var r,i=(r=n(17))&&r.__esModule?r:{default:r},s=n(18),o=[{test:[/googlebot/i],describe:function(){return{type:"bot",vendor:"Google"}}},{test:[/huawei/i],describe:function(a){var l=i.default.getFirstMatch(/(can-l01)/i,a)&&"Nova",c={type:s.PLATFORMS_MAP.mobile,vendor:"Huawei"};return l&&(c.model=l),c}},{test:[/nexus\s*(?:7|8|9|10).*/i],describe:function(){return{type:s.PLATFORMS_MAP.tablet,vendor:"Nexus"}}},{test:[/ipad/i],describe:function(){return{type:s.PLATFORMS_MAP.tablet,vendor:"Apple",model:"iPad"}}},{test:[/Macintosh(.*?) FxiOS(.*?)\//],describe:function(){return{type:s.PLATFORMS_MAP.tablet,vendor:"Apple",model:"iPad"}}},{test:[/kftt build/i],describe:function(){return{type:s.PLATFORMS_MAP.tablet,vendor:"Amazon",model:"Kindle Fire HD 7"}}},{test:[/silk/i],describe:function(){return{type:s.PLATFORMS_MAP.tablet,vendor:"Amazon"}}},{test:[/tablet(?! pc)/i],describe:function(){return{type:s.PLATFORMS_MAP.tablet}}},{test:function(a){var l=a.test(/ipod|iphone/i),c=a.test(/like (ipod|iphone)/i);return l&&!c},describe:function(a){var l=i.default.getFirstMatch(/(ipod|iphone)/i,a);return{type:s.PLATFORMS_MAP.mobile,vendor:"Apple",model:l}}},{test:[/nexus\s*[0-6].*/i,/galaxy nexus/i],describe:function(){return{type:s.PLATFORMS_MAP.mobile,vendor:"Nexus"}}},{test:[/[^-]mobi/i],describe:function(){return{type:s.PLATFORMS_MAP.mobile}}},{test:function(a){return a.getBrowserName(!0)==="blackberry"},describe:function(){return{type:s.PLATFORMS_MAP.mobile,vendor:"BlackBerry"}}},{test:function(a){return a.getBrowserName(!0)==="bada"},describe:function(){return{type:s.PLATFORMS_MAP.mobile}}},{test:function(a){return a.getBrowserName()==="windows phone"},describe:function(){return{type:s.PLATFORMS_MAP.mobile,vendor:"Microsoft"}}},{test:function(a){var l=Number(String(a.getOSVersion()).split(".")[0]);return a.getOSName(!0)==="android"&&l>=3},describe:function(){return{type:s.PLATFORMS_MAP.tablet}}},{test:function(a){return a.getOSName(!0)==="android"},describe:function(){return{type:s.PLATFORMS_MAP.mobile}}},{test:function(a){return a.getOSName(!0)==="macos"},describe:function(){return{type:s.PLATFORMS_MAP.desktop,vendor:"Apple"}}},{test:function(a){return a.getOSName(!0)==="windows"},describe:function(){return{type:s.PLATFORMS_MAP.desktop}}},{test:function(a){return a.getOSName(!0)==="linux"},describe:function(){return{type:s.PLATFORMS_MAP.desktop}}},{test:function(a){return a.getOSName(!0)==="playstation 4"},describe:function(){return{type:s.PLATFORMS_MAP.tv}}},{test:function(a){return a.getOSName(!0)==="roku"},describe:function(){return{type:s.PLATFORMS_MAP.tv}}}];e.default=o,t.exports=e.default},95:function(t,e,n){e.__esModule=!0,e.default=void 0;var r,i=(r=n(17))&&r.__esModule?r:{default:r},s=n(18),o=[{test:function(a){return a.getBrowserName(!0)==="microsoft edge"},describe:function(a){if(/\sedg\//i.test(a))return{name:s.ENGINE_MAP.Blink};var l=i.default.getFirstMatch(/edge\/(\d+(\.?_?\d+)+)/i,a);return{name:s.ENGINE_MAP.EdgeHTML,version:l}}},{test:[/trident/i],describe:function(a){var l={name:s.ENGINE_MAP.Trident},c=i.default.getFirstMatch(/trident\/(\d+(\.?_?\d+)+)/i,a);return c&&(l.version=c),l}},{test:function(a){return a.test(/presto/i)},describe:function(a){var l={name:s.ENGINE_MAP.Presto},c=i.default.getFirstMatch(/presto\/(\d+(\.?_?\d+)+)/i,a);return c&&(l.version=c),l}},{test:function(a){var l=a.test(/gecko/i),c=a.test(/like gecko/i);return l&&!c},describe:function(a){var l={name:s.ENGINE_MAP.Gecko},c=i.default.getFirstMatch(/gecko\/(\d+(\.?_?\d+)+)/i,a);return c&&(l.version=c),l}},{test:[/(apple)?webkit\/537\.36/i],describe:function(){return{name:s.ENGINE_MAP.Blink}}},{test:[/(apple)?webkit/i],describe:function(a){var l={name:s.ENGINE_MAP.WebKit},c=i.default.getFirstMatch(/webkit\/(\d+(\.?_?\d+)+)/i,a);return c&&(l.version=c),l}}];e.default=o,t.exports=e.default}});var XR=Bg(ZR.exports);const Dn={Initialized:"initialized",DisplayURI:"display_uri",ProviderUpdate:"provider_update",ConnectWithResponse:"connectWithResponse",ConnectionStatus:"connection_status",ServiceStatus:"service_status"};class ti{constructor({shouldSetOnWindow:e,connectionStream:n,shouldSendMetadata:r=!1,shouldShimWeb3:i,sdkInstance:s}){const o=new u$({connectionStream:n,shouldSendMetadata:r,shouldSetOnWindow:e,shouldShimWeb3:i,autoRequestAccounts:!1}),a=new Proxy(o,{deleteProperty:()=>!0});if(this.provider=a,this.sdkInstance=s,e&&typeof window<"u")try{l=o,window.ethereum=l,window.dispatchEvent(new Event("ethereum#initialized"))}catch(c){ne("[Ethereum] Unable to set global provider - window.ethereum may be read-only",c)}var l;if(i&&typeof window<"u")try{(function(c,u=console){let d=!1,f=!1;if(!window.web3){const h="__isMetaMaskShim__";let m={currentProvider:c};Object.defineProperty(m,h,{value:!0,enumerable:!0,configurable:!1,writable:!1}),m=new Proxy(m,{get:(g,w,...p)=>(w!=="currentProvider"||d?w==="currentProvider"||w===h||f||(f=!0,u.error("MetaMask no longer injects web3. For details, see: https://docs.metamask.io/guide/provider-migration.html#replacing-window-web3"),c.request({method:"metamask_logWeb3ShimUsage"}).catch(v=>{u.debug("MetaMask: Failed to log web3 shim usage.",v)})):(d=!0,u.warn("You are accessing the MetaMask window.web3.currentProvider shim. This property is deprecated; use window.ethereum instead. For details, see: https://docs.metamask.io/guide/provider-migration.html#replacing-window-web3")),Reflect.get(g,w,...p)),set:(...g)=>(u.warn("You are accessing the MetaMask window.web3 shim. This object is deprecated; use window.ethereum instead. For details, see: https://docs.metamask.io/guide/provider-migration.html#replacing-window-web3"),Reflect.set(...g))}),Object.defineProperty(window,"web3",{value:m,enumerable:!1,configurable:!0,writable:!0})}})(this.provider)}catch(c){ne("[Ethereum] Unable to shim web3 - window.web3 may be read-only",c)}this.provider.on("display_uri",c=>{this.sdkInstance.emit(Dn.DisplayURI,c)}),this.provider.on("_initialized",()=>{const c={chainId:this.provider.getChainId(),isConnected:this.provider.isConnected(),isMetaMask:this.provider.isMetaMask,selectedAddress:this.provider.getSelectedAddress(),networkVersion:this.provider.getNetworkVersion()};this.sdkInstance.emit(Dn.Initialized,c),ne("[Ethereum: constructor()] provider initialized",c)})}static init(e){var n;return ne("[Ethereum: init()] Initializing Ethereum service"),this.instance=new ti(e),(n=this.instance)===null||n===void 0?void 0:n.provider}static destroy(){}static getInstance(){var e;if(!(!((e=this.instance)===null||e===void 0)&&e.provider))throw new Error("Ethereum instance not intiialized - call Ethereum.factory first.");return this.instance}static getProvider(){var e;if(!(!((e=this.instance)===null||e===void 0)&&e.provider))throw new Error("Ethereum instance not intiialized - call Ethereum.factory first.");return this.instance.provider}}class df{constructor({useDeepLink:e,preferredOpenLink:n,debug:r=!1}){this.state={platformType:void 0,useDeeplink:!1,preferredOpenLink:void 0,debug:!1},this.state.platformType=this.getPlatformType(),this.state.useDeeplink=e,this.state.preferredOpenLink=n,this.state.debug=r}openDeeplink(e,n,r){return function(i,s,o,a){const{state:l}=i;ne(`[PlatfformManager: openDeeplink()] universalLink --> ${s}`),ne(`[PlatfformManager: openDeeplink()] deepLink --> ${o}`);try{if(l.preferredOpenLink)return void l.preferredOpenLink(l.useDeeplink?o:s,a);if(ne(`[PlatfformManager: openDeeplink()] open link now useDeepLink=${l.useDeeplink} link=${l.useDeeplink?o:s}`),l.useDeeplink)typeof window<"u"&&(window.location.href=o);else if(typeof document<"u"){const c=document.createElement("a");c.href=s,c.target="_self",c.rel="noreferrer noopener",c.click()}}catch(c){console.log("[PlatfformManager: openDeeplink()] can't open link",c)}}(this,e,n,r)}isReactNative(){var e;return this.isNotBrowser()&&typeof window<"u"&&(window==null?void 0:window.navigator)&&((e=window.navigator)===null||e===void 0?void 0:e.product)==="ReactNative"}isMetaMaskInstalled(){return function(){const e=ti.getProvider()||(window==null?void 0:window.ethereum);return ne(`[PlatfformManager: isMetaMaskInstalled()] isMetaMask=${e==null?void 0:e.isMetaMask} isConnected=${e==null?void 0:e.isConnected()}`),(e==null?void 0:e.isMetaMask)&&(e==null?void 0:e.isConnected())}()}isDesktopWeb(){return this.isBrowser()&&!this.isMobileWeb()}isMobile(){var e,n;const r=XR.parse(window.navigator.userAgent);return((e=r==null?void 0:r.platform)===null||e===void 0?void 0:e.type)==="mobile"||((n=r==null?void 0:r.platform)===null||n===void 0?void 0:n.type)==="tablet"}isSecure(){return this.isReactNative()||this.isMobileWeb()}isMetaMaskMobileWebView(){return typeof window<"u"&&!!window.ReactNativeWebView&&!!navigator.userAgent.endsWith("MetaMaskMobile")}isMobileWeb(){return this.state.platformType===ln.MobileWeb}static isNotBrowser(){var e;return typeof window>"u"||!(window!=null&&window.navigator)||Cn!==void 0&&((e=Cn==null?void 0:Cn.navigator)===null||e===void 0?void 0:e.product)==="ReactNative"||(navigator==null?void 0:navigator.product)==="ReactNative"}isNotBrowser(){return df.isNotBrowser()}static isBrowser(){return!this.isNotBrowser()}isBrowser(){return df.isBrowser()}isNodeJS(){return this.isNotBrowser()&&!this.isReactNative()}isUseDeepLink(){return this.state.useDeeplink}getPlatformType(){return function(e){const{state:n}=e;return n.platformType?n.platformType:e.isReactNative()?ln.ReactNative:e.isNotBrowser()?ln.NonBrowser:e.isMetaMaskMobileWebView()?ln.MetaMaskMobileWebview:e.isMobile()?ln.MobileWeb:ln.DesktopWeb}(this)}}const eI=t=>se(void 0,void 0,void 0,function*(){if(df.isBrowser()){const{StorageManagerWeb:n}=yield Promise.resolve().then(function(){return U$});return new n(t)}const e={persistChannelConfig:()=>se(void 0,void 0,void 0,function*(){}),getPersistedChannelConfig:()=>se(void 0,void 0,void 0,function*(){}),persistAccounts:()=>se(void 0,void 0,void 0,function*(){}),getCachedAccounts:()=>se(void 0,void 0,void 0,function*(){return[]}),persistChainId:()=>se(void 0,void 0,void 0,function*(){}),getCachedChainId:()=>se(void 0,void 0,void 0,function*(){}),terminate:()=>se(void 0,void 0,void 0,function*(){})};return Promise.resolve(e)});class u$ extends a${constructor({connectionStream:e,shouldSendMetadata:n,autoRequestAccounts:r=!1}){super(e,{logger:console,maxEventListeners:100,shouldSendMetadata:n}),this.state={accounts:null,autoRequestAccounts:!1,providerStateRequested:!1,chainId:"",networkVersion:""},ne(`[SDKProvider: constructor()] autoRequestAccounts=${r}`),this.state.autoRequestAccounts=r}forceInitializeState(){return se(this,void 0,void 0,function*(){return ne(`[SDKProvider: forceInitializeState()] autoRequestAccounts=${this.state.autoRequestAccounts}`),this._initializeStateAsync()})}_setConnected(){ne("[SDKProvider: _setConnected()] Setting connected state"),this._state.isConnected=!0}getState(){return this._state}getSDKProviderState(){return this.state}getSelectedAddress(){var e;const{accounts:n}=this._state;return n&&n.length!==0?((e=n[0])===null||e===void 0?void 0:e.toLowerCase())||"":(ne("[SDKProvider: getSelectedAddress] No accounts found"),null)}getChainId(){return this.state.chainId}getNetworkVersion(){return this.state.networkVersion}setSDKProviderState(e){this.state=Object.assign(Object.assign({},this.state),e)}handleAccountsChanged(e,n){return this._handleAccountsChanged(e,n)}handleDisconnect({terminate:e=!1}){(function({terminate:n=!1,instance:r}){const{state:i}=r;ne(`[SDKProvider: handleDisconnect()] cleaning up provider state terminate=${n}`,r),n&&(r._state.accounts=null,r._state.isUnlocked=!1,r._state.isPermanentlyDisconnected=!0,r._state.initialized=!1),r._handleAccountsChanged([]),r._state.isConnected=!1,r.emit("disconnect",qR.ethErrors.provider.disconnected()),i.providerStateRequested=!1})({terminate:e,instance:this})}_initializeStateAsync(){return se(this,void 0,void 0,function*(){return function(e){var n,r;return se(this,void 0,void 0,function*(){e.state===void 0&&(e.state={accounts:null,autoRequestAccounts:!1,providerStateRequested:!1,chainId:""});const{state:i}=e;let s;if(i.providerStateRequested)ne("[SDKProvider: initializeStateAsync()] initialization already in progress");else{let o;i.providerStateRequested=!0;let a=null,l=!1,c=!1;const u=yield eI({enabled:!0});if(u){const d=yield u.getPersistedChannelConfig({});l=(n=d==null?void 0:d.relayPersistence)!==null&&n!==void 0&&n,o=yield u.getCachedChainId();const f=yield u.getCachedAccounts();f.length>0&&(a=f[0])}if(ne(`[SDKProvider: initializeStateAsync()] relayPersistence=${l}`,{relayPersistence:l,cachedChainId:o,cachedSelectedAddress:a}),l)if(o&&a)s={accounts:[a],chainId:o,isUnlocked:!1},c=!0;else try{s=yield e.request({method:"metamask_getProviderState"})}catch(d){return e._log.error("MetaMask: Failed to get initial state. Please report this bug.",d),void(i.providerStateRequested=!1)}if(((r=s==null?void 0:s.accounts)===null||r===void 0?void 0:r.length)===0)if(e.getSelectedAddress())s.accounts=[e.getSelectedAddress()];else{ne("[SDKProvider: initializeStateAsync()] Fetch accounts remotely.");const d=yield e.request({method:"eth_requestAccounts",params:[]});s.accounts=d}e._initializeState(s),i.providerStateRequested=!1,c&&(e._state.isConnected=!0,e.emit("connect",{chainId:s==null?void 0:s.chainId}))}})}(this)})}_initializeState(e){return ne("[SDKProvider: _initializeState()]",e),function(n,r,i){return ne("[SDKProvider: initializeState()] set state._initialized to false"),n._state.initialized=!1,r(i)}(this,super._initializeState.bind(this),e)}_handleChainChanged({chainId:e,networkVersion:n}={}){this.state.chainId=e,this.state.networkVersion=n,function({instance:r,chainId:i,networkVersion:s,superHandleChainChanged:o}){ne(`[SDKProvider: handleChainChanged()] chainId=${i} networkVersion=${s}`);let a=s;s||(ne("[SDKProvider: handleChainChanged()] forced network version to prevent provider error"),a="1"),i!==bx&&(bt.analytics.track("sdk_used_chain",{caip_chain_id:`eip155:${parseInt(i??"0x1",16)}`}),bx=i),r._state.isConnected=!0,r.emit("connect",{chainId:i}),o({chainId:i,networkVersion:a})}({instance:this,chainId:e,networkVersion:n,superHandleChainChanged:super._handleChainChanged.bind(this)})}}var ff,gl={name:"@metamask/sdk",version:"0.33.0",description:"",homepage:"https://github.com/MetaMask/metamask-sdk#readme",bugs:{url:"https://github.com/MetaMask/metamask-sdk/issues"},repository:{type:"git",url:"https://github.com/MetaMask/metamask-sdk",directory:"packages/sdk"},main:"dist/node/cjs/metamask-sdk.js",module:"dist/browser/es/metamask-sdk.js",browser:"dist/browser/es/metamask-sdk.js",unpkg:"dist/browser/umd/metamask-sdk.js","react-native":"dist/react-native/es/metamask-sdk.js",types:"dist/types/src/index.d.ts",sideEffects:!1,files:["/dist"],scripts:{"build:types":"tsc --project tsconfig.build.json --emitDeclarationOnly --outDir dist/types",build:"yarn build:types && rollup -c --bundleConfigAsCjs","build:clean":"yarn clean && yarn build","build:post-tsc":"echo 'N/A'","build:pre-tsc":"echo 'N/A'",typecheck:"tsc --noEmit",clean:"rimraf ./dist",size:"node bundle-size && size-limit",lint:"yarn lint:eslint && yarn lint:misc --check","lint:changelog":"../../scripts/validate-changelog.sh @metamask/sdk","lint:eslint":"eslint . --cache --ext js,ts","lint:fix":"yarn lint:eslint --fix && yarn lint:misc --write","lint:misc":"prettier '**/*.json' '**/*.md' '!CHANGELOG.md' --ignore-path ../../.gitignore",prepack:"../../scripts/prepack.sh","publish:preview":"yarn npm publish --tag preview",reset:"yarn clean && rimraf ./node_modules/",test:'jest --testPathIgnorePatterns "/e2e/"',"test:coverage":'jest --coverage --testPathIgnorePatterns "/e2e/"',"test:e2e":'jest --testPathPattern "/e2e/"',"test:ci":'jest --coverage --passWithNoTests --setupFilesAfterEnv ./jest-preload.js --testPathIgnorePatterns "/e2e/"',"test:dev":'jest -c ./jest.config.ts --detectOpenHandles  --testPathIgnorePatterns "/e2e/"',watch:"rollup -c -w",dev:'concurrently "tsc --watch" "rollup -c -w --bundleConfigAsCjs"',"build:dev":"yarn build:types && NODE_ENV=dev rollup -c --bundleConfigAsCjs"},dependencies:{"@babel/runtime":"^7.26.0","@metamask/onboarding":"^1.0.1","@metamask/providers":"16.1.0","@metamask/sdk-analytics":"workspace:*","@metamask/sdk-communication-layer":"workspace:*","@metamask/sdk-install-modal-web":"workspace:*","@paulmillr/qr":"^0.2.1",bowser:"^2.9.0","cross-fetch":"^4.0.0",debug:"^4.3.4",eciesjs:"^0.4.11","eth-rpc-errors":"^4.0.3",eventemitter2:"^6.4.9","obj-multiplex":"^1.0.0",pump:"^3.0.0","readable-stream":"^3.6.2","socket.io-client":"^4.5.1",tslib:"^2.6.0",util:"^0.12.4",uuid:"^8.3.2"},devDependencies:{"@jest/globals":"^29.3.1","@lavamoat/allow-scripts":"^2.3.1","@metamask/auto-changelog":"3.1.0","@metamask/eslint-config":"^6.0.0","@metamask/eslint-config-nodejs":"^6.0.0","@metamask/eslint-config-typescript":"^6.0.0","@react-native-async-storage/async-storage":"^1.19.6","@rollup/plugin-alias":"^5.1.1","@rollup/plugin-commonjs":"^25.0.7","@rollup/plugin-json":"^6.0.0","@rollup/plugin-node-resolve":"^15.0.2","@rollup/plugin-replace":"^6.0.1","@rollup/plugin-terser":"^0.4.1","@size-limit/preset-big-lib":"^11.0.2","@types/dom-screen-wake-lock":"^1.0.2","@types/node":"^20.1.3","@types/pump":"^1.1.1","@types/qrcode-terminal":"^0.12.0","@types/uuid":"^10.0.0","@typescript-eslint/eslint-plugin":"^4.26.0","@typescript-eslint/parser":"^4.26.0","browserify-zlib":"^0.2.0",buffer:"^6.0.3",concurrently:"^9.1.2","crypto-browserify":"^3.12.0",eslint:"^7.30.0","eslint-config-prettier":"^8.3.0","eslint-plugin-import":"^2.23.4","eslint-plugin-jest":"^24.4.0","eslint-plugin-jsdoc":"^36.1.0","eslint-plugin-node":"^11.1.0","eslint-plugin-prettier":"^3.4.0","https-browserify":"^1.0.0",jest:"^29.3.1","jest-environment-jsdom":"^29.3.1",prettier:"^2.3.0",process:"^0.11.10",rimraf:"^4.4.0",rollup:"^4.26.0","rollup-plugin-analyzer":"^4.0.0","rollup-plugin-jscc":"^2.0.0","rollup-plugin-natives":"^0.7.5","rollup-plugin-node-builtins":"^2.1.2","rollup-plugin-polyfill-node":"^0.13.0","rollup-plugin-sizes":"^1.0.6","rollup-plugin-typescript2":"^0.31.2","rollup-plugin-visualizer":"^5.12.0","size-limit":"^11.0.2","stream-browserify":"^3.0.0","stream-http":"^3.2.0","ts-jest":"^29.0.3","ts-node":"^10.9.1",typescript:"^4.3.2",url:"^0.11.0",webpack:"^5.0.0"},publishConfig:{access:"public",registry:"https://registry.npmjs.org/"},lavamoat:{allowScripts:{"eciesjs>secp256k1":!1,"socket.io-client>engine.io-client>ws>bufferutil":!1,"socket.io-client>engine.io-client>ws>utf-8-validate":!1,"@metamask/sdk-communication-layer>bufferutil":!1,"@metamask/sdk-communication-layer>eciesjs>secp256k1":!1,"@metamask/sdk-communication-layer>utf-8-validate":!1}}};(function(t){t.INPAGE="metamask-inpage",t.CONTENT_SCRIPT="metamask-contentscript",t.PROVIDER="metamask-provider"})(ff||(ff={}));const Ex="direct",hf="https://metamask.app.link/connect",pf="metamask://connect",Ax={NAME:"MetaMask",RDNS:["io.metamask","io.metamask.flask"]},d$=/(?:^[a-f0-9]{8}-[a-f0-9]{4}-4[a-f0-9]{3}-[a-f0-9]{4}-[a-f0-9]{12}$)|(?:^0{8}-0{4}-0{4}-0{4}-0{12}$)/u,Ce={METAMASK_GETPROVIDERSTATE:"metamask_getProviderState",METAMASK_CONNECTSIGN:"metamask_connectSign",METAMASK_CONNECTWITH:"metamask_connectWith",METAMASK_OPEN:"metamask_open",METAMASK_BATCH:"metamask_batch",PERSONAL_SIGN:"personal_sign",WALLET_REQUESTPERMISSIONS:"wallet_requestPermissions",WALLET_REVOKEPERMISSIONS:"wallet_revokePermissions",WALLET_GETPERMISSIONS:"wallet_getPermissions",WALLET_WATCHASSET:"wallet_watchAsset",WALLET_ADDETHEREUMCHAIN:"wallet_addEthereumChain",WALLET_SWITCHETHETHEREUMCHAIN:"wallet_switchEthereumChain",ETH_REQUESTACCOUNTS:"eth_requestAccounts",ETH_ACCOUNTS:"eth_accounts",ETH_CHAINID:"eth_chainId",ETH_SENDTRANSACTION:"eth_sendTransaction",ETH_SIGNTYPEDDATA:"eth_signTypedData",ETH_SIGNTYPEDDATA_V3:"eth_signTypedData_v3",ETH_SIGNTYPEDDATA_V4:"eth_signTypedData_v4",ETH_SIGNTRANSACTION:"eth_signTransaction",ETH_SIGN:"eth_sign",PERSONAL_EC_RECOVER:"personal_ecRecover"},gf={[Ce.ETH_REQUESTACCOUNTS]:!0,[Ce.ETH_SENDTRANSACTION]:!0,[Ce.ETH_SIGNTRANSACTION]:!0,[Ce.ETH_SIGN]:!0,[Ce.PERSONAL_SIGN]:!0,[Ce.ETH_ACCOUNTS]:!1,[Ce.ETH_CHAINID]:!1,[Ce.PERSONAL_SIGN]:!0,[Ce.ETH_SIGNTYPEDDATA]:!0,[Ce.ETH_SIGNTYPEDDATA_V3]:!0,[Ce.ETH_SIGNTYPEDDATA_V4]:!0,[Ce.WALLET_REQUESTPERMISSIONS]:!0,[Ce.WALLET_GETPERMISSIONS]:!0,[Ce.WALLET_WATCHASSET]:!0,[Ce.WALLET_ADDETHEREUMCHAIN]:!0,[Ce.WALLET_SWITCHETHETHEREUMCHAIN]:!0,[Ce.METAMASK_CONNECTSIGN]:!0,[Ce.METAMASK_CONNECTWITH]:!0,[Ce.PERSONAL_EC_RECOVER]:!0,[Ce.METAMASK_BATCH]:!0,[Ce.METAMASK_OPEN]:!0},f$=Object.keys(gf).filter(t=>gf[t]===!0).map(t=>t.toLowerCase()),tI=["eth_signTypedData","eth_signTypedData_v3","eth_signTypedData_v4","eth_sign"].map(t=>t.toLowerCase()),xy=".sdk-comm",H0="providerType",Fw=".MMSDK_cached_address",jw=".MMSDK_cached_chainId",li={CHAIN_CHANGED:"chainChanged",ACCOUNTS_CHANGED:"accountsChanged",DISCONNECT:"disconnect",CONNECT:"connect",CONNECTED:"connected"},h$=1e6;var Di;(function(t){t.TERMINATE="terminate",t.EXTENSION="extension",t.INITIALIZED="initialized"})(Di||(Di={}));const p$=typeof window<"u"&&window.localStorage;function g$({instance:t,msg:e}){return se(this,void 0,void 0,function*(){if(t._initialized||(ne("[MetaMaskSDK: connectAndSign()] provider not ready -- wait for init()"),yield t.init()),ne(`[MetaMaskSDK: connectAndSign()] activeProvider=${t.activeProvider}`),!t.activeProvider)throw new Error("SDK state invalid -- undefined provider");const n=/^0x([0-9A-Fa-f]{2})*$/u.test(e)?e:function(r){let i;if(ae!==void 0)i=ae.from(r,"utf8").toString("hex");else if(typeof TextEncoder<"u"){const s=new TextEncoder().encode(r);i=Array.from(s).map(o=>o.toString(16).padStart(2,"0")).join("")}else{if(typeof Cn!="object"||!("Buffer"in Cn))throw new Error("Unable to convert string to hex: No available method.");i=Cn.Buffer.from(r,"utf8").toString("hex")}return`0x${i}`}(e);return t.activeProvider.request({method:Ce.METAMASK_CONNECTWITH,params:[{method:Ce.PERSONAL_SIGN,params:[n]}]})})}function Sx(t){var e,n;return se(this,void 0,void 0,function*(){ne("[MetaMaskSDK: connectWithExtensionProvider()] ",t),t.sdkProvider=t.activeProvider,t.activeProvider=window.extension,window.ethereum=window.extension;try{const r=yield(e=window.extension)===null||e===void 0?void 0:e.request({method:"eth_requestAccounts"});ne(`[MetaMaskSDK: connectWithExtensionProvider()] accounts=${r}`)}catch(r){return void console.warn("[MetaMaskSDK: connectWithExtensionProvider()] can't request accounts error",r)}localStorage.setItem(H0,"extension"),t.extensionActive=!0,t.emit(Dn.ProviderUpdate,Di.EXTENSION),t.options.enableAnalytics&&((n=t.analytics)===null||n===void 0||n.send({event:St.SDK_USE_EXTENSION}))})}function K0(t){let e;if(ae!==void 0)e=ae.from(t,"utf8").toString("base64");else if(typeof btoa=="function")e=btoa(encodeURIComponent(t).replace(/%([0-9A-F]{2})/gu,(n,r)=>String.fromCharCode(parseInt(r,16))));else{if(typeof Cn!="object"||!("Buffer"in Cn))throw new Error("Unable to base64 encode: No available method.");e=Cn.Buffer.from(t,"utf8").toString("base64")}return e}function m$(t,e,n,r){var i,s,o,a,l,c,u,d,f,h,m,g,w,p,v,y,C,P,L,j;return se(this,void 0,void 0,function*(){const D=(i=t.state.remote)===null||i===void 0?void 0:i.isReady(),V=(s=t.state.remote)===null||s===void 0?void 0:s.isConnected(),F=(o=t.state.remote)===null||o===void 0?void 0:o.isPaused(),W=ti.getProvider(),K=(a=t.state.remote)===null||a===void 0?void 0:a.getChannelId(),$=(l=t.state.remote)===null||l===void 0?void 0:l.isAuthorized(),{deeplinkProtocol:M}=t.state,{method:x,data:O,triggeredInstaller:B}=(I=>{var A,S,T,R;let N;ae.isBuffer(I)?(N=I.toJSON(),N._isBuffer=!0):N=I;const U=(A=N==null?void 0:N.data)===null||A===void 0?void 0:A.method;let z=!1;return typeof((S=N==null?void 0:N.data)===null||S===void 0?void 0:S.params)=="object"&&((R=(T=N==null?void 0:N.data)===null||T===void 0?void 0:T.params)===null||R===void 0?void 0:R.__triggeredInstaller)===!0&&(z=!0,N.data.params=N.data.params.wrappedParams),{method:U,data:N,triggeredInstaller:z}})(e);if(ne(`[RCPMS: write()] method='${x}' isRemoteReady=${D} channelId=${K} isSocketConnected=${V} isRemotePaused=${F} providerConnected=${W.isConnected()}`,e),!K)return x!==Ce.METAMASK_GETPROVIDERSTATE&&ne(`[RCPMS: write()] ${x} --> channelId is undefined`),r(new Error("disconnected"));ne(`[RCPMS: write()] remote.isPaused()=${(c=t.state.remote)===null||c===void 0?void 0:c.isPaused()} authorized=${$} ready=${D} socketConnected=${V}`,e);const b=(u=t.state.platformManager)===null||u===void 0?void 0:u.isSecure(),E=(f=(d=t.state.platformManager)===null||d===void 0?void 0:d.isMobileWeb())!==null&&f!==void 0&&f,k=(m=(h=t.state.remote)===null||h===void 0?void 0:h.hasDeeplinkProtocol())!==null&&m!==void 0&&m&&E&&$;try{if(!B){const S=JSON.stringify(O==null?void 0:O.data);if(S.length>h$)return r(new Error(`Message size ${S.length} exceeds maximum allowed size of 1000000 bytes`));(g=t.state.remote)===null||g===void 0||g.sendMessage(O==null?void 0:O.data).then(()=>{ne(`[RCPMS: _write()] ${x} sent successfully`)}).catch(T=>{ne("[RCPMS: _write()] error sending message",T)})}if(!b)return ne(`[RCPMS: _write()] unsecure platform for method ${x} -- return callback`),r();if(B)return ne("[RCPMS: _write()] prevent deeplink -- installation completed separately."),r();const I=(v=(p=(w=t.state.remote)===null||w===void 0?void 0:w.getKeyInfo())===null||p===void 0?void 0:p.ecies.public)!==null&&v!==void 0?v:"";let A=encodeURI(`channelId=${K}&pubkey=${I}&comm=socket&t=d&v=2`);if(k){const S=JSON.stringify(O==null?void 0:O.data),T=(y=t.state.remote)===null||y===void 0?void 0:y.encrypt(S);if(!T)return ne("[RCPMS: _write()] error encrypting message"),r(new Error("RemoteCommunicationPostMessageStream - disconnected"));A+=`&scheme=${M}&rpc=${K0(T)}`}if(!(!((C=t.state.platformManager)===null||C===void 0)&&C.isMetaMaskInstalled()))return ne("[RCPMS: _write()] prevent deeplink until installation is completed."),r();gf[x]?(ne(`[RCPMS: _write()] redirect link for '${x}' socketConnected=${V} connect?${A}`),(P=t.state.platformManager)===null||P===void 0||P.openDeeplink(`${hf}?${A}`,`${pf}?${A}`,"_self")):!((L=t.state.remote)===null||L===void 0)&&L.isPaused()?(ne(`[RCPMS: _write()] MM is PAUSED! deeplink with connect! targetMethod=${x}`),(j=t.state.platformManager)===null||j===void 0||j.openDeeplink(`${hf}?redirect=true&${A}`,`${pf}?redirect=true&${A}`,"_self")):ne(`[RCPMS: _write()] method ${x} doesn't need redirect.`)}catch(I){return ne("[RCPMS: _write()] error sending message",I),r(new Error("RemoteCommunicationPostMessageStream - disconnected"))}return r()})}class y$ extends wu.Duplex{constructor({name:e,remote:n,deeplinkProtocol:r,platformManager:i}){super({objectMode:!0}),this.state={_name:null,remote:null,deeplinkProtocol:!1,platformManager:null},this.state._name=e,this.state.remote=n,this.state.deeplinkProtocol=r,this.state.platformManager=i,this._onMessage=this._onMessage.bind(this),this.state.remote.on(pe.MESSAGE,this._onMessage)}_write(e,n,r){return se(this,void 0,void 0,function*(){return m$(this,e,0,r)})}_read(){}_onMessage(e){return function(n,r){try{if(ne("[RCPMS: onMessage()] message",r),!r||typeof r!="object"||typeof(r==null?void 0:r.data)!="object")return;if(!(r!=null&&r.name))return void ne("[RCPMS: onMessage()] ignore message without name",r);if((r==null?void 0:r.name)!==ff.PROVIDER)return void ne(`[RCPMS: onMessage()] ignore message with wrong name message=${r}`);if(ae.isBuffer(r)){const i=ae.from(r);n.push(i)}else n.push(r)}catch(i){ne(`[RCPMS: onMessage()] ignore message error err=${i}`)}}(this,e)}start(){}}let xx=1;const nI=t=>new Promise(e=>{setTimeout(()=>{e(!0)},t)}),v$=({checkInstallationOnAllCalls:t=!1,communicationLayerPreference:e,injectProvider:n,shouldShimWeb3:r,platformManager:i,installer:s,sdk:o,remoteConnection:a,debug:l})=>se(void 0,void 0,void 0,function*(){var c,u;const d=(({name:F,remoteConnection:W})=>{if(!W||!(W!=null&&W.getConnector()))throw new Error("Missing remote connection parameter");return new y$({name:F,remote:W==null?void 0:W.getConnector(),deeplinkProtocol:W==null?void 0:W.state.deeplinkProtocol,platformManager:W==null?void 0:W.getPlatformManager()})})({name:ff.INPAGE,target:ff.CONTENT_SCRIPT,remoteConnection:a}),f=i.getPlatformType(),h=o.options.dappMetadata,m=`Sdk/Javascript SdkVersion/${gl.version} Platform/${f} dApp/${(c=h.url)!==null&&c!==void 0?c:h.name} dAppTitle/${h.name}`;let g=null,w=null;const p=(u=o.options.storage)===null||u===void 0?void 0:u.storageManager;if(p){try{const F=yield p.getCachedAccounts();F.length>0&&(g=F[0])}catch(F){console.error(`[initializeMobileProvider] failed to get cached addresses: ${F}`)}try{const F=yield p.getCachedChainId();F&&(w=F)}catch(F){console.error(`[initializeMobileProvider] failed to parse cached chainId: ${F}`)}}ne(`[initializeMobileProvider] cachedAccountAddress: ${g}, cachedChainId: ${w}`);const v=!(!n||f===ln.NonBrowser||f===ln.ReactNative),y=ti.init({shouldSetOnWindow:v,connectionStream:d,shouldShimWeb3:r,sdkInstance:o});let C=!1;const P=F=>{C=F},L=()=>C,j=(F,W,K,$)=>se(void 0,void 0,void 0,function*(){var M,x,O,B,b,E,k,I,A;const S=ti.getProvider();if(C){S.emit("display_uri",(a==null?void 0:a.state.qrcodeLink)||""),a==null||a.showActiveModal();let oe=L();for(;oe;){const J=L(),le=a==null?void 0:a.isAuthorized();oe=J&&!le,ne(`[initializeMobileProvider: sendRequest()] waiting for initialization to complete - initializing: ${J} authorized: ${le}`),yield nI(1e3)}return ne("[initializeMobileProvider: sendRequest()] initial method completed -- prevent installation and call provider"),K(...W)}const T=i.isMetaMaskInstalled(),R=a==null?void 0:a.isConnected();let N=null,U=null,z=null;if(N=(M=S.getSelectedAddress())!==null&&M!==void 0?M:g,z=S.getChainId()||w,N&&p&&N!==g&&p.persistAccounts([N]).catch(oe=>{console.error(`[initializeMobileProvider] failed to persist account: ${oe}`)}),z&&(w=z,p&&p.persistChainId(z).catch(oe=>{console.error(`[initializeMobileProvider] failed to persist chainId: ${oe}`)})),ne("[initializeMobileProvider: sendRequest()]",{selectedAddress:N,chainId:z}),$&&ne(`[initializeMobileProvider: sendRequest()] method=${F} ongoing=${C} selectedAddress=${N} isInstalled=${T} checkInstallationOnAllCalls=${t} socketConnected=${R}`),N&&F.toLowerCase()===Ce.ETH_ACCOUNTS.toLowerCase())return[N];if(z&&F.toLowerCase()===Ce.ETH_CHAINID.toLowerCase())return z;const q=[Ce.ETH_REQUESTACCOUNTS,Ce.WALLET_REQUESTPERMISSIONS,Ce.METAMASK_CONNECTSIGN,Ce.METAMASK_CONNECTWITH],Q=!gf[F],ie=(x=o.options.readonlyRPCMap)===null||x===void 0?void 0:x[z];if(ie&&Q)try{const oe=(O=W==null?void 0:W[0])===null||O===void 0?void 0:O.params,J=yield(({rpcEndpoint:le,method:Z,sdkInfo:te,params:ue})=>se(void 0,void 0,void 0,function*(){const me=JSON.stringify({jsonrpc:"2.0",method:Z,params:ue,id:(xx+=1,xx)}),he={Accept:"application/json","Content-Type":"application/json"};let ke;le.includes("infura")&&(he["Metamask-Sdk-Info"]=te);try{ke=yield aT(le,{method:"POST",headers:he,body:me})}catch(Pe){throw Pe instanceof Error?new Error(`Failed to fetch from RPC: ${Pe.message}`):new Error(`Failed to fetch from RPC: ${Pe}`)}if(!ke.ok)throw new Error(`Server responded with a status of ${ke.status}`);return(yield ke.json()).result}))({rpcEndpoint:ie,sdkInfo:m,method:F,params:oe||[]});return $&&ne(`initializeProvider::ReadOnlyRPCResponse ${J}`),J}catch(oe){console.warn(`[initializeMobileProvider: sendRequest()] method=${F} readOnlyRPCRequest failed:`,oe)}if((!T||T&&!R)&&F!==Ce.METAMASK_GETPROVIDERSTATE){const oe=((B=W==null?void 0:W[0])===null||B===void 0?void 0:B.params)||[];if(q.indexOf(F)!==-1||t){P(!0);const J=F===Ce.METAMASK_CONNECTWITH,le=`${Date.now()}`;try{yield s.start({wait:!1,connectWith:J?{method:F,id:le,params:oe}:void 0}),yield new Promise((Z,te)=>{a!=null&&a.isAuthorized()&&(ne("[initializeMobileProvider: sendRequest()] already authorized"),Z(!0)),a==null||a.getConnector().once(pe.AUTHORIZED,()=>{Z(!0)}),o.once(pe.PROVIDER_UPDATE,ue=>{ne(`[initializeMobileProvider: sendRequest()] PROVIDER_UPDATE --- remote provider request interupted type=${ue}`),ue===Di.EXTENSION?te(pe.PROVIDER_UPDATE):te(new Error("Connection Terminated"))})})}catch(Z){if(Di.EXTENSION===Z){if(ne(`[initializeMobileProvider: sendRequest()] extension provider detect: re-create ${F} on the active provider`),F.toLowerCase()===Ce.METAMASK_CONNECTSIGN.toLowerCase()){const te=yield(b=o.getProvider())===null||b===void 0?void 0:b.request({method:Ce.ETH_REQUESTACCOUNTS,params:[]});if(!te.length)throw new Error("SDK state invalid -- undefined accounts");const ue=yield(E=o.getProvider())===null||E===void 0?void 0:E.request({method:Ce.PERSONAL_SIGN,params:[oe[0],te[0]]});return o.emit(Dn.ConnectWithResponse,ue),ue}if(F.toLowerCase()===Ce.METAMASK_CONNECTWITH.toLowerCase()){const[te]=oe,ue=yield(({method:me,sdk:he,params:ke})=>se(void 0,void 0,void 0,function*(){var Pe,xe,Te,Ie;if(!he.isExtensionActive())throw new Error("SDK state invalid -- extension is not active");ne("[MetaMaskProvider: extensionConnectWithOverwrite()] Overwriting request method",me,ke);const We=yield(Pe=he.getProvider())===null||Pe===void 0?void 0:Pe.request({method:Ce.ETH_REQUESTACCOUNTS,params:[]});if(!We.length)throw new Error("SDK state invalid -- undefined accounts");if((me==null?void 0:me.toLowerCase())===Ce.PERSONAL_SIGN.toLowerCase()){const Yt={method:me,params:[ke[0],We[0]]};return yield(xe=he.getProvider())===null||xe===void 0?void 0:xe.request(Yt)}if((me==null?void 0:me.toLowerCase())===Ce.ETH_SENDTRANSACTION.toLowerCase()){const Yt={method:me,params:[Object.assign(Object.assign({},ke[0]),{from:We[0]})]};return yield(Te=he.getProvider())===null||Te===void 0?void 0:Te.request(Yt)}return tI.includes(me.toLowerCase())?(console.warn(`MetaMaskSDK connectWith method=${me} -- not handled by the extension -- call separately`),We):yield(Ie=he.getProvider())===null||Ie===void 0?void 0:Ie.request({method:me,params:ke})}))({method:te.method,sdk:o,params:te.params});return o.emit(Dn.ConnectWithResponse,ue),ue}return ne(`[initializeMobileProvider: sendRequest()] sending '${F}' on active provider`,oe),yield(k=o.getProvider())===null||k===void 0?void 0:k.request({method:F,params:oe})}throw Z===pe.REJECTED?(a==null||a.closeModal(),(I=o.getProvider())===null||I===void 0||I.handleDisconnect({terminate:!1}),Object.assign(new Error("User rejected connection"),{code:4001})):(ne(`[initializeMobileProvider: sendRequest()] failed to start installer: ${Z}`),Z)}finally{P(!1)}if(F===Ce.ETH_REQUESTACCOUNTS)return U=yield new Promise(Z=>{const te=setInterval(()=>{const{accounts:ue}=S.getState();ue&&(clearInterval(te),Z(ue))},100)}),ne(`[initializeMobileProvider: sendRequest()] selectedAddress: ${N} --- SKIP rpc call`),U;if(F===Ce.METAMASK_CONNECTWITH)try{let Z=0;const te=5,ue=({resolve:Pe,reject:xe})=>{Z+=1;const Te=a==null?void 0:a.getConnector().getRPCMethodTracker(),Ie=Te==null?void 0:Te[le];return ne(`TRACKER: update method ${le}`,Ie),Ie!=null&&Ie.result?(ne("[initializeMobileProvider: sendRequest()] found result",Ie.result),o.emit(Dn.ConnectWithResponse,Ie.result),void Pe(Ie.result)):Ie!=null&&Ie.error?(ne("[initializeMobileProvider: sendRequest()] found error",Ie.error),void xe(Ie.error)):Z>=te?(ne("[initializeMobileProvider: sendRequest()] max message count reached without result"),void xe(new Error("Max message count reached without result"))):void ne("[initializeMobileProvider: sendRequest()] not found yet, need to wait for next update")};let me,he;const ke=yield new Promise((Pe,xe)=>{const Te=a==null?void 0:a.getConnector().getRPCMethodTracker();ne(`TRACKER: method ${le}`,Te),Te!=null&&Te[le].result?(ne("[initializeMobileProvider: sendRequest()] found result",Te==null?void 0:Te[le].result),Pe(Te==null?void 0:Te[le].result)):Te!=null&&Te[le].error&&(ne("[initializeMobileProvider: sendRequest()] found error",Te==null?void 0:Te[le].error),xe(Te==null?void 0:Te[le].error)),he=()=>ue({resolve:Pe,reject:xe}),me=a==null?void 0:a.getConnector().on(pe.RPC_UPDATE,he)});return he&&(me==null||me.off(pe.RPC_UPDATE,he)),ne("TRACKER: result",ke),ke}catch(Z){throw ne("[initializeMobileProvider: sendRequest()] error:",Z),Z}return W[0]&&typeof W[0]=="object"&&(W[0].params={__triggeredInstaller:!0,wrappedParams:W[0].params}),K(...W)}if(i.isSecure()&&gf[F])return K(...W);if(o.isExtensionActive())return ne(`[initializeMobileProvider: sendRequest()] EXTENSION active - redirect request '${F}' to it`,W,oe),yield(A=o.getProvider())===null||A===void 0?void 0:A.request({method:F,params:oe});throw ne(`[initializeMobileProvider: sendRequest()] method=${F} --- skip --- not connected/installed`),new Error("MetaMask is not connected/installed, please call eth_requestAccounts to connect first.")}try{const oe=yield K(...W);if(ne(`[initializeMobileProvider: sendRequest()] method=${F} rpcResponse`,oe),F===Ce.WALLET_REQUESTPERMISSIONS){const J=oe.reduce((le,Z)=>{var te;if(Z.parentCapability==="eth_accounts"){const ue=(te=Z.caveats.find(me=>me.type==="restrictReturnedAccounts"))===null||te===void 0?void 0:te.value;ue&&le.push(...ue)}return le},[]);ne("[initializeMobileProvider: sendRequest()] accountsToPersist:",J),J.length>0&&(S.handleAccountsChanged(J,!1),p==null||p.persistAccounts(J))}return oe}catch(oe){throw console.error("[initializeMobileProvider: sendRequest()] error:",oe),oe}}),{request:D}=y;y.request=(...F)=>se(void 0,void 0,void 0,function*(){return j(F==null?void 0:F[0].method,F,D,l)});const{send:V}=y;return y.send=(...F)=>se(void 0,void 0,void 0,function*(){return j(F==null?void 0:F[0],F,V,l)}),ne("[initializeMobileProvider: sendRequest()] metamaskStream.start()"),d.start(),y});function w$(t){var e,n,r,i;return se(this,void 0,void 0,function*(){const{options:s}=t,o={communicationLayerPreference:(e=s.communicationLayerPreference)!==null&&e!==void 0?e:sl.SOCKET,platformManager:t.platformManager,sdk:t,checkInstallationOnAllCalls:s.checkInstallationOnAllCalls,injectProvider:(n=s.injectProvider)===null||n===void 0||n,shouldShimWeb3:(r=s.shouldShimWeb3)===null||r===void 0||r,extensionOnly:(i=s.extensionOnly)===null||i===void 0||i,installer:t.installer,remoteConnection:t.remoteConnection,debug:t.debug},a=yield v$(o);t.activeProvider=a,function(l){var c,u,d,f;(u=(c=l.remoteConnection)===null||c===void 0?void 0:c.getConnector())===null||u===void 0||u.on(Dn.ConnectionStatus,h=>{l.emit(Dn.ConnectionStatus,h)}),(f=(d=l.remoteConnection)===null||d===void 0?void 0:d.getConnector())===null||f===void 0||f.on(Dn.ServiceStatus,h=>{l.emit(Dn.ServiceStatus,h)})}(t)})}const b$="sdk";class E${constructor({serverUrl:e,enabled:n,originatorInfo:r}){this.serverURL=mu,this.serverURL=e,this.originatorInfo=r,this.enabled=n==null||n}send({event:e,params:n}){if(!this.enabled)return;const r=Object.assign(Object.assign({id:b$,event:e,sdkVersion:gl.version},this.originatorInfo),{params:n});ne(`[Analytics: send()] event: ${e}`,r),Ts(r,this.serverURL).catch(i=>{ne(`[Analytics: send()] error: ${i}`)})}}const A$=()=>{if(typeof document>"u")return;let t;const e=document.getElementsByTagName("link");for(let n=0;n<e.length;n++)e[n].getAttribute("rel")!=="icon"&&e[n].getAttribute("rel")!=="shortcut icon"||(t=e[n].getAttribute("href"));return t},S$=163400;function Cx(t){var e,n,r;const{dappMetadata:i}=t,s=function({url:u,name:d}){var f;const h=u+d,m=K0(h);if(!localStorage)return"";let g=(f=localStorage.getItem(m))!==null&&f!==void 0?f:"";if(!g){g=ro();try{localStorage.setItem(m,g)}catch{return""}}return g}({url:(e=i==null?void 0:i.url)!==null&&e!==void 0?e:"no_url",name:(n=i==null?void 0:i.name)!==null&&n!==void 0?n:"no_name"}),o=(r=t.platformManager)===null||r===void 0?void 0:r.getPlatformType(),a=o===ln.DesktopWeb,l=o===ln.MetaMaskMobileWebview;let c="N/A";return a?c="extension":l&&(c="mobile"),{id:s,from:c}}const Kh=(t,e,n)=>{if(Hf(t))if(n||e&&typeof e=="object"&&e!==null&&"error"in e){const r=n||(e==null?void 0:e.error);r&&r.code===4001?bt.analytics.track("sdk_action_rejected",{action:t}):bt.analytics.track("sdk_action_failed",{action:t})}else bt.analytics.track("sdk_action_succeeded",{action:t})},rI=({provider:t,sdkInstance:e})=>{if("state"in t)throw new Error("INVALID EXTENSION PROVIDER");return new Proxy(t,{get:(n,r)=>r==="request"?function(i){var s,o;return se(this,void 0,void 0,function*(){ne("[wrapExtensionProvider()] Overwriting request method",i);const{method:a,params:l}=i,c=f$.includes(a.toLowerCase()),{id:u,from:d}=Cx(e);if(c&&((s=e.analytics)===null||s===void 0||s.send({event:St.SDK_RPC_REQUEST,params:{method:a,from:d,id:u}})),Hf(a)&&bt.analytics.track("sdk_action_requested",{action:a}),a===Ce.METAMASK_BATCH&&Array.isArray(l))return(({target:m,args:g,trackEvent:w,sdkInstance:p})=>se(void 0,void 0,void 0,function*(){var v,y;if(g.method!=="metamask_batch")throw new Error("Invalid usage");const C=[],P=(v=g==null?void 0:g.params)!==null&&v!==void 0?v:[];for(const D of P){const V=yield m==null?void 0:m.request({method:D.method,params:D.params});C.push(V)}const{id:L,from:j}=Cx(p);w&&((y=p.analytics)===null||y===void 0||y.send({event:St.SDK_RPC_REQUEST_DONE,params:{method:g.method,from:j,id:L}}));for(const D of C)Kh(g.method,D,null);return C}))({target:n,args:i,trackEvent:c,sdkInstance:e});if(a.toLowerCase()===Ce.METAMASK_CONNECTSIGN.toLowerCase()&&Array.isArray(l))return(({target:m,params:g})=>se(void 0,void 0,void 0,function*(){let w,p=null;try{const v=yield m.request({method:Ce.ETH_REQUESTACCOUNTS,params:[]});if(!v.length)throw new Error("SDK state invalid -- undefined accounts");return w=yield m.request({method:Ce.PERSONAL_SIGN,params:[g[0],v[0]]}),w}catch(v){throw p=v,v}finally{Kh(Ce.PERSONAL_SIGN,w,p)}}))({target:n,params:l});if(a.toLowerCase()===Ce.METAMASK_CONNECTWITH.toLowerCase()&&Array.isArray(l))return(({target:m,params:g})=>se(void 0,void 0,void 0,function*(){const[w]=g,p=w.method,v=w.params;let y,C=null;try{const P=yield m.request({method:Ce.ETH_REQUESTACCOUNTS,params:[]});if(!Array.isArray(P)||!P.length)throw new Error("SDK state invalid -- undefined accounts");return(p==null?void 0:p.toLowerCase())===Ce.PERSONAL_SIGN.toLowerCase()?(y=yield m.request({method:p,params:[v[0],P[0]]}),y):(p==null?void 0:p.toLowerCase())===Ce.ETH_SENDTRANSACTION.toLowerCase()?(y=yield m.request({method:p,params:[Object.assign(Object.assign({},v[0]),{from:P[0]})]}),y):tI.includes(p.toLowerCase())?(console.warn(`MetaMaskSDK connectWith method=${p} -- not handled by the extension -- call separately`),y=P,y):(y=yield m.request({method:p,params:v}),y)}catch(P){throw C=P,P}finally{Kh(p,y,C)}}))({target:n,params:l});let f,h=null;try{return f=yield n.request(i),f}catch(m){throw h=m,m}finally{c&&((o=e.analytics)===null||o===void 0||o.send({event:St.SDK_RPC_REQUEST_DONE,params:{method:a,from:d,id:u}})),Kh(a,f,h)}})}:r==="getChainId"?function(){return t.chainId}:r==="getNetworkVersion"?function(){return t.networkVersion}:r==="getSelectedAddress"?function(){return t.selectedAddress}:r==="isConnected"?function(){return t._state.isConnected}:n[r]})};var z0;function x$({mustBeMetaMask:t,sdkInstance:e}){return se(this,void 0,void 0,function*(){if(typeof window>"u")throw new Error("window not available");try{const n=yield new Promise((r,i)=>{const s=setTimeout(()=>{i(new Error("eip6963RequestProvider timed out"))},500);window.addEventListener(z0.Announce,o=>{const a=o,{detail:{info:l,provider:c}={}}=a,{name:u,rdns:d,uuid:f}=l??{};d$.test(f)&&u.startsWith(Ax.NAME)&&Ax.RDNS.includes(d)&&(clearTimeout(s),r(c))}),window.dispatchEvent(new Event(z0.Request))});return rI({provider:n,sdkInstance:e})}catch{throw new Error("Provider not found")}})}(function(t){t.Announce="eip6963:announceProvider",t.Request="eip6963:requestProvider"})(z0||(z0={}));const C$=t=>se(void 0,void 0,void 0,function*(){const{options:e}=t,{infuraAPIKey:n}=e;if(!n)return;const r={"0x1":`https://mainnet.infura.io/v3/${n}`,"0x5":`https://goerli.infura.io/v3/${n}`,"0xaa36a7":`https://sepolia.infura.io/v3/${n}`,"0xe708":`https://linea-mainnet.infura.io/v3/${n}`,"0xe704":`https://linea-goerli.infura.io/v3/${n}`,"0x89":`https://polygon-mainnet.infura.io/v3/${n}`,"0x13881":`https://polygon-mumbai.infura.io/v3/${n}`,"0x45":`https://optimism-mainnet.infura.io/v3/${n}`,"0x1a4":`https://optimism-goerli.infura.io/v3/${n}`,"0xa4b1":`https://arbitrum-mainnet.infura.io/v3/${n}`,"0x66eed":`https://arbitrum-goerli.infura.io/v3/${n}`,"0x2a15c308d":`https://palm-mainnet.infura.io/v3/${n}`,"0x2a15c3083":`https://palm-testnet.infura.io/v3/${n}`,"0xa86a":`https://avalanche-mainnet.infura.io/v3/${n}`,"0xa869":`https://avalanche-fuji.infura.io/v3/${n}`,"0x4e454152":`https://aurora-mainnet.infura.io/v3/${n}`,"0x4e454153":`https://aurora-testnet.infura.io/v3/${n}`,"0x534e5f4d41494e":`https://starknet-mainnet.infura.io/v3/${n}`,"0x534e5f474f45524c49":`https://starknet-goerli.infura.io/v3/${n}`,"0x534e5f474f45524c4932":`https://starknet-goerli2.infura.io/v3/${n}`,"0xa4ec":`https://celo-mainnet.infura.io/v3/${n}`,"0xaef3":`https://celo-alfajores.infura.io/v3/${n}`};t.options.readonlyRPCMap?t.options.readonlyRPCMap=Object.assign(Object.assign({},t.options.readonlyRPCMap),r):t.options.readonlyRPCMap=r}),k$=t=>se(void 0,void 0,void 0,function*(){const{options:e}=t,{readonlyRPCMap:n}=e;if(n)try{ne("[MetaMaskSDK: setupReadOnlyRPCProviders()] Setting up Readonly RPC Providers",n),t.setReadOnlyRPCCalls(!0)}catch{throw new Error("Invalid Infura Settings")}});function _$(t,e,n,r){return new(n||(n=Promise))(function(i,s){function o(c){try{l(r.next(c))}catch(u){s(u)}}function a(c){try{l(r.throw(c))}catch(u){s(u)}}function l(c){var u;c.done?i(c.value):(u=c.value,u instanceof n?u:new n(function(d){d(u)})).then(o,a)}l((r=r.apply(t,[])).next())})}function T$(t,e){var n,r,i,s,o={label:0,sent:function(){if(1&i[0])throw i[1];return i[1]},trys:[],ops:[]};return s={next:a(0),throw:a(1),return:a(2)},typeof Symbol=="function"&&(s[Symbol.iterator]=function(){return this}),s;function a(l){return function(c){return function(u){if(n)throw new TypeError("Generator is already executing.");for(;o;)try{if(n=1,r&&(i=2&u[0]?r.return:u[0]?r.throw||((i=r.return)&&i.call(r),0):r.next)&&!(i=i.call(r,u[1])).done)return i;switch(r=0,i&&(u=[2&u[0],i.value]),u[0]){case 0:case 1:i=u;break;case 4:return o.label++,{value:u[1],done:!1};case 5:o.label++,r=u[1],u=[0];continue;case 7:u=o.ops.pop(),o.trys.pop();continue;default:if(i=o.trys,!((i=i.length>0&&i[i.length-1])||u[0]!==6&&u[0]!==2)){o=0;continue}if(u[0]===3&&(!i||u[1]>i[0]&&u[1]<i[3])){o.label=u[1];break}if(u[0]===6&&o.label<i[1]){o.label=i[1],i=u;break}if(i&&o.label<i[2]){o.label=i[2],o.ops.push(u);break}i[2]&&o.ops.pop(),o.trys.pop();continue}u=e.call(t,o)}catch(d){u=[6,d],r=0}finally{n=i=0}if(5&u[0])throw u[1];return{value:u[0]?u[1]:void 0,done:!0}}([l,c])}}}var kx="INSTALLED",_x="NOT_INSTALLED",Tx="REGISTERED",Px="REGISTERING",Rx="RELOADING",Ix={CHROME:"https://chrome.google.com/webstore/detail/metamask/nkbihfbeogaeaoehlefnkodbefgpgknn",FIREFOX:"https://addons.mozilla.org/firefox/addon/ether-metamask/",DEFAULT:"https://metamask.io"},zh="REGISTRATION_IN_PROGRESS",Ox="FORWARDER_ID",P$=function(){function t(e){var n=e===void 0?{}:e,r=n.forwarderOrigin,i=r===void 0?"https://fwd.metamask.io":r,s=n.forwarderMode,o=s===void 0?t.FORWARDER_MODE.INJECT:s;this.forwarderOrigin=i,this.forwarderMode=o,this.state=t.isMetaMaskInstalled()?kx:_x;var a=t._detectBrowser();this.downloadUrl=a?Ix[a]:Ix.DEFAULT,this._onMessage=this._onMessage.bind(this),this._onMessageFromForwarder=this._onMessageFromForwarder.bind(this),this._openForwarder=this._openForwarder.bind(this),this._openDownloadPage=this._openDownloadPage.bind(this),this.startOnboarding=this.startOnboarding.bind(this),this.stopOnboarding=this.stopOnboarding.bind(this),window.addEventListener("message",this._onMessage),o===t.FORWARDER_MODE.INJECT&&sessionStorage.getItem(zh)==="true"&&t._injectForwarder(this.forwarderOrigin)}return t.prototype._onMessage=function(e){if(e.origin===this.forwarderOrigin)return e.data.type==="metamask:reload"?this._onMessageFromForwarder(e):void console.debug("Unknown message from '"+e.origin+"' with data "+JSON.stringify(e.data))},t.prototype._onMessageUnknownStateError=function(e){throw new Error("Unknown state: '"+e+"'")},t.prototype._onMessageFromForwarder=function(e){return _$(this,0,void 0,function(){return T$(this,function(n){switch(n.label){case 0:switch(this.state){case Rx:return[3,1];case _x:return[3,2];case kx:return[3,3];case Px:return[3,5];case Tx:return[3,6]}return[3,7];case 1:return console.debug("Ignoring message while reloading"),[3,8];case 2:return console.debug("Reloading now to register with MetaMask"),this.state=Rx,location.reload(),[3,8];case 3:return console.debug("Registering with MetaMask"),this.state=Px,[4,t._register()];case 4:return n.sent(),this.state=Tx,e.source.postMessage({type:"metamask:registrationCompleted"},e.origin),this.stopOnboarding(),[3,8];case 5:return console.debug("Already registering - ignoring reload message"),[3,8];case 6:return console.debug("Already registered - ignoring reload message"),[3,8];case 7:this._onMessageUnknownStateError(this.state),n.label=8;case 8:return[2]}})})},t.prototype.startOnboarding=function(){sessionStorage.setItem(zh,"true"),this._openDownloadPage(),this._openForwarder()},t.prototype.stopOnboarding=function(){sessionStorage.getItem(zh)==="true"&&(this.forwarderMode===t.FORWARDER_MODE.INJECT&&(console.debug("Removing forwarder"),t._removeForwarder()),sessionStorage.setItem(zh,"false"))},t.prototype._openForwarder=function(){this.forwarderMode===t.FORWARDER_MODE.OPEN_TAB?window.open(this.forwarderOrigin,"_blank"):t._injectForwarder(this.forwarderOrigin)},t.prototype._openDownloadPage=function(){window.open(this.downloadUrl,"_blank")},t.isMetaMaskInstalled=function(){return!!(window.ethereum&&window.ethereum.isMetaMask)},t._register=function(){return window.ethereum.request({method:"wallet_registerOnboarding"})},t._injectForwarder=function(e){var n=document.body,r=document.createElement("iframe");r.setAttribute("height","0"),r.setAttribute("width","0"),r.setAttribute("style","display: none;"),r.setAttribute("src",e),r.setAttribute("id",Ox),n.insertBefore(r,n.children[0])},t._removeForwarder=function(){var e;(e=document.getElementById(Ox))===null||e===void 0||e.remove()},t._detectBrowser=function(){var e=XR.parse(window.navigator.userAgent);return e.browser.name==="Firefox"?"FIREFOX":["Chrome","Chromium"].includes(e.browser.name||"")?"CHROME":null},t.FORWARDER_MODE={INJECT:"INJECT",OPEN_TAB:"OPEN_TAB"},t}();function R$(t,{wait:e=!1}){return se(this,void 0,void 0,function*(){return ne(`[MetamaskInstaller: startInstaller()] wait=${e}`),e&&(yield nI(1e3)),yield t.checkInstallation()})}class I${constructor({remote:e,preferDesktop:n,platformManager:r,debug:i=!1}){this.state={isInstalling:!1,hasInstalled:!1,resendRequest:null,preferDesktop:!1,platformManager:null,remote:null,debug:!1,connectWith:void 0},this.state.remote=e,this.state.preferDesktop=n,this.state.platformManager=r,this.state.debug=i}startDesktopOnboarding(){return function(){return se(this,void 0,void 0,function*(){ne("[MetamaskInstaller: startDesktopOnboarding() starting desktop onboarding"),window.ethereum&&(window.ethereum=void 0),new P$().startOnboarding()})}()}redirectToProperInstall(){return se(this,void 0,void 0,function*(){return function(e){var n,r;return se(this,void 0,void 0,function*(){const{state:i}=e,s=(n=i.platformManager)===null||n===void 0?void 0:n.getPlatformType();if(ne(`[MetamaskInstaller: redirectToProperInstall()] platform=${s}`),s===ln.MetaMaskMobileWebview)return!1;i.isInstalling=!0;try{yield(r=i.remote)===null||r===void 0?void 0:r.startConnection({connectWith:i.connectWith}),i.isInstalling=!1,i.hasInstalled=!0}catch(o){throw i.isInstalling=!1,o}return!0})}(this)})}checkInstallation(){return se(this,void 0,void 0,function*(){return function(e){var n;return se(this,void 0,void 0,function*(){const{state:r}=e,i=(n=r.platformManager)===null||n===void 0?void 0:n.isMetaMaskInstalled();return ne(`[MetamaskInstaller: checkInstallation()] isInstalled=${i}`),!!i||(yield e.redirectToProperInstall())})}(this)})}start({wait:e=!1,connectWith:n}){return se(this,void 0,void 0,function*(){this.state.connectWith=n,ne(`[MetaMaskInstaller: start()] wait=${e}`,n),yield R$(this,{wait:e})})}}class iI{constructor({debug:e,sdkVersion:n}){this.containers={install:void 0,pending:void 0,select:void 0},this.defined={install:!1,pending:!1,select:!1},this.debug=e!=null&&e,this.sdkVersion=n}loadComponent(e){return se(this,void 0,void 0,function*(){if(!this.defined[e]){this.defined[e]=!0;try{const n=yield Promise.resolve().then(function(){return d7});console.log("loader",n),n.defineCustomElements()}catch(n){console.error(`Failed to load ${e} modal:`,n)}}})}renderInstallModal(e){var n;return se(this,void 0,void 0,function*(){this.debug&&console.debug("ModalLoader: renderInstallModal",e),this.containers.install=e.parentElement,yield this.loadComponent("install");const r=document.createElement("mm-install-modal");r.link=e.link,r.preferDesktop=e.preferDesktop,r.sdkVersion=(n=e.sdkVersion)!==null&&n!==void 0?n:this.sdkVersion,r.addEventListener("close",({detail:{shouldTerminate:i}})=>e.onClose(i)),r.addEventListener("startDesktopOnboarding",e.metaMaskInstaller.startDesktopOnboarding),r.addEventListener("trackAnalytics",i=>{var s;return(s=e.onAnalyticsEvent)===null||s===void 0?void 0:s.call(e,i.detail)}),e.parentElement.appendChild(r)})}renderSelectModal(e){var n;return se(this,void 0,void 0,function*(){this.containers.select=e.parentElement,yield this.loadComponent("select");const r=document.createElement("mm-select-modal");r.link=e.link,r.sdkVersion=(n=e.sdkVersion)!==null&&n!==void 0?n:this.sdkVersion,r.preferDesktop=e.preferDesktop,r.addEventListener("close",({detail:{shouldTerminate:i}})=>e.onClose(i)),r.addEventListener("connectWithExtension",e.connectWithExtension),e.parentElement.appendChild(r),setTimeout(()=>this.updateQRCode(e.link),100)})}renderPendingModal(e){var n;return se(this,void 0,void 0,function*(){this.containers.pending=e.parentElement,yield this.loadComponent("pending");const r=document.createElement("mm-pending-modal");r.sdkVersion=(n=e.sdkVersion)!==null&&n!==void 0?n:this.sdkVersion,r.displayOTP=e.displayOTP,r.addEventListener("close",e.onClose),r.addEventListener("updateOTPValue",({detail:{otpValue:i}})=>e.updateOTPValue(i)),e.onDisconnect&&r.addEventListener("disconnect",e.onDisconnect),e.parentElement.appendChild(r)})}updateOTPValue(e){const n=()=>{var r;const i=(r=this.containers.pending)===null||r===void 0?void 0:r.querySelector("mm-pending-modal");return!!i&&(i.otpCode=e,!0)};setTimeout(()=>{n()},800)}updateQRCode(e){var n,r;const i=(n=this.containers.install)===null||n===void 0?void 0:n.querySelector("mm-install-modal");if(i)i.link=e;else{const s=(r=this.containers.select)===null||r===void 0?void 0:r.querySelector("mm-select-modal");s&&(s.link=e)}}unmount(){Object.entries(this.containers).forEach(([e,n])=>{var r;(r=n==null?void 0:n.parentNode)===null||r===void 0||r.removeChild(n),this.containers[e]=void 0})}}const O$=({link:t,debug:e,installer:n,terminate:r,connectWithExtension:i,preferDesktop:s,onAnalyticsEvent:o})=>{let a=null,l=null;ne("[UI: InstallModal-web: sdkWebInstallModal()] ################## Installing Modal #################"),ne(`[UI: InstallModal-web: sdkWebInstallModal()] link=${t}`),ne(`[UI: InstallModal-web: sdkWebInstallModal()] npx uri-scheme open "${t}" --ios`),ne(`[UI: InstallModal-web: sdkWebInstallModal()] npx uri-scheme open "${t}" --android`),ne(`[UI: InstallModal-web: sdkWebInstallModal()] adb shell am start -a android.intent.action.VIEW -d "${t}"`);const c=u=>{var d;ne("[UI: InstallModal-web: sdkWebInstallModal()] installModal-web unmounting install modal -- shouldTerminate:",u,l),l!=null&&l.parentNode&&((d=l.parentNode)===null||d===void 0||d.removeChild(l)),l=null,a=null,u===!0&&(r==null||r())};return{mount:u=>{if(ne("[UI: InstallModal-web: sdkWebInstallModal()] installModal-web mounting install modal",l),l)return l.style.display="block",void(a==null||a.updateQRCode(u));a=new iI({debug:e,sdkVersion:gl.version}),l=document.createElement("div"),document.body.appendChild(l),window.extension?a.renderSelectModal({parentElement:l,connectWithExtension:()=>{c(),i==null||i()},onClose:c,link:t,preferDesktop:s!=null&&s}).catch(d=>{console.error(d)}):a.renderInstallModal({parentElement:l,preferDesktop:s!=null&&s,link:t,metaMaskInstaller:n,onClose:c,onAnalyticsEvent:o}).catch(d=>{console.error("[UI: InstallModal-web: sdkWebInstallModal()]",d)})},unmount:c}},N$=({onDisconnect:t,debug:e})=>{let n=null,r=null;const i=()=>{ne("[UI: pendingModal-web: sdkWebPendingModal()] pendingModal-web unmount",n),n!=null&&n.parentNode&&n.parentNode.removeChild(n),n=null,r=null},s=a=>{ne("[UI: pendingModal-web: sdkWebPendingModal()] pendingModal-web updateOTPValue",a),r&&r.updateOTPValue(a)},o=({displayOTP:a}={displayOTP:!0})=>{ne("[UI: pendingModal-web: sdkWebPendingModal()] pendingModal-web mount",n),n?n.style.display="block":(r=new iI({debug:e,sdkVersion:gl.version}),n=document.createElement("div"),document.body.appendChild(n),r.renderPendingModal({parentElement:n,onClose:i,onDisconnect:t,updateOTPValue:s,displayOTP:a}).catch(l=>{console.error("[UI: pendingModal-web: sdkWebPendingModal()]",l)}))};return o(),{mount:o,unmount:i,updateOTPValue:s}};function sI(t,e){var n,r,i,s;t.connector||(ne("[RemoteConnection: initializeConnector()] initialize connector"),t.connector=new BD({anonId:e.anonId,platformType:e.platformManager.getPlatformType(),communicationLayerPreference:e.communicationLayerPreference,transports:e.transports,dappMetadata:Object.assign(Object.assign({},e.dappMetadata),{source:e._source}),analytics:e.enableAnalytics,communicationServerUrl:e.communicationServerUrl,sdkVersion:gl.version,context:"dapp",ecies:e.ecies,storage:e.storage,logging:e.logging}),e.timer&&(ne("[RemoteConnection: initializeConnector()] reset background timer",e.timer),(r=(n=e.timer)===null||n===void 0?void 0:n.stopBackgroundTimer)===null||r===void 0||r.call(n),(s=(i=e.timer)===null||i===void 0?void 0:i.runBackgroundTimer)===null||s===void 0||s.call(i,()=>!1,1e4)))}function Hw(t){t.listeners.forEach(({event:e,handler:n})=>{var r;(r=t.connector)===null||r===void 0||r.off(e,n)}),t.listeners=[]}function M$(t,e,n){return se(this,void 0,void 0,function*(){const r=setTimeout(()=>{bt.analytics.track("sdk_connection_failed",{transport_type:"websocket"})},6e4);return new Promise((i,s)=>{if(!t.connector)return void s(new Error("No connector available"));ne("[RemoteConnection: connectWithModalInstaller()]",{state:t,options:e,linkParams:n});const o=`${t.useDeeplink?pf:hf}?${n}`;(function(a,l,c){var u,d,f,h;a.installModal=(d=(u=l.modals).install)===null||d===void 0?void 0:d.call(u,{link:c,preferDesktop:a.preferDesktop,installer:l.getMetaMaskInstaller(),terminate:()=>{ne("[RemoteConnection: showInstallModal() => terminate()] terminate connection"),l.sdk.terminate().catch(m=>{console.warn("[MMSDK] failed to terminate connection",m)})},debug:a.developerMode,connectWithExtension:()=>{var m;return(m=l.connectWithExtensionProvider)===null||m===void 0||m.call(l),!1},onAnalyticsEvent:({event:m,params:g})=>{var w,p,v;const y=Object.assign(Object.assign({},g),{sdkVersion:l.sdk.getVersion(),dappId:(w=l.dappMetadata)===null||w===void 0?void 0:w.name,source:l._source,url:(p=l.dappMetadata)===null||p===void 0?void 0:p.url});(v=a.analytics)===null||v===void 0||v.send({event:m,params:y})}}),(h=(f=a.installModal)===null||f===void 0?void 0:f.mount)===null||h===void 0||h.call(f,c)})(t,e,o),e.sdk.once(pe.PROVIDER_UPDATE,a=>se(this,void 0,void 0,function*(){if(ne("[RemoteConnection: connectWithModalInstaller()] once provider_update -- resolving startConnection promise"),a===Di.TERMINATE){const l={code:4001,message:"User rejected the request."};return clearTimeout(r),void s(l)}s(a)})),t.connector.once(pe.AUTHORIZED,()=>{clearTimeout(r),i()}),t.connector.once(pe.REJECTED,()=>{clearTimeout(r),s(pe.REJECTED)}),t.connector.once(pe.CLIENTS_READY,()=>se(this,void 0,void 0,function*(){ne("[RemoteConnection: connectWithModalInstaller()] once clients_ready -- resolving startConnection promise"),clearTimeout(r),i()}))})})}function oI(t,e){function n(r,i){var s;(s=t.connector)===null||s===void 0||s.on(r,i),t.listeners.push({event:r,handler:i})}t.connector&&(Hw(t),n(pe.WALLET_INIT,({accounts:r,chainId:i})=>se(this,void 0,void 0,function*(){ne(`[RemoteConnection: setupListeners() => EventType.WALLET_INIT] 'wallet_init' accounts=${r} chainId=${i}`);const s=ti.getProvider();s._setConnected();const o={accounts:r,chainId:i,isUnlocked:!1};s._initializeState(o),s.emit("chainChanged",i),s.emit("accountsChanged",r)})),n(pe.AUTHORIZED,()=>se(this,void 0,void 0,function*(){var r,i,s,o;try{ne("[RemoteConnection: setupListeners() => EventType.AUTHORIZED] 'authorized' closing modals",t.pendingModal,t.installModal);const a=ti.getProvider();a._setConnected(),(i=(r=t.pendingModal)===null||r===void 0?void 0:r.unmount)===null||i===void 0||i.call(r),(o=(s=t.installModal)===null||s===void 0?void 0:s.unmount)===null||o===void 0||o.call(s,!1),t.otpAnswer=void 0,t.authorized=!0,ne("[RemoteConnection: setupListeners() => EventType.AUTHORIZED] 'authorized' provider.state",a.getState()),yield a.forceInitializeState()}catch{}})),n(pe.TERMINATE,()=>{var r,i,s,o,a;(i=(r=t.pendingModal)===null||r===void 0?void 0:r.unmount)===null||i===void 0||i.call(r),(o=(s=t.installModal)===null||s===void 0?void 0:s.unmount)===null||o===void 0||o.call(s,!0),t.pendingModal=void 0,t.installModal=void 0,t.otpAnswer=void 0,(a=t.connector)===null||a===void 0||a.disconnect({terminate:!0}),t.authorized=!1,ti.getProvider().handleDisconnect({terminate:!0}),Hw(t),ne("[RemoteConnection: setupListeners()] All listeners cleaned up")}))}function L$(t,e,{initialCheck:n,connectWith:r}={}){var i,s,o,a,l,c,u,d,f,h,m,g,w,p,v,y,C,P,L;return se(this,void 0,void 0,function*(){try{if(sI(t,e),!t.connector)throw new Error("no connector defined");oI(t);const j=ti.getProvider();t.authorized=!1,j.emit("connecting");const D=yield(i=t.connector)===null||i===void 0?void 0:i.originatorSessionConnect();ne(`[RemoteConnection: startConnection()] after originatorSessionConnect initialCheck=${n}`,D);let V=(s=D==null?void 0:D.channelId)!==null&&s!==void 0?s:"",F=(a=(o=t.connector.getKeyInfo())===null||o===void 0?void 0:o.ecies.public)!==null&&a!==void 0?a:"",W=(c=(l=t.connector.getKeyInfo())===null||l===void 0?void 0:l.ecies.private)!==null&&c!==void 0?c:"";if(n&&!D)return Promise.resolve();if(!D&&!n){const R=yield t.connector.generateChannelIdConnect();V=(u=R.channelId)!==null&&u!==void 0?u:"",F=(d=R.pubKey)!==null&&d!==void 0?d:"",W=(f=R.privKey)!==null&&f!==void 0?f:"";const N=Date.now();(h=t.connector.state.storageManager)===null||h===void 0||h.persistChannelConfig({channelId:V,localKey:W,lastActive:N,validUntil:N+yu})}if(n&&(D!=null&&D.channelId))return!((m=t.connector)===null||m===void 0)&&m.isConnected()||(ne(`[RemoteConnection: startConnection()] reconnecting to channel initialCheck=${n}`,D),yield(g=t.connector)===null||g===void 0?void 0:g.connectToChannel({channelId:V})),Promise.resolve();D&&!(!((w=t.connector)===null||w===void 0)&&w.isConnected())&&(ne("[RemoteConnection: startConnection()] reconnecting to channel",D),yield(p=t.connector)===null||p===void 0?void 0:p.connectToChannel({channelId:V}));const K=!((v=t.platformManager)===null||v===void 0)&&v.isSecure()?"":"&t=q",$=gl.version,{iconUrl:M,name:x,url:O,scheme:B}=e.dappMetadata||{},b=(y=t.platformManager)===null||y===void 0?void 0:y.getPlatformType();let E="N/A";typeof window<"u"&&window.location&&window.location.hostname?E=window.location.hostname:x!==void 0?E=x:O!==void 0&&(E=O);const k={url:O??"",title:x??"",icon:M,scheme:B??"",apiVersion:$,dappId:E||O||"N/A",anonId:e.anonId,platform:b??"",source:(C=e._source)!==null&&C!==void 0?C:""},I=K0(JSON.stringify(k));let A=`channelId=${V}&v=2&comm=${(P=t.communicationLayerPreference)!==null&&P!==void 0?P:""}&pubkey=${F}${K}&originatorInfo=${I}`;if(r){A+=`&rpc=${K0(JSON.stringify(r))}`;const R=t.connector.getRPCMethodTracker();R&&(R[`${r.id}`]=Object.assign(Object.assign({},r),{id:`${r.id}`,timestamp:Date.now()}))}const S=encodeURI(A),T=`${t.useDeeplink?pf:hf}?${A}`;if(t.qrcodeLink=T,t.developerMode&&ne(`[RemoteConnection: startConnection()] qrcodeLink=${S}`),j.emit("display_uri",T),bt.analytics.track("sdk_connection_initiated",{transport_type:"websocket"}),(L=t.platformManager)===null||L===void 0?void 0:L.isSecure()){const R=setTimeout(()=>{bt.analytics.track("sdk_connection_failed",{transport_type:"websocket"})},6e4);return yield function(N,U){var z,q;return se(this,void 0,void 0,function*(){const Q=`${hf}?${U}`,ie=`${pf}?${U}`;(q=(z=N.platformManager)===null||z===void 0?void 0:z.openDeeplink)===null||q===void 0||q.call(z,Q,ie,"_self")})}(t,S),new Promise((N,U)=>{var z,q,Q;if(!((z=t.connector)===null||z===void 0)&&z.isAuthorized())return clearTimeout(R),void N();(q=t.connector)===null||q===void 0||q.once(pe.AUTHORIZED,()=>{clearTimeout(R),N()}),(Q=t.connector)===null||Q===void 0||Q.once(pe.REJECTED,()=>{clearTimeout(R),U(pe.REJECTED)})})}return M$(t,e,S)}catch(j){throw console.error("[startConnection] error",j),j}})}class B${constructor(e){var n,r,i;this.state={connector:void 0,qrcodeLink:void 0,analytics:void 0,developerMode:!1,authorized:!1,reconnection:!1,preferDesktop:!1,deeplinkProtocol:!1,listeners:[],communicationLayerPreference:void 0,platformManager:void 0,pendingModal:void 0,installModal:void 0,otpAnswer:void 0},this.options=e;const s=((n=e.logging)===null||n===void 0?void 0:n.developerMode)===!0||((r=e.logging)===null||r===void 0?void 0:r.sdk)===!0;this.state.developerMode=s,this.state.analytics=e.analytics,this.state.preferDesktop=(i=e.preferDesktop)!==null&&i!==void 0&&i,this.state.useDeeplink=e.sdk.options.useDeeplink,this.state.communicationLayerPreference=e.communicationLayerPreference,this.state.platformManager=e.platformManager,e.modals.install||(e.modals.install=O$),e.modals.otp||(e.modals.otp=N$)}startConnection(e){return se(this,void 0,void 0,function*(){return L$(this.state,this.options,e)})}initRemoteCommunication({sdkInstance:e}){var n,r,i;return se(this,void 0,void 0,function*(){const s=yield(r=(n=e.options.storage)===null||n===void 0?void 0:n.storageManager)===null||r===void 0?void 0:r.getPersistedChannelConfig();if(!this.options.ecies){const o={privateKey:s==null?void 0:s.localKey};this.options.ecies=o}sI(this.state,this.options),yield(i=this.getConnector())===null||i===void 0?void 0:i.initFromDappStorage(),oI(this.state,this.options)})}showActiveModal(){return function(e){var n,r,i,s;e.authorized?ne("[RemoteConnection: showActiveModal()] already authorized"):e.pendingModal?(r=(n=e.pendingModal).mount)===null||r===void 0||r.call(n):e.installModal&&((s=(i=e.installModal).mount)===null||s===void 0||s.call(i,e.qrcodeLink||""))}(this.state)}closeModal(){var e,n,r,i;(n=(e=this.state.pendingModal)===null||e===void 0?void 0:e.unmount)===null||n===void 0||n.call(e),(i=(r=this.state.installModal)===null||r===void 0?void 0:r.unmount)===null||i===void 0||i.call(r,!1)}getUniversalLink(){if(!this.state.qrcodeLink)throw new Error("connection not started. run startConnection() first.");return this.state.qrcodeLink}getChannelConfig(){var e;return(e=this.state.connector)===null||e===void 0?void 0:e.getChannelConfig()}getKeyInfo(){var e;return(e=this.state.connector)===null||e===void 0?void 0:e.getKeyInfo()}getConnector(){if(!this.state.connector)throw new Error("invalid remote connector");return this.state.connector}getPlatformManager(){if(!this.state.platformManager)throw new Error("PlatformManager not available");return this.state.platformManager}isConnected(){var e;return((e=this.state.connector)===null||e===void 0?void 0:e.isReady())||!1}isAuthorized(){var e;return((e=this.state.connector)===null||e===void 0?void 0:e.isAuthorized())||!1}isPaused(){var e;return(e=this.state.connector)===null||e===void 0?void 0:e.isPaused()}disconnect(e){var n,r,i;ne("[RemoteConnection: disconnect()]",e),e!=null&&e.terminate&&(ti.getProvider().handleDisconnect({terminate:!0}),(r=(n=this.state.pendingModal)===null||n===void 0?void 0:n.unmount)===null||r===void 0||r.call(n),this.state.otpAnswer=void 0),(i=this.state.connector)===null||i===void 0||i.disconnect(e),function(s){ne("[RemoteConnection: cleanupConnector()] cleaning up connector"),s.connector&&(Hw(s),s.connector.disconnect({terminate:!0}).catch(o=>{ne("[RemoteConnection: cleanupConnector()] error disconnecting connector",o)}))}(this.state)}}function D$(t){var e,n,r,i,s,o,a,l,c,u,d;return se(this,void 0,void 0,function*(){const{options:f}=t;if(f.logging=(e=f.logging)!==null&&e!==void 0?e:{},f.communicationLayerPreference=(n=f.communicationLayerPreference)!==null&&n!==void 0?n:sl.SOCKET,f.enableDebug!==void 0&&(Sn.enable("MM_SDK"),console.warn("enableDebug is removed. Please use enableAnalytics instead.")),f.enableAnalytics=(r=f.enableAnalytics)===null||r===void 0||r,f.injectProvider=(i=f.injectProvider)===null||i===void 0||i,f.shouldShimWeb3=(s=f.shouldShimWeb3)===null||s===void 0||s,f.extensionOnly=(o=f.extensionOnly)===null||o===void 0||o,f.useDeeplink=(a=f.useDeeplink)===null||a===void 0||a,f.storage=(l=f.storage)!==null&&l!==void 0?l:{enabled:!0},f.headless){Sn("[MetaMaskSDK: performSDKInitialization()] headless mode enabled");const v=()=>{},y={install:()=>({mount:v,unmount:v})},C={installer:v};f.modals=y,f.ui=C}const h=((c=f.logging)===null||c===void 0?void 0:c.developerMode)===!0;t.debug=((u=f.logging)===null||u===void 0?void 0:u.sdk)||h,ne("[MetaMaskSDK: performSDKInitialization()] options",t.options);const m=Object.assign({},f.logging);h&&(m.sdk=!0,m.eciesLayer=!0,m.keyExchangeLayer=!0,m.remoteLayer=!0,m.serviceLayer=!0,m.plaintext=!0),yield function(v){var y;return se(this,void 0,void 0,function*(){const{options:C}=v;v.platformManager=new df({useDeepLink:(y=C.useDeeplink)!==null&&y!==void 0&&y,preferredOpenLink:C.openDeeplink,debug:v.debug})})}(t),yield function(v){var y,C,P,L,j;return se(this,void 0,void 0,function*(){const{options:D}=v,V=(y=v.platformManager)===null||y===void 0?void 0:y.getPlatformType();v.analytics=new E$({serverUrl:(C=D.communicationServerUrl)!==null&&C!==void 0?C:mu,enabled:D.enableAnalytics,originatorInfo:{url:(P=D.dappMetadata.url)!==null&&P!==void 0?P:"",title:(L=D.dappMetadata.name)!==null&&L!==void 0?L:"",dappId:v.getDappId(),platform:V??"",source:(j=D._source)!==null&&j!==void 0?j:"",anonId:""}})})}(t),yield function(v){var y,C,P;return se(this,void 0,void 0,function*(){if(!v.options.enableAnalytics||!(!((y=v.platformManager)===null||y===void 0)&&y.isBrowser())&&!(!((C=v.platformManager)===null||C===void 0)&&C.isReactNative()))return;const L=v.getVersion(),j=v.getDappId(),D=yield v.getAnonId(),V=(P=v.platformManager)===null||P===void 0?void 0:P.getPlatformType(),F=v.options._source;bt.analytics.setGlobalProperty("sdk_version",L),bt.analytics.setGlobalProperty("dapp_id",j),bt.analytics.setGlobalProperty("anon_id",D),bt.analytics.setGlobalProperty("platform",V),bt.analytics.setGlobalProperty("integration_type",F),bt.analytics.enable(),bt.analytics.track("sdk_initialized",{})})}(t),yield function(v){var y;return se(this,void 0,void 0,function*(){const{options:C}=v;((y=C.storage)===null||y===void 0?void 0:y.enabled)!==!0||C.storage.storageManager||(C.storage.storageManager=yield eI(C.storage))})}(t),yield function(v){return se(this,void 0,void 0,function*(){const{options:y}=v,C=/^(http|https):\/\/[^\s]*$/;if(y.dappMetadata){y.dappMetadata.iconUrl&&!C.test(y.dappMetadata.iconUrl)&&(console.warn("Invalid dappMetadata.iconUrl: URL must start with http:// or https://"),y.dappMetadata.iconUrl=void 0),y.dappMetadata.base64Icon&&y.dappMetadata.base64Icon.length>S$&&(console.warn("Invalid dappMetadata.base64Icon: Base64-encoded icon string length must be less than 163400 characters"),y.dappMetadata.base64Icon=void 0),y.dappMetadata.url&&!C.test(y.dappMetadata.url)&&console.warn("Invalid dappMetadata.url: URL must start with http:// or https://");const P=A$();if(P&&!y.dappMetadata.iconUrl&&!y.dappMetadata.base64Icon){const L=`${window.location.protocol}//${window.location.host}${P}`;y.dappMetadata.iconUrl=L}}v.dappMetadata=y.dappMetadata})}(t),yield C$(t),yield k$(t);const{metamaskBrowserExtension:g,preferExtension:w,shouldReturn:p}=yield function(v){var y,C,P,L;return se(this,void 0,void 0,function*(){const{options:j}=v;let D,V=!1,F=!1;if(typeof window<"u"&&window.ethereum&&!(!((y=v.platformManager)===null||y===void 0)&&y.isMetaMaskMobileWebView())){V=localStorage.getItem(H0)==="extension";try{D=yield x$({mustBeMetaMask:!0,sdkInstance:v}),window.extension=D,D.on(li.CHAIN_CHANGED,W=>{ne(`[MetaMaskSDK: setupExtensionPreferences()] PROPAGATE chainChanged chainId=${W}`),v.sdkProvider&&v.getMobileProvider().emit(li.CHAIN_CHANGED,W)}),D.on(li.ACCOUNTS_CHANGED,W=>se(this,void 0,void 0,function*(){var K;ne(`[MetaMaskSDK: setupExtensionPreferences()] PROPAGATE accountsChanged accounts=${W}`);const $=!!v.sdkProvider,M=!!v.extensionActive;if($&&v.getMobileProvider().emit(li.ACCOUNTS_CHANGED,W),M&&(W==null?void 0:W.length)===0&&(yield(K=v.getProvider())===null||K===void 0?void 0:K.request({method:Ce.WALLET_GETPERMISSIONS,params:[]})).length===0)try{yield v.terminate()}catch(x){ne("[MetaMaskSDK: setupExtensionPreferences()] error terminating on permissions revoked",x)}})),D.on(li.DISCONNECT,W=>{ne(`[MetaMaskSDK: setupExtensionPreferences()] PROPAGATE disconnect error=${W}`),v.sdkProvider&&v.getMobileProvider().emit(li.DISCONNECT,W)}),D.on(li.CONNECT,W=>{ne(`[MetaMaskSDK: setupExtensionPreferences()] PROPAGATE connect args=${W}`),v.sdkProvider&&v.getMobileProvider().emit(li.CONNECT,W)}),D.on(li.CONNECTED,W=>{ne("[MetaMaskSDK: setupExtensionPreferences()] PROPAGATE connected",W),v.sdkProvider&&v.getMobileProvider().emit(li.CONNECTED,W)})}catch{window.extension=void 0}}else!((C=v.platformManager)===null||C===void 0)&&C.isMetaMaskMobileWebView()&&((P=v.analytics)===null||P===void 0||P.send({event:St.SDK_USE_INAPP_BROWSER}),v.activeProvider=rI({provider:window.ethereum,sdkInstance:v}),v._initialized=!0,F=!0);return D&&j.extensionOnly&&(ne("[MetaMaskSDK: setupExtensionPreferences()] EXTENSION ONLY --- prevent sdk initialization"),(L=v.analytics)===null||L===void 0||L.send({event:St.SDK_USE_EXTENSION}),v.activeProvider=D,v.extensionActive=!0,v.extension=D,v._initialized=!0,F=!0),{preferExtension:V,shouldReturn:F,metamaskBrowserExtension:D}})}(t);if(p)ne("[MetaMaskSDK: performSDKInitialization()] shouldReturn=true --- prevent sdk initialization");else{yield function(v,y){var C,P,L,j,D;return se(this,void 0,void 0,function*(){const{options:V}=v,F=Object.assign({},V.logging);v.remoteConnection=new B$({anonId:yield v.getAnonId(),preferDesktop:(C=V.preferDesktop)!==null&&C!==void 0&&C,communicationLayerPreference:(P=V.communicationLayerPreference)!==null&&P!==void 0?P:sl.SOCKET,analytics:v.analytics,dappMetadata:V.dappMetadata,_source:V._source,enableAnalytics:(L=V.enableAnalytics)===null||L===void 0||L,timer:V.timer,sdk:v,platformManager:v.platformManager,transports:V.transports,communicationServerUrl:V.communicationServerUrl,storage:(j=V.storage)!==null&&j!==void 0?j:{enabled:!0},getMetaMaskInstaller:()=>{if(!v.installer)throw new Error("Invalid SDK status -- installer not initialized");return v.installer},logging:F,connectWithExtensionProvider:y===void 0?void 0:()=>Sx(v),modals:Object.assign(Object.assign({},V.modals),{onPendingModalDisconnect:v.terminate.bind(v)})}),yield v.remoteConnection.initRemoteCommunication({sdkInstance:v}),v.installer=new I$({remote:v.remoteConnection,preferDesktop:(D=V.preferDesktop)!==null&&D!==void 0&&D,platformManager:v.platformManager,debug:v.debug})})}(t,g),yield w$(t),yield function(v,y){var C,P;return se(this,void 0,void 0,function*(){const{options:L}=v;y?(ne("[MetaMaskSDK: handleAutoAndExtensionConnections()] preferExtension is detected -- connect with it."),(C=v.analytics)===null||C===void 0||C.send({event:St.SDK_EXTENSION_UTILIZED}),Sx(v).catch(j=>{console.warn("Can't connect with MetaMask extension...",j),localStorage.removeItem(H0)})):L.checkInstallationImmediately&&(!((P=v.platformManager)===null||P===void 0)&&P.isDesktopWeb()?(ne("[MetaMaskSDK: handleAutoAndExtensionConnections()] checkInstallationImmediately"),v.connect().catch(j=>{ne(`[MetaMaskSDK: handleAutoAndExtensionConnections()] checkInstallationImmediately --- IGNORED --- error on autoconnect _err=${j}`)})):console.warn("[handleAutoAndExtensionConnections()] checkInstallationImmediately --- IGNORED --- only for web desktop")),v._initialized=!0})}(t,w);try{yield(d=t.remoteConnection)===null||d===void 0?void 0:d.startConnection({initialCheck:!0})}catch(v){console.error("[MetaMaskSDK: setupRemoteConnectionAndInstaller()] Error while checking installation",v)}t.emit(Dn.ProviderUpdate,Di.INITIALIZED)}})}class $$ extends AL{constructor(e={storage:{enabled:!0},injectProvider:!0,forceInjectProvider:!1,enableAnalytics:!0,shouldShimWeb3:!0,useDeeplink:!0,extensionOnly:!0,headless:!1,dappMetadata:{name:"",url:"",iconUrl:""},_source:Ex,i18nOptions:{enabled:!1}}){var n,r,i;super(),this.extensionActive=!1,this._initialized=!1,this.sdkInitPromise=void 0,this.debug=!1,this.readonlyRPCCalls=!1,this.availableLanguages=["en"],this.ANON_ID_STORAGE_KEY="mm-sdk-anon-id",Sn.disable();const s=((n=e.logging)===null||n===void 0?void 0:n.developerMode)===!0;if((!((r=e.logging)===null||r===void 0)&&r.sdk||s)&&Sn.enable("MM_SDK"),ne("[MetaMaskSDK: constructor()]: begin."),this.setMaxListeners(50),!(!((i=e.dappMetadata)===null||i===void 0)&&i.url)){if(typeof window>"u"||typeof document>"u")throw new Error("You must provide dAppMetadata url");e.dappMetadata=Object.assign(Object.assign({},e.dappMetadata),{url:`${window.location.protocol}//${window.location.host}`})}this.options=e,this.options._source||(e._source=Ex),this.init().then(()=>{ne("[MetaMaskSDK: constructor()]: initialized successfully."),typeof window<"u"&&(window.mmsdk=this)}).catch(o=>{console.error("[MetaMaskSDK: constructor()] error during initialization",o)})}init(){return se(this,void 0,void 0,function*(){return function(e){var n;return se(this,void 0,void 0,function*(){if(typeof window<"u"&&(!((n=window.mmsdk)===null||n===void 0)&&n.isInitialized()))return ne("[MetaMaskSDK: initializeMetaMaskSDK()] already initialized"),Promise.resolve(window.mmsdk);if(e._initialized)return ne("[MetaMaskSDK: initializeMetaMaskSDK()] already initialized"),e.sdkInitPromise;if(e.sdkInitPromise)return ne("[MetaMaskSDK: initializeMetaMaskSDK()] already initializing"),e.sdkInitPromise;try{e.sdkInitPromise=D$(e),yield e.sdkInitPromise}catch(r){throw console.error(r),r}return e.sdkInitPromise})}(this)})}isExtensionActive(){return this.extensionActive}checkExtensionAvailability(){var e;return typeof window<"u"&&!!(!((e=window.ethereum)===null||e===void 0)&&e.isMetaMask)}connect(){return se(this,void 0,void 0,function*(){return function(e){return se(this,void 0,void 0,function*(){if(e._initialized||(ne("[MetaMaskSDK: connect()] provider not ready -- wait for init()"),yield e.init()),ne(`[MetaMaskSDK: connect()] isExtensionActive=${e.isExtensionActive()} activeProvider`,e.activeProvider),!e.activeProvider)throw new Error("SDK state invalid -- undefined provider");const n=e.activeProvider.getSelectedAddress();return n?[n]:e.activeProvider.request({method:Ce.ETH_REQUESTACCOUNTS,params:[]})})}(this)})}connectAndSign({msg:e}){return se(this,void 0,void 0,function*(){return g$({instance:this,msg:e})})}connectWith(e){return se(this,void 0,void 0,function*(){return function({instance:n,rpc:r}){return se(this,void 0,void 0,function*(){if(n._initialized||(ne("[MetaMaskSDK: connectWith()] provider not ready -- wait for init()"),yield n.init()),ne(`[MetaMaskSDK: connectWith()] method: ${r.method} rpc=${r}`),!n.activeProvider)throw new Error("SDK state invalid -- undefined provider");return n.activeProvider.request({method:Ce.METAMASK_CONNECTWITH,params:[r]})})}({instance:this,rpc:e})})}resume(){return function(e){var n,r,i;return se(this,void 0,void 0,function*(){if(!(!((r=(n=e.remoteConnection)===null||n===void 0?void 0:n.getConnector())===null||r===void 0)&&r.isReady()))return ne("[MetaMaskSDK: resume()] channel is not ready -- starting connection"),void((i=e.remoteConnection)===null||i===void 0||i.startConnection());ne("[MetaMaskSDK: resume()] channel is ready")})}(this)}disconnect(){return console.warn("MetaMaskSDK.disconnect() is deprecated, use terminate()"),this.terminate()}isAuthorized(){var e;(e=this.remoteConnection)===null||e===void 0||e.isAuthorized()}terminate(){return function(e){var n,r,i;return se(this,void 0,void 0,function*(){if(!(!((n=e.platformManager)===null||n===void 0)&&n.isMetaMaskMobileWebView())){if(p$&&(window.localStorage.removeItem(H0),window.localStorage.removeItem(jw),window.localStorage.removeItem(Fw)),e.extensionActive){try{yield(r=e.activeProvider)===null||r===void 0?void 0:r.request({method:Ce.WALLET_REVOKEPERMISSIONS,params:[{eth_accounts:{}}]})}catch(s){ne("[MetaMaskSDK: terminate()] error revoking permissions",s)}return e.options.extensionOnly?(e.emit(Dn.ProviderUpdate,Di.TERMINATE),void ne("[MetaMaskSDK: terminate()] extensionOnly --- prevent switching providers")):(e.activeProvider=e.sdkProvider,window.ethereum=e.activeProvider,e.extensionActive=!1,void e.emit(Dn.ProviderUpdate,Di.TERMINATE))}e.emit(Dn.ProviderUpdate,Di.TERMINATE),ne(`[MetaMaskSDK: terminate()] remoteConnection=${e.remoteConnection}`),(i=e.remoteConnection)===null||i===void 0||i.disconnect({terminate:!0,sendMessage:!0})}})}(this)}isInitialized(){return this._initialized}setReadOnlyRPCCalls(e){this.readonlyRPCCalls=e}hasReadOnlyRPCCalls(){return this.readonlyRPCCalls}getProvider(){if(this.activeProvider)return this.activeProvider;console.warn("MetaMaskSDK: No active provider found")}getMobileProvider(){if(!this.sdkProvider)throw new Error("SDK state invalid -- undefined mobile provider");return this.sdkProvider}getUniversalLink(){var e;const n=(e=this.remoteConnection)===null||e===void 0?void 0:e.getUniversalLink();if(!n)throw new Error("No Universal Link available, please call eth_requestAccounts first.");return n}getChannelId(){var e,n;return(n=(e=this.remoteConnection)===null||e===void 0?void 0:e.getChannelConfig())===null||n===void 0?void 0:n.channelId}getRPCHistory(){var e,n;return(n=(e=this.remoteConnection)===null||e===void 0?void 0:e.getConnector())===null||n===void 0?void 0:n.getRPCMethodTracker()}getVersion(){return gl.version}getDappId(){var e,n,r,i;return typeof window>"u"||window.location===void 0?(i=(n=(e=this.options.dappMetadata)===null||e===void 0?void 0:e.name)!==null&&n!==void 0?n:(r=this.options.dappMetadata)===null||r===void 0?void 0:r.url)!==null&&i!==void 0?i:"N/A":window.location.hostname}getAnonId(){var e,n;return se(this,void 0,void 0,function*(){if(this._anonId)return this._anonId;let r;return r=!((e=this.platformManager)===null||e===void 0)&&e.isBrowser()?this.getBrowserAnonId():!((n=this.platformManager)===null||n===void 0)&&n.isReactNative()?yield this.getReactNativeAnonId():ro(),this._anonId=r,r})}getBrowserAnonId(){const e=this.ANON_ID_STORAGE_KEY;try{const n=localStorage.getItem(e);if(n)return n;const r=ro();return localStorage.setItem(e,r),r}catch(n){return console.error("[MetaMaskSDK: getBrowserAnonId()] LocalStorage access error:",n),ro()}}getReactNativeAnonId(){return se(this,void 0,void 0,function*(){const e=this.ANON_ID_STORAGE_KEY;try{const n=require("@react-native-async-storage/async-storage").default,r=yield n.getItem(e);if(r)return r;const i=ro();return yield n.setItem(e,i),i}catch(n){return console.error("[MetaMaskSDK: getReactNativeAnonId()] Error accessing AsyncStorage:",n),ro()}})}getWalletStatus(){var e,n;return(n=(e=this.remoteConnection)===null||e===void 0?void 0:e.getConnector())===null||n===void 0?void 0:n.getConnectionStatus()}_getChannelConfig(){var e;return(e=this.remoteConnection)===null||e===void 0?void 0:e.getChannelConfig()}_ping(){var e,n;(n=(e=this.remoteConnection)===null||e===void 0?void 0:e.getConnector())===null||n===void 0||n.ping()}_keyCheck(){var e,n;(n=(e=this.remoteConnection)===null||e===void 0?void 0:e.getConnector())===null||n===void 0||n.keyCheck()}_getServiceStatus(){var e,n;return(n=(e=this.remoteConnection)===null||e===void 0?void 0:e.getConnector())===null||n===void 0?void 0:n.getServiceStatus()}_getRemoteConnection(){return this.remoteConnection}_getDappMetadata(){return this.dappMetadata}_getKeyInfo(){var e;return(e=this.remoteConnection)===null||e===void 0?void 0:e.getKeyInfo()}_resetKeys(){var e,n;(n=(e=this.remoteConnection)===null||e===void 0?void 0:e.getConnector())===null||n===void 0||n.resetKeys()}_getConnection(){return this.remoteConnection}emit(e,n){return super.emit(e,n)}on(e,n){return super.on(e,n)}}var U$=Object.freeze({__proto__:null,StorageManagerWeb:class{constructor({enabled:t}={enabled:!1}){this.enabled=!1,this.enabled=t}persistChannelConfig(t){return se(this,void 0,void 0,function*(){const e=JSON.stringify(t);ne(`[StorageManagerWeb: persistChannelConfig()] enabled=${this.enabled}`,t),localStorage.setItem(xy,e)})}getPersistedChannelConfig(){return se(this,void 0,void 0,function*(){let t;try{if(ne(`[StorageManagerWeb: getPersistedChannelConfig()] enabled=${this.enabled}`),t=localStorage.getItem(xy),ne("[StorageManagerWeb: getPersistedChannelConfig()]",t),!t)return;const e=JSON.parse(t);return ne("[StorageManagerWeb: getPersistedChannelConfig()] channelConfig",e),e}catch(e){return void console.error("[StorageManagerWeb: getPersistedChannelConfig()] Can't find existing channel config",e)}})}persistAccounts(t){return se(this,void 0,void 0,function*(){ne(`[StorageManagerWeb: persistAccounts()] enabled=${this.enabled}`,t);const e=JSON.stringify(t);localStorage.setItem(Fw,e)})}getCachedAccounts(){return se(this,void 0,void 0,function*(){try{const t=localStorage.getItem(Fw);return t?JSON.parse(t):[]}catch(t){throw console.error("[StorageManagerWeb: getCachedAccounts()] Error reading cached accounts",t),t}})}persistChainId(t){return se(this,void 0,void 0,function*(){ne(`[StorageManagerWeb: persistChainId()] enabled=${this.enabled}`,t),localStorage.setItem(jw,t)})}getCachedChainId(){return se(this,void 0,void 0,function*(){try{const t=localStorage.getItem(jw);return t??void 0}catch(t){throw console.error("[StorageManagerWeb: getCachedChainId()] Error reading cached chainId",t),t}})}terminate(){return se(this,void 0,void 0,function*(){ne(`[StorageManagerWeb: terminate()] enabled=${this.enabled}`),localStorage.removeItem(xy)})}}});const F$="hydrated",j$=!1,H$=!0;var K$=Object.defineProperty,jb=new WeakMap,_o=t=>jb.get(t),Hb=(t,e)=>jb.set(e.$lazyInstance$=t,e),Nx=(t,e)=>e in t,Qa=(t,e)=>(0,console.error)(t,e),Cy=new Map,Np=new Map,aI="slot-fb{display:contents}slot-fb[hidden]{display:none}",Hg=typeof window<"u"?window:{},Oi=Hg.document||{head:{}},Kt={$flags$:0,$resourcesUrl$:"",jmp:t=>t(),raf:t=>requestAnimationFrame(t),ael:(t,e,n,r)=>t.addEventListener(e,n,r),rel:(t,e,n,r)=>t.removeEventListener(e,n,r),ce:(t,e)=>new CustomEvent(t,e)},lI=(()=>{try{return new CSSStyleSheet,typeof new CSSStyleSheet().replaceSync=="function"}catch{}return!1})(),Kw=!1,Mx=[],cI=[],z$=(t,e)=>n=>{t.push(n),Kw||(Kw=!0,4&Kt.$flags$?Kb(zw):Kt.raf(zw))},Lx=t=>{for(let e=0;e<t.length;e++)try{t[e](performance.now())}catch(n){Qa(n)}t.length=0},zw=()=>{Lx(Mx),Lx(cI),(Kw=Mx.length>0)&&Kt.raf(zw)},Kb=t=>(e=>Promise.resolve(e))().then(t),V$=z$(cI),Bx={},zb=t=>(t=typeof t)=="object"||t==="function";function uI(t){var e,n,r;return(r=(n=(e=t.head)==null?void 0:e.querySelector('meta[name="csp-nonce"]'))==null?void 0:n.getAttribute("content"))!=null?r:void 0}((t,e)=>{for(var n in e)K$(t,n,{get:e[n],enumerable:!0})})({},{err:()=>dI,map:()=>G$,ok:()=>Vw,unwrap:()=>W$,unwrapErr:()=>q$});var Vw=t=>({isOk:!0,isErr:!1,value:t}),dI=t=>({isOk:!1,isErr:!0,value:t});function G$(t,e){if(t.isOk){const n=e(t.value);return n instanceof Promise?n.then(r=>Vw(r)):Vw(n)}if(t.isErr){const n=t.value;return dI(n)}throw"should never get here"}var Vb,W$=t=>{if(t.isOk)return t.value;throw t.value},q$=t=>{if(t.isErr)return t.value;throw t.value},re=(t,e,...n)=>{let r=null,i=!1,s=!1;const o=[],a=c=>{for(let u=0;u<c.length;u++)r=c[u],Array.isArray(r)?a(r):r!=null&&typeof r!="boolean"&&((i=typeof t!="function"&&!zb(r))&&(r=String(r)),i&&s?o[o.length-1].$text$+=r:o.push(i?V0(null,r):r),s=i)};if(a(n),e){const c=e.className||e.class;c&&(e.class=typeof c!="object"?c:Object.keys(c).filter(u=>c[u]).join(" "))}if(typeof t=="function")return t(e===null?{}:e,o,Y$);const l=V0(t,null);return l.$attrs$=e,o.length>0&&(l.$children$=o),l},V0=(t,e)=>({$flags$:0,$tag$:t,$text$:e,$elm$:null,$children$:null,$attrs$:null}),Q$={},Y$={forEach:(t,e)=>t.map(Dx).forEach(e),map:(t,e)=>t.map(Dx).map(e).map(J$)},Dx=t=>({vattrs:t.$attrs$,vchildren:t.$children$,vkey:t.$key$,vname:t.$name$,vtag:t.$tag$,vtext:t.$text$}),J$=t=>{if(typeof t.vtag=="function"){const n={...t.vattrs};return t.vkey&&(n.key=t.vkey),t.vname&&(n.name=t.vname),re(t.vtag,n,...t.vchildren||[])}const e=V0(t.vtag,t.vtext);return e.$attrs$=t.vattrs,e.$children$=t.vchildren,e.$key$=t.vkey,e.$name$=t.vname,e},Kg=t=>_o(t).$hostElement$,Uo=(t,e,n)=>{const r=Kg(t);return{emit:i=>fI(r,e,{bubbles:!0,composed:!0,cancelable:!0,detail:i})}},fI=(t,e,n)=>{const r=Kt.ce(e,n);return t.dispatchEvent(r),r},$x=new WeakMap,Z$=t=>{const e=t.$cmpMeta$,n=t.$hostElement$,r=e.$flags$;e.$tagName$;const i=((s,o,a)=>{var l;const c=hI(o),u=Np.get(c);if(s=s.nodeType===11?s:Oi,u)if(typeof u=="string"){s=s.head||s;let d,f=$x.get(s);if(f||$x.set(s,f=new Set),!f.has(c)){{d=Oi.createElement("style"),d.innerHTML=u;const h=(l=Kt.$nonce$)!=null?l:uI(Oi);if(h!=null&&d.setAttribute("nonce",h),!(1&o.$flags$))if(s.nodeName==="HEAD"){const m=s.querySelectorAll("link[rel=preconnect]"),g=m.length>0?m[m.length-1].nextSibling:s.querySelector("style");s.insertBefore(d,g)}else if("host"in s)if(lI){const m=new CSSStyleSheet;m.replaceSync(u),s.adoptedStyleSheets=[m,...s.adoptedStyleSheets]}else{const m=s.querySelector("style");m?m.innerHTML=u+m.innerHTML:s.prepend(d)}else s.append(d);1&o.$flags$&&s.nodeName!=="HEAD"&&s.insertBefore(d,null)}4&o.$flags$&&(d.innerHTML+=aI),f&&f.add(c)}}else s.adoptedStyleSheets.includes(u)||(s.adoptedStyleSheets=[...s.adoptedStyleSheets,u]);return c})(n.shadowRoot?n.shadowRoot:n.getRootNode(),e);10&r&&2&r&&(n["s-sc"]=i,n.classList.add(i+"-h"))},hI=(t,e)=>"sc-"+t.$tagName$,Ux=(t,e,n,r,i,s)=>{if(n!==r){let o=Nx(t,e),a=e.toLowerCase();if(e==="class"){const l=t.classList,c=Fx(n),u=Fx(r);l.remove(...c.filter(d=>d&&!u.includes(d))),l.add(...u.filter(d=>d&&!c.includes(d)))}else if(e==="style"){for(const l in n)r&&r[l]!=null||(l.includes("-")?t.style.removeProperty(l):t.style[l]="");for(const l in r)n&&r[l]===n[l]||(l.includes("-")?t.style.setProperty(l,r[l]):t.style[l]=r[l])}else if(o||e[0]!=="o"||e[1]!=="n"){const l=zb(r);if((o||l&&r!==null)&&!i)try{if(t.tagName.includes("-"))t[e]=r;else{const c=r??"";e==="list"?o=!1:n!=null&&t[e]==c||(typeof t.__lookupSetter__(e)=="function"?t[e]=c:t.setAttribute(e,c))}}catch{}r==null||r===!1?r===!1&&t.getAttribute(e)!==""||t.removeAttribute(e):(!o||4&s||i)&&!l&&(r=r===!0?"":r,t.setAttribute(e,r))}else if(e=e[2]==="-"?e.slice(3):Nx(Hg,a)?a.slice(2):a[2]+e.slice(3),n||r){const l=e.endsWith(pI);e=e.replace(e7,""),n&&Kt.rel(t,e,n,l),r&&Kt.ael(t,e,r,l)}}},X$=/\s/,Fx=t=>t?t.split(X$):[],pI="Capture",e7=new RegExp(pI+"$"),gI=(t,e,n)=>{const r=e.$elm$.nodeType===11&&e.$elm$.host?e.$elm$.host:e.$elm$,i=t&&t.$attrs$||Bx,s=e.$attrs$||Bx;for(const o of jx(Object.keys(i)))o in s||Ux(r,o,i[o],void 0,n,e.$flags$);for(const o of jx(Object.keys(s)))Ux(r,o,i[o],s[o],n,e.$flags$)};function jx(t){return t.includes("ref")?[...t.filter(e=>e!=="ref"),"ref"]:t}var xr=!1,Gb=(t,e,n,r)=>{const i=e.$children$[n];let s,o,a=0;if(i.$text$!==null)s=i.$elm$=Oi.createTextNode(i.$text$);else{if(xr||(xr=i.$tag$==="svg"),s=i.$elm$=Oi.createElementNS(xr?"http://www.w3.org/2000/svg":"http://www.w3.org/1999/xhtml",i.$tag$),xr&&i.$tag$==="foreignObject"&&(xr=!1),gI(null,i,xr),s.getRootNode().querySelector("body"),i.$children$)for(a=0;a<i.$children$.length;++a)o=Gb(t,i,a),o&&s.appendChild(o);i.$tag$==="svg"?xr=!1:s.tagName==="foreignObject"&&(xr=!0)}return s["s-hn"]=Vb,s},Hx=(t,e,n,r,i,s)=>{let o,a=t;for(a.shadowRoot&&a.tagName===Vb&&(a=a.shadowRoot);i<=s;++i)r[i]&&(o=Gb(null,n,i),o&&(r[i].$elm$=o,Mp(a,o,e)))},Kx=(t,e,n)=>{for(let r=e;r<=n;++r){const i=t[r];if(i){const s=i.$elm$;s&&s.remove()}}},Vh=(t,e,n=!1)=>t.$tag$===e.$tag$,od=(t,e,n=!1)=>{const r=e.$elm$=t.$elm$,i=t.$children$,s=e.$children$,o=e.$tag$,a=e.$text$;a===null?(gI(t,e,xr=o==="svg"||o!=="foreignObject"&&xr),i!==null&&s!==null?((l,c,u,d,f=!1)=>{let h,m=0,g=0,w=c.length-1,p=c[0],v=c[w],y=d.length-1,C=d[0],P=d[y];for(;m<=w&&g<=y;)p==null?p=c[++m]:v==null?v=c[--w]:C==null?C=d[++g]:P==null?P=d[--y]:Vh(p,C,f)?(od(p,C,f),p=c[++m],C=d[++g]):Vh(v,P,f)?(od(v,P,f),v=c[--w],P=d[--y]):Vh(p,P,f)?(od(p,P,f),Mp(l,p.$elm$,v.$elm$.nextSibling),p=c[++m],P=d[--y]):Vh(v,C,f)?(od(v,C,f),Mp(l,v.$elm$,p.$elm$),v=c[--w],C=d[++g]):(h=Gb(c&&c[g],u,g),C=d[++g],h&&Mp(p.$elm$.parentNode,h,p.$elm$));m>w?Hx(l,d[y+1]==null?null:d[y+1].$elm$,u,d,g,y):g>y&&Kx(c,m,w)})(r,i,e,s,n):s!==null?(t.$text$!==null&&(r.textContent=""),Hx(r,null,e,s,0,s.length-1)):!n&&H$&&i!==null&&Kx(i,0,i.length-1),xr&&o==="svg"&&(xr=!1)):t.$text$!==a&&(r.data=a)},Mp=(t,e,n)=>t==null?void 0:t.insertBefore(e,n),t7=(t,e,n=!1)=>{const r=t.$hostElement$,i=t.$cmpMeta$,s=t.$vnode$||V0(null,null),o=(a=e)&&a.$tag$===Q$?e:re(null,null,e);var a;if(Vb=r.tagName,n&&o.$attrs$)for(const l of Object.keys(o.$attrs$))r.hasAttribute(l)&&!["key","ref","style","class"].includes(l)&&(o.$attrs$[l]=r[l]);o.$tag$=null,o.$flags$|=4,t.$vnode$=o,o.$elm$=s.$elm$=r.shadowRoot||r,r["s-sc"],1&i.$flags$,od(s,o,n)},mI=(t,e)=>{e&&!t.$onRenderResolve$&&e["s-p"]&&e["s-p"].push(new Promise(n=>t.$onRenderResolve$=n))},Wb=(t,e)=>(t.$flags$|=16,4&t.$flags$?void(t.$flags$|=512):(mI(t,t.$ancestorComponent$),V$(()=>n7(t,e)))),n7=(t,e)=>{const n=t.$hostElement$;t.$cmpMeta$.$tagName$;const r=t.$lazyInstance$;if(!r)throw new Error(`Can't render component <${n.tagName.toLowerCase()} /> with invalid Stencil runtime! Make sure this imported component is compiled with a \`externalRuntime: true\` flag. For more information, please refer to https://stenciljs.com/docs/custom-elements#externalruntime`);return r7(void 0,()=>s7(t,r,e))},r7=(t,e)=>i7(t)?t.then(e).catch(n=>{console.error(n),e()}):e(),i7=t=>t instanceof Promise||t&&t.then&&typeof t.then=="function",s7=async(t,e,n)=>{var r;const i=t.$hostElement$;t.$cmpMeta$.$tagName$;const s=i["s-rc"];n&&Z$(t),t.$cmpMeta$.$tagName$,o7(t,e,i,n),s&&(s.map(o=>o()),i["s-rc"]=void 0);{const o=(r=i["s-p"])!=null?r:[],a=()=>a7(t);o.length===0?a():(Promise.all(o).then(a),t.$flags$|=4,o.length=0)}},o7=(t,e,n,r)=>{try{e=e.render(),t.$flags$&=-17,t.$flags$|=2,t7(t,e,r)}catch(i){Qa(i,t.$hostElement$)}return null},a7=t=>{t.$cmpMeta$.$tagName$;const e=t.$hostElement$,n=()=>{},r=t.$lazyInstance$,i=t.$ancestorComponent$;64&t.$flags$?n():(t.$flags$|=64,vI(e),qb(r,"componentDidLoad"),t.$onReadyResolve$(e),i||yI()),t.$onRenderResolve$&&(t.$onRenderResolve$(),t.$onRenderResolve$=void 0),512&t.$flags$&&Kb(()=>Wb(t,!1)),t.$flags$&=-517},yI=t=>{vI(Oi.documentElement),Kb(()=>fI(Hg,"appload",{detail:{namespace:"sdk-install-modal-web"}}))},qb=(t,e,n)=>{if(t&&t[e])try{return t[e](n)}catch(r){Qa(r)}},vI=t=>{var e;return t.classList.add((e=F$)!=null?e:"hydrated")},l7=(t,e,n,r)=>{const i=_o(t);if(!i)throw new Error(`Couldn't find host element for "${r.$tagName$}" as it is unknown to this Stencil runtime. This usually happens when integrating a 3rd party Stencil component with another Stencil component or application. Please reach out to the maintainers of the 3rd party Stencil component or report this on the Stencil Discord server (https://chat.stenciljs.com) or comment on this similar [GitHub issue](https://github.com/ionic-team/stencil/issues/5457).`);const s=i.$hostElement$,o=i.$instanceValues$.get(e),a=i.$flags$,l=i.$lazyInstance$;var c,u;c=n,u=r.$members$[e][0],n=c==null||zb(c)?c:4&u?c!=="false"&&(c===""||!!c):1&u?String(c):c;const d=Number.isNaN(o)&&Number.isNaN(n);if((!(8&a)||o===void 0)&&n!==o&&!d&&(i.$instanceValues$.set(e,n),l)){if(r.$watchers$&&128&a){const f=r.$watchers$[e];f&&f.map(h=>{try{l[h](n,o,e)}catch(m){Qa(m,s)}})}(18&a)==2&&Wb(i,!1)}},wI=(t,e,n)=>{var r,i;const s=t.prototype;if(e.$members$||e.$watchers$||t.watchers){t.watchers&&!e.$watchers$&&(e.$watchers$=t.watchers);const o=Object.entries((r=e.$members$)!=null?r:{});if(o.map(([a,[l]])=>{(31&l||2&n&&32&l)&&Object.defineProperty(s,a,{get(){return c=a,_o(this).$instanceValues$.get(c);var c},set(c){l7(this,a,c,e)},configurable:!0,enumerable:!0})}),1&n){const a=new Map;s.attributeChangedCallback=function(l,c,u){Kt.jmp(()=>{var d;const f=a.get(l);if(this.hasOwnProperty(f))u=this[f],delete this[f];else{if(s.hasOwnProperty(f)&&typeof this[f]=="number"&&this[f]==u)return;if(f==null){const h=_o(this),m=h==null?void 0:h.$flags$;if(m&&!(8&m)&&128&m&&u!==c){const g=h.$lazyInstance$,w=(d=e.$watchers$)==null?void 0:d[l];w==null||w.forEach(p=>{g[p]!=null&&g[p].call(g,u,c,l)})}return}}this[f]=(u!==null||typeof this[f]!="boolean")&&u})},t.observedAttributes=Array.from(new Set([...Object.keys((i=e.$watchers$)!=null?i:{}),...o.filter(([l,c])=>15&c[0]).map(([l,c])=>{const u=c[1]||l;return a.set(u,l),u})]))}}return t},c7=async(t,e,n,r)=>{let i;if(!(32&e.$flags$)){if(e.$flags$|=32,n.$lazyBundleId$){const a=((l,c,u)=>{const d=l.$tagName$.replace(/-/g,"_"),f=l.$lazyBundleId$;if(!f)return;const h=Cy.get(f);if(h)return h[d];{const m=g=>(Cy.set(f,g),g[d]);if(f==="mm-install-modal_3")return Promise.resolve().then(function(){return x7}).then(m,Qa)}return H6(()=>import(`./${f}.entry.js`),void 0,import.meta.url).then(m=>(Cy.set(f,m),m[d]),Qa)})(n);if(a&&"then"in a?i=await a:i=a,!i)throw new Error(`Constructor for "${n.$tagName$}#${e.$modeName$}" was not found`);i.isProxied||(n.$watchers$=i.watchers,wI(i,n,2),i.isProxied=!0),n.$tagName$,e.$flags$|=8;try{new i(e)}catch(l){Qa(l)}e.$flags$&=-9,e.$flags$|=128,Gw(e.$lazyInstance$)}else{i=t.constructor;const a=t.localName;customElements.whenDefined(a).then(()=>e.$flags$|=128)}if(i&&i.style){let a;typeof i.style=="string"&&(a=i.style);const l=hI(n);Np.has(l)||(n.$tagName$,((c,u,d)=>{let f=Np.get(c);lI&&d?(f=f||new CSSStyleSheet,typeof f=="string"?f=u:f.replaceSync(u)):f=u,Np.set(c,f)})(l,a,!!(1&n.$flags$)))}}const s=e.$ancestorComponent$,o=()=>Wb(e,!0);s&&s["s-rc"]?s["s-rc"].push(o):o()},Gw=t=>{qb(t,"connectedCallback")},zx=t=>{qb(t,"disconnectedCallback")},u7=(t,e={})=>{var n;const r=[],i=e.exclude||[],s=Hg.customElements,o=Oi.head,a=o.querySelector("meta[charset]"),l=Oi.createElement("style"),c=[];let u,d=!0;Object.assign(Kt,e),Kt.$resourcesUrl$=new URL(e.resourcesUrl||"./",Oi.baseURI).href;let f=!1;if(t.map(h=>{h[1].map(m=>{var g;const w={$flags$:m[0],$tagName$:m[1],$members$:m[2],$listeners$:m[3]};4&w.$flags$&&(f=!0),w.$members$=m[2],w.$watchers$=(g=m[4])!=null?g:{};const p=w.$tagName$,v=class extends HTMLElement{constructor(y){if(super(y),this.hasRegisteredEventListeners=!1,((C,P)=>{const L={$flags$:0,$hostElement$:C,$cmpMeta$:P,$instanceValues$:new Map};L.$onReadyPromise$=new Promise(j=>L.$onReadyResolve$=j),C["s-p"]=[],C["s-rc"]=[],jb.set(C,L)})(y=this,w),1&w.$flags$)if(y.shadowRoot){if(y.shadowRoot.mode!=="open")throw new Error(`Unable to re-use existing shadow root for ${w.$tagName$}! Mode is set to ${y.shadowRoot.mode} but Stencil only supports open shadow roots.`)}else y.attachShadow({mode:"open"})}connectedCallback(){_o(this),this.hasRegisteredEventListeners||(this.hasRegisteredEventListeners=!0),u&&(clearTimeout(u),u=null),d?c.push(this):Kt.jmp(()=>(y=>{if(!(1&Kt.$flags$)){const C=_o(y),P=C.$cmpMeta$;if(P.$tagName$,1&C.$flags$)C!=null&&C.$lazyInstance$?Gw(C.$lazyInstance$):C!=null&&C.$onReadyPromise$&&C.$onReadyPromise$.then(()=>Gw(C.$lazyInstance$));else{C.$flags$|=1;{let L=y;for(;L=L.parentNode||L.host;)if(L["s-p"]){mI(C,C.$ancestorComponent$=L);break}}P.$members$&&Object.entries(P.$members$).map(([L,[j]])=>{if(31&j&&y.hasOwnProperty(L)){const D=y[L];delete y[L],y[L]=D}}),c7(y,C,P)}}})(this))}disconnectedCallback(){Kt.jmp(()=>(async y=>{if(!(1&Kt.$flags$)){const C=_o(y);C!=null&&C.$lazyInstance$?zx(C.$lazyInstance$):C!=null&&C.$onReadyPromise$&&C.$onReadyPromise$.then(()=>zx(C.$lazyInstance$))}})(this))}componentOnReady(){return _o(this).$onReadyPromise$}};w.$lazyBundleId$=h[0],i.includes(p)||s.get(p)||(r.push(p),s.define(p,wI(v,w,1)))})}),r.length>0&&(f&&(l.textContent+=aI),l.textContent+=r.sort()+"{visibility:hidden}.hydrated{visibility:inherit}",l.innerHTML.length)){l.setAttribute("data-styles","");const h=(n=Kt.$nonce$)!=null?n:uI(Oi);h!=null&&l.setAttribute("nonce",h),o.insertBefore(l,a?a.nextSibling:o.firstChild)}d=!1,c.length?c.map(h=>h.connectedCallback()):Kt.jmp(()=>u=setTimeout(yI,30))};(function(){if(typeof window<"u"&&window.Reflect!==void 0&&window.customElements!==void 0){var t=HTMLElement;window.HTMLElement=function(){return Reflect.construct(t,[],this.constructor)},HTMLElement.prototype=t.prototype,HTMLElement.prototype.constructor=HTMLElement,Object.setPrototypeOf(HTMLElement,t)}})();var d7=Object.freeze({__proto__:null,defineCustomElements:async(t,e)=>{if(typeof window<"u")return await void 0,u7([["mm-install-modal_3",[[1,"mm-install-modal",{link:[1],sdkVersion:[1,"sdk-version"],preferDesktop:[4,"prefer-desktop"],tab:[32],isDefaultTab:[32],translationsLoaded:[32]},null,{preferDesktop:["updatePreferDesktop"]}],[1,"mm-pending-modal",{displayOTP:[4,"display-o-t-p"],sdkVersion:[1,"sdk-version"],otpCode:[1,"otp-code"],translationsLoaded:[32]}],[1,"mm-select-modal",{link:[1],sdkVersion:[1,"sdk-version"],preferDesktop:[4,"prefer-desktop"],tab:[32],isDefaultTab:[32],translationsLoaded:[32]},null,{preferDesktop:["updatePreferDesktop"]}]]]],e)},setNonce:t=>Kt.$nonce$=t});const f7={fontFamily:"Roboto, sans-serif"},Qb=({className:t},e)=>re("div",{style:f7,class:t},e),ky=({Icon:t,text:e})=>re("div",{class:"flexContainer",style:{padding:"6",flexDirection:"row"}},re("div",{class:"flexItem1"},re(t,null)),re("div",{class:"flexItem11"},re("span",{style:{lineHeight:"2",color:"black"}},e))),h7=()=>re("svg",{width:"20",height:"18",viewBox:"0 0 20 18",fill:"none",xmlns:"http://www.w3.org/2000/svg"},re("path",{d:"M20.0002 7.9702V10.0302C20.0002 10.5802 19.5602 11.0302 19.0002 11.0502H17.0402C15.9602 11.0502 14.9702 10.2602 14.8802 9.1802C14.8202 8.5502 15.0602 7.9602 15.4802 7.5502C15.8502 7.1702 16.3602 6.9502 16.9202 6.9502H19.0002C19.5602 6.9702 20.0002 7.4202 20.0002 7.9702Z",fill:"#037DD6"}),re("path",{d:"M18.47 12.55H17.04C15.14 12.55 13.54 11.12 13.38 9.3C13.29 8.26 13.67 7.22 14.43 6.48C15.07 5.82 15.96 5.45 16.92 5.45H18.47C18.76 5.45 19 5.21 18.97 4.92C18.75 2.49 17.14 0.83 14.75 0.55C14.51 0.51 14.26 0.5 14 0.5H5C4.72 0.5 4.45 0.52 4.19 0.56C1.64 0.88 0 2.78 0 5.5V12.5C0 15.26 2.24 17.5 5 17.5H14C16.8 17.5 18.73 15.75 18.97 13.08C19 12.79 18.76 12.55 18.47 12.55ZM11 6.75H5C4.59 6.75 4.25 6.41 4.25 6C4.25 5.59 4.59 5.25 5 5.25H11C11.41 5.25 11.75 5.59 11.75 6C11.75 6.41 11.41 6.75 11 6.75Z",fill:"#037DD6"})),p7=()=>re("svg",{width:"20",height:"18",viewBox:"0 0 20 18",fill:"none",xmlns:"http://www.w3.org/2000/svg"},re("path",{d:"M14.44 0.0999756C12.63 0.0999756 11.01 0.979976 10 2.32998C8.99 0.979976 7.37 0.0999756 5.56 0.0999756C2.49 0.0999756 0 2.59998 0 5.68998C0 6.87998 0.19 7.97998 0.52 8.99998C2.1 14 6.97 16.99 9.38 17.81C9.72 17.93 10.28 17.93 10.62 17.81C13.03 16.99 17.9 14 19.48 8.99998C19.81 7.97998 20 6.87998 20 5.68998C20 2.59998 17.51 0.0999756 14.44 0.0999756Z",fill:"#037DD6"})),g7=()=>re("svg",{width:"20",height:"20",viewBox:"0 0 20 20",fill:"none",xmlns:"http://www.w3.org/2000/svg"},re("path",{d:"M16.28 7.53V6.28C16.28 3.58 15.63 0 10 0C4.37 0 3.72 3.58 3.72 6.28V7.53C0.92 7.88 0 9.3 0 12.79V14.65C0 18.75 1.25 20 5.35 20H14.65C18.75 20 20 18.75 20 14.65V12.79C20 9.3 19.08 7.88 16.28 7.53ZM10 16.74C8.33 16.74 6.98 15.38 6.98 13.72C6.98 12.05 8.34 10.7 10 10.7C11.66 10.7 13.02 12.06 13.02 13.72C13.02 15.39 11.67 16.74 10 16.74ZM5.35 7.44C5.27 7.44 5.2 7.44 5.12 7.44V6.28C5.12 3.35 5.95 1.4 10 1.4C14.05 1.4 14.88 3.35 14.88 6.28V7.45C14.8 7.45 14.73 7.45 14.65 7.45H5.35V7.44Z",fill:"#037DD6"})),m7=()=>re("svg",{width:"20",height:"20",viewBox:"0 0 24 24",fill:"none",xmlns:"http://www.w3.org/2000/svg"},re("path",{d:"M16.4405 8.8999C20.0405 9.2099 21.5105 11.0599 21.5105 15.1099V15.2399C21.5105 19.7099 19.7205 21.4999 15.2505 21.4999H8.74047C4.27047 21.4999 2.48047 19.7099 2.48047 15.2399V15.1099C2.48047 11.0899 3.93047 9.2399 7.47047 8.9099",stroke:"white","stroke-width":"1.5","stroke-linecap":"round","stroke-linejoin":"round"}),re("path",{d:"M12 2V14.88",stroke:"white","stroke-width":"1.5","stroke-linecap":"round","stroke-linejoin":"round"}),re("path",{d:"M15.3504 12.6499L12.0004 15.9999L8.65039 12.6499",stroke:"white","stroke-width":"1.5","stroke-linecap":"round","stroke-linejoin":"round"}));function Yb({version:t}){return re("div",{style:{textAlign:"center",color:"#BBC0C5",fontSize:"12"}},"SDK Version ",t?`v${t}`:"unknown")}const Jb=()=>re("svg",{width:"14",height:"14",viewBox:"0 0 16 16",fill:"none",xmlns:"http://www.w3.org/2000/svg"},re("rect",{width:"16",height:"16",fill:"white"}),re("path",{"fill-rule":"evenodd","clip-rule":"evenodd",d:"M2.40554 2.40554C2.94627 1.86482 3.82296 1.86482 4.36369 2.40554L8 6.04186L11.6363 2.40554C12.177 1.86482 13.0537 1.86482 13.5945 2.40554C14.1352 2.94627 14.1352 3.82296 13.5945 4.36369L9.95814 8L13.5945 11.6363C14.1352 12.177 14.1352 13.0537 13.5945 13.5945C13.0537 14.1352 12.177 14.1352 11.6363 13.5945L8 9.95814L4.36369 13.5945C3.82296 14.1352 2.94627 14.1352 2.40554 13.5945C1.86482 13.0537 1.86482 12.177 2.40554 11.6363L6.04186 8L2.40554 4.36369C1.86482 3.82296 1.86482 2.94627 2.40554 2.40554Z",fill:"#BBC0C5"})),Zb=()=>re("svg",{width:"120",xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 127 63"},re("path",{fill:"currentColor",d:"M71.554 48.607v13.81h-7.072v-9.568l-8.059.945c-1.77.205-2.548.79-2.548 1.864 0 1.575 1.478 2.239 4.648 2.239 1.932 0 4.073-.29 5.963-.79l-3.66 5.225c-1.479.332-2.92.496-4.44.496-6.414 0-10.074-2.57-10.074-7.132 0-4.023 2.877-6.136 9.416-6.884l8.638-1.012c-.467-2.532-2.362-3.633-6.13-3.633-3.537 0-7.443.912-10.937 2.613l1.111-6.18c3.248-1.369 6.95-2.074 10.69-2.074 8.226 0 12.461 3.444 12.461 10.075l-.008.005ZM7.938 31.315.208 62.416h7.73l3.836-15.628 6.65 8.039h8.06l6.65-8.039 3.836 15.628h7.73l-7.73-31.105-14.518 17.388L7.934 31.311l.004.004ZM36.97.21 22.452 17.598 7.938.21.208 31.315h7.73l3.836-15.628 6.65 8.039h8.06l6.65-8.039 3.836 15.628h7.73L36.97.21Zm53.17 48.107-6.25-.912c-1.562-.247-2.178-.747-2.178-1.617 0-1.41 1.52-2.032 4.647-2.032 3.62 0 6.868.747 10.283 2.364l-.862-6.094c-2.757-.995-5.922-1.491-9.212-1.491-7.688 0-11.886 2.696-11.886 7.547 0 3.776 2.303 5.889 7.196 6.636l6.335.954c1.603.248 2.261.87 2.261 1.865 0 1.41-1.478 2.074-4.481 2.074-3.948 0-8.225-.953-11.72-2.654l.7 6.094c3.003 1.122 6.91 1.785 10.57 1.785 7.896 0 12.007-2.78 12.007-7.715 0-3.94-2.303-6.057-7.4-6.8l-.01-.004ZM100.3 34.09v28.325h7.071V34.091H100.3Zm15.334 15.595 9.833-10.744h-8.8l-9.296 11.114 9.912 12.356h8.925l-10.574-12.73v.004Zm-16.321-25.09c0 4.56 3.66 7.13 10.074 7.13 1.52 0 2.961-.167 4.44-.495l3.66-5.225c-1.89.496-4.031.79-5.963.79-3.166 0-4.648-.664-4.648-2.239 0-1.079.783-1.659 2.549-1.864l8.058-.945v9.567h7.072v-13.81c0-6.635-4.236-10.075-12.461-10.075-3.744 0-7.442.705-10.691 2.075l-1.112 6.178c3.495-1.701 7.401-2.613 10.937-2.613 3.769 0 5.664 1.1 6.13 3.633l-8.637 1.013c-6.539.747-9.417 2.86-9.417 6.883l.009-.004Zm-19.779-1.492c0 5.725 3.29 8.627 9.787 8.627 2.59 0 4.732-.416 6.785-1.37l.903-6.261c-1.974 1.2-3.99 1.822-6.005 1.822-3.044 0-4.402-1.243-4.402-4.023v-8.295h10.732V7.84H86.601V2.948l-13.448 7.174v3.482h6.372V23.1l.008.004Zm-6.95-2.612v1.411H53.47c.862 2.873 3.423 4.187 7.97 4.187 3.62 0 6.993-.747 9.992-2.196l-.862 6.056c-2.757 1.16-6.251 1.785-9.829 1.785-9.5 0-14.68-4.23-14.68-12.066 0-7.838 5.264-12.235 13.406-12.235s13.119 4.771 13.119 13.062l-.005-.004ZM53.378 17.09h12.086c-.637-2.751-2.732-4.188-6.08-4.188-3.349 0-5.335 1.399-6.006 4.188Z"}));function na(t,e){return t.toString(2).padStart(e,"0")}function Vx(t,e){const n=t%e;return n>=0?n:e+n}function nr(t,e){return new Array(t).fill(e)}function Gx(...t){let e=0;for(const r of t)e=Math.max(e,r.length);const n=[];for(let r=0;r<e;r++)for(const i of t)r>=i.length||n.push(i[r]);return new Uint8Array(n)}function Wx(t,e,n){if(n<0||n+e.length>t.length)return!1;for(let r=0;r<e.length;r++)if(e[r]!==t[n+r])return!1;return!0}function qx(t){return{has:e=>t.includes(e),decode:e=>{if(!Array.isArray(e)||e.length&&typeof e[0]!="string")throw new Error("alphabet.decode input should be array of strings");return e.map(n=>{if(typeof n!="string")throw new Error(`alphabet.decode: not string element=${n}`);const r=t.indexOf(n);if(r===-1)throw new Error(`Unknown letter: "${n}". Allowed: ${t}`);return r})},encode:e=>{if(!Array.isArray(e)||e.length&&typeof e[0]!="number")throw new Error("alphabet.encode input should be an array of numbers");return e.map(n=>{if(function(r){if(!Number.isSafeInteger(r))throw new Error(`Wrong integer: ${r}`)}(n),n<0||n>=t.length)throw new Error(`Digit index outside alphabet: ${n} (alphabet: ${t.length})`);return t[n]})}}}class Xn{static size(e,n){if(typeof e=="number"&&(e={height:e,width:e}),!Number.isSafeInteger(e.height)&&e.height!==1/0)throw new Error(`Bitmap: wrong height=${e.height} (${typeof e.height})`);if(!Number.isSafeInteger(e.width)&&e.width!==1/0)throw new Error(`Bitmap: wrong width=${e.width} (${typeof e.width})`);return n!==void 0&&(e={width:Math.min(e.width,n.width),height:Math.min(e.height,n.height)}),e}static fromString(e){const n=(e=e.replace(/^\n+/g,"").replace(/\n+$/g,"")).split(`
`),r=n.length,i=new Array(r);let s;for(const o of n){const a=o.split("").map(l=>{if(l==="X")return!0;if(l===" ")return!1;if(l!=="?")throw new Error(`Bitmap.fromString: unknown symbol=${l}`)});if(s&&a.length!==s)throw new Error(`Bitmap.fromString different row sizes: width=${s} cur=${a.length}`);s=a.length,i.push(a)}return s||(s=0),new Xn({height:r,width:s},i)}constructor(e,n){const{height:r,width:i}=Xn.size(e);this.data=n||Array.from({length:r},()=>nr(i,void 0)),this.height=r,this.width=i}point(e){return this.data[e.y][e.x]}isInside(e){return 0<=e.x&&e.x<this.width&&0<=e.y&&e.y<this.height}size(e){if(!e)return{height:this.height,width:this.width};const{x:n,y:r}=this.xy(e);return{height:this.height-r,width:this.width-n}}xy(e){if(typeof e=="number"&&(e={x:e,y:e}),!Number.isSafeInteger(e.x))throw new Error(`Bitmap: wrong x=${e.x}`);if(!Number.isSafeInteger(e.y))throw new Error(`Bitmap: wrong y=${e.y}`);return e.x=Vx(e.x,this.width),e.y=Vx(e.y,this.height),e}rect(e,n,r){const{x:i,y:s}=this.xy(e),{height:o,width:a}=Xn.size(n,this.size({x:i,y:s}));for(let l=0;l<o;l++)for(let c=0;c<a;c++)this.data[s+l][i+c]=typeof r=="function"?r({x:c,y:l},this.data[s+l][i+c]):r;return this}rectRead(e,n,r){return this.rect(e,n,(i,s)=>(r(i,s),s))}hLine(e,n,r){return this.rect(e,{width:n,height:1},r)}vLine(e,n,r){return this.rect(e,{width:1,height:n},r)}border(e=2,n){const r=this.height+2*e,i=this.width+2*e,s=nr(e,n),o=Array.from({length:e},()=>nr(i,n));return new Xn({height:r,width:i},[...o,...this.data.map(a=>[...s,...a,...s]),...o])}embed(e,n){return this.rect(e,n.size(),({x:r,y:i})=>n.data[i][r])}rectSlice(e,n=this.size()){const r=new Xn(Xn.size(n,this.size(this.xy(e))));return this.rect(e,n,({x:i,y:s},o)=>r.data[s][i]=o),r}inverse(){const{height:e,width:n}=this;return new Xn({height:n,width:e}).rect({x:0,y:0},1/0,({x:r,y:i})=>this.data[r][i])}scale(e){if(!Number.isSafeInteger(e)||e>1024)throw new Error(`Wrong scale factor: ${e}`);const{height:n,width:r}=this;return new Xn({height:e*n,width:e*r}).rect({x:0,y:0},1/0,({x:i,y:s})=>this.data[Math.floor(s/e)][Math.floor(i/e)])}clone(){return new Xn(this.size()).rect({x:0,y:0},this.size(),({x:e,y:n})=>this.data[n][e])}assertDrawn(){this.rectRead(0,1/0,(e,n)=>{if(typeof n!="boolean")throw new Error("Invalid color type="+typeof n)})}toString(){return this.data.map(e=>e.map(n=>n===void 0?"?":n?"X":" ").join("")).join(`
`)}toASCII(){const{height:e,width:n,data:r}=this;let i="";for(let s=0;s<e;s+=2){for(let o=0;o<n;o++){const a=r[s][o],l=s+1>=e||r[s+1][o];a||l?!a&&l?i+="":a&&!l?i+="":a&&l&&(i+=" "):i+=""}i+=`
`}return i}toTerm(){const e="\x1B[0m",n=`\x1B[1;47m  ${e}`,r=`\x1B[40m  ${e}`;return this.data.map(i=>i.map(s=>s?r:n).join("")).join(`
`)}toSVG(){let e=`<svg xmlns:svg="http://www.w3.org/2000/svg" viewBox="0 0 ${this.width} ${this.height}" version="1.1" xmlns="http://www.w3.org/2000/svg">`;return this.rectRead(0,1/0,({x:n,y:r},i)=>{i&&(e+=`<rect x="${n}" y="${r}" width="1" height="1" />`)}),e+="</svg>",e}toGIF(){const e=a=>[255&a,a>>>8&255],n=[...e(this.width),...e(this.height)],r=[];this.rectRead(0,1/0,(a,l)=>r.push(+(l===!0)));const i=126,s=[71,73,70,56,55,97,...n,246,0,0,255,255,255,...nr(381,0),44,0,0,0,0,...n,0,7],o=Math.floor(r.length/i);for(let a=0;a<o;a++)s.push(127,128,...r.slice(i*a,i*(a+1)).map(l=>+l));return s.push(r.length%i+1,128,...r.slice(o*i).map(a=>+a)),s.push(1,129,0,59),new Uint8Array(s)}toImage(e=!1){const{height:n,width:r}=this.size(),i=new Uint8Array(n*r*(e?3:4));let s=0;for(let o=0;o<n;o++)for(let a=0;a<r;a++){const l=this.data[o][a]?0:255;i[s++]=l,i[s++]=l,i[s++]=l,e||(i[s++]=255)}return{height:n,width:r,data:i}}}const Qx=["low","medium","quartile","high"],Yx=["numeric","alphanumeric","byte","kanji","eci"],y7=[26,44,70,100,134,172,196,242,292,346,404,466,532,581,655,733,815,901,991,1085,1156,1258,1364,1474,1588,1706,1828,1921,2051,2185,2323,2465,2611,2761,2876,3034,3196,3362,3532,3706],v7={low:[7,10,15,20,26,18,20,24,30,18,20,24,26,30,22,24,28,30,28,28,28,28,30,30,26,28,30,30,30,30,30,30,30,30,30,30,30,30,30,30],medium:[10,16,26,18,24,16,18,22,22,26,30,22,22,24,24,28,28,26,26,26,26,28,28,28,28,28,28,28,28,28,28,28,28,28,28,28,28,28,28,28],quartile:[13,22,18,26,18,24,18,22,20,24,28,26,24,20,30,24,28,28,26,30,28,30,30,30,30,28,30,30,30,30,30,30,30,30,30,30,30,30,30,30],high:[17,28,22,16,22,28,26,26,24,28,24,28,22,24,24,30,28,28,26,28,30,24,30,30,30,30,30,30,30,30,30,30,30,30,30,30,30,30,30,30]},w7={low:[1,1,1,1,1,2,2,2,2,4,4,4,4,4,6,6,6,6,7,8,8,9,9,10,12,12,12,13,14,15,16,17,18,19,19,20,21,22,24,25],medium:[1,1,1,2,2,4,4,4,5,5,5,8,9,9,10,10,11,13,14,16,17,17,18,20,21,23,25,26,28,29,31,33,35,37,38,40,43,45,47,49],quartile:[1,1,2,2,4,4,6,6,8,8,8,10,12,16,12,17,16,18,21,20,23,23,25,27,29,34,34,35,38,40,43,45,48,51,53,56,59,62,65,68],high:[1,1,2,4,4,4,5,6,8,8,11,11,16,16,18,16,19,21,25,25,25,34,30,32,35,37,40,42,45,48,51,54,57,60,63,66,70,74,77,81]},cn={size:{encode:t=>21+4*(t-1),decode:t=>(t-17)/4},sizeType:t=>Math.floor((t+7)/17),alignmentPatterns(t){if(t===1)return[];const e=cn.size.encode(t)-6-1,n=e-6,r=Math.ceil(n/28);let i=Math.floor(n/r);i%2?i+=1:n%r*2>=r&&(i+=2);const s=[6];for(let o=1;o<r;o++)s.push(e-(r-o)*i);return s.push(e),s},ECCode:{low:1,medium:0,quartile:3,high:2},formatMask:21522,formatBits(t,e){const n=cn.ECCode[t]<<3|e;let r=n;for(let i=0;i<10;i++)r=r<<1^1335*(r>>9);return(n<<10|r)^cn.formatMask},versionBits(t){let e=t;for(let n=0;n<12;n++)e=e<<1^7973*(e>>11);return t<<12|e},alphabet:{numeric:qx("0123456789"),alphanumerc:qx("0123456789ABCDEFGHIJKLMNOPQRSTUVWXYZ $%*+-./:")},lengthBits:(t,e)=>({numeric:[10,12,14],alphanumeric:[9,11,13],byte:[8,16,16],kanji:[8,10,12],eci:[0,0,0]})[e][cn.sizeType(t)],modeBits:{numeric:"0001",alphanumeric:"0010",byte:"0100",kanji:"1000",eci:"0111"},capacity(t,e){const n=y7[t-1],r=v7[e][t-1],i=w7[e][t-1],s=Math.floor(n/i)-r,o=i-n%i;return{words:r,numBlocks:i,shortBlocks:o,blockLen:s,capacity:8*(n-r*i),total:(r+s)*i+i-o}}},Ww=[(t,e)=>(t+e)%2==0,(t,e)=>e%2==0,(t,e)=>t%3==0,(t,e)=>(t+e)%3==0,(t,e)=>(Math.floor(e/2)+Math.floor(t/3))%2==0,(t,e)=>t*e%2+t*e%3==0,(t,e)=>(t*e%2+t*e%3)%2==0,(t,e)=>((t+e)%2+t*e%3)%2==0],we={tables:(t=>{const e=nr(256,0),n=nr(256,0);for(let r=0,i=1;r<256;r++)e[r]=i,n[i]=r,i<<=1,256&i&&(i^=285);return{exp:e,log:n}})(),exp:t=>we.tables.exp[t],log(t){if(t===0)throw new Error(`GF.log: wrong arg=${t}`);return we.tables.log[t]%255},mul:(t,e)=>t===0||e===0?0:we.tables.exp[(we.tables.log[t]+we.tables.log[e])%255],add:(t,e)=>t^e,pow:(t,e)=>we.tables.exp[we.tables.log[t]*e%255],inv(t){if(t===0)throw new Error(`GF.inverse: wrong arg=${t}`);return we.tables.exp[255-we.tables.log[t]]},polynomial(t){if(t.length==0)throw new Error("GF.polymomial: wrong length");if(t[0]!==0)return t;let e=0;for(;e<t.length-1&&t[e]==0;e++);return t.slice(e)},monomial(t,e){if(t<0)throw new Error(`GF.monomial: wrong degree=${t}`);if(e==0)return[0];let n=nr(t+1,0);return n[0]=e,we.polynomial(n)},degree:t=>t.length-1,coefficient:(t,e)=>t[we.degree(t)-e],mulPoly(t,e){if(t[0]===0||e[0]===0)return[0];const n=nr(t.length+e.length-1,0);for(let r=0;r<t.length;r++)for(let i=0;i<e.length;i++)n[r+i]=we.add(n[r+i],we.mul(t[r],e[i]));return we.polynomial(n)},mulPolyScalar(t,e){if(e==0)return[0];if(e==1)return t;const n=nr(t.length,0);for(let r=0;r<t.length;r++)n[r]=we.mul(t[r],e);return we.polynomial(n)},mulPolyMonomial(t,e,n){if(e<0)throw new Error("GF.mulPolyMonomial: wrong degree");if(n==0)return[0];const r=nr(t.length+e,0);for(let i=0;i<t.length;i++)r[i]=we.mul(t[i],n);return we.polynomial(r)},addPoly(t,e){if(t[0]===0)return e;if(e[0]===0)return t;let n=t,r=e;n.length>r.length&&([n,r]=[r,n]);let i=nr(r.length,0),s=r.length-n.length,o=r.slice(0,s);for(let a=0;a<o.length;a++)i[a]=o[a];for(let a=s;a<r.length;a++)i[a]=we.add(n[a-s],r[a]);return we.polynomial(i)},remainderPoly(t,e){const n=Array.from(t);for(let r=0;r<t.length-e.length+1;r++){const i=n[r];if(i!==0)for(let s=1;s<e.length;s++)e[s]!==0&&(n[r+s]=we.add(n[r+s],we.mul(e[s],i)))}return n.slice(t.length-e.length+1,n.length)},divisorPoly(t){let e=[1];for(let n=0;n<t;n++)e=we.mulPoly(e,[1,we.pow(2,n)]);return e},evalPoly(t,e){if(e==0)return we.coefficient(t,0);let n=t[0];for(let r=1;r<t.length;r++)n=we.add(we.mul(e,n),t[r]);return n},euclidian(t,e,n){we.degree(t)<we.degree(e)&&([t,e]=[e,t]);let r=t,i=e,s=[0],o=[1];for(;2*we.degree(i)>=n;){let c=r,u=s;if(r=i,s=o,r[0]===0)throw new Error("rLast[0] === 0");i=c;let d=[0];const f=we.inv(r[0]);for(;we.degree(i)>=we.degree(r)&&i[0]!==0;){const h=we.degree(i)-we.degree(r),m=we.mul(i[0],f);d=we.addPoly(d,we.monomial(h,m)),i=we.addPoly(i,we.mulPolyMonomial(r,h,m))}if(d=we.mulPoly(d,s),o=we.addPoly(d,u),we.degree(i)>=we.degree(r))throw new Error(`Division failed r: ${i}, rLast: ${r}`)}const a=we.coefficient(o,0);if(a==0)throw new Error("sigmaTilde(0) was zero");const l=we.inv(a);return[we.mulPolyScalar(o,l),we.mulPolyScalar(i,l)]}};function b7(t,e){const{words:n,shortBlocks:r,numBlocks:i,blockLen:s,total:o}=cn.capacity(t,e),a=(l=n,{encode(c){const u=we.divisorPoly(l),d=Array.from(c);return d.push(...u.slice(0,-1).fill(0)),Uint8Array.from(we.remainderPoly(d,u))},decode(c){const u=c.slice(),d=we.polynomial(Array.from(c));let f=nr(l,0),h=!1;for(let y=0;y<l;y++){const C=we.evalPoly(d,we.exp(y));f[f.length-1-y]=C,C!==0&&(h=!0)}if(!h)return u;f=we.polynomial(f);const m=we.monomial(l,1),[g,w]=we.euclidian(m,f,l),p=nr(we.degree(g),0);let v=0;for(let y=1;y<256&&v<p.length;y++)we.evalPoly(g,y)===0&&(p[v++]=we.inv(y));if(v!==p.length)throw new Error("RS.decode: wrong errors number");for(let y=0;y<p.length;y++){const C=u.length-1-we.log(p[y]);if(C<0)throw new Error("RS.decode: wrong error location");const P=we.inv(p[y]);let L=1;for(let j=0;j<p.length;j++)y!==j&&(L=we.mul(L,we.add(1,we.mul(p[j],P))));u[C]=we.add(u[C],we.mul(we.evalPoly(w,P),we.inv(L)))}return u}});var l;return{encode(c){const u=[],d=[];for(let g=0;g<i;g++){const w=s+(g<r?0:1);u.push(c.subarray(0,w)),d.push(a.encode(c.subarray(0,w))),c=c.subarray(w)}const f=Gx(...u),h=Gx(...d),m=new Uint8Array(f.length+h.length);return m.set(f),m.set(h,f.length),m},decode(c){if(c.length!==o)throw new Error(`interleave.decode: len(data)=${c.length}, total=${o}`);const u=[];for(let h=0;h<i;h++){const m=h<r;u.push(new Uint8Array(n+s+(m?0:1)))}let d=0;for(let h=0;h<s;h++)for(let m=0;m<i;m++)u[m][h]=c[d++];for(let h=r;h<i;h++)u[h][s]=c[d++];for(let h=s;h<s+n;h++)for(let m=0;m<i;m++){const g=m<r;u[m][h+(g?0:1)]=c[d++]}const f=[];for(const h of u)f.push(...Array.from(a.decode(h)).slice(0,-n));return Uint8Array.from(f)}}}function Jx(t,e,n,r){let i="",s=n.length;if(r==="numeric"){const d=cn.alphabet.numeric.decode(n.split("")),f=d.length;for(let h=0;h<f-2;h+=3)i+=na(100*d[h]+10*d[h+1]+d[h+2],10);f%3==1?i+=na(d[f-1],4):f%3==2&&(i+=na(10*d[f-2]+d[f-1],7))}else if(r==="alphanumeric"){const d=cn.alphabet.alphanumerc.decode(n.split("")),f=d.length;for(let h=0;h<f-1;h+=2)i+=na(45*d[h]+d[h+1],11);f%2==1&&(i+=na(d[f-1],6))}else{if(r!=="byte")throw new Error("encode: unsupported type");{const d=function(f){if(typeof f!="string")throw new Error("utf8ToBytes expected string, got "+typeof f);return new Uint8Array(new TextEncoder().encode(f))}(n);s=d.length,i=Array.from(d).map(f=>na(f,8)).join("")}}const{capacity:o}=cn.capacity(t,e),a=na(s,cn.lengthBits(t,r));let l=cn.modeBits[r]+a+i;if(l.length>o)throw new Error("Capacity overflow");l+="0".repeat(Math.min(4,Math.max(0,o-l.length))),l.length%8&&(l+="0".repeat(8-l.length%8));const c="1110110000010001";for(let d=0;l.length!==o;d++)l+=c[d%16];const u=Uint8Array.from(l.match(/(.{8})/g).map(d=>+`0b${d}`));return b7(t,e).encode(u)}function Zx(t,e,n,r,i=!1){const s=function(l,c,u,d=!1){const f=cn.size.encode(l);let h=new Xn(f+2);const m=new Xn(3).rect(0,3,!0).border(1,!1).border(1,!0).border(1,!1);h=h.embed(0,m).embed({x:-m.width,y:0},m).embed({x:0,y:-m.height},m),h=h.rectSlice(1,f);const g=new Xn(1).rect(0,1,!0).border(1,!1).border(1,!0),w=cn.alignmentPatterns(l);for(const p of w)for(const v of w)h.data[p][v]===void 0&&h.embed({x:v-2,y:p-2},g);h=h.hLine({x:0,y:6},1/0,({x:p},v)=>v===void 0?p%2==0:v).vLine({x:6,y:0},1/0,({y:p},v)=>v===void 0?p%2==0:v);{const p=cn.formatBits(c,u),v=y=>!d&&(p>>y&1)==1;for(let y=0;y<6;y++)h.data[y][8]=v(y);for(let y=6;y<8;y++)h.data[y+1][8]=v(y);for(let y=8;y<15;y++)h.data[f-15+y][8]=v(y);for(let y=0;y<8;y++)h.data[8][f-y-1]=v(y);for(let y=8;y<9;y++)h.data[8][15-y-1+1]=v(y);for(let y=9;y<15;y++)h.data[8][15-y-1]=v(y);h.data[f-8][8]=!d}if(l>=7){const p=cn.versionBits(l);for(let v=0;v<18;v+=1){const y=!d&&(p>>v&1)==1,C=Math.floor(v/3),P=v%3+f-8-3;h.data[C][P]=y,h.data[P][C]=y}}return h}(t,e,r,i);let o=0;const a=8*n.length;if(function(l,c,u){const d=l.height,f=Ww[c];let h=-1,m=d-1;for(let g=d-1;g>0;g-=2){for(g==6&&(g=5);;m+=h){for(let w=0;w<2;w+=1){const p=g-w;l.data[m][p]===void 0&&u(p,m,f(p,m))}if(m+h<0||m+h>=d)break}h=-h}}(s,r,(l,c,u)=>{let d=!1;o<a&&(d=(n[o>>>3]>>(7-o&7)&1)!=0,o++),s.data[c][l]=d!==u}),o!==a)throw new Error("QR: bytes left after draw");return s}function E7(t){const e=t.inverse(),n=h=>{let m=0;for(let g,w=0,p=1;w<h.length;w++)g===h[w]&&(p++,w!==h.length-1)||(p>=5&&(m+=p-5+3),g=h[w],p=1);return m};let r=0;t.data.forEach(h=>r+=n(h)),e.data.forEach(h=>r+=n(h));let i=0,s=t.data;const o=t.width-1,a=t.height-1;for(let h=0;h<o;h++)for(let m=0;m<a;m++){const g=h+1,w=m+1;s[h][m]===s[g][m]&&s[g][m]===s[h][w]&&s[g][m]===s[g][w]&&(i+=3)}const l=h=>{const m=[!0,!1,!0,!0,!0,!1,!0],g=[!1,!1,!1,!1],w=[...m,...g],p=[...g,...m];let v=0;for(let y=0;y<h.length;y++)Wx(h,w,y)&&(v+=40),Wx(h,p,y)&&(v+=40);return v};let c=0;for(const h of t.data)c+=l(h);for(const h of e.data)c+=l(h);let u=0;t.rectRead(0,1/0,(h,m)=>u+=m?1:0);const d=u/(t.height*t.width)*100,f=10*Math.floor(Math.abs(d-50)/5);return r+i+c+f}function bI(t,e="raw",n={}){const r=n.ecc!==void 0?n.ecc:"medium";(function(u){if(!Qx.includes(u))throw new Error(`Invalid error correction mode=${u}. Expected: ${Qx}`)})(r);const i=n.encoding!==void 0?n.encoding:function(u){let d="numeric";for(let f of u)if(!cn.alphabet.numeric.has(f)&&(d="alphanumeric",!cn.alphabet.alphanumerc.has(f)))return"byte";return d}(t);(function(u){if(!Yx.includes(u))throw new Error(`Encoding: invalid mode=${u}. Expected: ${Yx}`);if(u==="kanji"||u==="eci")throw new Error(`Encoding: ${u} is not supported (yet?).`)})(i),n.mask!==void 0&&function(u){if(![0,1,2,3,4,5,6,7].includes(u)||!Ww[u])throw new Error(`Invalid mask=${u}. Expected number [0..7]`)}(n.mask);let s,o=n.version,a=new Error("Unknown error");if(o!==void 0)(function(u){if(!Number.isSafeInteger(u)||u<1||u>40)throw new Error(`Invalid version=${u}. Expected number [1..40]`)})(o),s=Jx(o,r,t,i);else for(let u=1;u<=40;u++)try{s=Jx(u,r,t,i),o=u;break}catch(d){a=d}if(!o||!s)throw a;let l=function(u,d,f,h){if(h===void 0){const m=function(){let g,w=1/0;return{add(p,v){p>=w||(g=v,w=p)},get:()=>g,score:()=>w}}();for(let g=0;g<Ww.length;g++)m.add(E7(Zx(u,d,f,g,!0)),g);h=m.get()}if(h===void 0)throw new Error("Cannot find mask");return Zx(u,d,f,h)}(o,r,s,n.mask);l.assertDrawn();const c=n.border===void 0?2:n.border;if(!Number.isSafeInteger(c))throw new Error("Wrong border type="+typeof c);if(l=l.border(c,!1),n.scale!==void 0&&(l=l.scale(n.scale)),e==="raw")return l.data;if(e==="ascii")return l.toASCII();if(e==="svg")return l.toSVG();if(e==="gif")return l.toGIF();if(e==="term")return l.toTerm();throw new Error(`Unknown output: ${e}`)}const _y={DESKTOP:"Desktop",MOBILE:"Mobile",META_MASK_MOBILE_APP:"MetaMask mobile app",SCAN_TO_CONNECT:"Scan to connect and sign with",CONNECT_WITH_EXTENSION:"Connect With MetaMask Extension",INSTALL_MODAL:{TRUSTED_BY_USERS:"Trusted by over 30 million users to buy, store, send and swap crypto securely",LEADING_CRYPTO_WALLET:"The leading crypto wallet & gateway to blockchain apps built on Ethereum Mainnet, Polygon, Optimism, and many other networks",CONTROL_DIGITAL_INTERACTIONS:"Puts you in control of your digital interactions by making power of cryptography more accessible",INSTALL_META_MASK_EXTENSION:"Install MetaMask Extension"},PENDING_MODAL:{OPEN_META_MASK_SELECT_CODE:"Please open the MetaMask wallet app and select the code on the screen OR disconnect",OPEN_META_MASK_CONTINUE:"Open the MetaMask app to continue with your session.",NUMBER_AFTER_OPEN_NOTICE:"If a number doesn't appear after opening MetaMask, please click disconnect and re-scan the QRCode.",DISCONNECT:"Disconnect"},SELECT_MODAL:{CRYPTO_TAKE_CONTROL_TEXT:"Take control of your crypto and explore the blockchain with the wallet trusted by over 30 million people worldwide"},META_MASK_MODAL:{ADDRESS_COPIED:"Address copied to clipboard!",DISCONNECT:"Disconnect",ACTIVE_NETWORK:"Active Network"}};class Xb{constructor(e){var n;this.translations=_y,this.supportedLocales=["es","fr","he","it","pt","tr"],this.baseUrl=(n=e==null?void 0:e.baseUrl)!==null&&n!==void 0?n:"https://raw.githubusercontent.com/MetaMask/metamask-sdk/refs/heads/gh-pages/locales"}getBrowserLanguage(){if((navigator.languages||[navigator.language]).some(n=>n.toLowerCase().startsWith("en")))return"en";const e=navigator.language.toLowerCase().split("-")[0];return this.supportedLocales.includes(e)?e:"en"}async init(e){const n=this.getBrowserLanguage()||e.fallbackLng;await this.loadTranslations(n)}async loadTranslations(e){const n=e.split("-")[0];if(n!=="en"&&this.supportedLocales.includes(n))try{const r=`${this.baseUrl}/${n}.json`,i=await fetch(r);if(!i.ok)throw new Error(`HTTP error! status: ${i.status}`);this.translations=await i.json()}catch(r){console.warn(` Failed to load ${n} translations, falling back to English:`,r),this.translations=_y}else this.translations=_y}t(e){return this.getNestedTranslation(e,this.translations)||e}getNestedTranslation(e,n){const r=e.split(".");let i=n;for(const s of r){if(typeof i!="object")return"";i=i[s]}return typeof i=="string"?i:""}}var xd;(function(t){t.SDK_MODAL_VIEWED="sdk_modal_viewed",t.SDK_MODAL_BUTTON_CLICKED="sdk_modal_button_clicked",t.SDK_MODAL_TOGGLE_CHANGED="sdk_modal_toggle_changed"})(xd||(xd={}));const EI=class{constructor(t){Hb(this,t),this.close=Uo(this,"close"),this.startDesktopOnboarding=Uo(this,"startDesktopOnboarding"),this.trackAnalytics=Uo(this,"trackAnalytics"),this.link=void 0,this.sdkVersion=void 0,this.preferDesktop=void 0,this.tab=1,this.isDefaultTab=!0,this.translationsLoaded=!1,this.onClose=this.onClose.bind(this),this.onStartDesktopOnboardingHandler=this.onStartDesktopOnboardingHandler.bind(this),this.setTab=this.setTab.bind(this),this.render=this.render.bind(this),this.setTab(this.preferDesktop?1:2),this.i18nInstance=new Xb}componentDidLoad(){this.trackAnalytics.emit({event:xd.SDK_MODAL_VIEWED,params:{extensionInstalled:!1,tab:this.tab===1?"desktop":"mobile"}})}async connectedCallback(){await this.i18nInstance.init({fallbackLng:"en"}),this.translationsLoaded=!0}updatePreferDesktop(t){t?this.setTab(1):this.setTab(2)}onClose(t=!1){this.close.emit({shouldTerminate:t})}onStartDesktopOnboardingHandler(){this.trackAnalytics.emit({event:xd.SDK_MODAL_BUTTON_CLICKED,params:{button_type:"install_extension",tab:"desktop"}}),this.startDesktopOnboarding.emit()}setTab(t,e=!1){e&&this.trackAnalytics.emit({event:xd.SDK_MODAL_TOGGLE_CHANGED,params:{toggle:this.tab===1?"desktop_to_mobile":"mobile_to_desktop"}}),this.tab=t,this.isDefaultTab=!1}render(){if(!this.translationsLoaded)return null;const t=r=>this.i18nInstance.t(r),e=this.isDefaultTab?this.preferDesktop?1:2:this.tab,n=bI(this.link,"svg",{ecc:"medium",scale:2});return re(Qb,{className:"install-model"},re("div",{class:"backdrop",onClick:()=>this.onClose(!0)}),re("div",{class:"modal"},re("div",{class:"closeButtonContainer"},re("div",{class:"right"},re("span",{class:"closeButton",onClick:()=>this.onClose(!0)},re(Jb,null)))),re("div",{class:"logoContainer"},re(Zb,null)),re("div",null,re("div",{class:"tabcontainer"},re("div",{class:"flexContainer"},re("div",{onClick:()=>this.setTab(1,!0),class:"tab flexItem "+(e===1?"tabactive":"")},t("DESKTOP")),re("div",{onClick:()=>this.setTab(2,!0),class:"tab flexItem "+(e===2?"tabactive":"")},t("MOBILE")))),re("div",{style:{display:e===1?"none":"block"}},re("div",{class:"flexContainer"},re("div",{class:"flexItem",style:{textAlign:"center",marginTop:"4"}},n&&re("div",{id:"sdk-mm-qrcode",class:"center",innerHTML:n}),re("div",{class:"connectMobileText"},t("SCAN_TO_CONNECT")," ",re("br",null),re("span",{class:"blue"},re("b",null,t("META_MASK_MOBILE_APP"))))))),re("div",{style:{display:e===2?"none":"block"}},re("div",{class:"item"},re(ky,{Icon:p7,text:t("INSTALL_MODAL.TRUSTED_BY_USERS")})),re("div",{class:"item"},re(ky,{Icon:h7,text:t("INSTALL_MODAL.LEADING_CRYPTO_WALLET")})),re("div",{class:"item"},re(ky,{Icon:g7,text:t("INSTALL_MODAL.CONTROL_DIGITAL_INTERACTIONS")})),re("button",{class:"button",onClick:()=>this.onStartDesktopOnboardingHandler()},re(m7,null),re("span",{class:"installExtensionText"},t("INSTALL_MODAL.INSTALL_META_MASK_EXTENSION"))))),re(Yb,{version:this.sdkVersion})))}get el(){return Kg(this)}static get watchers(){return{preferDesktop:["updatePreferDesktop"]}}};EI.style=`.flexContainer {
    display: flex;
    justify-content: center;
    align-items: center;
    flex-direction: row;
}

.flexItem {
    flex: 1;
    justify-content: center;
    align-items: center;
}

.flexItem11 {
    flex: 11;
    justify-content: center;
    align-items: center;
}

.flexItem1 {
    flex: 1;
    justify-content: center;
    align-items: center;
}

.tab {
    padding: 8px;
    cursor: pointer;
    background-color: #F2F4F6;
    font-size: 12px;
    text-align: center;
    color: #24292E;
}

.tabcontainer {
    padding: 4px;
    background-color: #F2F4F6;
    border-radius: 8px;
    margin-bottom: 30px;
    margin-top: 30px;
}

.tabactive {
    background-color: white;
    -webkit-transition: background-color 300ms linear;
    -ms-transition: background-color 300ms linear;
    transition: background-color 300ms linear;
    border-radius: 8px;
}

.item {
    font-size: 12px;
    margin-bottom: 16px;
    border-radius: 8px;
    padding: 10px;
    border: 2px #F2F4F6 solid;
    color: #24292E;
}

.extensionLabel {
    font-style: normal;
    font-weight: bold;
    font-size: 14px;
    text-align: cetner;
    color: #24272A;
}

.notice {
    font-size: 12px;
    margin-left: 10px;
    margin-right: 10px;
    color: grey;
}

.button {
    margin-top: 41.5px;
    margin-bottom: 20px;
    width: 100%;
    display: flex;
    flex-direction: row;
    justify-content: center;
    align-items: center;
    padding: 12px 20px;
    background: #037DD6;
    border-radius: 32px;
    color: white;
    border: 0;
    font-size: 14px;
    cursor: pointer;
}

.backdrop {
    visibility: visible;
    position: fixed;
    top: 0;
    left: 0;
    right: 0;
    bottom: 0;
    width: 100%;
    z-index: 99998;
    background: rgba(0, 0, 0, 0.87);
    opacity: 0.3;
}

.modal {
    visibility: visible;
    position: fixed;
    left: 50%;
    transform: translate(-50%, -50%);
    z-index: 99999;
    background: white;
    padding: 20px;
    border-radius: 8px;
    top: 50%;
    max-width: 100%;
    width: 460px;
    min-width: 300px;
    box-shadow: rgba(0, 0, 0, 0.2) 0px 11px 15px -7px, rgba(0, 0, 0, 0.14) 0px 24px 38px 3px, rgba(0, 0, 0, 0.12) 0px 9px 46px 8px;
    -webkit-font-smoothing: antialiased;
}

.closeButton {
    color: #BBC0C5;
    cursor: pointer;
}

.logoContainer {
    margin-left: 24px;
    margin-right: 24px;
    margin-top: 24px;
    display: flex;
    align-items: center;
    justify-content: center;
}

.connectMobileText {
    font-size: 14px;
    color: black;
    margin-top: 28px;
    margin-bottom: 28px;
    line-height: 2;
}

.blue {
    color: #037DD6;
    font-weight: 700;
}

.installExtensionText {
    margin-left: 10px;
}

.center {
    display: flex;
    justify-content: center;
    align-items: center;
}

.right {
    display: flex;
    align-items: center;
    justify-content: right;
}

#sdk-mm-qrcode {
    svg {
        width: 50%;
    }
}`;const AI=class{constructor(t){Hb(this,t),this.close=Uo(this,"close"),this.disconnect=Uo(this,"disconnect"),this.updateOTPValue=Uo(this,"updateOTPValue"),this.displayOTP=void 0,this.sdkVersion=void 0,this.otpCode=void 0,this.translationsLoaded=!1,this.i18nInstance=new Xb}async connectedCallback(){await this.i18nInstance.init({fallbackLng:"en"}),this.translationsLoaded=!0}onClose(){this.close.emit()}onDisconnect(){this.disconnect.emit()}onUpdateOTPValueHandler(t){this.updateOTPValue.emit({otpValue:t})}disconnectedCallback(){this.onClose()}render(){var t;if(!this.translationsLoaded)return null;const e=(t=this.displayOTP)===null||t===void 0||t,n=this.sdkVersion,r=i=>this.i18nInstance.t(i);return re(Qb,{className:"pending-modal"},re("div",{class:"backdrop",onClick:()=>this.onClose()}),re("div",{class:"modal"},re("div",{class:"closeButtonContainer"},re("div",{class:"right"},re("span",{class:"closeButton",onClick:()=>this.onClose()},re(Jb,null)))),re("div",{class:"logoContainer"},re(Zb,null)),re("div",null,re("div",{class:"flexContainer",style:{flexDirection:"column",color:"black"}},re("div",{class:"flexItem",style:{textAlign:"center",marginTop:"30px",marginBottom:"30px",fontSize:"16px"}},r(e?"PENDING_MODAL.OPEN_META_MASK_SELECT_CODE":"PENDING_MODAL.OPEN_META_MASK_CONTINUE")),re("div",{id:"sdk-mm-otp-value",style:{padding:"10px",fontSize:"32px",display:this.otpCode?"block":"none"}},this.otpCode),e&&re("div",{class:"notice"},"* ",r("PENDING_MODAL.NUMBER_AFTER_OPEN_NOTICE"))),re("div",{style:{marginTop:"20px"}},re("button",{class:"button blue",style:{marginTop:"5px",color:"#0376C9",borderColor:"#0376C9",borderWidth:"1px",borderStyle:"solid",backgroundColor:"white"},onClick:()=>this.onDisconnect()},r("PENDING_MODAL.DISCONNECT")))),re(Yb,{version:n})))}get el(){return Kg(this)}};AI.style=`.flexContainer {
    display: flex;
    justify-content: center;
    align-items: center;
    flex-direction: row;
}

.flexItem {
    flex: 1;
    justify-content: center;
    align-items: center;
}

.flexItem11 {
    flex: 11;
    justify-content: center;
    align-items: center;
}

.flexItem1 {
    flex: 1;
    justify-content: center;
    align-items: center;
}

.tab {
    padding: 8px;
    cursor: pointer;
    background-color: #F2F4F6;
    font-size: 12px;
    text-align: center;
    color: #24292E;
}

.tabcontainer {
    padding: 4px;
    background-color: #F2F4F6;
    border-radius: 8px;
    margin-bottom: 30px;
    margin-top: 30px;
}

.tabactive {
    background-color: white;
    -webkit-transition: background-color 300ms linear;
    -ms-transition: background-color 300ms linear;
    transition: background-color 300ms linear;
    border-radius: 8px;
}

.item {
    font-size: 12px;
    margin-bottom: 16px;
    border-radius: 8px;
    padding: 10px;
    border: 2px #F2F4F6 solid;
    color: #24292E;
}

.extensionLabel {
    font-style: normal;
    font-weight: bold;
    font-size: 14px;
    text-align: cetner;
    color: #24272A;
}

.notice {
    font-size: 12px;
    margin-left: 10px;
    margin-right: 10px;
    color: grey;
}

.button {
    margin-top: 41.5px;
    margin-bottom: 20px;
    width: 100%;
    display: flex;
    flex-direction: row;
    justify-content: center;
    align-items: center;
    padding: 12px 20px;
    background: #037DD6;
    border-radius: 32px;
    color: white;
    border: 0;
    font-size: 14px;
    cursor: pointer;
}

.backdrop {
    visibility: visible;
    position: fixed;
    top: 0;
    left: 0;
    right: 0;
    bottom: 0;
    width: 100%;
    z-index: 99998;
    background: rgba(0, 0, 0, 0.87);
    opacity: 0.3;
}

.modal {
    visibility: visible;
    position: fixed;
    left: 50%;
    transform: translate(-50%, -50%);
    z-index: 99999;
    background: white;
    padding: 20px;
    border-radius: 8px;
    top: 50%;
    max-width: 100%;
    width: 460px;
    min-width: 300px;
    box-shadow: rgba(0, 0, 0, 0.2) 0px 11px 15px -7px, rgba(0, 0, 0, 0.14) 0px 24px 38px 3px, rgba(0, 0, 0, 0.12) 0px 9px 46px 8px;
    -webkit-font-smoothing: antialiased;
}

.closeButton {
    color: #BBC0C5;
    cursor: pointer;
}

.logoContainer {
    margin-left: 24px;
    margin-right: 24px;
    margin-top: 24px;
    display: flex;
    align-items: center;
    justify-content: center;
}

.connectMobileText {
    font-size: 14px;
    color: black;
    margin-top: 28px;
    margin-bottom: 28px;
    line-height: 2;
}

.blue {
    color: #037DD6;
    font-weight: 700;
}

.installExtensionText {
    margin-left: 10px;
}

.center {
    display: flex;
    justify-content: center;
    align-items: center;
}

.right {
    display: flex;
    align-items: center;
    justify-content: right;
}

#sdk-mm-qrcode {
    svg {
        width: 50%;
    }
}`;const A7=()=>re("svg",{width:"21",height:"15",viewBox:"0 0 21 15",fill:"none",xmlns:"http://www.w3.org/2000/svg"},re("path",{d:"M14.1364 14.9851C13.5909 14.9851 13.2273 14.5851 13.2273 13.9851C13.2273 13.3851 13.5909 12.9851 14.1364 12.9851C16.6818 12.9851 18.6818 10.7851 18.6818 7.98508C18.6818 5.18508 16.6818 2.98508 14.1364 2.98508C11.5909 2.98508 9.59091 5.18508 9.59091 7.98508C9.59091 8.58508 9.22727 8.98508 8.68182 8.98508C8.13636 8.98508 7.77273 8.58508 7.77273 7.98508C7.77273 4.08508 10.5909 0.985077 14.1364 0.985077C17.6818 0.985077 20.5 4.08508 20.5 7.98508C20.5 11.8851 17.6818 14.9851 14.1364 14.9851ZM6.68182 14.7851C3.22727 14.7851 0.5 11.6851 0.5 7.98508C0.5 4.28508 3.22727 1.18508 6.68182 1.18508C7.22727 1.18508 7.59091 1.58508 7.59091 2.18508C7.59091 2.78508 7.22727 3.18508 6.68182 3.18508C4.22727 3.18508 2.31818 5.38508 2.31818 7.98508C2.31818 10.5851 4.22727 12.7851 6.68182 12.7851C9.13636 12.7851 11.0455 10.6851 11.0455 7.98508C11.0455 7.38508 11.4091 6.98508 11.9545 6.98508C12.5 6.98508 12.8636 7.38508 12.8636 7.98508C12.7727 11.6851 10.0455 14.7851 6.68182 14.7851Z",fill:"white"})),S7=()=>re("svg",{width:"400",height:"300",viewBox:"0 0 400 300",fill:"none",xmlns:"http://www.w3.org/2000/svg"},re("rect",{width:"400",height:"300",fill:"white"}),re("path",{d:"M300.116 242.46L250.485 227.681L213.057 250.055L186.944 250.045L149.493 227.681L99.8843 242.46L84.7939 191.518L99.8843 134.979L84.7939 87.1777L99.8843 27.9336L177.402 74.2466H222.598L300.116 27.9336L315.206 87.1777L300.116 134.979L315.206 191.518L300.116 242.46Z",fill:"#FF5C16"}),re("path",{d:"M99.8955 27.9336L177.414 74.2792L174.331 106.085L99.8955 27.9336Z",fill:"#FF5C16"}),re("path",{d:"M149.505 191.539L183.612 217.521L149.505 227.681V191.539Z",fill:"#FF5C16"}),re("path",{d:"M180.886 148.585L174.33 106.107L132.369 134.991L132.348 134.98V135.001L132.477 164.732L149.493 148.585H149.504H180.886Z",fill:"#FF5C16"}),re("path",{d:"M300.116 27.9336L222.598 74.2792L225.67 106.085L300.116 27.9336Z",fill:"#FF5C16"}),re("path",{d:"M250.508 191.539L216.4 217.521L250.508 227.681V191.539Z",fill:"#FF5C16"}),re("path",{d:"M267.652 135.001H267.663H267.652V134.98L267.641 134.991L225.68 106.107L219.125 148.585H250.507L267.533 164.732L267.652 135.001Z",fill:"#FF5C16"}),re("path",{d:"M149.493 227.681L99.8843 242.46L84.7939 191.54H149.493V227.681Z",fill:"#E34807"}),re("path",{d:"M180.875 148.574L190.351 209.98L177.219 175.838L132.456 164.732L149.483 148.574H180.864H180.875Z",fill:"#E34807"}),re("path",{d:"M250.507 227.681L300.116 242.46L315.206 191.54H250.507V227.681Z",fill:"#E34807"}),re("path",{d:"M219.126 148.574L209.649 209.98L222.782 175.838L267.545 164.732L250.507 148.574H219.126Z",fill:"#E34807"}),re("path",{d:"M84.7939 191.517L99.8843 134.979H132.337L132.456 164.721L177.219 175.826L190.351 209.969L183.601 217.488L149.493 191.506H84.7939V191.517Z",fill:"#FF8D5D"}),re("path",{d:"M315.206 191.517L300.116 134.979H267.664L267.545 164.721L222.782 175.826L209.649 209.969L216.4 217.488L250.507 191.506H315.206V191.517Z",fill:"#FF8D5D"}),re("path",{d:"M222.598 74.2466H200H177.402L174.33 106.053L190.351 209.936H209.649L225.681 106.053L222.598 74.2466Z",fill:"#FF8D5D"}),re("path",{d:"M99.8843 27.9336L84.7939 87.1777L99.8843 134.979H132.337L174.319 106.085L99.8843 27.9336Z",fill:"#661800"}),re("path",{d:"M171.496 160.906H156.795L148.79 168.752L177.229 175.804L171.496 160.896V160.906Z",fill:"#661800"}),re("path",{d:"M300.116 27.9336L315.206 87.1777L300.116 134.979H267.663L225.681 106.085L300.116 27.9336Z",fill:"#661800"}),re("path",{d:"M228.525 160.906H243.248L251.253 168.763L222.781 175.826L228.525 160.896V160.906Z",fill:"#661800"}),re("path",{d:"M213.046 229.789L216.399 217.51L209.649 209.991H190.34L183.59 217.51L186.943 229.789",fill:"#661800"}),re("path",{d:"M213.047 229.789V250.066H186.944V229.789H213.047Z",fill:"#C0C4CD"}),re("path",{d:"M149.504 227.66L186.965 250.056V229.779L183.611 217.5L149.504 227.66Z",fill:"#E7EBF6"}),re("path",{d:"M250.506 227.66L213.045 250.056V229.779L216.398 217.5L250.506 227.66Z",fill:"#E7EBF6"})),SI=class{constructor(t){Hb(this,t),this.close=Uo(this,"close"),this.connectWithExtension=Uo(this,"connectWithExtension"),this.link=void 0,this.sdkVersion=void 0,this.preferDesktop=void 0,this.tab=1,this.isDefaultTab=!0,this.translationsLoaded=!1,this.i18nInstance=new Xb,this.setTab(this.preferDesktop?1:2)}async connectedCallback(){await this.i18nInstance.init({fallbackLng:"en"}),this.translationsLoaded=!0}onClose(t=!1){this.close.emit({shouldTerminate:t})}connectWithExtensionHandler(){this.connectWithExtension.emit()}setTab(t){this.tab=t,this.isDefaultTab=!1}disconnectedCallback(){this.onClose()}updatePreferDesktop(t){t?this.setTab(1):this.setTab(2)}render(){if(!this.translationsLoaded)return null;const t=i=>this.i18nInstance.t(i),e=this.sdkVersion,n=this.isDefaultTab?this.preferDesktop?1:2:this.tab,r=bI(this.link,"svg",{ecc:"medium",scale:2});return re(Qb,{className:"select-modal"},re("div",{class:"backdrop",onClick:()=>this.onClose(!0)}),re("div",{class:"modal"},re("div",{class:"closeButtonContainer"},re("div",{class:"right"},re("span",{class:"closeButton",onClick:()=>this.onClose(!0)},re(Jb,null)))),re("div",{class:"logoContainer"},re(Zb,null)),re("div",null,re("div",{class:"tabcontainer"},re("div",{class:"flexContainer"},re("div",{onClick:()=>this.setTab(1),class:"tab flexItem "+(n===1?"tabactive":"")},t("DESKTOP")),re("div",{onClick:()=>this.setTab(2),class:"tab flexItem "+(n===2?"tabactive":"")},t("MOBILE")))),re("div",{style:{display:n===1?"none":"block"}},re("div",{class:"flexContainer"},re("div",{class:"flexItem",style:{textAlign:"center",marginTop:"4"}},re("div",{class:"center",id:"sdk-mm-qrcode",innerHTML:r}),re("div",{class:"connectMobileText"},t("SCAN_TO_CONNECT"),re("br",null),re("span",{class:"blue"},re("b",null,t("META_MASK_MOBILE_APP"))))))),re("div",{style:{display:n===2?"none":"block"}},re("div",{style:{display:"flex",justifyContent:"center",height:"300",marginTop:"-20"}},re(S7,null)),re("div",{class:"extensionLabel"},t("SELECT_MODAL.CRYPTO_TAKE_CONTROL_TEXT")),re("button",{class:"button",onClick:()=>this.connectWithExtensionHandler()},re(A7,null),re("span",{class:"installExtensionText"},t("CONNECT_WITH_EXTENSION"))))),re(Yb,{version:e})))}get el(){return Kg(this)}static get watchers(){return{preferDesktop:["updatePreferDesktop"]}}};SI.style=`.flexContainer {
    display: flex;
    justify-content: center;
    align-items: center;
    flex-direction: row;
}

.flexItem {
    flex: 1;
    justify-content: center;
    align-items: center;
}

.flexItem11 {
    flex: 11;
    justify-content: center;
    align-items: center;
}

.flexItem1 {
    flex: 1;
    justify-content: center;
    align-items: center;
}

.tab {
    padding: 8px;
    cursor: pointer;
    background-color: #F2F4F6;
    font-size: 12px;
    text-align: center;
    color: #24292E;
}

.tabcontainer {
    padding: 4px;
    background-color: #F2F4F6;
    border-radius: 8px;
    margin-bottom: 30px;
    margin-top: 30px;
}

.tabactive {
    background-color: white;
    -webkit-transition: background-color 300ms linear;
    -ms-transition: background-color 300ms linear;
    transition: background-color 300ms linear;
    border-radius: 8px;
}

.item {
    font-size: 12px;
    margin-bottom: 16px;
    border-radius: 8px;
    padding: 10px;
    border: 2px #F2F4F6 solid;
    color: #24292E;
}

.extensionLabel {
    font-style: normal;
    font-weight: bold;
    font-size: 14px;
    text-align: cetner;
    color: #24272A;
}

.notice {
    font-size: 12px;
    margin-left: 10px;
    margin-right: 10px;
    color: grey;
}

.button {
    margin-top: 41.5px;
    margin-bottom: 20px;
    width: 100%;
    display: flex;
    flex-direction: row;
    justify-content: center;
    align-items: center;
    padding: 12px 20px;
    background: #037DD6;
    border-radius: 32px;
    color: white;
    border: 0;
    font-size: 14px;
    cursor: pointer;
}

.backdrop {
    visibility: visible;
    position: fixed;
    top: 0;
    left: 0;
    right: 0;
    bottom: 0;
    width: 100%;
    z-index: 99998;
    background: rgba(0, 0, 0, 0.87);
    opacity: 0.3;
}

.modal {
    visibility: visible;
    position: fixed;
    left: 50%;
    transform: translate(-50%, -50%);
    z-index: 99999;
    background: white;
    padding: 20px;
    border-radius: 8px;
    top: 50%;
    max-width: 100%;
    width: 460px;
    min-width: 300px;
    box-shadow: rgba(0, 0, 0, 0.2) 0px 11px 15px -7px, rgba(0, 0, 0, 0.14) 0px 24px 38px 3px, rgba(0, 0, 0, 0.12) 0px 9px 46px 8px;
    -webkit-font-smoothing: antialiased;
}

.closeButton {
    color: #BBC0C5;
    cursor: pointer;
}

.logoContainer {
    margin-left: 24px;
    margin-right: 24px;
    margin-top: 24px;
    display: flex;
    align-items: center;
    justify-content: center;
}

.connectMobileText {
    font-size: 14px;
    color: black;
    margin-top: 28px;
    margin-bottom: 28px;
    line-height: 2;
}

.blue {
    color: #037DD6;
    font-weight: 700;
}

.installExtensionText {
    margin-left: 10px;
}

.center {
    display: flex;
    justify-content: center;
    align-items: center;
}

.right {
    display: flex;
    align-items: center;
    justify-content: right;
}

#sdk-mm-qrcode {
    svg {
        width: 50%;
    }
}`;var x7=Object.freeze({__proto__:null,mm_install_modal:EI,mm_pending_modal:AI,mm_select_modal:SI});function C7({target:t}){const[e,n]=Se.useState(Math.floor(Date.now()/1e3));Se.useEffect(()=>{const l=setInterval(()=>n(Math.floor(Date.now()/1e3)),1e3);return()=>clearInterval(l)},[]);const r=Math.max(0,t-e),i=Math.floor(r/86400),s=Math.floor(r%86400/3600),o=Math.floor(r%3600/60),a=r%60;return r===0?ce.jsx("span",{children:"Unlocked"}):ce.jsxs("span",{children:[i,"d ",s,"h ",o,"m ",a,"s"]})}const k7=[{inputs:[{internalType:"address",name:"_owner",type:"address"},{internalType:"uint256",name:"_releaseTime",type:"uint256"},{internalType:"address",name:"_addressesProvider",type:"address"}],stateMutability:"nonpayable",type:"constructor"},{anonymous:!1,inputs:[{indexed:!1,internalType:"uint256",name:"oldReleaseTime",type:"uint256"},{indexed:!1,internalType:"uint256",name:"newReleaseTime",type:"uint256"}],name:"LockExtended",type:"event"},{anonymous:!1,inputs:[{indexed:!0,internalType:"address",name:"previousOwner",type:"address"},{indexed:!0,internalType:"address",name:"newOwner",type:"address"}],name:"OwnershipTransferStarted",type:"event"},{anonymous:!1,inputs:[{indexed:!0,internalType:"address",name:"previousOwner",type:"address"},{indexed:!0,internalType:"address",name:"newOwner",type:"address"}],name:"OwnershipTransferred",type:"event"},{anonymous:!1,inputs:[{indexed:!0,internalType:"address",name:"token",type:"address"},{indexed:!1,internalType:"uint256",name:"amount",type:"uint256"},{indexed:!1,internalType:"address",name:"to",type:"address"}],name:"TokenSwept",type:"event"},{inputs:[],name:"acceptOwnership",outputs:[],stateMutability:"nonpayable",type:"function"},{inputs:[],name:"addressesProvider",outputs:[{internalType:"contract IPoolAddressesProviderLite",name:"",type:"address"}],stateMutability:"view",type:"function"},{inputs:[{internalType:"address",name:"asset",type:"address"},{internalType:"address",name:"pool",type:"address"},{internalType:"uint256",name:"amount",type:"uint256"}],name:"deposit",outputs:[],stateMutability:"nonpayable",type:"function"},{inputs:[{internalType:"uint256",name:"newReleaseTime",type:"uint256"}],name:"extendLock",outputs:[],stateMutability:"nonpayable",type:"function"},{inputs:[{internalType:"address",name:"asset",type:"address"}],name:"getPosition",outputs:[{internalType:"uint256",name:"principal",type:"uint256"},{internalType:"uint256",name:"withdrawable",type:"uint256"},{internalType:"int256",name:"growthBps",type:"int256"}],stateMutability:"view",type:"function"},{inputs:[],name:"owner",outputs:[{internalType:"address",name:"",type:"address"}],stateMutability:"view",type:"function"},{inputs:[],name:"pendingOwner",outputs:[{internalType:"address",name:"",type:"address"}],stateMutability:"view",type:"function"},{inputs:[{internalType:"address",name:"",type:"address"}],name:"principalByAsset",outputs:[{internalType:"uint256",name:"",type:"uint256"}],stateMutability:"view",type:"function"},{inputs:[],name:"releaseTime",outputs:[{internalType:"uint256",name:"",type:"uint256"}],stateMutability:"view",type:"function"},{inputs:[{internalType:"address",name:"to",type:"address"}],name:"sweepAllATokensAfterRelease",outputs:[],stateMutability:"nonpayable",type:"function"},{inputs:[{internalType:"address",name:"token",type:"address"},{internalType:"address",name:"to",type:"address"}],name:"sweepTokenAfterRelease",outputs:[],stateMutability:"nonpayable",type:"function"},{inputs:[{internalType:"address[]",name:"tokens",type:"address[]"},{internalType:"address",name:"to",type:"address"}],name:"sweepTokensAfterRelease",outputs:[],stateMutability:"nonpayable",type:"function"},{inputs:[{internalType:"address",name:"newOwner",type:"address"}],name:"transferOwnership",outputs:[],stateMutability:"nonpayable",type:"function"},{inputs:[{internalType:"address",name:"asset",type:"address"},{internalType:"address",name:"to",type:"address"}],name:"withdrawAllUnderlying",outputs:[],stateMutability:"nonpayable",type:"function"},{inputs:[{internalType:"address",name:"asset",type:"address"},{internalType:"uint256",name:"amount",type:"uint256"},{internalType:"address",name:"to",type:"address"}],name:"withdrawUnderlying",outputs:[],stateMutability:"nonpayable",type:"function"}],_7={abi:k7},T7=[{anonymous:!1,inputs:[{indexed:!0,internalType:"address",name:"owner",type:"address"},{indexed:!1,internalType:"address",name:"timelock",type:"address"},{indexed:!1,internalType:"uint256",name:"releaseTime",type:"uint256"},{indexed:!1,internalType:"address",name:"addressesProvider",type:"address"}],name:"TimelockCreated",type:"event"},{inputs:[{internalType:"address",name:"addressesProvider",type:"address"},{internalType:"uint256",name:"releaseTime",type:"uint256"}],name:"createTimelock",outputs:[{internalType:"address",name:"timelock",type:"address"}],stateMutability:"nonpayable",type:"function"},{inputs:[{internalType:"address",name:"owner",type:"address"}],name:"getTimelocksByOwner",outputs:[{internalType:"address[]",name:"",type:"address[]"}],stateMutability:"view",type:"function"}],P7={abi:T7},pr=_7.abi,R7=P7.abi,Ty=["function getReserveData(address asset) external view returns (uint256, uint128, uint128, uint128, uint128, uint128, uint40, address, address, address, address, uint8)","function ADDRESSES_PROVIDER() view returns (address)"],Py=["function getPool() view returns (address)","function getPoolDataProvider() view returns (address)"],I7=["function getAllReservesTokens() view returns (tuple(string symbol, address tokenAddress)[])"],O7=["function getReserveTokensAddresses(address asset) view returns (address aTokenAddress, address stableDebtTokenAddress, address variableDebtTokenAddress)"],Xx=["function getReserveData(address asset) view returns (uint256,uint256,uint256,uint256,uint256,uint256,uint256,uint256,uint40)"];function eC(t){const r=t/1000000000000000n,i=Number(r)/1e12;return!isFinite(i)||i<0?"":`${((Math.pow(1+i/31536e3,31536e3)-1)*100).toFixed(2)}%`}const N7={1:"0x2f39d218133AFaB8F2B819B1066c7E434Ad94E9e",137:"0xa97684ead0e402dC232d5A977953DF7ECBaB3CDb",42161:"0xa97684ead0e402dC232d5A977953DF7ECBaB3CDb",10:"0xa97684ead0e402dC232d5A977953DF7ECBaB3CDb",8453:"0xa97684ead0e402dC232d5A977953DF7ECBaB3CDb",11155111:"0x012bAC54348C0E635dCAc49D8EF0093B445d2E"},M7=[{id:1,name:"Ethereum"},{id:137,name:"Polygon"},{id:42161,name:"Arbitrum"},{id:10,name:"Optimism"},{id:8453,name:"Base"},{id:11155111,name:"Sepolia (testnet)"}],L7={1:{chainId:"0x1",chainName:"Ethereum Mainnet",nativeCurrency:{name:"Ether",symbol:"ETH",decimals:18},rpcUrls:["https://cloudflare-eth.com"],blockExplorerUrls:["https://etherscan.io"]},137:{chainId:"0x89",chainName:"Polygon",nativeCurrency:{name:"MATIC",symbol:"MATIC",decimals:18},rpcUrls:["https://polygon-rpc.com"],blockExplorerUrls:["https://polygonscan.com"]},42161:{chainId:"0xa4b1",chainName:"Arbitrum One",nativeCurrency:{name:"Ether",symbol:"ETH",decimals:18},rpcUrls:["https://arb1.arbitrum.io/rpc"],blockExplorerUrls:["https://arbiscan.io"]},10:{chainId:"0xa",chainName:"OP Mainnet",nativeCurrency:{name:"Ether",symbol:"ETH",decimals:18},rpcUrls:["https://mainnet.optimism.io"],blockExplorerUrls:["https://optimistic.etherscan.io"]},8453:{chainId:"0x2105",chainName:"Base",nativeCurrency:{name:"Ether",symbol:"ETH",decimals:18},rpcUrls:["https://mainnet.base.org"],blockExplorerUrls:["https://basescan.org"]},11155111:{chainId:"0xaa36a7",chainName:"Sepolia",nativeCurrency:{name:"Sepolia Ether",symbol:"SEP",decimals:18},rpcUrls:["https://rpc.sepolia.org"],blockExplorerUrls:["https://sepolia.etherscan.io"]}};function B7(t){return"0x"+t.toString(16)}function D7(){const[t,e]=Se.useState(null);return Se.useEffect(()=>{if(window.ethereum){const n=new w0(window.ethereum);e(n)}},[]),t}async function $7(){const t=window.ethereum;try{if(t){const e=new Promise((r,i)=>setTimeout(()=>i(new Error("injected-timeout")),3e3));return await Promise.race([t.request({method:"eth_chainId"}),e]),(await t.request({method:"eth_requestAccounts"}))[0]||null}}catch{}try{const n=new $$({dappMetadata:{name:"Aave Timelock Vault",url:"https://dapp.local"},checkInstallationImmediately:!1,preferDesktop:!1,useDeeplink:!0,enableAnalytics:!1}).getProvider();if(!n)throw new Error("metamask provider unavailable");const r=await n.request({method:"eth_requestAccounts"});return window.ethereum=n,r&&r[0]||null}catch{}return alert("Could not connect via injected provider. Opening MetaMask via deeplink/QR failed or was cancelled. Please install MetaMask or open this file on a device with MetaMask app installed and try again."),null}function U7(t){return t.slice(0,6)+"..."+t.slice(-4)}function F7(){const t=D7(),[e,n]=Se.useState(null),[r,i]=Se.useState(null),[s,o]=Se.useState(0),a=s>0;async function l(J){var le,Z;try{o(te=>te+1);try{(Z=(le=document.activeElement)==null?void 0:le.blur)==null||Z.call(le)}catch{}await J()}finally{o(te=>Math.max(0,te-1))}}const[c,u]=Se.useState(""),[d,f]=Se.useState(""),[h,m]=Se.useState("0x7800d050B10aCbf3bdcbF50D58612A6f215EA0E9"),[g,w]=Se.useState([]),[p,v]=Se.useState({}),[y,C]=Se.useState(""),[P,L]=Se.useState(""),[j,D]=Se.useState(!1),[V,F]=Se.useState(!1),[W,K]=Se.useState(!1),[$,M]=Se.useState(!1),[x,O]=Se.useState([]),[B,b]=Se.useState(""),[E,k]=Se.useState({asset:"",pool:"",releaseIso:""}),[I,A]=Se.useState({releaseIso:""});Se.useEffect(()=>{try{const J=localStorage.getItem("avs_settings");if(!J)return;const le=JSON.parse(J);le.factoryAddress&&u(le.factoryAddress),le.addressesProviderAddr&&L(le.addressesProviderAddr),le.mtFactoryAddress&&m(le.mtFactoryAddress),le.dataProviderAddr&&f(le.dataProviderAddr),le.createParams&&k(Z=>({...Z,...le.createParams}))}catch{}},[]),Se.useEffect(()=>{const J=window.ethereum;J&&(J.on("chainChanged",()=>window.location.reload()),J.on("accountsChanged",()=>window.location.reload()),(async()=>{try{const Z=await new w0(J).getNetwork();i(Number(Z.chainId));const te=N7[Number(Z.chainId)];te&&L(te);try{const ue=localStorage.getItem(`avs_imported:${Number(Z.chainId)}`);O(ue?JSON.parse(ue):[])}catch{O([])}}catch{i(null)}})())},[]),Se.useEffect(()=>{t&&e&&h&&oe()},[t,e,h]),Se.useEffect(()=>{t&&(async()=>{try{M(!0);let J=null;if(P?J=P:E.pool&&(J=await new Ge(E.pool,Ty,t).ADDRESSES_PROVIDER()),!J)return;const le=new Ge(J,Py,t);try{const he=await le.getPool();he&&!E.pool&&k(ke=>({...ke,pool:he}))}catch{}const Z=await le.getPoolDataProvider();f(Z);const me=(await new Ge(Z,I7,t).getAllReservesTokens()).map(he=>({symbol:he.symbol??he[0],address:he.tokenAddress??he[1]}));w(me),!E.asset&&me.length>0&&k(he=>({...he,asset:me[0].address}))}catch{w([]),f("")}finally{M(!1)}})()},[t,E.pool,P]),Se.useEffect(()=>{!t||!E.asset||(async()=>{try{let J=null;if(d&&(J=(await new Ge(d,Xx,t).getReserveData(E.asset))[5]),!J){const le=E.pool||(P?await new Ge(P,Py,t).getPool():"");if(!le){C("");return}J=(await new Ge(le,Ty,t).getReserveData(E.asset))[3]}if(!J){C("");return}C(eC(J))}catch{C("")}})()},[t,E.pool,E.asset,P,d]),Se.useEffect(()=>{if(!t||g.length===0){v({});return}(async()=>{try{let J="";try{P?J=await new Ge(P,Py,t).getPool():E.pool&&(J=E.pool)}catch{}const le=J?new Ge(J,Ty,t):null,Z=d?new Ge(d,Xx,t):null,te=await Promise.all(g.map(async me=>{try{let he=null;Z&&(he=(await Z.getReserveData(me.address))[5]),!he&&le&&(he=(await le.getReserveData(me.address))[3]);const ke=he?eC(he):"";return[me.address.toLowerCase(),ke]}catch{return[me.address.toLowerCase(),""]}})),ue={};for(const[me,he]of te)ue[me]=he;v(ue)}catch{v({})}})()},[t,g,d,P,E.pool]),Se.useEffect(()=>{try{const J={factoryAddress:c,addressesProviderAddr:P,dataProviderAddr:d,createParams:E,mtFactoryAddress:h};localStorage.setItem("avs_settings",JSON.stringify(J))}catch{}},[c,P,d,E,h]),Se.useEffect(()=>{if(r)try{localStorage.setItem(`avs_imported:${r}`,JSON.stringify(x))}catch{}},[r,x]);const[S,T]=Se.useState([]),[R,N]=Se.useState([]),U=null,z=Se.useMemo(()=>!t||!h?null:new Ge(h,R7,t),[t,h]);async function q(){const J=await $7();n(J)}async function Q(J){const le=window.ethereum;if(le)try{await le.request({method:"wallet_switchEthereumChain",params:[{chainId:B7(J)}]})}catch(Z){if((Z==null?void 0:Z.code)===4902){const te=L7[J];if(!te)return;await le.request({method:"wallet_addEthereumChain",params:[te]})}}}async function ie(){const J=`<!DOCTYPE html>
`+document.documentElement.outerHTML,le=new Blob([J],{type:"text/html;charset=utf-8"}),Z=URL.createObjectURL(le),te=document.createElement("a");te.href=Z,te.download="aave-vault-app.html",te.click(),URL.revokeObjectURL(Z)}async function oe(){if(!(!e||!t)){F(!0);try{if(h)try{const J=await t.getCode(h);if(J&&J!=="0x"&&z){const le=await z.getTimelocksByOwner(e);N(le)}else N([])}catch(J){console.warn("Failed to load timelocks",J)}}finally{F(!1)}}}return ce.jsxs("div",{style:{position:"relative",maxWidth:900,margin:"0 auto",padding:24,fontFamily:"Inter, system-ui, Arial"},children:[ce.jsx("h1",{children:"Aave Timelock Vaults"}),ce.jsxs("div",{style:{display:"flex",gap:12,alignItems:"center",pointerEvents:a?"none":"auto",opacity:a?.5:1},children:[ce.jsx("button",{onClick:q,disabled:!!e||a,children:e?U7(e):"Connect Wallet"}),ce.jsxs("div",{style:{display:"flex",alignItems:"center",gap:6},children:[ce.jsx("span",{children:"Chain:"}),ce.jsxs("select",{value:r??"",onChange:J=>{const le=Number(J.target.value);le&&Q(le)},disabled:a,children:[ce.jsx("option",{value:"",children:"Select"}),M7.map(J=>ce.jsx("option",{value:J.id,children:J.name},J.id))]})]}),ce.jsx("button",{onClick:ie,disabled:a,children:"Download this web-app"})]}),ce.jsx("hr",{style:{margin:"24px 0"}}),ce.jsxs("section",{style:{pointerEvents:a?"none":"auto",opacity:a?.5:1},children:[ce.jsx("h2",{children:"Settings"}),ce.jsx("div",{style:{marginTop:8},children:ce.jsxs("label",{children:["Multi-Token Timelock Factory:",ce.jsx("input",{style:{width:420},value:h,onChange:J=>m(J.target.value),placeholder:"0x... (optional)",disabled:a})]})}),ce.jsxs("div",{style:{marginTop:8,display:"grid",gap:6},children:[ce.jsxs("label",{children:["Addresses Provider (optional):",ce.jsx("input",{style:{width:420},value:P,onChange:J=>L(J.target.value),placeholder:"0x... (auto by chain)",disabled:a})]}),ce.jsxs("label",{children:["Pool Data Provider (auto from AddressesProvider):",ce.jsx("input",{style:{width:420},value:d,onChange:J=>f(J.target.value),placeholder:"0x... (auto)",disabled:a})]})]})]}),ce.jsx("hr",{style:{margin:"24px 0"}}),ce.jsxs("section",{style:{pointerEvents:a?"none":"auto",opacity:a?.5:1},children:[ce.jsx("h2",{children:"Create Timelock (multi-token)"}),ce.jsxs("form",{onSubmit:async J=>{J.preventDefault(),await l(async()=>{if(!t||!z)return;const le=await t.getSigner(),Z=Math.floor(new Date(I.releaseIso).getTime()/1e3);if(!Z||Z<=Math.floor(Date.now()/1e3)){alert("Release time must be in the future");return}if(!P){alert("AddressesProvider required to sweep all aTokens");return}await(await z.connect(le).createTimelock(P,Z)).wait(),A({releaseIso:""}),await oe()})},style:{display:"grid",gap:8,maxWidth:640},children:[ce.jsx(K7,{value:I.releaseIso,onChange:J=>A({releaseIso:J})}),ce.jsx("button",{type:"submit",disabled:!z||!e||a,children:"Create Timelock"})]})]}),ce.jsx("hr",{style:{margin:"24px 0"}}),ce.jsxs("section",{style:{pointerEvents:a?"none":"auto",opacity:a?.5:1},children:[ce.jsxs("div",{style:{display:"flex",alignItems:"center",gap:8},children:[ce.jsx("h2",{style:{margin:0},children:"My Vaults"}),ce.jsxs("button",{onClick:()=>l(oe),disabled:!e||V||a,children:["Load My Vaults",V?"":""]})]}),ce.jsxs("div",{style:{display:"flex",gap:8,marginTop:8,flexWrap:"wrap",alignItems:"center",pointerEvents:a?"none":"auto",opacity:a?.6:1},children:[ce.jsx("input",{placeholder:"Import vault address",value:B,onChange:J=>b(J.target.value),style:{width:280},disabled:a}),ce.jsx("button",{type:"button",disabled:a,onClick:()=>{if(!B||!(B.startsWith("0x")&&B.length===42)){alert("Invalid address");return}if(x.includes(B)){alert("Already added");return}O(J=>[...J,B]),b("")},children:"Add"})]}),ce.jsx("div",{style:{display:"grid",gap:12,marginTop:8},children:(()=>{const J=Array.from(new Set([...x||[],...S,...R]));return J.length===0?ce.jsx("div",{children:"No vaults found."}):J.map(le=>ce.jsxs("div",{style:{position:"relative"},children:[x.includes(le)&&ce.jsx("button",{style:{position:"absolute",right:8,top:8},onClick:()=>O(Z=>Z.filter(te=>te!==le)),title:"Remove imported vault",children:"Remove"}),ce.jsx(z7,{vaultAddress:le,provider:t,reserves:g,addressesProviderAddr:P,dataProviderAddr:d,reserveApys:p,withBusy:l,globalBusy:a})]},le))})()})]}),a&&ce.jsx("div",{style:{position:"fixed",inset:0,background:"rgba(255,255,255,0.6)",display:"flex",alignItems:"center",justifyContent:"center",zIndex:9999},children:ce.jsx("div",{style:{background:"#fff",border:"1px solid #ddd",borderRadius:8,padding:"12px 16px",boxShadow:"0 2px 8px rgba(0,0,0,0.1)",fontSize:14},children:"Processing"})})]})}function j7({provider:t,vaultAddress:e,asset:n,decimalsHint:r}){const[i,s]=Se.useState("");return Se.useEffect(()=>{t&&(async()=>{try{const o=new Ge(e,pr,t),[a]=await o.getPosition(n);s(ip(a,r))}catch{s("")}})()},[t,e,n,r]),ce.jsx("span",{children:i})}function H7({provider:t,vaultAddress:e,asset:n}){const[r,i]=Se.useState("");return Se.useEffect(()=>{t&&(async()=>{try{const s=new Ge(e,pr,t),[,,o]=await s.getPosition(n),l=(Number(o)/100).toFixed(2)+"%";i(l)}catch{i("")}})()},[t,e,n]),ce.jsx("span",{children:r})}function K7({value:t,onChange:e}){function n(o){return new Date(o.getTime()-o.getTimezoneOffset()*6e4).toISOString().slice(0,16)}function r(o){const a=t?new Date(t):new Date;a.setDate(a.getDate()+o),e(n(a))}function i(o){const a=t?new Date(t):new Date;a.setFullYear(a.getFullYear()+o),e(n(a))}function s(o){if(!o)return"Select a release date.";const a=new Date(o),l=new Date,c=a.getTime()-l.getTime(),u=Math.abs(c),d=Math.floor(u/6e4),f=Math.floor(d/60),h=Math.floor(f/24),m=Math.floor(h/365),g=Math.floor(h%365/30);let w="";m>0&&(w+=`${m} year${m===1?"":"s"}`),g>0&&(w+=`${w?" ":""}${g} month${g===1?"":"s"}`),!w&&h>0&&(w=`${h} day${h===1?"":"s"}`),!w&&f>0&&(w=`${f} hour${f===1?"":"s"}`),w||(w=`${d} minute${d===1?"":"s"}`);const p=a.toLocaleString();return c>=0?`Releases on ${p} (in ${w})`:`Release time passed (${w} ago)  ${p}`}return Se.useEffect(()=>{if(!t){const o=new Date;e(new Date(o.getTime()-o.getTimezoneOffset()*6e4).toISOString().slice(0,16))}},[]),ce.jsxs("div",{style:{display:"grid",gap:6},children:[ce.jsx("input",{type:"datetime-local",value:t,onChange:o=>e(o.target.value)}),ce.jsxs("div",{style:{display:"flex",gap:6,flexWrap:"wrap"},children:[ce.jsx("button",{type:"button",onClick:()=>r(30),children:"+1 month"}),ce.jsx("button",{type:"button",onClick:()=>r(7),children:"+7 days"}),ce.jsx("button",{type:"button",onClick:()=>i(1),children:"+1 year"}),ce.jsx("button",{type:"button",onClick:()=>i(5),children:"+5 years"})]}),ce.jsx("div",{style:{fontSize:12,color:"#666"},children:s(t)})]})}function z7({vaultAddress:t,provider:e,reserves:n,addressesProviderAddr:r,dataProviderAddr:i,reserveApys:s,withBusy:o,globalBusy:a}){const[l,c]=Se.useState(null),[u,d]=Se.useState(""),[f,h]=Se.useState(""),[m,g]=Se.useState(""),[w,p]=Se.useState(""),[v,y]=Se.useState("100"),[C,P]=Se.useState(0n),[L,j]=Se.useState(""),[D,V]=Se.useState(""),[F,W]=Se.useState(""),[K,$]=Se.useState(""),[M,x]=Se.useState(!1),[O,B]=Se.useState(!1),[b,E]=Se.useState(18),[k,I]=Se.useState(!1),[A,S]=Se.useState([]),[T,R]=Se.useState(!1);Se.useEffect(()=>{e&&(async()=>{try{const Z=new Ge(t,pr,e),te=await Z.releaseTime();c({releaseTime:Number(te)}),E(18);try{const ue=await Z.owner(),me=await Z.pendingOwner();V(ue),W(me)}catch{}return}catch{}c(null)})()},[e,t]);async function N(){}Se.useEffect(()=>{e&&(async()=>{try{const te=await(await e.getSigner()).getAddress();let ue=null;if(ue=f||null,!ue)return;const me=new Ge(ue,["function balanceOf(address) view returns (uint256)","function decimals() view returns (uint8)"],e),he=Number(await me.decimals()),ke=await me.balanceOf(te);P(ke),E(he)}catch{}})()},[e,f]);function U(){const Z=Math.max(0,Math.min(100,parseInt(v||"0",10)));if(!Number.isFinite(Z))return;const te=C*BigInt(Z)/100n;d(ip(te,b))}function z(Z){const te=new Date,ue=new Date(Z*1e3),me=ue.getTime()-te.getTime(),he=Math.abs(me),ke=Math.floor(he/6e4),Pe=Math.floor(ke/60),xe=Math.floor(Pe/24),Te=Math.floor(xe/365),Ie=Math.floor(xe%365/30);let We="";Te>0&&(We+=`${Te} year${Te===1?"":"s"}`),Ie>0&&(We+=`${We?" ":""}${Ie} month${Ie===1?"":"s"}`),!We&&xe>0&&(We=`${xe} day${xe===1?"":"s"}`),!We&&Pe>0&&(We=`${Pe} hour${Pe===1?"":"s"}`),We||(We=`${ke} minute${ke===1?"":"s"}`);const Yt=ue.toLocaleString();return me>=0?`Releases on ${Yt} (in ${We})`:`Release time passed (${We} ago)  ${Yt}`}function q(Z){const te=n.find(ue=>ue.address.toLowerCase()===(Z||"").toLowerCase());return te?`${te.symbol} (${te.address})`:Z}Se.useEffect(()=>{N()},[l]);async function Q(){if(!e||!t||!i||n.length===0){S([]);return}try{const Z=new Ge(i,O7,e),te=[];for(const ue of n)try{const[me]=await Z.getReserveTokensAddresses(ue.address);if(!me||me==="0x0000000000000000000000000000000000000000")continue;const he=new Ge(me,["function balanceOf(address) view returns (uint256)","function decimals() view returns (uint8)"],e),ke=await he.balanceOf(t);if(ke>0n){const Te=Number(await he.decimals()),Ie=s[ue.address.toLowerCase()];te.push({symbol:ue.symbol,asset:ue.address,aToken:me,balance:ip(ke,Te),apy:Ie,kind:"aToken"})}const Pe=new Ge(ue.address,["function balanceOf(address) view returns (uint256)","function decimals() view returns (uint8)"],e),xe=await Pe.balanceOf(t);if(xe>0n){const Te=Number(await Pe.decimals());te.push({symbol:ue.symbol,asset:ue.address,balance:ip(xe,Te),kind:"underlying"})}}catch{}S(te)}catch{S([])}}Se.useEffect(()=>{Q()},[e,t,i,n,s]);async function ie(Z){Z.preventDefault(),!(!e||!l)&&await o(async()=>{const te=await e.getSigner();if(!f||!(f.startsWith("0x")&&f.length===42)){alert("Token address invalid");return}const ue=new Ge(f,["function approve(address spender, uint256 amount) returns (bool)","function allowance(address owner, address spender) view returns (uint256)","function decimals() view returns (uint8)"],e),me=await ue.decimals(),he=x2(u||"0",Number(me));if(he===0n)return;const ke=q(f),Pe=new Date(l.releaseTime*1e3).toLocaleString(),xe=z(l.releaseTime);if(!window.confirm(`You are about to deposit into Aave via Timelock:

Token: ${ke}
Amount: ${u}

Release time: ${Pe}
${xe}

Proceed?`))return;const Ie=await te.getAddress();if(await ue.allowance(Ie,t)<he){const Wf=(1n<<256n)-1n;await(await ue.connect(te).approve(t,Wf)).wait()}await(await new Ge(t,pr,e).connect(te).deposit(f,"0x0000000000000000000000000000000000000000",he)).wait(),d(""),await Q()})}async function oe(){if(!e||!l)return;const Z=await e.getSigner(),te=new Ge(t,pr,e),ue=Math.floor(Date.now()/1e3),me=l.releaseTime;if(ue<me){alert("Vault is still locked");return}await(await te.connect(Z).sweepAllATokensAfterRelease(await Z.getAddress())).wait()}async function J(){if(!e||!l)return;const Z=await e.getSigner(),te=new Ge(t,pr,e),ue=Math.floor(Date.now()/1e3),me=l.releaseTime;if(ue<me){alert("Vault is still locked");return}await(await te.connect(Z).sweepAllATokensAfterRelease(await Z.getAddress())).wait()}async function le(){if(!e||!l)return;const Z=await e.getSigner(),te=new Ge(t,pr,e),ue=Math.floor(Date.now()/1e3),me=l.releaseTime;if(ue<me){alert("Vault is still locked");return}const he=x2(u||"0",b);if(he===0n)return;await(await te.connect(Z).withdraw(he,await Z.getAddress())).wait(),d(""),await N()}return ce.jsxs("div",{style:{border:"1px solid #ddd",borderRadius:8,padding:12},children:[ce.jsxs("div",{style:{display:"flex",justifyContent:"space-between",alignItems:"center"},children:[ce.jsx("strong",{children:t}),l&&ce.jsx(C7,{target:l.releaseTime})]}),ce.jsxs("div",{style:{display:"grid",gap:6,marginTop:8,fontSize:14},children:[ce.jsx("div",{children:"Type: Multi-Token Timelock"}),l&&ce.jsxs("div",{children:["Release time: ",new Date(l.releaseTime*1e3).toLocaleString()]})]}),ce.jsxs("form",{onSubmit:ie,style:{display:"flex",gap:8,marginTop:8,flexWrap:"wrap",alignItems:"center",pointerEvents:a?"none":"auto",opacity:a?.6:1},children:[ce.jsxs("select",{value:f,onChange:Z=>h(Z.target.value),style:{minWidth:380},disabled:a,children:[ce.jsx("option",{value:"",children:"Select token to deposit"}),n.map(Z=>{const te=s[Z.address.toLowerCase()]||"",ue=te?`${Z.symbol}  ${te}`:Z.symbol;return ce.jsxs("option",{value:Z.address,children:[ue," (",Z.address,")"]},Z.address)})]}),ce.jsx("input",{placeholder:"Amount",value:u,onChange:Z=>d(Z.target.value),disabled:k||a}),ce.jsx("input",{style:{width:64},value:v,onChange:Z=>y(Z.target.value),disabled:a}),ce.jsx("span",{children:"%"}),ce.jsx("button",{type:"button",onClick:U,disabled:a,children:"Set % amount"}),ce.jsx("button",{type:"submit",disabled:k||a,children:k?"Processing":"Transfer to Timelock"})]}),ce.jsxs("div",{style:{display:"flex",gap:8,marginTop:8,pointerEvents:a?"none":"auto",opacity:a?.6:1},children:[ce.jsx("button",{onClick:()=>o(le),disabled:a,children:"Withdraw"}),ce.jsx("button",{onClick:()=>o(oe),disabled:a,children:"Withdraw All"}),ce.jsx("button",{onClick:()=>o(J),disabled:a,children:"Sweep ALL aTokens"}),ce.jsxs(ce.Fragment,{children:[ce.jsx("input",{placeholder:"Sweep token address",value:m,onChange:Z=>g(Z.target.value),style:{width:260},disabled:a}),ce.jsx("button",{disabled:a,onClick:async()=>{if(!e||!l)return;const Z=await e.getSigner();if(Math.floor(Date.now()/1e3)<((l==null?void 0:l.releaseTime)||0)){alert("Vault is still locked");return}if(!m||!(m.startsWith("0x")&&m.length===42)){alert("Token address invalid");return}await(await new Ge(t,pr,e).connect(Z).sweepTokenAfterRelease(m,await Z.getAddress())).wait(),g("")},children:"Sweep token"})]})]}),ce.jsxs("div",{style:{display:"grid",gap:6,marginTop:10},children:[ce.jsx("div",{style:{fontWeight:600},children:"Ownership"}),ce.jsxs("div",{children:["Owner: ",D||""]}),F&&F!=="0x0000000000000000000000000000000000000000"&&ce.jsxs("div",{children:["Pending owner: ",F]}),ce.jsxs("div",{style:{display:"flex",gap:8,alignItems:"center",flexWrap:"wrap"},children:[ce.jsx("input",{placeholder:"New owner address",value:K,onChange:Z=>$(Z.target.value),style:{width:320}}),ce.jsx("button",{type:"button",disabled:M,onClick:async()=>{if(!(!e||!K)){if(!(K.startsWith("0x")&&K.length===42)){alert("Invalid address");return}x(!0);try{const Z=await e.getSigner(),te=new Ge(t,pr,e);await(await te.connect(Z).transferOwnership(K)).wait(),$("");const me=await te.owner(),he=await te.pendingOwner();V(me),W(he)}finally{x(!1)}}},children:M?"Starting":"Start transfer"}),ce.jsx("button",{type:"button",disabled:O,onClick:async()=>{if(e){B(!0);try{const Z=await e.getSigner(),te=new Ge(t,pr,e);await(await te.connect(Z).acceptOwnership()).wait();const me=await te.owner(),he=await te.pendingOwner();V(me),W(he)}finally{B(!1)}}},children:O?"Accepting":"Accept ownership"})]})]}),ce.jsxs("div",{style:{display:"flex",gap:8,marginTop:8,alignItems:"center",flexWrap:"wrap"},children:[ce.jsx("input",{type:"datetime-local",value:L,onChange:Z=>j(Z.target.value)}),ce.jsx("button",{type:"button",disabled:T||!L,onClick:async()=>{if(!e||!l)return;const Z=Math.floor(new Date(L).getTime()/1e3);if(!Z||Z<=(l.releaseTime||0)){alert("New release must be greater than current");return}R(!0);try{const te=await e.getSigner();await(await new Ge(t,pr,e).connect(te).extendLock(Z)).wait(),j(""),c(he=>he&&{...he,releaseTime:Z})}finally{R(!1)}},children:T?"Extending":"Extend lock"}),L&&ce.jsx("div",{style:{fontSize:12,color:"#666"},children:z(Math.floor(new Date(L).getTime()/1e3))})]}),A.length>0&&ce.jsxs("div",{style:{marginTop:12},children:[ce.jsx("div",{style:{fontWeight:600},children:"Tokens held by vault"}),ce.jsxs("table",{style:{width:"100%",fontSize:13,borderCollapse:"collapse",marginTop:6},children:[ce.jsx("thead",{children:ce.jsxs("tr",{style:{textAlign:"left"},children:[ce.jsx("th",{style:{padding:"4px 6px"},children:"Token"}),ce.jsx("th",{style:{padding:"4px 6px"},children:"Principal"}),ce.jsx("th",{style:{padding:"4px 6px"},children:"Withdrawable"}),ce.jsx("th",{style:{padding:"4px 6px"},children:"Growth"}),ce.jsx("th",{style:{padding:"4px 6px"},children:"APY"})]})}),ce.jsx("tbody",{children:A.map(Z=>Z.kind!=="aToken"?ce.jsxs("tr",{children:[ce.jsxs("td",{style:{padding:"4px 6px"},children:[Z.symbol," (underlying)"]}),ce.jsx("td",{style:{padding:"4px 6px"},children:""}),ce.jsx("td",{style:{padding:"4px 6px"},children:Z.balance}),ce.jsx("td",{style:{padding:"4px 6px"},children:""}),ce.jsx("td",{style:{padding:"4px 6px"},children:Z.apy||""})]},(Z.aToken||Z.asset)+Z.kind):ce.jsxs("tr",{children:[ce.jsx("td",{style:{padding:"4px 6px"},children:Z.symbol}),ce.jsx("td",{style:{padding:"4px 6px"},"data-token":Z.asset,children:ce.jsx(j7,{provider:e,vaultAddress:t,asset:Z.asset,decimalsHint:b})}),ce.jsx("td",{style:{padding:"4px 6px"},children:Z.balance}),ce.jsx("td",{style:{padding:"4px 6px"},children:ce.jsx(H7,{provider:e,vaultAddress:t,asset:Z.asset})}),ce.jsx("td",{style:{padding:"4px 6px"},children:Z.apy||""}),ce.jsx("td",{style:{padding:"4px 6px"},children:ce.jsx("button",{onClick:async()=>{if(!e||!l)return;const te=await e.getSigner();if(Math.floor(Date.now()/1e3)<((l==null?void 0:l.releaseTime)||0)){alert("Vault is still locked");return}await(await new Ge(t,pr,e).connect(te).withdrawAllUnderlying(Z.asset,await te.getAddress())).wait(),await N(),await Q()},children:"Withdraw All"})})]},(Z.aToken||Z.asset)+Z.kind))})]})]})]})}Ry.createRoot(document.getElementById("root")).render(ce.jsx(WI.StrictMode,{children:ce.jsx(F7,{})}));</script>
  </head>
  <body>
    <div id="root"></div>
  </body>
</html>
